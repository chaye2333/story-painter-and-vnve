System.register([],function(e,t){"use strict";return{execute:function(){function r(e,t){for(var r=0;r<t.length;r++){const n=t[r];if("string"!=typeof n&&!Array.isArray(n))for(const t in n)if("default"!==t&&!(t in e)){const r=Object.getOwnPropertyDescriptor(n,t);r&&Object.defineProperty(e,t,r.get?r:{enumerable:!0,get:()=>n[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}e({bW:function(e={}){const t=W.useRef(void 0),r=W.useRef(void 0),[n,i]=W.useState({isDirty:!1,isValidating:!1,isLoading:LQ(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:LQ(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!LQ(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:r,...i}=function(e={}){let t,r={...b0,...e},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:LQ(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},i={},s=(eQ(r.defaultValues)||eQ(r.values))&&sQ(r.defaultValues||r.values)||{},o=r.shouldUnregister?{}:sQ(s),a={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},u=0;const c={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let d={...c};const h={array:FQ(),state:FQ()},f=r.criteriaMode===pQ.all,p=e=>t=>{clearTimeout(u),u=setTimeout(e,t)},m=async e=>{if(!r.disabled&&(c.isValid||d.isValid||e)){const e=r.resolver?MQ((await x()).errors):await S(i,!0);e!==n.isValid&&h.state.next({isValid:e})}},g=(e,t)=>{!r.disabled&&(c.isValidating||c.validatingFields||d.isValidating||d.validatingFields)&&((e||Array.from(l.mount)).forEach(e=>{e&&(t?hQ(n.validatingFields,e,t):HQ(n.validatingFields,e))}),h.state.next({validatingFields:n.validatingFields,isValidating:!MQ(n.validatingFields)}))},y=(e,t=[],l,u,f=!0,p=!0)=>{if(u&&l&&!r.disabled){if(a.action=!0,p&&Array.isArray(cQ(i,e))){const t=l(cQ(i,e),u.argA,u.argB);f&&hQ(i,e,t)}if(p&&Array.isArray(cQ(n.errors,e))){const t=l(cQ(n.errors,e),u.argA,u.argB);f&&hQ(n.errors,e,t),m0(n.errors,e)}if((c.touchedFields||d.touchedFields)&&p&&Array.isArray(cQ(n.touchedFields,e))){const t=l(cQ(n.touchedFields,e),u.argA,u.argB);f&&hQ(n.touchedFields,e,t)}(c.dirtyFields||d.dirtyFields)&&(n.dirtyFields=XQ(s,o)),h.state.next({name:e,isDirty:A(e,t),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else hQ(o,e,t)},v=(e,t)=>{hQ(n.errors,e,t),h.state.next({errors:n.errors})},_=(e,t,r,n)=>{const l=cQ(i,e);if(l){const i=cQ(o,e,aQ(r)?cQ(s,e):r);aQ(i)||n&&n.defaultChecked||t?hQ(o,e,t?i:t0(l._f)):D(e,i),a.mount&&!a.action&&m()}},b=(e,t,i,o,a)=>{let l=!1,u=!1;const f={name:e};if(!r.disabled){if(!i||o){(c.isDirty||d.isDirty)&&(u=n.isDirty,n.isDirty=f.isDirty=A(),l=u!==f.isDirty);const r=kQ(cQ(s,e),t);u=!!cQ(n.dirtyFields,e),r?HQ(n.dirtyFields,e):hQ(n.dirtyFields,e,!0),f.dirtyFields=n.dirtyFields,l=l||(c.dirtyFields||d.dirtyFields)&&u!==!r}if(i){const t=cQ(n.touchedFields,e);t||(hQ(n.touchedFields,e,i),f.touchedFields=n.touchedFields,l=l||(c.touchedFields||d.touchedFields)&&t!==i)}l&&a&&h.state.next(f)}return l?f:{}},w=(e,i,s,o)=>{const a=cQ(n.errors,e),l=(c.isValid||d.isValid)&&dQ(i)&&n.isValid!==i;if(r.delayError&&s?(t=p(()=>v(e,s)),t(r.delayError)):(clearTimeout(u),t=null,s?hQ(n.errors,e,s):HQ(n.errors,e)),(s?!kQ(a,s):a)||!MQ(o)||l){const t={...o,...l&&dQ(i)?{isValid:i}:{},errors:n.errors,name:e};n={...n,...t},h.state.next(t)}},x=async e=>{g(e,!0);const t=await r.resolver(o,r.context,r0(e||l.mount,i,r.criteriaMode,r.shouldUseNativeValidation));return g(e),t},E=async e=>{const{errors:t}=await x(e);if(e)for(const r of e){const e=cQ(t,r);e?hQ(n.errors,r,e):HQ(n.errors,r)}else n.errors=t;return t},S=async(e,t,i={valid:!0})=>{for(const s in e){const a=e[s];if(a){const{_f:e,...s}=a;if(e){const s=l.array.has(e.name),u=a._f&&a0(a._f);u&&c.validatingFields&&g([e.name],!0);const d=await _0(a,l.disabled,o,f,r.shouldUseNativeValidation&&!t,s);if(u&&c.validatingFields&&g([e.name]),d[e.name]&&(i.valid=!1,t))break;!t&&(cQ(d,e.name)?s?g0(n.errors,d,e.name):hQ(n.errors,e.name,d[e.name]):HQ(n.errors,e.name))}!MQ(s)&&await S(s,t,i)}}return i.valid},C=()=>{for(const e of l.unMount){const t=cQ(i,e);t&&(t._f.refs?t._f.refs.every(e=>!GQ(e)):!GQ(t._f.ref))&&z(e)}l.unMount=new Set},A=(e,t)=>!r.disabled&&(e&&t&&hQ(o,e,t),!kQ(F(),s)),T=(e,t,r)=>TQ(e,l,{...a.mount?o:aQ(t)?s:AQ(e)?{[e]:t}:t},r,t),D=(e,t,r={})=>{const n=cQ(i,e);let s=t;if(n){const r=n._f;r&&(!r.disabled&&hQ(o,e,JQ(t,r)),s=UQ(r.ref)&&JJ(t)?"":t,jQ(r.ref)?[...r.ref.options].forEach(e=>e.selected=s.includes(e.value)):r.refs?KJ(r.ref)?r.refs.forEach(e=>{e.defaultChecked&&e.disabled||(Array.isArray(s)?e.checked=!!s.find(t=>t===e.value):e.checked=s===e.value||!!s)}):r.refs.forEach(e=>e.checked=e.value===s):NQ(r.ref)?r.ref.value="":(r.ref.value=s,r.ref.type||h.state.next({name:e,values:sQ(o)})))}(r.shouldDirty||r.shouldTouch)&&b(e,s,r.shouldTouch,r.shouldDirty,!0),r.shouldValidate&&R(e)},k=(e,t,r)=>{for(const n in t){if(!t.hasOwnProperty(n))return;const s=t[n],o=e+"."+n,a=cQ(i,o);(l.array.has(e)||eQ(s)||a&&!a._f)&&!ZJ(s)?k(o,s,r):D(o,s,r)}},P=(e,t,r={})=>{const u=cQ(i,e),f=l.array.has(e),p=sQ(t);hQ(o,e,p),f?(h.array.next({name:e,values:sQ(o)}),(c.isDirty||c.dirtyFields||d.isDirty||d.dirtyFields)&&r.shouldDirty&&h.state.next({name:e,dirtyFields:XQ(s,o),isDirty:A(e,p)})):!u||u._f||JJ(p)?D(e,p,r):k(e,p,r),u0(e,l)&&h.state.next({...n,name:e}),h.state.next({name:a.mount?e:void 0,values:sQ(o)})},B=async e=>{a.mount=!0;const s=e.target;let u=s.name,p=!0;const y=cQ(i,u),v=e=>{p=Number.isNaN(e)||ZJ(e)&&isNaN(e.getTime())||kQ(e,cQ(o,u,e))},_=s0(r.mode),E=s0(r.reValidateMode);if(y){let a,C;const A=s.type?t0(y._f):tQ(e),T=e.type===fQ.BLUR||e.type===fQ.FOCUS_OUT,D=!l0(y._f)&&!r.resolver&&!cQ(n.errors,u)&&!y._f.deps||p0(T,cQ(n.touchedFields,u),n.isSubmitted,E,_),k=u0(u,l,T);hQ(o,u,A),T?s&&s.readOnly||(y._f.onBlur&&y._f.onBlur(e),t&&t(0)):y._f.onChange&&y._f.onChange(e);const P=b(u,A,T),B=!MQ(P)||k;if(!T&&h.state.next({name:u,type:e.type,values:sQ(o)}),D)return(c.isValid||d.isValid)&&("onBlur"===r.mode?T&&m():T||m()),B&&h.state.next({name:u,...k?{}:P});if(!T&&k&&h.state.next({...n}),r.resolver){const{errors:e}=await x([u]);if(v(A),p){const t=d0(n.errors,i,u),r=d0(e,i,t.name||u);a=r.error,u=r.name,C=MQ(e)}}else g([u],!0),a=(await _0(y,l.disabled,o,f,r.shouldUseNativeValidation))[u],g([u]),v(A),p&&(a?C=!1:(c.isValid||d.isValid)&&(C=await S(i,!0)));p&&(y._f.deps&&(!Array.isArray(y._f.deps)||y._f.deps.length>0)&&R(y._f.deps),w(u,C,a,P))}},O=(e,t)=>{if(cQ(n.errors,t)&&e.focus)return e.focus(),1},R=async(e,t={})=>{let s,o;const a=RQ(e);if(r.resolver){const t=await E(aQ(e)?e:a);s=MQ(t),o=e?!a.some(e=>cQ(t,e)):s}else e?(o=(await Promise.all(a.map(async e=>{const t=cQ(i,e);return await S(t&&t._f?{[e]:t}:t)}))).every(Boolean),(o||n.isValid)&&m()):o=s=await S(i);return h.state.next({...!AQ(e)||(c.isValid||d.isValid)&&s!==n.isValid?{}:{name:e},...r.resolver||!e?{isValid:s}:{},errors:n.errors}),t.shouldFocus&&!o&&c0(i,O,e?a:l.mount),o},F=(e,t)=>{let r={...a.mount?o:s};return t&&(r=IQ(t.dirtyFields?n.dirtyFields:n.touchedFields,r)),aQ(e)?r:AQ(e)?cQ(r,e):e.map(e=>cQ(r,e))},I=(e,t)=>({invalid:!!cQ((t||n).errors,e),isDirty:!!cQ((t||n).dirtyFields,e),error:cQ((t||n).errors,e),isValidating:!!cQ(n.validatingFields,e),isTouched:!!cQ((t||n).touchedFields,e)}),M=e=>{e&&RQ(e).forEach(e=>HQ(n.errors,e)),h.state.next({errors:e?n.errors:{}})},N=(e,t,r)=>{const s=(cQ(i,e,{_f:{}})._f||{}).ref,o=cQ(n.errors,e)||{},{ref:a,message:l,type:u,...c}=o;hQ(n.errors,e,{...c,...t,ref:s}),h.state.next({name:e,errors:n.errors,isValid:!1}),r&&r.shouldFocus&&s&&s.focus&&s.focus()},L=(e,t)=>LQ(e)?h.state.subscribe({next:r=>"values"in r&&e(T(void 0,t),r)}):T(e,t,!0),U=e=>h.state.subscribe({next:t=>{f0(e.name,t.name,e.exact)&&h0(t,e.formState||c,Z,e.reRenderRoot)&&e.callback({values:{...o},...n,...t,defaultValues:s})}}).unsubscribe,j=e=>(a.mount=!0,d={...d,...e.formState},U({...e,formState:d})),z=(e,t={})=>{for(const a of e?RQ(e):l.mount)l.mount.delete(a),l.array.delete(a),t.keepValue||(HQ(i,a),HQ(o,a)),!t.keepError&&HQ(n.errors,a),!t.keepDirty&&HQ(n.dirtyFields,a),!t.keepTouched&&HQ(n.touchedFields,a),!t.keepIsValidating&&HQ(n.validatingFields,a),!r.shouldUnregister&&!t.keepDefaultValue&&HQ(s,a);h.state.next({values:sQ(o)}),h.state.next({...n,...t.keepDirty?{isDirty:A()}:{}}),!t.keepIsValid&&m()},V=({disabled:e,name:t})=>{(dQ(e)&&a.mount||e||l.disabled.has(t))&&(e?l.disabled.add(t):l.disabled.delete(t))},G=(e,t={})=>{let n=cQ(i,e);const o=dQ(t.disabled)||dQ(r.disabled);return hQ(i,e,{...n||{},_f:{...n&&n._f?n._f:{ref:{name:e}},name:e,mount:!0,...t}}),l.mount.add(e),n?V({disabled:dQ(t.disabled)?t.disabled:r.disabled,name:e}):_(e,!0,t.value),{...o?{disabled:t.disabled||r.disabled}:{},...r.progressive?{required:!!t.required,min:i0(t.min),max:i0(t.max),minLength:i0(t.minLength),maxLength:i0(t.maxLength),pattern:i0(t.pattern)}:{},name:e,onChange:B,onBlur:B,ref:o=>{if(o){G(e,t),n=cQ(i,e);const r=aQ(o.value)&&o.querySelectorAll&&o.querySelectorAll("input,select,textarea")[0]||o,a=VQ(r),l=n._f.refs||[];if(a?l.find(e=>e===r):r===n._f.ref)return;hQ(i,e,{_f:{...n._f,...a?{refs:[...l.filter(GQ),r,...Array.isArray(cQ(s,e))?[{}]:[]],ref:{type:r.type,name:e}}:{ref:r}}}),_(e,!1,void 0,r)}else n=cQ(i,e,{}),n._f&&(n._f.mount=!1),(r.shouldUnregister||t.shouldUnregister)&&(!rQ(l.array,e)||!a.action)&&l.unMount.add(e)}}},H=()=>r.shouldFocusError&&c0(i,O,l.mount),$=e=>{dQ(e)&&(h.state.next({disabled:e}),c0(i,(t,r)=>{const n=cQ(i,r);n&&(t.disabled=n._f.disabled||e,Array.isArray(n._f.refs)&&n._f.refs.forEach(t=>{t.disabled=n._f.disabled||e}))},0,!1))},W=(e,t)=>async s=>{let a;s&&(s.preventDefault&&s.preventDefault(),s.persist&&s.persist());let u=sQ(o);if(h.state.next({isSubmitting:!0}),r.resolver){const{errors:e,values:t}=await x();n.errors=e,u=sQ(t)}else await S(i);if(l.disabled.size)for(const e of l.disabled)HQ(u,e);if(HQ(n.errors,"root"),MQ(n.errors)){h.state.next({errors:{}});try{await e(u,s)}catch(c){a=c}}else t&&await t({...n.errors},s),H(),setTimeout(H);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:MQ(n.errors)&&!a,submitCount:n.submitCount+1,errors:n.errors}),a)throw a},q=(e,t={})=>{cQ(i,e)&&(aQ(t.defaultValue)?P(e,sQ(cQ(s,e))):(P(e,t.defaultValue),hQ(s,e,sQ(t.defaultValue))),t.keepTouched||HQ(n.touchedFields,e),t.keepDirty||(HQ(n.dirtyFields,e),n.isDirty=t.defaultValue?A(e,sQ(cQ(s,e))):A()),t.keepError||(HQ(n.errors,e),c.isValid&&m()),h.state.next({...n}))},X=(e,t={})=>{const u=e?sQ(e):s,d=sQ(u),f=MQ(e),p=f?s:d;if(t.keepDefaultValues||(s=u),!t.keepValues){if(t.keepDirtyValues){const e=new Set([...l.mount,...Object.keys(XQ(s,o))]);for(const t of Array.from(e))cQ(n.dirtyFields,t)?hQ(p,t,cQ(o,t)):P(t,cQ(p,t))}else{if(iQ&&aQ(e))for(const e of l.mount){const t=cQ(i,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(UQ(e)){const t=e.closest("form");if(t){t.reset();break}}}}if(t.keepFieldsRef)for(const e of l.mount)P(e,cQ(p,e));else i={}}o=r.shouldUnregister?t.keepDefaultValues?sQ(s):{}:sQ(p),h.array.next({values:{...p}}),h.state.next({values:{...p}})}l={mount:t.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!c.isValid||!!t.keepIsValid||!!t.keepDirtyValues||!r.shouldUnregister&&!MQ(p),a.watch=!!r.shouldUnregister,a.action=!1,t.keepErrors||(n.errors={}),h.state.next({submitCount:t.keepSubmitCount?n.submitCount:0,isDirty:!f&&(t.keepDirty?n.isDirty:!(!t.keepDefaultValues||kQ(e,s))),isSubmitted:!!t.keepIsSubmitted&&n.isSubmitted,dirtyFields:f?{}:t.keepDirtyValues?t.keepDefaultValues&&o?XQ(s,o):n.dirtyFields:t.keepDefaultValues&&e?XQ(s,e):t.keepDirty?n.dirtyFields:{},touchedFields:t.keepTouched?n.touchedFields:{},errors:t.keepErrors?n.errors:{},isSubmitSuccessful:!!t.keepIsSubmitSuccessful&&n.isSubmitSuccessful,isSubmitting:!1,defaultValues:s})},Y=(e,t)=>X(LQ(e)?e(o):e,t),K=(e,t={})=>{const r=cQ(i,e),n=r&&r._f;if(n){const e=n.refs?n.refs[0]:n.ref;e.focus&&(e.focus(),t.shouldSelect&&LQ(e.select)&&e.select())}},Z=e=>{n={...n,...e}},J={control:{register:G,unregister:z,getFieldState:I,handleSubmit:W,setError:N,_subscribe:U,_runSchema:x,_focusError:H,_getWatch:T,_getDirty:A,_setValid:m,_setFieldArray:y,_setDisabledField:V,_setErrors:e=>{n.errors=e,h.state.next({errors:n.errors,isValid:!1})},_getFieldArray:e=>lQ(cQ(a.mount?o:s,e,r.shouldUnregister?cQ(s,e,[]):[])),_reset:X,_resetDefaultValues:()=>LQ(r.defaultValues)&&r.defaultValues().then(e=>{Y(e,r.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:C,_disableForm:$,_subjects:h,_proxyFormState:c,get _fields(){return i},get _formValues(){return o},get _state(){return a},set _state(e){a=e},get _defaultValues(){return s},get _names(){return l},set _names(e){l=e},get _formState(){return n},get _options(){return r},set _options(e){r={...r,...e}}},subscribe:j,trigger:R,register:G,handleSubmit:W,watch:L,setValue:P,getValues:F,reset:Y,resetField:q,clearErrors:M,unregister:z,setError:N,setFocus:K,getFieldState:I};return{...J,formControl:J}}(e);t.current={...i,formState:n}}const s=t.current.control;return s._options=e,CQ(()=>{const e=s._subscribe({formState:s._proxyFormState,callback:()=>i({...s._formState}),reRenderRoot:!0});return i(e=>({...e,isReady:!0})),s._formState.isReady=!0,e},[s]),W.useEffect(()=>s._disableForm(e.disabled),[s,e.disabled]),W.useEffect(()=>{e.mode&&(s._options.mode=e.mode),e.reValidateMode&&(s._options.reValidateMode=e.reValidateMode)},[s,e.mode,e.reValidateMode]),W.useEffect(()=>{e.errors&&(s._setErrors(e.errors),s._focusError())},[s,e.errors]),W.useEffect(()=>{e.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,e.shouldUnregister]),W.useEffect(()=>{if(s._proxyFormState.isDirty){const e=s._getDirty();e!==n.isDirty&&s._subjects.state.next({isDirty:e})}},[s,n.isDirty]),W.useEffect(()=>{var t;e.values&&!kQ(e.values,r.current)?(s._reset(e.values,{keepFieldsRef:!0,...s._options.resetOptions}),(null===(t=s._options.resetOptions)||void 0===t?void 0:t.keepIsValid)||s._setValid(),r.current=e.values,i(e=>({...e}))):s._resetDefaultValues()},[s,e.values]),W.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),t.current.formState=SQ(n,s),t.current},bs:function(e,t,r){return function(e,t,r){var n,i;"function"==typeof e?(n=t||[],i=r):(n=[],i=t);var s=W.useRef({hasResult:!1,result:i,error:null}),o=W.useReducer(function(e){return e+1},0);o[0];var a=o[1],l=W.useMemo(function(){var t="function"==typeof e?e():e;if(!t||"function"!=typeof t.subscribe)throw e===t?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!s.current.hasResult&&"undefined"!=typeof window&&("function"!=typeof t.hasValue||t.hasValue()))if("function"==typeof t.getValue)s.current.result=t.getValue(),s.current.hasResult=!0;else{var r=t.subscribe(function(e){s.current.result=e,s.current.hasResult=!0});"function"==typeof r?r():r.unsubscribe()}return t},n);if(W.useDebugValue(s.current.result),W.useEffect(function(){var e=l.subscribe(function(e){var t=s.current;null===t.error&&t.result===e||(t.error=null,t.result=e,t.hasResult=!0,a())},function(e){var t=s.current;t.error!==e&&(t.error=e,a())});return"function"==typeof e?e:e.unsubscribe.bind(e)},n),s.current.error)throw s.current.error;return s.current.result}(function(){return HZ(e)},t||[],r)},c:kf,cP:function(e){return W.forwardRef(e)},cQ:Tne,cV:function(e,t,r){const n=e;return W.forwardRef(function(e,i){const s=e,{className:o}=s,a=Ane(s,["className"]),l=Sne({},a);return r&&r.forEach(e=>{void 0!==a[e]&&delete l[e]}),W.createElement(n,Sne({ref:i,className:Tne(t(a),o)},l))})},cW:Dne,cY:function(e,...t){return Dne(e,{className:Tne(t)})},d4:function(e){return W.forwardRef(function(t,r){return W.createElement(e,lne(ane({},t),{ref:r}))})},d5:fCe,d6:SAe,d9:OAe,dD:function(e={},t=[]){return W.useMemo(()=>!1===e.enabled?null:CCe(e),[e.id,e.enabled,...t])},dG:function(e){return e.editor?W.createElement(VCe,$Ee({key:e.editor.key},e)):null},dK:function(e){const t=EQ(),{control:r=t.control,name:n,keyName:i="id",shouldUnregister:s,rules:o}=e,[a,l]=W.useState(r._getFieldArray(n)),u=W.useRef(r._getFieldArray(n).map(w0)),c=W.useRef(!1);r._names.array.add(n),W.useMemo(()=>o&&a.length>=0&&r.register(n,o),[r,n,a.length,o]),CQ(()=>r._subjects.array.subscribe({next:({values:e,name:t})=>{if(t===n||!t){const t=cQ(e,n);Array.isArray(t)&&(l(t),u.current=t.map(w0))}}}).unsubscribe,[r,n]);const d=W.useCallback(e=>{c.current=!0,r._setFieldArray(n,e)},[r,n]);return W.useEffect(()=>{if(r._state.action=!1,u0(n,r._names)&&r._subjects.state.next({...r._formState}),c.current&&(!s0(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!s0(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([n]).then(e=>{const t=cQ(e.errors,n),i=cQ(r._formState.errors,n);(i?!t&&i.type||t&&(i.type!==t.type||i.message!==t.message):t&&t.type)&&(t?hQ(r._formState.errors,n,t):HQ(r._formState.errors,n),r._subjects.state.next({errors:r._formState.errors}))});else{const e=cQ(r._fields,n);!e||!e._f||s0(r._options.reValidateMode).isOnSubmit&&s0(r._options.mode).isOnSubmit||_0(e,r._names.disabled,r._formValues,r._options.criteriaMode===pQ.all,r._options.shouldUseNativeValidation,!0).then(e=>!MQ(e)&&r._subjects.state.next({errors:g0(r._formState.errors,e,n)}))}r._subjects.state.next({name:n,values:sQ(r._formValues)}),r._names.focus&&c0(r._fields,(e,t)=>{if(r._names.focus&&t.startsWith(r._names.focus)&&e.focus)return e.focus(),1}),r._names.focus="",r._setValid(),c.current=!1},[a,n,r]),W.useEffect(()=>(!cQ(r._formValues,n)&&r._setFieldArray(n),()=>{r._options.shouldUnregister||s?r.unregister(n):((e,t)=>{const n=cQ(r._fields,e);n&&n._f&&(n._f.mount=t)})(n,!1)}),[n,r,i,s]),{swap:W.useCallback((e,t)=>{const i=r._getFieldArray(n);k0(i,e,t),k0(u.current,e,t),d(i),l(i),r._setFieldArray(n,i,k0,{argA:e,argB:t},!1)},[d,n,r]),move:W.useCallback((e,t)=>{const i=r._getFieldArray(n);A0(i,e,t),A0(u.current,e,t),d(i),l(i),r._setFieldArray(n,i,A0,{argA:e,argB:t},!1)},[d,n,r]),prepend:W.useCallback((e,t)=>{const i=RQ(sQ(e)),s=T0(r._getFieldArray(n),i);r._names.focus=x0(n,0,t),u.current=T0(u.current,i.map(w0)),d(s),l(s),r._setFieldArray(n,s,T0,{argA:S0(e)})},[d,n,r]),append:W.useCallback((e,t)=>{const i=RQ(sQ(e)),s=E0(r._getFieldArray(n),i);r._names.focus=x0(n,s.length-1,t),u.current=E0(u.current,i.map(w0)),d(s),l(s),r._setFieldArray(n,s,E0,{argA:S0(e)})},[d,n,r]),remove:W.useCallback(e=>{const t=D0(r._getFieldArray(n),e);u.current=D0(u.current,e),d(t),l(t),!Array.isArray(cQ(r._fields,n))&&hQ(r._fields,n,void 0),r._setFieldArray(n,t,D0,{argA:e})},[d,n,r]),insert:W.useCallback((e,t,i)=>{const s=RQ(sQ(t)),o=C0(r._getFieldArray(n),e,s);r._names.focus=x0(n,e,i),u.current=C0(u.current,e,s.map(w0)),d(o),l(o),r._setFieldArray(n,o,C0,{argA:e,argB:S0(t)})},[d,n,r]),update:W.useCallback((e,t)=>{const i=sQ(t),s=P0(r._getFieldArray(n),e,i);u.current=[...s].map((t,r)=>t&&r!==e?u.current[r]:w0()),d(s),l([...s]),r._setFieldArray(n,s,P0,{argA:e,argB:i},!0,!1)},[d,n,r]),replace:W.useCallback(e=>{const t=RQ(sQ(e));u.current=t.map(w0),d([...t]),l([...t]),r._setFieldArray(n,[...t],e=>e,{},!0,!1)},[d,n,r]),fields:W.useMemo(()=>a.map((e,t)=>({...e,[i]:u.current[t]||w0()})),[a,i])}},dT:function(e,t){return function(e){const t=e.window?e.window:"undefined"!=typeof window?window:void 0,r=void 0!==t&&void 0!==t.document&&void 0!==t.document.createElement,n=!r;let i;if(gd(e.routes.length>0,"You must provide a non-empty routes array to createRouter"),e.mapRouteProperties)i=e.mapRouteProperties;else if(e.detectErrorBoundary){let t=e.detectErrorBoundary;i=e=>({hasErrorBoundary:t(e)})}else i=uh;let s,o,a,l={},u=Sd(e.routes,i,void 0,l),c=e.basename||"/",d=e.dataStrategy||bh,h=e.patchRoutesOnNavigation,f=fd({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},e.future),p=null,m=new Set,g=null,y=null,v=null,_=null!=e.hydrationData,b=Cd(u,e.history.location,c),w=!1,x=null;if(null==b&&!h){let t=Oh(404,{pathname:e.history.location.pathname}),{matches:r,route:n}=Bh(u);b=r,x={[n.id]:t}}if(b&&!e.hydrationData&&ke(b,u,e.history.location.pathname).active&&(b=null),b)if(b.some(e=>e.route.lazy))o=!1;else if(b.some(e=>e.route.loader))if(f.v7_partialHydration){let t=e.hydrationData?e.hydrationData.loaderData:null,r=e.hydrationData?e.hydrationData.errors:null;if(r){let e=b.findIndex(e=>void 0!==r[e.route.id]);o=b.slice(0,e+1).every(e=>!mh(e.route,t,r))}else o=b.every(e=>!mh(e.route,t,r))}else o=null!=e.hydrationData;else o=!0;else if(o=!1,b=[],f.v7_partialHydration){let t=ke(null,u,e.history.location.pathname);t.active&&t.matches&&(w=!0,b=t.matches)}let E,S,C={historyAction:e.history.action,location:e.history.location,matches:b,initialized:o,navigation:sh,restoreScrollPosition:null==e.hydrationData&&null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||x,fetchers:new Map,blockers:new Map},A=dd.Pop,T=!1,D=!1,k=new Map,P=null,B=!1,O=!1,R=[],F=new Set,I=new Map,M=0,N=-1,L=new Map,U=new Set,j=new Map,z=new Map,V=new Set,G=new Map,H=new Map;function $(){if(p=e.history.listen(t=>{let{action:r,location:n,delta:i}=t;if(S)return S(),void(S=void 0);yd(0===H.size||null!=i,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let s=xe({currentLocation:C.location,nextLocation:n,historyAction:r});if(s&&null!=i){let t=new Promise(e=>{S=e});return e.history.go(-1*i),void we(s,{state:"blocked",location:n,proceed(){we(s,{state:"proceeding",proceed:void 0,reset:void 0,location:n}),t.then(()=>e.history.go(i))},reset(){let e=new Map(C.blockers);e.set(s,ah),X({blockers:e})}})}return J(r,n)}),r){!function(e,t){try{let r=e.sessionStorage.getItem(ch);if(r){let e=JSON.parse(r);for(let[r,n]of Object.entries(e||{}))n&&Array.isArray(n)&&t.set(r,new Set(n||[]))}}catch(Ove){}}(t,k);let e=()=>function(e,t){if(t.size>0){let n={};for(let[e,r]of t)n[e]=[...r];try{e.sessionStorage.setItem(ch,JSON.stringify(n))}catch(r){yd(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}
/**
			 * React Router v6.30.2
			 *
			 * Copyright (c) Remix Software Inc.
			 *
			 * This source code is licensed under the MIT license found in the
			 * LICENSE.md file in the root directory of this source tree.
			 *
			 * @license MIT
			 */(t,k);t.addEventListener("pagehide",e),P=()=>t.removeEventListener("pagehide",e)}return C.initialized||J(dd.Pop,C.location,{initialHydration:!0}),a}function W(){p&&p(),P&&P(),m.clear(),E&&E.abort(),C.fetchers.forEach((e,t)=>fe(t)),C.blockers.forEach((e,t)=>be(t))}function q(e){return m.add(e),()=>m.delete(e)}function X(e,t){void 0===t&&(t={}),C=fd({},C,e);let r=[],n=[];f.v7_fetcherPersist&&C.fetchers.forEach((e,t)=>{"idle"===e.state&&(V.has(t)?n.push(t):r.push(t))}),V.forEach(e=>{C.fetchers.has(e)||I.has(e)||n.push(e)}),[...m].forEach(e=>e(C,{deletedFetchers:n,viewTransitionOpts:t.viewTransitionOpts,flushSync:!0===t.flushSync})),f.v7_fetcherPersist?(r.forEach(e=>C.fetchers.delete(e)),n.forEach(e=>fe(e))):n.forEach(e=>V.delete(e))}function Y(t,r,n){var i,o;let a,{flushSync:l}=void 0===n?{}:n,c=null!=C.actionData&&null!=C.navigation.formMethod&&zh(C.navigation.formMethod)&&"loading"===C.navigation.state&&!0!==(null==(i=t.state)?void 0:i._isRedirect);a=r.actionData?Object.keys(r.actionData).length>0?r.actionData:null:c?C.actionData:null;let d=r.loaderData?Dh(C.loaderData,r.loaderData,r.matches||[],r.errors):C.loaderData,h=C.blockers;h.size>0&&(h=new Map(h),h.forEach((e,t)=>h.set(t,ah)));let f,p=!0===T||null!=C.navigation.formMethod&&zh(C.navigation.formMethod)&&!0!==(null==(o=t.state)?void 0:o._isRedirect);if(s&&(u=s,s=void 0),B||A===dd.Pop||(A===dd.Push?e.history.push(t,t.state):A===dd.Replace&&e.history.replace(t,t.state)),A===dd.Pop){let e=k.get(C.location.pathname);e&&e.has(t.pathname)?f={currentLocation:C.location,nextLocation:t}:k.has(t.pathname)&&(f={currentLocation:t,nextLocation:C.location})}else if(D){let e=k.get(C.location.pathname);e?e.add(t.pathname):(e=new Set([t.pathname]),k.set(C.location.pathname,e)),f={currentLocation:C.location,nextLocation:t}}X(fd({},r,{actionData:a,loaderData:d,historyAction:A,location:t,initialized:!0,navigation:sh,revalidation:"idle",restoreScrollPosition:De(t,r.matches||C.matches),preventScrollReset:p,blockers:h}),{viewTransitionOpts:f,flushSync:!0===l}),A=dd.Pop,T=!1,D=!1,B=!1,O=!1,R=[]}async function K(t,r){if("number"==typeof t)return void e.history.go(t);let n=dh(C.location,C.matches,c,f.v7_prependBasename,t,f.v7_relativeSplatPath,null==r?void 0:r.fromRouteId,null==r?void 0:r.relative),{path:i,submission:s,error:o}=hh(f.v7_normalizeFormMethod,!1,n,r),a=C.location,l=_d(C.location,i,r&&r.state);l=fd({},l,e.history.encodeLocation(l));let u=r&&null!=r.replace?r.replace:void 0,d=dd.Push;!0===u?d=dd.Replace:!1===u||null!=s&&zh(s.formMethod)&&s.formAction===C.location.pathname+C.location.search&&(d=dd.Replace);let h=r&&"preventScrollReset"in r?!0===r.preventScrollReset:void 0,p=!0===(r&&r.flushSync),m=xe({currentLocation:a,nextLocation:l,historyAction:d});if(!m)return await J(d,l,{submission:s,pendingError:o,preventScrollReset:h,replace:r&&r.replace,enableViewTransition:r&&r.viewTransition,flushSync:p});we(m,{state:"blocked",location:l,proceed(){we(m,{state:"proceeding",proceed:void 0,reset:void 0,location:l}),K(t,r)},reset(){let e=new Map(C.blockers);e.set(m,ah),X({blockers:e})}})}function Z(){ue(),X({revalidation:"loading"}),"submitting"!==C.navigation.state&&("idle"!==C.navigation.state?J(A||C.historyAction,C.navigation.location,{overrideNavigation:C.navigation,enableViewTransition:!0===D}):J(C.historyAction,C.location,{startUninterruptedRevalidation:!0}))}async function J(t,r,n){E&&E.abort(),E=null,A=t,B=!0===(n&&n.startUninterruptedRevalidation),Te(C.location,C.matches),T=!0===(n&&n.preventScrollReset),D=!0===(n&&n.enableViewTransition);let i=s||u,o=n&&n.overrideNavigation,a=null!=n&&n.initialHydration&&C.matches&&C.matches.length>0&&!w?C.matches:Cd(i,r,c),l=!0===(n&&n.flushSync);if(a&&C.initialized&&!O&&function(e,t){return e.pathname===t.pathname&&e.search===t.search&&(""===e.hash?""!==t.hash:e.hash===t.hash||""!==t.hash)}(C.location,r)&&!(n&&n.submission&&zh(n.submission.formMethod)))return void Y(r,{matches:a},{flushSync:l});let d=ke(a,i,r.pathname);if(d.active&&d.matches&&(a=d.matches),!a){let{error:e,notFoundMatches:t,route:n}=Ee(r.pathname);return void Y(r,{matches:t,loaderData:{},errors:{[n.id]:e}},{flushSync:l})}E=new AbortController;let h,f=Sh(e.history,r,E.signal,n&&n.submission);if(n&&n.pendingError)h=[Ph(a).route.id,{type:xd.error,error:n.pendingError}];else if(n&&n.submission&&zh(n.submission.formMethod)){let t=await Q(f,r,n.submission,a,d.active,{replace:n.replace,flushSync:l});if(t.shortCircuited)return;if(t.pendingActionResult){let[e,n]=t.pendingActionResult;if(Nh(n)&&Jd(n.error)&&404===n.error.status)return E=null,void Y(r,{matches:t.matches,loaderData:{},errors:{[e]:n.error}})}a=t.matches||a,h=t.pendingActionResult,o=Xh(r,n.submission),l=!1,d.active=!1,f=Sh(e.history,f.url,f.signal)}let{shortCircuited:p,matches:m,loaderData:g,errors:y}=await ee(f,r,a,d.active,o,n&&n.submission,n&&n.fetcherSubmission,n&&n.replace,n&&!0===n.initialHydration,l,h);p||(E=null,Y(r,fd({matches:m||a},kh(h),{loaderData:g,errors:y})))}async function Q(e,t,r,n,i,s){void 0===s&&(s={}),ue();let o,a=function(e,t){let r={state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text};return r}(t,r);if(X({navigation:a},{flushSync:!0===s.flushSync}),i){let r=await Pe(n,t.pathname,e.signal);if("aborted"===r.type)return{shortCircuited:!0};if("error"===r.type){let e=Ph(r.partialMatches).route.id;return{matches:r.partialMatches,pendingActionResult:[e,{type:xd.error,error:r.error}]}}if(!r.matches){let{notFoundMatches:e,error:r,route:n}=Ee(t.pathname);return{matches:e,pendingActionResult:[n.id,{type:xd.error,error:r}]}}n=r.matches}let l=Wh(n,t);if(l.route.action||l.route.lazy){if(o=(await ae("action",C,e,[l],n,null))[l.route.id],e.signal.aborted)return{shortCircuited:!0}}else o={type:xd.error,error:Oh(405,{method:e.method,pathname:t.pathname,routeId:l.route.id})};if(Lh(o)){let t;return t=s&&null!=s.replace?s.replace:Eh(o.response.headers.get("Location"),new URL(e.url),c)===C.location.pathname+C.location.search,await oe(e,o,!0,{submission:r,replace:t}),{shortCircuited:!0}}if(Mh(o))throw Oh(400,{type:"defer-action"});if(Nh(o)){let e=Ph(n,l.route.id);return!0!==(s&&s.replace)&&(A=dd.Push),{matches:n,pendingActionResult:[e.route.id,o]}}return{matches:n,pendingActionResult:[l.route.id,o]}}async function ee(t,r,n,i,o,a,l,d,h,p,m){let g=o||Xh(r,a),y=a||l||qh(g),v=!(B||f.v7_partialHydration&&h);if(i){if(v){let e=te(m);X(fd({navigation:g},void 0!==e?{actionData:e}:{}),{flushSync:p})}let e=await Pe(n,r.pathname,t.signal);if("aborted"===e.type)return{shortCircuited:!0};if("error"===e.type){let t=Ph(e.partialMatches).route.id;return{matches:e.partialMatches,loaderData:{},errors:{[t]:e.error}}}if(!e.matches){let{error:e,notFoundMatches:t,route:n}=Ee(r.pathname);return{matches:t,loaderData:{},errors:{[n.id]:e}}}n=e.matches}let _=s||u,[b,w]=ph(e.history,C,n,y,r,f.v7_partialHydration&&!0===h,f.v7_skipActionErrorRevalidation,O,R,F,V,j,U,_,c,m);if(Se(e=>!(n&&n.some(t=>t.route.id===e))||b&&b.some(t=>t.route.id===e)),N=++M,0===b.length&&0===w.length){let e=ye();return Y(r,fd({matches:n,loaderData:{},errors:m&&Nh(m[1])?{[m[0]]:m[1].error}:null},kh(m),e?{fetchers:new Map(C.fetchers)}:{}),{flushSync:p}),{shortCircuited:!0}}if(v){let e={};if(!i){e.navigation=g;let t=te(m);void 0!==t&&(e.actionData=t)}w.length>0&&(e.fetchers=re(w)),X(e,{flushSync:p})}w.forEach(e=>{me(e.key),e.controller&&I.set(e.key,e.controller)});let x=()=>w.forEach(e=>me(e.key));E&&E.signal.addEventListener("abort",x);let{loaderResults:S,fetcherResults:A}=await le(C,n,b,w,t);if(t.signal.aborted)return{shortCircuited:!0};E&&E.signal.removeEventListener("abort",x),w.forEach(e=>I.delete(e.key));let T=Rh(S);if(T)return await oe(t,T.result,!0,{replace:d}),{shortCircuited:!0};if(T=Rh(A),T)return U.add(T.key),await oe(t,T.result,!0,{replace:d}),{shortCircuited:!0};let{loaderData:D,errors:k}=Th(C,n,S,m,w,A,G);G.forEach((e,t)=>{e.subscribe(r=>{(r||e.done)&&G.delete(t)})}),f.v7_partialHydration&&h&&C.errors&&(k=fd({},C.errors,k));let P=ye(),L=ve(N),z=P||L||w.length>0;return fd({matches:n,loaderData:D,errors:k},z?{fetchers:new Map(C.fetchers)}:{})}function te(e){return e&&!Nh(e[1])?{[e[0]]:e[1].data}:C.actionData?0===Object.keys(C.actionData).length?null:C.actionData:void 0}function re(e){return e.forEach(e=>{let t=C.fetchers.get(e.key),r=Yh(void 0,t?t.data:void 0);C.fetchers.set(e.key,r)}),new Map(C.fetchers)}function ne(e,t,r,i){if(n)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");me(e);let o=!0===(i&&i.flushSync),a=s||u,l=dh(C.location,C.matches,c,f.v7_prependBasename,r,f.v7_relativeSplatPath,t,null==i?void 0:i.relative),d=Cd(a,l,c),h=ke(d,a,l);if(h.active&&h.matches&&(d=h.matches),!d)return void de(e,t,Oh(404,{pathname:l}),{flushSync:o});let{path:p,submission:m,error:g}=hh(f.v7_normalizeFormMethod,!0,l,i);if(g)return void de(e,t,g,{flushSync:o});let y=Wh(d,p),v=!0===(i&&i.preventScrollReset);m&&zh(m.formMethod)?ie(e,t,p,y,d,h.active,o,v,m):(j.set(e,{routeId:t,path:p}),se(e,t,p,y,d,h.active,o,v,m))}async function ie(t,r,n,i,o,a,l,d,h){function p(e){if(!e.route.action&&!e.route.lazy){let e=Oh(405,{method:h.formMethod,pathname:n,routeId:r});return de(t,r,e,{flushSync:l}),!0}return!1}if(ue(),j.delete(t),!a&&p(i))return;let m=C.fetchers.get(t);ce(t,function(e,t){let r={state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0};return r}(h,m),{flushSync:l});let g=new AbortController,y=Sh(e.history,n,g.signal,h);if(a){let e=await Pe(o,new URL(y.url).pathname,y.signal,t);if("aborted"===e.type)return;if("error"===e.type)return void de(t,r,e.error,{flushSync:l});if(!e.matches)return void de(t,r,Oh(404,{pathname:n}),{flushSync:l});if(p(i=Wh(o=e.matches,n)))return}I.set(t,g);let v=M,_=(await ae("action",C,y,[i],o,t))[i.route.id];if(y.signal.aborted)return void(I.get(t)===g&&I.delete(t));if(f.v7_fetcherPersist&&V.has(t)){if(Lh(_)||Nh(_))return void ce(t,Kh(void 0))}else{if(Lh(_))return I.delete(t),N>v?void ce(t,Kh(void 0)):(U.add(t),ce(t,Yh(h)),oe(y,_,!1,{fetcherSubmission:h,preventScrollReset:d}));if(Nh(_))return void de(t,r,_.error)}if(Mh(_))throw Oh(400,{type:"defer-action"});let b=C.navigation.location||C.location,w=Sh(e.history,b,g.signal),x=s||u,S="idle"!==C.navigation.state?Cd(x,C.navigation.location,c):C.matches;gd(S,"Didn't find any matches after fetcher action");let T=++M;L.set(t,T);let D=Yh(h,_.data);C.fetchers.set(t,D);let[k,P]=ph(e.history,C,S,h,b,!1,f.v7_skipActionErrorRevalidation,O,R,F,V,j,U,x,c,[i.route.id,_]);P.filter(e=>e.key!==t).forEach(e=>{let t=e.key,r=C.fetchers.get(t),n=Yh(void 0,r?r.data:void 0);C.fetchers.set(t,n),me(t),e.controller&&I.set(t,e.controller)}),X({fetchers:new Map(C.fetchers)});let B=()=>P.forEach(e=>me(e.key));g.signal.addEventListener("abort",B);let{loaderResults:z,fetcherResults:H}=await le(C,S,k,P,w);if(g.signal.aborted)return;g.signal.removeEventListener("abort",B),L.delete(t),I.delete(t),P.forEach(e=>I.delete(e.key));let $=Rh(z);if($)return oe(w,$.result,!1,{preventScrollReset:d});if($=Rh(H),$)return U.add($.key),oe(w,$.result,!1,{preventScrollReset:d});let{loaderData:W,errors:q}=Th(C,S,z,void 0,P,H,G);if(C.fetchers.has(t)){let e=Kh(_.data);C.fetchers.set(t,e)}ve(T),"loading"===C.navigation.state&&T>N?(gd(A,"Expected pending action"),E&&E.abort(),Y(C.navigation.location,{matches:S,loaderData:W,errors:q,fetchers:new Map(C.fetchers)})):(X({errors:q,loaderData:Dh(C.loaderData,W,S,q),fetchers:new Map(C.fetchers)}),O=!1)}async function se(t,r,n,i,s,o,a,l,u){let c=C.fetchers.get(t);ce(t,Yh(u,c?c.data:void 0),{flushSync:a});let d=new AbortController,h=Sh(e.history,n,d.signal);if(o){let e=await Pe(s,new URL(h.url).pathname,h.signal,t);if("aborted"===e.type)return;if("error"===e.type)return void de(t,r,e.error,{flushSync:a});if(!e.matches)return void de(t,r,Oh(404,{pathname:n}),{flushSync:a});i=Wh(s=e.matches,n)}I.set(t,d);let f=M,p=(await ae("loader",C,h,[i],s,t))[i.route.id];if(Mh(p)&&(p=await Hh(p,h.signal,!0)||p),I.get(t)===d&&I.delete(t),!h.signal.aborted){if(!V.has(t))return Lh(p)?N>f?void ce(t,Kh(void 0)):(U.add(t),void(await oe(h,p,!1,{preventScrollReset:l}))):void(Nh(p)?de(t,r,p.error):(gd(!Mh(p),"Unhandled fetcher deferred data"),ce(t,Kh(p.data))));ce(t,Kh(void 0))}}async function oe(n,i,s,o){let{submission:a,fetcherSubmission:l,preventScrollReset:u,replace:d}=void 0===o?{}:o;i.response.headers.has("X-Remix-Revalidate")&&(O=!0);let h=i.response.headers.get("Location");gd(h,"Expected a Location header on the redirect Response"),h=Eh(h,new URL(n.url),c);let f=_d(C.location,h,{_isRedirect:!0});if(r){let r=!1;if(i.response.headers.has("X-Remix-Reload-Document"))r=!0;else if(lh.test(h)){const n=e.history.createURL(h);r=n.origin!==t.location.origin||null==jd(n.pathname,c)}if(r)return void(d?t.location.replace(h):t.location.assign(h))}E=null;let p=!0===d||i.response.headers.has("X-Remix-Replace")?dd.Replace:dd.Push,{formMethod:m,formAction:g,formEncType:y}=C.navigation;!a&&!l&&m&&g&&y&&(a=qh(C.navigation));let v=a||l;if(ih.has(i.response.status)&&v&&zh(v.formMethod))await J(p,f,{submission:fd({},v,{formAction:h}),preventScrollReset:u||T,enableViewTransition:s?D:void 0});else{let e=Xh(f,a);await J(p,f,{overrideNavigation:e,fetcherSubmission:l,preventScrollReset:u||T,enableViewTransition:s?D:void 0})}}async function ae(e,t,r,n,s,o){let a,u={};try{a=await async function(e,t,r,n,i,s,o,a,l,u){let c=s.map(e=>e.route.lazy?async function(e,t,r){if(!e.lazy)return;let n=await e.lazy();if(!e.lazy)return;let i=r[e.id];gd(i,"No route found in manifest");let s={};for(let o in n){let e=void 0!==i[o]&&"hasErrorBoundary"!==o;yd(!e,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. The lazy route property "'+o+'" will be ignored.'),e||Ed.has(o)||(s[o]=n[o])}Object.assign(i,s),Object.assign(i,fd({},t(i),{lazy:void 0}))}(e.route,l,a):void 0),d=s.map((e,r)=>{let s=c[r],o=i.some(t=>t.route.id===e.route.id),a=async r=>(r&&"GET"===n.method&&(e.route.lazy||e.route.loader)&&(o=!0),o?async function(e,t,r,n,i,s){let o,a,l=n=>{let o,l=new Promise((e,t)=>o=t);a=()=>o(),t.signal.addEventListener("abort",a);let u=i=>"function"!=typeof n?Promise.reject(new Error('You cannot call the handler for a route which defines a boolean "'+e+'" [routeId: '+r.route.id+"]")):n({request:t,params:r.params,context:s},...void 0!==i?[i]:[]),c=(async()=>{try{return{type:"data",result:await(i?i(e=>u(e)):u())}}catch(Ove){return{type:"error",result:Ove}}})();return Promise.race([c,l])};try{let i=r.route[e];if(n)if(i){let e,[t]=await Promise.all([l(i).catch(t=>{e=t}),n]);if(void 0!==e)throw e;o=t}else{if(await n,i=r.route[e],!i){if("action"===e){let e=new URL(t.url),n=e.pathname+e.search;throw Oh(405,{method:t.method,pathname:n,routeId:r.route.id})}return{type:xd.data,result:void 0}}o=await l(i)}else{if(!i){let e=new URL(t.url);throw Oh(404,{pathname:e.pathname+e.search})}o=await l(i)}gd(void 0!==o.result,"You defined "+("action"===e?"an action":"a loader")+' for route "'+r.route.id+"\" but didn't return anything from your `"+e+"` function. Please return a value or `null`.")}catch(Ove){return{type:xd.error,result:Ove}}finally{a&&t.signal.removeEventListener("abort",a)}return o}(t,n,e,s,r,u):Promise.resolve({type:xd.data,result:void 0}));return fd({},e,{shouldLoad:o,resolve:a})}),h=await e({matches:d,request:n,params:s[0].params,fetcherKey:o,context:u});try{await Promise.all(c)}catch(Ove){}return h}(d,e,0,r,n,s,o,l,i)}catch(Ove){return n.forEach(t=>{u[t.route.id]={type:xd.error,error:Ove}}),u}for(let[i,l]of Object.entries(a))if(Ih(l)){let e=l.result;u[i]={type:xd.redirect,response:xh(e,r,i,s,c,f.v7_relativeSplatPath)}}else u[i]=await wh(l);return u}async function le(t,r,n,i,s){let o=t.matches,a=ae("loader",t,s,n,r,null),l=Promise.all(i.map(async r=>{if(r.matches&&r.match&&r.controller){let n=(await ae("loader",t,Sh(e.history,r.path,r.controller.signal),[r.match],r.matches,r.key))[r.match.route.id];return{[r.key]:n}}return Promise.resolve({[r.key]:{type:xd.error,error:Oh(404,{pathname:r.path})}})})),u=await a,c=(await l).reduce((e,t)=>Object.assign(e,t),{});return await Promise.all([Vh(r,u,s.signal,o,t.loaderData),Gh(r,c,i)]),{loaderResults:u,fetcherResults:c}}function ue(){O=!0,R.push(...Se()),j.forEach((e,t)=>{I.has(t)&&F.add(t),me(t)})}function ce(e,t,r){void 0===r&&(r={}),C.fetchers.set(e,t),X({fetchers:new Map(C.fetchers)},{flushSync:!0===(r&&r.flushSync)})}function de(e,t,r,n){void 0===n&&(n={});let i=Ph(C.matches,t);fe(e),X({errors:{[i.route.id]:r},fetchers:new Map(C.fetchers)},{flushSync:!0===(n&&n.flushSync)})}function he(e){return z.set(e,(z.get(e)||0)+1),V.has(e)&&V.delete(e),C.fetchers.get(e)||oh}function fe(e){let t=C.fetchers.get(e);!I.has(e)||t&&"loading"===t.state&&L.has(e)||me(e),j.delete(e),L.delete(e),U.delete(e),f.v7_fetcherPersist&&V.delete(e),F.delete(e),C.fetchers.delete(e)}function pe(e){let t=(z.get(e)||0)-1;t<=0?(z.delete(e),V.add(e),f.v7_fetcherPersist||fe(e)):z.set(e,t),X({fetchers:new Map(C.fetchers)})}function me(e){let t=I.get(e);t&&(t.abort(),I.delete(e))}function ge(e){for(let t of e){let e=Kh(he(t).data);C.fetchers.set(t,e)}}function ye(){let e=[],t=!1;for(let r of U){let n=C.fetchers.get(r);gd(n,"Expected fetcher: "+r),"loading"===n.state&&(U.delete(r),e.push(r),t=!0)}return ge(e),t}function ve(e){let t=[];for(let[r,n]of L)if(n<e){let e=C.fetchers.get(r);gd(e,"Expected fetcher: "+r),"loading"===e.state&&(me(r),L.delete(r),t.push(r))}return ge(t),t.length>0}function _e(e,t){let r=C.blockers.get(e)||ah;return H.get(e)!==t&&H.set(e,t),r}function be(e){C.blockers.delete(e),H.delete(e)}function we(e,t){let r=C.blockers.get(e)||ah;gd("unblocked"===r.state&&"blocked"===t.state||"blocked"===r.state&&"blocked"===t.state||"blocked"===r.state&&"proceeding"===t.state||"blocked"===r.state&&"unblocked"===t.state||"proceeding"===r.state&&"unblocked"===t.state,"Invalid blocker state transition: "+r.state+" -> "+t.state);let n=new Map(C.blockers);n.set(e,t),X({blockers:n})}function xe(e){let{currentLocation:t,nextLocation:r,historyAction:n}=e;if(0===H.size)return;H.size>1&&yd(!1,"A router only supports one blocker at a time");let i=Array.from(H.entries()),[s,o]=i[i.length-1],a=C.blockers.get(s);return a&&"proceeding"===a.state?void 0:o({currentLocation:t,nextLocation:r,historyAction:n})?s:void 0}function Ee(e){let t=Oh(404,{pathname:e}),r=s||u,{matches:n,route:i}=Bh(r);return Se(),{notFoundMatches:n,route:i,error:t}}function Se(e){let t=[];return G.forEach((r,n)=>{e&&!e(n)||(r.cancel(),t.push(n),G.delete(n))}),t}function Ce(e,t,r){if(g=e,v=t,y=r||null,!_&&C.navigation===sh){_=!0;let e=De(C.location,C.matches);null!=e&&X({restoreScrollPosition:e})}return()=>{g=null,v=null,y=null}}function Ae(e,t){if(y){let r=y(e,t.map(e=>function(e,t){let{route:r,pathname:n,params:i}=e;return{id:r.id,pathname:n,params:i,data:t[r.id],handle:r.handle}}(e,C.loaderData)));return r||e.key}return e.key}function Te(e,t){if(g&&v){let r=Ae(e,t);g[r]=v()}}function De(e,t){if(g){let r=Ae(e,t),n=g[r];if("number"==typeof n)return n}return null}function ke(e,t,r){if(h){if(!e)return{active:!0,matches:Ad(t,r,c,!0)||[]};if(Object.keys(e[0].params).length>0)return{active:!0,matches:Ad(t,r,c,!0)}}return{active:!1,matches:null}}async function Pe(e,t,r,n){if(!h)return{type:"success",matches:e};let o=e;for(;;){let e=null==s,a=s||u,d=l;try{await h({signal:r,path:t,matches:o,fetcherKey:n,patch:(e,t)=>{r.aborted||vh(e,t,a,d,i)}})}catch(Ove){return{type:"error",error:Ove,partialMatches:o}}finally{e&&!r.aborted&&(u=[...u])}if(r.aborted)return{type:"aborted"};let f=Cd(a,t,c);if(f)return{type:"success",matches:f};let p=Ad(a,t,c,!0);if(!p||o.length===p.length&&o.every((e,t)=>e.route.id===p[t].route.id))return{type:"success",matches:null};o=p}}function Be(e){l={},s=Sd(e,i,void 0,l)}function Oe(e,t){let r=null==s;vh(e,t,s||u,l,i),r&&(u=[...u],X({}))}return a={get basename(){return c},get future(){return f},get state(){return C},get routes(){return u},get window(){return t},initialize:$,subscribe:q,enableScrollRestoration:Ce,navigate:K,fetch:ne,revalidate:Z,createHref:t=>e.history.createHref(t),encodeLocation:t=>e.history.encodeLocation(t),getFetcher:he,deleteFetcher:pe,dispose:W,getBlocker:_e,deleteBlocker:be,patchRoutes:Oe,_internalFetchControllers:I,_internalActiveDeferreds:G,_internalSetRoutes:Be},a}({basename:null==t?void 0:t.basename,future:mf({},null==t?void 0:t.future,{v7_prependBasename:!0}),history:md({window:null==t?void 0:t.window}),hydrationData:(null==t?void 0:t.hydrationData)||gf(),routes:e,mapRouteProperties:pf,dataStrategy:null==t?void 0:t.dataStrategy,patchRoutesOnNavigation:null==t?void 0:t.patchRoutesOnNavigation,window:null==t?void 0:t.window}).initialize()},dU:function(e){let{fallbackElement:t,router:r,future:n}=e,[i,s]=$.useState(r.state),[o,a]=$.useState(),[l,u]=$.useState({isTransitioning:!1}),[c,d]=$.useState(),[h,f]=$.useState(),[p,m]=$.useState(),g=$.useRef(new Map),{v7_startTransition:y}=n||{},v=$.useCallback(e=>{y?function(e){bf?bf(e):e()}(e):e()},[y]),_=$.useCallback((e,t)=>{let{deletedFetchers:n,flushSync:i,viewTransitionOpts:o}=t;e.fetchers.forEach((e,t)=>{void 0!==e.data&&g.current.set(t,e.data)}),n.forEach(e=>g.current.delete(e));let l=null==r.window||null==r.window.document||"function"!=typeof r.window.document.startViewTransition;if(o&&!l){if(i){xf(()=>{h&&(c&&c.resolve(),h.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:o.currentLocation,nextLocation:o.nextLocation})});let t=r.window.document.startViewTransition(()=>{xf(()=>s(e))});return t.finished.finally(()=>{xf(()=>{d(void 0),f(void 0),a(void 0),u({isTransitioning:!1})})}),void xf(()=>f(t))}h?(c&&c.resolve(),h.skipTransition(),m({state:e,currentLocation:o.currentLocation,nextLocation:o.nextLocation})):(a(e),u({isTransitioning:!0,flushSync:!1,currentLocation:o.currentLocation,nextLocation:o.nextLocation}))}else i?xf(()=>s(e)):v(()=>s(e))},[r.window,h,c,g,v]);$.useLayoutEffect(()=>r.subscribe(_),[r,_]),$.useEffect(()=>{l.isTransitioning&&!l.flushSync&&d(new Ef)},[l]),$.useEffect(()=>{if(c&&o&&r.window){let e=o,t=c.promise,n=r.window.document.startViewTransition(async()=>{v(()=>s(e)),await t});n.finished.finally(()=>{d(void 0),f(void 0),a(void 0),u({isTransitioning:!1})}),f(n)}},[v,o,c,r.window]),$.useEffect(()=>{c&&o&&i.location.key===o.location.key&&c.resolve()},[c,h,i.location,o]),$.useEffect(()=>{!l.isTransitioning&&p&&(a(p.state),u({isTransitioning:!0,flushSync:!1,currentLocation:p.currentLocation,nextLocation:p.nextLocation}),m(void 0))},[l.isTransitioning,p]),$.useEffect(()=>{},[]);let b=$.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:e=>r.navigate(e),push:(e,t,n)=>r.navigate(e,{state:t,preventScrollReset:null==n?void 0:n.preventScrollReset}),replace:(e,t,n)=>r.navigate(e,{replace:!0,state:t,preventScrollReset:null==n?void 0:n.preventScrollReset})}),[r]),w=r.basename||"/",x=$.useMemo(()=>({router:r,navigator:b,static:!1,basename:w}),[r,b,w]),E=$.useMemo(()=>({v7_relativeSplatPath:r.future.v7_relativeSplatPath}),[r.future.v7_relativeSplatPath]);return $.useEffect(()=>function(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}(n,r.future),[n,r.future]),$.createElement($.Fragment,null,$.createElement(Jh.Provider,{value:x},$.createElement(Qh.Provider,{value:i},$.createElement(_f.Provider,{value:g.current},$.createElement(vf.Provider,{value:l},$.createElement(ff,{basename:w,location:i.location,navigationType:i.historyAction,navigator:b,future:E},i.initialized||r.future.v7_partialHydration?$.createElement(Sf,{routes:r.routes,future:r.future,state:i}):t))))),null)},da:function(e,t){const r=FCe(t);return mCe(r,e)},dm:PQ,dy:function(e){const{children:t,id:r,root:n,preserveTabOrder:i=!0}=e,s=function(e){void 0===e&&(e={});const{id:t,root:r}=e,n=JTe(),i=hDe(),[s,o]=$.useState(null),a=$.useRef(null);return qTe(()=>()=>{null==s||s.remove(),queueMicrotask(()=>{a.current=null})},[s]),qTe(()=>{if(!n)return;if(a.current)return;const e=t?document.getElementById(t):null;if(!e)return;const r=document.createElement("div");r.id=n,r.setAttribute(dDe,""),e.appendChild(r),a.current=r,o(r)},[t,n]),qTe(()=>{if(null===r)return;if(!n)return;if(a.current)return;let e=r||(null==i?void 0:i.portalNode);e&&!nG(e)&&(e=e.current),e=e||document.body;let s=null;t&&(s=document.createElement("div"),s.id=t,e.appendChild(s));const l=document.createElement("div");l.id=n,l.setAttribute(dDe,""),e=s||e,e.appendChild(l),a.current=l,o(l)},[t,r,n,i]),s}({id:r,root:n}),[o,a]=$.useState(null),l=$.useRef(null),u=$.useRef(null),c=$.useRef(null),d=$.useRef(null),h=null==o?void 0:o.modal,f=null==o?void 0:o.open,p=!!o&&!o.modal&&o.open&&i&&!(!n&&!s);return $.useEffect(()=>{if(s&&i&&!h)return s.addEventListener("focusin",e,!0),s.addEventListener("focusout",e,!0),()=>{s.removeEventListener("focusin",e,!0),s.removeEventListener("focusout",e,!0)};function e(e){s&&iDe(e)&&("focusin"===e.type?oDe:sDe)(s)}},[s,i,h]),$.useEffect(()=>{s&&(f||oDe(s))},[f,s]),$.createElement(cDe.Provider,{value:$.useMemo(()=>({preserveTabOrder:i,beforeOutsideRef:l,afterOutsideRef:u,beforeInsideRef:c,afterInsideRef:d,portalNode:s,setFocusManagerState:a}),[i,s])},p&&s&&$.createElement(uDe,{"data-type":"outside",ref:l,onFocus:e=>{if(iDe(e,s)){var t;null==(t=c.current)||t.focus()}else{const e=nDe(document.body,"prev")||(null==o?void 0:o.refs.domReference.current);null==e||e.focus()}}}),p&&s&&$.createElement("span",{"aria-owns":s.id,style:aDe}),s&&ld.createPortal(t,s),p&&s&&$.createElement(uDe,{"data-type":"outside",ref:u,onFocus:e=>{if(iDe(e,s)){var t;null==(t=d.current)||t.focus()}else{const t=nDe(document.body,"next")||(null==o?void 0:o.refs.domReference.current);null==t||t.focus(),(null==o?void 0:o.closeOnFocusOut)&&(null==o||o.onOpenChange(!1,e.nativeEvent,"focus-out"))}}}))},o:function(e){return nR(e,sR|oR)},w:LS});var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function s(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function o(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var r=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}),r}var a={exports:{}},l={},u={exports:{}},c={},d=Symbol.for("react.element"),h=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),y=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),x=Symbol.iterator,E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,C={};function A(e,t,r){this.props=e,this.context=t,this.refs=C,this.updater=r||E}function T(){}function D(e,t,r){this.props=e,this.context=t,this.refs=C,this.updater=r||E}A.prototype.isReactComponent={},A.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},A.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},T.prototype=A.prototype;var k=D.prototype=new T;k.constructor=D,S(k,A.prototype),k.isPureReactComponent=!0;var P=Array.isArray,B=Object.prototype.hasOwnProperty,O={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function F(e,t,r){var n,i={},s=null,o=null;if(null!=t)for(n in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(s=""+t.key),t)B.call(t,n)&&!R.hasOwnProperty(n)&&(i[n]=t[n]);var a=arguments.length-2;if(1===a)i.children=r;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(n in a=e.defaultProps)void 0===i[n]&&(i[n]=a[n]);return{$$typeof:d,type:e,key:s,ref:o,props:i,_owner:O.current}}function I(e){return"object"==typeof e&&null!==e&&e.$$typeof===d}var M=/\/+/g;function N(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function L(e,t,r,n,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var o=!1;if(null===e)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case d:case h:o=!0}}if(o)return i=i(o=e),e=""===n?"."+N(o,0):n,P(i)?(r="",null!=e&&(r=e.replace(M,"$&/")+"/"),L(i,t,r,"",function(e){return e})):null!=i&&(I(i)&&(i=function(e,t){return{$$typeof:d,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(M,"$&/")+"/")+e)),t.push(i)),1;if(o=0,n=""===n?".":n+":",P(e))for(var a=0;a<e.length;a++){var l=n+N(s=e[a],a);o+=L(s,t,r,l,i)}else if(l=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=x&&e[x]||e["@@iterator"])?e:null}(e),"function"==typeof l)for(e=l.call(e),a=0;!(s=e.next()).done;)o+=L(s=s.value,t,r,l=n+N(s,a++),i);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function U(e,t,r){if(null==e)return e;var n=[],i=0;return L(e,n,"","",function(e){return t.call(r,e,i++)}),n}function j(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var z={current:null},V={transition:null},G={ReactCurrentDispatcher:z,ReactCurrentBatchConfig:V,ReactCurrentOwner:O};function H(){throw Error("act(...) is not supported in production builds of React.")}c.Children={map:U,forEach:function(e,t,r){U(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return U(e,function(){t++}),t},toArray:function(e){return U(e,function(e){return e})||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},c.Component=A,c.Fragment=f,c.Profiler=m,c.PureComponent=D,c.StrictMode=p,c.Suspense=_,c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G,c.act=H,c.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=S({},e.props),i=e.key,s=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,o=O.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)B.call(t,l)&&!R.hasOwnProperty(l)&&(n[l]=void 0===t[l]&&void 0!==a?a[l]:t[l])}var l=arguments.length-2;if(1===l)n.children=r;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:d,type:e.type,key:i,ref:s,props:n,_owner:o}},c.createContext=function(e){return(e={$$typeof:y,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:g,_context:e},e.Consumer=e},c.createElement=F,c.createFactory=function(e){var t=F.bind(null,e);return t.type=e,t},c.createRef=function(){return{current:null}},c.forwardRef=function(e){return{$$typeof:v,render:e}},c.isValidElement=I,c.lazy=function(e){return{$$typeof:w,_payload:{_status:-1,_result:e},_init:j}},c.memo=function(e,t){return{$$typeof:b,type:e,compare:void 0===t?null:t}},c.startTransition=function(e){var t=V.transition;V.transition={};try{e()}finally{V.transition=t}},c.unstable_act=H,c.useCallback=function(e,t){return z.current.useCallback(e,t)},c.useContext=function(e){return z.current.useContext(e)},c.useDebugValue=function(){},c.useDeferredValue=function(e){return z.current.useDeferredValue(e)},c.useEffect=function(e,t){return z.current.useEffect(e,t)},c.useId=function(){return z.current.useId()},c.useImperativeHandle=function(e,t,r){return z.current.useImperativeHandle(e,t,r)},c.useInsertionEffect=function(e,t){return z.current.useInsertionEffect(e,t)},c.useLayoutEffect=function(e,t){return z.current.useLayoutEffect(e,t)},c.useMemo=function(e,t){return z.current.useMemo(e,t)},c.useReducer=function(e,t,r){return z.current.useReducer(e,t,r)},c.useRef=function(e){return z.current.useRef(e)},c.useState=function(e){return z.current.useState(e)},c.useSyncExternalStore=function(e,t,r){return z.current.useSyncExternalStore(e,t,r)},c.useTransition=function(){return z.current.useTransition()},c.version="18.3.1",u.exports=c;var $=e("r",u.exports);const W=e("cT",s($)),q=r({__proto__:null,default:W},[$]);
/**
			 * @license React
			 * react-jsx-runtime.production.min.js
			 *
			 * Copyright (c) Facebook, Inc. and its affiliates.
			 *
			 * This source code is licensed under the MIT license found in the
			 * LICENSE file in the root directory of this source tree.
			 */
var X=$,Y=Symbol.for("react.element"),K=Symbol.for("react.fragment"),Z=Object.prototype.hasOwnProperty,J=X.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Q={key:!0,ref:!0,__self:!0,__source:!0};function ee(e,t,r){var n,i={},s=null,o=null;for(n in void 0!==r&&(s=""+r),void 0!==t.key&&(s=""+t.key),void 0!==t.ref&&(o=t.ref),t)Z.call(t,n)&&!Q.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===i[n]&&(i[n]=t[n]);return{$$typeof:Y,type:e,key:s,ref:o,props:i,_owner:J.current}}l.Fragment=K,l.jsx=ee,l.jsxs=ee,a.exports=l;var te=e("j",a.exports),re=e("dV",{}),ne={exports:{}},ie={},se={exports:{}},oe={};
/**
			 * @license React
			 * scheduler.production.min.js
			 *
			 * Copyright (c) Facebook, Inc. and its affiliates.
			 *
			 * This source code is licensed under the MIT license found in the
			 * LICENSE file in the root directory of this source tree.
			 */
!function(e){function t(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,s=e[n];if(!(0<i(s,t)))break e;e[n]=t,e[r]=s,r=n}}function r(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,s=e.length,o=s>>>1;n<o;){var a=2*(n+1)-1,l=e[a],u=a+1,c=e[u];if(0>i(l,r))u<s&&0>i(c,l)?(e[n]=c,e[u]=r,n=u):(e[n]=l,e[a]=r,n=a);else{if(!(u<s&&0>i(c,r)))break e;e[n]=c,e[u]=r,n=u}}}return t}function i(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,h=3,f=!1,p=!1,m=!1,g="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,v="undefined"!=typeof setImmediate?setImmediate:null;function _(e){for(var i=r(u);null!==i;){if(null===i.callback)n(u);else{if(!(i.startTime<=e))break;n(u),i.sortIndex=i.expirationTime,t(l,i)}i=r(u)}}function b(e){if(m=!1,_(e),!p)if(null!==r(l))p=!0,O(w);else{var t=r(u);null!==t&&R(b,t.startTime-e)}}function w(t,i){p=!1,m&&(m=!1,y(C),C=-1),f=!0;var s=h;try{for(_(i),d=r(l);null!==d&&(!(d.expirationTime>i)||t&&!D());){var o=d.callback;if("function"==typeof o){d.callback=null,h=d.priorityLevel;var a=o(d.expirationTime<=i);i=e.unstable_now(),"function"==typeof a?d.callback=a:d===r(l)&&n(l),_(i)}else n(l);d=r(l)}if(null!==d)var c=!0;else{var g=r(u);null!==g&&R(b,g.startTime-i),c=!1}return c}finally{d=null,h=s,f=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,E=!1,S=null,C=-1,A=5,T=-1;function D(){return!(e.unstable_now()-T<A)}function k(){if(null!==S){var t=e.unstable_now();T=t;var r=!0;try{r=S(!0,t)}finally{r?x():(E=!1,S=null)}}else E=!1}if("function"==typeof v)x=function(){v(k)};else if("undefined"!=typeof MessageChannel){var P=new MessageChannel,B=P.port2;P.port1.onmessage=k,x=function(){B.postMessage(null)}}else x=function(){g(k,0)};function O(e){S=e,E||(E=!0,x())}function R(t,r){C=g(function(){t(e.unstable_now())},r)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){p||f||(p=!0,O(w))},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var r=h;h=t;try{return e()}finally{h=r}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=h;h=e;try{return t()}finally{h=r}},e.unstable_scheduleCallback=function(n,i,s){var o=e.unstable_now();switch(s="object"==typeof s&&null!==s&&"number"==typeof(s=s.delay)&&0<s?o+s:o,n){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return n={id:c++,callback:i,priorityLevel:n,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(n.sortIndex=s,t(u,n),null===r(l)&&n===r(u)&&(m?(y(C),C=-1):m=!0,R(b,s-o))):(n.sortIndex=a,t(l,n),p||f||(p=!0,O(w))),n},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(e){var t=h;return function(){var r=h;h=t;try{return e.apply(this,arguments)}finally{h=r}}}}(oe),se.exports=oe;var ae=se.exports,le=$,ue=ae;
/**
			 * @license React
			 * react-dom.production.min.js
			 *
			 * Copyright (c) Facebook, Inc. and its affiliates.
			 *
			 * This source code is licensed under the MIT license found in the
			 * LICENSE file in the root directory of this source tree.
			 */function ce(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var de=new Set,he={};function fe(e,t){pe(e,t),pe(e+"Capture",t)}function pe(e,t){for(he[e]=t,e=0;e<t.length;e++)de.add(t[e])}var me=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),ge=Object.prototype.hasOwnProperty,ye=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ve={},_e={};function be(e,t,r,n,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var we={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){we[e]=new be(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];we[t]=new be(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){we[e]=new be(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){we[e]=new be(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){we[e]=new be(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){we[e]=new be(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){we[e]=new be(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){we[e]=new be(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){we[e]=new be(e,5,!1,e.toLowerCase(),null,!1,!1)});var xe=/[\-:]([a-z])/g;function Ee(e){return e[1].toUpperCase()}function Se(e,t,r,n){var i=we.hasOwnProperty(t)?we[t]:null;(null!==i?0!==i.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null==t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,i,n)&&(r=null),n||null===i?function(e){return!!ge.call(_e,e)||!ge.call(ve,e)&&(ye.test(e)?_e[e]=!0:(ve[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=null===r?3!==i.type&&"":r:(t=i.attributeName,n=i.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(i=i.type)||4===i&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(xe,Ee);we[t]=new be(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(xe,Ee);we[t]=new be(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(xe,Ee);we[t]=new be(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){we[e]=new be(e,1,!1,e.toLowerCase(),null,!1,!1)}),we.xlinkHref=new be("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){we[e]=new be(e,1,!1,e.toLowerCase(),null,!0,!0)});var Ce=le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ae=Symbol.for("react.element"),Te=Symbol.for("react.portal"),De=Symbol.for("react.fragment"),ke=Symbol.for("react.strict_mode"),Pe=Symbol.for("react.profiler"),Be=Symbol.for("react.provider"),Oe=Symbol.for("react.context"),Re=Symbol.for("react.forward_ref"),Fe=Symbol.for("react.suspense"),Ie=Symbol.for("react.suspense_list"),Me=Symbol.for("react.memo"),Ne=Symbol.for("react.lazy"),Le=Symbol.for("react.offscreen"),Ue=Symbol.iterator;function je(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Ue&&e[Ue]||e["@@iterator"])?e:null}var ze,Ve=Object.assign;function Ge(e){if(void 0===ze)try{throw Error()}catch(Tye){var t=Tye.stack.trim().match(/\n( *(at )?)/);ze=t&&t[1]||""}return"\n"+ze+e}var He=!1;function $e(e,t){if(!e||He)return"";He=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(Pve){var n=Pve}Reflect.construct(e,[],t)}else{try{t.call()}catch(Pve){n=Pve}e.call(t.prototype)}else{try{throw Error()}catch(Pve){n=Pve}e()}}catch(Pve){if(Pve&&n&&"string"==typeof Pve.stack){for(var i=Pve.stack.split("\n"),s=n.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{He=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Ge(e):""}function We(e){switch(e.tag){case 5:return Ge(e.type);case 16:return Ge("Lazy");case 13:return Ge("Suspense");case 19:return Ge("SuspenseList");case 0:case 2:case 15:return e=$e(e.type,!1);case 11:return e=$e(e.type.render,!1);case 1:return e=$e(e.type,!0);default:return""}}function qe(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case De:return"Fragment";case Te:return"Portal";case Pe:return"Profiler";case ke:return"StrictMode";case Fe:return"Suspense";case Ie:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case Oe:return(e.displayName||"Context")+".Consumer";case Be:return(e._context.displayName||"Context")+".Provider";case Re:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case Me:return null!==(t=e.displayName||null)?t:qe(e.type)||"Memo";case Ne:t=e._payload,e=e._init;try{return qe(e(t))}catch(Tye){}}return null}function Xe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qe(t);case 8:return t===ke?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function Ye(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function Ke(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Ze(e){e._valueTracker||(e._valueTracker=function(e){var t=Ke(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var i=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Je(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Ke(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function Qe(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(_te){return e.body}}function et(e,t){var r=t.checked;return Ve({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function tt(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=Ye(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function rt(e,t){null!=(t=t.checked)&&Se(e,"checked",t,!1)}function nt(e,t){rt(e,t);var r=Ye(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?st(e,t.type,r):t.hasOwnProperty("defaultValue")&&st(e,t.type,Ye(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function it(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function st(e,t,r){"number"===t&&Qe(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ot=Array.isArray;function at(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Ye(r),t=null,i=0;i<e.length;i++){if(e[i].value===r)return e[i].selected=!0,void(n&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function lt(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(ce(91));return Ve({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ut(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(ce(92));if(ot(r)){if(1<r.length)throw Error(ce(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:Ye(r)}}function ct(e,t){var r=Ye(t.value),n=Ye(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function dt(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ht(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ft(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ht(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var pt,mt=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r)})}:e}(function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((pt=pt||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=pt.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function gt(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var yt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vt=["Webkit","ms","Moz","O"];function _t(e,t,r){return null==t||"boolean"==typeof t||""===t?"":r||"number"!=typeof t||0===t||yt.hasOwnProperty(e)&&yt[e]?(""+t).trim():t+"px"}function bt(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),i=_t(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}Object.keys(yt).forEach(function(e){vt.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),yt[t]=yt[e]})});var wt=Ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xt(e,t){if(t){if(wt[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(ce(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(ce(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(ce(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(ce(62))}}function Et(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var St=null;function Ct(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var At=null,Tt=null,Dt=null;function kt(e){if(e=Es(e)){if("function"!=typeof At)throw Error(ce(280));var t=e.stateNode;t&&(t=Cs(t),At(e.stateNode,e.type,t))}}function Pt(e){Tt?Dt?Dt.push(e):Dt=[e]:Tt=e}function Bt(){if(Tt){var e=Tt,t=Dt;if(Dt=Tt=null,kt(e),t)for(e=0;e<t.length;e++)kt(t[e])}}function Ot(e,t){return e(t)}function Rt(){}var Ft=!1;function It(e,t,r){if(Ft)return e(t,r);Ft=!0;try{return Ot(e,t,r)}finally{Ft=!1,(null!==Tt||null!==Dt)&&(Rt(),Bt())}}function Mt(e,t){var r=e.stateNode;if(null===r)return null;var n=Cs(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!=typeof r)throw Error(ce(231,t,typeof r));return r}var Nt=!1;if(me)try{var Lt={};Object.defineProperty(Lt,"passive",{get:function(){Nt=!0}}),window.addEventListener("test",Lt,Lt),window.removeEventListener("test",Lt,Lt)}catch(Oye){Nt=!1}function Ut(e,t,r,n,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(gte){this.onError(gte)}}var jt=!1,zt=null,Vt=!1,Gt=null,Ht={onError:function(e){jt=!0,zt=e}};function $t(e,t,r,n,i,s,o,a,l){jt=!1,zt=null,Ut.apply(Ht,arguments)}function Wt(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function qt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function Xt(e){if(Wt(e)!==e)throw Error(ce(188))}function Yt(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Wt(e)))throw Error(ce(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(n=i.return)){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return Xt(i),e;if(s===n)return Xt(i),t;s=s.sibling}throw Error(ce(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(ce(189))}}if(r.alternate!==n)throw Error(ce(190))}if(3!==r.tag)throw Error(ce(188));return r.stateNode.current===r?e:t}(e),null!==e?Kt(e):null}function Kt(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Kt(e);if(null!==t)return t;e=e.sibling}return null}var Zt=ue.unstable_scheduleCallback,Jt=ue.unstable_cancelCallback,Qt=ue.unstable_shouldYield,er=ue.unstable_requestPaint,tr=ue.unstable_now,rr=ue.unstable_getCurrentPriorityLevel,nr=ue.unstable_ImmediatePriority,ir=ue.unstable_UserBlockingPriority,sr=ue.unstable_NormalPriority,or=ue.unstable_LowPriority,ar=ue.unstable_IdlePriority,lr=null,ur=null,cr=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(dr(e)/hr|0)|0},dr=Math.log,hr=Math.LN2,fr=64,pr=4194304;function mr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function gr(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&r;if(0!==o){var a=o&~i;0!==a?n=mr(a):0!==(s&=o)&&(n=mr(s))}else 0!==(o=r&~i)?n=mr(o):0!==s&&(n=mr(s));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&i)&&((i=n&-n)>=(s=t&-t)||16===i&&4194240&s))return t;if(4&n&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)i=1<<(r=31-cr(t)),n|=e[r],t&=~i;return n}function yr(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function vr(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function _r(){var e=fr;return!(4194240&(fr<<=1))&&(fr=64),e}function br(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function wr(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-cr(t)]=r}function xr(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-cr(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var Er=0;function Sr(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var Cr,Ar,Tr,Dr,kr,Pr=!1,Br=[],Or=null,Rr=null,Fr=null,Ir=new Map,Mr=new Map,Nr=[],Lr="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ur(e,t){switch(e){case"focusin":case"focusout":Or=null;break;case"dragenter":case"dragleave":Rr=null;break;case"mouseover":case"mouseout":Fr=null;break;case"pointerover":case"pointerout":Ir.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mr.delete(t.pointerId)}}function jr(e,t,r,n,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},null!==t&&null!==(t=Es(t))&&Ar(t),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function zr(e){var t=xs(e.target);if(null!==t){var r=Wt(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=qt(r)))return e.blockedOn=t,void kr(e.priority,function(){Tr(r)})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Vr(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Qr(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=Es(r))&&Ar(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);St=n,r.target.dispatchEvent(n),St=null,t.shift()}return!0}function Gr(e,t,r){Vr(e)&&r.delete(t)}function Hr(){Pr=!1,null!==Or&&Vr(Or)&&(Or=null),null!==Rr&&Vr(Rr)&&(Rr=null),null!==Fr&&Vr(Fr)&&(Fr=null),Ir.forEach(Gr),Mr.forEach(Gr)}function $r(e,t){e.blockedOn===t&&(e.blockedOn=null,Pr||(Pr=!0,ue.unstable_scheduleCallback(ue.unstable_NormalPriority,Hr)))}function Wr(e){function t(t){return $r(t,e)}if(0<Br.length){$r(Br[0],e);for(var r=1;r<Br.length;r++){var n=Br[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==Or&&$r(Or,e),null!==Rr&&$r(Rr,e),null!==Fr&&$r(Fr,e),Ir.forEach(t),Mr.forEach(t),r=0;r<Nr.length;r++)(n=Nr[r]).blockedOn===e&&(n.blockedOn=null);for(;0<Nr.length&&null===(r=Nr[0]).blockedOn;)zr(r),null===r.blockedOn&&Nr.shift()}var qr=Ce.ReactCurrentBatchConfig,Xr=!0;function Yr(e,t,r,n){var i=Er,s=qr.transition;qr.transition=null;try{Er=1,Zr(e,t,r,n)}finally{Er=i,qr.transition=s}}function Kr(e,t,r,n){var i=Er,s=qr.transition;qr.transition=null;try{Er=4,Zr(e,t,r,n)}finally{Er=i,qr.transition=s}}function Zr(e,t,r,n){if(Xr){var i=Qr(e,t,r,n);if(null===i)Xi(e,t,n,Jr,r),Ur(e,n);else if(function(e,t,r,n,i){switch(t){case"focusin":return Or=jr(Or,e,t,r,n,i),!0;case"dragenter":return Rr=jr(Rr,e,t,r,n,i),!0;case"mouseover":return Fr=jr(Fr,e,t,r,n,i),!0;case"pointerover":var s=i.pointerId;return Ir.set(s,jr(Ir.get(s)||null,e,t,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Mr.set(s,jr(Mr.get(s)||null,e,t,r,n,i)),!0}return!1}(i,e,t,r,n))n.stopPropagation();else if(Ur(e,n),4&t&&-1<Lr.indexOf(e)){for(;null!==i;){var s=Es(i);if(null!==s&&Cr(s),null===(s=Qr(e,t,r,n))&&Xi(e,t,n,Jr,r),s===i)break;i=s}null!==i&&n.stopPropagation()}else Xi(e,t,n,null,r)}}var Jr=null;function Qr(e,t,r,n){if(Jr=null,null!==(e=xs(e=Ct(n))))if(null===(t=Wt(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=qt(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Jr=e,null}function en(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rr()){case nr:return 1;case ir:return 4;case sr:case or:return 16;case ar:return 536870912;default:return 16}default:return 16}}var tn=null,rn=null,nn=null;function sn(){if(nn)return nn;var e,t,r=rn,n=r.length,i="value"in tn?tn.value:tn.textContent,s=i.length;for(e=0;e<n&&r[e]===i[e];e++);var o=n-e;for(t=1;t<=o&&r[n-t]===i[s-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function on(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function an(){return!0}function ln(){return!1}function un(e){function t(t,r,n,i,s){for(var o in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?an:ln,this.isPropagationStopped=ln,this}return Ve(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=an)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=an)},persist:function(){},isPersistent:an}),t}var cn,dn,hn,fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pn=un(fn),mn=Ve({},fn,{view:0,detail:0}),gn=un(mn),yn=Ve({},mn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hn&&(hn&&"mousemove"===e.type?(cn=e.screenX-hn.screenX,dn=e.screenY-hn.screenY):dn=cn=0,hn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:dn}}),vn=un(yn),_n=un(Ve({},yn,{dataTransfer:0})),bn=un(Ve({},mn,{relatedTarget:0})),wn=un(Ve({},fn,{animationName:0,elapsedTime:0,pseudoElement:0})),xn=Ve({},fn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),En=un(xn),Sn=un(Ve({},fn,{data:0})),Cn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},An={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function kn(){return Dn}var Pn=Ve({},mn,{key:function(e){if(e.key){var t=Cn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=on(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?An[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?on(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?on(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Bn=un(Pn),On=un(Ve({},yn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=un(Ve({},mn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),Fn=un(Ve({},fn,{propertyName:0,elapsedTime:0,pseudoElement:0})),In=Ve({},yn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mn=un(In),Nn=[9,13,27,32],Ln=me&&"CompositionEvent"in window,Un=null;me&&"documentMode"in document&&(Un=document.documentMode);var jn=me&&"TextEvent"in window&&!Un,zn=me&&(!Ln||Un&&8<Un&&11>=Un),Vn=String.fromCharCode(32),Gn=!1;function Hn(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $n(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1,qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Yn(e,t,r,n){Pt(n),0<(t=Ki(t,"onChange")).length&&(r=new pn("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Kn=null,Zn=null;function Jn(e){Vi(e,0)}function Qn(e){if(Je(Ss(e)))return e}function ei(e,t){if("change"===e)return t}var ti=!1;if(me){var ri;if(me){var ni="oninput"in document;if(!ni){var ii=document.createElement("div");ii.setAttribute("oninput","return;"),ni="function"==typeof ii.oninput}ri=ni}else ri=!1;ti=ri&&(!document.documentMode||9<document.documentMode)}function si(){Kn&&(Kn.detachEvent("onpropertychange",oi),Zn=Kn=null)}function oi(e){if("value"===e.propertyName&&Qn(Zn)){var t=[];Yn(t,Zn,e,Ct(e)),It(Jn,t)}}function ai(e,t,r){"focusin"===e?(si(),Zn=r,(Kn=t).attachEvent("onpropertychange",oi)):"focusout"===e&&si()}function li(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Zn)}function ui(e,t){if("click"===e)return Qn(t)}function ci(e,t){if("input"===e||"change"===e)return Qn(t)}var di="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function hi(e,t){if(di(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!ge.call(t,i)||!di(e[i],t[i]))return!1}return!0}function fi(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pi(e,t){var r,n=fi(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=fi(n)}}function mi(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?mi(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function gi(){for(var e=window,t=Qe();t instanceof e.HTMLIFrameElement;){try{var r="string"==typeof t.contentWindow.location.href}catch(pte){r=!1}if(!r)break;t=Qe((e=t.contentWindow).document)}return t}function yi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function vi(e){var t=gi(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&mi(r.ownerDocument.documentElement,r)){if(null!==n&&yi(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=void 0===n.end?s:Math.min(n.end,i),!e.extend&&s>n&&(i=n,n=s,s=i),i=pi(r,s);var o=pi(r,n);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var _i=me&&"documentMode"in document&&11>=document.documentMode,bi=null,wi=null,xi=null,Ei=!1;function Si(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;Ei||null==bi||bi!==Qe(n)||(n="selectionStart"in(n=bi)&&yi(n)?{start:n.selectionStart,end:n.selectionEnd}:{anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},xi&&hi(xi,n)||(xi=n,0<(n=Ki(wi,"onSelect")).length&&(t=new pn("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=bi)))}function Ci(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ai={animationend:Ci("Animation","AnimationEnd"),animationiteration:Ci("Animation","AnimationIteration"),animationstart:Ci("Animation","AnimationStart"),transitionend:Ci("Transition","TransitionEnd")},Ti={},Di={};function ki(e){if(Ti[e])return Ti[e];if(!Ai[e])return e;var t,r=Ai[e];for(t in r)if(r.hasOwnProperty(t)&&t in Di)return Ti[e]=r[t];return e}me&&(Di=document.createElement("div").style,"AnimationEvent"in window||(delete Ai.animationend.animation,delete Ai.animationiteration.animation,delete Ai.animationstart.animation),"TransitionEvent"in window||delete Ai.transitionend.transition);var Pi=ki("animationend"),Bi=ki("animationiteration"),Oi=ki("animationstart"),Ri=ki("transitionend"),Fi=new Map,Ii="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mi(e,t){Fi.set(e,t),fe(t,[e])}for(var Ni=0;Ni<Ii.length;Ni++){var Li=Ii[Ni];Mi(Li.toLowerCase(),"on"+(Li[0].toUpperCase()+Li.slice(1)))}Mi(Pi,"onAnimationEnd"),Mi(Bi,"onAnimationIteration"),Mi(Oi,"onAnimationStart"),Mi("dblclick","onDoubleClick"),Mi("focusin","onFocus"),Mi("focusout","onBlur"),Mi(Ri,"onTransitionEnd"),pe("onMouseEnter",["mouseout","mouseover"]),pe("onMouseLeave",["mouseout","mouseover"]),pe("onPointerEnter",["pointerout","pointerover"]),pe("onPointerLeave",["pointerout","pointerover"]),fe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),fe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),fe("onBeforeInput",["compositionend","keypress","textInput","paste"]),fe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),fe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),fe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ui="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ji=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ui));function zi(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,i,s,o,a,l){if($t.apply(this,arguments),jt){if(!jt)throw Error(ce(198));var u=zt;jt=!1,zt=null,Vt||(Vt=!0,Gt=u)}}(n,t,void 0,e),e.currentTarget=null}function Vi(e,t){t=!!(4&t);for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;zi(i,a,u),s=l}else for(o=0;o<n.length;o++){if(l=(a=n[o]).instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;zi(i,a,u),s=l}}}if(Vt)throw e=Gt,Vt=!1,Gt=null,e}function Gi(e,t){var r=t[_s];void 0===r&&(r=t[_s]=new Set);var n=e+"__bubble";r.has(n)||(qi(t,e,2,!1),r.add(n))}function Hi(e,t,r){var n=0;t&&(n|=4),qi(r,e,n,t)}var $i="_reactListening"+Math.random().toString(36).slice(2);function Wi(e){if(!e[$i]){e[$i]=!0,de.forEach(function(t){"selectionchange"!==t&&(ji.has(t)||Hi(t,!1,e),Hi(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[$i]||(t[$i]=!0,Hi("selectionchange",!1,t))}}function qi(e,t,r,n){switch(en(t)){case 1:var i=Yr;break;case 4:i=Kr;break;default:i=Zr}r=i.bind(null,t,r,e),i=void 0,!Nt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),n?void 0!==i?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):void 0!==i?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function Xi(e,t,r,n,i){var s=n;if(!(1&t||2&t||null===n))e:for(;;){if(null===n)return;var o=n.tag;if(3===o||4===o){var a=n.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=n.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=xs(a)))return;if(5===(l=o.tag)||6===l){n=s=o;continue e}a=a.parentNode}}n=n.return}It(function(){var n=s,i=Ct(r),o=[];e:{var a=Fi.get(e);if(void 0!==a){var l=pn,u=e;switch(e){case"keypress":if(0===on(r))break e;case"keydown":case"keyup":l=Bn;break;case"focusin":u="focus",l=bn;break;case"focusout":u="blur",l=bn;break;case"beforeblur":case"afterblur":l=bn;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=_n;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Rn;break;case Pi:case Bi:case Oi:l=wn;break;case Ri:l=Fn;break;case"scroll":l=gn;break;case"wheel":l=Mn;break;case"copy":case"cut":case"paste":l=En;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=On}var c=!!(4&t),d=!c&&"scroll"===e,h=c?null!==a?a+"Capture":null:a;c=[];for(var f,p=n;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&null!=(m=Mt(p,h))&&c.push(Yi(p,m,f))),d)break;p=p.return}0<c.length&&(a=new l(a,u,null,r,i),o.push({event:a,listeners:c}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||r===St||!(u=r.relatedTarget||r.fromElement)||!xs(u)&&!u[vs])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=n,null!==(u=(u=r.relatedTarget||r.toElement)?xs(u):null)&&(u!==(d=Wt(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=n),l!==u)){if(c=vn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=On,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:Ss(l),f=null==u?a:Ss(u),(a=new c(m,p+"leave",l,r,i)).target=d,a.relatedTarget=f,m=null,xs(i)===n&&((c=new c(h,p+"enter",u,r,i)).target=f,c.relatedTarget=d,m=c),d=m,l&&u)e:{for(h=u,p=0,f=c=l;f;f=Zi(f))p++;for(f=0,m=h;m;m=Zi(m))f++;for(;0<p-f;)c=Zi(c),p--;for(;0<f-p;)h=Zi(h),f--;for(;p--;){if(c===h||null!==h&&c===h.alternate)break e;c=Zi(c),h=Zi(h)}c=null}else c=null;null!==l&&Ji(o,a,l,c,!1),null!==u&&null!==d&&Ji(o,d,u,c,!0)}if("select"===(l=(a=n?Ss(n):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=ei;else if(Xn(a))if(ti)g=ci;else{g=li;var y=ai}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=ui);switch(g&&(g=g(e,n))?Yn(o,g,r,i):(y&&y(e,a,n),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&st(a,"number",a.value)),y=n?Ss(n):window,e){case"focusin":(Xn(y)||"true"===y.contentEditable)&&(bi=y,wi=n,xi=null);break;case"focusout":xi=wi=bi=null;break;case"mousedown":Ei=!0;break;case"contextmenu":case"mouseup":case"dragend":Ei=!1,Si(o,r,i);break;case"selectionchange":if(_i)break;case"keydown":case"keyup":Si(o,r,i)}var v;if(Ln)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Wn?Hn(e,r)&&(_="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(_="onCompositionStart");_&&(zn&&"ko"!==r.locale&&(Wn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Wn&&(v=sn()):(rn="value"in(tn=i)?tn.value:tn.textContent,Wn=!0)),0<(y=Ki(n,_)).length&&(_=new Sn(_,e,null,r,i),o.push({event:_,listeners:y}),(v||null!==(v=$n(r)))&&(_.data=v))),(v=jn?function(e,t){switch(e){case"compositionend":return $n(t);case"keypress":return 32!==t.which?null:(Gn=!0,Vn);case"textInput":return(e=t.data)===Vn&&Gn?null:e;default:return null}}(e,r):function(e,t){if(Wn)return"compositionend"===e||!Ln&&Hn(e,t)?(e=sn(),nn=rn=tn=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zn&&"ko"!==t.locale?null:t.data}}(e,r))&&0<(n=Ki(n,"onBeforeInput")).length&&(i=new Sn("onBeforeInput","beforeinput",null,r,i),o.push({event:i,listeners:n}),i.data=v)}Vi(o,t)})}function Yi(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ki(e,t){for(var r=t+"Capture",n=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Mt(e,r))&&n.unshift(Yi(e,s,i)),null!=(s=Mt(e,t))&&n.push(Yi(e,s,i))),e=e.return}return n}function Zi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ji(e,t,r,n,i){for(var s=t._reactName,o=[];null!==r&&r!==n;){var a=r,l=a.alternate,u=a.stateNode;if(null!==l&&l===n)break;5===a.tag&&null!==u&&(a=u,i?null!=(l=Mt(r,s))&&o.unshift(Yi(r,l,a)):i||null!=(l=Mt(r,s))&&o.push(Yi(r,l,a))),r=r.return}0!==o.length&&e.push({event:t,listeners:o})}var Qi=/\r\n?/g,es=/\u0000|\uFFFD/g;function ts(e){return("string"==typeof e?e:""+e).replace(Qi,"\n").replace(es,"")}function rs(e,t,r){if(t=ts(t),ts(e)!==t&&r)throw Error(ce(425))}function ns(){}var is=null,ss=null;function os(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var as="function"==typeof setTimeout?setTimeout:void 0,ls="function"==typeof clearTimeout?clearTimeout:void 0,us="function"==typeof Promise?Promise:void 0,cs="function"==typeof queueMicrotask?queueMicrotask:void 0!==us?function(e){return us.resolve(null).then(e).catch(ds)}:as;function ds(e){setTimeout(function(){throw e})}function hs(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&8===i.nodeType)if("/$"===(r=i.data)){if(0===n)return e.removeChild(i),void Wr(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=i}while(r);Wr(t)}function fs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ps(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var ms=Math.random().toString(36).slice(2),gs="__reactFiber$"+ms,ys="__reactProps$"+ms,vs="__reactContainer$"+ms,_s="__reactEvents$"+ms,bs="__reactListeners$"+ms,ws="__reactHandles$"+ms;function xs(e){var t=e[gs];if(t)return t;for(var r=e.parentNode;r;){if(t=r[vs]||r[gs]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=ps(e);null!==e;){if(r=e[gs])return r;e=ps(e)}return t}r=(e=r).parentNode}return null}function Es(e){return!(e=e[gs]||e[vs])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ss(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(ce(33))}function Cs(e){return e[ys]||null}var As=[],Ts=-1;function Ds(e){return{current:e}}function ks(e){0>Ts||(e.current=As[Ts],As[Ts]=null,Ts--)}function Ps(e,t){Ts++,As[Ts]=e.current,e.current=t}var Bs={},Os=Ds(Bs),Rs=Ds(!1),Fs=Bs;function Is(e,t){var r=e.type.contextTypes;if(!r)return Bs;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in r)s[i]=t[i];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ms(e){return null!=(e=e.childContextTypes)}function Ns(){ks(Rs),ks(Os)}function Ls(e,t,r){if(Os.current!==Bs)throw Error(ce(168));Ps(Os,t),Ps(Rs,r)}function Us(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!=typeof n.getChildContext)return r;for(var i in n=n.getChildContext())if(!(i in t))throw Error(ce(108,Xe(e)||"Unknown",i));return Ve({},r,n)}function js(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Bs,Fs=Os.current,Ps(Os,e),Ps(Rs,Rs.current),!0}function zs(e,t,r){var n=e.stateNode;if(!n)throw Error(ce(169));r?(e=Us(e,t,Fs),n.__reactInternalMemoizedMergedChildContext=e,ks(Rs),ks(Os),Ps(Os,e)):ks(Rs),Ps(Rs,r)}var Vs=null,Gs=!1,Hs=!1;function $s(e){null===Vs?Vs=[e]:Vs.push(e)}function Ws(){if(!Hs&&null!==Vs){Hs=!0;var e=0,t=Er;try{var r=Vs;for(Er=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}Vs=null,Gs=!1}catch(Ove){throw null!==Vs&&(Vs=Vs.slice(e+1)),Zt(nr,Ws),Ove}finally{Er=t,Hs=!1}}return null}var qs=[],Xs=0,Ys=null,Ks=0,Zs=[],Js=0,Qs=null,eo=1,to="";function ro(e,t){qs[Xs++]=Ks,qs[Xs++]=Ys,Ys=e,Ks=t}function no(e,t,r){Zs[Js++]=eo,Zs[Js++]=to,Zs[Js++]=Qs,Qs=e;var n=eo;e=to;var i=32-cr(n)-1;n&=~(1<<i),r+=1;var s=32-cr(t)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,eo=1<<32-cr(t)+i|r<<i|n,to=s+e}else eo=1<<s|r<<i|n,to=e}function io(e){null!==e.return&&(ro(e,1),no(e,1,0))}function so(e){for(;e===Ys;)Ys=qs[--Xs],qs[Xs]=null,Ks=qs[--Xs],qs[Xs]=null;for(;e===Qs;)Qs=Zs[--Js],Zs[Js]=null,to=Zs[--Js],Zs[Js]=null,eo=Zs[--Js],Zs[Js]=null}var oo=null,ao=null,lo=!1,uo=null;function co(e,t){var r=Ic(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function ho(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,oo=e,ao=fs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,oo=e,ao=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Qs?{id:eo,overflow:to}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Ic(18,null,null,0)).stateNode=t,r.return=e,e.child=r,oo=e,ao=null,!0);default:return!1}}function fo(e){return!(!(1&e.mode)||128&e.flags)}function po(e){if(lo){var t=ao;if(t){var r=t;if(!ho(e,t)){if(fo(e))throw Error(ce(418));t=fs(r.nextSibling);var n=oo;t&&ho(e,t)?co(n,r):(e.flags=-4097&e.flags|2,lo=!1,oo=e)}}else{if(fo(e))throw Error(ce(418));e.flags=-4097&e.flags|2,lo=!1,oo=e}}}function mo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;oo=e}function go(e){if(e!==oo)return!1;if(!lo)return mo(e),lo=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!os(e.type,e.memoizedProps)),t&&(t=ao)){if(fo(e))throw yo(),Error(ce(418));for(;t;)co(e,t),t=fs(t.nextSibling)}if(mo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(ce(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){ao=fs(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}ao=null}}else ao=oo?fs(e.stateNode.nextSibling):null;return!0}function yo(){for(var e=ao;e;)e=fs(e.nextSibling)}function vo(){ao=oo=null,lo=!1}function _o(e){null===uo?uo=[e]:uo.push(e)}var bo=Ce.ReactCurrentBatchConfig;function wo(e,t,r){if(null!==(e=r.ref)&&"function"!=typeof e&&"object"!=typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(ce(309));var n=r.stateNode}if(!n)throw Error(ce(147,e));var i=n,s=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!=typeof e)throw Error(ce(284));if(!r._owner)throw Error(ce(290,e))}return e}function xo(e,t){throw e=Object.prototype.toString.call(t),Error(ce(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Eo(e){return(0,e._init)(e._payload)}function So(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Nc(e,t)).index=0,e.sibling=null,e}function s(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function a(e,t,r,n){return null===t||6!==t.tag?((t=zc(r,e.mode,n)).return=e,t):((t=i(t,r)).return=e,t)}function l(e,t,r,n){var s=r.type;return s===De?c(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===Ne&&Eo(s)===t.type)?((n=i(t,r.props)).ref=wo(e,t,r),n.return=e,n):((n=Lc(r.type,r.key,r.props,null,e.mode,n)).ref=wo(e,t,r),n.return=e,n)}function u(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Vc(r,e.mode,n)).return=e,t):((t=i(t,r.children||[])).return=e,t)}function c(e,t,r,n,s){return null===t||7!==t.tag?((t=Uc(r,e.mode,n,s)).return=e,t):((t=i(t,r)).return=e,t)}function d(e,t,r){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=zc(""+t,e.mode,r)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case Ae:return(r=Lc(t.type,t.key,t.props,null,e.mode,r)).ref=wo(e,null,t),r.return=e,r;case Te:return(t=Vc(t,e.mode,r)).return=e,t;case Ne:return d(e,(0,t._init)(t._payload),r)}if(ot(t)||je(t))return(t=Uc(t,e.mode,r,null)).return=e,t;xo(e,t)}return null}function h(e,t,r,n){var i=null!==t?t.key:null;if("string"==typeof r&&""!==r||"number"==typeof r)return null!==i?null:a(e,t,""+r,n);if("object"==typeof r&&null!==r){switch(r.$$typeof){case Ae:return r.key===i?l(e,t,r,n):null;case Te:return r.key===i?u(e,t,r,n):null;case Ne:return h(e,t,(i=r._init)(r._payload),n)}if(ot(r)||je(r))return null!==i?null:c(e,t,r,n,null);xo(e,r)}return null}function f(e,t,r,n,i){if("string"==typeof n&&""!==n||"number"==typeof n)return a(t,e=e.get(r)||null,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case Ae:return l(t,e=e.get(null===n.key?r:n.key)||null,n,i);case Te:return u(t,e=e.get(null===n.key?r:n.key)||null,n,i);case Ne:return f(e,t,r,(0,n._init)(n._payload),i)}if(ot(n)||je(n))return c(t,e=e.get(r)||null,n,i,null);xo(t,n)}return null}function p(i,o,a,l){for(var u=null,c=null,p=o,m=o=0,g=null;null!==p&&m<a.length;m++){p.index>m?(g=p,p=null):g=p.sibling;var y=h(i,p,a[m],l);if(null===y){null===p&&(p=g);break}e&&p&&null===y.alternate&&t(i,p),o=s(y,o,m),null===c?u=y:c.sibling=y,c=y,p=g}if(m===a.length)return r(i,p),lo&&ro(i,m),u;if(null===p){for(;m<a.length;m++)null!==(p=d(i,a[m],l))&&(o=s(p,o,m),null===c?u=p:c.sibling=p,c=p);return lo&&ro(i,m),u}for(p=n(i,p);m<a.length;m++)null!==(g=f(p,i,m,a[m],l))&&(e&&null!==g.alternate&&p.delete(null===g.key?m:g.key),o=s(g,o,m),null===c?u=g:c.sibling=g,c=g);return e&&p.forEach(function(e){return t(i,e)}),lo&&ro(i,m),u}function m(i,o,a,l){var u=je(a);if("function"!=typeof u)throw Error(ce(150));if(null==(a=u.call(a)))throw Error(ce(151));for(var c=u=null,p=o,m=o=0,g=null,y=a.next();null!==p&&!y.done;m++,y=a.next()){p.index>m?(g=p,p=null):g=p.sibling;var v=h(i,p,y.value,l);if(null===v){null===p&&(p=g);break}e&&p&&null===v.alternate&&t(i,p),o=s(v,o,m),null===c?u=v:c.sibling=v,c=v,p=g}if(y.done)return r(i,p),lo&&ro(i,m),u;if(null===p){for(;!y.done;m++,y=a.next())null!==(y=d(i,y.value,l))&&(o=s(y,o,m),null===c?u=y:c.sibling=y,c=y);return lo&&ro(i,m),u}for(p=n(i,p);!y.done;m++,y=a.next())null!==(y=f(p,i,m,y.value,l))&&(e&&null!==y.alternate&&p.delete(null===y.key?m:y.key),o=s(y,o,m),null===c?u=y:c.sibling=y,c=y);return e&&p.forEach(function(e){return t(i,e)}),lo&&ro(i,m),u}return function e(n,s,a,l){if("object"==typeof a&&null!==a&&a.type===De&&null===a.key&&(a=a.props.children),"object"==typeof a&&null!==a){switch(a.$$typeof){case Ae:e:{for(var u=a.key,c=s;null!==c;){if(c.key===u){if((u=a.type)===De){if(7===c.tag){r(n,c.sibling),(s=i(c,a.props.children)).return=n,n=s;break e}}else if(c.elementType===u||"object"==typeof u&&null!==u&&u.$$typeof===Ne&&Eo(u)===c.type){r(n,c.sibling),(s=i(c,a.props)).ref=wo(n,c,a),s.return=n,n=s;break e}r(n,c);break}t(n,c),c=c.sibling}a.type===De?((s=Uc(a.props.children,n.mode,l,a.key)).return=n,n=s):((l=Lc(a.type,a.key,a.props,null,n.mode,l)).ref=wo(n,s,a),l.return=n,n=l)}return o(n);case Te:e:{for(c=a.key;null!==s;){if(s.key===c){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){r(n,s.sibling),(s=i(s,a.children||[])).return=n,n=s;break e}r(n,s);break}t(n,s),s=s.sibling}(s=Vc(a,n.mode,l)).return=n,n=s}return o(n);case Ne:return e(n,s,(c=a._init)(a._payload),l)}if(ot(a))return p(n,s,a,l);if(je(a))return m(n,s,a,l);xo(n,a)}return"string"==typeof a&&""!==a||"number"==typeof a?(a=""+a,null!==s&&6===s.tag?(r(n,s.sibling),(s=i(s,a)).return=n,n=s):(r(n,s),(s=zc(a,n.mode,l)).return=n,n=s),o(n)):r(n,s)}}var Co=So(!0),Ao=So(!1),To=Ds(null),Do=null,ko=null,Po=null;function Bo(){Po=ko=Do=null}function Oo(e){var t=To.current;ks(To),e._currentValue=t}function Ro(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Fo(e,t){Do=e,Po=ko=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(El=!0),e.firstContext=null)}function Io(e){var t=e._currentValue;if(Po!==e)if(e={context:e,memoizedValue:t,next:null},null===ko){if(null===Do)throw Error(ce(308));ko=e,Do.dependencies={lanes:0,firstContext:e}}else ko=ko.next=e;return t}var Mo=null;function No(e){null===Mo?Mo=[e]:Mo.push(e)}function Lo(e,t,r,n){var i=t.interleaved;return null===i?(r.next=r,No(t)):(r.next=i.next,i.next=r),t.interleaved=r,Uo(e,n)}function Uo(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var jo=!1;function zo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Go(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ho(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,2&Ou){var i=n.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Uo(e,r)}return null===(i=n.interleaved)?(t.next=t,No(n)):(t.next=i.next,i.next=t),n.interleaved=t,Uo(e,r)}function $o(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,xr(e,r)}}function Wo(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var i=null,s=null;if(null!==(r=r.firstBaseUpdate)){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===s?i=s=o:s=s.next=o,r=r.next}while(null!==r);null===s?i=s=t:s=s.next=t}else i=s=t;return r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function qo(e,t,r,n){var i=e.updateQueue;jo=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,u=l.next;l.next=null,null===o?s=u:o.next=u,o=l;var c=e.alternate;null!==c&&(a=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===a?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l)}if(null!==s){var d=i.baseState;for(o=0,c=u=l=null,a=s;;){var h=a.lane,f=a.eventTime;if((n&h)===h){null!==c&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(h=t,f=r,m.tag){case 1:if("function"==typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(h="function"==typeof(p=m.payload)?p.call(f,d,h):p))break e;d=Ve({},d,h);break e;case 2:jo=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(u=c=f,l=d):c=c.next=f,o|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===c&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);ju|=o,e.lanes=o,e.memoizedState=d}}function Xo(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(null!==i){if(n.callback=null,n=r,"function"!=typeof i)throw Error(ce(191,i));i.call(n)}}}var Yo={},Ko=Ds(Yo),Zo=Ds(Yo),Jo=Ds(Yo);function Qo(e){if(e===Yo)throw Error(ce(174));return e}function ea(e,t){switch(Ps(Jo,t),Ps(Zo,e),Ps(Ko,Yo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ft(null,"");break;default:t=ft(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ks(Ko),Ps(Ko,t)}function ta(){ks(Ko),ks(Zo),ks(Jo)}function ra(e){Qo(Jo.current);var t=Qo(Ko.current),r=ft(t,e.type);t!==r&&(Ps(Zo,e),Ps(Ko,r))}function na(e){Zo.current===e&&(ks(Ko),ks(Zo))}var ia=Ds(0);function sa(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var oa=[];function aa(){for(var e=0;e<oa.length;e++)oa[e]._workInProgressVersionPrimary=null;oa.length=0}var la=Ce.ReactCurrentDispatcher,ua=Ce.ReactCurrentBatchConfig,ca=0,da=null,ha=null,fa=null,pa=!1,ma=!1,ga=0,ya=0;function va(){throw Error(ce(321))}function _a(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!di(e[r],t[r]))return!1;return!0}function ba(e,t,r,n,i,s){if(ca=s,da=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,la.current=null===e||null===e.memoizedState?nl:il,e=r(n,i),ma){s=0;do{if(ma=!1,ga=0,25<=s)throw Error(ce(301));s+=1,fa=ha=null,t.updateQueue=null,la.current=sl,e=r(n,i)}while(ma)}if(la.current=rl,t=null!==ha&&null!==ha.next,ca=0,fa=ha=da=null,pa=!1,t)throw Error(ce(300));return e}function wa(){var e=0!==ga;return ga=0,e}function xa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===fa?da.memoizedState=fa=e:fa=fa.next=e,fa}function Ea(){if(null===ha){var e=da.alternate;e=null!==e?e.memoizedState:null}else e=ha.next;var t=null===fa?da.memoizedState:fa.next;if(null!==t)fa=t,ha=e;else{if(null===e)throw Error(ce(310));e={memoizedState:(ha=e).memoizedState,baseState:ha.baseState,baseQueue:ha.baseQueue,queue:ha.queue,next:null},null===fa?da.memoizedState=fa=e:fa=fa.next=e}return fa}function Sa(e,t){return"function"==typeof t?t(e):t}function Ca(e){var t=Ea(),r=t.queue;if(null===r)throw Error(ce(311));r.lastRenderedReducer=e;var n=ha,i=n.baseQueue,s=r.pending;if(null!==s){if(null!==i){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(null!==i){s=i.next,n=n.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((ca&c)===c)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(a=l=d,o=n):l=l.next=d,da.lanes|=c,ju|=c}u=u.next}while(null!==u&&u!==s);null===l?o=n:l.next=a,di(n,t.memoizedState)||(El=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=l,r.lastRenderedState=n}if(null!==(e=r.interleaved)){i=e;do{s=i.lane,da.lanes|=s,ju|=s,i=i.next}while(i!==e)}else null===i&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Aa(e){var t=Ea(),r=t.queue;if(null===r)throw Error(ce(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,s=t.memoizedState;if(null!==i){r.pending=null;var o=i=i.next;do{s=e(s,o.action),o=o.next}while(o!==i);di(s,t.memoizedState)||(El=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),r.lastRenderedState=s}return[s,n]}function Ta(){}function Da(e,t){var r=da,n=Ea(),i=t(),s=!di(n.memoizedState,i);if(s&&(n.memoizedState=i,El=!0),n=n.queue,ja(Ba.bind(null,r,n,e),[e]),n.getSnapshot!==t||s||null!==fa&&1&fa.memoizedState.tag){if(r.flags|=2048,Ia(9,Pa.bind(null,r,n,i,t),void 0,null),null===Ru)throw Error(ce(349));30&ca||ka(r,t,i)}return i}function ka(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=da.updateQueue)?(t={lastEffect:null,stores:null},da.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Pa(e,t,r,n){t.value=r,t.getSnapshot=n,Oa(t)&&Ra(e)}function Ba(e,t,r){return r(function(){Oa(t)&&Ra(e)})}function Oa(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!di(e,r)}catch(pte){return!0}}function Ra(e){var t=Uo(e,1);null!==t&&oc(t,e,1,-1)}function Fa(e){var t=xa();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:e},t.queue=e,e=e.dispatch=Ja.bind(null,da,e),[t.memoizedState,e]}function Ia(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=da.updateQueue)?(t={lastEffect:null,stores:null},da.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Ma(){return Ea().memoizedState}function Na(e,t,r,n){var i=xa();da.flags|=e,i.memoizedState=Ia(1|t,r,void 0,void 0===n?null:n)}function La(e,t,r,n){var i=Ea();n=void 0===n?null:n;var s=void 0;if(null!==ha){var o=ha.memoizedState;if(s=o.destroy,null!==n&&_a(n,o.deps))return void(i.memoizedState=Ia(t,r,s,n))}da.flags|=e,i.memoizedState=Ia(1|t,r,s,n)}function Ua(e,t){return Na(8390656,8,e,t)}function ja(e,t){return La(2048,8,e,t)}function za(e,t){return La(4,2,e,t)}function Va(e,t){return La(4,4,e,t)}function Ga(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ha(e,t,r){return r=null!=r?r.concat([e]):null,La(4,4,Ga.bind(null,t,e),r)}function $a(){}function Wa(e,t){var r=Ea();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&_a(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function qa(e,t){var r=Ea();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&_a(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Xa(e,t,r){return 21&ca?(di(r,t)||(r=_r(),da.lanes|=r,ju|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,El=!0),e.memoizedState=r)}function Ya(e,t){var r=Er;Er=0!==r&&4>r?r:4,e(!0);var n=ua.transition;ua.transition={};try{e(!1),t()}finally{Er=r,ua.transition=n}}function Ka(){return Ea().memoizedState}function Za(e,t,r){var n=sc(e);r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Qa(e)?el(t,r):null!==(r=Lo(e,t,r,n))&&(oc(r,e,n,ic()),tl(r,t,n))}function Ja(e,t,r){var n=sc(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Qa(e))el(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,di(a,o)){var l=t.interleaved;return null===l?(i.next=i,No(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(Pve){}null!==(r=Lo(e,t,i,n))&&(oc(r,e,n,i=ic()),tl(r,t,n))}}function Qa(e){var t=e.alternate;return e===da||null!==t&&t===da}function el(e,t){ma=pa=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function tl(e,t,r){if(4194240&r){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,xr(e,r)}}var rl={readContext:Io,useCallback:va,useContext:va,useEffect:va,useImperativeHandle:va,useInsertionEffect:va,useLayoutEffect:va,useMemo:va,useReducer:va,useRef:va,useState:va,useDebugValue:va,useDeferredValue:va,useTransition:va,useMutableSource:va,useSyncExternalStore:va,useId:va,unstable_isNewReconciler:!1},nl={readContext:Io,useCallback:function(e,t){return xa().memoizedState=[e,void 0===t?null:t],e},useContext:Io,useEffect:Ua,useImperativeHandle:function(e,t,r){return r=null!=r?r.concat([e]):null,Na(4194308,4,Ga.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Na(4194308,4,e,t)},useInsertionEffect:function(e,t){return Na(4,2,e,t)},useMemo:function(e,t){var r=xa();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=xa();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Za.bind(null,da,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},xa().memoizedState=e},useState:Fa,useDebugValue:$a,useDeferredValue:function(e){return xa().memoizedState=e},useTransition:function(){var e=Fa(!1),t=e[0];return e=Ya.bind(null,e[1]),xa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=da,i=xa();if(lo){if(void 0===r)throw Error(ce(407));r=r()}else{if(r=t(),null===Ru)throw Error(ce(349));30&ca||ka(n,t,r)}i.memoizedState=r;var s={value:r,getSnapshot:t};return i.queue=s,Ua(Ba.bind(null,n,s,e),[e]),n.flags|=2048,Ia(9,Pa.bind(null,n,s,r,t),void 0,null),r},useId:function(){var e=xa(),t=Ru.identifierPrefix;if(lo){var r=to;t=":"+t+"R"+(r=(eo&~(1<<32-cr(eo)-1)).toString(32)+r),0<(r=ga++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=ya++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},il={readContext:Io,useCallback:Wa,useContext:Io,useEffect:ja,useImperativeHandle:Ha,useInsertionEffect:za,useLayoutEffect:Va,useMemo:qa,useReducer:Ca,useRef:Ma,useState:function(){return Ca(Sa)},useDebugValue:$a,useDeferredValue:function(e){return Xa(Ea(),ha.memoizedState,e)},useTransition:function(){return[Ca(Sa)[0],Ea().memoizedState]},useMutableSource:Ta,useSyncExternalStore:Da,useId:Ka,unstable_isNewReconciler:!1},sl={readContext:Io,useCallback:Wa,useContext:Io,useEffect:ja,useImperativeHandle:Ha,useInsertionEffect:za,useLayoutEffect:Va,useMemo:qa,useReducer:Aa,useRef:Ma,useState:function(){return Aa(Sa)},useDebugValue:$a,useDeferredValue:function(e){var t=Ea();return null===ha?t.memoizedState=e:Xa(t,ha.memoizedState,e)},useTransition:function(){return[Aa(Sa)[0],Ea().memoizedState]},useMutableSource:Ta,useSyncExternalStore:Da,useId:Ka,unstable_isNewReconciler:!1};function ol(e,t){if(e&&e.defaultProps){for(var r in t=Ve({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function al(e,t,r,n){r=null==(r=r(n,t=e.memoizedState))?t:Ve({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var ll={isMounted:function(e){return!!(e=e._reactInternals)&&Wt(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ic(),i=sc(e),s=Go(n,i);s.payload=t,null!=r&&(s.callback=r),null!==(t=Ho(e,s,i))&&(oc(t,e,i,n),$o(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ic(),i=sc(e),s=Go(n,i);s.tag=1,s.payload=t,null!=r&&(s.callback=r),null!==(t=Ho(e,s,i))&&(oc(t,e,i,n),$o(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ic(),n=sc(e),i=Go(r,n);i.tag=2,null!=t&&(i.callback=t),null!==(t=Ho(e,i,n))&&(oc(t,e,n,r),$o(t,e,n))}};function ul(e,t,r,n,i,s,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,s,o):!(t.prototype&&t.prototype.isPureReactComponent&&hi(r,n)&&hi(i,s))}function cl(e,t,r){var n=!1,i=Bs,s=t.contextType;return"object"==typeof s&&null!==s?s=Io(s):(i=Ms(t)?Fs:Os.current,s=(n=null!=(n=t.contextTypes))?Is(e,i):Bs),t=new t(r,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ll,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function dl(e,t,r,n){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&ll.enqueueReplaceState(t,t.state,null)}function hl(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},zo(e);var s=t.contextType;"object"==typeof s&&null!==s?i.context=Io(s):(s=Ms(t)?Fs:Os.current,i.context=Is(e,s)),i.state=e.memoizedState,"function"==typeof(s=t.getDerivedStateFromProps)&&(al(e,t,s,r),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ll.enqueueReplaceState(i,i.state,null),qo(e,r,i,n),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function fl(e,t){try{var r="",n=t;do{r+=We(n),n=n.return}while(n);var i=r}catch(kye){i="\nError generating stack: "+kye.message+"\n"+kye.stack}return{value:e,source:t,stack:i,digest:null}}function pl(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function ml(e,t){try{console.error(t.value)}catch(Tye){setTimeout(function(){throw Tye})}}var gl="function"==typeof WeakMap?WeakMap:Map;function yl(e,t,r){(r=Go(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Xu||(Xu=!0,Yu=n),ml(0,t)},r}function vl(e,t,r){(r=Go(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"==typeof n){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){ml(0,t)}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(r.callback=function(){ml(0,t),"function"!=typeof n&&(null===Ku?Ku=new Set([this]):Ku.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function _l(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new gl;var i=new Set;n.set(t,i)}else void 0===(i=n.get(t))&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=kc.bind(null,e,t,r),t.then(e,e))}function bl(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function wl(e,t,r,n,i){return 1&e.mode?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Go(-1,1)).tag=2,Ho(r,t,1))),r.lanes|=1),e)}var xl=Ce.ReactCurrentOwner,El=!1;function Sl(e,t,r,n){t.child=null===e?Ao(t,null,r,n):Co(t,e.child,r,n)}function Cl(e,t,r,n,i){r=r.render;var s=t.ref;return Fo(t,i),n=ba(e,t,r,n,s,i),r=wa(),null===e||El?(lo&&r&&io(t),t.flags|=1,Sl(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Xl(e,t,i))}function Al(e,t,r,n,i){if(null===e){var s=r.type;return"function"!=typeof s||Mc(s)||void 0!==s.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Lc(r.type,null,n,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Tl(e,t,s,n,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((r=null!==(r=r.compare)?r:hi)(o,n)&&e.ref===t.ref)return Xl(e,t,i)}return t.flags|=1,(e=Nc(s,n)).ref=t.ref,e.return=t,t.child=e}function Tl(e,t,r,n,i){if(null!==e){var s=e.memoizedProps;if(hi(s,n)&&e.ref===t.ref){if(El=!1,t.pendingProps=n=s,0===(e.lanes&i))return t.lanes=e.lanes,Xl(e,t,i);131072&e.flags&&(El=!0)}}return Pl(e,t,r,n,i)}function Dl(e,t,r){var n=t.pendingProps,i=n.children,s=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(1&t.mode){if(!(1073741824&r))return e=null!==s?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ps(Nu,Mu),Mu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==s?s.baseLanes:r,Ps(Nu,Mu),Mu|=n}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ps(Nu,Mu),Mu|=r;else null!==s?(n=s.baseLanes|r,t.memoizedState=null):n=r,Ps(Nu,Mu),Mu|=n;return Sl(e,t,i,r),t.child}function kl(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Pl(e,t,r,n,i){var s=Ms(r)?Fs:Os.current;return s=Is(t,s),Fo(t,i),r=ba(e,t,r,n,s,i),n=wa(),null===e||El?(lo&&n&&io(t),t.flags|=1,Sl(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Xl(e,t,i))}function Bl(e,t,r,n,i){if(Ms(r)){var s=!0;js(t)}else s=!1;if(Fo(t,i),null===t.stateNode)ql(e,t),cl(t,r,n),hl(t,r,n,i),n=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=r.contextType;u="object"==typeof u&&null!==u?Io(u):Is(t,u=Ms(r)?Fs:Os.current);var c=r.getDerivedStateFromProps,d="function"==typeof c||"function"==typeof o.getSnapshotBeforeUpdate;d||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==n||l!==u)&&dl(t,o,n,u),jo=!1;var h=t.memoizedState;o.state=h,qo(t,n,o,i),l=t.memoizedState,a!==n||h!==l||Rs.current||jo?("function"==typeof c&&(al(t,r,c,n),l=t.memoizedState),(a=jo||ul(t,r,a,n,h,l,u))?(d||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=u,n=a):("function"==typeof o.componentDidMount&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Vo(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:ol(t.type,a),o.props=u,d=t.pendingProps,h=o.context,l="object"==typeof(l=r.contextType)&&null!==l?Io(l):Is(t,l=Ms(r)?Fs:Os.current);var f=r.getDerivedStateFromProps;(c="function"==typeof f||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==d||h!==l)&&dl(t,o,n,l),jo=!1,h=t.memoizedState,o.state=h,qo(t,n,o,i);var p=t.memoizedState;a!==d||h!==p||Rs.current||jo?("function"==typeof f&&(al(t,r,f,n),p=t.memoizedState),(u=jo||ul(t,r,u,n,h,p,l)||!1)?(c||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(n,p,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(n,p,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),o.props=n,o.state=p,o.context=l,n=u):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Ol(e,t,r,n,s,i)}function Ol(e,t,r,n,i,s){kl(e,t);var o=!!(128&t.flags);if(!n&&!o)return i&&zs(t,r,!1),Xl(e,t,s);n=t.stateNode,xl.current=t;var a=o&&"function"!=typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&o?(t.child=Co(t,e.child,null,s),t.child=Co(t,null,a,s)):Sl(e,t,a,s),t.memoizedState=n.state,i&&zs(t,r,!0),t.child}function Rl(e){var t=e.stateNode;t.pendingContext?Ls(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ls(0,t.context,!1),ea(e,t.containerInfo)}function Fl(e,t,r,n,i){return vo(),_o(i),t.flags|=256,Sl(e,t,r,n),t.child}var Il,Ml,Nl,Ll,Ul={dehydrated:null,treeContext:null,retryLane:0};function jl(e){return{baseLanes:e,cachePool:null,transitions:null}}function zl(e,t,r){var n,i=t.pendingProps,s=ia.current,o=!1,a=!!(128&t.flags);if((n=a)||(n=(null===e||null!==e.memoizedState)&&!!(2&s)),n?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ps(ia,1&s),null===e)return po(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=i.children,e=i.fallback,o?(i=t.mode,o=t.child,a={mode:"hidden",children:a},1&i||null===o?o=jc(a,i,0,null):(o.childLanes=0,o.pendingProps=a),e=Uc(e,i,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=jl(r),t.memoizedState=Ul,e):Vl(t,a));if(null!==(s=e.memoizedState)&&null!==(n=s.dehydrated))return function(e,t,r,n,i,s,o){if(r)return 256&t.flags?(t.flags&=-257,Gl(e,t,o,n=pl(Error(ce(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=n.fallback,i=t.mode,n=jc({mode:"visible",children:n.children},i,0,null),(s=Uc(s,i,o,null)).flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,1&t.mode&&Co(t,e.child,null,o),t.child.memoizedState=jl(o),t.memoizedState=Ul,s);if(!(1&t.mode))return Gl(e,t,o,null);if("$!"===i.data){if(n=i.nextSibling&&i.nextSibling.dataset)var a=n.dgst;return n=a,Gl(e,t,o,n=pl(s=Error(ce(419)),n,void 0))}if(a=0!==(o&e.childLanes),El||a){if(null!==(n=Ru)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(n.suspendedLanes|o))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Uo(e,i),oc(n,e,i,-1))}return _c(),Gl(e,t,o,n=pl(Error(ce(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Bc.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ao=fs(i.nextSibling),oo=t,lo=!0,uo=null,null!==e&&(Zs[Js++]=eo,Zs[Js++]=to,Zs[Js++]=Qs,eo=e.id,to=e.overflow,Qs=t),(t=Vl(t,n.children)).flags|=4096,t)}(e,t,a,i,n,s,r);if(o){o=i.fallback,a=t.mode,n=(s=e.child).sibling;var l={mode:"hidden",children:i.children};return 1&a||t.child===s?(i=Nc(s,l)).subtreeFlags=14680064&s.subtreeFlags:((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null),null!==n?o=Nc(n,o):(o=Uc(o,a,r,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,a=null===(a=e.child.memoizedState)?jl(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~r,t.memoizedState=Ul,i}return e=(o=e.child).sibling,i=Nc(o,{mode:"visible",children:i.children}),!(1&t.mode)&&(i.lanes=r),i.return=t,i.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function Vl(e,t){return(t=jc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Gl(e,t,r,n){return null!==n&&_o(n),Co(t,e.child,null,r),(e=Vl(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Hl(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Ro(e.return,t,r)}function $l(e,t,r,n,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function Wl(e,t,r){var n=t.pendingProps,i=n.revealOrder,s=n.tail;if(Sl(e,t,n.children,r),2&(n=ia.current))n=1&n|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Hl(e,r,t);else if(19===e.tag)Hl(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ps(ia,n),1&t.mode)switch(i){case"forwards":for(r=t.child,i=null;null!==r;)null!==(e=r.alternate)&&null===sa(e)&&(i=r),r=r.sibling;null===(r=i)?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),$l(t,!1,i,r,s);break;case"backwards":for(r=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===sa(e)){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}$l(t,!0,r,null,s);break;case"together":$l(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function ql(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Xl(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),ju|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(ce(153));if(null!==t.child){for(r=Nc(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Nc(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Yl(e,t){if(!lo)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Kl(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=14680064&i.subtreeFlags,n|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Zl(e,t,r){var n=t.pendingProps;switch(so(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kl(t),null;case 1:case 17:return Ms(t.type)&&Ns(),Kl(t),null;case 3:return n=t.stateNode,ta(),ks(Rs),ks(Os),aa(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(go(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==uo&&(cc(uo),uo=null))),Ml(e,t),Kl(t),null;case 5:na(t);var i=Qo(Jo.current);if(r=t.type,null!==e&&null!=t.stateNode)Nl(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(ce(166));return Kl(t),null}if(e=Qo(Ko.current),go(t)){n=t.stateNode,r=t.type;var s=t.memoizedProps;switch(n[gs]=t,n[ys]=s,e=!!(1&t.mode),r){case"dialog":Gi("cancel",n),Gi("close",n);break;case"iframe":case"object":case"embed":Gi("load",n);break;case"video":case"audio":for(i=0;i<Ui.length;i++)Gi(Ui[i],n);break;case"source":Gi("error",n);break;case"img":case"image":case"link":Gi("error",n),Gi("load",n);break;case"details":Gi("toggle",n);break;case"input":tt(n,s),Gi("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Gi("invalid",n);break;case"textarea":ut(n,s),Gi("invalid",n)}for(var o in xt(r,s),i=null,s)if(s.hasOwnProperty(o)){var a=s[o];"children"===o?"string"==typeof a?n.textContent!==a&&(!0!==s.suppressHydrationWarning&&rs(n.textContent,a,e),i=["children",a]):"number"==typeof a&&n.textContent!==""+a&&(!0!==s.suppressHydrationWarning&&rs(n.textContent,a,e),i=["children",""+a]):he.hasOwnProperty(o)&&null!=a&&"onScroll"===o&&Gi("scroll",n)}switch(r){case"input":Ze(n),it(n,s,!0);break;case"textarea":Ze(n),dt(n);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(n.onclick=ns)}n=i,t.updateQueue=n,null!==n&&(t.flags|=4)}else{o=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ht(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof n.is?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),"select"===r&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[gs]=t,e[ys]=n,Il(e,t,!1,!1),t.stateNode=e;e:{switch(o=Et(r,n),r){case"dialog":Gi("cancel",e),Gi("close",e),i=n;break;case"iframe":case"object":case"embed":Gi("load",e),i=n;break;case"video":case"audio":for(i=0;i<Ui.length;i++)Gi(Ui[i],e);i=n;break;case"source":Gi("error",e),i=n;break;case"img":case"image":case"link":Gi("error",e),Gi("load",e),i=n;break;case"details":Gi("toggle",e),i=n;break;case"input":tt(e,n),i=et(e,n),Gi("invalid",e);break;case"option":default:i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=Ve({},n,{value:void 0}),Gi("invalid",e);break;case"textarea":ut(e,n),i=lt(e,n),Gi("invalid",e)}for(s in xt(r,i),a=i)if(a.hasOwnProperty(s)){var l=a[s];"style"===s?bt(e,l):"dangerouslySetInnerHTML"===s?null!=(l=l?l.__html:void 0)&&mt(e,l):"children"===s?"string"==typeof l?("textarea"!==r||""!==l)&&gt(e,l):"number"==typeof l&&gt(e,""+l):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(he.hasOwnProperty(s)?null!=l&&"onScroll"===s&&Gi("scroll",e):null!=l&&Se(e,s,l,o))}switch(r){case"input":Ze(e),it(e,n,!1);break;case"textarea":Ze(e),dt(e);break;case"option":null!=n.value&&e.setAttribute("value",""+Ye(n.value));break;case"select":e.multiple=!!n.multiple,null!=(s=n.value)?at(e,!!n.multiple,s,!1):null!=n.defaultValue&&at(e,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=ns)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Kl(t),null;case 6:if(e&&null!=t.stateNode)Ll(e,t,e.memoizedProps,n);else{if("string"!=typeof n&&null===t.stateNode)throw Error(ce(166));if(r=Qo(Jo.current),Qo(Ko.current),go(t)){if(n=t.stateNode,r=t.memoizedProps,n[gs]=t,(s=n.nodeValue!==r)&&null!==(e=oo))switch(e.tag){case 3:rs(n.nodeValue,r,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&rs(n.nodeValue,r,!!(1&e.mode))}s&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[gs]=t,t.stateNode=n}return Kl(t),null;case 13:if(ks(ia),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(lo&&null!==ao&&1&t.mode&&!(128&t.flags))yo(),vo(),t.flags|=98560,s=!1;else if(s=go(t),null!==n&&null!==n.dehydrated){if(null===e){if(!s)throw Error(ce(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(ce(317));s[gs]=t}else vo(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Kl(t),s=!1}else null!==uo&&(cc(uo),uo=null),s=!0;if(!s)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=r,t):((n=null!==n)!=(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,1&t.mode&&(null===e||1&ia.current?0===Lu&&(Lu=3):_c())),null!==t.updateQueue&&(t.flags|=4),Kl(t),null);case 4:return ta(),Ml(e,t),null===e&&Wi(t.stateNode.containerInfo),Kl(t),null;case 10:return Oo(t.type._context),Kl(t),null;case 19:if(ks(ia),null===(s=t.memoizedState))return Kl(t),null;if(n=!!(128&t.flags),null===(o=s.rendering))if(n)Yl(s,!1);else{if(0!==Lu||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(o=sa(e))){for(t.flags|=128,Yl(s,!1),null!==(n=o.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(s=r).flags&=14680066,null===(o=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ps(ia,1&ia.current|2),t.child}e=e.sibling}null!==s.tail&&tr()>Wu&&(t.flags|=128,n=!0,Yl(s,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=sa(o))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Yl(s,!0),null===s.tail&&"hidden"===s.tailMode&&!o.alternate&&!lo)return Kl(t),null}else 2*tr()-s.renderingStartTime>Wu&&1073741824!==r&&(t.flags|=128,n=!0,Yl(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(null!==(r=s.last)?r.sibling=o:t.child=o,s.last=o)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=tr(),t.sibling=null,r=ia.current,Ps(ia,n?1&r|2:1&r),t):(Kl(t),null);case 22:case 23:return mc(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&1&t.mode?!!(1073741824&Mu)&&(Kl(t),6&t.subtreeFlags&&(t.flags|=8192)):Kl(t),null;case 24:case 25:return null}throw Error(ce(156,t.tag))}function Jl(e,t){switch(so(t),t.tag){case 1:return Ms(t.type)&&Ns(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ta(),ks(Rs),ks(Os),aa(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return na(t),null;case 13:if(ks(ia),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(ce(340));vo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ks(ia),null;case 4:return ta(),null;case 10:return Oo(t.type._context),null;case 22:case 23:return mc(),null;default:return null}}Il=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Ml=function(){},Nl=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Qo(Ko.current);var s,o=null;switch(r){case"input":i=et(e,i),n=et(e,n),o=[];break;case"select":i=Ve({},i,{value:void 0}),n=Ve({},n,{value:void 0}),o=[];break;case"textarea":i=lt(e,i),n=lt(e,n),o=[];break;default:"function"!=typeof i.onClick&&"function"==typeof n.onClick&&(e.onclick=ns)}for(u in xt(r,n),r=null,i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var a=i[u];for(s in a)a.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(he.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in n){var l=n[u];if(a=null!=i?i[u]:void 0,n.hasOwnProperty(u)&&l!==a&&(null!=l||null!=a))if("style"===u)if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(r||(r={}),r[s]=l[s])}else r||(o||(o=[]),o.push(u,r)),r=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,a=a?a.__html:void 0,null!=l&&a!==l&&(o=o||[]).push(u,l)):"children"===u?"string"!=typeof l&&"number"!=typeof l||(o=o||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(he.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&Gi("scroll",e),o||a===l||(o=[])):(o=o||[]).push(u,l))}r&&(o=o||[]).push("style",r);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Ll=function(e,t,r,n){r!==n&&(t.flags|=4)};var Ql=!1,eu=!1,tu="function"==typeof WeakSet?WeakSet:Set,ru=null;function nu(e,t){var r=e.ref;if(null!==r)if("function"==typeof r)try{r(null)}catch(pte){Dc(e,t,pte)}else r.current=null}function iu(e,t,r){try{r()}catch(pte){Dc(e,t,pte)}}var su=!1;function ou(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var i=n=n.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&iu(t,r,s)}i=i.next}while(i!==n)}}function au(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function lu(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"==typeof t?t(e):t.current=e}}function uu(e){var t=e.alternate;null!==t&&(e.alternate=null,uu(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&(delete t[gs],delete t[ys],delete t[_s],delete t[bs],delete t[ws]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function cu(e){return 5===e.tag||3===e.tag||4===e.tag}function du(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||cu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function hu(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!=(r=r._reactRootContainer)||null!==t.onclick||(t.onclick=ns));else if(4!==n&&null!==(e=e.child))for(hu(e,t,r),e=e.sibling;null!==e;)hu(e,t,r),e=e.sibling}function fu(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(fu(e,t,r),e=e.sibling;null!==e;)fu(e,t,r),e=e.sibling}var pu=null,mu=!1;function gu(e,t,r){for(r=r.child;null!==r;)yu(e,t,r),r=r.sibling}function yu(e,t,r){if(ur&&"function"==typeof ur.onCommitFiberUnmount)try{ur.onCommitFiberUnmount(lr,r)}catch(mte){}switch(r.tag){case 5:eu||nu(r,t);case 6:var n=pu,i=mu;pu=null,gu(e,t,r),mu=i,null!==(pu=n)&&(mu?(e=pu,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):pu.removeChild(r.stateNode));break;case 18:null!==pu&&(mu?(e=pu,r=r.stateNode,8===e.nodeType?hs(e.parentNode,r):1===e.nodeType&&hs(e,r),Wr(e)):hs(pu,r.stateNode));break;case 4:n=pu,i=mu,pu=r.stateNode.containerInfo,mu=!0,gu(e,t,r),pu=n,mu=i;break;case 0:case 11:case 14:case 15:if(!eu&&null!==(n=r.updateQueue)&&null!==(n=n.lastEffect)){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(2&s||4&s)&&iu(r,t,o),i=i.next}while(i!==n)}gu(e,t,r);break;case 1:if(!eu&&(nu(r,t),"function"==typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(mte){Dc(r,t,mte)}gu(e,t,r);break;case 21:gu(e,t,r);break;case 22:1&r.mode?(eu=(n=eu)||null!==r.memoizedState,gu(e,t,r),eu=n):gu(e,t,r);break;default:gu(e,t,r)}}function vu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new tu),t.forEach(function(t){var n=Oc.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))})}}function _u(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var i=r[n];try{var s=e,o=t,a=o;e:for(;null!==a;){switch(a.tag){case 5:pu=a.stateNode,mu=!1;break e;case 3:case 4:pu=a.stateNode.containerInfo,mu=!0;break e}a=a.return}if(null===pu)throw Error(ce(160));yu(s,o,i),pu=null,mu=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(Pve){Dc(i,t,Pve)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)bu(t,e),t=t.sibling}function bu(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(_u(t,e),wu(e),4&n){try{ou(3,e,e.return),au(3,e)}catch(Ave){Dc(e,e.return,Ave)}try{ou(5,e,e.return)}catch(Ave){Dc(e,e.return,Ave)}}break;case 1:_u(t,e),wu(e),512&n&&null!==r&&nu(r,r.return);break;case 5:if(_u(t,e),wu(e),512&n&&null!==r&&nu(r,r.return),32&e.flags){var i=e.stateNode;try{gt(i,"")}catch(Ave){Dc(e,e.return,Ave)}}if(4&n&&null!=(i=e.stateNode)){var s=e.memoizedProps,o=null!==r?r.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===a&&"radio"===s.type&&null!=s.name&&rt(i,s),Et(a,o);var u=Et(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];"style"===c?bt(i,d):"dangerouslySetInnerHTML"===c?mt(i,d):"children"===c?gt(i,d):Se(i,c,d,u)}switch(a){case"input":nt(i,s);break;case"textarea":ct(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;null!=f?at(i,!!s.multiple,f,!1):h!==!!s.multiple&&(null!=s.defaultValue?at(i,!!s.multiple,s.defaultValue,!0):at(i,!!s.multiple,s.multiple?[]:"",!1))}i[ys]=s}catch(Ave){Dc(e,e.return,Ave)}}break;case 6:if(_u(t,e),wu(e),4&n){if(null===e.stateNode)throw Error(ce(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(Ave){Dc(e,e.return,Ave)}}break;case 3:if(_u(t,e),wu(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{Wr(t.containerInfo)}catch(Ave){Dc(e,e.return,Ave)}break;case 4:default:_u(t,e),wu(e);break;case 13:_u(t,e),wu(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||($u=tr())),4&n&&vu(e);break;case 22:if(c=null!==r&&null!==r.memoizedState,1&e.mode?(eu=(u=eu)||c,_u(t,e),eu=u):_u(t,e),wu(e),8192&n){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!c&&1&e.mode)for(ru=e,c=e.child;null!==c;){for(d=ru=c;null!==ru;){switch(f=(h=ru).child,h.tag){case 0:case 11:case 14:case 15:ou(4,h,h.return);break;case 1:nu(h,h.return);var p=h.stateNode;if("function"==typeof p.componentWillUnmount){n=h,r=h.return;try{t=n,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(Ave){Dc(n,r,Ave)}}break;case 5:nu(h,h.return);break;case 22:if(null!==h.memoizedState){Cu(d);continue}}null!==f?(f.return=h,ru=f):Cu(d)}c=c.sibling}e:for(c=null,d=e;;){if(5===d.tag){if(null===c){c=d;try{i=d.stateNode,u?"function"==typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(a=d.stateNode,o=null!=(l=d.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,a.style.display=_t("display",o))}catch(Ave){Dc(e,e.return,Ave)}}}else if(6===d.tag){if(null===c)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(Ave){Dc(e,e.return,Ave)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:_u(t,e),wu(e),4&n&&vu(e);case 21:}}function wu(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(cu(r)){var n=r;break e}r=r.return}throw Error(ce(160))}switch(n.tag){case 5:var i=n.stateNode;32&n.flags&&(gt(i,""),n.flags&=-33),fu(e,du(e),i);break;case 3:case 4:var s=n.stateNode.containerInfo;hu(e,du(e),s);break;default:throw Error(ce(161))}}catch(yX){Dc(e,e.return,yX)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function xu(e,t,r){ru=e,Eu(e)}function Eu(e,t,r){for(var n=!!(1&e.mode);null!==ru;){var i=ru,s=i.child;if(22===i.tag&&n){var o=null!==i.memoizedState||Ql;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||eu;a=Ql;var u=eu;if(Ql=o,(eu=l)&&!u)for(ru=i;null!==ru;)l=(o=ru).child,22===o.tag&&null!==o.memoizedState?Au(i):null!==l?(l.return=o,ru=l):Au(i);for(;null!==s;)ru=s,Eu(s),s=s.sibling;ru=i,Ql=a,eu=u}Su(e)}else 8772&i.subtreeFlags&&null!==s?(s.return=i,ru=s):Su(e)}}function Su(e){for(;null!==ru;){var t=ru;if(8772&t.flags){var r=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:eu||au(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!eu)if(null===r)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:ol(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Xo(t,s,n);break;case 3:var o=t.updateQueue;if(null!==o){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Xo(t,o,r)}break;case 5:var a=t.stateNode;if(null===r&&4&t.flags){r=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var c=u.memoizedState;if(null!==c){var d=c.dehydrated;null!==d&&Wr(d)}}}break;default:throw Error(ce(163))}eu||512&t.flags&&lu(t)}catch(Bve){Dc(t,t.return,Bve)}}if(t===e){ru=null;break}if(null!==(r=t.sibling)){r.return=t.return,ru=r;break}ru=t.return}}function Cu(e){for(;null!==ru;){var t=ru;if(t===e){ru=null;break}var r=t.sibling;if(null!==r){r.return=t.return,ru=r;break}ru=t.return}}function Au(e){for(;null!==ru;){var t=ru;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{au(4,t)}catch(yX){Dc(t,r,yX)}break;case 1:var n=t.stateNode;if("function"==typeof n.componentDidMount){var i=t.return;try{n.componentDidMount()}catch(yX){Dc(t,i,yX)}}var s=t.return;try{lu(t)}catch(yX){Dc(t,s,yX)}break;case 5:var o=t.return;try{lu(t)}catch(yX){Dc(t,o,yX)}}}catch(yX){Dc(t,t.return,yX)}if(t===e){ru=null;break}var a=t.sibling;if(null!==a){a.return=t.return,ru=a;break}ru=t.return}}var Tu,Du=Math.ceil,ku=Ce.ReactCurrentDispatcher,Pu=Ce.ReactCurrentOwner,Bu=Ce.ReactCurrentBatchConfig,Ou=0,Ru=null,Fu=null,Iu=0,Mu=0,Nu=Ds(0),Lu=0,Uu=null,ju=0,zu=0,Vu=0,Gu=null,Hu=null,$u=0,Wu=1/0,qu=null,Xu=!1,Yu=null,Ku=null,Zu=!1,Ju=null,Qu=0,ec=0,tc=null,rc=-1,nc=0;function ic(){return 6&Ou?tr():-1!==rc?rc:rc=tr()}function sc(e){return 1&e.mode?2&Ou&&0!==Iu?Iu&-Iu:null!==bo.transition?(0===nc&&(nc=_r()),nc):0!==(e=Er)?e:e=void 0===(e=window.event)?16:en(e.type):1}function oc(e,t,r,n){if(50<ec)throw ec=0,tc=null,Error(ce(185));wr(e,r,n),2&Ou&&e===Ru||(e===Ru&&(!(2&Ou)&&(zu|=r),4===Lu&&dc(e,Iu)),ac(e,n),1===r&&0===Ou&&!(1&t.mode)&&(Wu=tr()+500,Gs&&Ws()))}function ac(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-cr(s),a=1<<o,l=i[o];-1===l?0!==(a&r)&&0===(a&n)||(i[o]=yr(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var n=gr(e,e===Ru?Iu:0);if(0===n)null!==r&&Jt(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&Jt(r),1===t)0===e.tag?function(e){Gs=!0,$s(e)}(hc.bind(null,e)):$s(hc.bind(null,e)),cs(function(){!(6&Ou)&&Ws()}),r=null;else{switch(Sr(n)){case 1:r=nr;break;case 4:r=ir;break;case 16:default:r=sr;break;case 536870912:r=ar}r=Rc(r,lc.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function lc(e,t){if(rc=-1,nc=0,6&Ou)throw Error(ce(327));var r=e.callbackNode;if(Ac()&&e.callbackNode!==r)return null;var n=gr(e,e===Ru?Iu:0);if(0===n)return null;if(30&n||0!==(n&e.expiredLanes)||t)t=bc(e,n);else{t=n;var i=Ou;Ou|=2;var s=vc();for(Ru===e&&Iu===t||(qu=null,Wu=tr()+500,gc(e,t));;)try{xc();break}catch(mte){yc(e,mte)}Bo(),ku.current=s,Ou=i,null!==Fu?t=0:(Ru=null,Iu=0,t=Lu)}if(0!==t){if(2===t&&0!==(i=vr(e))&&(n=i,t=uc(e,i)),1===t)throw r=Uu,gc(e,0),dc(e,n),ac(e,tr()),r;if(6===t)dc(e,n);else{if(i=e.current.alternate,!(30&n||function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!di(s(),i))return!1}catch(o){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)||(t=bc(e,n),2===t&&(s=vr(e),0!==s&&(n=s,t=uc(e,s))),1!==t)))throw r=Uu,gc(e,0),dc(e,n),ac(e,tr()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(ce(345));case 2:case 5:Cc(e,Hu,qu);break;case 3:if(dc(e,n),(130023424&n)===n&&10<(t=$u+500-tr())){if(0!==gr(e,0))break;if(((i=e.suspendedLanes)&n)!==n){ic(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=as(Cc.bind(null,e,Hu,qu),t);break}Cc(e,Hu,qu);break;case 4:if(dc(e,n),(4194240&n)===n)break;for(t=e.eventTimes,i=-1;0<n;){var o=31-cr(n);s=1<<o,(o=t[o])>i&&(i=o),n&=~s}if(n=i,10<(n=(120>(n=tr()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Du(n/1960))-n)){e.timeoutHandle=as(Cc.bind(null,e,Hu,qu),n);break}Cc(e,Hu,qu);break;default:throw Error(ce(329))}}}return ac(e,tr()),e.callbackNode===r?lc.bind(null,e):null}function uc(e,t){var r=Gu;return e.current.memoizedState.isDehydrated&&(gc(e,t).flags|=256),2!==(e=bc(e,t))&&(t=Hu,Hu=r,null!==t&&cc(t)),e}function cc(e){null===Hu?Hu=e:Hu.push.apply(Hu,e)}function dc(e,t){for(t&=~Vu,t&=~zu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-cr(t),n=1<<r;e[r]=-1,t&=~n}}function hc(e){if(6&Ou)throw Error(ce(327));Ac();var t=gr(e,0);if(!(1&t))return ac(e,tr()),null;var r=bc(e,t);if(0!==e.tag&&2===r){var n=vr(e);0!==n&&(t=n,r=uc(e,n))}if(1===r)throw r=Uu,gc(e,0),dc(e,t),ac(e,tr()),r;if(6===r)throw Error(ce(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Cc(e,Hu,qu),ac(e,tr()),null}function fc(e,t){var r=Ou;Ou|=1;try{return e(t)}finally{0===(Ou=r)&&(Wu=tr()+500,Gs&&Ws())}}function pc(e){null!==Ju&&0===Ju.tag&&!(6&Ou)&&Ac();var t=Ou;Ou|=1;var r=Bu.transition,n=Er;try{if(Bu.transition=null,Er=1,e)return e()}finally{Er=n,Bu.transition=r,!(6&(Ou=t))&&Ws()}}function mc(){Mu=Nu.current,ks(Nu)}function gc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,ls(r)),null!==Fu)for(r=Fu.return;null!==r;){var n=r;switch(so(n),n.tag){case 1:null!=(n=n.type.childContextTypes)&&Ns();break;case 3:ta(),ks(Rs),ks(Os),aa();break;case 5:na(n);break;case 4:ta();break;case 13:case 19:ks(ia);break;case 10:Oo(n.type._context);break;case 22:case 23:mc()}r=r.return}if(Ru=e,Fu=e=Nc(e.current,null),Iu=Mu=t,Lu=0,Uu=null,Vu=zu=ju=0,Hu=Gu=null,null!==Mo){for(t=0;t<Mo.length;t++)if(null!==(n=(r=Mo[t]).interleaved)){r.interleaved=null;var i=n.next,s=r.pending;if(null!==s){var o=s.next;s.next=i,n.next=o}r.pending=n}Mo=null}return e}function yc(e,t){for(;;){var r=Fu;try{if(Bo(),la.current=rl,pa){for(var n=da.memoizedState;null!==n;){var i=n.queue;null!==i&&(i.pending=null),n=n.next}pa=!1}if(ca=0,fa=ha=da=null,ma=!1,ga=0,Pu.current=null,null===r||null===r.return){Lu=1,Uu=t,Fu=null;break}e:{var s=e,o=r.return,a=r,l=t;if(t=Iu,a.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var u=l,c=a,d=c.tag;if(!(1&c.mode||0!==d&&11!==d&&15!==d)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=bl(o);if(null!==f){f.flags&=-257,wl(f,o,a,0,t),1&f.mode&&_l(s,u,t),l=u;var p=(t=f).updateQueue;if(null===p){var m=new Set;m.add(l),t.updateQueue=m}else p.add(l);break e}if(!(1&t)){_l(s,u,t),_c();break e}l=Error(ce(426))}else if(lo&&1&a.mode){var g=bl(o);if(null!==g){!(65536&g.flags)&&(g.flags|=256),wl(g,o,a,0,t),_o(fl(l,a));break e}}s=l=fl(l,a),4!==Lu&&(Lu=2),null===Gu?Gu=[s]:Gu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Wo(s,yl(0,l,t));break e;case 1:a=l;var y=s.type,v=s.stateNode;if(!(128&s.flags||"function"!=typeof y.getDerivedStateFromError&&(null===v||"function"!=typeof v.componentDidCatch||null!==Ku&&Ku.has(v)))){s.flags|=65536,t&=-t,s.lanes|=t,Wo(s,vl(s,a,t));break e}}s=s.return}while(null!==s)}Sc(r)}catch(_){t=_,Fu===r&&null!==r&&(Fu=r=r.return);continue}break}}function vc(){var e=ku.current;return ku.current=rl,null===e?rl:e}function _c(){0!==Lu&&3!==Lu&&2!==Lu||(Lu=4),null===Ru||!(268435455&ju)&&!(268435455&zu)||dc(Ru,Iu)}function bc(e,t){var r=Ou;Ou|=2;var n=vc();for(Ru===e&&Iu===t||(qu=null,gc(e,t));;)try{wc();break}catch(Ove){yc(e,Ove)}if(Bo(),Ou=r,ku.current=n,null!==Fu)throw Error(ce(261));return Ru=null,Iu=0,Lu}function wc(){for(;null!==Fu;)Ec(Fu)}function xc(){for(;null!==Fu&&!Qt();)Ec(Fu)}function Ec(e){var t=Tu(e.alternate,e,Mu);e.memoizedProps=e.pendingProps,null===t?Sc(e):Fu=t,Pu.current=null}function Sc(e){var t=e;do{var r=t.alternate;if(e=t.return,32768&t.flags){if(null!==(r=Jl(r,t)))return r.flags&=32767,void(Fu=r);if(null===e)return Lu=6,void(Fu=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(r=Zl(r,t,Mu)))return void(Fu=r);if(null!==(t=t.sibling))return void(Fu=t);Fu=t=e}while(null!==t);0===Lu&&(Lu=5)}function Cc(e,t,r){var n=Er,i=Bu.transition;try{Bu.transition=null,Er=1,function(e,t,r,n){do{Ac()}while(null!==Ju);if(6&Ou)throw Error(ce(327));r=e.finishedWork;var i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ce(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-cr(r),s=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~s}}(e,s),e===Ru&&(Fu=Ru=null,Iu=0),!(2064&r.subtreeFlags)&&!(2064&r.flags)||Zu||(Zu=!0,Rc(sr,function(){return Ac(),null})),s=!!(15990&r.flags),15990&r.subtreeFlags||s){s=Bu.transition,Bu.transition=null;var o=Er;Er=1;var a=Ou;Ou|=4,Pu.current=null,function(e,t){if(is=Xr,yi(e=gi())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch(Dte){r=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=e,h=null;t:for(;;){for(var f;d!==r||0!==i&&3!==d.nodeType||(a=o+i),d!==s||0!==n&&3!==d.nodeType||(l=o+n),3===d.nodeType&&(o+=d.nodeValue.length),null!==(f=d.firstChild);)h=d,d=f;for(;;){if(d===e)break t;if(h===r&&++u===i&&(a=o),h===s&&++c===n&&(l=o),null!==(f=d.nextSibling))break;h=(d=h).parentNode}d=f}r=-1===a||-1===l?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(ss={focusedElem:e,selectionRange:r},Xr=!1,ru=t;null!==ru;)if(e=(t=ru).child,1028&t.subtreeFlags&&null!==e)e.return=t,ru=e;else for(;null!==ru;){t=ru;try{var p=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:ol(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(ce(163))}}catch(Dte){Dc(t,t.return,Dte)}if(null!==(e=t.sibling)){e.return=t.return,ru=e;break}ru=t.return}p=su,su=!1}(e,r),bu(r,e),vi(ss),Xr=!!is,ss=is=null,e.current=r,xu(r),er(),Ou=a,Er=o,Bu.transition=s}else e.current=r;if(Zu&&(Zu=!1,Ju=e,Qu=i),0===(s=e.pendingLanes)&&(Ku=null),function(e){if(ur&&"function"==typeof ur.onCommitFiberRoot)try{ur.onCommitFiberRoot(lr,e,void 0,!(128&~e.current.flags))}catch(t){}}(r.stateNode),ac(e,tr()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Xu)throw Xu=!1,e=Yu,Yu=null,e;!!(1&Qu)&&0!==e.tag&&Ac(),1&(s=e.pendingLanes)?e===tc?ec++:(ec=0,tc=e):ec=0,Ws()}(e,t,r,n)}finally{Bu.transition=i,Er=n}return null}function Ac(){if(null!==Ju){var e=Sr(Qu),t=Bu.transition,r=Er;try{if(Bu.transition=null,Er=16>e?16:e,null===Ju)var n=!1;else{if(e=Ju,Ju=null,Qu=0,6&Ou)throw Error(ce(331));var i=Ou;for(Ou|=4,ru=e.current;null!==ru;){var s=ru,o=s.child;if(16&ru.flags){var a=s.deletions;if(null!==a){for(var l=0;l<a.length;l++){var u=a[l];for(ru=u;null!==ru;){var c=ru;switch(c.tag){case 0:case 11:case 15:ou(8,c,s)}var d=c.child;if(null!==d)d.return=c,ru=d;else for(;null!==ru;){var h=(c=ru).sibling,f=c.return;if(uu(c),c===u){ru=null;break}if(null!==h){h.return=f,ru=h;break}ru=f}}}var p=s.alternate;if(null!==p){var m=p.child;if(null!==m){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}ru=s}}if(2064&s.subtreeFlags&&null!==o)o.return=s,ru=o;else e:for(;null!==ru;){if(2048&(s=ru).flags)switch(s.tag){case 0:case 11:case 15:ou(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,ru=y;break e}ru=s.return}}var v=e.current;for(ru=v;null!==ru;){var _=(o=ru).child;if(2064&o.subtreeFlags&&null!==_)_.return=o,ru=_;else e:for(o=v;null!==ru;){if(2048&(a=ru).flags)try{switch(a.tag){case 0:case 11:case 15:au(9,a)}}catch(w){Dc(a,a.return,w)}if(a===o){ru=null;break e}var b=a.sibling;if(null!==b){b.return=a.return,ru=b;break e}ru=a.return}}if(Ou=i,Ws(),ur&&"function"==typeof ur.onPostCommitFiberRoot)try{ur.onPostCommitFiberRoot(lr,e)}catch(w){}n=!0}return n}finally{Er=r,Bu.transition=t}}return!1}function Tc(e,t,r){e=Ho(e,t=yl(0,t=fl(r,t),1),1),t=ic(),null!==e&&(wr(e,1,t),ac(e,t))}function Dc(e,t,r){if(3===e.tag)Tc(e,e,r);else for(;null!==t;){if(3===t.tag){Tc(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===Ku||!Ku.has(n))){t=Ho(t,e=vl(t,e=fl(r,e),1),1),e=ic(),null!==t&&(wr(t,1,e),ac(t,e));break}}t=t.return}}function kc(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=ic(),e.pingedLanes|=e.suspendedLanes&r,Ru===e&&(Iu&r)===r&&(4===Lu||3===Lu&&(130023424&Iu)===Iu&&500>tr()-$u?gc(e,0):Vu|=r),ac(e,t)}function Pc(e,t){0===t&&(1&e.mode?(t=pr,!(130023424&(pr<<=1))&&(pr=4194304)):t=1);var r=ic();null!==(e=Uo(e,t))&&(wr(e,t,r),ac(e,r))}function Bc(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Pc(e,r)}function Oc(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;null!==i&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ce(314))}null!==n&&n.delete(t),Pc(e,r)}function Rc(e,t){return Zt(e,t)}function Fc(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ic(e,t,r,n){return new Fc(e,t,r,n)}function Mc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Nc(e,t){var r=e.alternate;return null===r?((r=Ic(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Lc(e,t,r,n,i,s){var o=2;if(n=e,"function"==typeof e)Mc(e)&&(o=1);else if("string"==typeof e)o=5;else e:switch(e){case De:return Uc(r.children,i,s,t);case ke:o=8,i|=8;break;case Pe:return(e=Ic(12,r,t,2|i)).elementType=Pe,e.lanes=s,e;case Fe:return(e=Ic(13,r,t,i)).elementType=Fe,e.lanes=s,e;case Ie:return(e=Ic(19,r,t,i)).elementType=Ie,e.lanes=s,e;case Le:return jc(r,i,s,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case Be:o=10;break e;case Oe:o=9;break e;case Re:o=11;break e;case Me:o=14;break e;case Ne:o=16,n=null;break e}throw Error(ce(130,null==e?e:typeof e,""))}return(t=Ic(o,r,t,i)).elementType=e,t.type=n,t.lanes=s,t}function Uc(e,t,r,n){return(e=Ic(7,e,n,t)).lanes=r,e}function jc(e,t,r,n){return(e=Ic(22,e,n,t)).elementType=Le,e.lanes=r,e.stateNode={isHidden:!1},e}function zc(e,t,r){return(e=Ic(6,e,null,t)).lanes=r,e}function Vc(e,t,r){return(t=Ic(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Gc(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=br(0),this.expirationTimes=br(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=br(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Hc(e,t,r,n,i,s,o,a,l){return e=new Gc(e,t,r,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Ic(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},zo(s),e}function $c(e){if(!e)return Bs;e:{if(Wt(e=e._reactInternals)!==e||1!==e.tag)throw Error(ce(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ms(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(ce(171))}if(1===e.tag){var r=e.type;if(Ms(r))return Us(e,r,t)}return t}function Wc(e,t,r,n,i,s,o,a,l){return(e=Hc(r,n,!0,e,0,s,0,a,l)).context=$c(null),r=e.current,(s=Go(n=ic(),i=sc(r))).callback=null!=t?t:null,Ho(r,s,i),e.current.lanes=i,wr(e,i,n),ac(e,n),e}function qc(e,t,r,n){var i=t.current,s=ic(),o=sc(i);return r=$c(r),null===t.context?t.context=r:t.pendingContext=r,(t=Go(s,o)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=Ho(i,t,o))&&(oc(e,i,o,s),$o(e,i,o)),o}function Xc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Yc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Kc(e,t){Yc(e,t),(e=e.alternate)&&Yc(e,t)}Tu=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Rs.current)El=!0;else{if(0===(e.lanes&r)&&!(128&t.flags))return El=!1,function(e,t,r){switch(t.tag){case 3:Rl(t),vo();break;case 5:ra(t);break;case 1:Ms(t.type)&&js(t);break;case 4:ea(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Ps(To,n._currentValue),n._currentValue=i;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Ps(ia,1&ia.current),t.flags|=128,null):0!==(r&t.child.childLanes)?zl(e,t,r):(Ps(ia,1&ia.current),null!==(e=Xl(e,t,r))?e.sibling:null);Ps(ia,1&ia.current);break;case 19:if(n=0!==(r&t.childLanes),128&e.flags){if(n)return Wl(e,t,r);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ps(ia,ia.current),n)break;return null;case 22:case 23:return t.lanes=0,Dl(e,t,r)}return Xl(e,t,r)}(e,t,r);El=!!(131072&e.flags)}else El=!1,lo&&1048576&t.flags&&no(t,Ks,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ql(e,t),e=t.pendingProps;var i=Is(t,Os.current);Fo(t,r),i=ba(null,t,n,e,i,r);var s=wa();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ms(n)?(s=!0,js(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,zo(t),i.updater=ll,t.stateNode=i,i._reactInternals=t,hl(t,n,e,r),t=Ol(null,t,n,!0,s,r)):(t.tag=0,lo&&s&&io(t),Sl(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ql(e,t),e=t.pendingProps,n=(i=n._init)(n._payload),t.type=n,i=t.tag=function(e){if("function"==typeof e)return Mc(e)?1:0;if(null!=e){if((e=e.$$typeof)===Re)return 11;if(e===Me)return 14}return 2}(n),e=ol(n,e),i){case 0:t=Pl(null,t,n,e,r);break e;case 1:t=Bl(null,t,n,e,r);break e;case 11:t=Cl(null,t,n,e,r);break e;case 14:t=Al(null,t,n,ol(n.type,e),r);break e}throw Error(ce(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,Pl(e,t,n,i=t.elementType===n?i:ol(n,i),r);case 1:return n=t.type,i=t.pendingProps,Bl(e,t,n,i=t.elementType===n?i:ol(n,i),r);case 3:e:{if(Rl(t),null===e)throw Error(ce(387));n=t.pendingProps,i=(s=t.memoizedState).element,Vo(e,t),qo(t,n,null,r);var o=t.memoizedState;if(n=o.element,s.isDehydrated){if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Fl(e,t,n,r,i=fl(Error(ce(423)),t));break e}if(n!==i){t=Fl(e,t,n,r,i=fl(Error(ce(424)),t));break e}for(ao=fs(t.stateNode.containerInfo.firstChild),oo=t,lo=!0,uo=null,r=Ao(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(vo(),n===i){t=Xl(e,t,r);break e}Sl(e,t,n,r)}t=t.child}return t;case 5:return ra(t),null===e&&po(t),n=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,o=i.children,os(n,i)?o=null:null!==s&&os(n,s)&&(t.flags|=32),kl(e,t),Sl(e,t,o,r),t.child;case 6:return null===e&&po(t),null;case 13:return zl(e,t,r);case 4:return ea(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Co(t,null,n,r):Sl(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,Cl(e,t,n,i=t.elementType===n?i:ol(n,i),r);case 7:return Sl(e,t,t.pendingProps,r),t.child;case 8:case 12:return Sl(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Ps(To,n._currentValue),n._currentValue=o,null!==s)if(di(s.value,o)){if(s.children===i.children&&!Rs.current){t=Xl(e,t,r);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var a=s.dependencies;if(null!==a){o=s.child;for(var l=a.firstContext;null!==l;){if(l.context===n){if(1===s.tag){(l=Go(-1,r&-r)).tag=2;var u=s.updateQueue;if(null!==u){var c=(u=u.shared).pending;null===c?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=r,null!==(l=s.alternate)&&(l.lanes|=r),Ro(s.return,r,t),a.lanes|=r;break}l=l.next}}else if(10===s.tag)o=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(o=s.return))throw Error(ce(341));o.lanes|=r,null!==(a=o.alternate)&&(a.lanes|=r),Ro(o,r,t),o=s.sibling}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===t){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}Sl(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Fo(t,r),n=n(i=Io(i)),t.flags|=1,Sl(e,t,n,r),t.child;case 14:return i=ol(n=t.type,t.pendingProps),Al(e,t,n,i=ol(n.type,i),r);case 15:return Tl(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:ol(n,i),ql(e,t),t.tag=1,Ms(n)?(e=!0,js(t)):e=!1,Fo(t,r),cl(t,n,i),hl(t,n,i,r),Ol(null,t,n,!0,e,r);case 19:return Wl(e,t,r);case 22:return Dl(e,t,r)}throw Error(ce(156,t.tag))};var Zc="function"==typeof reportError?reportError:function(e){console.error(e)};function Jc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function ed(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function td(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function rd(){}function nd(e,t,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if("function"==typeof i){var a=i;i=function(){var e=Xc(o);a.call(e)}}qc(t,o,e,i)}else o=function(e,t,r,n,i){if(i){if("function"==typeof n){var s=n;n=function(){var e=Xc(o);s.call(e)}}var o=Wc(t,n,e,0,null,!1,0,"",rd);return e._reactRootContainer=o,e[vs]=o.current,Wi(8===e.nodeType?e.parentNode:e),pc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof n){var a=n;n=function(){var e=Xc(l);a.call(e)}}var l=Hc(e,0,!1,null,0,!1,0,"",rd);return e._reactRootContainer=l,e[vs]=l.current,Wi(8===e.nodeType?e.parentNode:e),pc(function(){qc(t,l,r,n)}),l}(r,t,e,i,n);return Xc(o)}Qc.prototype.render=Jc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(ce(409));qc(e,t,null,null)},Qc.prototype.unmount=Jc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;pc(function(){qc(null,e,null,null)}),t[vs]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Dr();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Nr.length&&0!==t&&t<Nr[r].priority;r++);Nr.splice(r,0,e),0===r&&zr(e)}},Cr=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=mr(t.pendingLanes);0!==r&&(xr(t,1|r),ac(t,tr()),!(6&Ou)&&(Wu=tr()+500,Ws()))}break;case 13:pc(function(){var t=Uo(e,1);if(null!==t){var r=ic();oc(t,e,1,r)}}),Kc(e,1)}},Ar=function(e){if(13===e.tag){var t=Uo(e,134217728);null!==t&&oc(t,e,134217728,ic()),Kc(e,134217728)}},Tr=function(e){if(13===e.tag){var t=sc(e),r=Uo(e,t);null!==r&&oc(r,e,t,ic()),Kc(e,t)}},Dr=function(){return Er},kr=function(e,t){var r=Er;try{return Er=e,t()}finally{Er=r}},At=function(e,t,r){switch(t){case"input":if(nt(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=Cs(n);if(!i)throw Error(ce(90));Je(n),nt(n,i)}}}break;case"textarea":ct(e,r);break;case"select":null!=(t=r.value)&&at(e,!!r.multiple,t,!1)}},Ot=fc,Rt=pc;var id={usingClientEntryPoint:!1,Events:[Es,Ss,Cs,Pt,Bt,fc]},sd={findFiberByHostInstance:xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},od={bundleType:sd.bundleType,version:sd.version,rendererPackageName:sd.rendererPackageName,rendererConfig:sd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ce.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Yt(e))?null:e.stateNode},findFiberByHostInstance:sd.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ad=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ad.isDisabled&&ad.supportsFiber)try{lr=ad.inject(od),ur=ad}catch(Oye){}}ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=id,ie.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ed(t))throw Error(ce(200));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Te,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},ie.createRoot=function(e,t){if(!ed(e))throw Error(ce(299));var r=!1,n="",i=Zc;return null!=t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Hc(e,1,!1,null,0,r,0,n,i),e[vs]=t.current,Wi(8===e.nodeType?e.parentNode:e),new Jc(t)},ie.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(ce(188));throw e=Object.keys(e).join(","),Error(ce(268,e))}return e=null===(e=Yt(t))?null:e.stateNode},ie.flushSync=function(e){return pc(e)},ie.hydrate=function(e,t,r){if(!td(t))throw Error(ce(200));return nd(null,e,t,!0,r)},ie.hydrateRoot=function(e,t,r){if(!ed(e))throw Error(ce(405));var n=null!=r&&r.hydratedSources||null,i=!1,s="",o=Zc;if(null!=r&&(!0===r.unstable_strictMode&&(i=!0),void 0!==r.identifierPrefix&&(s=r.identifierPrefix),void 0!==r.onRecoverableError&&(o=r.onRecoverableError)),t=Wc(t,null,e,1,null!=r?r:null,i,0,s,o),e[vs]=t.current,Wi(e),n)for(e=0;e<n.length;e++)i=(i=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new Qc(t)},ie.render=function(e,t,r){if(!td(t))throw Error(ce(200));return nd(null,e,t,!1,r)},ie.unmountComponentAtNode=function(e){if(!td(e))throw Error(ce(40));return!!e._reactRootContainer&&(pc(function(){nd(null,null,e,!1,function(){e._reactRootContainer=null,e[vs]=null})}),!0)},ie.unstable_batchedUpdates=fc,ie.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!td(r))throw Error(ce(200));if(null==e||void 0===e._reactInternals)throw Error(ce(38));return nd(e,t,r,!1,n)},ie.version="18.3.1-next-f1338f8080-20240426",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),ne.exports=ie;var ld=ne.exports;const ud=s(ld),cd=r({__proto__:null,default:ud},[ld]);var dd,hd=ld;
/**
			 * @remix-run/router v1.23.1
			 *
			 * Copyright (c) Remix Software Inc.
			 *
			 * This source code is licensed under the MIT license found in the
			 * LICENSE.md file in the root directory of this source tree.
			 *
			 * @license MIT
			 */
function fd(){return fd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fd.apply(this,arguments)}re.createRoot=hd.createRoot,re.hydrateRoot=hd.hydrateRoot,function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(dd||(dd={}));const pd="popstate";function md(e){return void 0===e&&(e={}),function(e,t,r,n){void 0===n&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,o=i.history,a=dd.Pop,l=null,u=c();function c(){return(o.state||{idx:null}).idx}function d(){a=dd.Pop;let e=c(),t=null==e?null:e-u;u=e,l&&l({action:a,location:m.location,delta:t})}function h(e,t){a=dd.Push;let n=_d(m.location,e,t);r&&r(n,e),u=c()+1;let d=vd(n,u),h=m.createHref(n);try{o.pushState(d,"",h)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;i.location.assign(h)}s&&l&&l({action:a,location:m.location,delta:1})}function f(e,t){a=dd.Replace;let n=_d(m.location,e,t);r&&r(n,e),u=c();let i=vd(n,u),d=m.createHref(n);o.replaceState(i,"",d),s&&l&&l({action:a,location:m.location,delta:0})}function p(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,r="string"==typeof e?e:bd(e);return r=r.replace(/ $/,"%20"),gd(t,"No window.location.(origin|href) available to create URL for href: "+r),new URL(r,t)}null==u&&(u=0,o.replaceState(fd({},o.state,{idx:u}),""));let m={get action(){return a},get location(){return e(i,o)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(pd,d),l=e,()=>{i.removeEventListener(pd,d),l=null}},createHref:e=>t(i,e),createURL:p,encodeLocation(e){let t=p(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:h,replace:f,go:e=>o.go(e)};return m}(function(e,t){let{pathname:r="/",search:n="",hash:i=""}=wd(e.location.hash.substr(1));return r.startsWith("/")||r.startsWith(".")||(r="/"+r),_d("",{pathname:r,search:n,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let r=e.document.querySelector("base"),n="";if(r&&r.getAttribute("href")){let t=e.location.href,r=t.indexOf("#");n=-1===r?t:t.slice(0,r)}return n+"#"+("string"==typeof t?t:bd(t))},function(e,t){yd("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")},e)}function gd(e,t){if(!1===e||null==e)throw new Error(t)}function yd(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(Ove){}}}function vd(e,t){return{usr:e.state,key:e.key,idx:t}}function _d(e,t,r,n){return void 0===r&&(r=null),fd({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?wd(t):t,{state:r,key:t&&t.key||n||Math.random().toString(36).substr(2,8)})}function bd(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function wd(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}var xd;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(xd||(xd={}));const Ed=new Set(["lazy","caseSensitive","path","id","index","children"]);function Sd(e,t,r,n){return void 0===r&&(r=[]),void 0===n&&(n={}),e.map((e,i)=>{let s=[...r,String(i)],o="string"==typeof e.id?e.id:s.join("-");if(gd(!0!==e.index||!e.children,"Cannot specify children on an index route"),gd(!n[o],'Found a route id collision on id "'+o+"\".  Route id's must be globally unique within Data Router usages"),function(e){return!0===e.index}(e)){let r=fd({},e,t(e),{id:o});return n[o]=r,r}{let r=fd({},e,t(e),{id:o,children:void 0});return n[o]=r,e.children&&(r.children=Sd(e.children,t,s,n)),r}})}function Cd(e,t,r){return void 0===r&&(r="/"),Ad(e,t,r,!1)}function Ad(e,t,r,n){let i=jd(("string"==typeof t?wd(t):t).pathname||"/",r);if(null==i)return null;let s=Td(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r]);return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let o=null;for(let a=0;null==o&&a<s.length;++a){let e=Ud(i);o=Nd(s[a],e,n)}return o}function Td(e,t,r,n){void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===n&&(n="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(gd(o.relativePath.startsWith(n),'Absolute route path "'+o.relativePath+'" nested under path "'+n+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(n.length));let a=qd([n,o.relativePath]),l=r.concat(o);e.children&&e.children.length>0&&(gd(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),Td(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:Md(a,e.index),routesMeta:l})};return e.forEach((e,t)=>{var r;if(""!==e.path&&null!=(r=e.path)&&r.includes("?"))for(let n of Dd(e.path))i(e,t,n);else i(e,t)}),t}function Dd(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(0===n.length)return i?[s,""]:[s];let o=Dd(n.join("/")),a=[];return a.push(...o.map(e=>""===e?s:[s,e].join("/"))),i&&a.push(...o),a.map(t=>e.startsWith("/")&&""===t?"/":t)}const kd=/^:[\w-]+$/,Pd=3,Bd=2,Od=1,Rd=10,Fd=-2,Id=e=>"*"===e;function Md(e,t){let r=e.split("/"),n=r.length;return r.some(Id)&&(n+=Fd),t&&(n+=Bd),r.filter(e=>!Id(e)).reduce((e,t)=>e+(kd.test(t)?Pd:""===t?Od:Rd),n)}function Nd(e,t,r){void 0===r&&(r=!1);let{routesMeta:n}=e,i={},s="/",o=[];for(let a=0;a<n.length;++a){let e=n[a],l=a===n.length-1,u="/"===s?t:t.slice(s.length)||"/",c=Ld({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},u),d=e.route;if(!c&&l&&r&&!n[n.length-1].route.index&&(c=Ld({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},u)),!c)return null;Object.assign(i,c.params),o.push({params:i,pathname:qd([s,c.pathname]),pathnameBase:Xd(qd([s,c.pathnameBase])),route:d}),"/"!==c.pathnameBase&&(s=qd([s,c.pathnameBase]))}return o}function Ld(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=function(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=!0),yd("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(n.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,n]}(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1),l=n.reduce((e,t,r)=>{let{paramName:n,isOptional:i}=t;if("*"===n){let e=a[r]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[r];return e[n]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:s,pathnameBase:o,pattern:e}}function Ud(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return yd(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function jd(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}const zd=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vd=e=>zd.test(e);function Gd(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}function Hd(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the `to."+r+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function $d(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function Wd(e,t,r,n){let i;void 0===n&&(n=!1),"string"==typeof e?i=wd(e):(i=fd({},e),gd(!i.pathname||!i.pathname.includes("?"),Hd("?","pathname","search",i)),gd(!i.pathname||!i.pathname.includes("#"),Hd("#","pathname","hash",i)),gd(!i.search||!i.search.includes("#"),Hd("#","search","hash",i)));let s,o=""===e||""===i.pathname,a=o?"/":i.pathname;if(null==a)s=r;else{let e=t.length-1;if(!n&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let r,{pathname:n,search:i="",hash:s=""}="string"==typeof e?wd(e):e;if(n)if(Vd(n))r=n;else{if(n.includes("//")){let e=n;n=n.replace(/\/\/+/g,"/"),yd(!1,"Pathnames cannot have embedded double slashes - normalizing "+e+" -> "+n)}r=n.startsWith("/")?Gd(n.substring(1),"/"):Gd(n,t)}else r=t;return{pathname:r,search:Yd(i),hash:Kd(s)}}(i,s),u=a&&"/"!==a&&a.endsWith("/"),c=(o||"."===a)&&r.endsWith("/");return l.pathname.endsWith("/")||!u&&!c||(l.pathname+="/"),l}const qd=e=>e.join("/").replace(/\/\/+/g,"/"),Xd=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Yd=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Kd=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";class Zd{constructor(e,t,r,n){void 0===n&&(n=!1),this.status=e,this.statusText=t||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Jd(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}const Qd=["post","put","patch","delete"],eh=new Set(Qd),th=["get",...Qd],rh=new Set(th),nh=new Set([301,302,303,307,308]),ih=new Set([307,308]),sh={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},oh={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ah={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},lh=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,uh=e=>({hasErrorBoundary:Boolean(e.hasErrorBoundary)}),ch="remix-router-transitions";function dh(e,t,r,n,i,s,o,a){let l,u;if(o){l=[];for(let e of t)if(l.push(e),e.route.id===o){u=e;break}}else l=t,u=t[t.length-1];let c=Wd(i||".",function(e,t){let r=$d(e);return t?r.map((e,t)=>t===r.length-1?e.pathname:e.pathnameBase):r.map(e=>e.pathnameBase)}(l,s),jd(e.pathname,r)||e.pathname,"path"===a);if(null==i&&(c.search=e.search,c.hash=e.hash),(null==i||""===i||"."===i)&&u){let e=$h(c.search);if(u.route.index&&!e)c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index";else if(!u.route.index&&e){let e=new URLSearchParams(c.search),t=e.getAll("index");e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let r=e.toString();c.search=r?"?"+r:""}}return n&&"/"!==r&&(c.pathname="/"===c.pathname?r:qd([r,c.pathname])),bd(c)}function hh(e,t,r,n){if(!n||!function(e){return null!=e&&("formData"in e&&null!=e.formData||"body"in e&&void 0!==e.body)}(n))return{path:r};if(n.formMethod&&(i=n.formMethod,!rh.has(i.toLowerCase())))return{path:r,error:Oh(405,{method:n.formMethod})};var i;let s,o,a=()=>({path:r,error:Oh(400,{type:"invalid-body"})}),l=n.formMethod||"get",u=e?l.toUpperCase():l.toLowerCase(),c=Fh(r);if(void 0!==n.body){if("text/plain"===n.formEncType){if(!zh(u))return a();let e="string"==typeof n.body?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((e,t)=>{let[r,n]=t;return""+e+r+"="+n+"\n"},""):String(n.body);return{path:r,submission:{formMethod:u,formAction:c,formEncType:n.formEncType,formData:void 0,json:void 0,text:e}}}if("application/json"===n.formEncType){if(!zh(u))return a();try{let e="string"==typeof n.body?JSON.parse(n.body):n.body;return{path:r,submission:{formMethod:u,formAction:c,formEncType:n.formEncType,formData:void 0,json:e,text:void 0}}}catch(Ove){return a()}}}if(gd("function"==typeof FormData,"FormData is not available in this environment"),n.formData)s=Ch(n.formData),o=n.formData;else if(n.body instanceof FormData)s=Ch(n.body),o=n.body;else if(n.body instanceof URLSearchParams)s=n.body,o=Ah(s);else if(null==n.body)s=new URLSearchParams,o=new FormData;else try{s=new URLSearchParams(n.body),o=Ah(s)}catch(Ove){return a()}let d={formMethod:u,formAction:c,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:o,json:void 0,text:void 0};if(zh(d.formMethod))return{path:r,submission:d};let h=wd(r);return t&&h.search&&$h(h.search)&&s.append("index",""),h.search="?"+s,{path:bd(h),submission:d}}function fh(e,t,r){void 0===r&&(r=!1);let n=e.findIndex(e=>e.route.id===t);return n>=0?e.slice(0,r?n+1:n):e}function ph(e,t,r,n,i,s,o,a,l,u,c,d,h,f,p,m){let g=m?Nh(m[1])?m[1].error:m[1].data:void 0,y=e.createURL(t.location),v=e.createURL(i),_=r;s&&t.errors?_=fh(r,Object.keys(t.errors)[0],!0):m&&Nh(m[1])&&(_=fh(r,m[0]));let b=m?m[1].statusCode:void 0,w=o&&b&&b>=400,x=_.filter((e,r)=>{let{route:i}=e;if(i.lazy)return!0;if(null==i.loader)return!1;if(s)return mh(i,t.loaderData,t.errors);if(function(e,t,r){let n=!t||r.route.id!==t.route.id,i=void 0===e[r.route.id];return n||i}(t.loaderData,t.matches[r],e)||l.some(t=>t===e.route.id))return!0;let o=t.matches[r],u=e;return yh(e,fd({currentUrl:y,currentParams:o.params,nextUrl:v,nextParams:u.params},n,{actionResult:g,actionStatus:b,defaultShouldRevalidate:!w&&(a||y.pathname+y.search===v.pathname+v.search||y.search!==v.search||gh(o,u))}))}),E=[];return d.forEach((e,i)=>{if(s||!r.some(t=>t.route.id===e.routeId)||c.has(i))return;let o=Cd(f,e.path,p);if(!o)return void E.push({key:i,routeId:e.routeId,path:e.path,matches:null,match:null,controller:null});let l=t.fetchers.get(i),d=Wh(o,e.path),m=!1;h.has(i)?m=!1:u.has(i)?(u.delete(i),m=!0):m=l&&"idle"!==l.state&&void 0===l.data?a:yh(d,fd({currentUrl:y,currentParams:t.matches[t.matches.length-1].params,nextUrl:v,nextParams:r[r.length-1].params},n,{actionResult:g,actionStatus:b,defaultShouldRevalidate:!w&&a})),m&&E.push({key:i,routeId:e.routeId,path:e.path,matches:o,match:d,controller:new AbortController})}),[x,E]}function mh(e,t,r){if(e.lazy)return!0;if(!e.loader)return!1;let n=null!=t&&void 0!==t[e.id],i=null!=r&&void 0!==r[e.id];return!(!n&&i)&&("function"==typeof e.loader&&!0===e.loader.hydrate||!n&&!i)}function gh(e,t){let r=e.route.path;return e.pathname!==t.pathname||null!=r&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function yh(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if("boolean"==typeof r)return r}return t.defaultShouldRevalidate}function vh(e,t,r,n,i){var s;let o;if(e){let t=n[e];gd(t,"No route found to patch children into: routeId = "+e),t.children||(t.children=[]),o=t.children}else o=r;let a=Sd(t.filter(e=>!o.some(t=>_h(e,t))),i,[e||"_","patch",String((null==(s=o)?void 0:s.length)||"0")],n);o.push(...a)}function _h(e,t){return"id"in e&&"id"in t&&e.id===t.id||e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive&&(!(e.children&&0!==e.children.length||t.children&&0!==t.children.length)||e.children.every((e,r)=>{var n;return null==(n=t.children)?void 0:n.some(t=>_h(e,t))}))}async function bh(e){let{matches:t}=e,r=t.filter(e=>e.shouldLoad),n=await Promise.all(r.map(e=>e.resolve()));return n.reduce((e,t,n)=>Object.assign(e,{[r[n].route.id]:t}),{})}async function wh(e){let{result:t,type:r}=e;if(jh(t)){let e;try{let r=t.headers.get("Content-Type");e=r&&/\bapplication\/json\b/.test(r)?null==t.body?null:await t.json():await t.text()}catch(Ove){return{type:xd.error,error:Ove}}return r===xd.error?{type:xd.error,error:new Zd(t.status,t.statusText,e),statusCode:t.status,headers:t.headers}:{type:xd.data,data:e,statusCode:t.status,headers:t.headers}}var n,i,s,o,a,l,u,c;return r===xd.error?Uh(t)?t.data instanceof Error?{type:xd.error,error:t.data,statusCode:null==(s=t.init)?void 0:s.status,headers:null!=(o=t.init)&&o.headers?new Headers(t.init.headers):void 0}:{type:xd.error,error:new Zd((null==(n=t.init)?void 0:n.status)||500,void 0,t.data),statusCode:Jd(t)?t.status:void 0,headers:null!=(i=t.init)&&i.headers?new Headers(t.init.headers):void 0}:{type:xd.error,error:t,statusCode:Jd(t)?t.status:void 0}:function(e){let t=e;return t&&"object"==typeof t&&"object"==typeof t.data&&"function"==typeof t.subscribe&&"function"==typeof t.cancel&&"function"==typeof t.resolveData}(t)?{type:xd.deferred,deferredData:t,statusCode:null==(a=t.init)?void 0:a.status,headers:(null==(l=t.init)?void 0:l.headers)&&new Headers(t.init.headers)}:Uh(t)?{type:xd.data,data:t.data,statusCode:null==(u=t.init)?void 0:u.status,headers:null!=(c=t.init)&&c.headers?new Headers(t.init.headers):void 0}:{type:xd.data,data:t}}function xh(e,t,r,n,i,s){let o=e.headers.get("Location");if(gd(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!lh.test(o)){let a=n.slice(0,n.findIndex(e=>e.route.id===r)+1);o=dh(new URL(t.url),a,i,!0,o,s),e.headers.set("Location",o)}return e}function Eh(e,t,r){if(lh.test(e)){let n=e,i=n.startsWith("//")?new URL(t.protocol+n):new URL(n),s=null!=jd(i.pathname,r);if(i.origin===t.origin&&s)return i.pathname+i.search+i.hash}return e}function Sh(e,t,r,n){let i=e.createURL(Fh(t)).toString(),s={signal:r};if(n&&zh(n.formMethod)){let{formMethod:e,formEncType:t}=n;s.method=e.toUpperCase(),"application/json"===t?(s.headers=new Headers({"Content-Type":t}),s.body=JSON.stringify(n.json)):"text/plain"===t?s.body=n.text:"application/x-www-form-urlencoded"===t&&n.formData?s.body=Ch(n.formData):s.body=n.formData}return new Request(i,s)}function Ch(e){let t=new URLSearchParams;for(let[r,n]of e.entries())t.append(r,"string"==typeof n?n:n.name);return t}function Ah(e){let t=new FormData;for(let[r,n]of e.entries())t.append(r,n);return t}function Th(e,t,r,n,i,s,o){let{loaderData:a,errors:l}=function(e,t,r,n,i){let s,o={},a=null,l=!1,u={},c=r&&Nh(r[1])?r[1].error:void 0;return e.forEach(r=>{if(!(r.route.id in t))return;let d=r.route.id,h=t[d];if(gd(!Lh(h),"Cannot handle redirect results in processLoaderData"),Nh(h)){let t=h.error;if(void 0!==c&&(t=c,c=void 0),a=a||{},i)a[d]=t;else{let r=Ph(e,d);null==a[r.route.id]&&(a[r.route.id]=t)}o[d]=void 0,l||(l=!0,s=Jd(h.error)?h.error.status:500),h.headers&&(u[d]=h.headers)}else Mh(h)?(n.set(d,h.deferredData),o[d]=h.deferredData.data,null==h.statusCode||200===h.statusCode||l||(s=h.statusCode),h.headers&&(u[d]=h.headers)):(o[d]=h.data,h.statusCode&&200!==h.statusCode&&!l&&(s=h.statusCode),h.headers&&(u[d]=h.headers))}),void 0!==c&&r&&(a={[r[0]]:c},o[r[0]]=void 0),{loaderData:o,errors:a,statusCode:s||200,loaderHeaders:u}}(t,r,n,o,!1);return i.forEach(t=>{let{key:r,match:n,controller:i}=t,o=s[r];if(gd(o,"Did not find corresponding fetcher result"),!i||!i.signal.aborted)if(Nh(o)){let t=Ph(e.matches,null==n?void 0:n.route.id);l&&l[t.route.id]||(l=fd({},l,{[t.route.id]:o.error})),e.fetchers.delete(r)}else if(Lh(o))gd(!1,"Unhandled fetcher revalidation redirect");else if(Mh(o))gd(!1,"Unhandled fetcher deferred data");else{let t=Kh(o.data);e.fetchers.set(r,t)}}),{loaderData:a,errors:l}}function Dh(e,t,r,n){let i=fd({},t);for(let s of r){let r=s.route.id;if(t.hasOwnProperty(r)?void 0!==t[r]&&(i[r]=t[r]):void 0!==e[r]&&s.route.loader&&(i[r]=e[r]),n&&n.hasOwnProperty(r))break}return i}function kh(e){return e?Nh(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function Ph(e,t){let r=t?e.slice(0,e.findIndex(e=>e.route.id===t)+1):[...e];return r.reverse().find(e=>!0===e.route.hasErrorBoundary)||e[0]}function Bh(e){let t=1===e.length?e[0]:e.find(e=>e.index||!e.path||"/"===e.path)||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Oh(e,t){let{pathname:r,routeId:n,method:i,type:s,message:o}=void 0===t?{}:t,a="Unknown Server Error",l="Unknown @remix-run/router error";return 400===e?(a="Bad Request",i&&r&&n?l="You made a "+i+' request to "'+r+'" but did not provide a `loader` for route "'+n+'", so there is no way to handle the request.':"defer-action"===s?l="defer() is not supported in actions":"invalid-body"===s&&(l="Unable to encode submission body")):403===e?(a="Forbidden",l='Route "'+n+'" does not match URL "'+r+'"'):404===e?(a="Not Found",l='No route matches URL "'+r+'"'):405===e&&(a="Method Not Allowed",i&&r&&n?l="You made a "+i.toUpperCase()+' request to "'+r+'" but did not provide an `action` for route "'+n+'", so there is no way to handle the request.':i&&(l='Invalid request method "'+i.toUpperCase()+'"')),new Zd(e||500,a,new Error(l),!0)}function Rh(e){let t=Object.entries(e);for(let r=t.length-1;r>=0;r--){let[e,n]=t[r];if(Lh(n))return{key:e,result:n}}}function Fh(e){return bd(fd({},"string"==typeof e?wd(e):e,{hash:""}))}function Ih(e){return jh(e.result)&&nh.has(e.result.status)}function Mh(e){return e.type===xd.deferred}function Nh(e){return e.type===xd.error}function Lh(e){return(e&&e.type)===xd.redirect}function Uh(e){return"object"==typeof e&&null!=e&&"type"in e&&"data"in e&&"init"in e&&"DataWithResponseInit"===e.type}function jh(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"object"==typeof e.headers&&void 0!==e.body}function zh(e){return eh.has(e.toLowerCase())}async function Vh(e,t,r,n,i){let s=Object.entries(t);for(let o=0;o<s.length;o++){let[a,l]=s[o],u=e.find(e=>(null==e?void 0:e.route.id)===a);if(!u)continue;let c=n.find(e=>e.route.id===u.route.id),d=null!=c&&!gh(c,u)&&void 0!==(i&&i[u.route.id]);Mh(l)&&d&&await Hh(l,r,!1).then(e=>{e&&(t[a]=e)})}}async function Gh(e,t,r){for(let n=0;n<r.length;n++){let{key:i,routeId:s,controller:o}=r[n],a=t[i],l=e.find(e=>(null==e?void 0:e.route.id)===s);l&&Mh(a)&&(gd(o,"Expected an AbortController for revalidating fetcher deferred result"),await Hh(a,o.signal,!0).then(e=>{e&&(t[i]=e)}))}}async function Hh(e,t,r){if(void 0===r&&(r=!1),!(await e.deferredData.resolveData(t))){if(r)try{return{type:xd.data,data:e.deferredData.unwrappedData}}catch(Ove){return{type:xd.error,error:Ove}}return{type:xd.data,data:e.deferredData.data}}}function $h(e){return new URLSearchParams(e).getAll("index").some(e=>""===e)}function Wh(e,t){let r="string"==typeof t?wd(t).search:t.search;if(e[e.length-1].route.index&&$h(r||""))return e[e.length-1];let n=$d(e);return n[n.length-1]}function qh(e){let{formMethod:t,formAction:r,formEncType:n,text:i,formData:s,json:o}=e;if(t&&r&&n)return null!=i?{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:void 0,text:i}:null!=s?{formMethod:t,formAction:r,formEncType:n,formData:s,json:void 0,text:void 0}:void 0!==o?{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:o,text:void 0}:void 0}function Xh(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Yh(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Kh(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Zh(){return Zh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zh.apply(this,arguments)}const Jh=$.createContext(null),Qh=$.createContext(null),ef=$.createContext(null),tf=$.createContext(null),rf=$.createContext({outlet:null,matches:[],isDataRoute:!1}),nf=$.createContext(null);function sf(){return null!=$.useContext(tf)}function of(e,t,r,n){sf()||gd(!1);let{navigator:i}=$.useContext(ef),{matches:s}=$.useContext(rf),o=s[s.length-1],a=o?o.params:{};!o||o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u,c=(sf()||gd(!1),$.useContext(tf).location);if(t){var d;let e="string"==typeof t?wd(t):t;"/"===l||(null==(d=e.pathname)?void 0:d.startsWith(l))||gd(!1),u=e}else u=c;let h=u.pathname||"/",f=h;if("/"!==l){let e=l.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(e.length).join("/")}let p=Cd(e,{pathname:f}),m=function(e,t,r,n){var i;if(void 0===t&&(t=[]),void 0===r&&(r=null),void 0===n&&(n=null),null==e){var s;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(s=n)&&s.v7_partialHydration&&0===t.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let o=e,a=null==(i=r)?void 0:i.errors;if(null!=a){let e=o.findIndex(e=>e.route.id&&void 0!==(null==a?void 0:a[e.route.id]));e>=0||gd(!1),o=o.slice(0,Math.min(o.length,e+1))}let l=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let c=0;c<o.length;c++){let e=o[c];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=c),e.route.id){let{loaderData:t,errors:n}=r,i=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||i){l=!0,o=u>=0?o.slice(0,u+1):[o[0]];break}}}return o.reduceRight((e,n,i)=>{let s,c=!1,d=null,h=null;var f;r&&(s=a&&n.route.id?a[n.route.id]:void 0,d=n.route.errorElement||lf,l&&(u<0&&0===i?(hf[f="route-fallback"]||(hf[f]=!0),c=!0,h=null):u===i&&(c=!0,h=n.route.hydrateFallbackElement||null)));let p=t.concat(o.slice(0,i+1)),m=()=>{let t;return t=s?d:c?h:n.route.Component?$.createElement(n.route.Component,null):n.route.element?n.route.element:e,$.createElement(cf,{match:n,routeContext:{outlet:e,matches:p,isDataRoute:null!=r},children:t})};return r&&(n.route.ErrorBoundary||n.route.errorElement||0===i)?$.createElement(uf,{location:r.location,revalidation:r.revalidation,component:d,error:s,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}(p&&p.map(e=>Object.assign({},e,{params:Object.assign({},a,e.params),pathname:qd([l,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:qd([l,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),s,r,n);return t&&m?$.createElement(tf.Provider,{value:{location:Zh({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:dd.Pop}},m):m}function af(){let e=function(){var e;let t=$.useContext(nf),r=function(){let e=$.useContext(Qh);return e||gd(!1),e}(df.UseRouteError),n=function(){let e=function(){let e=$.useContext(rf);return e||gd(!1),e}(),t=e.matches[e.matches.length-1];return t.route.id||gd(!1),t.route.id}(df.UseRouteError);return void 0!==t?t:null==(e=r.errors)?void 0:e[n]}(),t=Jd(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return $.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},t),r?$.createElement("pre",{style:n},r):null,null)}const lf=$.createElement(af,null);class uf extends $.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?$.createElement(rf.Provider,{value:this.props.routeContext},$.createElement(nf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function cf(e){let{routeContext:t,match:r,children:n}=e,i=$.useContext(Jh);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),$.createElement(rf.Provider,{value:t},n)}var df=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(df||{});const hf={};function ff(e){let{basename:t="/",children:r=null,location:n,navigationType:i=dd.Pop,navigator:s,static:o=!1,future:a}=e;sf()&&gd(!1);let l=t.replace(/^\/*/,"/"),u=$.useMemo(()=>({basename:l,navigator:s,static:o,future:Zh({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);"string"==typeof n&&(n=wd(n));let{pathname:c="/",search:d="",hash:h="",state:f=null,key:p="default"}=n,m=$.useMemo(()=>{let e=jd(c,l);return null==e?null:{location:{pathname:e,search:d,hash:h,state:f,key:p},navigationType:i}},[l,c,d,h,f,p,i]);return null==m?null:$.createElement(ef.Provider,{value:u},$.createElement(tf.Provider,{children:r,value:m}))}function pf(e){let t={hasErrorBoundary:null!=e.ErrorBoundary||null!=e.errorElement};return e.Component&&Object.assign(t,{element:$.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:$.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:$.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}
/**
			 * React Router DOM v6.30.2
			 *
			 * Copyright (c) Remix Software Inc.
			 *
			 * This source code is licensed under the MIT license found in the
			 * LICENSE.md file in the root directory of this source tree.
			 *
			 * @license MIT
			 */function mf(){return mf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mf.apply(this,arguments)}new Promise(()=>{});try{window.__reactRouterVersion="6"}catch(Ove){}function gf(){var e;let t=null==(e=window)?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=mf({},t,{errors:yf(t.errors)})),t}function yf(e){if(!e)return null;let t=Object.entries(e),r={};for(let[n,i]of t)if(i&&"RouteErrorResponse"===i.__type)r[n]=new Zd(i.status,i.statusText,i.data,!0===i.internal);else if(i&&"Error"===i.__type){if(i.__subType){let e=window[i.__subType];if("function"==typeof e)try{let t=new e(i.message);t.stack="",r[n]=t}catch(Ove){}}if(null==r[n]){let e=new Error(i.message);e.stack="",r[n]=e}}else r[n]=i;return r}const vf=$.createContext({isTransitioning:!1}),_f=$.createContext(new Map),bf=q.startTransition,wf=cd.flushSync;function xf(e){wf?wf(e):e()}class Ef{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=t=>{"pending"===this.status&&(this.status="resolved",e(t))},this.reject=e=>{"pending"===this.status&&(this.status="rejected",t(e))}})}}const Sf=$.memo(Cf);function Cf(e){let{routes:t,future:r,state:n}=e;return of(t,void 0,n,r)}var Af,Tf;function Df(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=Df(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function kf(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=Df(e))&&(n&&(n+=" "),n+=t);return n}!function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"}(Af||(Af={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Tf||(Tf={}));const Pf=e=>{const t=Ff(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:e=>{const r=e.split("-");return""===r[0]&&1!==r.length&&r.shift(),Bf(r,t)||Rf(e)},getConflictingClassGroupIds:(e,t)=>{const i=r[e]||[];return t&&n[e]?[...i,...n[e]]:i}}},Bf=(e,t)=>{if(0===e.length)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),i=n?Bf(e.slice(1),n):void 0;if(i)return i;if(0===t.validators.length)return;const s=e.join("-");return t.validators.find(({validator:e})=>e(s))?.classGroupId},Of=/^\[(.+)\]$/,Rf=e=>{if(Of.test(e)){const t=Of.exec(e)[1],r=t?.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},Ff=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return Lf(Object.entries(e.classGroups),r).forEach(([e,r])=>{If(r,n,e,t)}),n},If=(e,t,r,n)=>{e.forEach(e=>{if("string"!=typeof e)return"function"==typeof e?Nf(e)?void If(e(n),t,r,n):void t.validators.push({validator:e,classGroupId:r}):void Object.entries(e).forEach(([e,i])=>{If(i,Mf(t,e),r,n)});(""===e?t:Mf(t,e)).classGroupId=r})},Mf=(e,t)=>{let r=e;return t.split("-").forEach(e=>{r.nextPart.has(e)||r.nextPart.set(e,{nextPart:new Map,validators:[]}),r=r.nextPart.get(e)}),r},Nf=e=>e.isThemeGetter,Lf=(e,t)=>t?e.map(([e,r])=>[e,r.map(e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,r])=>[t+e,r])):e)]):e,Uf=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const i=(i,s)=>{r.set(i,s),t++,t>e&&(t=0,n=r,r=new Map)};return{get(e){let t=r.get(e);return void 0!==t?t:void 0!==(t=n.get(e))?(i(e,t),t):void 0},set(e,t){r.has(e)?r.set(e,t):i(e,t)}}},jf=e=>{const{separator:t,experimentalParseClassName:r}=e,n=1===t.length,i=t[0],s=t.length,o=e=>{const r=[];let o,a=0,l=0;for(let d=0;d<e.length;d++){let u=e[d];if(0===a){if(u===i&&(n||e.slice(d,d+s)===t)){r.push(e.slice(l,d)),l=d+s;continue}if("/"===u){o=d;continue}}"["===u?a++:"]"===u&&a--}const u=0===r.length?e:e.substring(l),c=u.startsWith("!");return{modifiers:r,hasImportantModifier:c,baseClassName:c?u.substring(1):u,maybePostfixModifierPosition:o&&o>l?o-l:void 0}};return r?e=>r({className:e,parseClassName:o}):o},zf=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(e=>{"["===e[0]?(t.push(...r.sort(),e),r=[]):r.push(e)}),t.push(...r.sort()),t},Vf=/\s+/;function Gf(){let e,t,r=0,n="";for(;r<arguments.length;)(e=arguments[r++])&&(t=Hf(e))&&(n&&(n+=" "),n+=t);return n}const Hf=e=>{if("string"==typeof e)return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=Hf(e[n]))&&(r&&(r+=" "),r+=t);return r};function $f(e,...t){let r,n,i,s=function(a){const l=t.reduce((e,t)=>t(e),e());return r=(e=>({cache:Uf(e.cacheSize),parseClassName:jf(e),...Pf(e)}))(l),n=r.cache.get,i=r.cache.set,s=o,o(a)};function o(e){const t=n(e);if(t)return t;const s=((e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i}=t,s=[],o=e.trim().split(Vf);let a="";for(let l=o.length-1;l>=0;l-=1){const e=o[l],{modifiers:t,hasImportantModifier:u,baseClassName:c,maybePostfixModifierPosition:d}=r(e);let h=Boolean(d),f=n(h?c.substring(0,d):c);if(!f){if(!h){a=e+(a.length>0?" "+a:a);continue}if(f=n(c),!f){a=e+(a.length>0?" "+a:a);continue}h=!1}const p=zf(t).join(":"),m=u?p+"!":p,g=m+f;if(s.includes(g))continue;s.push(g);const y=i(f,h);for(let r=0;r<y.length;++r){const e=y[r];s.push(m+e)}a=e+(a.length>0?" "+a:a)}return a})(e,r);return i(e,s),s}return function(){return s(Gf.apply(null,arguments))}}const Wf=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},qf=/^\[(?:([a-z-]+):)?(.+)\]$/i,Xf=/^\d+\/\d+$/,Yf=new Set(["px","full","screen"]),Kf=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Zf=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Jf=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Qf=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,ep=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,tp=e=>np(e)||Yf.has(e)||Xf.test(e),rp=e=>gp(e,"length",yp),np=e=>Boolean(e)&&!Number.isNaN(Number(e)),ip=e=>gp(e,"number",np),sp=e=>Boolean(e)&&Number.isInteger(Number(e)),op=e=>e.endsWith("%")&&np(e.slice(0,-1)),ap=e=>qf.test(e),lp=e=>Kf.test(e),up=new Set(["length","size","percentage"]),cp=e=>gp(e,up,vp),dp=e=>gp(e,"position",vp),hp=new Set(["image","url"]),fp=e=>gp(e,hp,bp),pp=e=>gp(e,"",_p),mp=()=>!0,gp=(e,t,r)=>{const n=qf.exec(e);return!!n&&(n[1]?"string"==typeof t?n[1]===t:t.has(n[1]):r(n[2]))},yp=e=>Zf.test(e)&&!Jf.test(e),vp=()=>!1,_p=e=>Qf.test(e),bp=e=>ep.test(e),wp=e("t",$f(()=>{const e=Wf("colors"),t=Wf("spacing"),r=Wf("blur"),n=Wf("brightness"),i=Wf("borderColor"),s=Wf("borderRadius"),o=Wf("borderSpacing"),a=Wf("borderWidth"),l=Wf("contrast"),u=Wf("grayscale"),c=Wf("hueRotate"),d=Wf("invert"),h=Wf("gap"),f=Wf("gradientColorStops"),p=Wf("gradientColorStopPositions"),m=Wf("inset"),g=Wf("margin"),y=Wf("opacity"),v=Wf("padding"),_=Wf("saturate"),b=Wf("scale"),w=Wf("sepia"),x=Wf("skew"),E=Wf("space"),S=Wf("translate"),C=()=>["auto",ap,t],A=()=>[ap,t],T=()=>["",tp,rp],D=()=>["auto",np,ap],k=()=>["","0",ap],P=()=>[np,ap];return{cacheSize:500,separator:":",theme:{colors:[mp],spacing:[tp,rp],blur:["none","",lp,ap],brightness:P(),borderColor:[e],borderRadius:["none","","full",lp,ap],borderSpacing:A(),borderWidth:T(),contrast:P(),grayscale:k(),hueRotate:P(),invert:k(),gap:A(),gradientColorStops:[e],gradientColorStopPositions:[op,rp],inset:C(),margin:C(),opacity:P(),padding:A(),saturate:P(),scale:P(),sepia:k(),skew:P(),space:A(),translate:A()},classGroups:{aspect:[{aspect:["auto","square","video",ap]}],container:["container"],columns:[{columns:[lp]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",ap]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",sp,ap]}],basis:[{basis:C()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ap]}],grow:[{grow:k()}],shrink:[{shrink:k()}],order:[{order:["first","last","none",sp,ap]}],"grid-cols":[{"grid-cols":[mp]}],"col-start-end":[{col:["auto",{span:["full",sp,ap]},ap]}],"col-start":[{"col-start":D()}],"col-end":[{"col-end":D()}],"grid-rows":[{"grid-rows":[mp]}],"row-start-end":[{row:["auto",{span:[sp,ap]},ap]}],"row-start":[{"row-start":D()}],"row-end":[{"row-end":D()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ap]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ap]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ap,t]}],"min-w":[{"min-w":[ap,t,"min","max","fit"]}],"max-w":[{"max-w":[ap,t,"none","full","min","max","fit","prose",{screen:[lp]},lp]}],h:[{h:[ap,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ap,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ap,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ap,t,"auto","min","max","fit"]}],"font-size":[{text:["base",lp,rp]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ip]}],"font-family":[{font:[mp]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ap]}],"line-clamp":[{"line-clamp":["none",np,ip]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",tp,ap]}],"list-image":[{"list-image":["none",ap]}],"list-style-type":[{list:["none","disc","decimal",ap]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",tp,rp]}],"underline-offset":[{"underline-offset":["auto",tp,ap]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ap]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ap]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",dp]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",cp]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},fp]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[tp,ap]}],"outline-w":[{outline:[tp,rp]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:T()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[tp,rp]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",lp,pp]}],"shadow-color":[{shadow:[mp]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",lp,ap]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[c]}],invert:[{invert:[d]}],saturate:[{saturate:[_]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[c]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ap]}],duration:[{duration:P()}],ease:[{ease:["linear","in","out","in-out",ap]}],delay:[{delay:P()}],animate:[{animate:["none","spin","ping","pulse","bounce",ap]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[sp,ap]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[x]}],"skew-y":[{"skew-y":[x]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ap]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ap]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ap]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[tp,rp,ip]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}})),xp=e=>{let t;const r=new Set,n=(e,n)=>{const i="function"==typeof e?e(t):e;if(!Object.is(i,t)){const e=t;t=(null!=n?n:"object"!=typeof i||null===i)?i:Object.assign({},t,i),r.forEach(r=>r(t,e))}},i=()=>t,s={setState:n,getState:i,getInitialState:()=>o,subscribe:e=>(r.add(e),()=>r.delete(e)),destroy:()=>{r.clear()}},o=t=e(n,i,s);return s},Ep=e=>e?xp(e):xp;var Sp={exports:{}},Cp={},Ap={exports:{}},Tp={},Dp=$,kp="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Pp=Dp.useState,Bp=Dp.useEffect,Op=Dp.useLayoutEffect,Rp=Dp.useDebugValue;function Fp(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!kp(e,r)}catch(n){return!0}}var Ip="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=Pp({inst:{value:r,getSnapshot:t}}),i=n[0].inst,s=n[1];return Op(function(){i.value=r,i.getSnapshot=t,Fp(i)&&s({inst:i})},[e,r,t]),Bp(function(){return Fp(i)&&s({inst:i}),e(function(){Fp(i)&&s({inst:i})})},[e]),Rp(r),r};Tp.useSyncExternalStore=void 0!==Dp.useSyncExternalStore?Dp.useSyncExternalStore:Ip,Ap.exports=Tp;var Mp=Ap.exports,Np=$,Lp=Mp,Up="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},jp=Lp.useSyncExternalStore,zp=Np.useRef,Vp=Np.useEffect,Gp=Np.useMemo,Hp=Np.useDebugValue;
/**
			 * @license React
			 * use-sync-external-store-shim/with-selector.production.js
			 *
			 * Copyright (c) Meta Platforms, Inc. and affiliates.
			 *
			 * This source code is licensed under the MIT license found in the
			 * LICENSE file in the root directory of this source tree.
			 */Cp.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var s=zp(null);if(null===s.current){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Gp(function(){function e(e){if(!l){if(l=!0,s=e,e=n(e),void 0!==i&&o.hasValue){var t=o.value;if(i(t,e))return a=t}return a=e}if(t=a,Up(s,e))return t;var r=n(e);return void 0!==i&&i(t,r)?(s=e,t):(s=e,a=r)}var s,a,l=!1,u=void 0===r?null:r;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]},[t,r,n,i]);var a=jp(e,s[0],s[1]);return Vp(function(){o.hasValue=!0,o.value=a},[a]),Hp(a),a},Sp.exports=Cp;const $p=s(Sp.exports),{useDebugValue:Wp}=W,{useSyncExternalStoreWithSelector:qp}=$p,Xp=e=>e,Yp=e=>{const t="function"==typeof e?Ep(e):e,r=(e,r)=>function(e,t=Xp,r){const n=qp(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return Wp(n),n}(t,e,r);return Object.assign(r,t),r};e("z",e=>e?Yp(e):Yp);var Kp=(e=>(e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2",e))(Kp||{}),Zp=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS",e))(Zp||{}),Jp=(e=>(e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",e))(Jp||{}),Qp=(e=>(e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR",e))(Qp||{}),em=(e=>(e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e))(em||{}),tm=(e=>(e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e))(tm||{}),rm=(e=>(e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e))(rm||{}),nm=(e=>(e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT",e))(nm||{}),im=(e=>(e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT",e))(im||{}),sm=e("h",(e=>(e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR",e))(sm||{})),om=(e=>(e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e))(om||{}),am=(e=>(e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL",e))(am||{}),lm=(e=>(e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",e))(lm||{}),um=(e=>(e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT",e))(um||{}),cm=(e=>(e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL",e))(cm||{}),dm=(e=>(e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp",e))(dm||{}),hm=(e=>(e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE",e[e.COLOR=4]="COLOR",e))(hm||{}),fm=(e=>(e[e.RED=1]="RED",e[e.GREEN=2]="GREEN",e[e.BLUE=4]="BLUE",e[e.ALPHA=8]="ALPHA",e))(fm||{}),pm=(e=>(e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH",e))(pm||{}),mm=(e=>(e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e))(mm||{});const gm={createCanvas:(e,t)=>{const r=document.createElement("canvas");return r.width=e,r.height=t,r},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(e,t)=>fetch(e,t),parseXML:e=>(new DOMParser).parseFromString(e,"text/xml")},ym={ADAPTER:gm,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var vm=/iPhone/i,_m=/iPod/i,bm=/iPad/i,wm=/\biOS-universal(?:.+)Mac\b/i,xm=/\bAndroid(?:.+)Mobile\b/i,Em=/Android/i,Sm=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Cm=/Silk/i,Am=/Windows Phone/i,Tm=/\bWindows(?:.+)ARM\b/i,Dm=/BlackBerry/i,km=/BB10/i,Pm=/Opera Mini/i,Bm=/\b(CriOS|Chrome)(?:.+)Mobile/i,Om=/Mobile(?:.+)Firefox\b/i,Rm=function(e){return void 0!==e&&"MacIntel"===e.platform&&"number"==typeof e.maxTouchPoints&&e.maxTouchPoints>1&&"undefined"==typeof MSStream};function Fm(e){var t={userAgent:"",platform:"",maxTouchPoints:0};e||"undefined"==typeof navigator?"string"==typeof e?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0}):t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r=t.userAgent,n=r.split("[FBAN");void 0!==n[1]&&(r=n[0]),void 0!==(n=r.split("Twitter"))[1]&&(r=n[0]);var i=function(e){return function(t){return t.test(e)}}(r),s={apple:{phone:i(vm)&&!i(Am),ipod:i(_m),tablet:!i(vm)&&(i(bm)||Rm(t))&&!i(Am),universal:i(wm),device:(i(vm)||i(_m)||i(bm)||i(wm)||Rm(t))&&!i(Am)},amazon:{phone:i(Sm),tablet:!i(Sm)&&i(Cm),device:i(Sm)||i(Cm)},android:{phone:!i(Am)&&i(Sm)||!i(Am)&&i(xm),tablet:!i(Am)&&!i(Sm)&&!i(xm)&&(i(Cm)||i(Em)),device:!i(Am)&&(i(Sm)||i(Cm)||i(xm)||i(Em))||i(/\bokhttp\b/i)},windows:{phone:i(Am),tablet:i(Tm),device:i(Am)||i(Tm)},other:{blackberry:i(Dm),blackberry10:i(km),opera:i(Pm),firefox:i(Om),chrome:i(Bm),device:i(Dm)||i(km)||i(Pm)||i(Om)||i(Bm)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const Im=(Fm.default??Fm)(globalThis.navigator);ym.RETINA_PREFIX=/@([0-9\.]+)x/,ym.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Mm={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,n,s,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new i(n,s||e,o),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],a]:e._events[l].push(a):(e._events[l]=a,e._eventsCount++),e}function o(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,o=new Array(s);i<s;i++)o[i]=n[i].fn;return o},a.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,i,s,o){var a=r?r+e:e;if(!this._events[a])return!1;var l,u,c=this._events[a],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,i),!0;case 5:return c.fn.call(c.context,t,n,i,s),!0;case 6:return c.fn.call(c.context,t,n,i,s,o),!0}for(u=1,l=new Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var h,f=c.length;for(u=0;u<f;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,n);break;case 4:c[u].fn.call(c[u].context,t,n,i);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];c[u].fn.apply(c[u].context,l)}}return!0},a.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,n,i){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==t||i&&!a.once||n&&a.context!==n||o(this,s);else{for(var l=0,u=[],c=a.length;l<c;l++)(a[l].fn!==t||i&&!a[l].once||n&&a[l].context!==n)&&u.push(a[l]);u.length?this._events[s]=1===u.length?u[0]:u:o(this,s)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&o(this,t)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a}(Mm);const Nm=s(Mm.exports);var Lm={exports:{}};function Um(e,t,r){r=r||2;var n,i,s,o,a,l,u,c=t&&t.length,d=c?t[0]*r:e.length,h=jm(e,0,d,r,!0),f=[];if(!h||h.next===h.prev)return f;if(c&&(h=function(e,t,r,n){var i,s,o,a=[];for(i=0,s=t.length;i<s;i++)(o=jm(e,t[i]*n,i<s-1?t[i+1]*n:e.length,n,!1))===o.next&&(o.steiner=!0),a.push(Zm(o));for(a.sort(qm),i=0;i<a.length;i++)r=Xm(a[i],r);return r}(e,t,h,r)),e.length>80*r){n=s=e[0],i=o=e[1];for(var p=r;p<d;p+=r)(a=e[p])<n&&(n=a),(l=e[p+1])<i&&(i=l),a>s&&(s=a),l>o&&(o=l);u=0!==(u=Math.max(s-n,o-i))?32767/u:0}return Vm(h,f,r,n,i,u,0),f}function jm(e,t,r,n,i){var s,o;if(i===cg(e,t,r,n)>0)for(s=t;s<r;s+=n)o=ag(s,e[s],e[s+1],o);else for(s=r-n;s>=t;s-=n)o=ag(s,e[s],e[s+1],o);return o&&tg(o,o.next)&&(lg(o),o=o.next),o}function zm(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!tg(n,n.next)&&0!==eg(n.prev,n,n.next))n=n.next;else{if(lg(n),(n=t=n.prev)===n.next)break;r=!0}}while(r||n!==t);return t}function Vm(e,t,r,n,i,s,o){if(e){!o&&s&&function(e,t,r,n){var i=e;do{0===i.z&&(i.z=Km(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,r,n,i,s,o,a,l,u=1;do{for(r=e,e=null,s=null,o=0;r;){for(o++,n=r,a=0,t=0;t<u&&(a++,n=n.nextZ);t++);for(l=u;a>0||l>0&&n;)0!==a&&(0===l||!n||r.z<=n.z)?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,l--),s?s.nextZ=i:e=i,i.prevZ=s,s=i;r=n}s.nextZ=null,u*=2}while(o>1)}(i)}(e,n,i,s);for(var a,l,u=e;e.prev!==e.next;)if(a=e.prev,l=e.next,s?Hm(e,n,i,s):Gm(e))t.push(a.i/r|0),t.push(e.i/r|0),t.push(l.i/r|0),lg(e),e=l.next,u=l.next;else if((e=l)===u){o?1===o?Vm(e=$m(zm(e),t,r),t,r,n,i,s,2):2===o&&Wm(e,t,r,n,i,s):Vm(zm(e),t,r,n,i,s,1);break}}}function Gm(e){var t=e.prev,r=e,n=e.next;if(eg(t,r,n)>=0)return!1;for(var i=t.x,s=r.x,o=n.x,a=t.y,l=r.y,u=n.y,c=i<s?i<o?i:o:s<o?s:o,d=a<l?a<u?a:u:l<u?l:u,h=i>s?i>o?i:o:s>o?s:o,f=a>l?a>u?a:u:l>u?l:u,p=n.next;p!==t;){if(p.x>=c&&p.x<=h&&p.y>=d&&p.y<=f&&Jm(i,a,s,l,o,u,p.x,p.y)&&eg(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Hm(e,t,r,n){var i=e.prev,s=e,o=e.next;if(eg(i,s,o)>=0)return!1;for(var a=i.x,l=s.x,u=o.x,c=i.y,d=s.y,h=o.y,f=a<l?a<u?a:u:l<u?l:u,p=c<d?c<h?c:h:d<h?d:h,m=a>l?a>u?a:u:l>u?l:u,g=c>d?c>h?c:h:d>h?d:h,y=Km(f,p,t,r,n),v=Km(m,g,t,r,n),_=e.prevZ,b=e.nextZ;_&&_.z>=y&&b&&b.z<=v;){if(_.x>=f&&_.x<=m&&_.y>=p&&_.y<=g&&_!==i&&_!==o&&Jm(a,c,l,d,u,h,_.x,_.y)&&eg(_.prev,_,_.next)>=0)return!1;if(_=_.prevZ,b.x>=f&&b.x<=m&&b.y>=p&&b.y<=g&&b!==i&&b!==o&&Jm(a,c,l,d,u,h,b.x,b.y)&&eg(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;_&&_.z>=y;){if(_.x>=f&&_.x<=m&&_.y>=p&&_.y<=g&&_!==i&&_!==o&&Jm(a,c,l,d,u,h,_.x,_.y)&&eg(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;b&&b.z<=v;){if(b.x>=f&&b.x<=m&&b.y>=p&&b.y<=g&&b!==i&&b!==o&&Jm(a,c,l,d,u,h,b.x,b.y)&&eg(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function $m(e,t,r){var n=e;do{var i=n.prev,s=n.next.next;!tg(i,s)&&rg(i,n,n.next,s)&&sg(i,s)&&sg(s,i)&&(t.push(i.i/r|0),t.push(n.i/r|0),t.push(s.i/r|0),lg(n),lg(n.next),n=e=s),n=n.next}while(n!==e);return zm(n)}function Wm(e,t,r,n,i,s){var o=e;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&Qm(o,a)){var l=og(o,a);return o=zm(o,o.next),l=zm(l,l.next),Vm(o,t,r,n,i,s,0),void Vm(l,t,r,n,i,s,0)}a=a.next}o=o.next}while(o!==e)}function qm(e,t){return e.x-t.x}function Xm(e,t){var r=function(e,t){var r,n=t,i=e.x,s=e.y,o=-1/0;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){var a=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=i&&a>o&&(o=a,r=n.x<n.next.x?n:n.next,a===i))return r}n=n.next}while(n!==t);if(!r)return null;var l,u=r,c=r.x,d=r.y,h=1/0;n=r;do{i>=n.x&&n.x>=c&&i!==n.x&&Jm(s<d?i:o,s,c,d,s<d?o:i,s,n.x,n.y)&&(l=Math.abs(s-n.y)/(i-n.x),sg(n,e)&&(l<h||l===h&&(n.x>r.x||n.x===r.x&&Ym(r,n)))&&(r=n,h=l)),n=n.next}while(n!==u);return r}(e,t);if(!r)return t;var n=og(r,e);return zm(n,n.next),zm(r,r.next)}function Ym(e,t){return eg(e.prev,e,t.prev)<0&&eg(t.next,e,e.next)<0}function Km(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Zm(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function Jm(e,t,r,n,i,s,o,a){return(i-o)*(t-a)>=(e-o)*(s-a)&&(e-o)*(n-a)>=(r-o)*(t-a)&&(r-o)*(s-a)>=(i-o)*(n-a)}function Qm(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&rg(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&(sg(e,t)&&sg(t,e)&&function(e,t){var r=e,n=!1,i=(e.x+t.x)/2,s=(e.y+t.y)/2;do{r.y>s!=r.next.y>s&&r.next.y!==r.y&&i<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}(e,t)&&(eg(e.prev,e,t.prev)||eg(e,t.prev,t))||tg(e,t)&&eg(e.prev,e,e.next)>0&&eg(t.prev,t,t.next)>0)}function eg(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function tg(e,t){return e.x===t.x&&e.y===t.y}function rg(e,t,r,n){var i=ig(eg(e,t,r)),s=ig(eg(e,t,n)),o=ig(eg(r,n,e)),a=ig(eg(r,n,t));return i!==s&&o!==a||!(0!==i||!ng(e,r,t))||!(0!==s||!ng(e,n,t))||!(0!==o||!ng(r,e,n))||!(0!==a||!ng(r,t,n))}function ng(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function ig(e){return e>0?1:e<0?-1:0}function sg(e,t){return eg(e.prev,e,e.next)<0?eg(e,t,e.next)>=0&&eg(e,e.prev,t)>=0:eg(e,t,e.prev)<0||eg(e,e.next,t)<0}function og(e,t){var r=new ug(e.i,e.x,e.y),n=new ug(t.i,t.x,t.y),i=e.next,s=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,s.next=n,n.prev=s,n}function ag(e,t,r,n){var i=new ug(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function lg(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function ug(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function cg(e,t,r,n){for(var i=0,s=t,o=r-n;s<r;s+=n)i+=(e[o]-e[s])*(e[s+1]+e[o+1]),o=s;return i}Lm.exports=Um,Lm.exports.default=Um,Um.deviation=function(e,t,r,n){var i=t&&t.length,s=i?t[0]*r:e.length,o=Math.abs(cg(e,0,s,r));if(i)for(var a=0,l=t.length;a<l;a++){var u=t[a]*r,c=a<l-1?t[a+1]*r:e.length;o-=Math.abs(cg(e,u,c,r))}var d=0;for(a=0;a<n.length;a+=3){var h=n[a]*r,f=n[a+1]*r,p=n[a+2]*r;d+=Math.abs((e[h]-e[p])*(e[f+1]-e[h+1])-(e[h]-e[f])*(e[p+1]-e[h+1]))}return 0===o&&0===d?0:Math.abs((d-o)/o)},Um.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var s=0;s<e[i].length;s++)for(var o=0;o<t;o++)r.vertices.push(e[i][s][o]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r};const dg=s(Lm.exports);var hg={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */!function(e,t){!function(r){var i=t&&!t.nodeType&&t,s=e&&!e.nodeType&&e,o="object"==typeof n&&n;o.global!==o&&o.window!==o&&o.self!==o||(r=o);var a,l,u=2147483647,c=36,d=/^xn--/,h=/[^\x20-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=Math.floor,g=String.fromCharCode;function y(e){throw new RangeError(p[e])}function v(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function _(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+v((e=e.replace(f,".")).split("."),t).join(".")}function b(e){for(var t,r,n=[],i=0,s=e.length;i<s;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<s?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}function w(e){return v(e,function(e){var t="";return e>65535&&(t+=g((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=g(e)}).join("")}function x(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:c}function E(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function S(e,t,r){var n=0;for(e=r?m(e/700):e>>1,e+=m(e/t);e>455;n+=c)e=m(e/35);return m(n+36*e/(e+38))}function C(e){var t,r,n,i,s,o,a,l,d,h,f=[],p=e.length,g=0,v=128,_=72;for((r=e.lastIndexOf("-"))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&y("not-basic"),f.push(e.charCodeAt(n));for(i=r>0?r+1:0;i<p;){for(s=g,o=1,a=c;i>=p&&y("invalid-input"),((l=x(e.charCodeAt(i++)))>=c||l>m((u-g)/o))&&y("overflow"),g+=l*o,!(l<(d=a<=_?1:a>=_+26?26:a-_));a+=c)o>m(u/(h=c-d))&&y("overflow"),o*=h;_=S(g-s,t=f.length+1,0==s),m(g/t)>u-v&&y("overflow"),v+=m(g/t),g%=t,f.splice(g++,0,v)}return w(f)}function A(e){var t,r,n,i,s,o,a,l,d,h,f,p,v,_,w,x=[];for(p=(e=b(e)).length,t=128,r=0,s=72,o=0;o<p;++o)(f=e[o])<128&&x.push(g(f));for(n=i=x.length,i&&x.push("-");n<p;){for(a=u,o=0;o<p;++o)(f=e[o])>=t&&f<a&&(a=f);for(a-t>m((u-r)/(v=n+1))&&y("overflow"),r+=(a-t)*v,t=a,o=0;o<p;++o)if((f=e[o])<t&&++r>u&&y("overflow"),f==t){for(l=r,d=c;!(l<(h=d<=s?1:d>=s+26?26:d-s));d+=c)w=l-h,_=c-h,x.push(g(E(h+w%_,0))),l=m(w/_);x.push(g(E(l,0))),s=S(r,v,n==i),r=0,++n}++r,++t}return x.join("")}if(a={version:"1.4.1",ucs2:{decode:b,encode:w},decode:C,encode:A,toASCII:function(e){return _(e,function(e){return h.test(e)?"xn--"+A(e):e})},toUnicode:function(e){return _(e,function(e){return d.test(e)?C(e.slice(4).toLowerCase()):e})}},i&&s)if(e.exports==i)s.exports=a;else for(l in a)a.hasOwnProperty(l)&&(i[l]=a[l]);else r.punycode=a}(n)}(hg,hg.exports);var fg=hg.exports,pg=TypeError;const mg=o(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var gg="function"==typeof Map&&Map.prototype,yg=Object.getOwnPropertyDescriptor&&gg?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,vg=gg&&yg&&"function"==typeof yg.get?yg.get:null,_g=gg&&Map.prototype.forEach,bg="function"==typeof Set&&Set.prototype,wg=Object.getOwnPropertyDescriptor&&bg?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,xg=bg&&wg&&"function"==typeof wg.get?wg.get:null,Eg=bg&&Set.prototype.forEach,Sg="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,Cg="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,Ag="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,Tg=Boolean.prototype.valueOf,Dg=Object.prototype.toString,kg=Function.prototype.toString,Pg=String.prototype.match,Bg=String.prototype.slice,Og=String.prototype.replace,Rg=String.prototype.toUpperCase,Fg=String.prototype.toLowerCase,Ig=RegExp.prototype.test,Mg=Array.prototype.concat,Ng=Array.prototype.join,Lg=Array.prototype.slice,Ug=Math.floor,jg="function"==typeof BigInt?BigInt.prototype.valueOf:null,zg=Object.getOwnPropertySymbols,Vg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,Gg="function"==typeof Symbol&&"object"==typeof Symbol.iterator,Hg="function"==typeof Symbol&&Symbol.toStringTag&&(Symbol.toStringTag,1)?Symbol.toStringTag:null,$g=Object.prototype.propertyIsEnumerable,Wg=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function qg(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||Ig.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var n=e<0?-Ug(-e):Ug(e);if(n!==e){var i=String(n),s=Bg.call(t,i.length+1);return Og.call(i,r,"$&_")+"."+Og.call(Og.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Og.call(t,r,"$&_")}var Xg=mg,Yg=Xg.custom,Kg=sy(Yg)?Yg:null,Zg={__proto__:null,double:'"',single:"'"},Jg={__proto__:null,double:/(["\\])/g,single:/(['\\])/g},Qg=function e(t,r,i,s){var o=r||{};if(ay(o,"quoteStyle")&&!ay(Zg,o.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ay(o,"maxStringLength")&&("number"==typeof o.maxStringLength?o.maxStringLength<0&&o.maxStringLength!==1/0:null!==o.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=!ay(o,"customInspect")||o.customInspect;if("boolean"!=typeof a&&"symbol"!==a)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ay(o,"indent")&&null!==o.indent&&"\t"!==o.indent&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ay(o,"numericSeparator")&&"boolean"!=typeof o.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var l=o.numericSeparator;if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return cy(t,o);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var u=String(t);return l?qg(t,u):u}if("bigint"==typeof t){var c=String(t)+"n";return l?qg(t,c):c}var d=void 0===o.depth?5:o.depth;if(void 0===i&&(i=0),i>=d&&d>0&&"object"==typeof t)return ny(t)?"[Array]":"[Object]";var h=function(e,t){var r;if("\t"===e.indent)r="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;r=Ng.call(Array(e.indent+1)," ")}return{base:r,prev:Ng.call(Array(t+1),r)}}(o,i);if(void 0===s)s=[];else if(uy(s,t)>=0)return"[Circular]";function f(t,r,n){if(r&&(s=Lg.call(s)).push(r),n){var a={depth:o.depth};return ay(o,"quoteStyle")&&(a.quoteStyle=o.quoteStyle),e(t,a,i+1,s)}return e(t,o,i+1,s)}if("function"==typeof t&&!iy(t)){var p=function(e){if(e.name)return e.name;var t=Pg.call(kg.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}(t),m=gy(t,f);return"[Function"+(p?": "+p:" (anonymous)")+"]"+(m.length>0?" { "+Ng.call(m,", ")+" }":"")}if(sy(t)){var g=Gg?Og.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):Vg.call(t);return"object"!=typeof t||Gg?g:hy(g)}if(function(e){return!(!e||"object"!=typeof e)&&("undefined"!=typeof HTMLElement&&e instanceof HTMLElement||"string"==typeof e.nodeName&&"function"==typeof e.getAttribute)}(t)){for(var y="<"+Fg.call(String(t.nodeName)),v=t.attributes||[],_=0;_<v.length;_++)y+=" "+v[_].name+"="+ey(ty(v[_].value),"double",o);return y+=">",t.childNodes&&t.childNodes.length&&(y+="..."),y+="</"+Fg.call(String(t.nodeName))+">"}if(ny(t)){if(0===t.length)return"[]";var b=gy(t,f);return h&&!function(e){for(var t=0;t<e.length;t++)if(uy(e[t],"\n")>=0)return!1;return!0}(b)?"["+my(b,h)+"]":"[ "+Ng.call(b,", ")+" ]"}if(function(e){return"[object Error]"===ly(e)&&ry(e)}(t)){var w=gy(t,f);return"cause"in Error.prototype||!("cause"in t)||$g.call(t,"cause")?0===w.length?"["+String(t)+"]":"{ ["+String(t)+"] "+Ng.call(w,", ")+" }":"{ ["+String(t)+"] "+Ng.call(Mg.call("[cause]: "+f(t.cause),w),", ")+" }"}if("object"==typeof t&&a){if(Kg&&"function"==typeof t[Kg]&&Xg)return Xg(t,{depth:d-i});if("symbol"!==a&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!vg||!e||"object"!=typeof e)return!1;try{vg.call(e);try{xg.call(e)}catch(y){return!0}return e instanceof Map}catch(Ove){}return!1}(t)){var x=[];return _g&&_g.call(t,function(e,r){x.push(f(r,t,!0)+" => "+f(e,t))}),py("Map",vg.call(t),x,h)}if(function(e){if(!xg||!e||"object"!=typeof e)return!1;try{xg.call(e);try{vg.call(e)}catch(gte){return!0}return e instanceof Set}catch(Ove){}return!1}(t)){var E=[];return Eg&&Eg.call(t,function(e){E.push(f(e,t))}),py("Set",xg.call(t),E,h)}if(function(e){if(!Sg||!e||"object"!=typeof e)return!1;try{Sg.call(e,Sg);try{Cg.call(e,Cg)}catch(y){return!0}return e instanceof WeakMap}catch(Ove){}return!1}(t))return fy("WeakMap");if(function(e){if(!Cg||!e||"object"!=typeof e)return!1;try{Cg.call(e,Cg);try{Sg.call(e,Sg)}catch(y){return!0}return e instanceof WeakSet}catch(Ove){}return!1}(t))return fy("WeakSet");if(function(e){if(!Ag||!e||"object"!=typeof e)return!1;try{return Ag.call(e),!0}catch(Ove){}return!1}(t))return fy("WeakRef");if(function(e){return"[object Number]"===ly(e)&&ry(e)}(t))return hy(f(Number(t)));if(function(e){if(!e||"object"!=typeof e||!jg)return!1;try{return jg.call(e),!0}catch(Ove){}return!1}(t))return hy(f(jg.call(t)));if(function(e){return"[object Boolean]"===ly(e)&&ry(e)}(t))return hy(Tg.call(t));if(function(e){return"[object String]"===ly(e)&&ry(e)}(t))return hy(f(String(t)));if("undefined"!=typeof window&&t===window)return"{ [object Window] }";if("undefined"!=typeof globalThis&&t===globalThis||void 0!==n&&t===n)return"{ [object globalThis] }";if(!function(e){return"[object Date]"===ly(e)&&ry(e)}(t)&&!iy(t)){var S=gy(t,f),C=Wg?Wg(t)===Object.prototype:t instanceof Object||t.constructor===Object,A=t instanceof Object?"":"null prototype",T=!C&&Hg&&Object(t)===t&&Hg in t?Bg.call(ly(t),8,-1):A?"Object":"",D=(C||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(T||A?"["+Ng.call(Mg.call([],T||[],A||[]),": ")+"] ":"");return 0===S.length?D+"{}":h?D+"{"+my(S,h)+"}":D+"{ "+Ng.call(S,", ")+" }"}return String(t)};function ey(e,t,r){var n=r.quoteStyle||t,i=Zg[n];return i+e+i}function ty(e){return Og.call(String(e),/"/g,"&quot;")}function ry(e){return!Hg||!("object"==typeof e&&(Hg in e||void 0!==e[Hg]))}function ny(e){return"[object Array]"===ly(e)&&ry(e)}function iy(e){return"[object RegExp]"===ly(e)&&ry(e)}function sy(e){if(Gg)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!Vg)return!1;try{return Vg.call(e),!0}catch(Ove){}return!1}var oy=Object.prototype.hasOwnProperty||function(e){return e in this};function ay(e,t){return oy.call(e,t)}function ly(e){return Dg.call(e)}function uy(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function cy(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return cy(Bg.call(e,0,t.maxStringLength),t)+n}var i=Jg[t.quoteStyle||"single"];return i.lastIndex=0,ey(Og.call(Og.call(e,i,"\\$1"),/[\x00-\x1f]/g,dy),"single",t)}function dy(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+Rg.call(t.toString(16))}function hy(e){return"Object("+e+")"}function fy(e){return e+" { ? }"}function py(e,t,r,n){return e+" ("+t+") {"+(n?my(r,n):Ng.call(r,", "))+"}"}function my(e,t){if(0===e.length)return"";var r="\n"+t.prev+t.base;return r+Ng.call(e,","+r)+"\n"+t.prev}function gy(e,t){var r=ny(e),n=[];if(r){n.length=e.length;for(var i=0;i<e.length;i++)n[i]=ay(e,i)?t(e[i],e):""}var s,o="function"==typeof zg?zg(e):[];if(Gg){s={};for(var a=0;a<o.length;a++)s["$"+o[a]]=o[a]}for(var l in e)ay(e,l)&&(r&&String(Number(l))===l&&l<e.length||Gg&&s["$"+l]instanceof Symbol||(Ig.call(/[^\w$]/,l)?n.push(t(l,e)+": "+t(e[l],e)):n.push(l+": "+t(e[l],e))));if("function"==typeof zg)for(var u=0;u<o.length;u++)$g.call(e,o[u])&&n.push("["+t(o[u])+"]: "+t(e[o[u]],e));return n}var yy=Qg,vy=pg,_y=function(e,t,r){for(var n,i=e;null!=(n=i.next);i=n)if(n.key===t)return i.next=n.next,r||(n.next=e.next,e.next=n),n},by=Object,wy=Error,xy=EvalError,Ey=RangeError,Sy=ReferenceError,Cy=SyntaxError,Ay=URIError,Ty=Math.abs,Dy=Math.floor,ky=Math.max,Py=Math.min,By=Math.pow,Oy=Math.round,Ry=Number.isNaN||function(e){return e!=e},Fy=Ry,Iy=Object.getOwnPropertyDescriptor;if(Iy)try{Iy([],"length")}catch(Ove){Iy=null}var My=Iy,Ny=Object.defineProperty||!1;if(Ny)try{Ny({},"a",{value:1})}catch(Ove){Ny=!1}var Ly,Uy,jy,zy,Vy,Gy,Hy,$y,Wy=Ny;function qy(){return Gy?Vy:(Gy=1,Vy="undefined"!=typeof Reflect&&Reflect.getPrototypeOf||null)}function Xy(){return $y?Hy:($y=1,Hy=by.getPrototypeOf||null)}var Yy,Ky,Zy,Jy,Qy,ev,tv,rv=Object.prototype.toString,nv=Math.max,iv=function(e,t){for(var r=[],n=0;n<e.length;n+=1)r[n]=e[n];for(var i=0;i<t.length;i+=1)r[i+e.length]=t[i];return r},sv=function(e){var t=this;if("function"!=typeof t||"[object Function]"!==rv.apply(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var r,n=function(e,t){for(var r=[],n=t||0,i=0;n<e.length;n+=1,i+=1)r[i]=e[n];return r}(arguments,1),i=nv(0,t.length-n.length),s=[],o=0;o<i;o++)s[o]="$"+o;if(r=Function("binder","return function ("+function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r}(s,",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof r){var i=t.apply(this,iv(n,arguments));return Object(i)===i?i:this}return t.apply(e,iv(n,arguments))}),t.prototype){var a=function(){};a.prototype=t.prototype,r.prototype=new a,a.prototype=null}return r},ov=Function.prototype.bind||sv,av=Function.prototype.call,lv=Function.prototype.apply,uv=lv,cv=av,dv="undefined"!=typeof Reflect&&Reflect&&Reflect.apply||ov.call(cv,uv),hv=ov,fv=pg,pv=av,mv=dv,gv=function(e){if(e.length<1||"function"!=typeof e[0])throw new fv("a function is required");return mv(hv,pv,e)},yv=by,vv=wy,_v=xy,bv=Ey,wv=Sy,xv=Cy,Ev=pg,Sv=Ay,Cv=Ty,Av=Dy,Tv=ky,Dv=Py,kv=By,Pv=Oy,Bv=function(e){return Fy(e)||0===e?e:e<0?-1:1},Ov=Function,Rv=function(e){try{return Ov('"use strict"; return ('+e+").constructor;")()}catch(Ove){}},Fv=My,Iv=Wy,Mv=function(){throw new Ev},Nv=Fv?function(){try{return Mv}catch(e){try{return Fv(arguments,"callee").get}catch(t){return Mv}}}():Mv,Lv=function(){if(zy)return jy;zy=1;var e="undefined"!=typeof Symbol&&Symbol,t=Uy?Ly:(Uy=1,Ly=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(var n in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var i=Object.getOwnPropertySymbols(e);if(1!==i.length||i[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var s=Object.getOwnPropertyDescriptor(e,t);if(42!==s.value||!0!==s.enumerable)return!1}return!0});return jy=function(){return"function"==typeof e&&"function"==typeof Symbol&&"symbol"==typeof e("foo")&&"symbol"==typeof Symbol("bar")&&t()}}()(),Uv=function(){if(Jy)return Zy;Jy=1;var e=qy(),t=Xy(),r=function(){if(Ky)return Yy;Ky=1;var e,t=gv,r=My;try{e=[].__proto__===Array.prototype}catch(Ove){if(!Ove||"object"!=typeof Ove||!("code"in Ove)||"ERR_PROTO_ACCESS"!==Ove.code)throw Ove}var n=!!e&&r&&r(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return Yy=n&&"function"==typeof n.get?t([n.get]):"function"==typeof s&&function(e){return s(null==e?e:i(e))}}();return Zy=e?function(t){return e(t)}:t?function(e){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("getProto: not an object");return t(e)}:r?function(e){return r(e)}:null,Zy}(),jv=Xy(),zv=qy(),Vv=lv,Gv=av,Hv={},$v="undefined"!=typeof Uint8Array&&Uv?Uv(Uint8Array):tv,Wv={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?tv:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?tv:ArrayBuffer,"%ArrayIteratorPrototype%":Lv&&Uv?Uv([][Symbol.iterator]()):tv,"%AsyncFromSyncIteratorPrototype%":tv,"%AsyncFunction%":Hv,"%AsyncGenerator%":Hv,"%AsyncGeneratorFunction%":Hv,"%AsyncIteratorPrototype%":Hv,"%Atomics%":"undefined"==typeof Atomics?tv:Atomics,"%BigInt%":"undefined"==typeof BigInt?tv:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?tv:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?tv:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?tv:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":vv,"%eval%":eval,"%EvalError%":_v,"%Float16Array%":"undefined"==typeof Float16Array?tv:Float16Array,"%Float32Array%":"undefined"==typeof Float32Array?tv:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?tv:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?tv:FinalizationRegistry,"%Function%":Ov,"%GeneratorFunction%":Hv,"%Int8Array%":"undefined"==typeof Int8Array?tv:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?tv:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?tv:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Lv&&Uv?Uv(Uv([][Symbol.iterator]())):tv,"%JSON%":"object"==typeof JSON?JSON:tv,"%Map%":"undefined"==typeof Map?tv:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&Lv&&Uv?Uv((new Map)[Symbol.iterator]()):tv,"%Math%":Math,"%Number%":Number,"%Object%":yv,"%Object.getOwnPropertyDescriptor%":Fv,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?tv:Promise,"%Proxy%":"undefined"==typeof Proxy?tv:Proxy,"%RangeError%":bv,"%ReferenceError%":wv,"%Reflect%":"undefined"==typeof Reflect?tv:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?tv:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&Lv&&Uv?Uv((new Set)[Symbol.iterator]()):tv,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?tv:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Lv&&Uv?Uv(""[Symbol.iterator]()):tv,"%Symbol%":Lv?Symbol:tv,"%SyntaxError%":xv,"%ThrowTypeError%":Nv,"%TypedArray%":$v,"%TypeError%":Ev,"%Uint8Array%":"undefined"==typeof Uint8Array?tv:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?tv:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?tv:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?tv:Uint32Array,"%URIError%":Sv,"%WeakMap%":"undefined"==typeof WeakMap?tv:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?tv:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?tv:WeakSet,"%Function.prototype.call%":Gv,"%Function.prototype.apply%":Vv,"%Object.defineProperty%":Iv,"%Object.getPrototypeOf%":jv,"%Math.abs%":Cv,"%Math.floor%":Av,"%Math.max%":Tv,"%Math.min%":Dv,"%Math.pow%":kv,"%Math.round%":Pv,"%Math.sign%":Bv,"%Reflect.getPrototypeOf%":zv};if(Uv)try{null.error}catch(Ove){var qv=Uv(Uv(Ove));Wv["%Error.prototype%"]=qv}var Xv=function e(t){var r;if("%AsyncFunction%"===t)r=Rv("async function () {}");else if("%GeneratorFunction%"===t)r=Rv("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=Rv("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&Uv&&(r=Uv(i.prototype))}return Wv[t]=r,r},Yv={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Kv=ov,Zv=function(){if(ev)return Qy;ev=1;var e=Function.prototype.call,t=Object.prototype.hasOwnProperty;return Qy=ov.call(e,t)}(),Jv=Kv.call(Gv,Array.prototype.concat),Qv=Kv.call(Vv,Array.prototype.splice),e_=Kv.call(Gv,String.prototype.replace),t_=Kv.call(Gv,String.prototype.slice),r_=Kv.call(Gv,RegExp.prototype.exec),n_=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,i_=/\\(\\)?/g,s_=function(e,t){var r,n=e;if(Zv(Yv,n)&&(n="%"+(r=Yv[n])[0]+"%"),Zv(Wv,n)){var i=Wv[n];if(i===Hv&&(i=Xv(n)),void 0===i&&!t)throw new Ev("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:i}}throw new xv("intrinsic "+e+" does not exist!")},o_=function(e,t){if("string"!=typeof e||0===e.length)throw new Ev("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new Ev('"allowMissing" argument must be a boolean');if(null===r_(/^%?[^%]*%?$/,e))throw new xv("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(e){var t=t_(e,0,1),r=t_(e,-1);if("%"===t&&"%"!==r)throw new xv("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new xv("invalid intrinsic syntax, expected opening `%`");var n=[];return e_(e,n_,function(e,t,r,i){n[n.length]=r?e_(i,i_,"$1"):t||e}),n}(e),n=r.length>0?r[0]:"",i=s_("%"+n+"%",t),s=i.name,o=i.value,a=!1,l=i.alias;l&&(n=l[0],Qv(r,Jv([0,1],l)));for(var u=1,c=!0;u<r.length;u+=1){var d=r[u],h=t_(d,0,1),f=t_(d,-1);if(('"'===h||"'"===h||"`"===h||'"'===f||"'"===f||"`"===f)&&h!==f)throw new xv("property names with quotes must have matching quotes");if("constructor"!==d&&c||(a=!0),Zv(Wv,s="%"+(n+="."+d)+"%"))o=Wv[s];else if(null!=o){if(!(d in o)){if(!t)throw new Ev("base intrinsic for "+e+" exists, but the property is not available.");return}if(Fv&&u+1>=r.length){var p=Fv(o,d);o=(c=!!p)&&"get"in p&&!("originalValue"in p.get)?p.get:o[d]}else c=Zv(o,d),o=o[d];c&&!a&&(Wv[s]=o)}}return o},a_=o_,l_=gv,u_=l_([a_("%String.prototype.indexOf%")]),c_=function(e,t){var r=a_(e,!!t);return"function"==typeof r&&u_(e,".prototype.")>-1?l_([r]):r},d_=c_,h_=Qg,f_=pg,p_=o_("%Map%",!0),m_=d_("Map.prototype.get",!0),g_=d_("Map.prototype.set",!0),y_=d_("Map.prototype.has",!0),v_=d_("Map.prototype.delete",!0),__=d_("Map.prototype.size",!0),b_=!!p_&&function(){var e,t={assert:function(e){if(!t.has(e))throw new f_("Side channel does not contain "+h_(e))},delete:function(t){if(e){var r=v_(e,t);return 0===__(e)&&(e=void 0),r}return!1},get:function(t){if(e)return m_(e,t)},has:function(t){return!!e&&y_(e,t)},set:function(t,r){e||(e=new p_),g_(e,t,r)}};return t},w_=c_,x_=Qg,E_=b_,S_=pg,C_=o_("%WeakMap%",!0),A_=w_("WeakMap.prototype.get",!0),T_=w_("WeakMap.prototype.set",!0),D_=w_("WeakMap.prototype.has",!0),k_=w_("WeakMap.prototype.delete",!0),P_=pg,B_=Qg,O_=function(){var e,t={assert:function(e){if(!t.has(e))throw new vy("Side channel does not contain "+yy(e))},delete:function(t){var r=e&&e.next,n=function(e,t){if(e)return _y(e,t,!0)}(e,t);return n&&r&&r===n&&(e=void 0),!!n},get:function(t){return function(e,t){if(e){var r=_y(e,t);return r&&r.value}}(e,t)},has:function(t){return function(e,t){return!!e&&!!_y(e,t)}(e,t)},set:function(t,r){e||(e={next:void 0}),function(e,t,r){var n=_y(e,t);n?n.value=r:e.next={key:t,next:e.next,value:r}}(e,t,r)}};return t},R_=(C_?function(){var e,t,r={assert:function(e){if(!r.has(e))throw new S_("Side channel does not contain "+x_(e))},delete:function(r){if(C_&&r&&("object"==typeof r||"function"==typeof r)){if(e)return k_(e,r)}else if(E_&&t)return t.delete(r);return!1},get:function(r){return C_&&r&&("object"==typeof r||"function"==typeof r)&&e?A_(e,r):t&&t.get(r)},has:function(r){return C_&&r&&("object"==typeof r||"function"==typeof r)&&e?D_(e,r):!!t&&t.has(r)},set:function(r,n){C_&&r&&("object"==typeof r||"function"==typeof r)?(e||(e=new C_),T_(e,r,n)):E_&&(t||(t=E_()),t.set(r,n))}};return r}:E_)||b_||O_,F_=String.prototype.replace,I_=/%20/g,M_="RFC3986",N_={default:M_,formatters:{RFC1738:function(e){return F_.call(e,I_,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738",RFC3986:M_},L_=N_,U_=Object.prototype.hasOwnProperty,j_=Array.isArray,z_=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),V_=function(e,t){for(var r=t&&t.plainObjects?{__proto__:null}:{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r},G_=1024,H_={arrayToObject:V_,assign:function(e,t){return Object.keys(t).reduce(function(e,r){return e[r]=t[r],e},e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var i=t[n],s=i.obj[i.prop],o=Object.keys(s),a=0;a<o.length;++a){var l=o[a],u=s[l];"object"==typeof u&&null!==u&&-1===r.indexOf(u)&&(t.push({obj:s,prop:l}),r.push(u))}return function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(j_(r)){for(var n=[],i=0;i<r.length;++i)void 0!==r[i]&&n.push(r[i]);t.obj[t.prop]=n}}}(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(Ove){return n}},encode:function(e,t,r,n,i){if(0===e.length)return e;var s=e;if("symbol"==typeof e?s=Symbol.prototype.toString.call(e):"string"!=typeof e&&(s=String(e)),"iso-8859-1"===r)return escape(s).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var o="",a=0;a<s.length;a+=G_){for(var l=s.length>=G_?s.slice(a,a+G_):s,u=[],c=0;c<l.length;++c){var d=l.charCodeAt(c);45===d||46===d||95===d||126===d||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||i===L_.RFC1738&&(40===d||41===d)?u[u.length]=l.charAt(c):d<128?u[u.length]=z_[d]:d<2048?u[u.length]=z_[192|d>>6]+z_[128|63&d]:d<55296||d>=57344?u[u.length]=z_[224|d>>12]+z_[128|d>>6&63]+z_[128|63&d]:(c+=1,d=65536+((1023&d)<<10|1023&l.charCodeAt(c)),u[u.length]=z_[240|d>>18]+z_[128|d>>12&63]+z_[128|d>>6&63]+z_[128|63&d])}o+=u.join("")}return o},isBuffer:function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(j_(e)){for(var r=[],n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)},merge:function e(t,r,n){if(!r)return t;if("object"!=typeof r&&"function"!=typeof r){if(j_(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(n&&(n.plainObjects||n.allowPrototypes)||!U_.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var i=t;return j_(t)&&!j_(r)&&(i=V_(t,n)),j_(t)&&j_(r)?(r.forEach(function(r,i){if(U_.call(t,i)){var s=t[i];s&&"object"==typeof s&&r&&"object"==typeof r?t[i]=e(s,r,n):t.push(r)}else t[i]=r}),t):Object.keys(r).reduce(function(t,i){var s=r[i];return U_.call(t,i)?t[i]=e(t[i],s,n):t[i]=s,t},i)}},$_=function(){var e,t={assert:function(e){if(!t.has(e))throw new P_("Side channel does not contain "+B_(e))},delete:function(t){return!!e&&e.delete(t)},get:function(t){return e&&e.get(t)},has:function(t){return!!e&&e.has(t)},set:function(t,r){e||(e=R_()),e.set(t,r)}};return t},W_=H_,q_=N_,X_=Object.prototype.hasOwnProperty,Y_={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},K_=Array.isArray,Z_=Array.prototype.push,J_=function(e,t){Z_.apply(e,K_(t)?t:[t])},Q_=Date.prototype.toISOString,eb=q_.default,tb={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:W_.encode,encodeValuesOnly:!1,filter:void 0,format:eb,formatter:q_.formatters[eb],indices:!1,serializeDate:function(e){return Q_.call(e)},skipNulls:!1,strictNullHandling:!1},rb={},nb=function e(t,r,n,i,s,o,a,l,u,c,d,h,f,p,m,g,y,v){for(var _=t,b=v,w=0,x=!1;void 0!==(b=b.get(rb))&&!x;){var E=b.get(t);if(w+=1,void 0!==E){if(E===w)throw new RangeError("Cyclic object value");x=!0}void 0===b.get(rb)&&(w=0)}if("function"==typeof c?_=c(r,_):_ instanceof Date?_=f(_):"comma"===n&&K_(_)&&(_=W_.maybeMap(_,function(e){return e instanceof Date?f(e):e})),null===_){if(o)return u&&!g?u(r,tb.encoder,y,"key",p):r;_=""}if(function(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||"symbol"==typeof e||"bigint"==typeof e}(_)||W_.isBuffer(_))return u?[m(g?r:u(r,tb.encoder,y,"key",p))+"="+m(u(_,tb.encoder,y,"value",p))]:[m(r)+"="+m(String(_))];var S,C=[];if(void 0===_)return C;if("comma"===n&&K_(_))g&&u&&(_=W_.maybeMap(_,u)),S=[{value:_.length>0?_.join(",")||null:void 0}];else if(K_(c))S=c;else{var A=Object.keys(_);S=d?A.sort(d):A}var T=l?String(r).replace(/\./g,"%2E"):String(r),D=i&&K_(_)&&1===_.length?T+"[]":T;if(s&&K_(_)&&0===_.length)return D+"[]";for(var k=0;k<S.length;++k){var P=S[k],B="object"==typeof P&&P&&void 0!==P.value?P.value:_[P];if(!a||null!==B){var O=h&&l?String(P).replace(/\./g,"%2E"):String(P),R=K_(_)?"function"==typeof n?n(D,O):D:D+(h?"."+O:"["+O+"]");v.set(t,w);var F=$_();F.set(rb,v),J_(C,e(B,R,n,i,s,o,a,l,"comma"===n&&g&&K_(_)?null:u,c,d,h,f,p,m,g,y,F))}}return C},ib=H_,sb=Object.prototype.hasOwnProperty,ob=Array.isArray,ab={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:ib.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},lb=function(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},ub=function(e,t,r){if(e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1)return e.split(",");if(t.throwOnLimitExceeded&&r>=t.arrayLimit)throw new RangeError("Array limit exceeded. Only "+t.arrayLimit+" element"+(1===t.arrayLimit?"":"s")+" allowed in an array.");return e},cb=function(e,t,r,n){if(e){var i=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,s=/(\[[^[\]]*])/g,o=r.depth>0&&/(\[[^[\]]*])/.exec(i),a=o?i.slice(0,o.index):i,l=[];if(a){if(!r.plainObjects&&sb.call(Object.prototype,a)&&!r.allowPrototypes)return;l.push(a)}for(var u=0;r.depth>0&&null!==(o=s.exec(i))&&u<r.depth;){if(u+=1,!r.plainObjects&&sb.call(Object.prototype,o[1].slice(1,-1))&&!r.allowPrototypes)return;l.push(o[1])}if(o){if(!0===r.strictDepth)throw new RangeError("Input depth exceeded depth option of "+r.depth+" and strictDepth is true");l.push("["+i.slice(o.index)+"]")}return function(e,t,r,n){var i=0;if(e.length>0&&"[]"===e[e.length-1]){var s=e.slice(0,-1).join("");i=Array.isArray(t)&&t[s]?t[s].length:0}for(var o=n?t:ub(t,r,i),a=e.length-1;a>=0;--a){var l,u=e[a];if("[]"===u&&r.parseArrays)l=r.allowEmptyArrays&&(""===o||r.strictNullHandling&&null===o)?[]:ib.combine([],o);else{l=r.plainObjects?{__proto__:null}:{};var c="["===u.charAt(0)&&"]"===u.charAt(u.length-1)?u.slice(1,-1):u,d=r.decodeDotInKeys?c.replace(/%2E/g,"."):c,h=parseInt(d,10);r.parseArrays||""!==d?!isNaN(h)&&u!==d&&String(h)===d&&h>=0&&r.parseArrays&&h<=r.arrayLimit?(l=[])[h]=o:"__proto__"!==d&&(l[d]=o):l={0:o}}o=l}return o}(l,t,r,n)}},db=function(e,t){var r,n=e,i=function(e){if(!e)return tb;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.encodeDotInKeys&&"boolean"!=typeof e.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||tb.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=q_.default;if(void 0!==e.format){if(!X_.call(q_.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n,i=q_.formatters[r],s=tb.filter;if(("function"==typeof e.filter||K_(e.filter))&&(s=e.filter),n=e.arrayFormat in Y_?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":tb.arrayFormat,"commaRoundTrip"in e&&"boolean"!=typeof e.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var o=void 0===e.allowDots?!0===e.encodeDotInKeys||tb.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:tb.addQueryPrefix,allowDots:o,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:tb.allowEmptyArrays,arrayFormat:n,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:tb.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:void 0===e.delimiter?tb.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:tb.encode,encodeDotInKeys:"boolean"==typeof e.encodeDotInKeys?e.encodeDotInKeys:tb.encodeDotInKeys,encoder:"function"==typeof e.encoder?e.encoder:tb.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:tb.encodeValuesOnly,filter:s,format:r,formatter:i,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:tb.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:tb.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:tb.strictNullHandling}}(t);"function"==typeof i.filter?n=(0,i.filter)("",n):K_(i.filter)&&(r=i.filter);var s=[];if("object"!=typeof n||null===n)return"";var o=Y_[i.arrayFormat],a="comma"===o&&i.commaRoundTrip;r||(r=Object.keys(n)),i.sort&&r.sort(i.sort);for(var l=$_(),u=0;u<r.length;++u){var c=r[u],d=n[c];i.skipNulls&&null===d||J_(s,nb(d,c,o,a,i.allowEmptyArrays,i.strictNullHandling,i.skipNulls,i.encodeDotInKeys,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,l))}var h=s.join(i.delimiter),f=!0===i.addQueryPrefix?"?":"";return i.charsetSentinel&&("iso-8859-1"===i.charset?f+="utf8=%26%2310003%3B&":f+="utf8=%E2%9C%93&"),h.length>0?f+h:""},hb=function(e,t){var r=function(e){if(!e)return ab;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.decodeDotInKeys&&"boolean"!=typeof e.decodeDotInKeys)throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(void 0!==e.throwOnLimitExceeded&&"boolean"!=typeof e.throwOnLimitExceeded)throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var t=void 0===e.charset?ab.charset:e.charset,r=void 0===e.duplicates?ab.duplicates:e.duplicates;if("combine"!==r&&"first"!==r&&"last"!==r)throw new TypeError("The duplicates option must be either combine, first, or last");return{allowDots:void 0===e.allowDots?!0===e.decodeDotInKeys||ab.allowDots:!!e.allowDots,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:ab.allowEmptyArrays,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:ab.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:ab.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:ab.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:ab.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:ab.comma,decodeDotInKeys:"boolean"==typeof e.decodeDotInKeys?e.decodeDotInKeys:ab.decodeDotInKeys,decoder:"function"==typeof e.decoder?e.decoder:ab.decoder,delimiter:"string"==typeof e.delimiter||ib.isRegExp(e.delimiter)?e.delimiter:ab.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:ab.depth,duplicates:r,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:ab.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:ab.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:ab.plainObjects,strictDepth:"boolean"==typeof e.strictDepth?!!e.strictDepth:ab.strictDepth,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:ab.strictNullHandling,throwOnLimitExceeded:"boolean"==typeof e.throwOnLimitExceeded&&e.throwOnLimitExceeded}}(t);if(""===e||null==e)return r.plainObjects?{__proto__:null}:{};for(var n="string"==typeof e?function(e,t){var r={__proto__:null},n=t.ignoreQueryPrefix?e.replace(/^\?/,""):e;n=n.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var i=t.parameterLimit===1/0?void 0:t.parameterLimit,s=n.split(t.delimiter,t.throwOnLimitExceeded?i+1:i);if(t.throwOnLimitExceeded&&s.length>i)throw new RangeError("Parameter limit exceeded. Only "+i+" parameter"+(1===i?"":"s")+" allowed.");var o,a=-1,l=t.charset;if(t.charsetSentinel)for(o=0;o<s.length;++o)0===s[o].indexOf("utf8=")&&("utf8=%E2%9C%93"===s[o]?l="utf-8":"utf8=%26%2310003%3B"===s[o]&&(l="iso-8859-1"),a=o,o=s.length);for(o=0;o<s.length;++o)if(o!==a){var u,c,d=s[o],h=d.indexOf("]="),f=-1===h?d.indexOf("="):h+1;-1===f?(u=t.decoder(d,ab.decoder,l,"key"),c=t.strictNullHandling?null:""):(u=t.decoder(d.slice(0,f),ab.decoder,l,"key"),c=ib.maybeMap(ub(d.slice(f+1),t,ob(r[u])?r[u].length:0),function(e){return t.decoder(e,ab.decoder,l,"value")})),c&&t.interpretNumericEntities&&"iso-8859-1"===l&&(c=lb(String(c))),d.indexOf("[]=")>-1&&(c=ob(c)?[c]:c);var p=sb.call(r,u);p&&"combine"===t.duplicates?r[u]=ib.combine(r[u],c):p&&"last"!==t.duplicates||(r[u]=c)}return r}(e,r):e,i=r.plainObjects?{__proto__:null}:{},s=Object.keys(n),o=0;o<s.length;++o){var a=s[o],l=cb(a,n[a],r,"string"==typeof e);i=ib.merge(i,l,r)}return!0===r.allowSparse?i:ib.compact(i)},fb={formats:N_,parse:hb,stringify:db},pb=fg;function mb(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var gb=/^([a-z0-9.+-]+:)/i,yb=/:[0-9]*$/,vb=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,_b=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),bb=["'"].concat(_b),wb=["%","/","?",";","#"].concat(bb),xb=["/","?","#"],Eb=/^[+a-z0-9A-Z_-]{0,63}$/,Sb=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Cb={javascript:!0,"javascript:":!0},Ab={javascript:!0,"javascript:":!0},Tb={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Db=fb;function kb(e,t,r){if(e&&"object"==typeof e&&e instanceof mb)return e;var n=new mb;return n.parse(e,t,r),n}mb.prototype.parse=function(e,t,r){if("string"!=typeof e)throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),i=-1!==n&&n<e.indexOf("#")?"?":"#",s=e.split(i);s[0]=s[0].replace(/\\/g,"/");var o=e=s.join(i);if(o=o.trim(),!r&&1===e.split("#").length){var a=vb.exec(o);if(a)return this.path=o,this.href=o,this.pathname=a[1],a[2]?(this.search=a[2],this.query=t?Db.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var l=gb.exec(o);if(l){var u=(l=l[0]).toLowerCase();this.protocol=u,o=o.substr(l.length)}if(r||l||o.match(/^\/\/[^@/]+@[^@/]+/)){var c="//"===o.substr(0,2);!c||l&&Ab[l]||(o=o.substr(2),this.slashes=!0)}if(!Ab[l]&&(c||l&&!Tb[l])){for(var d,h,f=-1,p=0;p<xb.length;p++)-1!==(m=o.indexOf(xb[p]))&&(-1===f||m<f)&&(f=m);for(-1!==(h=-1===f?o.lastIndexOf("@"):o.lastIndexOf("@",f))&&(d=o.slice(0,h),o=o.slice(h+1),this.auth=decodeURIComponent(d)),f=-1,p=0;p<wb.length;p++){var m;-1!==(m=o.indexOf(wb[p]))&&(-1===f||m<f)&&(f=m)}-1===f&&(f=o.length),this.host=o.slice(0,f),o=o.slice(f),this.parseHost(),this.hostname=this.hostname||"";var g="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!g)for(var y=this.hostname.split(/\./),v=(p=0,y.length);p<v;p++){var _=y[p];if(_&&!_.match(Eb)){for(var b="",w=0,x=_.length;w<x;w++)_.charCodeAt(w)>127?b+="x":b+=_[w];if(!b.match(Eb)){var E=y.slice(0,p),S=y.slice(p+1),C=_.match(Sb);C&&(E.push(C[1]),S.unshift(C[2])),S.length&&(o="/"+S.join(".")+o),this.hostname=E.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),g||(this.hostname=pb.toASCII(this.hostname));var A=this.port?":"+this.port:"",T=this.hostname||"";this.host=T+A,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==o[0]&&(o="/"+o))}if(!Cb[u])for(p=0,v=bb.length;p<v;p++){var D=bb[p];if(-1!==o.indexOf(D)){var k=encodeURIComponent(D);k===D&&(k=escape(D)),o=o.split(D).join(k)}}var P=o.indexOf("#");-1!==P&&(this.hash=o.substr(P),o=o.slice(0,P));var B=o.indexOf("?");if(-1!==B?(this.search=o.substr(B),this.query=o.substr(B+1),t&&(this.query=Db.parse(this.query)),o=o.slice(0,B)):t&&(this.search="",this.query={}),o&&(this.pathname=o),Tb[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){A=this.pathname||"";var O=this.search||"";this.path=A+O}return this.href=this.format(),this},mb.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,s="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&"object"==typeof this.query&&Object.keys(this.query).length&&(s=Db.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||s&&"?"+s||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||Tb[t])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),o&&"?"!==o.charAt(0)&&(o="?"+o),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),t+i+r+(o=o.replace("#","%23"))+n},mb.prototype.resolve=function(e){return this.resolveObject(kb(e,!1,!0)).format()},mb.prototype.resolveObject=function(e){if("string"==typeof e){var t=new mb;t.parse(e,!1,!0),e=t}for(var r=new mb,n=Object.keys(this),i=0;i<n.length;i++){var s=n[i];r[s]=this[s]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var o=Object.keys(e),a=0;a<o.length;a++){var l=o[a];"protocol"!==l&&(r[l]=e[l])}return Tb[r.protocol]&&r.hostname&&!r.pathname&&(r.pathname="/",r.path=r.pathname),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!Tb[e.protocol]){for(var u=Object.keys(e),c=0;c<u.length;c++){var d=u[c];r[d]=e[d]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||Ab[e.protocol])r.pathname=e.pathname;else{for(var h=(e.pathname||"").split("/");h.length&&!(e.host=h.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),r.pathname=h.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var f=r.pathname||"",p=r.search||"";r.path=f+p}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var m=r.pathname&&"/"===r.pathname.charAt(0),g=e.host||e.pathname&&"/"===e.pathname.charAt(0),y=g||m||r.host&&e.pathname,v=y,_=r.pathname&&r.pathname.split("/")||[],b=(h=e.pathname&&e.pathname.split("/")||[],r.protocol&&!Tb[r.protocol]);if(b&&(r.hostname="",r.port=null,r.host&&(""===_[0]?_[0]=r.host:_.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===h[0]?h[0]=e.host:h.unshift(e.host)),e.host=null),y=y&&(""===h[0]||""===_[0])),g)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,_=h;else if(h.length)_||(_=[]),_.pop(),_=_.concat(h),r.search=e.search,r.query=e.query;else if(null!=e.search)return b&&(r.host=_.shift(),r.hostname=r.host,(C=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=C.shift(),r.hostname=C.shift(),r.host=r.hostname)),r.search=e.search,r.query=e.query,null===r.pathname&&null===r.search||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;if(!_.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var w=_.slice(-1)[0],x=(r.host||e.host||_.length>1)&&("."===w||".."===w)||""===w,E=0,S=_.length;S>=0;S--)"."===(w=_[S])?_.splice(S,1):".."===w?(_.splice(S,1),E++):E&&(_.splice(S,1),E--);if(!y&&!v)for(;E--;E)_.unshift("..");!y||""===_[0]||_[0]&&"/"===_[0].charAt(0)||_.unshift(""),x&&"/"!==_.join("/").substr(-1)&&_.push("");var C,A=""===_[0]||_[0]&&"/"===_[0].charAt(0);return b&&(r.hostname=A?"":_.length?_.shift():"",r.host=r.hostname,(C=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=C.shift(),r.hostname=C.shift(),r.host=r.hostname)),(y=y||r.host&&_.length)&&!A&&_.unshift(""),_.length>0?r.pathname=_.join("/"):(r.pathname=null,r.path=null),null===r.pathname&&null===r.search||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},mb.prototype.parseHost=function(){var e=this.host,t=yb.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};var Pb=kb,Bb=function(e,t){return kb(e,!1,!0).resolve(t)},Ob=function(e){return"string"==typeof e&&(e=kb(e)),e instanceof mb?e.format():mb.prototype.format.call(e)};const Rb={};function Fb(e,t,r=3){if(Rb[t])return;let n=(new Error).stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}\nDeprecated since v${e}`):(n=n.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}\nDeprecated since v${e}`),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}\nDeprecated since v${e}`),console.warn(n))),Rb[t]=!0}const Ib={get parse(){return Fb("7.3.0","utils.url.parse is deprecated, use native URL API instead."),Pb},get format(){return Fb("7.3.0","utils.url.format is deprecated, use native URL API instead."),Ob},get resolve(){return Fb("7.3.0","utils.url.resolve is deprecated, use native URL API instead."),Bb}};function Mb(e){if("string"!=typeof e)throw new TypeError(`Path must be a string. Received ${JSON.stringify(e)}`)}function Nb(e){return e.split("?")[0].split("#")[0]}const Lb={toPosix:e=>function(e,t,r){return e.replace(new RegExp(function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(t),"g"),r)}(e,"\\","/"),isUrl(e){return/^https?:/.test(this.toPosix(e))},isDataUrl:e=>/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(e),isBlobUrl:e=>e.startsWith("blob:"),hasProtocol(e){return/^[^/:]+:/.test(this.toPosix(e))},getProtocol(e){Mb(e),e=this.toPosix(e);const t=/^file:\/\/\//.exec(e);if(t)return t[0];const r=/^[^/:]+:\/{0,2}/.exec(e);return r?r[0]:""},toAbsolute(e,t,r){if(Mb(e),this.isDataUrl(e)||this.isBlobUrl(e))return e;const n=Nb(this.toPosix(t??ym.ADAPTER.getBaseUrl())),i=Nb(this.toPosix(r??this.rootname(n)));return(e=this.toPosix(e)).startsWith("/")?Lb.join(i,e.slice(1)):this.isAbsolute(e)?e:this.join(n,e)},normalize(e){if(Mb(e),0===e.length)return".";if(this.isDataUrl(e)||this.isBlobUrl(e))return e;let t="";const r=(e=this.toPosix(e)).startsWith("/");this.hasProtocol(e)&&(t=this.rootname(e),e=e.slice(t.length));const n=e.endsWith("/");return(e=function(e,t){let r="",n=0,i=-1,s=0,o=-1;for(let a=0;a<=e.length;++a){if(a<e.length)o=e.charCodeAt(a);else{if(47===o)break;o=47}if(47===o){if(i!==a-1&&1!==s)if(i!==a-1&&2===s){if(r.length<2||2!==n||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){const e=r.lastIndexOf("/");if(e!==r.length-1){-1===e?(r="",n=0):(r=r.slice(0,e),n=r.length-1-r.lastIndexOf("/")),i=a,s=0;continue}}else if(2===r.length||1===r.length){r="",n=0,i=a,s=0;continue}t&&(r.length>0?r+="/..":r="..",n=2)}else r.length>0?r+=`/${e.slice(i+1,a)}`:r=e.slice(i+1,a),n=a-i-1;i=a,s=0}else 46===o&&-1!==s?++s:s=-1}return r}(e,!1)).length>0&&n&&(e+="/"),r?`/${e}`:t+e},isAbsolute(e){return Mb(e),e=this.toPosix(e),!!this.hasProtocol(e)||e.startsWith("/")},join(...e){if(0===e.length)return".";let t;for(let r=0;r<e.length;++r){const n=e[r];if(Mb(n),n.length>0)if(void 0===t)t=n;else{const i=e[r-1]??"";this.joinExtensions.includes(this.extname(i).toLowerCase())?t+=`/../${n}`:t+=`/${n}`}}return void 0===t?".":this.normalize(t)},dirname(e){if(Mb(e),0===e.length)return".";let t=(e=this.toPosix(e)).charCodeAt(0);const r=47===t;let n=-1,i=!0;const s=this.getProtocol(e),o=e;for(let a=(e=e.slice(s.length)).length-1;a>=1;--a)if(t=e.charCodeAt(a),47===t){if(!i){n=a;break}}else i=!1;return-1===n?r?"/":this.isUrl(o)?s+e:s:r&&1===n?"//":s+e.slice(0,n)},rootname(e){Mb(e);let t="";if(t=(e=this.toPosix(e)).startsWith("/")?"/":this.getProtocol(e),this.isUrl(e)){const r=e.indexOf("/",t.length);t=-1!==r?e.slice(0,r):e,t.endsWith("/")||(t+="/")}return t},basename(e,t){Mb(e),t&&Mb(t),e=Nb(this.toPosix(e));let r,n=0,i=-1,s=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";let o=t.length-1,a=-1;for(r=e.length-1;r>=0;--r){const l=e.charCodeAt(r);if(47===l){if(!s){n=r+1;break}}else-1===a&&(s=!1,a=r+1),o>=0&&(l===t.charCodeAt(o)?-1===--o&&(i=r):(o=-1,i=a))}return n===i?i=a:-1===i&&(i=e.length),e.slice(n,i)}for(r=e.length-1;r>=0;--r)if(47===e.charCodeAt(r)){if(!s){n=r+1;break}}else-1===i&&(s=!1,i=r+1);return-1===i?"":e.slice(n,i)},extname(e){Mb(e);let t=-1,r=0,n=-1,i=!0,s=0;for(let o=(e=Nb(this.toPosix(e))).length-1;o>=0;--o){const a=e.charCodeAt(o);if(47!==a)-1===n&&(i=!1,n=o+1),46===a?-1===t?t=o:1!==s&&(s=1):-1!==t&&(s=-1);else if(!i){r=o+1;break}}return-1===t||-1===n||0===s||1===s&&t===n-1&&t===r+1?"":e.slice(t,n)},parse(e){Mb(e);const t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;let r=(e=Nb(this.toPosix(e))).charCodeAt(0);const n=this.isAbsolute(e);let i;t.root=this.rootname(e),i=n||this.hasProtocol(e)?1:0;let s=-1,o=0,a=-1,l=!0,u=e.length-1,c=0;for(;u>=i;--u)if(r=e.charCodeAt(u),47!==r)-1===a&&(l=!1,a=u+1),46===r?-1===s?s=u:1!==c&&(c=1):-1!==s&&(c=-1);else if(!l){o=u+1;break}return-1===s||-1===a||0===c||1===c&&s===a-1&&s===o+1?-1!==a&&(t.base=t.name=0===o&&n?e.slice(1,a):e.slice(o,a)):(0===o&&n?(t.name=e.slice(1,s),t.base=e.slice(1,a)):(t.name=e.slice(o,s),t.base=e.slice(o,a)),t.ext=e.slice(s,a)),t.dir=this.dirname(e),t},sep:"/",delimiter:":",joinExtensions:[".html"]};let Ub,jb;async function zb(){return Ub??(Ub=(async()=>{const e=document.createElement("canvas").getContext("webgl");if(!e)return lm.UNPACK;const t=await new Promise(e=>{const t=document.createElement("video");t.onloadeddata=()=>e(t),t.onerror=()=>e(null),t.autoplay=!1,t.crossOrigin="anonymous",t.preload="auto",t.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",t.load()});if(!t)return lm.UNPACK;const r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);const n=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,n),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t);const i=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,i),e.deleteFramebuffer(n),e.deleteTexture(r),e.getExtension("WEBGL_lose_context")?.loseContext(),i[0]<=i[3]?lm.PMA:lm.UNPACK})()),Ub}function Vb(){return typeof jb>"u"&&(jb=function(){const e={stencil:!0,failIfMajorPerformanceCaveat:ym.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!ym.ADAPTER.getWebGLRenderingContext())return!1;const t=ym.ADAPTER.createCanvas();let r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);const n=!!r?.getContextAttributes()?.stencil;if(r){const e=r.getExtension("WEBGL_lose_context");e&&e.loseContext()}return r=null,n}catch{return!1}}()),jb}var Gb={grad:.9,turn:360,rad:360/(2*Math.PI)},Hb=function(e){return"string"==typeof e?e.length>0:"number"==typeof e},$b=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=Math.pow(10,t)),Math.round(r*e)/r+0},Wb=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=1),e>r?r:e>t?e:t},qb=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},Xb=function(e){return{r:Wb(e.r,0,255),g:Wb(e.g,0,255),b:Wb(e.b,0,255),a:Wb(e.a)}},Yb=function(e){return{r:$b(e.r),g:$b(e.g),b:$b(e.b),a:$b(e.a,3)}},Kb=/^#([0-9a-f]{3,8})$/i,Zb=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},Jb=function(e){var t=e.r,r=e.g,n=e.b,i=e.a,s=Math.max(t,r,n),o=s-Math.min(t,r,n),a=o?s===t?(r-n)/o:s===r?2+(n-t)/o:4+(t-r)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},Qb=function(e){var t=e.h,r=e.s,n=e.v,i=e.a;t=t/360*6,r/=100,n/=100;var s=Math.floor(t),o=n*(1-r),a=n*(1-(t-s)*r),l=n*(1-(1-t+s)*r),u=s%6;return{r:255*[n,a,o,o,l,n][u],g:255*[l,n,n,a,o,o][u],b:255*[o,o,l,n,n,a][u],a:i}},ew=function(e){return{h:qb(e.h),s:Wb(e.s,0,100),l:Wb(e.l,0,100),a:Wb(e.a)}},tw=function(e){return{h:$b(e.h),s:$b(e.s),l:$b(e.l),a:$b(e.a,3)}},rw=function(e){return Qb((r=(t=e).s,{h:t.h,s:(r*=((n=t.l)<50?n:100-n)/100)>0?2*r/(n+r)*100:0,v:n+r,a:t.a}));var t,r,n},nw=function(e){return{h:(t=Jb(e)).h,s:(i=(200-(r=t.s))*(n=t.v)/100)>0&&i<200?r*n/100/(i<=100?i:200-i)*100:0,l:i/2,a:t.a};var t,r,n,i},iw=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,sw=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ow=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,aw=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,lw={string:[[function(e){var t=Kb.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?$b(parseInt(e[3]+e[3],16)/255,2):1}:6===e.length||8===e.length?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:8===e.length?$b(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=ow.exec(e)||aw.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:Xb({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=iw.exec(e)||sw.exec(e);if(!t)return null;var r,n,i=ew({h:(r=t[1],n=t[2],void 0===n&&(n="deg"),Number(r)*(Gb[n]||1)),s:Number(t[3]),l:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)});return rw(i)},"hsl"]],object:[[function(e){var t=e.r,r=e.g,n=e.b,i=e.a,s=void 0===i?1:i;return Hb(t)&&Hb(r)&&Hb(n)?Xb({r:Number(t),g:Number(r),b:Number(n),a:Number(s)}):null},"rgb"],[function(e){var t=e.h,r=e.s,n=e.l,i=e.a,s=void 0===i?1:i;if(!Hb(t)||!Hb(r)||!Hb(n))return null;var o=ew({h:Number(t),s:Number(r),l:Number(n),a:Number(s)});return rw(o)},"hsl"],[function(e){var t=e.h,r=e.s,n=e.v,i=e.a,s=void 0===i?1:i;if(!Hb(t)||!Hb(r)||!Hb(n))return null;var o=function(e){return{h:qb(e.h),s:Wb(e.s,0,100),v:Wb(e.v,0,100),a:Wb(e.a)}}({h:Number(t),s:Number(r),v:Number(n),a:Number(s)});return Qb(o)},"hsv"]]},uw=function(e,t){for(var r=0;r<t.length;r++){var n=t[r][0](e);if(n)return[n,t[r][1]]}return[null,void 0]},cw=function(e,t){var r=nw(e);return{h:r.h,s:Wb(r.s+100*t,0,100),l:r.l,a:r.a}},dw=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},hw=function(e,t){var r=nw(e);return{h:r.h,s:r.s,l:Wb(r.l+100*t,0,100),a:r.a}},fw=function(){function e(e){this.parsed=function(e){return"string"==typeof e?uw(e.trim(),lw.string):"object"==typeof e&&null!==e?uw(e,lw.object):[null,void 0]}(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return null!==this.parsed},e.prototype.brightness=function(){return $b(dw(this.rgba),2)},e.prototype.isDark=function(){return dw(this.rgba)<.5},e.prototype.isLight=function(){return dw(this.rgba)>=.5},e.prototype.toHex=function(){return t=(e=Yb(this.rgba)).r,r=e.g,n=e.b,s=(i=e.a)<1?Zb($b(255*i)):"","#"+Zb(t)+Zb(r)+Zb(n)+s;var e,t,r,n,i,s},e.prototype.toRgb=function(){return Yb(this.rgba)},e.prototype.toRgbString=function(){return t=(e=Yb(this.rgba)).r,r=e.g,n=e.b,(i=e.a)<1?"rgba("+t+", "+r+", "+n+", "+i+")":"rgb("+t+", "+r+", "+n+")";var e,t,r,n,i},e.prototype.toHsl=function(){return tw(nw(this.rgba))},e.prototype.toHslString=function(){return t=(e=tw(nw(this.rgba))).h,r=e.s,n=e.l,(i=e.a)<1?"hsla("+t+", "+r+"%, "+n+"%, "+i+")":"hsl("+t+", "+r+"%, "+n+"%)";var e,t,r,n,i},e.prototype.toHsv=function(){return e=Jb(this.rgba),{h:$b(e.h),s:$b(e.s),v:$b(e.v),a:$b(e.a,3)};var e},e.prototype.invert=function(){return pw({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},e.prototype.saturate=function(e){return void 0===e&&(e=.1),pw(cw(this.rgba,e))},e.prototype.desaturate=function(e){return void 0===e&&(e=.1),pw(cw(this.rgba,-e))},e.prototype.grayscale=function(){return pw(cw(this.rgba,-1))},e.prototype.lighten=function(e){return void 0===e&&(e=.1),pw(hw(this.rgba,e))},e.prototype.darken=function(e){return void 0===e&&(e=.1),pw(hw(this.rgba,-e))},e.prototype.rotate=function(e){return void 0===e&&(e=15),this.hue(this.hue()+e)},e.prototype.alpha=function(e){return"number"==typeof e?pw({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):$b(this.rgba.a,3);var t},e.prototype.hue=function(e){var t=nw(this.rgba);return"number"==typeof e?pw({h:e,s:t.s,l:t.l,a:t.a}):$b(t.h)},e.prototype.isEqual=function(e){return this.toHex()===pw(e).toHex()},e}(),pw=function(e){return e instanceof fw?e:new fw(e)},mw=[];!function(e){e.forEach(function(e){mw.indexOf(e)<0&&(e(fw,lw),mw.push(e))})}([function(e,t){var r={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var i in r)n[r[i]]=i;var s={};e.prototype.toName=function(t){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var i,o,a=n[this.toHex()];if(a)return a;if(null==t?void 0:t.closest){var l=this.toRgb(),u=1/0,c="black";if(!s.length)for(var d in r)s[d]=new e(r[d]).toRgb();for(var h in r){var f=(i=l,o=s[h],Math.pow(i.r-o.r,2)+Math.pow(i.g-o.g,2)+Math.pow(i.b-o.b,2));f<u&&(u=f,c=h)}return c}},t.string.push([function(t){var n=t.toLowerCase(),i="transparent"===n?"#0000":r[n];return i?new e(i).toRgb():null},"name"])}]);const gw=class e{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(t){if(t instanceof e)this._value=this.cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(null===t)throw new Error("Cannot set PIXI.Color#value to null");(null===this._value||!this.isSourceEqual(this._value,t))&&(this.normalize(t),this._value=this.cloneSource(t))}}get value(){return this._value}cloneSource(e){return"string"==typeof e||"number"==typeof e||e instanceof Number||null===e?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):"object"==typeof e&&null!==e?{...e}:e}isSourceEqual(e,t){const r=typeof e;if(r!==typeof t)return!1;if("number"===r||"string"===r||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length===t.length&&e.every((e,r)=>e===t[r]);if(null!==e&&null!==t){const r=Object.keys(e),n=Object.keys(t);return r.length===n.length&&r.every(r=>e[r]===t[r])}return e===t}toRgba(){const[e,t,r,n]=this._components;return{r:e,g:t,b:r,a:n}}toRgb(){const[e,t,r]=this._components;return{r:e,g:t,b:r}}toRgbaString(){const[e,t,r]=this.toUint8RgbArray();return`rgba(${e},${t},${r},${this.alpha})`}toUint8RgbArray(e){const[t,r,n]=this._components;return(e=e??[])[0]=Math.round(255*t),e[1]=Math.round(255*r),e[2]=Math.round(255*n),e}toRgbArray(e){e=e??[];const[t,r,n]=this._components;return e[0]=t,e[1]=r,e[2]=n,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(65280&e)+((255&e)<<16)}multiply(t){const[r,n,i,s]=e.temp.setValue(t)._components;return this._components[0]*=r,this._components[1]*=n,this._components[2]*=i,this._components[3]*=s,this.refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(1===e)return(255<<24)+this._int;if(0===e)return t?0:this._int;let r=this._int>>16&255,n=this._int>>8&255,i=255&this._int;return t&&(r=r*e+.5|0,n=n*e+.5|0,i=i*e+.5|0),(255*e<<24)+(r<<16)+(n<<8)+i}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const e=Math.round(255*this._components[3]).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[t,r,n]=this._components;return this._components[0]=Math.round(t*e)/e,this._components[1]=Math.round(r*e)/e,this._components[2]=Math.round(n*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[t,r,n,i]=this._components;return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e}normalize(t){let r,n,i,s;if(("number"==typeof t||t instanceof Number)&&t>=0&&t<=16777215)r=(t>>16&255)/255,n=(t>>8&255)/255,i=(255&t)/255,s=1;else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[r,n,i,s=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[r,n,i,s=255]=t,r/=255,n/=255,i/=255,s/=255;else if("string"==typeof t||"object"==typeof t){if("string"==typeof t){const r=e.HEX_PATTERN.exec(t);r&&(t=`#${r[2]}`)}const o=pw(t);o.isValid()&&(({r:r,g:n,b:i,a:s}=o.rgba),r/=255,n/=255,i/=255)}if(void 0===r)throw new Error(`Unable to convert color ${t}`);this._components[0]=r,this._components[1]=n,this._components[2]=i,this._components[3]=s,this.refreshInt()}refreshInt(){this._clamp(this._components);const[e,t,r]=this._components;this._int=(255*e<<16)+(255*t<<8)+(255*r|0)}_clamp(e,t=0,r=1){return"number"==typeof e?Math.min(Math.max(e,t),r):(e.forEach((n,i)=>{e[i]=Math.min(Math.max(n,t),r)}),e)}};gw.shared=new gw,gw.temp=new gw,gw.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let yw=gw;function vw(e){return Fb("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),yw.shared.setValue(e).toHex()}function _w(e){return Fb("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),yw.shared.setValue(e).toNumber()}const bw=function(){const e=[],t=[];for(let n=0;n<32;n++)e[n]=n,t[n]=n;e[Qp.NORMAL_NPM]=Qp.NORMAL,e[Qp.ADD_NPM]=Qp.ADD,e[Qp.SCREEN_NPM]=Qp.SCREEN,t[Qp.NORMAL]=Qp.NORMAL_NPM,t[Qp.ADD]=Qp.ADD_NPM,t[Qp.SCREEN]=Qp.SCREEN_NPM;const r=[];return r.push(t),r.push(e),r}();function ww(e,t){return bw[t?1:0][e]}const xw=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function Ew(e,t=null){const r=6*e;if((t=t||new Uint16Array(r)).length!==r)throw new Error(`Out buffer length is incorrect, got ${t.length} and expected ${r}`);for(let n=0,i=0;n<r;n+=6,i+=4)t[n+0]=i+0,t[n+1]=i+1,t[n+2]=i+2,t[n+3]=i+0,t[n+4]=i+2,t[n+5]=i+3;return t}function Sw(e){if(4===e.BYTES_PER_ELEMENT)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===e.BYTES_PER_ELEMENT){if(e instanceof Uint16Array)return"Uint16Array"}else if(1===e.BYTES_PER_ELEMENT&&e instanceof Uint8Array)return"Uint8Array";return null}const Cw={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};function Aw(e){return e+=0===e?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,1+(e|=e>>>16)}function Tw(e){return!(e&e-1||!e)}function Dw(e){let t=(e>65535?1:0)<<4,r=((e>>>=t)>255?1:0)<<3;return t|=r,r=((e>>>=r)>15?1:0)<<2,t|=r,r=((e>>>=r)>3?1:0)<<1,t|=r,t|(e>>>=r)>>1}function kw(e,t,r){const n=e.length;let i;if(t>=n||0===r)return;const s=n-(r=t+r>n?n-t:r);for(i=t;i<s;++i)e[i]=e[i+r];e.length=s}function Pw(e){return 0===e?0:e<0?-1:1}let Bw=0;function Ow(){return++Bw}const Rw=class{constructor(e,t,r,n){this.left=e,this.top=t,this.right=r,this.bottom=n}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};Rw.EMPTY=new Rw(0,0,0,0);let Fw=Rw;const Iw={},Mw=Object.create(null),Nw=Object.create(null);class Lw{constructor(e,t,r){this._canvas=ym.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=r||ym.RESOLUTION,this.resize(e,t)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,t){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(t*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(null===this._canvas)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function Uw(e,t,r){for(let n=0,i=4*r*t;n<t;++n,i+=4)if(0!==e[i+3])return!1;return!0}function jw(e,t,r,n,i){const s=4*t;for(let o=n,a=n*s+4*r;o<=i;++o,a+=s)if(0!==e[a+3])return!1;return!0}function zw(e){const{width:t,height:r}=e,n=e.getContext("2d",{willReadFrequently:!0});if(null===n)throw new TypeError("Failed to get canvas 2D context");const i=n.getImageData(0,0,t,r).data;let s=0,o=0,a=t-1,l=r-1;for(;o<r&&Uw(i,t,o);)++o;if(o===r)return Fw.EMPTY;for(;Uw(i,t,l);)--l;for(;jw(i,t,s,o,l);)++s;for(;jw(i,t,a,o,l);)--a;return++a,++l,new Fw(s,o,a,l)}function Vw(e){const t=zw(e),{width:r,height:n}=t;let i=null;if(!t.isEmpty()){const s=e.getContext("2d");if(null===s)throw new TypeError("Failed to get canvas 2D context");i=s.getImageData(t.left,t.top,r,n)}return{width:r,height:n,data:i}}function Gw(e,t=globalThis.location){if(e.startsWith("data:"))return"";t=t||globalThis.location;const r=new URL(e,document.baseURI);return r.hostname!==t.hostname||r.port!==t.port||r.protocol!==t.protocol?"anonymous":""}function Hw(e,t=1){const r=ym.RETINA_PREFIX?.exec(e);return r?parseFloat(r[1]):t}const $w=Object.freeze(Object.defineProperty({__proto__:null,BaseTextureCache:Nw,BoundingBox:Fw,CanvasRenderTarget:Lw,DATA_URI:xw,EventEmitter:Nm,ProgramCache:Iw,TextureCache:Mw,clearTextureCache:function(){let e;for(e in Mw)delete Mw[e];for(e in Nw)delete Nw[e]},correctBlendMode:ww,createIndicesForQuads:Ew,decomposeDataUri:function(e){const t=xw.exec(e);if(t)return{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,charset:t[3]?t[3].toLowerCase():void 0,encoding:t[4]?t[4].toLowerCase():void 0,data:t[5]}},deprecation:Fb,destroyTextureCache:function(){let e;for(e in Mw)Mw[e].destroy();for(e in Nw)Nw[e].destroy()},detectVideoAlphaMode:zb,determineCrossOrigin:Gw,earcut:dg,getBufferType:Sw,getCanvasBoundingBox:zw,getResolutionOfUrl:Hw,hex2rgb:function(e,t=[]){return Fb("7.2.0","utils.hex2rgb is deprecated, use Color#toRgbArray instead"),yw.shared.setValue(e).toRgbArray(t)},hex2string:vw,interleaveTypedArrays:function(e,t){let r=0,n=0;const i={};for(let l=0;l<e.length;l++)n+=t[l],r+=e[l].length;const s=new ArrayBuffer(4*r);let o=null,a=0;for(let l=0;l<e.length;l++){const r=t[l],u=e[l],c=Sw(u);i[c]||(i[c]=new Cw[c](s)),o=i[c];for(let e=0;e<u.length;e++)o[(e/r|0)*n+a+e%r]=u[e];a+=r}return new Float32Array(s)},isMobile:Im,isPow2:Tw,isWebGLSupported:Vb,log2:Dw,nextPow2:Aw,path:Lb,premultiplyBlendMode:bw,premultiplyRgba:function(e,t,r,n=!0){return Fb("7.2.0","utils.premultiplyRgba has moved to Color.premultiply"),yw.shared.setValue(e).premultiply(t,n).toArray(r??new Float32Array(4))},premultiplyTint:function(e,t){return Fb("7.2.0","utils.premultiplyTint has moved to Color.toPremultiplied"),yw.shared.setValue(e).toPremultiplied(t)},premultiplyTintToRgba:function(e,t,r,n=!0){return Fb("7.2.0","utils.premultiplyTintToRgba has moved to Color.premultiply"),yw.shared.setValue(e).premultiply(t,n).toArray(r??new Float32Array(4))},removeItems:kw,rgb2hex:_w,sayHello:function(){Fb("7.0.0",'sayHello is deprecated, please use Renderer\'s "hello" option')},sign:Pw,skipHello:function(){Fb("7.0.0","skipHello is deprecated, please use settings.RENDER_OPTIONS.hello")},string2hex:function(e){return Fb("7.2.0","utils.string2hex is deprecated, use Color#toNumber instead"),yw.shared.setValue(e).toNumber()},trimCanvas:Vw,uid:Ow,url:Ib},Symbol.toStringTag,{value:"Module"}));var Ww=e("E",(e=>(e.Renderer="renderer",e.Application="application",e.RendererSystem="renderer-webgl-system",e.RendererPlugin="renderer-webgl-plugin",e.CanvasRendererSystem="renderer-canvas-system",e.CanvasRendererPlugin="renderer-canvas-plugin",e.Asset="asset",e.LoadParser="load-parser",e.ResolveParser="resolve-parser",e.CacheParser="cache-parser",e.DetectionParser="detection-parser",e))(Ww||{}));const qw=e=>{if("function"==typeof e||"object"==typeof e&&e.extension){if(!e.extension)throw new Error("Extension class must have an extension object");e={..."object"!=typeof e.extension?{type:e.extension}:e.extension,ref:e}}if("object"!=typeof e)throw new Error("Invalid extension type");return"string"==typeof(e={...e}).type&&(e.type=[e.type]),e},Xw=(e,t)=>qw(e).priority??t,Yw=e("g",{_addHandlers:{},_removeHandlers:{},_queue:{},remove(...e){return e.map(qw).forEach(e=>{e.type.forEach(t=>this._removeHandlers[t]?.(e))}),this},add(...e){return e.map(qw).forEach(e=>{e.type.forEach(t=>{const r=this._addHandlers,n=this._queue;r[t]?r[t]?.(e):(n[t]=n[t]||[],n[t]?.push(e))})}),this},handle(e,t,r){const n=this._addHandlers,i=this._removeHandlers;if(n[e]||i[e])throw new Error(`Extension type ${e} already has a handler`);n[e]=t,i[e]=r;const s=this._queue;return s[e]&&(s[e]?.forEach(e=>t(e)),delete s[e]),this},handleByMap(e,t){return this.handle(e,e=>{e.name&&(t[e.name]=e.ref)},e=>{e.name&&delete t[e.name]})},handleByList(e,t,r=-1){return this.handle(e,e=>{t.includes(e.ref)||(t.push(e.ref),t.sort((e,t)=>Xw(t,r)-Xw(e,r)))},e=>{const r=t.indexOf(e.ref);-1!==r&&t.splice(r,1)})}});class Kw{constructor(e){"number"==typeof e?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const Zw=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Jw(e){let t="";for(let r=0;r<e;++r)r>0&&(t+="\nelse "),r<e-1&&(t+=`if(test == ${r}.0){}`);return t}function Qw(e,t){if(0===e)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const r=t.createShader(t.FRAGMENT_SHADER);for(;;){const n=Zw.replace(/%forloop%/gi,Jw(e));if(t.shaderSource(r,n),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS))break;e=e/2|0}return e}class ex{constructor(){this.data=0,this.blendMode=Qp.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(1&this.data)}set blend(e){!!(1&this.data)!==e&&(this.data^=1)}get offsets(){return!!(2&this.data)}set offsets(e){!!(2&this.data)!==e&&(this.data^=2)}get culling(){return!!(4&this.data)}set culling(e){!!(4&this.data)!==e&&(this.data^=4)}get depthTest(){return!!(8&this.data)}set depthTest(e){!!(8&this.data)!==e&&(this.data^=8)}get depthMask(){return!!(32&this.data)}set depthMask(e){!!(32&this.data)!==e&&(this.data^=32)}get clockwiseFrontFace(){return!!(16&this.data)}set clockwiseFrontFace(e){!!(16&this.data)!==e&&(this.data^=16)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==Qp.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){const e=new ex;return e.depthTest=!1,e.blend=!0,e}}ex.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const tx=[];function rx(e,t){if(!e)return null;let r="";if("string"==typeof e){const t=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);t&&(r=t[1].toLowerCase())}for(let n=tx.length-1;n>=0;--n){const i=tx[n];if(i.test&&i.test(e,r))return new i(e,t)}throw new Error("Unrecognized source type to auto-detect Resource")}class nx{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,t,r,n,i,s,o,a){if(arguments.length>8)throw new Error("max arguments reached");const{name:l,items:u}=this;this._aliasCount++;for(let c=0,d=u.length;c<d;c++)u[c][l](e,t,r,n,i,s,o,a);return u===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return 0===this.items.length}get name(){return this._name}}Object.defineProperties(nx.prototype,{dispatch:{value:nx.prototype.emit},run:{value:nx.prototype.emit}});class ix{constructor(e=0,t=0){this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new nx("setRealSize"),this.onUpdate=new nx("update"),this.onError=new nx("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,t){(e!==this._width||t!==this._height)&&(this._width=e,this._height=t,this.onResize.emit(e,t))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,t,r){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,t){return!1}}class sx extends ix{constructor(e,t){const{width:r,height:n}=t||{};if(!r||!n)throw new Error("BufferResource width or height invalid");super(r,n),this.data=e,this.unpackAlignment=t.unpackAlignment??4}upload(e,t,r){const n=e.gl;n.pixelStorei(n.UNPACK_ALIGNMENT,this.unpackAlignment),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===lm.UNPACK);const i=t.realWidth,s=t.realHeight;return r.width===i&&r.height===s?n.texSubImage2D(t.target,0,0,0,i,s,t.format,r.type,this.data):(r.width=i,r.height=s,n.texImage2D(t.target,0,r.internalFormat,i,s,0,t.format,r.type,this.data)),!0}dispose(){this.data=null}static test(e){return null===e||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}const ox={scaleMode:sm.NEAREST,alphaMode:lm.NPM},ax=class e extends Nm{constructor(t=null,r=null){super(),r=Object.assign({},e.defaultOptions,r);const{alphaMode:n,mipmap:i,anisotropicLevel:s,scaleMode:o,width:a,height:l,wrapMode:u,format:c,type:d,target:h,resolution:f,resourceOptions:p}=r;t&&!(t instanceof ix)&&((t=rx(t,p)).internal=!0),this.resolution=f||ym.RESOLUTION,this.width=Math.round((a||0)*this.resolution)/this.resolution,this.height=Math.round((l||0)*this.resolution)/this.resolution,this._mipmap=i,this.anisotropicLevel=s,this._wrapMode=u,this._scaleMode=o,this.format=c,this.type=d,this.target=h,this.alphaMode=n,this.uid=Ow(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=a>0&&l>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(t)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,t){let r;return void 0!==e&&e!==this.scaleMode&&(this.scaleMode=e,r=!0),void 0!==t&&t!==this.mipmap&&(this.mipmap=t,r=!0),r&&this.dirtyStyleId++,this}setSize(e,t,r){return r=r||this.resolution,this.setRealSize(e*r,t*r,r)}setRealSize(e,t,r){return this.resolution=r||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=Tw(this.realWidth)&&Tw(this.realHeight)}setResolution(e){const t=this.resolution;return t===e||(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT()),this}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Nw[this.cacheId],delete Mw[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(t,r,n=ym.STRICT_TEXTURE_CACHE){const i="string"==typeof t;let s=null;if(i)s=t;else{if(!t._pixiId){const e=r?.pixiIdPrefix||"pixiid";t._pixiId=`${e}_${Ow()}`}s=t._pixiId}let o=Nw[s];if(i&&n&&!o)throw new Error(`The cacheId "${s}" does not exist in BaseTextureCache.`);return o||(o=new e(t,r),o.cacheId=s,e.addToCache(o,s)),o}static fromBuffer(t,r,n,i){t=t||new Float32Array(r*n*4);const s=new sx(t,{width:r,height:n,...i?.resourceOptions});let o,a;return t instanceof Float32Array?(o=tm.RGBA,a=nm.FLOAT):t instanceof Int32Array?(o=tm.RGBA_INTEGER,a=nm.INT):t instanceof Uint32Array?(o=tm.RGBA_INTEGER,a=nm.UNSIGNED_INT):t instanceof Int16Array?(o=tm.RGBA_INTEGER,a=nm.SHORT):t instanceof Uint16Array?(o=tm.RGBA_INTEGER,a=nm.UNSIGNED_SHORT):t instanceof Int8Array?(o=tm.RGBA,a=nm.BYTE):(o=tm.RGBA,a=nm.UNSIGNED_BYTE),s.internal=!0,new e(s,Object.assign({},ox,{type:a,format:o},i))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),Nw[t]&&Nw[t]!==e&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),Nw[t]=e)}static removeFromCache(e){if("string"==typeof e){const t=Nw[e];if(t){const r=t.textureCacheIds.indexOf(e);return r>-1&&t.textureCacheIds.splice(r,1),delete Nw[e],t}}else if(e?.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)delete Nw[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}};ax.defaultOptions={mipmap:am.POW2,anisotropicLevel:0,scaleMode:sm.LINEAR,wrapMode:om.CLAMP,alphaMode:lm.UNPACK,target:rm.TEXTURE_2D,format:tm.RGBA,type:nm.UNSIGNED_BYTE},ax._globalBatch=0;let lx=ax;class ux{constructor(){this.texArray=null,this.blend=0,this.type=em.TRIANGLES,this.start=0,this.size=0,this.data=null}}let cx=0,dx=class e{constructor(e,t=!0,r=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=t,this.id=cx++,this.disposeRunner=new nx("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?mm.ELEMENT_ARRAY_BUFFER:mm.ARRAY_BUFFER}get index(){return this.type===mm.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new e(t)}};class hx{constructor(e,t=0,r=!1,n=nm.FLOAT,i,s,o,a=1){this.buffer=e,this.size=t,this.normalized=r,this.type=n,this.stride=i,this.start=s,this.instance=o,this.divisor=a}destroy(){this.buffer=null}static from(e,t,r,n,i){return new hx(e,t,r,n,i)}}const fx={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array},px={5126:4,5123:2,5121:1};let mx=0;const gx={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array};class yx{constructor(e=[],t={}){this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=mx++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new nx("disposeGeometry"),this.refCount=0}addAttribute(e,t,r=0,n=!1,i,s,o,a=!1){if(!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof dx||(t instanceof Array&&(t=new Float32Array(t)),t=new dx(t));const l=e.split("|");if(l.length>1){for(let e=0;e<l.length;e++)this.addAttribute(l[e],t,r,n,i);return this}let u=this.buffers.indexOf(t);return-1===u&&(this.buffers.push(t),u=this.buffers.length-1),this.attributes[e]=new hx(u,r,n,i,s,o,a),this.instanced=this.instanced||a,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof dx||(e instanceof Array&&(e=new Uint16Array(e)),e=new dx(e)),e.type=mm.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;const e=[],t=[],r=new dx;let n;for(n in this.attributes){const r=this.attributes[n],i=this.buffers[r.buffer];e.push(i.data),t.push(r.size*px[r.type]/4),r.buffer=0}for(r.data=function(e,t){let r=0,n=0;const i={};for(let l=0;l<e.length;l++)n+=t[l],r+=e[l].length;const s=new ArrayBuffer(4*r);let o=null,a=0;for(let l=0;l<e.length;l++){const r=t[l],u=e[l],c=Sw(u);i[c]||(i[c]=new fx[c](s)),o=i[c];for(let e=0;e<u.length;e++)o[(e/r|0)*n+a+e%r]=u[e];a+=r}return new Float32Array(s)}(e,t),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new yx;for(let t=0;t<this.buffers.length;t++)e.buffers[t]=new dx(this.buffers[t].data.slice(0));for(const t in this.attributes){const r=this.attributes[t];e.attributes[t]=new hx(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=mm.ELEMENT_ARRAY_BUFFER),e}static merge(e){const t=new yx,r=[],n=[],i=[];let s;for(let o=0;o<e.length;o++){s=e[o];for(let e=0;e<s.buffers.length;e++)n[e]=n[e]||0,n[e]+=s.buffers[e].data.length,i[e]=0}for(let o=0;o<s.buffers.length;o++)r[o]=new(gx[Sw(s.buffers[o].data)])(n[o]),t.buffers[o]=new dx(r[o]);for(let o=0;o<e.length;o++){s=e[o];for(let e=0;e<s.buffers.length;e++)r[e].set(s.buffers[e].data,i[e]),i[e]+=s.buffers[e].data.length}if(t.attributes=s.attributes,s.indexBuffer){t.indexBuffer=t.buffers[s.buffers.indexOf(s.indexBuffer)],t.indexBuffer.type=mm.ELEMENT_ARRAY_BUFFER;let r=0,n=0,i=0,o=0;for(let e=0;e<s.buffers.length;e++)if(s.buffers[e]!==s.indexBuffer){o=e;break}for(const e in s.attributes){const t=s.attributes[e];(0|t.buffer)===o&&(n+=t.size*px[t.type]/4)}for(let s=0;s<e.length;s++){const a=e[s].indexBuffer.data;for(let e=0;e<a.length;e++)t.indexBuffer.data[e+i]+=r;r+=e[s].buffers[o].data.length/n,i+=a.length}}return t}}class vx extends yx{constructor(e=!1){super(),this._buffer=new dx(null,e,!1),this._indexBuffer=new dx(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,nm.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,nm.FLOAT).addAttribute("aColor",this._buffer,4,!0,nm.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,nm.FLOAT).addIndex(this._indexBuffer)}}const _x=2*Math.PI,bx=180/Math.PI,wx=Math.PI/180;var xx=(e=>(e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC",e))(xx||{});let Ex=class e{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new e(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}};Ex.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const Sx=[new Ex,new Ex,new Ex,new Ex];class Cx{constructor(e=0,t=0,r=0,n=0){this.x=Number(e),this.y=Number(t),this.width=Number(r),this.height=Number(n),this.type=xx.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Cx(0,0,0,0)}clone(){return new Cx(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,t){return!(this.width<=0||this.height<=0)&&e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}intersects(e,t){if(!t){const t=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=t)return!1;const r=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>r}const r=this.left,n=this.right,i=this.top,s=this.bottom;if(n<=r||s<=i)return!1;const o=Sx[0].set(e.left,e.top),a=Sx[1].set(e.left,e.bottom),l=Sx[2].set(e.right,e.top),u=Sx[3].set(e.right,e.bottom);if(l.x<=o.x||a.y<=o.y)return!1;const c=Math.sign(t.a*t.d-t.b*t.c);if(0===c||(t.apply(o,o),t.apply(a,a),t.apply(l,l),t.apply(u,u),Math.max(o.x,a.x,l.x,u.x)<=r||Math.min(o.x,a.x,l.x,u.x)>=n||Math.max(o.y,a.y,l.y,u.y)<=i||Math.min(o.y,a.y,l.y,u.y)>=s))return!1;const d=c*(a.y-o.y),h=c*(o.x-a.x),f=d*r+h*i,p=d*n+h*i,m=d*r+h*s,g=d*n+h*s;if(Math.max(f,p,m,g)<=d*o.x+h*o.y||Math.min(f,p,m,g)>=d*u.x+h*u.y)return!1;const y=c*(o.y-l.y),v=c*(l.x-o.x),_=y*r+v*i,b=y*n+v*i,w=y*r+v*s,x=y*n+v*s;return!(Math.max(_,b,w,x)<=y*o.x+v*o.y||Math.min(_,b,w,x)>=y*u.x+v*u.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t,this}fit(e){const t=Math.max(this.x,e.x),r=Math.min(this.x+this.width,e.x+e.width),n=Math.max(this.y,e.y),i=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(r-t,0),this.y=n,this.height=Math.max(i-n,0),this}ceil(e=1,t=.001){const r=Math.ceil((this.x+this.width-t)*e)/e,n=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=r-this.x,this.height=n-this.y,this}enlarge(e){const t=Math.min(this.x,e.x),r=Math.max(this.x+this.width,e.x+e.width),n=Math.min(this.y,e.y),i=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=r-t,this.y=n,this.height=i-n,this}}e("R",Cx),Cx.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Ax{constructor(e=0,t=0,r=0){this.x=e,this.y=t,this.radius=r,this.type=xx.CIRC}clone(){return new Ax(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;const r=this.radius*this.radius;let n=this.x-e,i=this.y-t;return n*=n,i*=i,n+i<=r}getBounds(){return new Cx(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}}Ax.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class Tx{constructor(e=0,t=0,r=0,n=0){this.x=e,this.y=t,this.width=r,this.height=n,this.type=xx.ELIP}clone(){return new Tx(this.x,this.y,this.width,this.height)}contains(e,t){if(this.width<=0||this.height<=0)return!1;let r=(e-this.x)/this.width,n=(t-this.y)/this.height;return r*=r,n*=n,r+n<=1}getBounds(){return new Cx(this.x-this.width,this.y-this.height,this.width,this.height)}}Tx.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Dx{constructor(...e){let t=Array.isArray(e[0])?e[0]:e;if("number"!=typeof t[0]){const e=[];for(let r=0,n=t.length;r<n;r++)e.push(t[r].x,t[r].y);t=e}this.points=t,this.type=xx.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),t=new Dx(e);return t.closeStroke=this.closeStroke,t}contains(e,t){let r=!1;const n=this.points.length/2;for(let i=0,s=n-1;i<n;s=i++){const n=this.points[2*i],o=this.points[2*i+1],a=this.points[2*s],l=this.points[2*s+1];o>t!=l>t&&e<(t-o)/(l-o)*(a-n)+n&&(r=!r)}return r}}Dx.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((e,t)=>`${e}, ${t}`,"")}]`};class kx{constructor(e=0,t=0,r=0,n=0,i=20){this.x=e,this.y=t,this.width=r,this.height=n,this.radius=i,this.type=xx.RREC}clone(){return new kx(this.x,this.y,this.width,this.height,this.radius)}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){const r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+r&&t<=this.y+this.height-r||e>=this.x+r&&e<=this.x+this.width-r)return!0;let n=e-(this.x+r),i=t-(this.y+r);const s=r*r;if(n*n+i*i<=s||(n=e-(this.x+this.width-r),n*n+i*i<=s)||(i=t-(this.y+this.height-r),n*n+i*i<=s)||(n=e-(this.x+r),n*n+i*i<=s))return!0}return!1}}kx.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class Px{constructor(e=1,t=0,r=0,n=1,i=0,s=0){this.array=null,this.a=e,this.b=t,this.c=r,this.d=n,this.tx=i,this.ty=s}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,r,n,i,s){return this.a=e,this.b=t,this.c=r,this.d=n,this.tx=i,this.ty=s,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const r=t||this.array;return e?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r}apply(e,t){t=t||new Ex;const r=e.x,n=e.y;return t.x=this.a*r+this.c*n+this.tx,t.y=this.b*r+this.d*n+this.ty,t}applyInverse(e,t){t=t||new Ex;const r=1/(this.a*this.d+this.c*-this.b),n=e.x,i=e.y;return t.x=this.d*r*n+-this.c*r*i+(this.ty*this.c-this.tx*this.d)*r,t.y=this.a*r*i+-this.b*r*n+(-this.ty*this.a+this.tx*this.b)*r,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),r=Math.sin(e),n=this.a,i=this.c,s=this.tx;return this.a=n*t-this.b*r,this.b=n*r+this.b*t,this.c=i*t-this.d*r,this.d=i*r+this.d*t,this.tx=s*t-this.ty*r,this.ty=s*r+this.ty*t,this}append(e){const t=this.a,r=this.b,n=this.c,i=this.d;return this.a=e.a*t+e.b*n,this.b=e.a*r+e.b*i,this.c=e.c*t+e.d*n,this.d=e.c*r+e.d*i,this.tx=e.tx*t+e.ty*n+this.tx,this.ty=e.tx*r+e.ty*i+this.ty,this}setTransform(e,t,r,n,i,s,o,a,l){return this.a=Math.cos(o+l)*i,this.b=Math.sin(o+l)*i,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=e-(r*this.a+n*this.c),this.ty=t-(r*this.b+n*this.d),this}prepend(e){const t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){const t=this.a,r=this.c;this.a=t*e.a+this.b*e.c,this.b=t*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,r=this.b,n=this.c,i=this.d,s=e.pivot,o=-Math.atan2(-n,i),a=Math.atan2(r,t),l=Math.abs(o+a);return l<1e-5||Math.abs(_x-l)<1e-5?(e.rotation=a,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=o,e.skew.y=a),e.scale.x=Math.sqrt(t*t+r*r),e.scale.y=Math.sqrt(n*n+i*i),e.position.x=this.tx+(s.x*t+s.y*n),e.position.y=this.ty+(s.x*r+s.y*i),e}invert(){const e=this.a,t=this.b,r=this.c,n=this.d,i=this.tx,s=e*n-t*r;return this.a=n/s,this.b=-t/s,this.c=-r/s,this.d=e/s,this.tx=(r*this.ty-n*i)/s,this.ty=-(e*this.ty-t*i)/s,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new Px;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}static get IDENTITY(){return new Px}static get TEMP_MATRIX(){return new Px}}Px.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const Bx=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Ox=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Rx=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Fx=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Ix=[],Mx=[],Nx=Math.sign;!function(){for(let e=0;e<16;e++){const t=[];Ix.push(t);for(let r=0;r<16;r++){const n=Nx(Bx[e]*Bx[r]+Rx[e]*Ox[r]),i=Nx(Ox[e]*Bx[r]+Fx[e]*Ox[r]),s=Nx(Bx[e]*Rx[r]+Rx[e]*Fx[r]),o=Nx(Ox[e]*Rx[r]+Fx[e]*Fx[r]);for(let e=0;e<16;e++)if(Bx[e]===n&&Ox[e]===i&&Rx[e]===s&&Fx[e]===o){t.push(e);break}}}for(let e=0;e<16;e++){const t=new Px;t.set(Bx[e],Ox[e],Rx[e],Fx[e],0,0),Mx.push(t)}}();const Lx={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:e=>Bx[e],uY:e=>Ox[e],vX:e=>Rx[e],vY:e=>Fx[e],inv:e=>8&e?15&e:7&-e,add:(e,t)=>Ix[e][t],sub:(e,t)=>Ix[e][Lx.inv(t)],rotate180:e=>4^e,isVertical:e=>2==(3&e),byDirection:(e,t)=>2*Math.abs(e)<=Math.abs(t)?t>=0?Lx.S:Lx.N:2*Math.abs(t)<=Math.abs(e)?e>0?Lx.E:Lx.W:t>0?e>0?Lx.SE:Lx.SW:e>0?Lx.NE:Lx.NW,matrixAppendRotationInv:(e,t,r=0,n=0)=>{const i=Mx[Lx.inv(t)];i.tx=r,i.ty=n,e.append(i)}};class Ux{constructor(e,t,r=0,n=0){this._x=r,this._y=n,this.cb=e,this.scope=t}clone(e=this.cb,t=this.scope){return new Ux(e,t,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}Ux.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const jx=class{constructor(){this.worldTransform=new Px,this.localTransform=new Px,this.position=new Ux(this.onChange,this,0,0),this.scale=new Ux(this.onChange,this,1,1),this.pivot=new Ux(this.onChange,this,0,0),this.skew=new Ux(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(e){const t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){const r=e.worldTransform,n=this.worldTransform;n.a=t.a*r.a+t.b*r.c,n.b=t.a*r.b+t.b*r.d,n.c=t.c*r.a+t.d*r.c,n.d=t.c*r.b+t.d*r.d,n.tx=t.tx*r.a+t.ty*r.c+r.tx,n.ty=t.tx*r.b+t.ty*r.d+r.ty,this._parentID=e._worldID,this._worldID++}}setFromMatrix(e){e.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())}};jx.IDENTITY=new jx;let zx=jx;function Vx(e,t,r){const n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),n}function Gx(e){const t=new Array(e);for(let r=0;r<t.length;r++)t[r]=!1;return t}function Hx(e,t){switch(e){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return Gx(2*t);case"bvec3":return Gx(3*t);case"bvec4":return Gx(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}zx.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};const $x=[{test:e=>"float"===e.type&&1===e.size&&!e.isArray,code:e=>`\n            if(uv["${e}"] !== ud["${e}"].value)\n            {\n                ud["${e}"].value = uv["${e}"]\n                gl.uniform1f(ud["${e}"].location, uv["${e}"])\n            }\n            `},{test:(e,t)=>!("sampler2D"!==e.type&&"samplerCube"!==e.type&&"sampler2DArray"!==e.type||1!==e.size||e.isArray||null!=t&&void 0===t.castToBaseTexture),code:e=>`t = syncData.textureCount++;\n\n            renderer.texture.bind(uv["${e}"], t);\n\n            if(ud["${e}"].value !== t)\n            {\n                ud["${e}"].value = t;\n                gl.uniform1i(ud["${e}"].location, t);\n; // eslint-disable-line max-len\n            }`},{test:(e,t)=>"mat3"===e.type&&1===e.size&&!e.isArray&&void 0!==t.a,code:e=>`\n            gl.uniformMatrix3fv(ud["${e}"].location, false, uv["${e}"].toArray(true));\n            `,codeUbo:e=>`\n                var ${e}_matrix = uv.${e}.toArray(true);\n\n                data[offset] = ${e}_matrix[0];\n                data[offset+1] = ${e}_matrix[1];\n                data[offset+2] = ${e}_matrix[2];\n        \n                data[offset + 4] = ${e}_matrix[3];\n                data[offset + 5] = ${e}_matrix[4];\n                data[offset + 6] = ${e}_matrix[5];\n        \n                data[offset + 8] = ${e}_matrix[6];\n                data[offset + 9] = ${e}_matrix[7];\n                data[offset + 10] = ${e}_matrix[8];\n            `},{test:(e,t)=>"vec2"===e.type&&1===e.size&&!e.isArray&&void 0!==t.x,code:e=>`\n                cv = ud["${e}"].value;\n                v = uv["${e}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["${e}"].location, v.x, v.y);\n                }`,codeUbo:e=>`\n                v = uv.${e};\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            `},{test:e=>"vec2"===e.type&&1===e.size&&!e.isArray,code:e=>`\n                cv = ud["${e}"].value;\n                v = uv["${e}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["${e}"].location, v[0], v[1]);\n                }\n            `},{test:(e,t)=>"vec4"===e.type&&1===e.size&&!e.isArray&&void 0!==t.width,code:e=>`\n                cv = ud["${e}"].value;\n                v = uv["${e}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["${e}"].location, v.x, v.y, v.width, v.height)\n                }`,codeUbo:e=>`\n                    v = uv.${e};\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                `},{test:(e,t)=>"vec4"===e.type&&1===e.size&&!e.isArray&&void 0!==t.red,code:e=>`\n                cv = ud["${e}"].value;\n                v = uv["${e}"];\n\n                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)\n                {\n                    cv[0] = v.red;\n                    cv[1] = v.green;\n                    cv[2] = v.blue;\n                    cv[3] = v.alpha;\n                    gl.uniform4f(ud["${e}"].location, v.red, v.green, v.blue, v.alpha)\n                }`,codeUbo:e=>`\n                    v = uv.${e};\n\n                    data[offset] = v.red;\n                    data[offset+1] = v.green;\n                    data[offset+2] = v.blue;\n                    data[offset+3] = v.alpha;\n                `},{test:(e,t)=>"vec3"===e.type&&1===e.size&&!e.isArray&&void 0!==t.red,code:e=>`\n                cv = ud["${e}"].value;\n                v = uv["${e}"];\n\n                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)\n                {\n                    cv[0] = v.red;\n                    cv[1] = v.green;\n                    cv[2] = v.blue;\n    \n                    gl.uniform3f(ud["${e}"].location, v.red, v.green, v.blue)\n                }`,codeUbo:e=>`\n                    v = uv.${e};\n\n                    data[offset] = v.red;\n                    data[offset+1] = v.green;\n                    data[offset+2] = v.blue;\n                `},{test:e=>"vec4"===e.type&&1===e.size&&!e.isArray,code:e=>`\n                cv = ud["${e}"].value;\n                v = uv["${e}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["${e}"].location, v[0], v[1], v[2], v[3])\n                }`}],Wx={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",samplerCube:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",sampler2DArray:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }"},qx={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},Xx={};let Yx,Kx=Xx;function Zx(){if(Kx===Xx||Kx?.isContextLost()){const e=ym.ADAPTER.createCanvas();let t;ym.PREFER_ENV>=Kp.WEBGL2&&(t=e.getContext("webgl2",{})),t||(t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),Kx=t}return Kx}function Jx(e,t){const r=e.getShaderSource(t).split("\n").map((e,t)=>`${t}: ${e}`),n=e.getShaderInfoLog(t),i=n.split("\n"),s={},o=i.map(e=>parseFloat(e.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(e=>!(!e||s[e]||(s[e]=!0,0))),a=[""];o.forEach(e=>{r[e-1]=`%c${r[e-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=r.join("\n");a[0]=l,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}const Qx={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function eE(e){return Qx[e]}let tE=null;const rE={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function nE(e,t){if(!tE){const t=Object.keys(rE);tE={};for(let r=0;r<t.length;++r){const n=t[r];tE[e[n]]=rE[n]}}return tE[t]}function iE(e,t,r){if("precision"!==e.substring(0,9)){let n=t;return t===dm.HIGH&&r!==dm.HIGH&&(n=dm.MEDIUM),`precision ${n} float;\n${e}`}return r!==dm.HIGH&&"precision highp"===e.substring(0,15)?e.replace("precision highp","precision mediump"):e}let sE;function oE(){if("boolean"==typeof sE)return sE;try{sE=!0===new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")}catch{sE=!1}return sE}let aE=0;const lE={},uE=class e{constructor(t,r,n="pixi-shader",i={}){this.extra={},this.id=aE++,this.vertexSrc=t||e.defaultVertexSrc,this.fragmentSrc=r||e.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=i,"#version"!==this.vertexSrc.substring(0,8)&&(n=n.replace(/\s+/g,"-"),lE[n]?(lE[n]++,n+=`-${lE[n]}`):lE[n]=1,this.vertexSrc=`#define SHADER_NAME ${n}\n${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${n}\n${this.fragmentSrc}`,this.vertexSrc=iE(this.vertexSrc,e.defaultVertexPrecision,dm.HIGH),this.fragmentSrc=iE(this.fragmentSrc,e.defaultFragmentPrecision,function(){if(!Yx){Yx=dm.MEDIUM;const e=Zx();if(e&&e.getShaderPrecisionFormat){const t=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);t&&(Yx=t.precision?dm.HIGH:dm.MEDIUM)}}return Yx}())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"}static get defaultFragmentSrc(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"}static from(t,r,n){const i=t+r;let s=Iw[i];return s||(Iw[i]=s=new e(t,r,n)),s}};uE.defaultVertexPrecision=dm.HIGH,uE.defaultFragmentPrecision=Im.apple.device?dm.HIGH:dm.MEDIUM;let cE=uE,dE=0;class hE{constructor(e,t,r){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=dE++,this.static=!!t,this.ubo=!!r,e instanceof dx?(this.buffer=e,this.buffer.type=mm.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new dx(new Float32Array(1)),this.buffer.type=mm.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,t,r){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[e]=new hE(t,r)}static from(e,t,r){return new hE(e,t,r)}static uboFrom(e,t){return new hE(e,t??!0,!0)}}class fE{constructor(e,t){this.uniformBindCount=0,this.program=e,this.uniformGroup=t?t instanceof hE?t:new hE(t):new hE({}),this.disposeRunner=new nx("disposeShader")}checkUniformExists(e,t){if(t.uniforms[e])return!0;for(const r in t.uniforms){const n=t.uniforms[r];if(!0===n.group&&this.checkUniformExists(e,n))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,t,r){const n=cE.from(e,t);return new fE(n,r)}}class pE{constructor(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},!t.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!t.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const t=new Int32Array(e);for(let n=0;n<e;n++)t[n]=n;this.defaultGroupCache[e]=hE.from({uSamplers:t},!0);let r=this.fragTemplate;r=r.replace(/%count%/gi,`${e}`),r=r.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new cE(this.vertexSrc,r)}const t={tint:new Float32Array([1,1,1,1]),translationMatrix:new Px,default:this.defaultGroupCache[e]};return new fE(this.programCache[e],t)}generateSampleSrc(e){let t="";t+="\n",t+="\n";for(let r=0;r<e;r++)r>0&&(t+="\nelse "),r<e-1&&(t+=`if(vTextureId < ${r}.5)`),t+="\n{",t+=`\n\tcolor = texture2D(uSamplers[${r}], vTextureCoord);`,t+="\n}";return t+="\n",t+="\n",t}}class mE{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}class gE{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}const yE=class e extends gE{constructor(t){super(t),this.setShaderGenerator(),this.geometryClass=vx,this.vertexSize=6,this.state=ex.for2d(),this.size=4*e.defaultBatchSize,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??function(e){let t=!0;const r=ym.ADAPTER.getNavigator();if(Im.tablet||Im.phone){if(Im.apple.device){const e=r.userAgent.match(/OS (\d+)_(\d+)?/);e&&parseInt(e[1],10)<11&&(t=!1)}if(Im.android.device){const e=r.userAgent.match(/Android\s([0-9.]*)/);e&&parseInt(e[1],10)<7&&(t=!1)}}return t?e:4}(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??!Im.apple.device,this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return Fb("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n"}static get defaultFragmentTemplate(){return"varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n"}setShaderGenerator({vertex:t=e.defaultVertexSrc,fragment:r=e.defaultFragmentTemplate}={}){this.shaderGenerator=new pE(t,r)}contextChange(){const t=this.renderer.gl;ym.PREFER_ENV===Kp.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),e.defaultMaxTextures),this.maxTextures=Qw(this.maxTextures,t)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:t,_textureArrayPool:r}=e,n=this.size/4,i=Math.floor(n/this.maxTextures)+1;for(;t.length<n;)t.push(new ux);for(;r.length<i;)r.push(new mE);for(let e=0;e<this.maxTextures;e++)this._tempBoundTextures[e]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:t,maxTextures:r}=this,n=e._textureArrayPool,i=this.renderer.batch,s=this._tempBoundTextures,o=this.renderer.textureGC.count;let a=++lx._globalBatch,l=0,u=n[0],c=0;i.copyBoundTextures(s,r);for(let e=0;e<this._bufferSize;++e){const d=t[e];t[e]=null,d._batchEnabled!==a&&(u.count>=r&&(i.boundArray(u,s,a,r),this.buildDrawCalls(u,c,e),c=e,u=n[++l],++a),d._batchEnabled=a,d.touched=o,u.elements[u.count++]=d)}u.count>0&&(i.boundArray(u,s,a,r),this.buildDrawCalls(u,c,this._bufferSize),++l,++a);for(let e=0;e<s.length;e++)s[e]=null;lx._globalBatch=a}buildDrawCalls(t,r,n){const{_bufferedElements:i,_attributeBuffer:s,_indexBuffer:o,vertexSize:a}=this,l=e._drawCallPool;let u=this._dcIndex,c=this._aIndex,d=this._iIndex,h=l[u];h.start=this._iIndex,h.texArray=t;for(let e=r;e<n;++e){const n=i[e],f=n._texture.baseTexture,p=bw[f.alphaMode?1:0][n.blendMode];i[e]=null,r<e&&h.blend!==p&&(h.size=d-h.start,r=e,h=l[++u],h.texArray=t,h.start=d),this.packInterleavedGeometry(n,s,o,c,d),c+=n.vertexData.length/2*a,d+=n.indices.length,h.blend=p}r<n&&(h.size=d-h.start,++u),this._dcIndex=u,this._aIndex=c,this._iIndex=d}bindAndClearTexArray(e){const t=this.renderer.texture;for(let r=0;r<e.count;r++)t.bind(e.elements[r],e.ids[r]),e.elements[r]=null;e.count=0}updateGeometry(){const{_packedGeometries:t,_attributeBuffer:r,_indexBuffer:n}=this;e.canUploadSameBuffer?(t[this._flushId]._buffer.update(r.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(r.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const t=this._dcIndex,{gl:r,state:n}=this.renderer,i=e._drawCallPool;let s=null;for(let e=0;e<t;e++){const{texArray:t,type:o,size:a,start:l,blend:u}=i[e];s!==t&&(s=t,this.bindAndClearTexArray(t)),this.state.blendMode=u,n.set(this.state),r.drawElements(o,a,r.UNSIGNED_SHORT,2*l)}}flush(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),e.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const t=Aw(Math.ceil(e/8)),r=Dw(t),n=8*t;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);let i=this._aBuffers[n];return i||(this._aBuffers[n]=i=new Kw(n*this.vertexSize*4)),i}getIndexBuffer(e){const t=Aw(Math.ceil(e/12)),r=Dw(t),n=12*t;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);let i=this._iBuffers[r];return i||(this._iBuffers[r]=i=new Uint16Array(n)),i}packInterleavedGeometry(e,t,r,n,i){const{uint32View:s,float32View:o}=t,a=n/this.vertexSize,l=e.uvs,u=e.indices,c=e.vertexData,d=e._texture.baseTexture._batchLocation,h=Math.min(e.worldAlpha,1),f=yw.shared.setValue(e._tintRGB).toPremultiplied(h,e._texture.baseTexture.alphaMode>0);for(let p=0;p<c.length;p+=2)o[n++]=c[p],o[n++]=c[p+1],o[n++]=l[p],o[n++]=l[p+1],s[n++]=f,o[n++]=d;for(let p=0;p<u.length;p++)r[i++]=a+u[p]}};yE.defaultBatchSize=4096,yE.extension={name:"batch",type:Ww.RendererPlugin},yE._drawCallPool=[],yE._textureArrayPool=[];let vE=yE;Yw.add(vE);const _E=class e extends fE{constructor(t,r,n){super(cE.from(t||e.defaultVertexSrc,r||e.defaultFragmentSrc),n),this.padding=0,this.resolution=e.defaultResolution,this.multisample=e.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new ex}apply(e,t,r,n,i){e.applyFilter(this,t,r,n)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"}static get defaultFragmentSrc(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"}};_E.defaultResolution=1,_E.defaultMultisample=pm.NONE;let bE=_E;class wE{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new yw(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:t,background:r,backgroundAlpha:n}=e,i=r??t;void 0!==i&&(this.color=i),this.alpha=n}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}wE.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},wE.extension={type:[Ww.RendererSystem,Ww.CanvasRendererSystem],name:"background"},Yw.add(wE);class xE{constructor(e){this.renderer=e,this.emptyRenderer=new gE(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,t){const{boundTextures:r}=this.renderer.texture;for(let n=t-1;n>=0;--n)e[n]=r[n]||null,e[n]&&(e[n]._batchLocation=n)}boundArray(e,t,r,n){const{elements:i,ids:s,count:o}=e;let a=0;for(let l=0;l<o;l++){const e=i[l],o=e._batchLocation;if(o>=0&&o<n&&t[o]===e)s[l]=o;else for(;a<n;){const n=t[a];if(!n||n._batchEnabled!==r||n._batchLocation!==a){s[l]=a,e._batchLocation=a,t[a]=e;break}a++}}}destroy(){this.renderer=null}}xE.extension={type:Ww.RendererSystem,name:"batch"},Yw.add(xE);let EE=0;class SE{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=EE++}init(e){if(e.context)this.initFromContext(e.context);else{const t=this.renderer.background.alpha<1,r=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:t,premultipliedAlpha:r,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=EE++,this.renderer.runners.contextChange.emit(e);const t=this.renderer.view;void 0!==t.addEventListener&&(t.addEventListener("webglcontextlost",this.handleContextLost,!1),t.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const t=this.createContext(this.renderer.view,e);this.initFromContext(t)}createContext(e,t){let r;if(ym.PREFER_ENV>=Kp.WEBGL2&&(r=e.getContext("webgl2",t)),r)this.webGLVersion=2;else if(this.webGLVersion=1,r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),!r)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,t={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc")};1===this.webGLVersion?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,void 0!==e.removeEventListener&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const t=e.getContextAttributes(),r="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;r&&(this.webGLVersion=2),t&&!t.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const n=r||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}SE.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},SE.extension={type:Ww.RendererSystem,name:"context"},Yw.add(SE);class CE{constructor(e,t){if(this.width=Math.round(e),this.height=Math.round(t),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new nx("disposeFramebuffer"),this.multisample=pm.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,t){return this.colorTextures[e]=t||new lx(null,{scaleMode:sm.NEAREST,resolution:1,mipmap:am.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new lx(null,{scaleMode:sm.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:am.OFF,format:tm.DEPTH_COMPONENT,type:nm.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,t){if(e=Math.round(e),t=Math.round(t),!e||!t)throw new Error("Framebuffer width and height must not be zero");if(e!==this.width||t!==this.height){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(let r=0;r<this.colorTextures.length;r++){const n=this.colorTextures[r],i=n.resolution;n.setSize(e/i,t/i)}if(this.depthTexture){const r=this.depthTexture.resolution;this.depthTexture.setSize(e/r,t/r)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class AE extends lx{constructor(e={}){"number"==typeof e&&(e={width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),e.width=e.width??100,e.height=e.height??100,e.multisample??(e.multisample=pm.NONE),super(null,e),this.mipmap=am.OFF,this.valid=!0,this._clear=new yw([0,0,0,0]),this.framebuffer=new CE(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t){this.framebuffer.resize(e*this.resolution,t*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class TE extends ix{constructor(e){const t=e;super(t.naturalWidth||t.videoWidth||t.displayWidth||t.width,t.naturalHeight||t.videoHeight||t.displayHeight||t.height),this.source=e,this.noSubImage=!1}static crossOrigin(e,t,r){void 0!==r||t.startsWith("data:")?!1!==r&&(e.crossOrigin="string"==typeof r?r:"anonymous"):e.crossOrigin=Gw(t)}upload(e,t,r,n){const i=e.gl,s=t.realWidth,o=t.realHeight;if(n=n||this.source,typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement){if(!n.complete||0===n.naturalWidth)return!1}else if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement&&n.readyState<=1)return!1;return i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===lm.UNPACK),this.noSubImage||t.target!==i.TEXTURE_2D||r.width!==s||r.height!==o?(r.width=s,r.height=o,i.texImage2D(t.target,0,r.internalFormat,t.format,r.type,n)):i.texSubImage2D(i.TEXTURE_2D,0,0,0,t.format,r.type,n),!0}update(){if(this.destroyed)return;const e=this.source,t=e.naturalWidth||e.videoWidth||e.width,r=e.naturalHeight||e.videoHeight||e.height;this.resize(t,r),super.update()}dispose(){this.source=null}}class DE extends TE{constructor(e,t){if(t=t||{},"string"==typeof e){const r=new Image;TE.crossOrigin(r,e,t.crossorigin),r.src=e,e=r}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(t.createBitmap??ym.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode="number"==typeof t.alphaMode?t.alphaMode:null,this.bitmap=null,this._load=null,!1!==t.autoLoad&&this.load()}load(e){return this._load||(void 0!==e&&(this.createBitmap=e),this._load=new Promise((e,t)=>{const r=this.source;this.url=r.src;const n=()=>{this.destroyed||(r.onload=null,r.onerror=null,this.update(),this._load=null,this.createBitmap?e(this.process()):e(this))};r.complete&&r.src?n():(r.onload=n,r.onerror=e=>{t(e),this.onError.emit(e)})})),this._load}process(){const e=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);const t=globalThis.createImageBitmap,r=!e.crossOrigin||"anonymous"===e.crossOrigin;return this._process=fetch(e.src,{mode:r?"cors":"no-cors"}).then(e=>e.blob()).then(r=>t(r,0,0,e.width,e.height,{premultiplyAlpha:null===this.alphaMode||this.alphaMode===lm.UNPACK?"premultiply":"none"})).then(e=>this.destroyed?Promise.reject():(this.bitmap=e,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,t,r){if("number"==typeof this.alphaMode&&(t.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,t,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,t,r,this.bitmap),!this.preserveBitmap){let e=!0;const n=t._glTextures;for(const i in n){const s=n[i];if(s!==r&&s.dirtyId!==t.dirtyId){e=!1;break}}e&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&("string"==typeof e||e instanceof HTMLImageElement)}}class kE{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,t,r){const n=t.width,i=t.height;if(r){const t=e.width/2/n,s=e.height/2/i,o=e.x/n+t,a=e.y/i+s;r=Lx.add(r,Lx.NW),this.x0=o+t*Lx.uX(r),this.y0=a+s*Lx.uY(r),r=Lx.add(r,2),this.x1=o+t*Lx.uX(r),this.y1=a+s*Lx.uY(r),r=Lx.add(r,2),this.x2=o+t*Lx.uX(r),this.y2=a+s*Lx.uY(r),r=Lx.add(r,2),this.x3=o+t*Lx.uX(r),this.y3=a+s*Lx.uY(r)}else this.x0=e.x/n,this.y0=e.y/i,this.x1=(e.x+e.width)/n,this.y1=e.y/i,this.x2=(e.x+e.width)/n,this.y2=(e.y+e.height)/i,this.x3=e.x/n,this.y3=(e.y+e.height)/i;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}kE.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const PE=new kE;function BE(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}class OE extends Nm{constructor(e,t,r,n,i,s,o){if(super(),this.noFrame=!1,t||(this.noFrame=!0,t=new Cx(0,0,1,1)),e instanceof OE&&(e=e.baseTexture),this.baseTexture=e,this._frame=t,this.trim=n,this.valid=!1,this.destroyed=!1,this._uvs=PE,this.uvMatrix=null,this.orig=r||t,this._rotate=Number(i||0),!0===i)this._rotate=2;else if(this._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=s?new Ex(s.x,s.y):new Ex(0,0),this.defaultBorders=o,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=t:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:e}=this.baseTexture;e?.url&&Mw[e.url]&&OE.removeFromCache(e.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,OE.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){const e=this._frame.clone(),t=this._frame===this.orig?e:this.orig.clone(),r=new OE(this.baseTexture,!this.noFrame&&e,t,this.trim?.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(r._frame=e),r}updateUvs(){this._uvs===PE&&(this._uvs=new kE),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,t={},r=ym.STRICT_TEXTURE_CACHE){const n="string"==typeof e;let i=null;if(n)i=e;else if(e instanceof lx){if(!e.cacheId){const r=t?.pixiIdPrefix||"pixiid";e.cacheId=`${r}-${Ow()}`,lx.addToCache(e,e.cacheId)}i=e.cacheId}else{if(!e._pixiId){const r=t?.pixiIdPrefix||"pixiid";e._pixiId=`${r}_${Ow()}`}i=e._pixiId}let s=Mw[i];if(n&&r&&!s)throw new Error(`The cacheId "${i}" does not exist in TextureCache.`);return s||e instanceof lx?!s&&e instanceof lx&&(s=new OE(e),OE.addToCache(s,i)):(t.resolution||(t.resolution=Hw(e)),s=new OE(new lx(e,t)),s.baseTexture.cacheId=i,lx.addToCache(s.baseTexture,i),OE.addToCache(s,i)),s}static fromURL(e,t){const r=Object.assign({autoLoad:!1},t?.resourceOptions),n=OE.from(e,Object.assign({resourceOptions:r},t),!1),i=n.baseTexture.resource;return n.baseTexture.valid?Promise.resolve(n):i.load().then(()=>Promise.resolve(n))}static fromBuffer(e,t,r,n){return new OE(lx.fromBuffer(e,t,r,n))}static fromLoader(e,t,r,n){const i=new lx(e,Object.assign({scaleMode:lx.defaultOptions.scaleMode,resolution:Hw(t)},n)),{resource:s}=i;s instanceof DE&&(s.url=t);const o=new OE(i);return r||(r=t),lx.addToCache(o.baseTexture,r),OE.addToCache(o,r),r!==t&&(lx.addToCache(o.baseTexture,t),OE.addToCache(o,t)),o.baseTexture.valid?Promise.resolve(o):new Promise(e=>{o.baseTexture.once("loaded",()=>e(o))})}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),Mw[t]&&Mw[t]!==e&&console.warn(`Texture added to the cache with an id [${t}] that already had an entry`),Mw[t]=e)}static removeFromCache(e){if("string"==typeof e){const t=Mw[e];if(t){const r=t.textureCacheIds.indexOf(e);return r>-1&&t.textureCacheIds.splice(r,1),delete Mw[e],t}}else if(e?.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)Mw[e.textureCacheIds[t]]===e&&delete Mw[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:t,y:r,width:n,height:i}=e,s=t+n>this.baseTexture.width,o=r+i>this.baseTexture.height;if(s||o){const e=s&&o?"and":"or",a=`X: ${t} + ${n} = ${t+n} > ${this.baseTexture.width}`,l=`Y: ${r} + ${i} = ${r+i} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${a} ${e} ${l}`)}this.valid=n&&i&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return OE._EMPTY||(OE._EMPTY=new OE(new lx),BE(OE._EMPTY),BE(OE._EMPTY.baseTexture)),OE._EMPTY}static get WHITE(){if(!OE._WHITE){const e=ym.ADAPTER.createCanvas(16,16),t=e.getContext("2d");e.width=16,e.height=16,t.fillStyle="white",t.fillRect(0,0,16,16),OE._WHITE=new OE(lx.from(e)),BE(OE._WHITE),BE(OE._WHITE.baseTexture)}return OE._WHITE}}e("f",OE);class RE extends OE{constructor(e,t){super(e,t),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t,r=!0){const n=this.baseTexture.resolution,i=Math.round(e*n)/n,s=Math.round(t*n)/n;this.valid=i>0&&s>0,this._frame.width=this.orig.width=i,this._frame.height=this.orig.height=s,r&&this.baseTexture.resize(i,s),this.updateUvs()}setResolution(e){const{baseTexture:t}=this;t.resolution!==e&&(t.setResolution(e),this.resize(t.width,t.height,!1))}static create(e){return new RE(new AE(e))}}class FE{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,t,r=pm.NONE){const n=new AE(Object.assign({width:e,height:t,resolution:1,multisample:r},this.textureOptions));return new RE(n)}getOptimalTexture(e,t,r=1,n=pm.NONE){let i;e=Math.max(Math.ceil(e*r-1e-6),1),t=Math.max(Math.ceil(t*r-1e-6),1),this.enableFullScreen&&e===this._pixelsWidth&&t===this._pixelsHeight?i=n>1?-n:-1:(i=((65535&(e=Aw(e)))<<16|65535&(t=Aw(t)))>>>0,n>1&&(i+=4294967296*n)),this.texturePool[i]||(this.texturePool[i]=[]);let s=this.texturePool[i].pop();return s||(s=this.createTexture(e,t,n)),s.filterPoolKey=i,s.setResolution(r),s}getFilterTexture(e,t,r){const n=this.getOptimalTexture(e.width,e.height,t||e.resolution,r||pm.NONE);return n.filterFrame=e.filterFrame,n}returnTexture(e){const t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=!1!==e)for(const t in this.texturePool){const e=this.texturePool[t];if(e)for(let t=0;t<e.length;t++)e[t].destroy(!0)}this.texturePool={}}setScreenSize(e){if(e.width!==this._pixelsWidth||e.height!==this._pixelsHeight){this.enableFullScreen=e.width>0&&e.height>0;for(const e in this.texturePool){if(!(Number(e)<0))continue;const t=this.texturePool[e];if(t)for(let e=0;e<t.length;e++)t[e].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}FE.SCREEN_KEY=-1;class IE extends yx{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class ME extends yx{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new dx(this.vertices),this.uvBuffer=new dx(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,t){let r=0,n=0;return this.uvs[0]=r,this.uvs[1]=n,this.uvs[2]=r+t.width/e.width,this.uvs[3]=n,this.uvs[4]=r+t.width/e.width,this.uvs[5]=n+t.height/e.height,this.uvs[6]=r,this.uvs[7]=n+t.height/e.height,r=t.x,n=t.y,this.vertices[0]=r,this.vertices[1]=n,this.vertices[2]=r+t.width,this.vertices[3]=n,this.vertices[4]=r+t.width,this.vertices[5]=n+t.height,this.vertices[6]=r,this.vertices[7]=n+t.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class NE{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=pm.NONE,this.sourceFrame=new Cx,this.destinationFrame=new Cx,this.bindingSourceFrame=new Cx,this.bindingDestinationFrame=new Cx,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const LE=[new Ex,new Ex,new Ex,new Ex],UE=new Px;class jE{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new FE,this.statePool=[],this.quad=new IE,this.quadUv=new ME,this.tempRect=new Cx,this.activeState={},this.globalUniforms=new hE({outputFrame:new Cx,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,t){const r=this.renderer,n=this.defaultFilterStack,i=this.statePool.pop()||new NE,s=r.renderTexture;let o,a;if(s.current){const e=s.current;o=e.resolution,a=e.multisample}else o=r.resolution,a=r.multisample;let l=t[0].resolution||o,u=t[0].multisample??a,c=t[0].padding,d=t[0].autoFit,h=t[0].legacy??!0;for(let m=1;m<t.length;m++){const e=t[m];l=Math.min(l,e.resolution||o),u=Math.min(u,e.multisample??a),c=this.useMaxPadding?Math.max(c,e.padding):c+e.padding,d=d&&e.autoFit,h=h||(e.legacy??!0)}1===n.length&&(this.defaultFilterStack[0].renderTexture=s.current),n.push(i),i.resolution=l,i.multisample=u,i.legacy=h,i.target=e,i.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),i.sourceFrame.pad(c);const f=this.tempRect.copyFrom(s.sourceFrame);r.projection.transform&&this.transformAABB(UE.copyFrom(r.projection.transform).invert(),f),d?(i.sourceFrame.fit(f),(i.sourceFrame.width<=0||i.sourceFrame.height<=0)&&(i.sourceFrame.width=0,i.sourceFrame.height=0)):i.sourceFrame.intersects(f)||(i.sourceFrame.width=0,i.sourceFrame.height=0),this.roundFrame(i.sourceFrame,s.current?s.current.resolution:r.resolution,s.sourceFrame,s.destinationFrame,r.projection.transform),i.renderTexture=this.getOptimalFilterTexture(i.sourceFrame.width,i.sourceFrame.height,l,u),i.filters=t,i.destinationFrame.width=i.renderTexture.width,i.destinationFrame.height=i.renderTexture.height;const p=this.tempRect;p.x=0,p.y=0,p.width=i.sourceFrame.width,p.height=i.sourceFrame.height,i.renderTexture.filterFrame=i.sourceFrame,i.bindingSourceFrame.copyFrom(s.sourceFrame),i.bindingDestinationFrame.copyFrom(s.destinationFrame),i.transform=r.projection.transform,r.projection.transform=null,s.bind(i.renderTexture,i.sourceFrame,p),r.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,t=e.pop(),r=t.filters;this.activeState=t;const n=this.globalUniforms.uniforms;n.outputFrame=t.sourceFrame,n.resolution=t.resolution;const i=n.inputSize,s=n.inputPixel,o=n.inputClamp;if(i[0]=t.destinationFrame.width,i[1]=t.destinationFrame.height,i[2]=1/i[0],i[3]=1/i[1],s[0]=Math.round(i[0]*t.resolution),s[1]=Math.round(i[1]*t.resolution),s[2]=1/s[0],s[3]=1/s[1],o[0]=.5*s[2],o[1]=.5*s[3],o[2]=t.sourceFrame.width*i[2]-.5*s[2],o[3]=t.sourceFrame.height*i[3]-.5*s[3],t.legacy){const e=n.filterArea;e[0]=t.destinationFrame.width,e[1]=t.destinationFrame.height,e[2]=t.sourceFrame.x,e[3]=t.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();const a=e[e.length-1];if(this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,t.renderTexture,a.renderTexture,um.BLEND,t),this.returnFilterTexture(t.renderTexture);else{let e=t.renderTexture,n=this.getOptimalFilterTexture(e.width,e.height,t.resolution);n.filterFrame=e.filterFrame;let i=0;for(i=0;i<r.length-1;++i){1===i&&t.multisample>1&&(n=this.getOptimalFilterTexture(e.width,e.height,t.resolution),n.filterFrame=e.filterFrame),r[i].apply(this,e,n,um.CLEAR,t);const s=e;e=n,n=s}r[i].apply(this,e,a.renderTexture,um.BLEND,t),i>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(e),this.returnFilterTexture(n)}t.clear(),this.statePool.push(t)}bindAndClear(e,t=um.CLEAR){const{renderTexture:r,state:n}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e?.filterFrame){const t=this.tempRect;t.x=0,t.y=0,t.width=e.filterFrame.width,t.height=e.filterFrame.height,r.bind(e,e.filterFrame,t)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const i=1&n.stateId||this.forceClear;(t===um.CLEAR||t===um.BLIT&&i)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,t,r,n){const i=this.renderer;i.state.set(e.state),this.bindAndClear(r,n),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,i.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),i.geometry.bind(this.quadUv),i.geometry.draw(em.TRIANGLES)):(i.geometry.bind(this.quad),i.geometry.draw(em.TRIANGLE_STRIP))}calculateSpriteMatrix(e,t){const{sourceFrame:r,destinationFrame:n}=this.activeState,{orig:i}=t._texture,s=e.set(n.width,0,0,n.height,r.x,r.y),o=t.worldTransform.copyTo(Px.TEMP_MATRIX);return o.invert(),s.prepend(o),s.scale(1/i.width,1/i.height),s.translate(t.anchor.x,t.anchor.y),s}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,t,r=1,n=pm.NONE){return this.texturePool.getOptimalTexture(e,t,r,n)}getFilterTexture(e,t,r){if("number"==typeof e){const r=e;e=t,t=r}e=e||this.activeState.renderTexture;const n=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution,r||pm.NONE);return n.filterFrame=e.filterFrame,n}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,t){const r=LE[0],n=LE[1],i=LE[2],s=LE[3];r.set(t.left,t.top),n.set(t.left,t.bottom),i.set(t.right,t.top),s.set(t.right,t.bottom),e.apply(r,r),e.apply(n,n),e.apply(i,i),e.apply(s,s);const o=Math.min(r.x,n.x,i.x,s.x),a=Math.min(r.y,n.y,i.y,s.y),l=Math.max(r.x,n.x,i.x,s.x),u=Math.max(r.y,n.y,i.y,s.y);t.x=o,t.y=a,t.width=l-o,t.height=u-a}roundFrame(e,t,r,n,i){if(!(e.width<=0||e.height<=0||r.width<=0||r.height<=0)){if(i){const{a:e,b:t,c:r,d:n}=i;if((Math.abs(t)>1e-4||Math.abs(r)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(n)>1e-4))return}(i=i?UE.copyFrom(i):UE.identity()).translate(-r.x,-r.y).scale(n.width/r.width,n.height/r.height).translate(n.x,n.y),this.transformAABB(i,e),e.ceil(t),this.transformAABB(i.invert(),e)}}}jE.extension={type:Ww.RendererSystem,name:"filter"},Yw.add(jE);class zE{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=pm.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const VE=new Cx;class GE{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new CE(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Cx,this.hasMRT=!0,this.writeDepthTexture=!0,1===this.renderer.context.webGLVersion){let t=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;ym.PREFER_ENV===Kp.WEBGL_LEGACY&&(t=null,r=null),t?e.drawBuffers=e=>t.drawBuffersWEBGL(e):(this.hasMRT=!1,e.drawBuffers=()=>{}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,t,r=0){const{gl:n}=this;if(e){const i=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,n.bindFramebuffer(n.FRAMEBUFFER,i.framebuffer)),i.mipLevel!==r&&(e.dirtyId++,e.dirtyFormat++,i.mipLevel=r),i.dirtyId!==e.dirtyId&&(i.dirtyId=e.dirtyId,i.dirtyFormat!==e.dirtyFormat?(i.dirtyFormat=e.dirtyFormat,i.dirtySize=e.dirtySize,this.updateFramebuffer(e,r)):i.dirtySize!==e.dirtySize&&(i.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let t=0;t<e.colorTextures.length;t++){const r=e.colorTextures[t];this.renderer.texture.unbind(r.parentTextureArray||r)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){const e=t.width>>r,n=t.height>>r,i=e/t.width;this.setViewport(t.x*i,t.y*i,e,n)}else{const t=e.width>>r,n=e.height>>r;this.setViewport(0,0,t,n)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,t,r,n){const i=this.viewport;e=Math.round(e),t=Math.round(t),r=Math.round(r),n=Math.round(n),(i.width!==r||i.height!==n||i.x!==e||i.y!==t)&&(i.x=e,i.y=t,i.width=r,i.height=n,this.gl.viewport(e,t,r,n))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,t,r,n,i=Jp.COLOR|Jp.DEPTH){const{gl:s}=this;s.clearColor(e,t,r,n),s.clear(i)}initFramebuffer(e){const{gl:t}=this,r=new zE(t.createFramebuffer());return r.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(e),e.disposeRunner.add(this),r}resizeFramebuffer(e){const{gl:t}=this,r=e.glFramebuffers[this.CONTEXT_UID];if(r.stencil){let n;t.bindRenderbuffer(t.RENDERBUFFER,r.stencil),n=1===this.renderer.context.webGLVersion?t.DEPTH_STENCIL:e.depth&&e.stencil?t.DEPTH24_STENCIL8:e.depth?t.DEPTH_COMPONENT24:t.STENCIL_INDEX8,r.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,n,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,n,e.width,e.height)}const n=e.colorTextures;let i=n.length;t.drawBuffers||(i=Math.min(i,1));for(let s=0;s<i;s++){const i=n[s],o=i.parentTextureArray||i;this.renderer.texture.bind(o,0),0===s&&r.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,r.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,o._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,t){const{gl:r}=this,n=e.glFramebuffers[this.CONTEXT_UID],i=e.colorTextures;let s=i.length;r.drawBuffers||(s=Math.min(s,1)),n.multisample>1&&this.canMultisampleFramebuffer(e)?n.msaaBuffer=n.msaaBuffer||r.createRenderbuffer():n.msaaBuffer&&(r.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null,n.blitFramebuffer&&(n.blitFramebuffer.dispose(),n.blitFramebuffer=null));const o=[];for(let a=0;a<s;a++){const s=i[a],l=s.parentTextureArray||s;this.renderer.texture.bind(l,0),0===a&&n.msaaBuffer?(r.bindRenderbuffer(r.RENDERBUFFER,n.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,n.msaaBuffer)):(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+a,s.target,l._glTextures[this.CONTEXT_UID].texture,t),o.push(r.COLOR_ATTACHMENT0+a))}if(o.length>1&&r.drawBuffers(o),e.depthTexture&&this.writeDepthTexture){const n=e.depthTexture;this.renderer.texture.bind(n,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,n._glTextures[this.CONTEXT_UID].texture,t)}if(!e.stencil&&!e.depth||e.depthTexture&&this.writeDepthTexture)n.stencil&&(r.deleteRenderbuffer(n.stencil),n.stencil=null);else{let t,i;n.stencil=n.stencil||r.createRenderbuffer(),1===this.renderer.context.webGLVersion?(t=r.DEPTH_STENCIL_ATTACHMENT,i=r.DEPTH_STENCIL):e.depth&&e.stencil?(t=r.DEPTH_STENCIL_ATTACHMENT,i=r.DEPTH24_STENCIL8):e.depth?(t=r.DEPTH_ATTACHMENT,i=r.DEPTH_COMPONENT24):(t=r.STENCIL_ATTACHMENT,i=r.STENCIL_INDEX8),r.bindRenderbuffer(r.RENDERBUFFER,n.stencil),n.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,i,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,i,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,t,r.RENDERBUFFER,n.stencil)}}canMultisampleFramebuffer(e){return 1!==this.renderer.context.webGLVersion&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:t}=this;let r=pm.NONE;if(e<=1||null===t)return r;for(let n=0;n<t.length;n++)if(t[n]<=e){r=t[n];break}return 1===r&&(r=pm.NONE),r}blit(e,t,r){const{current:n,renderer:i,gl:s,CONTEXT_UID:o}=this;if(2!==i.context.webGLVersion||!n)return;const a=n.glFramebuffers[o];if(!a)return;if(!e){if(!a.msaaBuffer)return;const t=n.colorTextures[0];if(!t)return;a.blitFramebuffer||(a.blitFramebuffer=new CE(n.width,n.height),a.blitFramebuffer.addColorTexture(0,t)),(e=a.blitFramebuffer).colorTextures[0]!==t&&(e.colorTextures[0]=t,e.dirtyId++,e.dirtyFormat++),(e.width!==n.width||e.height!==n.height)&&(e.width=n.width,e.height=n.height,e.dirtyId++,e.dirtySize++)}t||((t=VE).width=n.width,t.height=n.height),r||(r=t);const l=t.width===r.width&&t.height===r.height;this.bind(e),s.bindFramebuffer(s.READ_FRAMEBUFFER,a.framebuffer),s.blitFramebuffer(t.left,t.top,t.right,t.bottom,r.left,r.top,r.right,r.bottom,s.COLOR_BUFFER_BIT,l?s.NEAREST:s.LINEAR),s.bindFramebuffer(s.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,t){const r=e.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(!r)return;delete e.glFramebuffers[this.CONTEXT_UID];const i=this.managedFramebuffers.indexOf(e);i>=0&&this.managedFramebuffers.splice(i,1),e.disposeRunner.remove(this),t||(n.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&n.deleteRenderbuffer(r.msaaBuffer),r.stencil&&n.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&this.disposeFramebuffer(r.blitFramebuffer,t)}disposeAll(e){const t=this.managedFramebuffers;this.managedFramebuffers=[];for(let r=0;r<t.length;r++)this.disposeFramebuffer(t[r],e)}forceStencil(){const e=this.current;if(!e)return;const t=e.glFramebuffers[this.CONTEXT_UID];if(!t||t.stencil&&e.stencil)return;e.stencil=!0;const r=e.width,n=e.height,i=this.gl,s=t.stencil=i.createRenderbuffer();let o,a;i.bindRenderbuffer(i.RENDERBUFFER,s),1===this.renderer.context.webGLVersion?(o=i.DEPTH_STENCIL_ATTACHMENT,a=i.DEPTH_STENCIL):e.depth?(o=i.DEPTH_STENCIL_ATTACHMENT,a=i.DEPTH24_STENCIL8):(o=i.STENCIL_ATTACHMENT,a=i.STENCIL_INDEX8),t.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,t.multisample,a,r,n):i.renderbufferStorage(i.RENDERBUFFER,a,r,n),i.framebufferRenderbuffer(i.FRAMEBUFFER,o,i.RENDERBUFFER,s)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Cx}destroy(){this.renderer=null}}GE.extension={type:Ww.RendererSystem,name:"framebuffer"},Yw.add(GE);const HE={5126:4,5123:2,5121:1};class $E{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==t.webGLVersion){let t=this.renderer.context.extensions.vertexArrayObject;ym.PREFER_ENV===Kp.WEBGL_LEGACY&&(t=null),t?(e.createVertexArray=()=>t.createVertexArrayOES(),e.bindVertexArray=e=>t.bindVertexArrayOES(e),e.deleteVertexArray=e=>t.deleteVertexArrayOES(e)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(2!==t.webGLVersion){const t=e.getExtension("ANGLE_instanced_arrays");t?(e.vertexAttribDivisor=(e,r)=>t.vertexAttribDivisorANGLE(e,r),e.drawElementsInstanced=(e,r,n,i,s)=>t.drawElementsInstancedANGLE(e,r,n,i,s),e.drawArraysInstanced=(e,r,n,i)=>t.drawArraysInstancedANGLE(e,r,n,i)):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===t.webGLVersion||!!t.extensions.uint32ElementIndex}bind(e,t){t=t||this.renderer.shader.shader;const{gl:r}=this;let n=e.glVertexArrayObjects[this.CONTEXT_UID],i=!1;n||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=n={},i=!0);const s=n[t.program.id]||this.initGeometryVao(e,t,i);this._activeGeometry=e,this._activeVao!==s&&(this._activeVao=s,this.hasVao?r.bindVertexArray(s):this.activateVao(e,t.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,t=this.renderer.buffer;for(let r=0;r<e.buffers.length;r++){const n=e.buffers[r];t.update(n)}}checkCompatibility(e,t){const r=e.attributes,n=t.attributeData;for(const i in n)if(!r[i])throw new Error(`shader and geometry incompatible, geometry missing the "${i}" attribute`)}getSignature(e,t){const r=e.attributes,n=t.attributeData,i=["g",e.id];for(const s in r)n[s]&&i.push(s,n[s].location);return i.join("-")}initGeometryVao(e,t,r=!0){const n=this.gl,i=this.CONTEXT_UID,s=this.renderer.buffer,o=t.program;o.glPrograms[i]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,o);const a=this.getSignature(e,o),l=e.glVertexArrayObjects[this.CONTEXT_UID];let u=l[a];if(u)return l[o.id]=u,u;const c=e.buffers,d=e.attributes,h={},f={};for(const p in c)h[p]=0,f[p]=0;for(const p in d)!d[p].size&&o.attributeData[p]?d[p].size=o.attributeData[p].size:d[p].size||console.warn(`PIXI Geometry attribute '${p}' size cannot be determined (likely the bound shader does not have the attribute)`),h[d[p].buffer]+=d[p].size*HE[d[p].type];for(const p in d){const e=d[p],t=e.size;void 0===e.stride&&(h[e.buffer]===t*HE[e.type]?e.stride=0:e.stride=h[e.buffer]),void 0===e.start&&(e.start=f[e.buffer],f[e.buffer]+=t*HE[e.type])}u=n.createVertexArray(),n.bindVertexArray(u);for(let p=0;p<c.length;p++){const e=c[p];s.bind(e),r&&e._glBuffers[i].refCount++}return this.activateVao(e,o),l[o.id]=u,l[a]=u,n.bindVertexArray(null),s.unbind(mm.ARRAY_BUFFER),u}disposeGeometry(e,t){if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const r=e.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,i=e.buffers,s=this.renderer?.buffer;if(e.disposeRunner.remove(this),r){if(s)for(let e=0;e<i.length;e++){const r=i[e]._glBuffers[this.CONTEXT_UID];r&&(r.refCount--,0===r.refCount&&!t&&s.dispose(i[e],t))}if(!t)for(const e in r)if("g"===e[0]){const t=r[e];this._activeVao===t&&this.unbind(),n.deleteVertexArray(t)}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const t=Object.keys(this.managedGeometries);for(let r=0;r<t.length;r++)this.disposeGeometry(this.managedGeometries[t[r]],e)}activateVao(e,t){const r=this.gl,n=this.CONTEXT_UID,i=this.renderer.buffer,s=e.buffers,o=e.attributes;e.indexBuffer&&i.bind(e.indexBuffer);let a=null;for(const l in o){const e=o[l],u=s[e.buffer],c=u._glBuffers[n];if(t.attributeData[l]){a!==c&&(i.bind(u),a=c);const n=t.attributeData[l].location;if(r.enableVertexAttribArray(n),r.vertexAttribPointer(n,e.size,e.type||r.FLOAT,e.normalized,e.stride,e.start),e.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(n,e.divisor)}}}}draw(e,t,r,n){const{gl:i}=this,s=this._activeGeometry;if(s.indexBuffer){const o=s.indexBuffer.data.BYTES_PER_ELEMENT,a=2===o?i.UNSIGNED_SHORT:i.UNSIGNED_INT;2===o||4===o&&this.canUseUInt32ElementIndex?s.instanced?i.drawElementsInstanced(e,t||s.indexBuffer.data.length,a,(r||0)*o,n||1):i.drawElements(e,t||s.indexBuffer.data.length,a,(r||0)*o):console.warn("unsupported index buffer type: uint32")}else s.instanced?i.drawArraysInstanced(e,r,t||s.getSize(),n||1):i.drawArrays(e,r,t||s.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}$E.extension={type:Ww.RendererSystem,name:"geometry"},Yw.add($E);const WE=new Px;class qE{constructor(e,t){this._texture=e,this.mapCoord=new Px,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof t>"u"?.5:t,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,t){void 0===t&&(t=e);const r=this.mapCoord;for(let n=0;n<e.length;n+=2){const i=e[n],s=e[n+1];t[n]=i*r.a+s*r.c+r.tx,t[n+1]=i*r.b+s*r.d+r.ty}return t}update(e){const t=this._texture;if(!t||!t.valid||!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;const r=t._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);const n=t.orig,i=t.trim;i&&(WE.set(n.width/i.width,0,0,n.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(WE));const s=t.baseTexture,o=this.uClampFrame,a=this.clampMargin/s.resolution,l=this.clampOffset;return o[0]=(t._frame.x+a+l)/s.width,o[1]=(t._frame.y+a+l)/s.height,o[2]=(t._frame.x+t._frame.width-a+l)/s.width,o[3]=(t._frame.y+t._frame.height-a+l)/s.height,this.uClampOffset[0]=l/s.realWidth,this.uClampOffset[1]=l/s.realHeight,this.isSimple=t._frame.width===s.width&&t._frame.height===s.height&&0===t.rotate,!0}}class XE extends bE{constructor(e,t,r){let n=null;"string"!=typeof e&&void 0===t&&void 0===r&&(n=e,e=void 0,t=void 0,r=void 0),super(e||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",t||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",r),this.maskSprite=n,this.maskMatrix=new Px}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,t,r,n){const i=this._maskSprite,s=i._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new qE(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,i).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=i.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,e.applyFilter(this,t,r,n))}}class YE{constructor(e=null){this.type=hm.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=bE.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=hm.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class KE{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,t){let r=t;if(!r.isMaskData){const e=this.maskDataPool.pop()||new YE;e.pooled=!0,e.maskObject=t,r=e}const n=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(r.copyCountersOrReset(n),r._colorMask=n?n._colorMask:15,r.autoDetect&&this.detect(r),r._target=e,r.type!==hm.SPRITE&&this.maskStack.push(r),r.enabled)switch(r.type){case hm.SCISSOR:this.renderer.scissor.push(r);break;case hm.STENCIL:this.renderer.stencil.push(r);break;case hm.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r);break;case hm.COLOR:this.pushColorMask(r)}r.type===hm.SPRITE&&this.maskStack.push(r)}pop(e){const t=this.maskStack.pop();if(t&&t._target===e){if(t.enabled)switch(t.type){case hm.SCISSOR:this.renderer.scissor.pop(t);break;case hm.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case hm.SPRITE:this.popSpriteMask(t);break;case hm.COLOR:this.popColorMask(t)}if(t.reset(),t.pooled&&this.maskDataPool.push(t),0!==this.maskStack.length){const e=this.maskStack[this.maskStack.length-1];e.type===hm.SPRITE&&e._filters&&(e._filters[0].maskSprite=e.maskObject)}}}detect(e){const t=e.maskObject;t?t.isSprite?e.type=hm.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=hm.SCISSOR:e.type=hm.STENCIL:e.type=hm.COLOR}pushSpriteMask(e){const{maskObject:t}=e,r=e._target;let n=e._filters;n||(n=this.alphaMaskPool[this.alphaMaskIndex],n||(n=this.alphaMaskPool[this.alphaMaskIndex]=[new XE])),n[0].resolution=e.resolution,n[0].multisample=e.multisample,n[0].maskSprite=t;const i=r.filterArea;r.filterArea=t.getBounds(!0),this.renderer.filter.push(r,n),r.filterArea=i,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const t=e._colorMask,r=e._colorMask=t&e.colorMask;r!==t&&this.renderer.gl.colorMask(!!(1&r),!!(2&r),!!(4&r),!!(8&r))}popColorMask(e){const t=e._colorMask,r=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;r!==t&&this.renderer.gl.colorMask(!!(1&r),!!(2&r),!!(4&r),!!(8&r))}destroy(){this.renderer=null}}KE.extension={type:Ww.RendererSystem,name:"mask"},Yw.add(KE);class ZE{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:t}=this.renderer,r=this.getStackLength();this.maskStack=e;const n=this.getStackLength();n!==r&&(0===n?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const JE=new Px,QE=[],eS=class e extends ZE{constructor(e){super(e),this.glConst=ym.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const t=e._scissorRect,{maskObject:r}=e,{renderer:n}=this,i=n.renderTexture,s=r.getBounds(!0,QE.pop()??new Cx);this.roundFrameToPixels(s,i.current?i.current.resolution:n.resolution,i.sourceFrame,i.destinationFrame,n.projection.transform),t&&s.fit(t),e._scissorRectLocal=s}static isMatrixRotated(e){if(!e)return!1;const{a:t,b:r,c:n,d:i}=e;return(Math.abs(r)>1e-4||Math.abs(n)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(i)>1e-4)}testScissor(t){const{maskObject:r}=t;if(!r.isFastRect||!r.isFastRect()||e.isMatrixRotated(r.worldTransform)||e.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);const n=t._scissorRectLocal;return n.width>0&&n.height>0}roundFrameToPixels(t,r,n,i,s){e.isMatrixRotated(s)||((s=s?JE.copyFrom(s):JE.identity()).translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.renderer.filter.transformAABB(s,t),t.fit(i),t.x=Math.round(t.x*r),t.y=Math.round(t.y*r),t.width=Math.round(t.width*r),t.height=Math.round(t.height*r))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:t}=this.renderer;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:t}=this.renderer;e&&QE.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let t;t=this.renderer.renderTexture.current?e.y:this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)}};eS.extension={type:Ww.RendererSystem,name:"scissor"};let tS=eS;Yw.add(tS);class rS extends ZE{constructor(e){super(e),this.glConst=ym.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const t=e.maskObject,{gl:r}=this.renderer,n=e._stencilCounter;0===n&&(this.renderer.framebuffer.forceStencil(),r.clearStencil(0),r.clear(r.STENCIL_BUFFER_BIT),r.enable(r.STENCIL_TEST)),e._stencilCounter++;const i=e._colorMask;0!==i&&(e._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilFunc(r.EQUAL,n,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,0!==i&&(e._colorMask=i,r.colorMask(!!(1&i),!!(2&i),!!(4&i),!!(8&i))),this._useCurrent()}pop(e){const t=this.renderer.gl;if(0===this.getStackLength())t.disable(t.STENCIL_TEST);else{const r=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null,n=r?r._colorMask:15;0!==n&&(r._colorMask=0,t.colorMask(!1,!1,!1,!1)),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,0!==n&&(r._colorMask=n,t.colorMask(!!(1&n),!!(2&n),!!(4&n),!!(8&n))),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}rS.extension={type:Ww.RendererSystem,name:"stencil"},Yw.add(rS);class nS{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get:()=>(Fb("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract)},prepare:{enumerable:!1,get:()=>(Fb("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare)},interaction:{enumerable:!1,get:()=>(Fb("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events)}})}init(){const e=this.rendererPlugins;for(const t in e)this.plugins[t]=new e[t](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}nS.extension={type:[Ww.RendererSystem,Ww.CanvasRendererSystem],name:"_plugin"},Yw.add(nS);class iS{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Px,this.transform=null}update(e,t,r,n){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,n),this.transform&&this.projectionMatrix.append(this.transform);const i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)}calculateProjection(e,t,r,n){const i=this.projectionMatrix,s=n?-1:1;i.identity(),i.a=1/t.width*2,i.d=s*(1/t.height*2),i.tx=-1-t.x*i.a,i.ty=-s-t.y*i.d}setTransform(e){}destroy(){this.renderer=null}}iS.extension={type:Ww.RendererSystem,name:"projection"},Yw.add(iS);const sS=new zx,oS=new Cx;class aS{constructor(e){this.renderer=e,this._tempMatrix=new Px}generateTexture(e,t){const{region:r,...n}=t||{},i=r?.copyTo(oS)||e.getLocalBounds(oS,!0),s=n.resolution||this.renderer.resolution;i.width=Math.max(i.width,1/s),i.height=Math.max(i.height,1/s),n.width=i.width,n.height=i.height,n.resolution=s,n.multisample??(n.multisample=this.renderer.multisample);const o=RE.create(n);this._tempMatrix.tx=-i.x,this._tempMatrix.ty=-i.y;const a=e.transform;return e.transform=sS,this.renderer.render(e,{renderTexture:o,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=a,o}destroy(){}}aS.extension={type:[Ww.RendererSystem,Ww.CanvasRendererSystem],name:"textureGenerator"},Yw.add(aS);const lS=new Cx,uS=new Cx;class cS{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Cx,this.destinationFrame=new Cx,this.viewportFrame=new Cx}contextChange(){const e=this.renderer?.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,t,r){const n=this.renderer;let i,s,o;this.current=e,e?(i=e.baseTexture,o=i.resolution,t||(lS.width=e.frame.width,lS.height=e.frame.height,t=lS),r||(uS.x=e.frame.x,uS.y=e.frame.y,uS.width=t.width,uS.height=t.height,r=uS),s=i.framebuffer):(o=n.resolution,t||(lS.width=n._view.screen.width,lS.height=n._view.screen.height,t=lS),r||((r=lS).width=t.width,r.height=t.height));const a=this.viewportFrame;a.x=r.x*o,a.y=r.y*o,a.width=r.width*o,a.height=r.height*o,e||(a.y=n.view.height-(a.y+a.height)),a.ceil(),this.renderer.framebuffer.bind(s,a),this.renderer.projection.update(r,t,o,!s),e?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(r)}clear(e,t){const r=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,n=yw.shared.setValue(e||r);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&n.premultiply(n.alpha);const i=this.destinationFrame,s=this.current?this.current.baseTexture:this.renderer._view.screen,o=i.width!==s.width||i.height!==s.height;if(o){let{x:e,y:t,width:r,height:n}=this.viewportFrame;e=Math.round(e),t=Math.round(t),r=Math.round(r),n=Math.round(n),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(e,t,r,n)}this.renderer.framebuffer.clear(n.red,n.green,n.blue,n.alpha,t),o&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}cS.extension={type:Ww.RendererSystem,name:"renderTexture"},Yw.add(cS);class dS{constructor(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function hS(e,t){const r=Vx(e,e.VERTEX_SHADER,t.vertexSrc),n=Vx(e,e.FRAGMENT_SHADER,t.fragmentSrc),i=e.createProgram();e.attachShader(i,r),e.attachShader(i,n);const s=t.extra?.transformFeedbackVaryings;if(s&&("function"!=typeof e.transformFeedbackVaryings?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):e.transformFeedbackVaryings(i,s.names,"separate"===s.bufferMode?e.SEPARATE_ATTRIBS:e.INTERLEAVED_ATTRIBS)),e.linkProgram(i),e.getProgramParameter(i,e.LINK_STATUS)||function(e,t,r,n){e.getProgramParameter(t,e.LINK_STATUS)||(e.getShaderParameter(r,e.COMPILE_STATUS)||Jx(e,r),e.getShaderParameter(n,e.COMPILE_STATUS)||Jx(e,n),console.error("PixiJS Error: Could not initialize shader."),""!==e.getProgramInfoLog(t)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(t)))}(e,i,r,n),t.attributeData=function(e,t){const r={},n=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const n=t.getActiveAttrib(e,i);if(n.name.startsWith("gl_"))continue;const s=nE(t,n.type),o={type:s,name:n.name,size:eE(s),location:t.getAttribLocation(e,n.name)};r[n.name]=o}return r}(i,e),t.uniformData=function(e,t){const r={},n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let i=0;i<n;i++){const n=t.getActiveUniform(e,i),s=n.name.replace(/\[.*?\]$/,""),o=!!n.name.match(/\[.*?\]$/),a=nE(t,n.type);r[s]={name:s,index:i,type:a,size:n.size,isArray:o,value:Hx(a,n.size)}}return r}(i,e),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){const r=Object.keys(t.attributeData);r.sort((e,t)=>e>t?1:-1);for(let n=0;n<r.length;n++)t.attributeData[r[n]].location=n,e.bindAttribLocation(i,n,r[n]);e.linkProgram(i)}e.deleteShader(r),e.deleteShader(n);const o={};for(const a in t.uniformData){const r=t.uniformData[a];o[a]={location:e.getUniformLocation(i,a),value:Hx(r.type,r.size)}}return new dS(i,o)}function fS(e,t,r,n,i){r.buffer.update(i)}const pS={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},mS={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};function gS(e){const t=e.map(e=>({data:e,offset:0,dataLen:0,dirty:0}));let r=0,n=0,i=0;for(let s=0;s<t.length;s++){const e=t[s];if(r=mS[e.data.type],e.data.size>1&&(r=Math.max(r,16)*e.data.size),e.dataLen=r,n%r!==0&&n<16){const e=n%r%16;n+=e,i+=e}n+r>16?(i=16*Math.ceil(i/16),e.offset=i,i+=r,n=r):(e.offset=i,n+=r,i+=r)}return i=16*Math.ceil(i/16),{uboElements:t,size:i}}function yS(e,t){const r=[];for(const n in e)t[n]&&r.push(t[n]);return r.sort((e,t)=>e.index-t.index),r}function vS(e,t){if(!e.autoManage)return{size:0,syncFunc:fS};const r=yS(e.uniforms,t),{uboElements:n,size:i}=gS(r),s=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "];for(let o=0;o<n.length;o++){const t=n[o],r=e.uniforms[t.data.name],i=t.data.name;let a=!1;for(let e=0;e<$x.length;e++){const n=$x[e];if(n.codeUbo&&n.test(t.data,r)){s.push(`offset = ${t.offset/4};`,$x[e].codeUbo(t.data.name,r)),a=!0;break}}if(!a)if(t.data.size>1){const e=eE(t.data.type),r=Math.max(mS[t.data.type]/16,1),n=e/r,o=(4-n%4)%4;s.push(`\n                cv = ud.${i}.value;\n                v = uv.${i};\n                offset = ${t.offset/4};\n\n                t = 0;\n\n                for(var i=0; i < ${t.data.size*r}; i++)\n                {\n                    for(var j = 0; j < ${n}; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += ${o};\n                }\n\n                `)}else{const e=pS[t.data.type];s.push(`\n                cv = ud.${i}.value;\n                v = uv.${i};\n                offset = ${t.offset/4};\n                ${e};\n                `)}}return s.push("\n       renderer.buffer.update(buffer);\n    "),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join("\n"))}}let _S=0;const bS={textureCount:0,uboCount:0};class wS{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=_S++}systemCheck(){if(!oE())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,t){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const r=e.program,n=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==r&&(this.program=r,this.gl.useProgram(n.program)),t||(bS.textureCount=0,bS.uboCount=0,this.syncUniformGroup(e.uniformGroup,bS)),n}setUniforms(e){const t=this.shader.program,r=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(r.uniformData,e,this.renderer)}syncUniformGroup(e,t){const r=this.getGlProgram();(!e.static||e.dirtyId!==r.uniformDirtyGroups[e.id])&&(r.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,r,t))}syncUniforms(e,t,r){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,r)}createSyncGroups(e){const t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=function(e,t){const r=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(const n in e.uniforms){const i=t[n];if(!i){!0===e.uniforms[n]?.group&&(e.uniforms[n].ubo?r.push(`\n                        renderer.shader.syncUniformBufferGroup(uv.${n}, '${n}');\n                    `):r.push(`\n                        renderer.shader.syncUniformGroup(uv.${n}, syncData);\n                    `));continue}const s=e.uniforms[n];let o=!1;for(let e=0;e<$x.length;e++)if($x[e].test(i,s)){r.push($x[e].code(n,s)),o=!0;break}if(!o){const e=(1!==i.size||i.isArray?qx:Wx)[i.type].replace("location",`ud["${n}"].location`);r.push(`\n            cu = ud["${n}"];\n            cv = cu.value;\n            v = uv["${n}"];\n            ${e};`)}}return new Function("ud","uv","renderer","syncData",r.join("\n"))}(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,t){const r=this.getGlProgram();if(!e.static||0!==e.dirtyId||!r.uniformGroups[e.id]){e.dirtyId=0;const n=r.uniformGroups[e.id]||this.createSyncBufferGroup(e,r,t);e.buffer.update(),n(r.uniformData,e.uniforms,this.renderer,bS,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,r.uniformBufferBindings[t])}createSyncBufferGroup(e,t,r){const{gl:n}=this.renderer;this.renderer.buffer.bind(e.buffer);const i=this.gl.getUniformBlockIndex(t.program,r);t.uniformBufferBindings[r]=this.shader.uniformBindCount,n.uniformBlockBinding(t.program,i,this.shader.uniformBindCount),this.shader.uniformBindCount++;const s=this.getSignature(e,this.shader.program.uniformData,"ubo");let o=this._uboCache[s];if(o||(o=this._uboCache[s]=vS(e,this.shader.program.uniformData)),e.autoManage){const t=new Float32Array(o.size/4);e.buffer.update(t)}return t.uniformGroups[e.id]=o.syncFunc,t.uniformGroups[e.id]}getSignature(e,t,r){const n=e.uniforms,i=[`${r}-`];for(const s in n)i.push(s),t[s]&&i.push(t[s].type);return i.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const t=this.gl,r=e.program,n=hS(t,r);return r.glPrograms[this.renderer.CONTEXT_UID]=n,n}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}wS.extension={type:Ww.RendererSystem,name:"shader"},Yw.add(wS);class xS{constructor(e){this.renderer=e}run(e){const{renderer:t}=this;t.runners.init.emit(t.options),e.hello&&console.log(`PixiJS 7.4.3 - ${t.rendererLogId} - https://pixijs.com`),t.resize(t.screen.width,t.screen.height)}destroy(){}}xS.defaultOptions={hello:!1},xS.extension={type:[Ww.RendererSystem,Ww.CanvasRendererSystem],name:"startup"},Yw.add(xS);const ES=class e{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Qp.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new ex,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=function(e,t=[]){return t[Qp.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Qp.ADD]=[e.ONE,e.ONE],t[Qp.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Qp.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Qp.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Qp.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Qp.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Qp.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Qp.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Qp.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Qp.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Qp.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Qp.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Qp.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Qp.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Qp.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Qp.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Qp.NONE]=[0,0],t[Qp.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Qp.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[Qp.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Qp.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[Qp.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[Qp.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[Qp.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[Qp.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[Qp.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[Qp.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[Qp.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[Qp.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t}(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let t=this.stateId^e.data,r=0;for(;t;)1&t&&this.map[r].call(this,!!(e.data&1<<r)),t>>=1,r++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e=e||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(t){this.updateCheck(e.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this.updateCheck(e.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const t=this.blendModes[e],r=this.gl;2===t.length?r.blendFunc(t[0],t[1]):r.blendFuncSeparate(t[0],t[1],t[2],t[3]),6===t.length?(this._blendEq=!0,r.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,t){const r=this.checks.indexOf(e);t&&-1===r?this.checks.push(e):!t&&-1!==r&&this.checks.splice(r,1)}static checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};ES.extension={type:Ww.RendererSystem,name:"state"};let SS=ES;Yw.add(SS);class CS extends Nm{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const t=(e.priority??[]).filter(t=>e.systems[t]),r=[...t,...Object.keys(e.systems).filter(e=>!t.includes(e))];for(const n of r)this.addSystem(e.systems[n],n)}addRunners(...e){e.forEach(e=>{this.runners[e]=new nx(e)})}addSystem(e,t){const r=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=r,this._systemsHash[t]=r;for(const n in this.runners)this.runners[n].add(r);return this}emitWithCustomOptions(e,t){const r=Object.keys(this._systemsHash);e.items.forEach(n=>{const i=r.find(e=>this._systemsHash[e]===n);n[e.name](t[i])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}const AS=class e{constructor(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=e.defaultMaxIdle,this.checkCountMax=e.defaultCheckCountMax,this.mode=e.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==cm.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,t=e.managedTextures;let r=!1;for(let n=0;n<t.length;n++){const i=t[n];i.resource&&this.count-i.touched>this.maxIdle&&(e.destroyTexture(i,!0),t[n]=null,r=!0)}if(r){let e=0;for(let r=0;r<t.length;r++)null!==t[r]&&(t[e++]=t[r]);t.length=e}}unload(e){const t=this.renderer.texture,r=e._texture;r&&!r.framebuffer&&t.destroyTexture(r);for(let n=e.children.length-1;n>=0;n--)this.unload(e.children[n])}destroy(){this.renderer=null}};AS.defaultMode=cm.AUTO,AS.defaultMaxIdle=3600,AS.defaultCheckCountMax=600,AS.extension={type:Ww.RendererSystem,name:"textureGC"};let TS=AS;Yw.add(TS);class DS{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=nm.UNSIGNED_BYTE,this.internalFormat=tm.RGBA,this.samplerType=0}}class kS{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new lx,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function(e){let t;return t="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?{[nm.UNSIGNED_BYTE]:{[tm.RGBA]:e.RGBA8,[tm.RGB]:e.RGB8,[tm.RG]:e.RG8,[tm.RED]:e.R8,[tm.RGBA_INTEGER]:e.RGBA8UI,[tm.RGB_INTEGER]:e.RGB8UI,[tm.RG_INTEGER]:e.RG8UI,[tm.RED_INTEGER]:e.R8UI,[tm.ALPHA]:e.ALPHA,[tm.LUMINANCE]:e.LUMINANCE,[tm.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[nm.BYTE]:{[tm.RGBA]:e.RGBA8_SNORM,[tm.RGB]:e.RGB8_SNORM,[tm.RG]:e.RG8_SNORM,[tm.RED]:e.R8_SNORM,[tm.RGBA_INTEGER]:e.RGBA8I,[tm.RGB_INTEGER]:e.RGB8I,[tm.RG_INTEGER]:e.RG8I,[tm.RED_INTEGER]:e.R8I},[nm.UNSIGNED_SHORT]:{[tm.RGBA_INTEGER]:e.RGBA16UI,[tm.RGB_INTEGER]:e.RGB16UI,[tm.RG_INTEGER]:e.RG16UI,[tm.RED_INTEGER]:e.R16UI,[tm.DEPTH_COMPONENT]:e.DEPTH_COMPONENT16},[nm.SHORT]:{[tm.RGBA_INTEGER]:e.RGBA16I,[tm.RGB_INTEGER]:e.RGB16I,[tm.RG_INTEGER]:e.RG16I,[tm.RED_INTEGER]:e.R16I},[nm.UNSIGNED_INT]:{[tm.RGBA_INTEGER]:e.RGBA32UI,[tm.RGB_INTEGER]:e.RGB32UI,[tm.RG_INTEGER]:e.RG32UI,[tm.RED_INTEGER]:e.R32UI,[tm.DEPTH_COMPONENT]:e.DEPTH_COMPONENT24},[nm.INT]:{[tm.RGBA_INTEGER]:e.RGBA32I,[tm.RGB_INTEGER]:e.RGB32I,[tm.RG_INTEGER]:e.RG32I,[tm.RED_INTEGER]:e.R32I},[nm.FLOAT]:{[tm.RGBA]:e.RGBA32F,[tm.RGB]:e.RGB32F,[tm.RG]:e.RG32F,[tm.RED]:e.R32F,[tm.DEPTH_COMPONENT]:e.DEPTH_COMPONENT32F},[nm.HALF_FLOAT]:{[tm.RGBA]:e.RGBA16F,[tm.RGB]:e.RGB16F,[tm.RG]:e.RG16F,[tm.RED]:e.R16F},[nm.UNSIGNED_SHORT_5_6_5]:{[tm.RGB]:e.RGB565},[nm.UNSIGNED_SHORT_4_4_4_4]:{[tm.RGBA]:e.RGBA4},[nm.UNSIGNED_SHORT_5_5_5_1]:{[tm.RGBA]:e.RGB5_A1},[nm.UNSIGNED_INT_2_10_10_10_REV]:{[tm.RGBA]:e.RGB10_A2,[tm.RGBA_INTEGER]:e.RGB10_A2UI},[nm.UNSIGNED_INT_10F_11F_11F_REV]:{[tm.RGB]:e.R11F_G11F_B10F},[nm.UNSIGNED_INT_5_9_9_9_REV]:{[tm.RGB]:e.RGB9_E5},[nm.UNSIGNED_INT_24_8]:{[tm.DEPTH_STENCIL]:e.DEPTH24_STENCIL8},[nm.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[tm.DEPTH_STENCIL]:e.DEPTH32F_STENCIL8}}:{[nm.UNSIGNED_BYTE]:{[tm.RGBA]:e.RGBA,[tm.RGB]:e.RGB,[tm.ALPHA]:e.ALPHA,[tm.LUMINANCE]:e.LUMINANCE,[tm.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[nm.UNSIGNED_SHORT_5_6_5]:{[tm.RGB]:e.RGB},[nm.UNSIGNED_SHORT_4_4_4_4]:{[tm.RGBA]:e.RGBA},[nm.UNSIGNED_SHORT_5_5_5_1]:{[tm.RGBA]:e.RGBA}},t}(e),this.samplerTypes=function(e){let t;return t="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?{[e.RGB]:im.FLOAT,[e.RGBA]:im.FLOAT,[e.ALPHA]:im.FLOAT,[e.LUMINANCE]:im.FLOAT,[e.LUMINANCE_ALPHA]:im.FLOAT,[e.R8]:im.FLOAT,[e.R8_SNORM]:im.FLOAT,[e.RG8]:im.FLOAT,[e.RG8_SNORM]:im.FLOAT,[e.RGB8]:im.FLOAT,[e.RGB8_SNORM]:im.FLOAT,[e.RGB565]:im.FLOAT,[e.RGBA4]:im.FLOAT,[e.RGB5_A1]:im.FLOAT,[e.RGBA8]:im.FLOAT,[e.RGBA8_SNORM]:im.FLOAT,[e.RGB10_A2]:im.FLOAT,[e.RGB10_A2UI]:im.FLOAT,[e.SRGB8]:im.FLOAT,[e.SRGB8_ALPHA8]:im.FLOAT,[e.R16F]:im.FLOAT,[e.RG16F]:im.FLOAT,[e.RGB16F]:im.FLOAT,[e.RGBA16F]:im.FLOAT,[e.R32F]:im.FLOAT,[e.RG32F]:im.FLOAT,[e.RGB32F]:im.FLOAT,[e.RGBA32F]:im.FLOAT,[e.R11F_G11F_B10F]:im.FLOAT,[e.RGB9_E5]:im.FLOAT,[e.R8I]:im.INT,[e.R8UI]:im.UINT,[e.R16I]:im.INT,[e.R16UI]:im.UINT,[e.R32I]:im.INT,[e.R32UI]:im.UINT,[e.RG8I]:im.INT,[e.RG8UI]:im.UINT,[e.RG16I]:im.INT,[e.RG16UI]:im.UINT,[e.RG32I]:im.INT,[e.RG32UI]:im.UINT,[e.RGB8I]:im.INT,[e.RGB8UI]:im.UINT,[e.RGB16I]:im.INT,[e.RGB16UI]:im.UINT,[e.RGB32I]:im.INT,[e.RGB32UI]:im.UINT,[e.RGBA8I]:im.INT,[e.RGBA8UI]:im.UINT,[e.RGBA16I]:im.INT,[e.RGBA16UI]:im.UINT,[e.RGBA32I]:im.INT,[e.RGBA32UI]:im.UINT,[e.DEPTH_COMPONENT16]:im.FLOAT,[e.DEPTH_COMPONENT24]:im.FLOAT,[e.DEPTH_COMPONENT32F]:im.FLOAT,[e.DEPTH_STENCIL]:im.FLOAT,[e.DEPTH24_STENCIL8]:im.FLOAT,[e.DEPTH32F_STENCIL8]:im.FLOAT}:{[e.RGB]:im.FLOAT,[e.RGBA]:im.FLOAT,[e.ALPHA]:im.FLOAT,[e.LUMINANCE]:im.FLOAT,[e.LUMINANCE_ALPHA]:im.FLOAT,[e.DEPTH_STENCIL]:im.FLOAT},t}(e);const t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(let n=0;n<t;n++)this.boundTextures[n]=null;this.emptyTextures={};const r=new DS(e.createTexture());e.bindTexture(e.TEXTURE_2D,r.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=r,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new DS(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let n=0;n<6;n++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let n=0;n<this.boundTextures.length;n++)this.bind(null,n)}bind(e,t=0){const{gl:r}=this;if(e=e?.castToBaseTexture(),e?.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const n=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(e.target,n.texture)),n.dirtyId!==e.dirtyId?(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),this.updateTexture(e)):n.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[t]=e}else this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[t]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:t,boundTextures:r}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let e=0;e<r.length;e++)r[e]===this.unknownTexture&&this.bind(null,e)}for(let n=0;n<r.length;n++)r[n]===e&&(this.currentLocation!==n&&(t.activeTexture(t.TEXTURE0+n),this.currentLocation=n),t.bindTexture(e.target,this.emptyTextures[e.target].texture),r[n]=null)}ensureSamplerType(e){const{boundTextures:t,hasIntegerTextures:r,CONTEXT_UID:n}=this;if(r)for(let i=e-1;i>=0;--i){const e=t[i];e&&e._glTextures[n].samplerType!==im.FLOAT&&this.renderer.texture.unbind(e)}}initTexture(e){const t=new DS(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t}initTextureType(e,t){t.internalFormat=this.internalFormats[e.type]?.[e.format]??e.format,t.samplerType=this.samplerTypes[t.internalFormat]??im.FLOAT,2===this.webGLVersion&&e.type===nm.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=e.type}updateTexture(e){const t=e._glTextures[this.CONTEXT_UID];if(!t)return;const r=this.renderer;if(this.initTextureType(e,t),e.resource?.upload(r,e,t))t.samplerType!==im.FLOAT&&(this.hasIntegerTextures=!0);else{const n=e.realWidth,i=e.realHeight,s=r.gl;(t.width!==n||t.height!==i||t.dirtyId<0)&&(t.width=n,t.height=i,s.texImage2D(e.target,0,t.internalFormat,n,i,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}destroyTexture(e,t){const{gl:r}=this;if((e=e.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(e),r.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){const t=this.managedTextures.indexOf(e);-1!==t&&kw(this.managedTextures,t,1)}}updateTextureStyle(e){const t=e._glTextures[this.CONTEXT_UID];t&&(e.mipmap!==am.POW2&&2===this.webGLVersion||e.isPowerOfTwo?t.mipmap=e.mipmap>=1:t.mipmap=!1,2===this.webGLVersion||e.isPowerOfTwo?t.wrapMode=e.wrapMode:t.wrapMode=om.CLAMP,e.resource?.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)}setStyle(e,t){const r=this.gl;if(t.mipmap&&e.mipmap!==am.ON_MANUAL&&r.generateMipmap(e.target),r.texParameteri(e.target,r.TEXTURE_WRAP_S,t.wrapMode),r.texParameteri(e.target,r.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===sm.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);const t=this.renderer.context.extensions.anisotropicFiltering;if(t&&e.anisotropicLevel>0&&e.scaleMode===sm.LINEAR){const n=Math.min(e.anisotropicLevel,r.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(e.target,t.TEXTURE_MAX_ANISOTROPY_EXT,n)}}else r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===sm.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(e.target,r.TEXTURE_MAG_FILTER,e.scaleMode===sm.LINEAR?r.LINEAR:r.NEAREST)}destroy(){this.renderer=null}}kS.extension={type:Ww.RendererSystem,name:"texture"},Yw.add(kS);class PS{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:r}=this,n=e._glTransformFeedbacks[r]||this.createGLTransformFeedback(e);t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,n)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,t){const{gl:r,renderer:n}=this;t&&n.shader.bind(t),r.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:t,renderer:r,CONTEXT_UID:n}=this,i=t.createTransformFeedback();e._glTransformFeedbacks[n]=i,t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,i);for(let s=0;s<e.buffers.length;s++){const i=e.buffers[s];i&&(r.buffer.update(i),i._glBuffers[n].refCount++,t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,s,i._glBuffers[n].buffer||null))}return t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),i}disposeTransformFeedback(e,t){const r=e._glTransformFeedbacks[this.CONTEXT_UID],n=this.gl;e.disposeRunner.remove(this);const i=this.renderer.buffer;if(i)for(let s=0;s<e.buffers.length;s++){const r=e.buffers[s];if(!r)continue;const n=r._glBuffers[this.CONTEXT_UID];n&&(n.refCount--,0===n.refCount&&!t&&i.dispose(r,t))}r&&(t||n.deleteTransformFeedback(r),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}PS.extension={type:Ww.RendererSystem,name:"transformFeedback"},Yw.add(PS);class BS{constructor(e){this.renderer=e}init(e){this.screen=new Cx(0,0,e.width,e.height),this.element=e.view||ym.ADAPTER.createCanvas(),this.resolution=e.resolution||ym.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,t){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(t*this.resolution);const r=this.element.width/this.resolution,n=this.element.height/this.resolution;this.screen.width=r,this.screen.height=n,this.autoDensity&&(this.element.style.width=`${r}px`,this.element.style.height=`${n}px`),this.renderer.emit("resize",r,n),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){e&&this.element.parentNode?.removeChild(this.element),this.renderer=null,this.element=null,this.screen=null}}BS.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},BS.extension={type:[Ww.RendererSystem,Ww.CanvasRendererSystem],name:"_view"},Yw.add(BS),ym.PREFER_ENV=Kp.WEBGL2,ym.STRICT_TEXTURE_CACHE=!1,ym.RENDER_OPTIONS={...SE.defaultOptions,...wE.defaultOptions,...BS.defaultOptions,...xS.defaultOptions},Object.defineProperties(ym,{WRAP_MODE:{get:()=>lx.defaultOptions.wrapMode,set(e){Fb("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),lx.defaultOptions.wrapMode=e}},SCALE_MODE:{get:()=>lx.defaultOptions.scaleMode,set(e){Fb("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),lx.defaultOptions.scaleMode=e}},MIPMAP_TEXTURES:{get:()=>lx.defaultOptions.mipmap,set(e){Fb("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),lx.defaultOptions.mipmap=e}},ANISOTROPIC_LEVEL:{get:()=>lx.defaultOptions.anisotropicLevel,set(e){Fb("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),lx.defaultOptions.anisotropicLevel=e}},FILTER_RESOLUTION:{get:()=>(Fb("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),bE.defaultResolution),set(e){bE.defaultResolution=e}},FILTER_MULTISAMPLE:{get:()=>(Fb("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),bE.defaultMultisample),set(e){bE.defaultMultisample=e}},SPRITE_MAX_TEXTURES:{get:()=>vE.defaultMaxTextures,set(e){Fb("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),vE.defaultMaxTextures=e}},SPRITE_BATCH_SIZE:{get:()=>vE.defaultBatchSize,set(e){Fb("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),vE.defaultBatchSize=e}},CAN_UPLOAD_SAME_BUFFER:{get:()=>vE.canUploadSameBuffer,set(e){Fb("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),vE.canUploadSameBuffer=e}},GC_MODE:{get:()=>TS.defaultMode,set(e){Fb("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),TS.defaultMode=e}},GC_MAX_IDLE:{get:()=>TS.defaultMaxIdle,set(e){Fb("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),TS.defaultMaxIdle=e}},GC_MAX_CHECK_COUNT:{get:()=>TS.defaultCheckCountMax,set(e){Fb("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),TS.defaultCheckCountMax=e}},PRECISION_VERTEX:{get:()=>cE.defaultVertexPrecision,set(e){Fb("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),cE.defaultVertexPrecision=e}},PRECISION_FRAGMENT:{get:()=>cE.defaultFragmentPrecision,set(e){Fb("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),cE.defaultFragmentPrecision=e}}});var OS=e("U",(e=>(e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY",e))(OS||{}));class RS{constructor(e,t=null,r=0,n=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=t,this.priority=r,this.once=n}match(e,t=null){return this.fn===e&&this.context===t}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const FS=class e{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new RS(null,null,1/0),this.deltaMS=1/e.targetFPMS,this.elapsedMS=1/e.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&null===this._requestId&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,r=OS.NORMAL){return this._addListener(new RS(e,t,r))}addOnce(e,t,r=OS.NORMAL){return this._addListener(new RS(e,t,r,!0))}_addListener(e){let t=this._head.next,r=this._head;if(t){for(;t;){if(e.priority>t.priority){e.connect(r);break}r=t,t=t.next}e.previous||e.connect(r)}else e.connect(r);return this._startIfPossible(),this}remove(e,t){let r=this._head.next;for(;r;)r=r.match(e,t)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let r;if(t>this.lastTime){if(r=this.elapsedMS=t-this.lastTime,r>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){const e=t-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=t-e%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*e.targetFPMS;const n=this._head;let i=n.next;for(;i;)i=i.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const r=Math.min(this.maxFPS,t),n=Math.min(Math.max(0,r)/1e3,e.targetFPMS);this._maxElapsedMS=1/n}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(0===e)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!e._shared){const t=e._shared=new e;t.autoStart=!0,t._protected=!0}return e._shared}static get system(){if(!e._system){const t=e._system=new e;t.autoStart=!0,t._protected=!0}return e._system}};FS.targetFPMS=.06;let IS=e("k",FS);Object.defineProperties(ym,{TARGET_FPMS:{get:()=>IS.targetFPMS,set(e){Fb("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),IS.targetFPMS=e}}});class MS{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,OS.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?IS.shared:new IS,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}MS.extension=Ww.Application,Yw.add(MS);const NS=[];function LS(e){for(const t of NS)if(t.test(e))return new t(e);throw new Error("Unable to auto-detect a suitable renderer.")}Yw.handleByList(Ww.Renderer,NS);const US="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",jS="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n";class zS{constructor(e){this.renderer=e}contextChange(e){let t;if(1===this.renderer.context.webGLVersion){const r=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,r)}else{const r=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,r)}t>=pm.HIGH?this.multisample=pm.HIGH:t>=pm.MEDIUM?this.multisample=pm.MEDIUM:t>=pm.LOW?this.multisample=pm.LOW:this.multisample=pm.NONE}destroy(){}}zS.extension={type:Ww.RendererSystem,name:"_multisample"},Yw.add(zS);class VS{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class GS{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:r}=this,n=e._glBuffers[r]||this.createGLBuffer(e);t.bindBuffer(e.type,n.buffer)}unbind(e){const{gl:t}=this;t.bindBuffer(e,null)}bindBufferBase(e,t){const{gl:r,CONTEXT_UID:n}=this;if(this.boundBufferBases[t]!==e){const i=e._glBuffers[n]||this.createGLBuffer(e);this.boundBufferBases[t]=e,r.bindBufferBase(r.UNIFORM_BUFFER,t,i.buffer)}}bindBufferRange(e,t,r){const{gl:n,CONTEXT_UID:i}=this;r=r||0;const s=e._glBuffers[i]||this.createGLBuffer(e);n.bindBufferRange(n.UNIFORM_BUFFER,t||0,s.buffer,256*r,256)}update(e){const{gl:t,CONTEXT_UID:r}=this,n=e._glBuffers[r]||this.createGLBuffer(e);if(e._updateID!==n.updateID)if(n.updateID=e._updateID,t.bindBuffer(e.type,n.buffer),n.byteLength>=e.data.byteLength)t.bufferSubData(e.type,0,e.data);else{const r=e.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;n.byteLength=e.data.byteLength,t.bufferData(e.type,e.data,r)}}dispose(e,t){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const r=e._glBuffers[this.CONTEXT_UID],n=this.gl;e.disposeRunner.remove(this),r&&(t||n.deleteBuffer(r.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const t=Object.keys(this.managedBuffers);for(let r=0;r<t.length;r++)this.dispose(this.managedBuffers[t[r]],e)}createGLBuffer(e){const{CONTEXT_UID:t,gl:r}=this;return e._glBuffers[t]=new VS(r.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[t]}}GS.extension={type:Ww.RendererSystem,name:"buffer"},Yw.add(GS);class HS{constructor(e){this.renderer=e}render(e,t){const r=this.renderer;let n,i,s,o;if(t&&(n=t.renderTexture,i=t.clear,s=t.transform,o=t.skipUpdateTransform),this.renderingToScreen=!n,r.runners.prerender.emit(),r.emit("prerender"),r.projection.transform=s,!r.context.isLost){if(n||(this.lastObjectRendered=e),!o){const t=e.enableTempParent();e.updateTransform(),e.disableTempParent(t)}r.renderTexture.bind(n),r.batch.currentRenderer.start(),(i??r.background.clearBeforeRender)&&r.renderTexture.clear(),e.render(r),r.batch.currentRenderer.flush(),n&&(t.blit&&r.framebuffer.blit(),n.baseTexture.update()),r.runners.postrender.emit(),r.projection.transform=null,r.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}HS.extension={type:Ww.RendererSystem,name:"objectRenderer"},Yw.add(HS);const $S=class e extends CS{constructor(t){super(),this.type=Zp.WEBGL,t=Object.assign({},ym.RENDER_OPTIONS,t),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new hE({projectionMatrix:new Px},!0);const r={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:e.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(r),"useContextAlpha"in t&&(Fb("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),t.premultipliedAlpha=t.useContextAlpha&&"notMultiplied"!==t.useContextAlpha,t.backgroundAlpha=!1===t.useContextAlpha?1:t.backgroundAlpha),this._plugin.rendererPlugins=e.__plugins,this.options=t,this.startup.run(this.options)}static test(e){return!e?.forceCanvas&&Vb()}render(e,t){this.objectRenderer.render(e,t)}resize(e,t){this._view.resizeView(e,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return Fb("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return Fb("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return Fb("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return Fb("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){Fb("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return Fb("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){Fb("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return Fb("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,t){return this.textureGenerator.generateTexture(e,t)}};$S.extension={type:Ww.Renderer,priority:1},$S.__plugins={},$S.__systems={};let WS=$S;Yw.handleByMap(Ww.RendererPlugin,WS.__plugins),Yw.handleByMap(Ww.RendererSystem,WS.__systems),Yw.add(WS);class qS extends ix{constructor(e,t){const{width:r,height:n}=t||{};super(r,n),this.items=[],this.itemDirtyIds=[];for(let i=0;i<e;i++){const e=new lx;this.items.push(e),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,t){for(let r=0;r<this.length;r++)e[r]&&(e[r].castToBaseTexture?this.addBaseTextureAt(e[r].castToBaseTexture(),r):e[r]instanceof ix?this.addResourceAt(e[r],r):this.addResourceAt(rx(e[r],t),r))}dispose(){for(let e=0,t=this.length;e<t;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,t){if(!this.items[t])throw new Error(`Index ${t} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[t].setResource(e),this}bind(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=e,this.items[t].on("update",e.update,e)}unbind(e){super.unbind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=null,this.items[t].off("update",e.update,e)}load(){if(this._load)return this._load;const e=this.items.map(e=>e.resource).filter(e=>e).map(e=>e.load());return this._load=Promise.all(e).then(()=>{const{realWidth:e,realHeight:t}=this.items[0];return this.resize(e,t),this.update(),Promise.resolve(this)}),this._load}}class XS extends qS{constructor(e,t){const{width:r,height:n}=t||{};let i,s;Array.isArray(e)?(i=e,s=e.length):s=e,super(s,{width:r,height:n}),i&&this.initFromArray(i,t)}addBaseTextureAt(e,t){if(!e.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(e.resource,t),this}bind(e){super.bind(e),e.target=rm.TEXTURE_2D_ARRAY}upload(e,t,r){const{length:n,itemDirtyIds:i,items:s}=this,{gl:o}=e;r.dirtyId<0&&o.texImage3D(o.TEXTURE_2D_ARRAY,0,r.internalFormat,this._width,this._height,n,0,t.format,r.type,null);for(let a=0;a<n;a++){const e=s[a];i[a]<e.dirtyId&&(i[a]=e.dirtyId,e.valid&&o.texSubImage3D(o.TEXTURE_2D_ARRAY,0,0,0,a,e.resource.width,e.resource.height,1,t.format,r.type,e.resource.source))}return!0}}class YS extends TE{constructor(e){super(e)}static test(e){const{OffscreenCanvas:t}=globalThis;return!!(t&&e instanceof t)||globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}}const KS=class e extends qS{constructor(t,r){const{width:n,height:i,autoLoad:s,linkBaseTexture:o}=r||{};if(t&&t.length!==e.SIDES)throw new Error(`Invalid length. Got ${t.length}, expected 6`);super(6,{width:n,height:i});for(let a=0;a<e.SIDES;a++)this.items[a].target=rm.TEXTURE_CUBE_MAP_POSITIVE_X+a;this.linkBaseTexture=!1!==o,t&&this.initFromArray(t,r),!1!==s&&this.load()}bind(e){super.bind(e),e.target=rm.TEXTURE_CUBE_MAP}addBaseTextureAt(e,t,r){if(void 0===r&&(r=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0){if(!e.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(e.resource,t)}else e.target=rm.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this}upload(t,r,n){const i=this.itemDirtyIds;for(let s=0;s<e.SIDES;s++){const e=this.items[s];(i[s]<e.dirtyId||n.dirtyId<r.dirtyId)&&(e.valid&&e.resource?(e.resource.upload(t,e,n),i[s]=e.dirtyId):i[s]<-1&&(t.gl.texImage2D(e.target,0,n.internalFormat,r.realWidth,r.realHeight,0,r.format,n.type,null),i[s]=-1))}return!0}static test(t){return Array.isArray(t)&&t.length===e.SIDES}};KS.SIDES=6;let ZS=KS;class JS extends TE{constructor(e,t){let r,n,i;t=t||{},"string"==typeof e?(r=JS.EMPTY,n=e,i=!0):(r=e,n=null,i=!1),super(r),this.url=n,this.crossOrigin=t.crossOrigin??!0,this.alphaMode="number"==typeof t.alphaMode?t.alphaMode:null,this.ownsImageBitmap=t.ownsImageBitmap??i,this._load=null,!1!==t.autoLoad&&this.load()}load(){return this._load||(this._load=new Promise(async(e,t)=>{if(null!==this.url)try{const t=await ym.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const r=await t.blob();if(this.destroyed)return;const n=await createImageBitmap(r,{premultiplyAlpha:null===this.alphaMode||this.alphaMode===lm.UNPACK?"premultiply":"none"});if(this.destroyed)return void n.close();this.source=n,this.update(),e(this)}catch(Ove){if(this.destroyed)return;t(Ove),this.onError.emit(Ove)}else e(this)})),this._load}upload(e,t,r){return this.source instanceof ImageBitmap?("number"==typeof this.alphaMode&&(t.alphaMode=this.alphaMode),super.upload(e,t,r)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&("string"==typeof e||e instanceof ImageBitmap)}static get EMPTY(){return JS._EMPTY=JS._EMPTY??ym.ADAPTER.createCanvas(0,0),JS._EMPTY}}const QS=class e extends TE{constructor(e,t){t=t||{},super(ym.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,!1!==t.autoLoad&&this.load()}load(){return this._load||(this._load=new Promise(t=>{if(this._resolve=()=>{this.update(),t(this)},e.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()})),this._load}_loadSvg(){const e=new Image;TE.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=t=>{this._resolve&&(e.onerror=null,this.onError.emit(t))},e.onload=()=>{if(!this._resolve)return;const t=e.width,r=e.height;if(!t||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let n=t*this.scale,i=r*this.scale;(this._overrideWidth||this._overrideHeight)&&(n=this._overrideWidth||this._overrideHeight/r*t,i=this._overrideHeight||this._overrideWidth/t*r),n=Math.round(n),i=Math.round(i);const s=this.source;s.width=n,s.height=i,s._pixiId=`canvas_${Ow()}`,s.getContext("2d").drawImage(e,0,0,t,r,0,0,n,i),this._resolve(),this._resolve=null}}static getSize(t){const r=e.SVG_SIZE.exec(t),n={};return r&&(n[r[1]]=Math.round(parseFloat(r[3])),n[r[5]]=Math.round(parseFloat(r[7]))),n}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(t,r){return"svg"===r||"string"==typeof t&&t.startsWith("data:image/svg+xml")||"string"==typeof t&&e.SVG_XML.test(t)}};QS.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,QS.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let eC=QS;const tC=class e extends TE{constructor(t,r){if(r=r||{},!(t instanceof HTMLVideoElement)){const n=document.createElement("video");!1!==r.autoLoad&&n.setAttribute("preload","auto"),!1!==r.playsinline&&(n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline","")),!0===r.muted&&(n.setAttribute("muted",""),n.muted=!0),!0===r.loop&&n.setAttribute("loop",""),!1!==r.autoPlay&&n.setAttribute("autoplay",""),"string"==typeof t&&(t=[t]);const i=t[0].src||t[0];TE.crossOrigin(n,i,r.crossorigin);for(let r=0;r<t.length;++r){const i=document.createElement("source");let{src:s,mime:o}=t[r];if(s=s||t[r],s.startsWith("data:"))o=s.slice(5,s.indexOf(";"));else if(!s.startsWith("blob:")){const t=s.split("?").shift().toLowerCase(),r=t.slice(t.lastIndexOf(".")+1);o=o||e.MIME_TYPES[r]||`video/${r}`}i.src=s,o&&(i.type=o),n.appendChild(i)}t=n}super(t),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=r.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==r.autoPlay,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),!1!==r.autoLoad&&this.load()}update(e=0){if(!this.destroyed){if(this._updateFPS){const e=IS.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((t,r)=>{this.valid?t(this):(this._resolve=t,this._reject=r,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const t=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!t&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._configureAutoUpdate();const e=this.source;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(IS.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),null===this._videoFrameRequestCallbackHandle&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(null!==this._videoFrameRequestCallbackHandle&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(IS.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(null!==this._videoFrameRequestCallbackHandle&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(IS.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t,r){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||e.TYPES.includes(r)}};tC.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],tC.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let rC=tC;tx.push(JS,DE,YS,rC,class extends TE{constructor(e){super(e)}static test(e){return!!globalThis.VideoFrame&&e instanceof globalThis.VideoFrame}},eC,sx,ZS,XS);class nC{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?Cx.EMPTY:((e=e||new Cx(0,0,1,1)).x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,t){const{a:r,b:n,c:i,d:s,tx:o,ty:a}=e,l=r*t.x+i*t.y+o,u=n*t.x+s*t.y+a;this.minX=Math.min(this.minX,l),this.maxX=Math.max(this.maxX,l),this.minY=Math.min(this.minY,u),this.maxY=Math.max(this.maxY,u)}addQuad(e){let t=this.minX,r=this.minY,n=this.maxX,i=this.maxY,s=e[0],o=e[1];t=s<t?s:t,r=o<r?o:r,n=s>n?s:n,i=o>i?o:i,s=e[2],o=e[3],t=s<t?s:t,r=o<r?o:r,n=s>n?s:n,i=o>i?o:i,s=e[4],o=e[5],t=s<t?s:t,r=o<r?o:r,n=s>n?s:n,i=o>i?o:i,s=e[6],o=e[7],t=s<t?s:t,r=o<r?o:r,n=s>n?s:n,i=o>i?o:i,this.minX=t,this.minY=r,this.maxX=n,this.maxY=i}addFrame(e,t,r,n,i){this.addFrameMatrix(e.worldTransform,t,r,n,i)}addFrameMatrix(e,t,r,n,i){const s=e.a,o=e.b,a=e.c,l=e.d,u=e.tx,c=e.ty;let d=this.minX,h=this.minY,f=this.maxX,p=this.maxY,m=s*t+a*r+u,g=o*t+l*r+c;d=m<d?m:d,h=g<h?g:h,f=m>f?m:f,p=g>p?g:p,m=s*n+a*r+u,g=o*n+l*r+c,d=m<d?m:d,h=g<h?g:h,f=m>f?m:f,p=g>p?g:p,m=s*t+a*i+u,g=o*t+l*i+c,d=m<d?m:d,h=g<h?g:h,f=m>f?m:f,p=g>p?g:p,m=s*n+a*i+u,g=o*n+l*i+c,d=m<d?m:d,h=g<h?g:h,f=m>f?m:f,p=g>p?g:p,this.minX=d,this.minY=h,this.maxX=f,this.maxY=p}addVertexData(e,t,r){let n=this.minX,i=this.minY,s=this.maxX,o=this.maxY;for(let a=t;a<r;a+=2){const t=e[a],r=e[a+1];n=t<n?t:n,i=r<i?r:i,s=t>s?t:s,o=r>o?r:o}this.minX=n,this.minY=i,this.maxX=s,this.maxY=o}addVertices(e,t,r,n){this.addVerticesMatrix(e.worldTransform,t,r,n)}addVerticesMatrix(e,t,r,n,i=0,s=i){const o=e.a,a=e.b,l=e.c,u=e.d,c=e.tx,d=e.ty;let h=this.minX,f=this.minY,p=this.maxX,m=this.maxY;for(let g=r;g<n;g+=2){const e=t[g],r=t[g+1],n=o*e+l*r+c,y=u*r+a*e+d;h=Math.min(h,n-i),p=Math.max(p,n+i),f=Math.min(f,y-s),m=Math.max(m,y+s)}this.minX=h,this.minY=f,this.maxX=p,this.maxY=m}addBounds(e){const t=this.minX,r=this.minY,n=this.maxX,i=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<r?e.minY:r,this.maxX=e.maxX>n?e.maxX:n,this.maxY=e.maxY>i?e.maxY:i}addBoundsMask(e,t){const r=e.minX>t.minX?e.minX:t.minX,n=e.minY>t.minY?e.minY:t.minY,i=e.maxX<t.maxX?e.maxX:t.maxX,s=e.maxY<t.maxY?e.maxY:t.maxY;if(r<=i&&n<=s){const e=this.minX,t=this.minY,o=this.maxX,a=this.maxY;this.minX=r<e?r:e,this.minY=n<t?n:t,this.maxX=i>o?i:o,this.maxY=s>a?s:a}}addBoundsMatrix(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,t){const r=e.minX>t.x?e.minX:t.x,n=e.minY>t.y?e.minY:t.y,i=e.maxX<t.x+t.width?e.maxX:t.x+t.width,s=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(r<=i&&n<=s){const e=this.minX,t=this.minY,o=this.maxX,a=this.maxY;this.minX=r<e?r:e,this.minY=n<t?n:t,this.maxX=i>o?i:o,this.maxY=s>a?s:a}}pad(e=0,t=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)}addFramePad(e,t,r,n,i,s){e-=i,t-=s,r+=i,n+=s,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>n?this.maxY:n}}class iC extends Nm{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new zx,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new nC,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const t=Object.keys(e);for(let r=0;r<t.length;++r){const n=t[r];Object.defineProperty(iC.prototype,n,Object.getOwnPropertyDescriptor(e,n))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new Cx),t=this._boundsRect),this._bounds.getRectangle(t)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new Cx),e=this._localBoundsRect),this._localBounds||(this._localBounds=new nC);const t=this.transform,r=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=r?.worldAlpha??1,this.transform=this._tempDisplayObjectParent.transform;const n=this._bounds,i=this._boundsID;this._bounds=this._localBounds;const s=this.getBounds(!1,e);return this.parent=r,this.transform=t,this._bounds=n,this._bounds.updateID+=this._boundsID-i,s}toGlobal(e,t,r=!1){return r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)}toLocal(e,t,r,n){return t&&(e=t.toGlobal(e,r,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,r)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){this.parent?.removeChild(this)}setTransform(e=0,t=0,r=1,n=1,i=0,s=0,o=0,a=0,l=0){return this.position.x=e,this.position.y=t,this.scale.x=r||1,this.scale.y=n||1,this.rotation=i,this.skew.x=s,this.skew.y=o,this.pivot.x=a,this.pivot.y=l,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new sC),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*bx}set angle(e){this.transform.rotation=e*wx}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex!==e&&(this._zIndex=e,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount--,0===e._maskRefCount&&(e.renderable=!0,e.isMask=!1))}if(this._mask=e,this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(0===e._maskRefCount&&(e.renderable=!1,e.isMask=!0),e._maskRefCount++)}}}}class sC extends iC{constructor(){super(...arguments),this.sortDirty=null}}iC.prototype.displayObjectUpdateTransform=iC.prototype.updateTransform;const oC=new Px;function aC(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}const lC=class e extends iC{constructor(){super(),this.children=[],this.sortableChildren=e.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.addChild(e[t]);else{const t=e[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return e[0]}addChildAt(e,t){if(t<0||t>this.children.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}swapChildren(e,t){if(e===t)return;const r=this.getChildIndex(e),n=this.getChildIndex(t);this.children[r]=t,this.children[n]=e,this.onChildrenChange(r<n?r:n)}getChildIndex(e){const t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);const r=this.getChildIndex(e);kw(this.children,r,1),this.children.splice(t,0,e),this.onChildrenChange(t)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.removeChild(e[t]);else{const t=e[0],r=this.children.indexOf(t);if(-1===r)return null;t.parent=null,t.transform._parentID=-1,kw(this.children,r,1),this._boundsID++,this.onChildrenChange(r),t.emit("removed",this),this.emit("childRemoved",t,this,r)}return e[0]}removeChildAt(e){const t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,kw(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(e=0,t=this.children.length){const r=e,n=t-r;let i;if(n>0&&n<=t){i=this.children.splice(r,n);for(let e=0;e<i.length;++e)i[e].parent=null,i[e].transform&&(i[e].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let e=0;e<i.length;++e)i[e].emit("removed",this),this.emit("childRemoved",i[e],this,e);return i}if(0===n&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let t=0,r=this.children.length;t<r;++t){const r=this.children[t];r._lastSortedIndex=t,!e&&0!==r.zIndex&&(e=!0)}e&&this.children.length>1&&this.children.sort(aC),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,t=this.children.length;e<t;++e){const t=this.children[e];t.visible&&t.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const t=this.children[e];if(t.visible&&t.renderable)if(t.calculateBounds(),t._mask){const e=t._mask.isMaskData?t._mask.maskObject:t._mask;e?(e.calculateBounds(),this._bounds.addBoundsMask(t._bounds,e._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,t=!1){const r=super.getLocalBounds(e);if(!t)for(let n=0,i=this.children.length;n<i;++n){const e=this.children[n];e.visible&&e.updateTransform()}return r}_calculateBounds(){}_renderWithCulling(t){const r=t.renderTexture.sourceFrame;if(!(r.width>0&&r.height>0))return;let n,i;this.cullArea?(n=this.cullArea,i=this.worldTransform):this._render!==e.prototype._render&&(n=this.getBounds(!0));const s=t.projection.transform;if(s&&(i?(i=oC.copyFrom(i),i.prepend(s)):i=s),n&&r.intersects(n,i))this._render(t);else if(this.cullArea)return;for(let e=0,o=this.children.length;e<o;++e){const r=this.children[e],n=r.cullable;r.cullable=n||!this.cullArea,r.render(t),r.cullable=n}}render(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters?.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let t=0,r=this.children.length;t<r;++t)this.children[t].render(e)}}renderAdvanced(e){const t=this.filters,r=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let e=0;e<t.length;e++)t[e].enabled&&this._enabledFilters.push(t[e])}const n=t&&this._enabledFilters?.length||r&&(!r.isMaskData||r.enabled&&(r.autoDetect||r.type!==hm.NONE));if(n&&e.batch.flush(),t&&this._enabledFilters?.length&&e.filter.push(this,this._enabledFilters),r&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let t=0,r=this.children.length;t<r;++t)this.children[t].render(e)}n&&e.batch.flush(),r&&e.mask.pop(this),t&&this._enabledFilters?.length&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const t="boolean"==typeof e?e:e?.children,r=this.removeChildren(0,this.children.length);if(t)for(let n=0;n<r.length;++n)r[n].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const t=this.getLocalBounds().width;this.scale.x=0!==t?e/t:1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const t=this.getLocalBounds().height;this.scale.y=0!==t?e/t:1,this._height=e}};lC.defaultSortableChildren=!1;let uC=e("m",lC);uC.prototype.containerUpdateTransform=uC.prototype.updateTransform,Object.defineProperties(ym,{SORTABLE_CHILDREN:{get:()=>uC.defaultSortableChildren,set(e){Fb("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),uC.defaultSortableChildren=e}}});const cC=new Ex,dC=new Uint16Array([0,1,2,0,2,3]);let hC=class e extends uC{constructor(e){super(),this._anchor=new Ux(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new yw(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=Qp.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||OE.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=dC,this.pluginName="batch",this.isSprite=!0,this._roundPixels=ym.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Pw(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Pw(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const t=this.transform.worldTransform,r=t.a,n=t.b,i=t.c,s=t.d,o=t.tx,a=t.ty,l=this.vertexData,u=e.trim,c=e.orig,d=this._anchor;let h=0,f=0,p=0,m=0;if(u?(f=u.x-d._x*c.width,h=f+u.width,m=u.y-d._y*c.height,p=m+u.height):(f=-d._x*c.width,h=f+c.width,m=-d._y*c.height,p=m+c.height),l[0]=r*f+i*m+o,l[1]=s*m+n*f+a,l[2]=r*h+i*m+o,l[3]=s*m+n*h+a,l[4]=r*h+i*p+o,l[5]=s*p+n*h+a,l[6]=r*f+i*p+o,l[7]=s*p+n*f+a,this._roundPixels){const e=ym.RESOLUTION;for(let t=0;t<l.length;++t)l[t]=Math.round(l[t]*e)/e}}calculateTrimmedVertices(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const e=this._texture,t=this.vertexTrimmedData,r=e.orig,n=this._anchor,i=this.transform.worldTransform,s=i.a,o=i.b,a=i.c,l=i.d,u=i.tx,c=i.ty,d=-n._x*r.width,h=d+r.width,f=-n._y*r.height,p=f+r.height;if(t[0]=s*d+a*f+u,t[1]=l*f+o*d+c,t[2]=s*h+a*f+u,t[3]=l*f+o*h+c,t[4]=s*h+a*p+u,t[5]=l*p+o*h+c,t[6]=s*d+a*p+u,t[7]=l*p+o*d+c,this._roundPixels){const e=ym.RESOLUTION;for(let r=0;r<t.length;++r)t[r]=Math.round(t[r]*e)/e}}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return 0===this.children.length?(this._localBounds||(this._localBounds=new nC),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Cx),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,cC);const t=this._texture.orig.width,r=this._texture.orig.height,n=-t*this.anchor.x;let i=0;return cC.x>=n&&cC.x<n+t&&(i=-r*this.anchor.y,cC.y>=i&&cC.y<i+r)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof e?e:e?.texture){const t="boolean"==typeof e?e:e?.baseTexture;this._texture.destroy(!!t)}this._texture=null}static from(t,r){const n=t instanceof OE?t:OE.from(t,r);return new e(n)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const t=Pw(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const t=Pw(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||OE.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}};e("S",hC);const fC=new Px;iC.prototype._cacheAsBitmap=!1,iC.prototype._cacheData=null,iC.prototype._cacheAsBitmapResolution=null,iC.prototype._cacheAsBitmapMultisample=null;class pC{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(iC.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(e){e!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(e){e!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(e){if(this._cacheAsBitmap===e)return;let t;this._cacheAsBitmap=e,e?(this._cacheData||(this._cacheData=new pC),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}}),iC.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))},iC.prototype._initCachedDisplayObject=function(e){if(this._cacheData?.sprite)return;const t=this.alpha;this.alpha=1,e.batch.flush();const r=this.getLocalBounds(new Cx,!0);if(this.filters?.length){const e=this.filters[0].padding;r.pad(e)}const n=this.cacheAsBitmapResolution||e.resolution;r.ceil(n),r.width=Math.max(r.width,1/n),r.height=Math.max(r.height,1/n);const i=e.renderTexture.current,s=e.renderTexture.sourceFrame.clone(),o=e.renderTexture.destinationFrame.clone(),a=e.projection.transform,l=RE.create({width:r.width,height:r.height,resolution:n,multisample:this.cacheAsBitmapMultisample??e.multisample}),u=`cacheAsBitmap_${Ow()}`;this._cacheData.textureCacheId=u,lx.addToCache(l.baseTexture,u),OE.addToCache(l,u);const c=this.transform.localTransform.copyTo(fC).invert().translate(-r.x,-r.y);this.render=this._cacheData.originalRender,e.render(this,{renderTexture:l,clear:!0,transform:c,skipUpdateTransform:!1}),e.framebuffer.blit(),e.projection.transform=a,e.renderTexture.bind(i,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;const d=new hC(l);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-r.x/r.width,d.anchor.y=-r.y/r.height,d.alpha=t,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=d.containsPoint.bind(d)},iC.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))},iC.prototype._initCachedDisplayObjectCanvas=function(e){if(this._cacheData?.sprite)return;const t=this.getLocalBounds(new Cx,!0),r=this.alpha;this.alpha=1;const n=e.canvasContext.activeContext,i=e._projTransform,s=this.cacheAsBitmapResolution||e.resolution;t.ceil(s),t.width=Math.max(t.width,1/s),t.height=Math.max(t.height,1/s);const o=RE.create({width:t.width,height:t.height,resolution:s}),a=`cacheAsBitmap_${Ow()}`;this._cacheData.textureCacheId=a,lx.addToCache(o.baseTexture,a),OE.addToCache(o,a);const l=fC;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=t.x,l.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),e.canvasContext.activeContext=n,e._projTransform=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;const u=new hC(o);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-t.x/t.width,u.anchor.y=-t.y/t.height,u.alpha=r,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)},iC.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},iC.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},iC.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,lx.removeFromCache(this._cacheData.textureCacheId),OE.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},iC.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)},iC.prototype.name=null,uC.prototype.getChildByName=function(e,t){for(let r=0,n=this.children.length;r<n;r++)if(this.children[r].name===e)return this.children[r];if(t)for(let r=0,n=this.children.length;r<n;r++){const t=this.children[r];if(!t.getChildByName)continue;const n=t.getChildByName(e,!0);if(n)return n}return null},iC.prototype.getGlobalPosition=function(e=new Ex,t=!1){return this.parent?this.parent.toGlobal(this.position,e,t):(e.x=this.position.x,e.y=this.position.y),e};class mC extends bE{constructor(e=1){super(US,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}const gC={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},yC=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");class vC extends bE{constructor(e,t=8,r=4,n=bE.defaultResolution,i=5){const s=function(e,t){const r=Math.ceil(e/2);let n,i="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",s="";n=t?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<e;o++){let e=n.replace("%index%",o.toString());e=e.replace("%sampleIndex%",o-(r-1)+".0"),s+=e,s+="\n"}return i=i.replace("%blur%",s),i=i.replace("%size%",e.toString()),i}(i,e),o=function(e){const t=gC[e],r=t.length;let n,i=yC,s="";for(let o=0;o<e;o++){let i="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",o.toString());n=o,o>=r&&(n=e-o-1),i=i.replace("%value%",t[n].toString()),s+=i,s+="\n"}return i=i.replace("%blur%",s),i=i.replace("%size%",e.toString()),i}(i);super(s,o),this.horizontal=e,this.resolution=n,this._quality=0,this.quality=r,this.blur=t}apply(e,t,r,n){if(r?this.horizontal?this.uniforms.strength=1/r.width*(r.width/t.width):this.uniforms.strength=1/r.height*(r.height/t.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/t.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/t.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,t,r,n);else{const i=e.getFilterTexture(),s=e.renderer;let o=t,a=i;this.state.blend=!1,e.applyFilter(this,o,a,um.CLEAR);for(let t=1;t<this.passes-1;t++){e.bindAndClear(o,um.BLIT),this.uniforms.uSampler=a;const t=a;a=o,o=t,s.shader.bind(this),s.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,a,r,n),e.returnFilterTexture(i)}}get blur(){return this.strength}set blur(e){this.padding=1+2*Math.abs(e),this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}}let _C=class extends bE{constructor(e=8,t=4,r=bE.defaultResolution,n=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new vC(!0,e,t,r,n),this.blurYFilter=new vC(!1,e,t,r,n),this.resolution=r,this.quality=t,this.blur=e,this.repeatEdgePixels=!1}apply(e,t,r,n){const i=Math.abs(this.blurXFilter.strength),s=Math.abs(this.blurYFilter.strength);if(i&&s){const i=e.getFilterTexture();this.blurXFilter.apply(e,t,i,um.CLEAR),this.blurYFilter.apply(e,i,r,n),e.returnFilterTexture(i)}else s?this.blurYFilter.apply(e,t,r,n):this.blurXFilter.apply(e,t,r,n)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}};e("B",_C);class bC extends bE{constructor(){const e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(jS,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",e),this.alpha=1}_loadMatrix(e,t=!1){let r=e;t&&(this._multiply(r,this.uniforms.m,e),r=this._colorMatrix(r)),this.uniforms.m=r}_multiply(e,t,r){return e[0]=t[0]*r[0]+t[1]*r[5]+t[2]*r[10]+t[3]*r[15],e[1]=t[0]*r[1]+t[1]*r[6]+t[2]*r[11]+t[3]*r[16],e[2]=t[0]*r[2]+t[1]*r[7]+t[2]*r[12]+t[3]*r[17],e[3]=t[0]*r[3]+t[1]*r[8]+t[2]*r[13]+t[3]*r[18],e[4]=t[0]*r[4]+t[1]*r[9]+t[2]*r[14]+t[3]*r[19]+t[4],e[5]=t[5]*r[0]+t[6]*r[5]+t[7]*r[10]+t[8]*r[15],e[6]=t[5]*r[1]+t[6]*r[6]+t[7]*r[11]+t[8]*r[16],e[7]=t[5]*r[2]+t[6]*r[7]+t[7]*r[12]+t[8]*r[17],e[8]=t[5]*r[3]+t[6]*r[8]+t[7]*r[13]+t[8]*r[18],e[9]=t[5]*r[4]+t[6]*r[9]+t[7]*r[14]+t[8]*r[19]+t[9],e[10]=t[10]*r[0]+t[11]*r[5]+t[12]*r[10]+t[13]*r[15],e[11]=t[10]*r[1]+t[11]*r[6]+t[12]*r[11]+t[13]*r[16],e[12]=t[10]*r[2]+t[11]*r[7]+t[12]*r[12]+t[13]*r[17],e[13]=t[10]*r[3]+t[11]*r[8]+t[12]*r[13]+t[13]*r[18],e[14]=t[10]*r[4]+t[11]*r[9]+t[12]*r[14]+t[13]*r[19]+t[14],e[15]=t[15]*r[0]+t[16]*r[5]+t[17]*r[10]+t[18]*r[15],e[16]=t[15]*r[1]+t[16]*r[6]+t[17]*r[11]+t[18]*r[16],e[17]=t[15]*r[2]+t[16]*r[7]+t[17]*r[12]+t[18]*r[17],e[18]=t[15]*r[3]+t[16]*r[8]+t[17]*r[13]+t[18]*r[18],e[19]=t[15]*r[4]+t[16]*r[9]+t[17]*r[14]+t[18]*r[19]+t[19],e}_colorMatrix(e){const t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t}brightness(e,t){const r=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(r,t)}tint(e,t){const[r,n,i]=yw.shared.setValue(e).toArray(),s=[r,0,0,0,0,0,n,0,0,0,0,0,i,0,0,0,0,0,1,0];this._loadMatrix(s,t)}greyscale(e,t){const r=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(r,t)}blackAndWhite(e){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],e)}hue(e,t){e=(e||0)/180*Math.PI;const r=Math.cos(e),n=Math.sin(e),i=1/3,s=(0,Math.sqrt)(i),o=[r+(1-r)*i,i*(1-r)-s*n,i*(1-r)+s*n,0,0,i*(1-r)+s*n,r+i*(1-r),i*(1-r)-s*n,0,0,i*(1-r)-s*n,i*(1-r)+s*n,r+i*(1-r),0,0,0,0,0,1,0];this._loadMatrix(o,t)}contrast(e,t){const r=(e||0)+1,n=-.5*(r-1),i=[r,0,0,0,n,0,r,0,0,n,0,0,r,0,n,0,0,0,1,0];this._loadMatrix(i,t)}saturate(e=0,t){const r=2*e/3+1,n=-.5*(r-1),i=[r,n,n,0,0,n,r,n,0,0,n,n,r,0,0,0,0,0,1,0];this._loadMatrix(i,t)}desaturate(){this.saturate(-1)}negative(e){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],e)}sepia(e){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],e)}technicolor(e){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],e)}polaroid(e){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],e)}toBGR(e){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],e)}kodachrome(e){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],e)}browni(e){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],e)}vintage(e){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],e)}colorTone(e,t,r,n,i){e=e||.2,t=t||.15,r=r||16770432,n=n||3375104;const s=yw.shared,[o,a,l]=s.setValue(r).toArray(),[u,c,d]=s.setValue(n).toArray(),h=[.3,.59,.11,0,0,o,a,l,e,0,u,c,d,t,0,o-u,a-c,l-d,0,0];this._loadMatrix(h,i)}night(e,t){const r=[-2*(e=e||.1),-e,0,0,0,-e,0,e,0,0,0,e,2*e,0,0,0,0,0,1,0];this._loadMatrix(r,t)}predator(e,t){const r=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(r,t)}lsd(e){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],e)}reset(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}e("C",bC),bC.prototype.grayscale=bC.prototype.greyscale;class wC extends bE{constructor(e,t){const r=new Px;e.renderable=!1,super("attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:e._texture,filterMatrix:r,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=r,null==t&&(t=20),this.scale=new Ex(t,t)}apply(e,t,r,n){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const i=this.maskSprite.worldTransform,s=Math.sqrt(i.a*i.a+i.b*i.b),o=Math.sqrt(i.c*i.c+i.d*i.d);0!==s&&0!==o&&(this.uniforms.rotation[0]=i.a/s,this.uniforms.rotation[1]=i.b/s,this.uniforms.rotation[2]=i.c/o,this.uniforms.rotation[3]=i.d/o),e.applyFilter(this,t,r,n)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}}class xC extends bE{constructor(){super("\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')}}let EC=class extends bE{constructor(e=.5,t=Math.random()){super(jS,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0}),this.noise=e,this.seed=t}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}};e("N",EC);const SC={AlphaFilter:mC,BlurFilter:_C,BlurFilterPass:vC,ColorMatrixFilter:bC,DisplacementFilter:wC,FXAAFilter:xC,NoiseFilter:EC};Object.entries(SC).forEach(([e,t])=>{Object.defineProperty(SC,e,{get:()=>(Fb("7.1.0",`filters.${e} has moved to ${e}`),t)})});const CC=new class{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this.tickerAdded||!this.domElement||(IS.system.add(this.tickerUpdate,this,OS.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(IS.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove)return void(this._didMove=!1);const e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&"touch"===e.pointerType||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}tickerUpdate(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}};class AC{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=AC.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Ex,this.page=new Ex,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,t,r){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,t,r,n,i){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class TC extends AC{constructor(){super(...arguments),this.client=new Ex,this.movement=new Ex,this.offset=new Ex,this.global=new Ex,this.screen=new Ex}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,t,r){return e.worldTransform.applyInverse(r||this.global,t)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,t,r,n,i,s,o,a,l,u,c,d,h,f,p){throw new Error("Method not implemented.")}}class DC extends TC{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class kC extends TC{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}kC.DOM_DELTA_PIXEL=0,kC.DOM_DELTA_LINE=1,kC.DOM_DELTA_PAGE=2;const PC=new Ex,BC=new Ex;class OC{constructor(e){this.dispatch=new Nm,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort((e,t)=>e.priority-t.priority)}dispatchEvent(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const t=this.mappingTable[e.type];if(t)for(let r=0,n=t.length;r<n;r++)t[r].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,t){CC.pauseUpdate=!0;const r=this[this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive"](this.rootTarget,this.rootTarget.eventMode,PC.set(e,t),this.hitTestFn,this.hitPruneFn);return r&&r[0]}propagate(e,t){if(!e.target)return;const r=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let n=0,i=r.length-1;n<i;n++)if(e.currentTarget=r[n],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!e.propagationStopped&&!e.propagationImmediatelyStopped){e.eventPhase=e.BUBBLING_PHASE;for(let n=r.length-2;n>=0;n--)if(e.currentTarget=r[n],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,t,r=this._allInteractiveElements){if(0===r.length)return;e.eventPhase=e.BUBBLING_PHASE;const n=Array.isArray(t)?t:[t];for(let i=r.length-1;i>=0;i--)n.forEach(t=>{e.currentTarget=r[i],this.notifyTarget(e,t)})}propagationPath(e){const t=[e];for(let r=0;r<2048&&e!==this.rootTarget;r++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent}return t.reverse(),t}hitTestMoveRecursive(e,t,r,n,i,s=!1){let o=!1;if(this._interactivePrune(e))return null;if(("dynamic"===e.eventMode||"dynamic"===t)&&(CC.pauseUpdate=!1),e.interactiveChildren&&e.children){const a=e.children;for(let l=a.length-1;l>=0;l--){const u=a[l],c=this.hitTestMoveRecursive(u,this._isInteractive(t)?t:u.eventMode,r,n,i,s||i(e,r));if(c){if(c.length>0&&!c[c.length-1].parent)continue;const t=e.isInteractive();(c.length>0||t)&&(t&&this._allInteractiveElements.push(e),c.push(e)),0===this._hitElements.length&&(this._hitElements=c),o=!0}}}const a=this._isInteractive(t),l=e.isInteractive();return a&&l&&this._allInteractiveElements.push(e),s||this._hitElements.length>0?null:o?this._hitElements:a&&!i(e,r)&&n(e,r)?l?[e]:[]:null}hitTestRecursive(e,t,r,n,i){if(this._interactivePrune(e)||i(e,r))return null;if(("dynamic"===e.eventMode||"dynamic"===t)&&(CC.pauseUpdate=!1),e.interactiveChildren&&e.children){const s=e.children;for(let o=s.length-1;o>=0;o--){const a=s[o],l=this.hitTestRecursive(a,this._isInteractive(t)?t:a.eventMode,r,n,i);if(l){if(l.length>0&&!l[l.length-1].parent)continue;const t=e.isInteractive();return(l.length>0||t)&&l.push(e),l}}}const s=this._isInteractive(t),o=e.isInteractive();return s&&n(e,r)?o?[e]:[]:null}_isInteractive(e){return"static"===e||"dynamic"===e}_interactivePrune(e){return!(e&&!e.isMask&&e.visible&&e.renderable&&"none"!==e.eventMode&&("passive"!==e.eventMode||e.interactiveChildren)&&!e.isMask)}hitPruneFn(e,t){if(e.hitArea&&(e.worldTransform.applyInverse(t,BC),!e.hitArea.contains(BC.x,BC.y)))return!0;if(e._mask){const r=e._mask.isMaskData?e._mask.maskObject:e._mask;if(r&&!r.containsPoint?.(t))return!0}return!1}hitTestFn(e,t){return"passive"!==e.eventMode&&(!!e.hitArea||!!e.containsPoint&&e.containsPoint(t))}notifyTarget(e,t){const r=`on${t=t??e.type}`;e.currentTarget[r]?.(e);const n=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${t}capture`:t;this.notifyListeners(e,n),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,t)}mapPointerDown(e){if(!(e instanceof DC))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const t=this.createPointerEvent(e);if(this.dispatchEvent(t,"pointerdown"),"touch"===t.pointerType)this.dispatchEvent(t,"touchstart");else if("mouse"===t.pointerType||"pen"===t.pointerType){const e=2===t.button;this.dispatchEvent(t,e?"rightdown":"mousedown")}this.trackingData(e.pointerId).pressTargetsByButton[e.button]=t.composedPath(),this.freeEvent(t)}mapPointerMove(e){if(!(e instanceof DC))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const t=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const r="mouse"===t.pointerType||"pen"===t.pointerType,n=this.trackingData(e.pointerId),i=this.findMountedTarget(n.overTargets);if(n.overTargets?.length>0&&i!==t.target){const n="mousemove"===e.type?"mouseout":"pointerout",s=this.createPointerEvent(e,n,i);if(this.dispatchEvent(s,"pointerout"),r&&this.dispatchEvent(s,"mouseout"),!t.composedPath().includes(i)){const n=this.createPointerEvent(e,"pointerleave",i);for(n.eventPhase=n.AT_TARGET;n.target&&!t.composedPath().includes(n.target);)n.currentTarget=n.target,this.notifyTarget(n),r&&this.notifyTarget(n,"mouseleave"),n.target=n.target.parent;this.freeEvent(n)}this.freeEvent(s)}if(i!==t.target){const n="mousemove"===e.type?"mouseover":"pointerover",s=this.clonePointerEvent(t,n);this.dispatchEvent(s,"pointerover"),r&&this.dispatchEvent(s,"mouseover");let o=i?.parent;for(;o&&o!==this.rootTarget.parent&&o!==t.target;)o=o.parent;if(!o||o===this.rootTarget.parent){const e=this.clonePointerEvent(t,"pointerenter");for(e.eventPhase=e.AT_TARGET;e.target&&e.target!==i&&e.target!==this.rootTarget.parent;)e.currentTarget=e.target,this.notifyTarget(e),r&&this.notifyTarget(e,"mouseenter"),e.target=e.target.parent;this.freeEvent(e)}this.freeEvent(s)}const s=[],o=this.enableGlobalMoveEvents??!0;this.moveOnAll?s.push("pointermove"):this.dispatchEvent(t,"pointermove"),o&&s.push("globalpointermove"),"touch"===t.pointerType&&(this.moveOnAll?s.splice(1,0,"touchmove"):this.dispatchEvent(t,"touchmove"),o&&s.push("globaltouchmove")),r&&(this.moveOnAll?s.splice(1,0,"mousemove"):this.dispatchEvent(t,"mousemove"),o&&s.push("globalmousemove"),this.cursor=t.target?.cursor),s.length>0&&this.all(t,s),this._allInteractiveElements.length=0,this._hitElements.length=0,n.overTargets=t.composedPath(),this.freeEvent(t)}mapPointerOver(e){if(!(e instanceof DC))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const t=this.trackingData(e.pointerId),r=this.createPointerEvent(e),n="mouse"===r.pointerType||"pen"===r.pointerType;this.dispatchEvent(r,"pointerover"),n&&this.dispatchEvent(r,"mouseover"),"mouse"===r.pointerType&&(this.cursor=r.target?.cursor);const i=this.clonePointerEvent(r,"pointerenter");for(i.eventPhase=i.AT_TARGET;i.target&&i.target!==this.rootTarget.parent;)i.currentTarget=i.target,this.notifyTarget(i),n&&this.notifyTarget(i,"mouseenter"),i.target=i.target.parent;t.overTargets=r.composedPath(),this.freeEvent(r),this.freeEvent(i)}mapPointerOut(e){if(!(e instanceof DC))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const t=this.trackingData(e.pointerId);if(t.overTargets){const r="mouse"===e.pointerType||"pen"===e.pointerType,n=this.findMountedTarget(t.overTargets),i=this.createPointerEvent(e,"pointerout",n);this.dispatchEvent(i),r&&this.dispatchEvent(i,"mouseout");const s=this.createPointerEvent(e,"pointerleave",n);for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),r&&this.notifyTarget(s,"mouseleave"),s.target=s.target.parent;t.overTargets=null,this.freeEvent(i),this.freeEvent(s)}this.cursor=null}mapPointerUp(e){if(!(e instanceof DC))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const t=performance.now(),r=this.createPointerEvent(e);if(this.dispatchEvent(r,"pointerup"),"touch"===r.pointerType)this.dispatchEvent(r,"touchend");else if("mouse"===r.pointerType||"pen"===r.pointerType){const e=2===r.button;this.dispatchEvent(r,e?"rightup":"mouseup")}const n=this.trackingData(e.pointerId),i=this.findMountedTarget(n.pressTargetsByButton[e.button]);let s=i;if(i&&!r.composedPath().includes(i)){let t=i;for(;t&&!r.composedPath().includes(t);){if(r.currentTarget=t,this.notifyTarget(r,"pointerupoutside"),"touch"===r.pointerType)this.notifyTarget(r,"touchendoutside");else if("mouse"===r.pointerType||"pen"===r.pointerType){const e=2===r.button;this.notifyTarget(r,e?"rightupoutside":"mouseupoutside")}t=t.parent}delete n.pressTargetsByButton[e.button],s=t}if(s){const i=this.clonePointerEvent(r,"click");i.target=s,i.path=null,n.clicksByButton[e.button]||(n.clicksByButton[e.button]={clickCount:0,target:i.target,timeStamp:t});const o=n.clicksByButton[e.button];if(o.target===i.target&&t-o.timeStamp<200?++o.clickCount:o.clickCount=1,o.target=i.target,o.timeStamp=t,i.detail=o.clickCount,"mouse"===i.pointerType){const e=2===i.button;this.dispatchEvent(i,e?"rightclick":"click")}else"touch"===i.pointerType&&this.dispatchEvent(i,"tap");this.dispatchEvent(i,"pointertap"),this.freeEvent(i)}this.freeEvent(r)}mapPointerUpOutside(e){if(!(e instanceof DC))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const t=this.trackingData(e.pointerId),r=this.findMountedTarget(t.pressTargetsByButton[e.button]),n=this.createPointerEvent(e);if(r){let i=r;for(;i;)n.currentTarget=i,this.notifyTarget(n,"pointerupoutside"),"touch"===n.pointerType?this.notifyTarget(n,"touchendoutside"):("mouse"===n.pointerType||"pen"===n.pointerType)&&this.notifyTarget(n,2===n.button?"rightupoutside":"mouseupoutside"),i=i.parent;delete t.pressTargetsByButton[e.button]}this.freeEvent(n)}mapWheel(e){if(!(e instanceof kC))return void console.warn("EventBoundary cannot map a non-wheel event as a wheel event");const t=this.createWheelEvent(e);this.dispatchEvent(t),this.freeEvent(t)}findMountedTarget(e){if(!e)return null;let t=e[0];for(let r=1;r<e.length&&e[r].parent===t;r++)t=e[r];return t}createPointerEvent(e,t,r){const n=this.allocateEvent(DC);return this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.nativeEvent=e.nativeEvent,n.originalEvent=e,n.target=r??this.hitTest(n.global.x,n.global.y)??this._hitElements[0],"string"==typeof t&&(n.type=t),n}createWheelEvent(e){const t=this.allocateEvent(kC);return this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e,t.target=this.hitTest(t.global.x,t.global.y),t}clonePointerEvent(e,t){const r=this.allocateEvent(DC);return r.nativeEvent=e.nativeEvent,r.originalEvent=e.originalEvent,this.copyPointerData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.target=e.target,r.path=e.composedPath().slice(),r.type=t??r.type,r}copyWheelData(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}copyPointerData(e,t){e instanceof DC&&t instanceof DC&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}copyMouseData(e,t){e instanceof TC&&t instanceof TC&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.copyFrom(e.client),t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.copyFrom(e.movement),t.screen.copyFrom(e.screen),t.shiftKey=e.shiftKey,t.global.copyFrom(e.global))}copyData(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.copyFrom(e.layer),t.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=null,t.target=null,t}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}notifyListeners(e,t){const r=e.currentTarget._events[t];if(r&&e.currentTarget.isInteractive())if("fn"in r)r.once&&e.currentTarget.removeListener(t,r.fn,void 0,!0),r.fn.call(r.context,e);else for(let n=0,i=r.length;n<i&&!e.propagationImmediatelyStopped;n++)r[n].once&&e.currentTarget.removeListener(t,r[n].fn,void 0,!0),r[n].fn.call(r[n].context,e)}}const RC={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},FC=class e{constructor(t){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new OC(null),CC.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new DC(null),this.rootWheelEvent=new kC(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...e.defaultEventFeatures},{set:(e,t,r)=>("globalMove"===t&&(this.rootBoundary.enableGlobalMoveEvents=r),e[t]=r,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(t){const{view:r,resolution:n}=this.renderer;this.setTargetElement(r),this.resolution=n,e._defaultEventMode=t.eventMode??"auto",Object.assign(this.features,t.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this.currentCursor===e)return;this.currentCursor=e;const r=this.cursorStyles[e];if(r)switch(typeof r){case"string":t&&(this.domElement.style.cursor=r);break;case"function":r(e);break;case"object":t&&Object.assign(this.domElement.style,r)}else t&&"string"==typeof e&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let r=0,n=t.length;r<n;r++){const e=t[r],n=this.bootstrapEvent(this.rootPointerEvent,e);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,CC.pointerMoved();const t=this.normalizeToPointerData(e);for(let r=0,n=t.length;r<n;r++){const e=this.bootstrapEvent(this.rootPointerEvent,t[r]);this.rootBoundary.mapEvent(e)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);const r=t!==this.domElement?"outside":"",n=this.normalizeToPointerData(e);for(let i=0,s=n.length;i<s;i++){const e=this.bootstrapEvent(this.rootPointerEvent,n[i]);e.type+=r,this.rootBoundary.mapEvent(e)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this.normalizeToPointerData(e);for(let r=0,n=t.length;r<n;r++){const e=this.bootstrapEvent(this.rootPointerEvent,t[r]);this.rootBoundary.mapEvent(e)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this.removeEvents(),this.domElement=e,CC.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;CC.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;CC.removeTickerListener();const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,t,r){const n=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},i=1/this.resolution;e.x=(t-n.left)*(this.domElement.width/n.width)*i,e.y=(r-n.top)*(this.domElement.height/n.height)*i}normalizeToPointerData(e){const t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let r=0,n=e.changedTouches.length;r<n;r++){const n=e.changedTouches[r];typeof n.button>"u"&&(n.button=0),typeof n.buttons>"u"&&(n.buttons=1),typeof n.isPrimary>"u"&&(n.isPrimary=1===e.touches.length&&"touchstart"===e.type),typeof n.width>"u"&&(n.width=n.radiusX||1),typeof n.height>"u"&&(n.height=n.radiusY||1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="touch"),typeof n.pointerId>"u"&&(n.pointerId=n.identifier||0),typeof n.pressure>"u"&&(n.pressure=n.force||.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),typeof n.layerX>"u"&&(n.layerX=n.offsetX=n.clientX),typeof n.layerY>"u"&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,n.type=e.type,t.push(n)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&!(this.supportsPointerEvents&&e instanceof globalThis.PointerEvent)){const r=e;typeof r.isPrimary>"u"&&(r.isPrimary=!0),typeof r.width>"u"&&(r.width=1),typeof r.height>"u"&&(r.height=1),typeof r.tiltX>"u"&&(r.tiltX=0),typeof r.tiltY>"u"&&(r.tiltY=0),typeof r.pointerType>"u"&&(r.pointerType="mouse"),typeof r.pointerId>"u"&&(r.pointerId=1),typeof r.pressure>"u"&&(r.pressure=.5),typeof r.twist>"u"&&(r.twist=0),typeof r.tangentialPressure>"u"&&(r.tangentialPressure=0),r.isNormalized=!0,t.push(r)}else t.push(e);return t}normalizeWheelEvent(e){const t=this.rootWheelEvent;return this.transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,"pointerleave"===e.type&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=RC[e.type]||e.type),e}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};FC.extension={name:"events",type:[Ww.RendererSystem,Ww.CanvasRendererSystem]},FC.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let IC=FC;function MC(e){return"dynamic"===e||"static"===e}Yw.add(IC);const NC={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??MC(IC.defaultEventMode)},set interactive(e){Fb("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=e,this.eventMode=e?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??IC.defaultEventMode},set eventMode(e){this._internalInteractive=MC(e),this._internalEventMode=e},isInteractive(){return"static"===this.eventMode||"dynamic"===this.eventMode},interactiveChildren:!0,hitArea:null,addEventListener(e,t,r){const n="boolean"==typeof r&&r||"object"==typeof r&&r.capture,i="object"==typeof r?r.signal:void 0,s="object"==typeof r&&!0===r.once,o="function"==typeof t?void 0:t;e=n?`${e}capture`:e;const a="function"==typeof t?t:t.handleEvent,l=this;i&&i.addEventListener("abort",()=>{l.off(e,a,o)}),s?l.once(e,a,o):l.on(e,a,o)},removeEventListener(e,t,r){const n="function"==typeof t?void 0:t;e="boolean"==typeof r&&r||"object"==typeof r&&r.capture?`${e}capture`:e,t="function"==typeof t?t:t.handleEvent,this.off(e,t,n)},dispatchEvent(e){if(!(e instanceof AC))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return e.defaultPrevented=!1,e.path=null,e.target=this,e.manager.dispatchEvent(e),!e.defaultPrevented}};iC.mixin(NC);const LC={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};iC.mixin(LC);class UC{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Im.tablet||Im.phone)&&this.createTouchHook();const t=document.createElement("div");t.style.width="100px",t.style.height="100px",t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.zIndex=2..toString(),this.div=t,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2..toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode?.appendChild(this.div))}deactivate(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode?.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const t=e.children;if(t)for(let r=0;r<t.length;r++)this.updateAccessibleObjects(t[r])}update(){const e=performance.now();if(Im.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:t,y:r,width:n,height:i}=this.renderer.view.getBoundingClientRect(),{width:s,height:o,resolution:a}=this.renderer,l=n/s*a,u=i/o*a;let c=this.div;c.style.left=`${t}px`,c.style.top=`${r}px`,c.style.width=`${s}px`,c.style.height=`${o}px`;for(let d=0;d<this.children.length;d++){const e=this.children[d];if(e.renderId!==this.renderId)e._accessibleActive=!1,kw(this.children,d,1),this.div.removeChild(e._accessibleDiv),this.pool.push(e._accessibleDiv),e._accessibleDiv=null,d--;else{c=e._accessibleDiv;let t=e.hitArea;const r=e.worldTransform;e.hitArea?(c.style.left=(r.tx+t.x*r.a)*l+"px",c.style.top=(r.ty+t.y*r.d)*u+"px",c.style.width=t.width*r.a*l+"px",c.style.height=t.height*r.d*u+"px"):(t=e.getBounds(),this.capHitArea(t),c.style.left=t.x*l+"px",c.style.top=t.y*u+"px",c.style.width=t.width*l+"px",c.style.height=t.height*u+"px",c.title!==e.accessibleTitle&&null!==e.accessibleTitle&&(c.title=e.accessibleTitle),c.getAttribute("aria-label")!==e.accessibleHint&&null!==e.accessibleHint&&c.setAttribute("aria-label",e.accessibleHint)),(e.accessibleTitle!==c.title||e.tabIndex!==c.tabIndex)&&(c.title=e.accessibleTitle,c.tabIndex=e.tabIndex,this.debug&&this.updateDebugHTML(c))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:t,height:r}=this.renderer;e.x+e.width>t&&(e.width=t-e.x),e.y+e.height>r&&(e.height=r-e.y)}addChild(e){let t=this.pool.pop();t||(t=document.createElement("button"),t.style.width="100px",t.style.height="100px",t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=2..toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&null!==e.accessibleTitle?t.title=e.accessibleTitle:(!e.accessibleHint||null===e.accessibleHint)&&(t.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&null!==e.accessibleHint&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,t){const{displayObject:r}=e.target,n=this.renderer.events.rootBoundary,i=Object.assign(new AC(n),{target:r});n.rootTarget=this.renderer.lastObjectRendered,t.forEach(e=>n.dispatchEvent(i,e))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){9===e.keyCode&&this.activate()}_onMouseMove(e){0===e.movementX&&0===e.movementY||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}UC.extension={name:"accessibility",type:[Ww.RendererPlugin,Ww.CanvasRendererPlugin]},Yw.add(UC);const jC=class e{constructor(t){this.stage=new uC,t=Object.assign({forceCanvas:!1},t),this.renderer=LS(t),e._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer?.view}get screen(){return this.renderer?.screen}destroy(t,r){const n=e._plugins.slice(0);n.reverse(),n.forEach(e=>{e.destroy.call(this)}),this.stage.destroy(r),this.stage=null,this.renderer.destroy(t),this.renderer=null}};jC._plugins=[];let zC=e("x",jC);Yw.handleByList(Ww.Application,zC._plugins);class VC{static init(e){Object.defineProperty(this,"resizeTo",{set(e){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=e,e&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;let e,t;if(this.cancelResize(),this._resizeTo===globalThis.window)e=globalThis.innerWidth,t=globalThis.innerHeight;else{const{clientWidth:r,clientHeight:n}=this._resizeTo;e=r,t=n}this.renderer.resize(e,t),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}VC.extension=Ww.Application,Yw.add(VC);const GC={loader:Ww.LoadParser,resolver:Ww.ResolveParser,cache:Ww.CacheParser,detection:Ww.DetectionParser};Yw.handle(Ww.Asset,e=>{const t=e.ref;Object.entries(GC).filter(([e])=>!!t[e]).forEach(([e,r])=>Yw.add(Object.assign(t[e],{extension:t[e].extension??r})))},e=>{const t=e.ref;Object.keys(GC).filter(e=>!!t[e]).forEach(e=>Yw.remove(t[e]))});class HC{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(e=>{this._assetList.push(e)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let r=0;r<t;r++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function $C(e,t){if(Array.isArray(t)){for(const r of t)if(e.startsWith(`data:${r}`))return!0;return!1}return e.startsWith(`data:${t}`)}function WC(e,t){const r=e.split("?")[0],n=Lb.extname(r).toLowerCase();return Array.isArray(t)?t.includes(n):n===t}const qC=(e,t,r=!1)=>(Array.isArray(e)||(e=[e]),t?e.map(e=>"string"==typeof e||r?t(e):e):e),XC=(e,t)=>{const r=t.split("?")[1];return r&&(e+=`?${r}`),e};function YC(e,t,r,n,i){const s=t[r];for(let o=0;o<s.length;o++){const a=s[o];r<t.length-1?YC(e.replace(n[r],a),t,r+1,n,i):i.push(e.replace(n[r],a))}}function KC(e){const t=e.match(/\{(.*?)\}/g),r=[];if(t){const n=[];t.forEach(e=>{const t=e.substring(1,e.length-1).split(",");n.push(t)}),YC(e,n,0,t,r)}else r.push(e);return r}const ZC=e=>!Array.isArray(e),JC=new class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){const r=qC(e);let n;for(let o=0;o<this.parsers.length;o++){const e=this.parsers[o];if(e.test(t)){n=e.getCacheableAssets(r,t);break}}n||(n={},r.forEach(e=>{n[e]=t}));const i=Object.keys(n),s={cacheKeys:i,keys:r};if(r.forEach(e=>{this._cacheMap.set(e,s)}),i.forEach(e=>{const r=n?n[e]:t;this._cache.has(e)&&this._cache.get(e)!==r&&console.warn("[Cache] already has key:",e),this._cache.set(e,n[e])}),t instanceof OE){const e=t;r.forEach(t=>{e.baseTexture!==OE.EMPTY.baseTexture&&lx.addToCache(e.baseTexture,t),OE.addToCache(e,t)})}}remove(e){if(!this._cacheMap.has(e))return void console.warn(`[Assets] Asset id ${e} was not found in the Cache`);const t=this._cacheMap.get(e);t.cacheKeys.forEach(e=>{this._cache.delete(e)}),t.keys.forEach(e=>{this._cacheMap.delete(e)})}get parsers(){return this._parsers}};class QC{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,r)=>(this._parsersValidated=!1,e[t]=r,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){const r={promise:null,parser:null};return r.promise=(async()=>{let n=null,i=null;if(t.loadParser&&(i=this._parserHash[t.loadParser],i||console.warn(`[Assets] specified load parser "${t.loadParser}" not found while loading ${e}`)),!i){for(let r=0;r<this.parsers.length;r++){const n=this.parsers[r];if(n.load&&n.test?.(e,t,this)){i=n;break}}if(!i)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}n=await i.load(e,t,this),r.parser=i;for(let e=0;e<this.parsers.length;e++){const i=this.parsers[e];i.parse&&i.parse&&await(i.testParse?.(n,t,this))&&(n=await i.parse(n,t,this)||n,r.parser=i)}return n})(),r}async load(e,t){this._parsersValidated||this._validateParsers();let r=0;const n={},i=ZC(e),s=qC(e,e=>({alias:[e],src:e})),o=s.length,a=s.map(async e=>{const i=Lb.toAbsolute(e.src);if(!n[e.src])try{this.promiseCache[i]||(this.promiseCache[i]=this._getLoadPromiseAndParser(i,e)),n[e.src]=await this.promiseCache[i].promise,t&&t(++r/o)}catch(Ove){throw delete this.promiseCache[i],delete n[e.src],new Error(`[Loader.load] Failed to load ${i}.\n${Ove}`)}});return await Promise.all(a),i?n[s[0].src]:n}async unload(e){const t=qC(e,e=>({alias:[e],src:e})).map(async e=>{const t=Lb.toAbsolute(e.src),r=this.promiseCache[t];if(r){const n=await r.promise;delete this.promiseCache[t],r.parser?.unload?.(n,e,this)}});await Promise.all(t)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,t)=>(e[t.name]&&console.warn(`[Assets] loadParser name conflict "${t.name}"`),{...e,[t.name]:t}),{})}}var eA=e("e",(e=>(e[e.Low=0]="Low",e[e.Normal=1]="Normal",e[e.High=2]="High",e))(eA||{}));const tA={extension:{type:Ww.LoadParser,priority:eA.Low},name:"loadJson",test:e=>$C(e,"application/json")||WC(e,".json"),load:async e=>await(await ym.ADAPTER.fetch(e)).json()};Yw.add(tA);const rA={name:"loadTxt",extension:{type:Ww.LoadParser,priority:eA.Low},test:e=>$C(e,"text/plain")||WC(e,".txt"),load:async e=>await(await ym.ADAPTER.fetch(e)).text()};Yw.add(rA);const nA=["normal","bold","100","200","300","400","500","600","700","800","900"],iA=[".ttf",".otf",".woff",".woff2"],sA=["font/ttf","font/otf","font/woff","font/woff2"],oA=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function aA(e){const t=Lb.extname(e),r=Lb.basename(e,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1));let n=r.length>0;for(const s of r)if(!s.match(oA)){n=!1;break}let i=r.join(" ");return n||(i=`"${i.replace(/[\\"]/g,"\\$&")}"`),i}const lA=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function uA(e){return lA.test(e)?e:encodeURI(e)}const cA={extension:{type:Ww.LoadParser,priority:eA.Low},name:"loadWebFont",test:e=>$C(e,sA)||WC(e,iA),async load(e,t){const r=ym.ADAPTER.getFontFaceSet();if(r){const n=[],i=t.data?.family??aA(e),s=t.data?.weights?.filter(e=>nA.includes(e))??["normal"],o=t.data??{};for(let t=0;t<s.length;t++){const a=s[t],l=new FontFace(i,`url(${uA(e)})`,{...o,weight:a});await l.load(),r.add(l),n.push(l)}return 1===n.length?n[0]:n}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(e){(Array.isArray(e)?e:[e]).forEach(e=>ym.ADAPTER.getFontFaceSet().delete(e))}};Yw.add(cA);let dA=null,hA=class{constructor(){dA||(dA=URL.createObjectURL(new Blob(['(function() {\n  "use strict";\n  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";\n  async function checkImageBitmap() {\n    try {\n      if (typeof createImageBitmap != "function")\n        return !1;\n      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);\n      return imageBitmap.width === 1 && imageBitmap.height === 1;\n    } catch {\n      return !1;\n    }\n  }\n  checkImageBitmap().then((result) => {\n    self.postMessage(result);\n  });\n})();\n'],{type:"application/javascript"}))),this.worker=new Worker(dA)}};hA.revokeObjectURL=function(){dA&&(URL.revokeObjectURL(dA),dA=null)};let fA=null;class pA{constructor(){fA||(fA=URL.createObjectURL(new Blob(['(function() {\n  "use strict";\n  async function loadImageBitmap(url) {\n    const response = await fetch(url);\n    if (!response.ok)\n      throw new Error(`[WorkerManager.loadImageBitmap] Failed to fetch ${url}: ${response.status} ${response.statusText}`);\n    const imageBlob = await response.blob();\n    return await createImageBitmap(imageBlob);\n  }\n  self.onmessage = async (event) => {\n    try {\n      const imageBitmap = await loadImageBitmap(event.data.data[0]);\n      self.postMessage({\n        data: imageBitmap,\n        uuid: event.data.uuid,\n        id: event.data.id\n      }, [imageBitmap]);\n    } catch (e) {\n      self.postMessage({\n        error: e,\n        uuid: event.data.uuid,\n        id: event.data.id\n      });\n    }\n  };\n})();\n'],{type:"application/javascript"}))),this.worker=new Worker(fA)}}pA.revokeObjectURL=function(){fA&&(URL.revokeObjectURL(fA),fA=null)};let mA,gA=0;const yA=new class{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return void 0!==this._isImageBitmapSupported||(this._isImageBitmapSupported=new Promise(e=>{const{worker:t}=new hA;t.addEventListener("message",r=>{t.terminate(),hA.revokeObjectURL(),e(r.data)})})),this._isImageBitmapSupported}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){void 0===mA&&(mA=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<mA&&(this._createdWorkers++,e=(new pA).worker,e.addEventListener("message",e=>{this.complete(e.data),this.returnWorker(e.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){void 0!==e.error?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}async _run(e,t){await this._initWorkers();const r=new Promise((r,n)=>{this.queue.push({id:e,arguments:t,resolve:r,reject:n})});return this.next(),r}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const t=this.queue.pop(),r=t.id;this.resolveHash[gA]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:gA++,id:r})}};function vA(e,t,r){e.resource.internal=!0;const n=new OE(e),i=()=>{delete t.promiseCache[r],JC.has(r)&&JC.remove(r)};return n.baseTexture.once("destroyed",()=>{r in t.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),i())}),n.once("destroyed",()=>{e.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),i())}),n}const _A=[".jpeg",".jpg",".png",".webp",".avif"],bA=["image/jpeg","image/png","image/webp","image/avif"];async function wA(e){const t=await ym.ADAPTER.fetch(e);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${e}: ${t.status} ${t.statusText}`);const r=await t.blob();return await createImageBitmap(r)}const xA={name:"loadTextures",extension:{type:Ww.LoadParser,priority:eA.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test:e=>$C(e,bA)||WC(e,_A),async load(e,t,r){const n=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let i;i=n?this.config.preferWorkers&&await yA.isImageBitmapSupported()?await yA.loadImageBitmap(e):await wA(e):await new Promise((t,r)=>{const n=new Image;n.crossOrigin=this.config.crossOrigin,n.src=e,n.complete?t(n):(n.onload=()=>t(n),n.onerror=e=>r(e))});const s={...t.data};s.resolution??(s.resolution=Hw(e)),n&&void 0===s.resourceOptions?.ownsImageBitmap&&(s.resourceOptions={...s.resourceOptions},s.resourceOptions.ownsImageBitmap=!0);const o=new lx(i,s);return o.resource.src=e,vA(o,r,e)},unload(e){e.destroy(!0)}};Yw.add(xA);const EA={extension:{type:Ww.LoadParser,priority:eA.High},name:"loadSVG",test:e=>$C(e,"image/svg+xml")||WC(e,".svg"),testParse:async e=>eC.test(e),async parse(e,t,r){const n=new eC(e,t?.data?.resourceOptions);await n.load();const i=new lx(n,{resolution:Hw(e),...t?.data});return i.resource.src=t.src,vA(i,r,t.src)},load:async(e,t)=>(await ym.ADAPTER.fetch(e)).text(),unload:xA.unload};Yw.add(EA);const SA=[".mp4",".m4v",".webm",".ogv"],CA=["video/mp4","video/webm","video/ogg"],AA={name:"loadVideo",extension:{type:Ww.LoadParser,priority:eA.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test:e=>$C(e,CA)||WC(e,SA),async load(e,t,r){let n;const i=await(await ym.ADAPTER.fetch(e)).blob(),s=URL.createObjectURL(i);try{const i={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...t?.data?.resourceOptions,autoLoad:!0},o=new rC(s,i);await o.load();const a=new lx(o,{alphaMode:await zb(),resolution:Hw(e),...t?.data});a.resource.src=e,n=vA(a,r,e),n.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(s)})}catch(Ove){throw URL.revokeObjectURL(s),Ove}return n},unload(e){e.destroy(!0)}};Yw.add(AA);class TA{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,"bar"!==this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar")))throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if("string"==typeof e)this._defaultSearchParams=e;else{const t=e;this._defaultSearchParams=Object.keys(t).map(e=>`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`).join("&")}}getAlias(e){const{alias:t,name:r,src:n,srcs:i}=e;return qC(t||r||n||i,e=>"string"==typeof e?e:Array.isArray(e)?e.map(e=>e?.src??e?.srcs??e):e?.src||e?.srcs?e.src??e.srcs:e,!0)}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(e,t){const r=[];Array.isArray(t)?t.forEach(t=>{const n=t.src??t.srcs,i=t.alias??t.name;let s;if("string"==typeof i){const t=this._createBundleAssetId(e,i);r.push(t),s=[i,t]}else{const t=i.map(t=>this._createBundleAssetId(e,t));r.push(...t),s=[...i,...t]}this.add({...t,alias:s,src:n})}):Object.keys(t).forEach(n=>{const i=[n,this._createBundleAssetId(e,n)];if("string"==typeof t[n])this.add({alias:i,src:t[n]});else if(Array.isArray(t[n]))this.add({alias:i,src:t[n]});else{const e=t[n],r=e.src??e.srcs;this.add({...e,alias:i,src:Array.isArray(r)?r:[r]})}r.push(...i)}),this._bundles[e]=r}add(e,t,r,n,i){const s=[];let o;"string"==typeof e||Array.isArray(e)&&"string"==typeof e[0]?(Fb("7.2.0","Assets.add now uses an object instead of individual parameters.\nPlease use Assets.add({ alias, src, data, format, loadParser }) instead."),s.push({alias:e,src:t,data:r,format:n,loadParser:i})):Array.isArray(e)?s.push(...e):s.push(e),o=e=>{this.hasKey(e)&&console.warn(`[Resolver] already has key: ${e} overwriting`)},qC(s).forEach(e=>{const{src:t,srcs:r}=e;let{data:n,format:i,loadParser:s}=e;const a=qC(t||r).map(e=>"string"==typeof e?KC(e):Array.isArray(e)?e:[e]),l=this.getAlias(e);Array.isArray(l)?l.forEach(o):o(l);const u=[];a.forEach(e=>{e.forEach(e=>{let t={};if("object"!=typeof e){t.src=e;for(let r=0;r<this._parsers.length;r++){const n=this._parsers[r];if(n.test(e)){t=n.parse(e);break}}}else n=e.data??n,i=e.format??i,s=e.loadParser??s,t={...t,...e};if(!l)throw new Error(`[Resolver] alias is undefined for this asset: ${t.src}`);t=this.buildResolvedAsset(t,{aliases:l,data:n,format:i,loadParser:s}),u.push(t)})}),l.forEach(e=>{this._assetMap[e]=u})})}resolveBundle(e){const t=ZC(e);e=qC(e);const r={};return e.forEach(e=>{const t=this._bundles[e];if(t){const n=this.resolve(t),i={};for(const t in n){const r=n[t];i[this._extractAssetIdFromBundle(e,t)]=r}r[e]=i}}),t?r[e[0]]:r}resolveUrl(e){const t=this.resolve(e);if("string"!=typeof e){const e={};for(const r in t)e[r]=t[r].src;return e}return t.src}resolve(e){const t=ZC(e);e=qC(e);const r={};return e.forEach(e=>{if(!this._resolverHash[e])if(this._assetMap[e]){let t=this._assetMap[e];const r=t[0],n=this._getPreferredOrder(t);n?.priority.forEach(e=>{n.params[e].forEach(r=>{const n=t.filter(t=>!!t[e]&&t[e]===r);n.length&&(t=n)})}),this._resolverHash[e]=t[0]??r}else this._resolverHash[e]=this.buildResolvedAsset({alias:[e],src:e},{});r[e]=this._resolverHash[e]}),t?r[e[0]]:r}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const t=e[0],r=this._preferredOrder.find(e=>e.params.format.includes(t.format));if(r)return r}return this._preferredOrder[0]}_appendDefaultSearchParams(e){return this._defaultSearchParams?`${e}${/\?/.test(e)?"&":"?"}${this._defaultSearchParams}`:e}buildResolvedAsset(e,t){const{aliases:r,data:n,loadParser:i,format:s}=t;return(this._basePath||this._rootPath)&&(e.src=Lb.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=r??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...n||{},...e.data},e.loadParser=i??e.loadParser,e.format=s??e.format??Lb.extname(e.src).slice(1),e.srcs=e.src,e.name=e.alias,e}}class DA{constructor(){this._detections=[],this._initialized=!1,this.resolver=new TA,this.loader=new QC,this.cache=JC,this._backgroundLoader=new HC(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){if(this._initialized)return void console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let t=e.manifest;"string"==typeof t&&(t=await this.load(t)),this.resolver.addManifest(t)}const t=e.texturePreference?.resolution??1,r="number"==typeof t?[t]:t,n=await this._detectFormats({preferredFormats:e.texturePreference?.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:n,resolution:r}}),e.preferences&&this.setPreferences(e.preferences)}add(e,t,r,n,i){this.resolver.add(e,t,r,n,i)}async load(e,t){this._initialized||await this.init();const r=ZC(e),n=qC(e).map(e=>{if("string"!=typeof e){const t=this.resolver.getAlias(e);return t.some(e=>!this.resolver.hasKey(e))&&this.add(e),Array.isArray(t)?t[0]:t}return this.resolver.hasKey(e)||this.add({alias:e,src:e}),e}),i=this.resolver.resolve(n),s=await this._mapLoadToResolve(i,t);return r?s[n[0]]:s}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let r=!1;"string"==typeof e&&(r=!0,e=[e]);const n=this.resolver.resolveBundle(e),i={},s=Object.keys(n);let o=0,a=0;const l=()=>{t?.(++o/a)},u=s.map(e=>{const t=n[e];return a+=Object.keys(t).length,this._mapLoadToResolve(t,l).then(t=>{i[e]=t})});return await Promise.all(u),r?i[e[0]]:i}async backgroundLoad(e){this._initialized||await this.init(),"string"==typeof e&&(e=[e]);const t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),"string"==typeof e&&(e=[e]);const t=this.resolver.resolveBundle(e);Object.values(t).forEach(e=>{this._backgroundLoader.add(Object.values(e))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if("string"==typeof e)return JC.get(e);const t={};for(let r=0;r<e.length;r++)t[r]=JC.get(e[r]);return t}async _mapLoadToResolve(e,t){const r=Object.values(e),n=Object.keys(e);this._backgroundLoader.active=!1;const i=await this.loader.load(r,t);this._backgroundLoader.active=!0;const s={};return r.forEach((e,t)=>{const r=i[e.src],o=[e.src];e.alias&&o.push(...e.alias),s[n[t]]=r,JC.set(o,r)}),s}async unload(e){this._initialized||await this.init();const t=qC(e).map(e=>"string"!=typeof e?e.src:e),r=this.resolver.resolve(t);await this._unloadFromResolved(r)}async unloadBundle(e){this._initialized||await this.init(),e=qC(e);const t=this.resolver.resolveBundle(e),r=Object.keys(t).map(e=>this._unloadFromResolved(t[e]));await Promise.all(r)}async _unloadFromResolved(e){const t=Object.values(e);t.forEach(e=>{JC.remove(e.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const r of e.detections)e.skipDetections||await r.test()?t=await r.add(t):e.skipDetections||(t=await r.remove(t));return t=t.filter((e,r)=>t.indexOf(e)===r),t}get detections(){return this._detections}get preferWorkers(){return xA.config.preferWorkers}set preferWorkers(e){Fb("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(t=>t in e).forEach(r=>{t.config[r]=e[r]})})}}const kA=e("A",new DA);Yw.handleByList(Ww.LoadParser,kA.loader.parsers).handleByList(Ww.ResolveParser,kA.resolver.parsers).handleByList(Ww.CacheParser,kA.cache.parsers).handleByList(Ww.DetectionParser,kA.detections);const PA={extension:Ww.CacheParser,test:e=>Array.isArray(e)&&e.every(e=>e instanceof OE),getCacheableAssets:(e,t)=>{const r={};return e.forEach(e=>{t.forEach((t,n)=>{r[e+(0===n?"":n+1)]=t})}),r}};async function BA(e){if("Image"in globalThis)return new Promise(t=>{const r=new Image;r.onload=()=>{t(!0)},r.onerror=()=>{t(!1)},r.src=e});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const t=await(await fetch(e)).blob();await createImageBitmap(t)}catch{return!1}return!0}return!1}Yw.add(PA);const OA={extension:{type:Ww.DetectionParser,priority:1},test:async()=>BA("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async e=>[...e,"avif"],remove:async e=>e.filter(e=>"avif"!==e)};Yw.add(OA);const RA={extension:{type:Ww.DetectionParser,priority:0},test:async()=>BA("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async e=>[...e,"webp"],remove:async e=>e.filter(e=>"webp"!==e)};Yw.add(RA);const FA=["png","jpg","jpeg"],IA={extension:{type:Ww.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async e=>[...e,...FA],remove:async e=>e.filter(e=>!FA.includes(e))};Yw.add(IA);const MA="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function NA(e){return!MA&&""!==document.createElement("video").canPlayType(e)}const LA={extension:{type:Ww.DetectionParser,priority:0},test:async()=>NA("video/webm"),add:async e=>[...e,"webm"],remove:async e=>e.filter(e=>"webm"!==e)};Yw.add(LA);const UA={extension:{type:Ww.DetectionParser,priority:0},test:async()=>NA("video/mp4"),add:async e=>[...e,"mp4","m4v"],remove:async e=>e.filter(e=>"mp4"!==e&&"m4v"!==e)};Yw.add(UA);const jA={extension:{type:Ww.DetectionParser,priority:0},test:async()=>NA("video/ogg"),add:async e=>[...e,"ogv"],remove:async e=>e.filter(e=>"ogv"!==e)};Yw.add(jA);const zA={extension:Ww.ResolveParser,test:xA.test,parse:e=>({resolution:parseFloat(ym.RETINA_PREFIX.exec(e)?.[1]??"1"),format:Lb.extname(e).slice(1),src:e})};Yw.add(zA);var VA=(e=>(e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",e[e.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",e[e.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",e[e.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",e[e.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",e))(VA||{});const GA={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let HA,$A;function WA(){$A={bptc:HA.getExtension("EXT_texture_compression_bptc"),astc:HA.getExtension("WEBGL_compressed_texture_astc"),etc:HA.getExtension("WEBGL_compressed_texture_etc"),s3tc:HA.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:HA.getExtension("WEBGL_compressed_texture_s3tc_srgb"),pvrtc:HA.getExtension("WEBGL_compressed_texture_pvrtc")||HA.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),etc1:HA.getExtension("WEBGL_compressed_texture_etc1"),atc:HA.getExtension("WEBGL_compressed_texture_atc")}}const qA={extension:{type:Ww.DetectionParser,priority:2},test:async()=>{const e=ym.ADAPTER.createCanvas().getContext("webgl");return e?(HA=e,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async e=>{$A||WA();const t=[];for(const r in $A)$A[r]&&t.push(r);return[...t,...e]},remove:async e=>($A||WA(),e.filter(e=>!(e in $A)))};Yw.add(qA);class XA extends sx{constructor(e,t={width:1,height:1,autoLoad:!0}){let r,n;"string"==typeof e?(r=e,n=new Uint8Array):(r=null,n=e),super(n,t),this.origin=r,this.buffer=n?new Kw(n):null,this._load=null,this.loaded=!1,null!==this.origin&&!1!==t.autoLoad&&this.load(),null===this.origin&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){return this._load||(this._load=fetch(this.origin).then(e=>e.blob()).then(e=>e.arrayBuffer()).then(e=>(this.data=new Uint32Array(e),this.buffer=new Kw(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),this))),this._load}}class YA extends XA{constructor(e,t){super(e,t),this.format=t.format,this.levels=t.levels||1,this._width=t.width,this._height=t.height,this._extension=YA._formatToExtension(this.format),(t.levelBuffers||this.buffer)&&(this._levelBuffers=t.levelBuffers||YA._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,t,r){const n=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;n.pixelStorei(n.UNPACK_ALIGNMENT,4);for(let i=0,s=this.levels;i<s;i++){const{levelID:e,levelWidth:t,levelHeight:r,levelBuffer:s}=this._levelBuffers[i];n.compressedTexImage2D(n.TEXTURE_2D,e,this.format,t,r,0,s)}return!0}onBlobLoaded(){this._levelBuffers=YA._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=35916&&e<=35919)return"s3tc_sRGB";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(36196===e)return"etc1";if(35986===e||35987===e||34798===e)return"atc";if(e>=36492&&e<=36495)return"bptc";if(37808===e)return"astc";throw new Error(`Invalid (compressed) texture format given: ${e}`)}static _createLevelBuffers(e,t,r,n,i,s,o){const a=new Array(r);let l=e.byteOffset,u=s,c=o,d=u+n-1&~(n-1),h=c+i-1&~(i-1),f=d*h*GA[t];for(let p=0;p<r;p++)a[p]={levelID:p,levelWidth:r>1?u:d,levelHeight:r>1?c:h,levelBuffer:new Uint8Array(e.buffer,l,f)},l+=f,u=u>>1||1,c=c>>1||1,d=u+n-1&~(n-1),h=c+i-1&~(i-1),f=d*h*GA[t];return a}}const KA=124,ZA=3,JA=4,QA=7,eT=19,tT=2,rT=0,nT=1,iT=2,sT=3,oT=827611204,aT=861165636,lT=894720068,uT={[oT]:VA.COMPRESSED_RGBA_S3TC_DXT1_EXT,[aT]:VA.COMPRESSED_RGBA_S3TC_DXT3_EXT,[lT]:VA.COMPRESSED_RGBA_S3TC_DXT5_EXT},cT={70:VA.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:VA.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:VA.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:VA.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:VA.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:VA.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:VA.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:VA.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:VA.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:VA.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:VA.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:VA.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:VA.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function dT(e){const t=new Uint32Array(e);if(542327876!==t[0])throw new Error("Invalid DDS file magic word");const r=new Uint32Array(e,0,KA/Uint32Array.BYTES_PER_ELEMENT),n=r[ZA],i=r[JA],s=r[QA],o=new Uint32Array(e,eT*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),a=o[1];if(4&a){const r=o[tT];if(808540228!==r){const t=uT[r],o=new Uint8Array(e,128);return[new YA(o,{format:t,width:i,height:n,levels:s})]}const a=128,l=new Uint32Array(t.buffer,a,20/Uint32Array.BYTES_PER_ELEMENT),u=l[rT],c=l[nT],d=l[iT],h=l[sT],f=cT[u];if(void 0===f)throw new Error(`DDSParser cannot parse texture data with DXGI format ${u}`);if(4===d)throw new Error("DDSParser does not support cubemap textures");if(6===c)throw new Error("DDSParser does not supported 3D texture data");const p=new Array,m=148;if(1===h)p.push(new Uint8Array(e,m));else{const t=GA[f];let r=0,o=i,a=n;for(let e=0;e<s;e++)r+=Math.max(1,o+3&-4)*Math.max(1,a+3&-4)*t,o>>>=1,a>>>=1;let l=m;for(let n=0;n<h;n++)p.push(new Uint8Array(e,l,r)),l+=r}return p.map(e=>new YA(e,{format:f,width:i,height:n,levels:s}))}throw 64&a?new Error("DDSParser does not support uncompressed texture data."):512&a?new Error("DDSParser does not supported YUV uncompressed texture data."):131072&a?new Error("DDSParser does not support single-channel (lumninance) texture data!"):2&a?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const hT=[171,75,84,88,32,49,49,187,13,10,26,10],fT=12,pT=16,mT=24,gT=28,yT=36,vT=40,_T=44,bT=48,wT=52,xT=56,ET=60,ST={[nm.UNSIGNED_BYTE]:1,[nm.UNSIGNED_SHORT]:2,[nm.INT]:4,[nm.UNSIGNED_INT]:4,[nm.FLOAT]:4,[nm.HALF_FLOAT]:8},CT={[tm.RGBA]:4,[tm.RGB]:3,[tm.RG]:2,[tm.RED]:1,[tm.LUMINANCE]:1,[tm.LUMINANCE_ALPHA]:2,[tm.ALPHA]:1},AT={[nm.UNSIGNED_SHORT_4_4_4_4]:2,[nm.UNSIGNED_SHORT_5_5_5_1]:2,[nm.UNSIGNED_SHORT_5_6_5]:2};function TT(e,t,r=!1){const n=new DataView(t);if(!function(e,t){for(let r=0;r<hT.length;r++)if(t.getUint8(r)!==hT[r])return console.error(`${e} is not a valid *.ktx file!`),!1;return!0}(e,n))return null;const i=67305985===n.getUint32(fT,!0),s=n.getUint32(pT,i),o=n.getUint32(mT,i),a=n.getUint32(gT,i),l=n.getUint32(yT,i),u=n.getUint32(vT,i)||1,c=n.getUint32(_T,i)||1,d=n.getUint32(bT,i)||1,h=n.getUint32(wT,i),f=n.getUint32(xT,i),p=n.getUint32(ET,i);if(0===u||1!==c)throw new Error("Only 2D textures are supported");if(1!==h)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==d)throw new Error("WebGL does not support array textures");const m=l+3&-4,g=u+3&-4,y=new Array(d);let v,_=l*u;if(0===s&&(_=m*g),v=0!==s?ST[s]?ST[s]*CT[o]:AT[s]:GA[a],void 0===v)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const b=r?function(e,t,r){const n=new Map;let i=0;for(;i<t;){const s=e.getUint32(64+i,r),o=64+i+4,a=3-(s+3)%4;if(0===s||s>t-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<s&&0!==e.getUint8(o+l);l++);if(-1===l){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const u=(new TextDecoder).decode(new Uint8Array(e.buffer,o,l)),c=new DataView(e.buffer,o+l+1,s-l-1);n.set(u,c),i+=4+s+a}return n}(n,p,i):null;let w=_*v,x=l,E=u,S=m,C=g,A=64+p;for(let T=0;T<f;T++){const e=n.getUint32(A,i);let r=A+4;for(let n=0;n<d;n++){let e=y[n];e||(e=y[n]=new Array(f)),e[T]={levelID:T,levelWidth:f>1||0!==s?x:S,levelHeight:f>1||0!==s?E:C,levelBuffer:new Uint8Array(t,r,w)},r+=w}A+=e+4,A=A%4!=0?A+4-A%4:A,x=x>>1||1,E=E>>1||1,S=x+4-1&-4,C=E+4-1&-4,w=S*C*v}return 0!==s?{uncompressed:y.map(e=>{let t=e[0].levelBuffer,r=!1;return s===nm.FLOAT?t=new Float32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4):s===nm.UNSIGNED_INT?(r=!0,t=new Uint32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4)):s===nm.INT&&(r=!0,t=new Int32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4)),{resource:new sx(t,{width:e[0].levelWidth,height:e[0].levelHeight}),type:s,format:r?DT(o):o}}),kvData:b}:{compressed:y.map(e=>new YA(null,{format:a,width:l,height:u,levels:f,levelBuffers:e})),kvData:b}}function DT(e){switch(e){case tm.RGBA:return tm.RGBA_INTEGER;case tm.RGB:return tm.RGB_INTEGER;case tm.RG:return tm.RG_INTEGER;case tm.RED:return tm.RED_INTEGER;default:return e}}const kT={extension:{type:Ww.LoadParser,priority:eA.High},name:"loadDDS",test:e=>WC(e,".dds"),async load(e,t,r){const n=dT(await(await ym.ADAPTER.fetch(e)).arrayBuffer()).map(n=>vA(new lx(n,{mipmap:am.OFF,alphaMode:lm.NO_PREMULTIPLIED_ALPHA,resolution:Hw(e),...t.data}),r,e));return 1===n.length?n[0]:n},unload(e){Array.isArray(e)?e.forEach(e=>e.destroy(!0)):e.destroy(!0)}};Yw.add(kT);const PT={extension:{type:Ww.LoadParser,priority:eA.High},name:"loadKTX",test:e=>WC(e,".ktx"),async load(e,t,r){const n=await(await ym.ADAPTER.fetch(e)).arrayBuffer(),{compressed:i,uncompressed:s,kvData:o}=TT(e,n),a=i??s,l={mipmap:am.OFF,alphaMode:lm.NO_PREMULTIPLIED_ALPHA,resolution:Hw(e),...t.data},u=a.map(t=>{a===s&&Object.assign(l,{type:t.type,format:t.format});const n=t.resource??t,i=new lx(n,l);return i.ktxKeyValueData=o,vA(i,r,e)});return 1===u.length?u[0]:u},unload(e){Array.isArray(e)?e.forEach(e=>e.destroy(!0)):e.destroy(!0)}};Yw.add(PT);const BT=["s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"],OT={extension:Ww.ResolveParser,test:e=>{const t=Lb.extname(e).slice(1);return["basis","ktx","dds"].includes(t)},parse:e=>{const t=e.split("."),r=t.pop();if(["ktx","dds"].includes(r)){const r=t.pop();if(BT.includes(r))return{resolution:parseFloat(ym.RETINA_PREFIX.exec(e)?.[1]??"1"),format:r,src:e}}return{resolution:parseFloat(ym.RETINA_PREFIX.exec(e)?.[1]??"1"),format:r,src:e}}};Yw.add(OT);const RT=new Cx,FT=class e{constructor(e){this.renderer=e,this._rendererPremultipliedAlpha=!1}contextChange(){const e=this.renderer?.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}async image(e,t,r,n){const i=new Image;return i.src=await this.base64(e,t,r,n),i}async base64(e,t,r,n){const i=this.canvas(e,n);if(void 0!==i.toBlob)return new Promise((e,n)=>{i.toBlob(t=>{if(!t)return void n(new Error("ICanvas.toBlob failed!"));const r=new FileReader;r.onload=()=>e(r.result),r.onerror=n,r.readAsDataURL(t)},t,r)});if(void 0!==i.toDataURL)return i.toDataURL(t,r);if(void 0!==i.convertToBlob){const e=await i.convertToBlob({type:t,quality:r});return new Promise((t,r)=>{const n=new FileReader;n.onload=()=>t(n.result),n.onerror=r,n.readAsDataURL(e)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(t,r){const{pixels:n,width:i,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(t,r);o&&e._flipY(n,i,s),a&&e._unpremultiplyAlpha(n);const l=new Lw(i,s,1),u=new ImageData(new Uint8ClampedArray(n.buffer),i,s);return l.context.putImageData(u,0,0),l.canvas}pixels(t,r){const{pixels:n,width:i,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(t,r);return o&&e._flipY(n,i,s),a&&e._unpremultiplyAlpha(n),n}_rawPixels(e,t){const r=this.renderer;if(!r)throw new Error("The Extract has already been destroyed");let n,i,s=!1,o=!1,a=!1;e&&(e instanceof RE?i=e:(i=r.generateTexture(e,{region:t,resolution:r.resolution,multisample:r.multisample}),a=!0,t&&(RT.width=t.width,RT.height=t.height,t=RT)));const l=r.gl;if(i){if(n=i.baseTexture.resolution,t=t??i.frame,s=!1,o=i.baseTexture.alphaMode>0&&i.baseTexture.format===tm.RGBA,!a){r.renderTexture.bind(i);const e=i.framebuffer.glFramebuffers[r.CONTEXT_UID];e.blitFramebuffer&&r.framebuffer.bind(e.blitFramebuffer)}}else n=r.resolution,t||((t=RT).width=r.width/n,t.height=r.height/n),s=!0,o=this._rendererPremultipliedAlpha,r.renderTexture.bind();const u=Math.max(Math.round(t.width*n),1),c=Math.max(Math.round(t.height*n),1),d=new Uint8Array(4*u*c);return l.readPixels(Math.round(t.x*n),Math.round(t.y*n),u,c,l.RGBA,l.UNSIGNED_BYTE,d),a&&i?.destroy(!0),{pixels:d,width:u,height:c,flipY:s,premultipliedAlpha:o}}destroy(){this.renderer=null}static _flipY(e,t,r){const n=t<<2,i=r>>1,s=new Uint8Array(n);for(let o=0;o<i;o++){const t=o*n,i=(r-o-1)*n;s.set(e.subarray(t,t+n)),e.copyWithin(t,i,i+n),e.set(s,i)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));const t=e.length;for(let r=0;r<t;r+=4){const t=e[r+3];if(0!==t){const n=255.001/t;e[r]=e[r]*n+.5,e[r+1]=e[r+1]*n+.5,e[r+2]=e[r+2]*n+.5}}}};FT.extension={name:"extract",type:Ww.RendererSystem};let IT=FT;Yw.add(IT);const MT={build(e){const t=e.points;let r,n,i,s,o,a;if(e.type===xx.CIRC){const t=e.shape;r=t.x,n=t.y,o=a=t.radius,i=s=0}else if(e.type===xx.ELIP){const t=e.shape;r=t.x,n=t.y,o=t.width,a=t.height,i=s=0}else{const t=e.shape,l=t.width/2,u=t.height/2;r=t.x+l,n=t.y+u,o=a=Math.max(0,Math.min(t.radius,Math.min(l,u))),i=l-o,s=u-a}if(!(o>=0&&a>=0&&i>=0&&s>=0))return void(t.length=0);const l=Math.ceil(2.3*Math.sqrt(o+a)),u=8*l+(i?4:0)+(s?4:0);if(t.length=u,0===u)return;if(0===l)return t.length=8,t[0]=t[6]=r+i,t[1]=t[3]=n+s,t[2]=t[4]=r-i,void(t[5]=t[7]=n-s);let c=0,d=4*l+(i?2:0)+2,h=d,f=u;{const e=i+o,a=s,l=r+e,u=r-e,p=n+a;if(t[c++]=l,t[c++]=p,t[--d]=p,t[--d]=u,s){const e=n-a;t[h++]=u,t[h++]=e,t[--f]=e,t[--f]=l}}for(let p=1;p<l;p++){const e=Math.PI/2*(p/l),u=i+Math.cos(e)*o,m=s+Math.sin(e)*a,g=r+u,y=r-u,v=n+m,_=n-m;t[c++]=g,t[c++]=v,t[--d]=v,t[--d]=y,t[h++]=y,t[h++]=_,t[--f]=_,t[--f]=g}{const e=s+a,o=r+i,l=r-i,u=n+e,d=n-e;t[c++]=o,t[c++]=u,t[--f]=d,t[--f]=o,i&&(t[c++]=l,t[c++]=u,t[--f]=d,t[--f]=l)}},triangulate(e,t){const r=e.points,n=t.points,i=t.indices;if(0===r.length)return;let s=n.length/2;const o=s;let a,l;if(e.type!==xx.RREC){const t=e.shape;a=t.x,l=t.y}else{const t=e.shape;a=t.x+t.width/2,l=t.y+t.height/2}const u=e.matrix;n.push(e.matrix?u.a*a+u.c*l+u.tx:a,e.matrix?u.b*a+u.d*l+u.ty:l),s++,n.push(r[0],r[1]);for(let c=2;c<r.length;c+=2)n.push(r[c],r[c+1]),i.push(s++,o,s);i.push(o+1,o,s)}};function NT(e,t=!1){const r=e.length;if(r<6)return;let n=0;for(let i=0,s=e[r-2],o=e[r-1];i<r;i+=2){const t=e[i],r=e[i+1];n+=(t-s)*(r+o),s=t,o=r}if(!t&&n>0||t&&n<=0){const t=r/2;for(let n=t+t%2;n<r;n+=2){const t=r-n-2,i=r-n-1,s=n,o=n+1;[e[t],e[s]]=[e[s],e[t]],[e[i],e[o]]=[e[o],e[i]]}}}const LT={build(e){e.points=e.shape.points.slice()},triangulate(e,t){let r=e.points;const n=e.holes,i=t.points,s=t.indices;if(r.length>=6){NT(r,!1);const e=[];for(let i=0;i<n.length;i++){const t=n[i];NT(t.points,!0),e.push(r.length/2),r=r.concat(t.points)}const t=dg(r,e,2);if(!t)return;const o=i.length/2;for(let r=0;r<t.length;r+=3)s.push(t[r]+o),s.push(t[r+1]+o),s.push(t[r+2]+o);for(let n=0;n<r.length;n++)i.push(r[n])}}},UT={build(e){const t=e.shape,r=t.x,n=t.y,i=t.width,s=t.height,o=e.points;o.length=0,i>=0&&s>=0&&o.push(r,n,r+i,n,r+i,n+s,r,n+s)},triangulate(e,t){const r=e.points,n=t.points;if(0===r.length)return;const i=n.length/2;n.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),t.indices.push(i,i+1,i+2,i+1,i+2,i+3)}},jT={build(e){MT.build(e)},triangulate(e,t){MT.triangulate(e,t)}};var zT=(e=>(e.MITER="miter",e.BEVEL="bevel",e.ROUND="round",e))(zT||{}),VT=(e=>(e.BUTT="butt",e.ROUND="round",e.SQUARE="square",e))(VT||{});const GT={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(e,t=20){if(!this.adaptive||!e||isNaN(e))return t;let r=Math.ceil(e/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}},HT=GT;class $T{static curveTo(e,t,r,n,i,s){const o=s[s.length-2],a=s[s.length-1]-t,l=o-e,u=n-t,c=r-e,d=Math.abs(a*c-l*u);if(d<1e-8||0===i)return(s[s.length-2]!==e||s[s.length-1]!==t)&&s.push(e,t),null;const h=a*a+l*l,f=u*u+c*c,p=a*u+l*c,m=i*Math.sqrt(h)/d,g=i*Math.sqrt(f)/d,y=m*p/h,v=g*p/f,_=m*c+g*l,b=m*u+g*a,w=l*(g+y),x=a*(g+y),E=c*(m+v),S=u*(m+v);return{cx:_+e,cy:b+t,radius:i,startAngle:Math.atan2(x-b,w-_),endAngle:Math.atan2(S-b,E-_),anticlockwise:l*u>c*a}}static arc(e,t,r,n,i,s,o,a,l){const u=o-s,c=GT._segmentsCount(Math.abs(u)*i,40*Math.ceil(Math.abs(u)/_x)),d=u/(2*c),h=2*d,f=Math.cos(d),p=Math.sin(d),m=c-1,g=m%1/m;for(let y=0;y<=m;++y){const e=d+s+h*(y+g*y),t=Math.cos(e),o=-Math.sin(e);l.push((f*t+p*o)*i+r,(f*-o+p*t)*i+n)}}}class WT{constructor(){this.reset()}begin(e,t,r){this.reset(),this.style=e,this.start=t,this.attribStart=r}end(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class qT{static curveLength(e,t,r,n,i,s,o,a){let l=0,u=0,c=0,d=0,h=0,f=0,p=0,m=0,g=0,y=0,v=0,_=e,b=t;for(let w=1;w<=10;++w)u=w/10,c=u*u,d=c*u,h=1-u,f=h*h,p=f*h,m=p*e+3*f*u*r+3*h*c*i+d*o,g=p*t+3*f*u*n+3*h*c*s+d*a,y=_-m,v=b-g,_=m,b=g,l+=Math.sqrt(y*y+v*v);return l}static curveTo(e,t,r,n,i,s,o){const a=o[o.length-2],l=o[o.length-1];o.length-=2;const u=GT._segmentsCount(qT.curveLength(a,l,e,t,r,n,i,s));let c=0,d=0,h=0,f=0,p=0;o.push(a,l);for(let m=1,g=0;m<=u;++m)g=m/u,c=1-g,d=c*c,h=d*c,f=g*g,p=f*g,o.push(h*a+3*d*g*e+3*c*f*r+p*i,h*l+3*d*g*t+3*c*f*n+p*s)}}function XT(e,t,r,n,i,s,o,a){let l,u;o?(l=n,u=-r):(l=-n,u=r);const c=e-r*i+l,d=t-n*i+u,h=e+r*s+l,f=t+n*s+u;return a.push(c,d,h,f),2}function YT(e,t,r,n,i,s,o,a){const l=r-e,u=n-t;let c=Math.atan2(l,u),d=Math.atan2(i-e,s-t);a&&c<d?c+=2*Math.PI:!a&&c>d&&(d+=2*Math.PI);let h=c;const f=d-c,p=Math.abs(f),m=Math.sqrt(l*l+u*u),g=1+(15*p*Math.sqrt(m)/Math.PI|0),y=f/g;if(h+=y,a){o.push(e,t,r,n);for(let r=1,n=h;r<g;r++,n+=y)o.push(e,t,e+Math.sin(n)*m,t+Math.cos(n)*m);o.push(e,t,i,s)}else{o.push(r,n,e,t);for(let r=1,n=h;r<g;r++,n+=y)o.push(e+Math.sin(n)*m,t+Math.cos(n)*m,e,t);o.push(i,s,e,t)}return 2*g}function KT(e,t){e.lineStyle.native?function(e,t){let r=0;const n=e.shape,i=e.points||n.points,s=n.type!==xx.POLY||n.closeStroke;if(0===i.length)return;const o=t.points,a=t.indices,l=i.length/2,u=o.length/2;let c=u;for(o.push(i[0],i[1]),r=1;r<l;r++)o.push(i[2*r],i[2*r+1]),a.push(c,c+1),c++;s&&a.push(c,u)}(e,t):function(e,t){const r=e.shape;let n=e.points||r.points.slice();const i=t.closePointEps;if(0===n.length)return;const s=e.lineStyle,o=new Ex(n[0],n[1]),a=new Ex(n[n.length-2],n[n.length-1]),l=r.type!==xx.POLY||r.closeStroke,u=Math.abs(o.x-a.x)<i&&Math.abs(o.y-a.y)<i;if(l){n=n.slice(),u&&(n.pop(),n.pop(),a.set(n[n.length-2],n[n.length-1]));const e=.5*(o.x+a.x),t=.5*(a.y+o.y);n.unshift(e,t),n.push(e,t)}const c=t.points,d=n.length/2;let h=n.length;const f=c.length/2,p=s.width/2,m=p*p,g=s.miterLimit*s.miterLimit;let y=n[0],v=n[1],_=n[2],b=n[3],w=0,x=0,E=-(v-b),S=y-_,C=0,A=0,T=Math.sqrt(E*E+S*S);E/=T,S/=T,E*=p,S*=p;const D=s.alignment,k=2*(1-D),P=2*D;l||(s.cap===VT.ROUND?h+=YT(y-E*(k-P)*.5,v-S*(k-P)*.5,y-E*k,v-S*k,y+E*P,v+S*P,c,!0)+2:s.cap===VT.SQUARE&&(h+=XT(y,v,E,S,k,P,!0,c))),c.push(y-E*k,v-S*k,y+E*P,v+S*P);for(let R=1;R<d-1;++R){y=n[2*(R-1)],v=n[2*(R-1)+1],_=n[2*R],b=n[2*R+1],w=n[2*(R+1)],x=n[2*(R+1)+1],E=-(v-b),S=y-_,T=Math.sqrt(E*E+S*S),E/=T,S/=T,E*=p,S*=p,C=-(b-x),A=_-w,T=Math.sqrt(C*C+A*A),C/=T,A/=T,C*=p,A*=p;const e=_-y,t=v-b,r=_-w,i=x-b,o=e*r+t*i,a=t*r-i*e,l=a<0;if(Math.abs(a)<.001*Math.abs(o)){c.push(_-E*k,b-S*k,_+E*P,b+S*P),o>=0&&(s.join===zT.ROUND?h+=YT(_,b,_-E*k,b-S*k,_-C*k,b-A*k,c,!1)+4:h+=2,c.push(_-C*P,b-A*P,_+C*k,b+A*k));continue}const u=(-E+y)*(-S+b)-(-E+_)*(-S+v),d=(-C+w)*(-A+b)-(-C+_)*(-A+x),f=(e*d-r*u)/a,D=(i*u-t*d)/a,B=(f-_)*(f-_)+(D-b)*(D-b),O=_+(f-_)*k,F=b+(D-b)*k,I=_-(f-_)*P,M=b-(D-b)*P,N=l?k:P,L=B<=Math.min(e*e+t*t,r*r+i*i)+N*N*m;let U=s.join;if(U===zT.MITER&&B/m>g&&(U=zT.BEVEL),L)switch(U){case zT.MITER:c.push(O,F,I,M);break;case zT.BEVEL:l?c.push(O,F,_+E*P,b+S*P,O,F,_+C*P,b+A*P):c.push(_-E*k,b-S*k,I,M,_-C*k,b-A*k,I,M),h+=2;break;case zT.ROUND:l?(c.push(O,F,_+E*P,b+S*P),h+=YT(_,b,_+E*P,b+S*P,_+C*P,b+A*P,c,!0)+4,c.push(O,F,_+C*P,b+A*P)):(c.push(_-E*k,b-S*k,I,M),h+=YT(_,b,_-E*k,b-S*k,_-C*k,b-A*k,c,!1)+4,c.push(_-C*k,b-A*k,I,M))}else{switch(c.push(_-E*k,b-S*k,_+E*P,b+S*P),U){case zT.MITER:l?c.push(I,M,I,M):c.push(O,F,O,F),h+=2;break;case zT.ROUND:h+=l?YT(_,b,_+E*P,b+S*P,_+C*P,b+A*P,c,!0)+2:YT(_,b,_-E*k,b-S*k,_-C*k,b-A*k,c,!1)+2}c.push(_-C*k,b-A*k,_+C*P,b+A*P),h+=2}}y=n[2*(d-2)],v=n[2*(d-2)+1],_=n[2*(d-1)],b=n[2*(d-1)+1],E=-(v-b),S=y-_,T=Math.sqrt(E*E+S*S),E/=T,S/=T,E*=p,S*=p,c.push(_-E*k,b-S*k,_+E*P,b+S*P),l||(s.cap===VT.ROUND?h+=YT(_-E*(k-P)*.5,b-S*(k-P)*.5,_-E*k,b-S*k,_+E*P,b+S*P,c,!1)+2:s.cap===VT.SQUARE&&(h+=XT(_,b,E,S,k,P,!1,c)));const B=t.indices,O=GT.epsilon*GT.epsilon;for(let R=f;R<h+f-2;++R)y=c[2*R],v=c[2*R+1],_=c[2*(R+1)],b=c[2*(R+1)+1],w=c[2*(R+2)],x=c[2*(R+2)+1],!(Math.abs(y*(b-x)+_*(x-v)+w*(v-b))<O)&&B.push(R,R+1,R+2)}(e,t)}class ZT{static curveLength(e,t,r,n,i,s){const o=e-2*r+i,a=t-2*n+s,l=2*r-2*e,u=2*n-2*t,c=4*(o*o+a*a),d=4*(o*l+a*u),h=l*l+u*u,f=2*Math.sqrt(c+d+h),p=Math.sqrt(c),m=2*c*p,g=2*Math.sqrt(h),y=d/p;return(m*f+p*d*(f-g)+(4*h*c-d*d)*Math.log((2*p+y+f)/(y+g)))/(4*m)}static curveTo(e,t,r,n,i){const s=i[i.length-2],o=i[i.length-1],a=GT._segmentsCount(ZT.curveLength(s,o,e,t,r,n));let l=0,u=0;for(let c=1;c<=a;++c){const d=c/a;l=s+(e-s)*d,u=o+(t-o)*d,i.push(l+(e+(r-e)*d-l)*d,u+(t+(n-t)*d-u)*d)}}}const JT={[xx.POLY]:LT,[xx.CIRC]:MT,[xx.ELIP]:MT,[xx.RECT]:UT,[xx.RREC]:jT},QT=[],eD=[];class tD{constructor(e,t=null,r=null,n=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=r,this.fillStyle=t,this.matrix=n,this.type=e.type}clone(){return new tD(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}e("d",tD);const rD=new Ex,nD=class e extends vx{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new nC,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),eD.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t.reset(),QT.push(t)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,t=null,r=null,n=null){const i=new tD(e,t,r,n);return this.graphicsData.push(i),this.dirty++,this}drawHole(e,t=null){if(!this.graphicsData.length)return null;const r=new tD(e,null,null,t),n=this.graphicsData[this.graphicsData.length-1];return r.lineStyle=n.lineStyle,n.holes.push(r),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const t=this.graphicsData;for(let r=0;r<t.length;++r){const n=t[r];if(n.fillStyle.visible&&n.shape&&(n.matrix?n.matrix.applyInverse(e,rD):rD.copyFrom(e),n.shape.contains(rD.x,rD.y))){let e=!1;if(n.holes)for(let t=0;t<n.holes.length;t++)if(n.holes[t].shape.contains(rD.x,rD.y)){e=!0;break}if(!e)return!0}}return!1}updateBatches(){if(!this.graphicsData.length)return void(this.batchable=!0);if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,t=this.graphicsData;let r=null,n=null;this.batches.length>0&&(r=this.batches[this.batches.length-1],n=r.style);for(let a=this.shapeIndex;a<t.length;a++){this.shapeIndex++;const i=t[a],s=i.fillStyle,o=i.lineStyle;JT[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix),(s.visible||o.visible)&&this.processHoles(i.holes);for(let t=0;t<2;t++){const a=0===t?s:o;if(!a.visible)continue;const l=a.texture.baseTexture,u=this.indices.length,c=this.points.length/2;l.wrapMode=om.REPEAT,0===t?this.processFill(i):this.processLine(i);const d=this.points.length/2-c;0!==d&&(r&&!this._compareStyles(n,a)&&(r.end(u,c),r=null),r||(r=QT.pop()||new WT,r.begin(a,u,c),this.batches.push(r),n=a),this.addUvs(this.points,e,a.texture,c,d,a.matrix))}}const i=this.indices.length,s=this.points.length/2;if(r&&r.end(i,s),0===this.batches.length)return void(this.batchable=!0);const o=s>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&o===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=o?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,t){return!(!e||!t||e.texture.baseTexture!==t.texture.baseTexture||e.color+e.alpha!==t.color+t.alpha||!!e.native!=!!t.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,t=this.graphicsData.length;e<t;e++){const t=this.graphicsData[e],r=t.fillStyle,n=t.lineStyle;if(r&&!r.texture.baseTexture.valid||n&&!n.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let t=0,r=e.length;t<r;t++){const r=e[t];for(let e=0;e<r.size;e++){const t=r.start+e;this.indicesUint16[t]=this.indicesUint16[t]-r.attribStart}}}isBatchable(){if(this.points.length>131070)return!1;const t=this.batches;for(let e=0;e<t.length;e++)if(t[e].style.native)return!1;return this.points.length<2*e.BATCHABLE_SIZE}buildDrawCalls(){let e=++lx._globalBatch;for(let c=0;c<this.drawCalls.length;c++)this.drawCalls[c].texArray.clear(),eD.push(this.drawCalls[c]);this.drawCalls.length=0;const t=this.colors,r=this.textureIds;let n=eD.pop();n||(n=new ux,n.texArray=new mE),n.texArray.count=0,n.start=0,n.size=0,n.type=em.TRIANGLES;let i=0,s=null,o=0,a=!1,l=em.TRIANGLES,u=0;this.drawCalls.push(n);for(let c=0;c<this.batches.length;c++){const d=this.batches[c],h=8,f=d.style,p=f.texture.baseTexture;a!==!!f.native&&(a=!!f.native,l=a?em.LINES:em.TRIANGLES,s=null,i=h,e++),s!==p&&(s=p,p._batchEnabled!==e&&(i===h&&(e++,i=0,n.size>0&&(n=eD.pop(),n||(n=new ux,n.texArray=new mE),this.drawCalls.push(n)),n.start=u,n.size=0,n.texArray.count=0,n.type=l),p.touched=1,p._batchEnabled=e,p._batchLocation=i,p.wrapMode=om.REPEAT,n.texArray.elements[n.texArray.count++]=p,i++)),n.size+=d.size,u+=d.size,o=p._batchLocation,this.addColors(t,f.color,f.alpha,d.attribSize,d.attribStart),this.addTextureIds(r,o,d.attribSize,d.attribStart)}lx._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,t=this.uvs,r=this.colors,n=this.textureIds,i=new ArrayBuffer(3*e.length*4),s=new Float32Array(i),o=new Uint32Array(i);let a=0;for(let l=0;l<e.length/2;l++)s[a++]=e[2*l],s[a++]=e[2*l+1],s[a++]=t[2*l],s[a++]=t[2*l+1],o[a++]=r[l],s[a++]=n[l];this._buffer.update(i),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?LT.triangulate(e,this):JT[e.type].triangulate(e,this)}processLine(e){KT(e,this);for(let t=0;t<e.holes.length;t++)KT(e.holes[t],this)}processHoles(e){for(let t=0;t<e.length;t++){const r=e[t];JT[r.type].build(r),r.matrix&&this.transformPoints(r.points,r.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,t){for(let r=0;r<e.length/2;r++){const n=e[2*r],i=e[2*r+1];e[2*r]=t.a*n+t.c*i+t.tx,e[2*r+1]=t.b*n+t.d*i+t.ty}}addColors(e,t,r,n,i=0){const s=yw.shared.setValue(t).toLittleEndianNumber(),o=yw.shared.setValue(s).toPremultiplied(r);e.length=Math.max(e.length,i+n);for(let a=0;a<n;a++)e[i+a]=o}addTextureIds(e,t,r,n=0){e.length=Math.max(e.length,n+r);for(let i=0;i<r;i++)e[n+i]=t}addUvs(e,t,r,n,i,s=null){let o=0;const a=t.length,l=r.frame;for(;o<i;){let r=e[2*(n+o)],i=e[2*(n+o)+1];if(s){const e=s.a*r+s.c*i+s.tx;i=s.b*r+s.d*i+s.ty,r=e}o++,t.push(r/l.width,i/l.height)}const u=r.baseTexture;(l.width<u.width||l.height<u.height)&&this.adjustUvs(t,r,a,i)}adjustUvs(e,t,r,n){const i=t.baseTexture,s=1e-6,o=r+2*n,a=t.frame,l=a.width/i.width,u=a.height/i.height;let c=a.x/a.width,d=a.y/a.height,h=Math.floor(e[r]+s),f=Math.floor(e[r+1]+s);for(let p=r+2;p<o;p+=2)h=Math.min(h,Math.floor(e[p]+s)),f=Math.min(f,Math.floor(e[p+1]+s));c-=h,d-=f;for(let p=r;p<o;p+=2)e[p]=(e[p]+c)*l,e[p+1]=(e[p+1]+d)*u}};nD.BATCHABLE_SIZE=100;let iD=e("b",nD);class sD{constructor(){this.color=16777215,this.alpha=1,this.texture=OE.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new sD;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=OE.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}e("F",sD);class oD extends sD{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=VT.BUTT,this.join=zT.MITER,this.miterLimit=10}clone(){const e=new oD;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=VT.BUTT,this.join=zT.MITER,this.miterLimit=10}}e("L",oD);const aD={},lD=class e extends uC{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new sD,this._lineStyle=new oD,this._matrix=null,this._holeMode=!1,this.state=ex.for2d(),this._geometry=e||new iD,this._geometry.refCount++,this._transformID=-1,this._tintColor=new yw(16777215),this.blendMode=Qp.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new e(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,t=0,r,n=.5,i=!1){return"number"==typeof e&&(e={width:e,color:t,alpha:r,alignment:n,native:i}),this.lineTextureStyle(e)}lineTextureStyle(e){const t={width:0,texture:OE.WHITE,color:e?.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:VT.BUTT,join:zT.MITER,miterLimit:10};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const r=e.width>0&&e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:r},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new Dx,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new Dx,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this}lineTo(e,t){this.currentPath||this.moveTo(0,0);const r=this.currentPath.points,n=r[r.length-2],i=r[r.length-1];return(n!==e||i!==t)&&r.push(e,t),this}_initCurve(e=0,t=0){this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[e,t]):this.moveTo(e,t)}quadraticCurveTo(e,t,r,n){this._initCurve();const i=this.currentPath.points;return 0===i.length&&this.moveTo(0,0),ZT.curveTo(e,t,r,n,i),this}bezierCurveTo(e,t,r,n,i,s){return this._initCurve(),qT.curveTo(e,t,r,n,i,s,this.currentPath.points),this}arcTo(e,t,r,n,i){this._initCurve(e,t);const s=this.currentPath.points,o=$T.curveTo(e,t,r,n,i,s);if(o){const{cx:e,cy:t,radius:r,startAngle:n,endAngle:i,anticlockwise:s}=o;this.arc(e,t,r,n,i,s)}return this}arc(e,t,r,n,i,s=!1){if(n===i)return this;if(!s&&i<=n?i+=_x:s&&n<=i&&(n+=_x),i-n===0)return this;const o=e+Math.cos(n)*r,a=t+Math.sin(n)*r,l=this._geometry.closePointEps;let u=this.currentPath?this.currentPath.points:null;if(u){const e=Math.abs(u[u.length-2]-o),t=Math.abs(u[u.length-1]-a);e<l&&t<l||u.push(o,a)}else this.moveTo(o,a),u=this.currentPath.points;return $T.arc(o,a,e,t,r,n,i,s,u),this}beginFill(e=0,t){return this.beginTextureFill({texture:OE.WHITE,color:e,alpha:t})}normalizeColor(e){const t=yw.shared.setValue(e.color??0);e.color=t.toNumber(),e.alpha??(e.alpha=t.alpha)}beginTextureFill(e){const t={texture:OE.WHITE,color:16777215,matrix:null};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const r=e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:r},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,t,r,n){return this.drawShape(new Cx(e,t,r,n))}drawRoundedRect(e,t,r,n,i){return this.drawShape(new kx(e,t,r,n,i))}drawCircle(e,t,r){return this.drawShape(new Ax(e,t,r))}drawEllipse(e,t,r,n){return this.drawShape(new Tx(e,t,r,n))}drawPolygon(...e){let t,r=!0;const n=e[0];n.points?(r=n.closeStroke,t=n.points):t=Array.isArray(e[0])?e[0]:e;const i=new Dx(t);return i.closeStroke=r,this.drawShape(i),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return!(1!==e.length||e[0].shape.type!==xx.RECT||e[0].matrix||e[0].holes.length||e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,t=this.blendMode,r=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=r,this.vertexData=new Float32Array(e.points);for(let n=0;n<r;n++){const r=e.batches[n],i=r.style.color,s=new Float32Array(this.vertexData.buffer,4*r.attribStart*2,2*r.attribSize),o=new Float32Array(e.uvsFloat32.buffer,4*r.attribStart*2,2*r.attribSize),a={vertexData:s,blendMode:t,indices:new Uint16Array(e.indicesUint16.buffer,2*r.start,r.size),uvs:o,_batchRGB:yw.shared.setValue(i).toRgbArray(),_tintRGB:i,_texture:r.style.texture,alpha:r.style.alpha,worldAlpha:1};this.batches[n]=a}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let t=0,r=this.batches.length;t<r;t++){const r=this.batches[t];r.worldAlpha=this.worldAlpha*r.alpha,e.plugins[this.pluginName].render(r)}}}_renderDirect(e){const t=this._resolveDirectShader(e),r=this._geometry,n=this.worldAlpha,i=t.uniforms,s=r.drawCalls;i.translationMatrix=this.transform.worldTransform,yw.shared.setValue(this._tintColor).premultiply(n).toArray(i.tint),e.shader.bind(t),e.geometry.bind(r,t),e.state.set(this.state);for(let o=0,a=s.length;o<a;o++)this._renderDrawCallDirect(e,r.drawCalls[o])}_renderDrawCallDirect(e,t){const{texArray:r,type:n,size:i,start:s}=t,o=r.count;for(let a=0;a<o;a++)e.texture.bind(r.elements[a],a);e.geometry.draw(n,i,s)}_resolveDirectShader(e){let t=this.shader;const r=this.pluginName;if(!t){if(!aD[r]){const{maxTextures:t}=e.plugins[r],n=new Int32Array(t);for(let e=0;e<t;e++)n[e]=e;const i={tint:new Float32Array([1,1,1,1]),translationMatrix:new Px,default:hE.from({uSamplers:n},!0)},s=e.plugins[r]._shader.program;aD[r]=new fE(s,i)}t=aD[r]}return t}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:t,minY:r,maxX:n,maxY:i}=e.bounds;this._bounds.addFrame(this.transform,t,r,n,i)}containsPoint(t){return this.worldTransform.applyInverse(t,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t._tintRGB=yw.shared.setValue(this._tintColor).multiply(t._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const t=this.transform.worldTransform,r=t.a,n=t.b,i=t.c,s=t.d,o=t.tx,a=t.ty,l=this._geometry.points,u=this.vertexData;let c=0;for(let d=0;d<l.length;d+=2){const e=l[d],t=l[d+1];u[c++]=r*e+i*t+o,u[c++]=s*t+n*e+a}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};lD.curves=GT,lD._TEMP_POINT=new Ex;let uD=e("G",lD);const cD={buildPoly:LT,buildCircle:MT,buildRectangle:UT,buildRoundedRectangle:jT,buildLine:KT,ArcUtils:$T,BezierUtils:qT,QuadraticUtils:ZT,BatchPart:WT,FILL_COMMANDS:JT,BATCH_POOL:QT,DRAW_CALL_POOL:eD};class dD{constructor(e,t){this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const t=this.uvBuffer.data;(!this.data||this.data.length!==t.length)&&(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}}const hD=new Ex,fD=new Dx,pD=class e extends uC{constructor(e,t,r,n=em.TRIANGLES){super(),this.geometry=e,this.shader=t,this.state=r||ex.for2d(),this.drawMode=n,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=ym.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(t){const r=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===em.TRIANGLES&&r.length<2*e.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)}_renderDefault(e){const t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const t=this.geometry,r=this.shader;r.uvMatrix&&(r.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=r._tintRGB,this._texture=r.texture;const n=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[n]),e.plugins[n].render(this)}calculateVertices(){const e=this.geometry.buffers[0],t=e.data,r=e._updateID;if(r===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==t.length&&(this.vertexData=new Float32Array(t.length));const n=this.transform.worldTransform,i=n.a,s=n.b,o=n.c,a=n.d,l=n.tx,u=n.ty,c=this.vertexData;for(let d=0;d<c.length/2;d++){const e=t[2*d],r=t[2*d+1];c[2*d]=i*e+o*r+l,c[2*d+1]=s*e+a*r+u}if(this._roundPixels){const e=ym.RESOLUTION;for(let t=0;t<c.length;++t)c[t]=Math.round(c[t]*e)/e}this.vertexDirty=r}calculateUvs(){const e=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new dD(e,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,hD);const t=this.geometry.getBuffer("aVertexPosition").data,r=fD.points,n=this.geometry.getIndex().data,i=n.length,s=4===this.drawMode?3:1;for(let o=0;o+2<i;o+=s){const e=2*n[o],i=2*n[o+1],s=2*n[o+2];if(r[0]=t[e],r[1]=t[e+1],r[2]=t[i],r[3]=t[i+1],r[4]=t[s],r[5]=t[s+1],fD.contains(hD.x,hD.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};pD.BATCHABLE_SIZE=100;let mD=pD;class gD extends yx{constructor(e,t,r){super();const n=new dx(e),i=new dx(t,!0),s=new dx(r,!0,!0);this.addAttribute("aVertexPosition",n,2,!1,nm.FLOAT).addAttribute("aTextureCoord",i,2,!1,nm.FLOAT).addIndex(s),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}class yD extends fE{constructor(e,t){const r={uSampler:e,alpha:1,uTextureMatrix:Px.IDENTITY,uColor:new Float32Array([1,1,1,1])};(t=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},t)).uniforms&&Object.assign(r,t.uniforms),super(t.program||cE.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),r),this._colorDirty=!1,this.uvMatrix=new qE(e),this.batchable=void 0===t.program,this.pluginName=t.pluginName,this._tintColor=new yw(t.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=t.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const e=this.texture.baseTexture.alphaMode;yw.shared.setValue(this._tintColor).premultiply(this._alpha,e).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class vD extends gD{constructor(e=100,t=100,r=10,n=10){super(),this.segWidth=r,this.segHeight=n,this.width=e,this.height=t,this.build()}build(){const e=this.segWidth*this.segHeight,t=[],r=[],n=[],i=this.segWidth-1,s=this.segHeight-1,o=this.width/i,a=this.height/s;for(let u=0;u<e;u++){const e=u%this.segWidth,n=u/this.segWidth|0;t.push(e*o,n*a),r.push(e/i,n/s)}const l=i*s;for(let u=0;u<l;u++){const e=u%i,t=u/i|0,r=t*this.segWidth+e,s=t*this.segWidth+e+1,o=(t+1)*this.segWidth+e,a=(t+1)*this.segWidth+e+1;n.push(r,s,o,s,a,o)}this.buffers[0].data=new Float32Array(t),this.buffers[1].data=new Float32Array(r),this.indexBuffer.data=new Uint16Array(n),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}}class _D extends gD{constructor(e=200,t,r=0){super(new Float32Array(4*t.length),new Float32Array(4*t.length),new Uint16Array(6*(t.length-1))),this.points=t,this._width=e,this.textureScale=r,this.build()}get width(){return this._width}build(){const e=this.points;if(!e)return;const t=this.getBuffer("aVertexPosition"),r=this.getBuffer("aTextureCoord"),n=this.getIndex();if(e.length<1)return;t.data.length/4!==e.length&&(t.data=new Float32Array(4*e.length),r.data=new Float32Array(4*e.length),n.data=new Uint16Array(6*(e.length-1)));const i=r.data,s=n.data;i[0]=0,i[1]=0,i[2]=0,i[3]=1;let o=0,a=e[0];const l=this._width*this.textureScale,u=e.length;for(let d=0;d<u;d++){const t=4*d;if(this.textureScale>0){const t=a.x-e[d].x,r=a.y-e[d].y,n=Math.sqrt(t*t+r*r);a=e[d],o+=n/l}else o=d/(u-1);i[t]=o,i[t+1]=0,i[t+2]=o,i[t+3]=1}let c=0;for(let d=0;d<u-1;d++){const e=2*d;s[c++]=e,s[c++]=e+1,s[c++]=e+2,s[c++]=e+2,s[c++]=e+1,s[c++]=e+3}r.update(),n.update(),this.updateVertices()}updateVertices(){const e=this.points;if(e.length<1)return;let t,r=e[0],n=0,i=0;const s=this.buffers[0].data,o=e.length,a=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let l=0;l<o;l++){const o=e[l],u=4*l;t=l<e.length-1?e[l+1]:o,i=-(t.x-r.x),n=t.y-r.y;const c=Math.sqrt(n*n+i*i);c<1e-6?(n=0,i=0):(n/=c,i/=c,n*=a,i*=a),s[u]=o.x+n,s[u+1]=o.y+i,s[u+2]=o.x-n,s[u+3]=o.y-i,r=o}this.buffers[0].update()}update(){this.textureScale>0?this.build():this.updateVertices()}}class bD extends mD{constructor(e,t,r){super(new vD(e.width,e.height,t,r),new yD(OE.WHITE)),this.texture=e,this.autoResize=!0}textureUpdated(){this._textureID=this.shader.texture._updateID;const e=this.geometry,{width:t,height:r}=this.shader.texture;this.autoResize&&(e.width!==t||e.height!==r)&&(e.width=this.shader.texture.width,e.height=this.shader.texture.height,e.build())}set texture(e){this.shader.texture!==e&&(this.shader.texture=e,this._textureID=-1,e.baseTexture.valid?this.textureUpdated():e.once("update",this.textureUpdated,this))}get texture(){return this.shader.texture}_render(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),super._render(e)}destroy(e){this.shader.texture.off("update",this.textureUpdated,this),super.destroy(e)}}class wD{constructor(e,t,r){this.geometry=new yx,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(let n=0;n<e.length;++n){let r=e[n];r={attributeName:r.attributeName,size:r.size,uploadFunction:r.uploadFunction,type:r.type||nm.FLOAT,offset:r.offset},t[n]?this.dynamicProperties.push(r):this.staticProperties.push(r)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let t=0;this.indexBuffer=new dx(Ew(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let s=0;s<this.dynamicProperties.length;++s){const e=this.dynamicProperties[s];e.offset=t,t+=e.size,this.dynamicStride+=e.size}const r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new dx(this.dynamicData,!1,!1);let n=0;this.staticStride=0;for(let s=0;s<this.staticProperties.length;++s){const e=this.staticProperties[s];e.offset=n,n+=e.size,this.staticStride+=e.size}const i=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(i),this.staticDataUint32=new Uint32Array(i),this.staticBuffer=new dx(this.staticData,!0,!1);for(let s=0;s<this.dynamicProperties.length;++s){const t=this.dynamicProperties[s];e.addAttribute(t.attributeName,this.dynamicBuffer,0,t.type===nm.UNSIGNED_BYTE,t.type,4*this.dynamicStride,4*t.offset)}for(let s=0;s<this.staticProperties.length;++s){const t=this.staticProperties[s];e.addAttribute(t.attributeName,this.staticBuffer,0,t.type===nm.UNSIGNED_BYTE,t.type,4*this.staticStride,4*t.offset)}}uploadDynamic(e,t,r){for(let n=0;n<this.dynamicProperties.length;n++){const i=this.dynamicProperties[n];i.uploadFunction(e,t,r,i.type===nm.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,i.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,t,r){for(let n=0;n<this.staticProperties.length;n++){const i=this.staticProperties[n];i.uploadFunction(e,t,r,i.type===nm.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,i.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}class xD extends gE{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new Px,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:nm.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=fE.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),this.state=ex.for2d()}render(e){const t=e.children,r=e._maxSize,n=e._batchSize,i=this.renderer;let s=t.length;if(0===s)return;s>r&&!e.autoResize&&(s=r);let o=e._buffers;o||(o=e._buffers=this.generateBuffers(e));const a=t[0]._texture.baseTexture,l=a.alphaMode>0;this.state.blendMode=ww(e.blendMode,l),i.state.set(this.state);const u=i.gl,c=e.worldTransform.copyTo(this.tempMatrix);c.prepend(i.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=c.toArray(!0),this.shader.uniforms.uColor=yw.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,l).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=a,this.renderer.shader.bind(this.shader);let d=!1;for(let h=0,f=0;h<s;h+=n,f+=1){let r=s-h;r>n&&(r=n),f>=o.length&&o.push(this._generateOneMoreBuffer(e));const a=o[f];a.uploadDynamic(t,h,r);const l=e._bufferUpdateIDs[f]||0;d=d||a._updateID<l,d&&(a._updateID=e._updateID,a.uploadStatic(t,h,r)),i.geometry.bind(a.geometry),u.drawElements(u.TRIANGLES,6*r,u.UNSIGNED_SHORT,0)}}generateBuffers(e){const t=[],r=e._maxSize,n=e._batchSize,i=e._properties;for(let s=0;s<r;s+=n)t.push(new wD(this.properties,i,n));return t}_generateOneMoreBuffer(e){const t=e._batchSize,r=e._properties;return new wD(this.properties,r,t)}uploadVertices(e,t,r,n,i,s){let o=0,a=0,l=0,u=0;for(let c=0;c<r;++c){const r=e[t+c],d=r._texture,h=r.scale.x,f=r.scale.y,p=d.trim,m=d.orig;p?(a=p.x-r.anchor.x*m.width,o=a+p.width,u=p.y-r.anchor.y*m.height,l=u+p.height):(o=m.width*(1-r.anchor.x),a=m.width*-r.anchor.x,l=m.height*(1-r.anchor.y),u=m.height*-r.anchor.y),n[s]=a*h,n[s+1]=u*f,n[s+i]=o*h,n[s+i+1]=u*f,n[s+2*i]=o*h,n[s+2*i+1]=l*f,n[s+3*i]=a*h,n[s+3*i+1]=l*f,s+=4*i}}uploadPosition(e,t,r,n,i,s){for(let o=0;o<r;o++){const r=e[t+o].position;n[s]=r.x,n[s+1]=r.y,n[s+i]=r.x,n[s+i+1]=r.y,n[s+2*i]=r.x,n[s+2*i+1]=r.y,n[s+3*i]=r.x,n[s+3*i+1]=r.y,s+=4*i}}uploadRotation(e,t,r,n,i,s){for(let o=0;o<r;o++){const r=e[t+o].rotation;n[s]=r,n[s+i]=r,n[s+2*i]=r,n[s+3*i]=r,s+=4*i}}uploadUvs(e,t,r,n,i,s){for(let o=0;o<r;++o){const r=e[t+o]._texture._uvs;r?(n[s]=r.x0,n[s+1]=r.y0,n[s+i]=r.x1,n[s+i+1]=r.y1,n[s+2*i]=r.x2,n[s+2*i+1]=r.y2,n[s+3*i]=r.x3,n[s+3*i+1]=r.y3,s+=4*i):(n[s]=0,n[s+1]=0,n[s+i]=0,n[s+i+1]=0,n[s+2*i]=0,n[s+2*i+1]=0,n[s+3*i]=0,n[s+3*i+1]=0,s+=4*i)}}uploadTint(e,t,r,n,i,s){for(let o=0;o<r;++o){const r=e[t+o],a=yw.shared.setValue(r._tintRGB).toPremultiplied(r.alpha,r.texture.baseTexture.alphaMode>0);n[s]=a,n[s+i]=a,n[s+2*i]=a,n[s+3*i]=a,s+=4*i}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}xD.extension={name:"particle",type:Ww.RendererPlugin},Yw.add(xD);var ED=(e=>(e[e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",e[e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",e))(ED||{});const SD={willReadFrequently:!0},CD=class e{static get experimentalLetterSpacingSupported(){let t=e._experimentalLetterSpacingSupported;if(void 0!==t){const r=ym.ADAPTER.getCanvasRenderingContext2D().prototype;t=e._experimentalLetterSpacingSupported="letterSpacing"in r||"textLetterSpacing"in r}return t}constructor(e,t,r,n,i,s,o,a,l){this.text=e,this.style=t,this.width=r,this.height=n,this.lines=i,this.lineWidths=s,this.lineHeight=o,this.maxLineWidth=a,this.fontProperties=l}static measureText(t,r,n,i=e._canvas){n=n??r.wordWrap;const s=r.toFontString(),o=e.measureFont(s);0===o.fontSize&&(o.fontSize=r.fontSize,o.ascent=r.fontSize);const a=i.getContext("2d",SD);a.font=s;const l=(n?e.wordWrap(t,r,i):t).split(/(?:\r\n|\r|\n)/),u=new Array(l.length);let c=0;for(let p=0;p<l.length;p++){const t=e._measureText(l[p],r.letterSpacing,a);u[p]=t,c=Math.max(c,t)}let d=c+r.strokeThickness;r.dropShadow&&(d+=r.dropShadowDistance);const h=r.lineHeight||o.fontSize+r.strokeThickness;let f=Math.max(h,o.fontSize+2*r.strokeThickness)+r.leading+(l.length-1)*(h+r.leading);return r.dropShadow&&(f+=r.dropShadowDistance),new e(t,r,d,f,l,u,h+r.leading,c,o)}static _measureText(t,r,n){let i=!1;e.experimentalLetterSpacingSupported&&(e.experimentalLetterSpacing?(n.letterSpacing=`${r}px`,n.textLetterSpacing=`${r}px`,i=!0):(n.letterSpacing="0px",n.textLetterSpacing="0px"));let s=n.measureText(t).width;return s>0&&(i?s-=r:s+=(e.graphemeSegmenter(t).length-1)*r),s}static wordWrap(t,r,n=e._canvas){const i=n.getContext("2d",SD);let s=0,o="",a="";const l=Object.create(null),{letterSpacing:u,whiteSpace:c}=r,d=e.collapseSpaces(c),h=e.collapseNewlines(c);let f=!d;const p=r.wordWrapWidth+u,m=e.tokenize(t);for(let g=0;g<m.length;g++){let t=m[g];if(e.isNewline(t)){if(!h){a+=e.addLine(o),f=!d,o="",s=0;continue}t=" "}if(d){const r=e.isBreakingSpace(t),n=e.isBreakingSpace(o[o.length-1]);if(r&&n)continue}const n=e.getFromCache(t,u,l,i);if(n>p)if(""!==o&&(a+=e.addLine(o),o="",s=0),e.canBreakWords(t,r.breakWords)){const n=e.wordWrapSplit(t);for(let c=0;c<n.length;c++){let d=n[c],h=d,m=1;for(;n[c+m];){const i=n[c+m];if(e.canBreakChars(h,i,t,c,r.breakWords))break;d+=i,h=i,m++}c+=m-1;const g=e.getFromCache(d,u,l,i);g+s>p&&(a+=e.addLine(o),f=!1,o="",s=0),o+=d,s+=g}}else{o.length>0&&(a+=e.addLine(o),o="",s=0);const r=g===m.length-1;a+=e.addLine(t,!r),f=!1,o="",s=0}else n+s>p&&(f=!1,a+=e.addLine(o),o="",s=0),(o.length>0||!e.isBreakingSpace(t)||f)&&(o+=t,s+=n)}return a+=e.addLine(o,!1),a}static addLine(t,r=!0){return t=e.trimRight(t),t=r?`${t}\n`:t}static getFromCache(t,r,n,i){let s=n[t];return"number"!=typeof s&&(s=e._measureText(t,r,i)+r,n[t]=s),s}static collapseSpaces(e){return"normal"===e||"pre-line"===e}static collapseNewlines(e){return"normal"===e}static trimRight(t){if("string"!=typeof t)return"";for(let r=t.length-1;r>=0;r--){const n=t[r];if(!e.isBreakingSpace(n))break;t=t.slice(0,-1)}return t}static isNewline(t){return"string"==typeof t&&e._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,r){return"string"==typeof t&&e._breakingSpaces.includes(t.charCodeAt(0))}static tokenize(t){const r=[];let n="";if("string"!=typeof t)return r;for(let i=0;i<t.length;i++){const s=t[i],o=t[i+1];e.isBreakingSpace(s,o)||e.isNewline(s)?(""!==n&&(r.push(n),n=""),r.push(s)):n+=s}return""!==n&&r.push(n),r}static canBreakWords(e,t){return t}static canBreakChars(e,t,r,n,i){return!0}static wordWrapSplit(t){return e.graphemeSegmenter(t)}static measureFont(t){if(e._fonts[t])return e._fonts[t];const r={ascent:0,descent:0,fontSize:0},n=e._canvas,i=e._context;i.font=t;const s=e.METRICS_STRING+e.BASELINE_SYMBOL,o=Math.ceil(i.measureText(s).width);let a=Math.ceil(i.measureText(e.BASELINE_SYMBOL).width);const l=Math.ceil(e.HEIGHT_MULTIPLIER*a);if(a=a*e.BASELINE_MULTIPLIER|0,0===o||0===l)return e._fonts[t]=r,r;n.width=o,n.height=l,i.fillStyle="#f00",i.fillRect(0,0,o,l),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(s,0,a);const u=i.getImageData(0,0,o,l).data,c=u.length,d=4*o;let h=0,f=0,p=!1;for(h=0;h<a;++h){for(let e=0;e<d;e+=4)if(255!==u[f+e]){p=!0;break}if(p)break;f+=d}for(r.ascent=a-h,f=c-d,p=!1,h=l;h>a;--h){for(let e=0;e<d;e+=4)if(255!==u[f+e]){p=!0;break}if(p)break;f-=d}return r.descent=h-a,r.fontSize=r.ascent+r.descent,e._fonts[t]=r,r}static clearMetrics(t=""){t?delete e._fonts[t]:e._fonts={}}static get _canvas(){if(!e.__canvas){let t;try{const r=new OffscreenCanvas(0,0);if(r.getContext("2d",SD)?.measureText)return e.__canvas=r,r;t=ym.ADAPTER.createCanvas()}catch{t=ym.ADAPTER.createCanvas()}t.width=t.height=10,e.__canvas=t}return e.__canvas}static get _context(){return e.__context||(e.__context=e._canvas.getContext("2d",SD)),e.__context}};CD.METRICS_STRING="|q",CD.BASELINE_SYMBOL="M",CD.BASELINE_MULTIPLIER=1.4,CD.HEIGHT_MULTIPLIER=2,CD.graphemeSegmenter=(()=>{if("function"==typeof Intl?.Segmenter){const e=new Intl.Segmenter;return t=>[...e.segment(t)].map(e=>e.segment)}return e=>[...e]})(),CD.experimentalLetterSpacing=!1,CD._fonts={},CD._newlines=[10,13],CD._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let AD=e("u",CD);const TD=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],DD=class e{constructor(e){this.styleID=0,this.reset(),BD(this,e,e)}clone(){const t={};return BD(t,this,e.defaultStyle),new e(t)}reset(){BD(this,e.defaultStyle,e.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const t=PD(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const t=PD(e);this._fill!==t&&(this._fill=t,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){(function(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0})(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const t=PD(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e="number"==typeof this.fontSize?`${this.fontSize}px`:this.fontSize;let t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(let r=t.length-1;r>=0;r--){let e=t[r].trim();!/([\"\'])[^\'\"]+\1/.test(e)&&!TD.includes(e)&&(e=`"${e}"`),t[r]=e}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${t.join(",")}`}};DD.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:ED.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let kD=DD;function PD(e){const t=yw.shared,r=e=>{const r=t.setValue(e);return 1===r.alpha?r.toHex():r.toRgbaString()};return Array.isArray(e)?e.map(r):r(e)}function BD(e,t,r){for(const n in r)Array.isArray(t[n])?e[n]=t[n].slice():e[n]=t[n]}const OD={texture:!0,children:!1,baseTexture:!0},RD=class e extends hC{constructor(t,r,n){let i=!1;n||(n=ym.ADAPTER.createCanvas(),i=!0),n.width=3,n.height=3;const s=OE.from(n);s.orig=new Cx,s.trim=new Cx,super(s),this._ownCanvas=i,this.canvas=n,this.context=n.getContext("2d",{willReadFrequently:!0}),this._resolution=e.defaultResolution??ym.RESOLUTION,this._autoResolution=e.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=t,this.style=r,this.localStyleID=-1}static get experimentalLetterSpacing(){return AD.experimentalLetterSpacing}static set experimentalLetterSpacing(e){Fb("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),AD.experimentalLetterSpacing=e}updateText(e){const t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const r=this.context,n=AD.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),i=n.width,s=n.height,o=n.lines,a=n.lineHeight,l=n.lineWidths,u=n.maxLineWidth,c=n.fontProperties;let d,h;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,i)+2*t.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,s)+2*t.padding)*this._resolution),r.scale(this._resolution,this._resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.lineWidth=t.strokeThickness,r.textBaseline=t.textBaseline,r.lineJoin=t.lineJoin,r.miterLimit=t.miterLimit;const f=t.dropShadow?2:1;for(let p=0;p<f;++p){const e=t.dropShadow&&0===p,i=e?Math.ceil(Math.max(1,s)+2*t.padding):0,f=i*this._resolution;if(e){r.fillStyle="black",r.strokeStyle="black";const e=t.dropShadowColor,n=t.dropShadowBlur*this._resolution,i=t.dropShadowDistance*this._resolution;r.shadowColor=yw.shared.setValue(e).setAlpha(t.dropShadowAlpha).toRgbaString(),r.shadowBlur=n,r.shadowOffsetX=Math.cos(t.dropShadowAngle)*i,r.shadowOffsetY=Math.sin(t.dropShadowAngle)*i+f}else r.fillStyle=this._generateFillStyle(t,o,n),r.strokeStyle=t.stroke,r.shadowColor="black",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0;let m=(a-c.fontSize)/2;a-c.fontSize<0&&(m=0);for(let r=0;r<o.length;r++)d=t.strokeThickness/2,h=t.strokeThickness/2+r*a+c.ascent+m,"right"===t.align?d+=u-l[r]:"center"===t.align&&(d+=(u-l[r])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(o[r],d+t.padding,h+t.padding-i,!0),t.fill&&this.drawLetterSpacing(o[r],d+t.padding,h+t.padding-i)}this.updateTexture()}drawLetterSpacing(e,t,r,n=!1){const i=this._style.letterSpacing;let s=!1;if(AD.experimentalLetterSpacingSupported&&(AD.experimentalLetterSpacing?(this.context.letterSpacing=`${i}px`,this.context.textLetterSpacing=`${i}px`,s=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),0===i||s)return void(n?this.context.strokeText(e,t,r):this.context.fillText(e,t,r));let o=t;const a=AD.graphemeSegmenter(e);let l=this.context.measureText(e).width,u=0;for(let c=0;c<a.length;++c){const e=a[c];n?this.context.strokeText(e,o,r):this.context.fillText(e,o,r);let t="";for(let r=c+1;r<a.length;++r)t+=a[r];u=this.context.measureText(t).width,o+=l-u+i,l=u}}updateTexture(){const e=this.canvas;if(this._style.trim){const t=Vw(e);t.data&&(e.width=t.width,e.height=t.height,this.context.putImageData(t.data,0,0))}const t=this._texture,r=this._style,n=r.trim?0:r.padding,i=t.baseTexture;t.trim.width=t._frame.width=e.width/this._resolution,t.trim.height=t._frame.height=e.height/this._resolution,t.trim.x=-n,t.trim.y=-n,t.orig.width=t._frame.width-2*n,t.orig.height=t._frame.height-2*n,this._onTextureUpdate(),i.setRealSize(e.width,e.height,this._resolution),t.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,t){return this.updateText(!0),-1===this._textureID&&(e=!1),super.getBounds(e,t)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,t,r){const n=e.fill;if(!Array.isArray(n))return n;if(1===n.length)return n[0];let i;const s=e.dropShadow?e.dropShadowDistance:0,o=e.padding||0,a=this.canvas.width/this._resolution-s-2*o,l=this.canvas.height/this._resolution-s-2*o,u=n.slice(),c=e.fillGradientStops.slice();if(!c.length){const e=u.length+1;for(let t=1;t<e;++t)c.push(t/e)}if(u.unshift(n[0]),c.unshift(0),u.push(n[n.length-1]),c.push(1),e.fillGradientType===ED.LINEAR_VERTICAL){i=this.context.createLinearGradient(a/2,o,a/2,l+o);const n=r.fontProperties.fontSize+e.strokeThickness;for(let e=0;e<t.length;e++){const s=r.lineHeight*(e-1)+n,o=r.lineHeight*e;let a=o;e>0&&s>o&&(a=(o+s)/2);const d=o+n,h=r.lineHeight*(e+1);let f=d;e+1<t.length&&h<d&&(f=(d+h)/2);const p=(f-a)/l;for(let e=0;e<u.length;e++){let t=0;t="number"==typeof c[e]?c[e]:e/u.length;let r=Math.min(1,Math.max(0,a/l+t*p));r=Number(r.toFixed(5)),i.addColorStop(r,u[e])}}}else{i=this.context.createLinearGradient(o,l/2,a+o,l/2);const e=u.length+1;let t=1;for(let r=0;r<u.length;r++){let n;n="number"==typeof c[r]?c[r]:t/e,i.addColorStop(n,u[r]),t++}}return i}destroy(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},OD,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const t=Pw(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const t=Pw(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},this._style=e instanceof kD?e:new kD(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};RD.defaultAutoResolution=!0;let FD=e("T",RD);class ID{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function MD(e,t){let r=!1;if(e?._textures?.length)for(let n=0;n<e._textures.length;n++)if(e._textures[n]instanceof OE){const i=e._textures[n].baseTexture;t.includes(i)||(t.push(i),r=!0)}return r}function ND(e,t){if(e.baseTexture instanceof lx){const r=e.baseTexture;return t.includes(r)||t.push(r),!0}return!1}function LD(e,t){if(e._texture&&e._texture instanceof OE){const r=e._texture.baseTexture;return t.includes(r)||t.push(r),!0}return!1}function UD(e,t){return t instanceof FD&&(t.updateText(!0),!0)}function jD(e,t){if(t instanceof kD){const e=t.toFontString();return AD.measureFont(e),!0}return!1}function zD(e,t){if(e instanceof FD){t.includes(e.style)||t.push(e.style),t.includes(e)||t.push(e);const r=e._texture.baseTexture;return t.includes(r)||t.push(r),!0}return!1}function VD(e,t){return e instanceof kD&&(t.includes(e)||t.push(e),!0)}const GD=class e{constructor(t){this.limiter=new ID(e.uploadsPerFrame),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(zD),this.registerFindHook(VD),this.registerFindHook(MD),this.registerFindHook(ND),this.registerFindHook(LD),this.registerUploadHook(UD),this.registerUploadHook(jD)}upload(e){return new Promise(t=>{e&&this.add(e),this.queue.length?(this.completes.push(t),this.ticking||(this.ticking=!0,IS.system.addOnce(this.tick,this,OS.UTILITY))):t()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let t=!1;if(e&&!e._destroyed)for(let r=0,n=this.uploadHooks.length;r<n;r++)if(this.uploadHooks[r](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}t||this.queue.shift()}if(this.queue.length)IS.system.addOnce(this.tick,this,OS.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let t=0,r=e.length;t<r;t++)e[t]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let t=0,r=this.addHooks.length;t<r&&!this.addHooks[t](e,this.queue);t++);if(e instanceof uC)for(let t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this}destroy(){this.ticking&&IS.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};GD.uploadsPerFrame=4;let HD=GD;function $D(e,t){return t instanceof lx&&(t._glTextures[e.CONTEXT_UID]||e.texture.bind(t),!0)}function WD(e,t){if(!(t instanceof uD))return!1;const{geometry:r}=t;t.finishPoly(),r.updateBatches();const{batches:n}=r;for(let i=0;i<n.length;i++){const{texture:t}=n[i].style;t&&$D(e,t.baseTexture)}return r.batchable||e.geometry.bind(r,t._resolveDirectShader(e)),!0}function qD(e,t){return e instanceof uD&&(t.push(e),!0)}Object.defineProperties(ym,{UPLOADS_PER_FRAME:{get:()=>HD.uploadsPerFrame,set(e){Fb("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),HD.uploadsPerFrame=e}}});class XD extends HD{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(qD),this.registerUploadHook($D),this.registerUploadHook(WD)}}XD.extension={name:"prepare",type:Ww.RendererSystem},Yw.add(XD);class YD extends hC{constructor(e,t=!0){super(e[0]instanceof OE?e[0]:e[0].texture),this._textures=null,this._durations=null,this._autoUpdate=t,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=e}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(IS.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(IS.shared.add(this.update,this,OS.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(e){this.stop(),this.currentFrame=e}gotoAndPlay(e){this.currentFrame=e,this.play()}update(e){if(!this._playing)return;const t=this.animationSpeed*e,r=this.currentFrame;if(null!==this._durations){let r=this._currentTime%1*this._durations[this.currentFrame];for(r+=t/60*1e3;r<0;)this._currentTime--,r+=this._durations[this.currentFrame];const n=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);r>=this._durations[this.currentFrame];)r-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=t;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<r||this.animationSpeed<0&&this.currentFrame>r)&&this.onLoop(),this.updateTexture())}updateTexture(){const e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this._texture=this._textures[e],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(e){this.stop(),super.destroy(e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(e){const t=[];for(let r=0;r<e.length;++r)t.push(OE.from(e[r]));return new YD(t)}static fromImages(e){const t=[];for(let r=0;r<e.length;++r)t.push(OE.from(e[r]));return new YD(t)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(e){if(e[0]instanceof OE)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(let t=0;t<e.length;t++)this._textures.push(e[t].texture),this._durations.push(e[t].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}set currentFrame(e){if(e<0||e>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${e}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(IS.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(IS.shared.add(this.update,this),this._isConnectedToTicker=!0))}}const KD=new Ex;class ZD extends hC{constructor(e,t=100,r=100){super(e),this.tileTransform=new zx,this._width=t,this._height=r,this.uvMatrix=this.texture.uvMatrix||new qE(e),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(e){this.tileTransform.scale.copyFrom(e)}get tilePosition(){return this.tileTransform.position}set tilePosition(e){this.tileTransform.position.copyFrom(e)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(e){const t=this._texture;!t||!t.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))}_calculateBounds(){const e=this._width*-this._anchor._x,t=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),n=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,t,r,n)}getLocalBounds(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Cx),e=this._localBoundsRect),this._bounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,KD);const t=this._width,r=this._height,n=-t*this.anchor._x;if(KD.x>=n&&KD.x<n+t){const e=-r*this.anchor._y;if(KD.y>=e&&KD.y<e+r)return!0}return!1}destroy(e){super.destroy(e),this.tileTransform=null,this.uvMatrix=null}static from(e,t){const r=e instanceof OE?e:OE.from(e,t);return new ZD(r,t.width,t.height)}get width(){return this._width}set width(e){this._width=e}get height(){return this._height}set height(e){this._height=e}}var JD="#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n";const QD=new Px;class ek extends gE{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new ME,this.state=ex.for2d()}contextChange(){const e=this.renderer,t={globals:e.globalUniforms};this.simpleShader=fE.from(JD,"#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",t),this.shader=e.context.webGLVersion>1?fE.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",t):fE.from(JD,"#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",t)}render(e){const t=this.renderer,r=this.quad;let n=r.vertices;n[0]=n[6]=e._width*-e.anchor.x,n[1]=n[3]=e._height*-e.anchor.y,n[2]=n[4]=e._width*(1-e.anchor.x),n[5]=n[7]=e._height*(1-e.anchor.y);const i=e.uvRespectAnchor?e.anchor.x:0,s=e.uvRespectAnchor?e.anchor.y:0;n=r.uvs,n[0]=n[6]=-i,n[1]=n[3]=-s,n[2]=n[4]=1-i,n[5]=n[7]=1-s,r.invalidate();const o=e._texture,a=o.baseTexture,l=a.alphaMode>0,u=e.tileTransform.localTransform,c=e.uvMatrix;let d=a.isPowerOfTwo&&o.frame.width===a.width&&o.frame.height===a.height;d&&(a._glTextures[t.CONTEXT_UID]?d=a.wrapMode!==om.CLAMP:a.wrapMode===om.CLAMP&&(a.wrapMode=om.REPEAT));const h=d?this.simpleShader:this.shader,f=o.width,p=o.height,m=e._width,g=e._height;QD.set(u.a*f/m,u.b*f/g,u.c*p/m,u.d*p/g,u.tx/m,u.ty/g),QD.invert(),d?QD.prepend(c.mapCoord):(h.uniforms.uMapCoord=c.mapCoord.toArray(!0),h.uniforms.uClampFrame=c.uClampFrame,h.uniforms.uClampOffset=c.uClampOffset),h.uniforms.uTransform=QD.toArray(!0),h.uniforms.uColor=yw.shared.setValue(e.tint).premultiply(e.worldAlpha,l).toArray(h.uniforms.uColor),h.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),h.uniforms.uSampler=o,t.shader.bind(h),t.geometry.bind(r),this.state.blendMode=ww(e.blendMode,l),t.state.set(this.state),t.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}ek.extension={name:"tilingSprite",type:Ww.RendererPlugin},Yw.add(ek);const tk=class e{constructor(e,t,r){this.linkedSheets=[],(e instanceof lx||e instanceof OE)&&(e={texture:e,data:t,resolutionFilename:r});const{texture:n,data:i,resolutionFilename:s=null,cachePrefix:o=""}=e;this.cachePrefix=o,this._texture=n instanceof OE?n:null,this.baseTexture=n instanceof lx?n:this._texture.baseTexture,this.textures={},this.animations={},this.data=i;const a=this.baseTexture.resource;this.resolution=this._updateResolution(s||(a?a.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){const{scale:t}=this.data.meta;let r=Hw(e,null);return null===r&&(r="number"==typeof t?t:parseFloat(t??"1")),1!==r&&this.baseTexture.setResolution(r),r}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=e.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let r=t;const n=e.BATCH_SIZE;for(;r-t<n&&r<this._frameKeys.length;){const e=this._frameKeys[r],t=this._frames[e],n=t.frame;if(n){let r=null,i=null;const s=!1!==t.trimmed&&t.sourceSize?t.sourceSize:t.frame,o=new Cx(0,0,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution);r=t.rotated?new Cx(Math.floor(n.x)/this.resolution,Math.floor(n.y)/this.resolution,Math.floor(n.h)/this.resolution,Math.floor(n.w)/this.resolution):new Cx(Math.floor(n.x)/this.resolution,Math.floor(n.y)/this.resolution,Math.floor(n.w)/this.resolution,Math.floor(n.h)/this.resolution),!1!==t.trimmed&&t.spriteSourceSize&&(i=new Cx(Math.floor(t.spriteSourceSize.x)/this.resolution,Math.floor(t.spriteSourceSize.y)/this.resolution,Math.floor(n.w)/this.resolution,Math.floor(n.h)/this.resolution)),this.textures[e]=new OE(this.baseTexture,r,o,i,t.rotated?2:0,t.anchor,t.borders),OE.addToCache(this.textures[e],this.cachePrefix+e.toString())}r++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let r=0;r<e[t].length;r++){const n=e[t][r];this.animations[t].push(this.textures[n])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*e.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*e.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){for(const t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(this._texture?.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};tk.BATCH_SIZE=1e3;let rk=tk;const nk=["jpg","png","jpeg","avif","webp","s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"];function ik(e,t,r){const n={};if(e.forEach(e=>{n[e]=t}),Object.keys(t.textures).forEach(e=>{n[`${t.cachePrefix}${e}`]=t.textures[e]}),!r){const r=Lb.dirname(e[0]);t.linkedSheets.forEach((e,i)=>{Object.assign(n,ik([`${r}/${t.data.meta.related_multi_packs[i]}`],e,!0))})}return n}const sk={extension:Ww.Asset,cache:{test:e=>e instanceof rk,getCacheableAssets:(e,t)=>ik(e,t,!1)},resolver:{test:e=>{const t=e.split("?")[0].split("."),r=t.pop(),n=t.pop();return"json"===r&&nk.includes(n)},parse:e=>{const t=e.split(".");return{resolution:parseFloat(ym.RETINA_PREFIX.exec(e)?.[1]??"1"),format:t[t.length-2],src:e}}},loader:{name:"spritesheetLoader",extension:{type:Ww.LoadParser,priority:eA.Normal},testParse:async(e,t)=>".json"===Lb.extname(t.src).toLowerCase()&&!!e.frames,async parse(e,t,r){const{texture:n,imageFilename:i,cachePrefix:s}=t?.data??{};let o,a=Lb.dirname(t.src);if(a&&a.lastIndexOf("/")!==a.length-1&&(a+="/"),n&&n.baseTexture)o=n;else{const n=XC(a+(i??e.meta.image),t.src);o=(await r.load([n]))[n]}const l=new rk({texture:o.baseTexture,data:e,resolutionFilename:t.src,cachePrefix:s});await l.parse();const u=e?.meta?.related_multi_packs;if(Array.isArray(u)){const e=[];for(const i of u){if("string"!=typeof i)continue;let n=a+i;t.data?.ignoreMultiPack||(n=XC(n,t.src),e.push(r.load({src:n,data:{ignoreMultiPack:!0}})))}const n=await Promise.all(e);l.linkedSheets=n,n.forEach(e=>{e.linkedSheets=[l].concat(l.linkedSheets.filter(t=>t!==e))})}return l},unload(e){e.destroy(!0)}}};Yw.add(sk);class ok{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class ak{static test(e){return"string"==typeof e&&e.startsWith("info face=")}static parse(e){const t=e.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const i in t){const e=t[i].match(/^[a-z]+/gm)[0],n=t[i].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),s={};for(const t in n){const e=n[t].split("="),r=e[0],i=e[1].replace(/"/gm,""),o=parseFloat(i),a=isNaN(o)?i:o;s[r]=a}r[e].push(s)}const n=new ok;return r.info.forEach(e=>n.info.push({face:e.face,size:parseInt(e.size,10)})),r.common.forEach(e=>n.common.push({lineHeight:parseInt(e.lineHeight,10)})),r.page.forEach(e=>n.page.push({id:parseInt(e.id,10),file:e.file})),r.char.forEach(e=>n.char.push({id:parseInt(e.id,10),page:parseInt(e.page,10),x:parseInt(e.x,10),y:parseInt(e.y,10),width:parseInt(e.width,10),height:parseInt(e.height,10),xoffset:parseInt(e.xoffset,10),yoffset:parseInt(e.yoffset,10),xadvance:parseInt(e.xadvance,10)})),r.kerning.forEach(e=>n.kerning.push({first:parseInt(e.first,10),second:parseInt(e.second,10),amount:parseInt(e.amount,10)})),r.distanceField.forEach(e=>n.distanceField.push({distanceRange:parseInt(e.distanceRange,10),fieldType:e.fieldType})),n}}class lk{static test(e){const t=e;return"string"!=typeof e&&"getElementsByTagName"in e&&t.getElementsByTagName("page").length&&null!==t.getElementsByTagName("info")[0].getAttribute("face")}static parse(e){const t=new ok,r=e.getElementsByTagName("info"),n=e.getElementsByTagName("common"),i=e.getElementsByTagName("page"),s=e.getElementsByTagName("char"),o=e.getElementsByTagName("kerning"),a=e.getElementsByTagName("distanceField");for(let l=0;l<r.length;l++)t.info.push({face:r[l].getAttribute("face"),size:parseInt(r[l].getAttribute("size"),10)});for(let l=0;l<n.length;l++)t.common.push({lineHeight:parseInt(n[l].getAttribute("lineHeight"),10)});for(let l=0;l<i.length;l++)t.page.push({id:parseInt(i[l].getAttribute("id"),10)||0,file:i[l].getAttribute("file")});for(let l=0;l<s.length;l++){const e=s[l];t.char.push({id:parseInt(e.getAttribute("id"),10),page:parseInt(e.getAttribute("page"),10)||0,x:parseInt(e.getAttribute("x"),10),y:parseInt(e.getAttribute("y"),10),width:parseInt(e.getAttribute("width"),10),height:parseInt(e.getAttribute("height"),10),xoffset:parseInt(e.getAttribute("xoffset"),10),yoffset:parseInt(e.getAttribute("yoffset"),10),xadvance:parseInt(e.getAttribute("xadvance"),10)})}for(let l=0;l<o.length;l++)t.kerning.push({first:parseInt(o[l].getAttribute("first"),10),second:parseInt(o[l].getAttribute("second"),10),amount:parseInt(o[l].getAttribute("amount"),10)});for(let l=0;l<a.length;l++)t.distanceField.push({fieldType:a[l].getAttribute("fieldType"),distanceRange:parseInt(a[l].getAttribute("distanceRange"),10)});return t}}class uk{static test(e){return!("string"!=typeof e||!e.includes("<font>"))&&lk.test(ym.ADAPTER.parseXML(e))}static parse(e){return lk.parse(ym.ADAPTER.parseXML(e))}}const ck=[ak,lk,uk];function dk(e){for(let t=0;t<ck.length;t++)if(ck[t].test(e))return ck[t];return null}function hk(e,t,r,n,i,s,o){const a=r.text,l=r.fontProperties;t.translate(n,i),t.scale(s,s);const u=o.strokeThickness/2,c=-o.strokeThickness/2;if(t.font=o.toFontString(),t.lineWidth=o.strokeThickness,t.textBaseline=o.textBaseline,t.lineJoin=o.lineJoin,t.miterLimit=o.miterLimit,t.fillStyle=function(e,t,r,n,i,s){const o=r.fill;if(!Array.isArray(o))return o;if(1===o.length)return o[0];let a;const l=r.dropShadow?r.dropShadowDistance:0,u=r.padding||0,c=e.width/n-l-2*u,d=e.height/n-l-2*u,h=o.slice(),f=r.fillGradientStops.slice();if(!f.length){const e=h.length+1;for(let t=1;t<e;++t)f.push(t/e)}if(h.unshift(o[0]),f.unshift(0),h.push(o[o.length-1]),f.push(1),r.fillGradientType===ED.LINEAR_VERTICAL){a=t.createLinearGradient(c/2,u,c/2,d+u);let e=0;const n=(s.fontProperties.fontSize+r.strokeThickness)/d;for(let t=0;t<i.length;t++){const r=s.lineHeight*t;for(let t=0;t<h.length;t++){let i=0;i="number"==typeof f[t]?f[t]:t/h.length;const s=r/d+i*n;let o=Math.max(e,s);o=Math.min(o,1),a.addColorStop(o,h[t]),e=o}}}else{a=t.createLinearGradient(u,d/2,c+u,d/2);const e=h.length+1;let r=1;for(let t=0;t<h.length;t++){let n;n="number"==typeof f[t]?f[t]:r/e,a.addColorStop(n,h[t]),r++}}return a}(e,t,o,s,[a],r),t.strokeStyle=o.stroke,o.dropShadow){const e=o.dropShadowColor,r=o.dropShadowBlur*s,n=o.dropShadowDistance*s;t.shadowColor=yw.shared.setValue(e).setAlpha(o.dropShadowAlpha).toRgbaString(),t.shadowBlur=r,t.shadowOffsetX=Math.cos(o.dropShadowAngle)*n,t.shadowOffsetY=Math.sin(o.dropShadowAngle)*n}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;o.stroke&&o.strokeThickness&&t.strokeText(a,u,c+r.lineHeight-l.descent),o.fill&&t.fillText(a,u,c+r.lineHeight-l.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function fk(e){return e.codePointAt?e.codePointAt(0):e.charCodeAt(0)}function pk(e){return Array.from?Array.from(e):e.split("")}const mk=class e{constructor(e,t,r){const[n]=e.info,[i]=e.common,[s]=e.page,[o]=e.distanceField,a=Hw(s.file),l={};this._ownsTextures=r,this.font=n.face,this.size=n.size,this.lineHeight=i.lineHeight/a,this.chars={},this.pageTextures=l;for(let u=0;u<e.page.length;u++){const{id:r,file:n}=e.page[u];l[r]=t instanceof Array?t[u]:t[n],o?.fieldType&&"none"!==o.fieldType&&(l[r].baseTexture.alphaMode=lm.NO_PREMULTIPLIED_ALPHA,l[r].baseTexture.mipmap=am.OFF)}for(let u=0;u<e.char.length;u++){const{id:t,page:r}=e.char[u];let{x:n,y:i,width:s,height:o,xoffset:c,yoffset:d,xadvance:h}=e.char[u];n/=a,i/=a,s/=a,o/=a,c/=a,d/=a,h/=a;const f=new Cx(n+l[r].frame.x/a,i+l[r].frame.y/a,s,o);this.chars[t]={xOffset:c,yOffset:d,xAdvance:h,kerning:{},texture:new OE(l[r].baseTexture,f),page:r}}for(let u=0;u<e.kerning.length;u++){let{first:t,second:r,amount:n}=e.kerning[u];t/=a,r/=a,n/=a,this.chars[r]&&(this.chars[r].kerning[t]=n)}this.distanceFieldRange=o?.distanceRange,this.distanceFieldType=o?.fieldType?.toLowerCase()??"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(t,r,n){let i;if(t instanceof ok)i=t;else{const e=dk(t);if(!e)throw new Error("Unrecognized data format for font.");i=e.parse(t)}r instanceof OE&&(r=[r]);const s=new e(i,r,n);return e.available[s.font]=s,s}static uninstall(t){const r=e.available[t];if(!r)throw new Error(`No font found named '${t}'`);r.destroy(),delete e.available[t]}static from(t,r,n){if(!t)throw new Error("[BitmapFont] Property `name` is required.");const{chars:i,padding:s,resolution:o,textureWidth:a,textureHeight:l,...u}=Object.assign({},e.defaultOptions,n),c=function(e){"string"==typeof e&&(e=[e]);const t=[];for(let r=0,n=e.length;r<n;r++){const n=e[r];if(Array.isArray(n)){if(2!==n.length)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${n.length}.`);const e=n[0].charCodeAt(0),r=n[1].charCodeAt(0);if(r<e)throw new Error("[BitmapFont]: Invalid character range.");for(let n=e,i=r;n<=i;n++)t.push(String.fromCharCode(n))}else t.push(...pk(n))}if(0===t.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}(i),d=r instanceof kD?r:new kD(r),h=a,f=new ok;f.info[0]={face:d.fontFamily,size:d.fontSize},f.common[0]={lineHeight:d.fontSize};let p,m,g,y=0,v=0,_=0;const b=[];for(let e=0;e<c.length;e++){p||(p=ym.ADAPTER.createCanvas(),p.width=a,p.height=l,m=p.getContext("2d"),g=new lx(p,{resolution:o,...u}),b.push(new OE(g)),f.page.push({id:b.length-1,file:""}));const t=c[e],r=AD.measureText(t,d,!1,p),n=r.width,i=Math.ceil(r.height),w=Math.ceil(("italic"===d.fontStyle?2:1)*n);if(v>=l-i*o){if(0===v)throw new Error(`[BitmapFont] textureHeight ${l}px is too small (fontFamily: '${d.fontFamily}', fontSize: ${d.fontSize}px, char: '${t}')`);--e,p=null,m=null,g=null,v=0,y=0,_=0;continue}if(_=Math.max(i+r.fontProperties.descent,_),w*o+y>=h){if(0===y)throw new Error(`[BitmapFont] textureWidth ${a}px is too small (fontFamily: '${d.fontFamily}', fontSize: ${d.fontSize}px, char: '${t}')`);--e,v+=_*o,v=Math.ceil(v),y=0,_=0;continue}hk(p,m,r,y,v,o,d);const x=fk(r.text);f.char.push({id:x,page:b.length-1,x:y/o,y:v/o,width:w,height:i,xoffset:0,yoffset:0,xadvance:n-(d.dropShadow?d.dropShadowDistance:0)-(d.stroke?d.strokeThickness:0)}),y+=(w+2*s)*o,y=Math.ceil(y)}if(!n?.skipKerning)for(let e=0,x=c.length;e<x;e++){const t=c[e];for(let e=0;e<x;e++){const r=c[e],n=m.measureText(t).width,i=m.measureText(r).width,s=m.measureText(t+r).width-(n+i);s&&f.kerning.push({first:fk(t),second:fk(r),amount:s})}}const w=new e(f,b,!0);return void 0!==e.available[t]&&e.uninstall(t),e.available[t]=w,w}};mk.ALPHA=[["a","z"],["A","Z"]," "],mk.NUMERIC=[["0","9"]],mk.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],mk.ASCII=[[" ","~"]],mk.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:mk.ALPHANUMERIC},mk.available={};let gk=mk;const yk=[],vk=[],_k=[],bk=class e extends uC{constructor(t,r={}){super();const{align:n,tint:i,maxWidth:s,letterSpacing:o,fontName:a,fontSize:l}=Object.assign({},e.styleDefaults,r);if(!gk.available[a])throw new Error(`Missing BitmapFont "${a}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=n,this._tintColor=new yw(i),this._font=void 0,this._fontName=a,this._fontSize=l,this.text=t,this._maxWidth=s,this._maxLineHeight=0,this._letterSpacing=o,this._anchor=new Ux(()=>{this.dirty=!0},this,0,0),this._roundPixels=ym.ROUND_PIXELS,this.dirty=!0,this._resolution=ym.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){const e=gk.available[this._fontName],t=this.fontSize,r=t/e.size,n=new Ex,i=[],s=[],o=[],a=pk(this._text.replace(/(?:\r\n|\r)/g,"\n")||" "),l=this._maxWidth*e.size/t,u="none"===e.distanceFieldType?yk:vk;let c=null,d=0,h=0,f=0,p=-1,m=0,g=0,y=0,v=0;for(let C=0;C<a.length;C++){const t=a[C],r=fk(t);if(/(?:\s)/.test(t)&&(p=C,m=d,v++),"\r"===t||"\n"===t){s.push(d),o.push(-1),h=Math.max(h,d),++f,++g,n.x=0,n.y+=e.lineHeight,c=null,v=0;continue}const u=e.chars[r];if(!u)continue;c&&u.kerning[c]&&(n.x+=u.kerning[c]);const _=_k.pop()||{texture:OE.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Ex};_.texture=u.texture,_.line=f,_.charCode=r,_.position.x=Math.round(n.x+u.xOffset+this._letterSpacing/2),_.position.y=Math.round(n.y+u.yOffset),_.prevSpaces=v,i.push(_),d=_.position.x+Math.max(u.xAdvance-u.xOffset,u.texture.orig.width),n.x+=u.xAdvance+this._letterSpacing,y=Math.max(y,u.yOffset+u.texture.height),c=r,-1!==p&&l>0&&n.x>l&&(++g,kw(i,1+p-g,1+C-p),C=p,p=-1,s.push(m),o.push(i.length>0?i[i.length-1].prevSpaces:0),h=Math.max(h,m),f++,n.x=0,n.y+=e.lineHeight,c=null,v=0)}const _=a[a.length-1];"\r"!==_&&"\n"!==_&&(/(?:\s)/.test(_)&&(d=m),s.push(d),h=Math.max(h,d),o.push(-1));const b=[];for(let C=0;C<=f;C++){let e=0;"right"===this._align?e=h-s[C]:"center"===this._align?e=(h-s[C])/2:"justify"===this._align&&(e=o[C]<0?0:(h-s[C])/o[C]),b.push(e)}const w=i.length,x={},E=[],S=this._activePagesMeshData;u.push(...S);for(let C=0;C<w;C++){const t=i[C].texture,r=t.baseTexture.uid;if(!x[r]){let n=u.pop();if(!n){const t=new gD;let r,i;"none"===e.distanceFieldType?(r=new yD(OE.EMPTY),i=Qp.NORMAL):(r=new yD(OE.EMPTY,{program:cE.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n  if (median < 0.01) {\r\n    alpha = 0.0;\r\n  } else if (median > 0.99) {\r\n    alpha = 1.0;\r\n  }\r\n\r\n  // Gamma correction for coverage-like alpha\r\n  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r\n  float gamma = mix(1.0, 1.0 / 2.2, luma);\r\n  float coverage = pow(uColor.a * alpha, gamma);  \r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, coverage);\r\n}\r\n"),uniforms:{uFWidth:0}}),i=Qp.NORMAL_NPM);const s=new mD(t,r);s.blendMode=i,n={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:s,vertices:null,uvs:null,indices:null}}n.index=0,n.indexCount=0,n.vertexCount=0,n.uvsCount=0,n.total=0;const{_textureCache:i}=this;i[r]=i[r]||new OE(t.baseTexture),n.mesh.texture=i[r],n.mesh.tint=this._tintColor.value,E.push(n),x[r]=n}x[r].total++}for(let C=0;C<S.length;C++)E.includes(S[C])||this.removeChild(S[C].mesh);for(let C=0;C<E.length;C++)E[C].mesh.parent!==this&&this.addChild(E[C].mesh);this._activePagesMeshData=E;for(const C in x){const e=x[C],t=e.total;if(!(e.indices?.length>6*t)||e.vertices.length<2*mD.BATCHABLE_SIZE)e.vertices=new Float32Array(8*t),e.uvs=new Float32Array(8*t),e.indices=new Uint16Array(6*t);else{const t=e.total,r=e.vertices;for(let e=4*t*2;e<r.length;e++)r[e]=0}e.mesh.size=6*t}for(let C=0;C<w;C++){const e=i[C];let t=e.position.x+b[e.line]*("justify"===this._align?e.prevSpaces:1);this._roundPixels&&(t=Math.round(t));const n=t*r,s=e.position.y*r,o=e.texture,a=x[o.baseTexture.uid],l=o.frame,u=o._uvs,c=a.index++;a.indices[6*c+0]=0+4*c,a.indices[6*c+1]=1+4*c,a.indices[6*c+2]=2+4*c,a.indices[6*c+3]=0+4*c,a.indices[6*c+4]=2+4*c,a.indices[6*c+5]=3+4*c,a.vertices[8*c+0]=n,a.vertices[8*c+1]=s,a.vertices[8*c+2]=n+l.width*r,a.vertices[8*c+3]=s,a.vertices[8*c+4]=n+l.width*r,a.vertices[8*c+5]=s+l.height*r,a.vertices[8*c+6]=n,a.vertices[8*c+7]=s+l.height*r,a.uvs[8*c+0]=u.x0,a.uvs[8*c+1]=u.y0,a.uvs[8*c+2]=u.x1,a.uvs[8*c+3]=u.y1,a.uvs[8*c+4]=u.x2,a.uvs[8*c+5]=u.y2,a.uvs[8*c+6]=u.x3,a.uvs[8*c+7]=u.y3}this._textWidth=h*r,this._textHeight=(n.y+e.lineHeight)*r;for(const C in x){const e=x[C];if(0!==this.anchor.x||0!==this.anchor.y){let t=0;const r=this._textWidth*this.anchor.x,n=this._textHeight*this.anchor.y;for(let i=0;i<e.total;i++)e.vertices[t++]-=r,e.vertices[t++]-=n,e.vertices[t++]-=r,e.vertices[t++]-=n,e.vertices[t++]-=r,e.vertices[t++]-=n,e.vertices[t++]-=r,e.vertices[t++]-=n}this._maxLineHeight=y*r;const t=e.mesh.geometry.getBuffer("aVertexPosition"),n=e.mesh.geometry.getBuffer("aTextureCoord"),i=e.mesh.geometry.getIndex();t.data=e.vertices,n.data=e.uvs,i.data=e.indices,t.update(),n.update(),i.update()}for(let C=0;C<i.length;C++)_k.push(i[C]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:t,distanceFieldType:r,size:n}=gk.available[this._fontName];if("none"!==r){const{a:r,b:i,c:s,d:o}=this.worldTransform,a=Math.sqrt(r*r+i*i),l=Math.sqrt(s*s+o*o),u=(Math.abs(a)+Math.abs(l))/2,c=this.fontSize/n,d=e._view.resolution;for(const e of this._activePagesMeshData)e.mesh.shader.uniforms.uFWidth=u*t*c*d}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=gk.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!gk.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??gk.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){"number"==typeof e?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:t}=this,r="none"===gk.available[this._fontName].distanceFieldType?yk:vk;r.push(...this._activePagesMeshData);for(const n of this._activePagesMeshData)this.removeChild(n.mesh);this._activePagesMeshData=[],r.filter(e=>t[e.mesh.texture.baseTexture.uid]).forEach(e=>{e.mesh.texture=OE.EMPTY});for(const n in t)t[n].destroy(),delete t[n];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};bk.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};let wk=bk;const xk=[".xml",".fnt"],Ek={extension:{type:Ww.LoadParser,priority:eA.Normal},name:"loadBitmapFont",test:e=>xk.includes(Lb.extname(e).toLowerCase()),testParse:async e=>ak.test(e)||uk.test(e),async parse(e,t,r){const n=ak.test(e)?ak.parse(e):uk.parse(e),{src:i}=t,{page:s}=n,o=[];for(let u=0;u<s.length;++u){const e=s[u].file;let t=Lb.join(Lb.dirname(i),e);t=XC(t,i),o.push(t)}const a=await r.load(o),l=o.map(e=>a[e]);return gk.install(n,l,!0)},load:async(e,t)=>(await ym.ADAPTER.fetch(e)).text(),unload(e){e.destroy()}};Yw.add(Ek);const Sk=class e extends kD{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(t){return new e(Object.keys(e.defaultOptions).reduce((e,r)=>({...e,[r]:t[r]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(t=>{URL.revokeObjectURL(t.src),t.refs--,0===t.refs&&(t.fontFace&&document.fonts.delete(t.fontFace),delete e.availableFonts[t.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(t,r={}){const{availableFonts:n}=e;if(n[t]){const e=n[t];return this._fonts.push(e),e.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return ym.ADAPTER.fetch(t).then(e=>e.blob()).then(async e=>new Promise((t,r)=>{const n=URL.createObjectURL(e),i=new FileReader;i.onload=()=>t([n,i.result]),i.onerror=r,i.readAsDataURL(e)})).then(async([e,i])=>{const s=Object.assign({family:Lb.basename(t,Lb.extname(t)),weight:"normal",style:"normal",display:"auto",src:e,dataSrc:i,refs:1,originalUrl:t,fontFace:null},r);n[t]=s,this._fonts.push(s),this.styleID++;const o=new FontFace(s.family,`url(${s.src})`,{weight:s.weight,style:s.style,display:s.display});s.fontFace=o,await o.load(),document.fonts.add(o),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...e){const t=e.filter(e=>!this._overrides.includes(e));t.length>0&&(this._overrides.push(...t),this.styleID++)}removeOverride(...e){const t=e.filter(e=>this._overrides.includes(e));t.length>0&&(this._overrides=this._overrides.filter(e=>!t.includes(e)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?["word-wrap: "+(this.breakWords?"break-all":"break-word"),`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,t)=>`${e}\n            @font-face {\n                font-family: "${t.family}";\n                src: url('${t.dataSrc}');\n                font-weight: ${t.weight};\n                font-style: ${t.style};\n                font-display: ${t.display};\n            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(e=_w(e)),"number"==typeof e?vw(e):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor);const t=this.dropShadowAlpha,r=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),n=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&t<1&&(e+=(255*t|0).toString(16).padStart(2,"0"));const i=`${r}px ${n}px`;return this.dropShadowBlur>0?`text-shadow: ${i} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${i} ${e}`}reset(){Object.assign(this,e.defaultOptions)}onBeforeDraw(){const{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(e=>setTimeout(e,100)):Promise.resolve()}get isSafari(){const{userAgent:e}=ym.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};Sk.availableFonts={},Sk.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let Ck=Sk;const Ak=class e extends hC{constructor(t="",r={}){super(OE.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const n=new Image,i=OE.from(n,{scaleMode:ym.SCALE_MODE,resourceOptions:{autoLoad:!1}});i.orig=new Cx,i.trim=new Cx,this.texture=i;const s="http://www.w3.org/2000/svg",o="http://www.w3.org/1999/xhtml",a=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject"),u=document.createElementNS(o,"div"),c=document.createElementNS(o,"style");l.setAttribute("width","10000"),l.setAttribute("height","10000"),l.style.overflow="hidden",a.appendChild(l),this.maxWidth=e.defaultMaxWidth,this.maxHeight=e.defaultMaxHeight,this._domElement=u,this._styleElement=c,this._svgRoot=a,this._foreignObject=l,this._foreignObject.appendChild(c),this._foreignObject.appendChild(u),this._image=n,this._loadImage=new Image,this._autoResolution=e.defaultAutoResolution,this._resolution=e.defaultResolution??ym.RESOLUTION,this.text=t,this.style=r}measureText(e){const{text:t,style:r,resolution:n}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:t,style:r.toCSS(n)}),this._styleElement.textContent=r.toGlobalCSS(),document.body.appendChild(this._svgRoot);const i=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:s,height:o}=i;(s>this.maxWidth||o>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const a=Math.min(this.maxWidth,Math.ceil(s)),l=Math.min(this.maxHeight,Math.ceil(o));return this._svgRoot.setAttribute("width",a.toString()),this._svgRoot.setAttribute("height",l.toString()),t!==this._text&&(this._domElement.innerHTML=this._text),r!==this._style&&(Object.assign(this._domElement,{style:this._style?.toCSS(n)}),this._styleElement.textContent=this._style?.toGlobalCSS()),{width:a+2*r.padding,height:l+2*r.padding}}async updateText(e=!0){const{style:t,_image:r,_loadImage:n}=this;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;const{width:i,height:s}=this.measureText();r.width=n.width=Math.ceil(Math.max(1,i)),r.height=n.height=Math.ceil(Math.max(1,s)),this._updateID++;const o=this._updateID;await new Promise(e=>{n.onload=async()=>{o<this._updateID||(await t.onBeforeDraw(),r.src=n.src,n.onload=null,n.src="",this.updateTexture()),e()};const i=(new XMLSerializer).serializeToString(this._svgRoot);n.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(i)}`})}get source(){return this._image}updateTexture(){const{style:e,texture:t,_image:r,resolution:n}=this,{padding:i}=e,{baseTexture:s}=t;t.trim.width=t._frame.width=r.width/n,t.trim.height=t._frame.height=r.height/n,t.trim.x=-i,t.trim.y=-i,t.orig.width=t._frame.width-2*i,t.orig.height=t._frame.height-2*i,this._onTextureUpdate(),s.setRealSize(r.width,r.height,n),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(t){"boolean"==typeof t&&(t={children:t}),t=Object.assign({},e.defaultDestroyOptions,t),super.destroy(t);const r=null;this.ownsStyle&&this._style?.cleanFonts(),this._style=r,this._svgRoot?.remove(),this._svgRoot=r,this._domElement?.remove(),this._domElement=r,this._foreignObject?.remove(),this._foreignObject=r,this._styleElement?.remove(),this._styleElement=r,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=r,this._image.src="",this._image=r}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);const t=Pw(this.scale.x)||1;this.scale.x=t*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);const t=Pw(this.scale.y)||1;this.scale.y=t*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&((e=e||{})instanceof Ck?(this.ownsStyle=!1,this._style=e):e instanceof kD?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=Ck.from(e)):(this.ownsStyle=!0,this._style=new Ck(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(""===e||null==e?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};Ak.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},Ak.defaultMaxWidth=2024,Ak.defaultMaxHeight=2024,Ak.defaultAutoResolution=!0;let Tk=Ak;const Dk=Object.freeze(Object.defineProperty({__proto__:null,ALPHA_MODES:lm,AbstractMultiResource:qS,AccessibilityManager:UC,AlphaFilter:mC,AnimatedSprite:YD,Application:zC,ArrayResource:XS,Assets:kA,AssetsClass:DA,Attribute:hx,BLEND_MODES:Qp,BUFFER_BITS:Jp,BUFFER_TYPE:mm,BackgroundSystem:wE,BaseImageResource:TE,BasePrepare:HD,BaseRenderTexture:AE,BaseTexture:lx,BatchDrawCall:ux,BatchGeometry:vx,BatchRenderer:vE,BatchShaderGenerator:pE,BatchSystem:xE,BatchTextureArray:mE,BitmapFont:gk,BitmapFontData:ok,BitmapText:wk,BlobResource:XA,BlurFilter:_C,BlurFilterPass:vC,Bounds:nC,BrowserAdapter:gm,Buffer:dx,BufferResource:sx,BufferSystem:GS,CLEAR_MODES:um,COLOR_MASK_BITS:fm,Cache:JC,CanvasResource:YS,Circle:Ax,Color:yw,ColorMatrixFilter:bC,CompressedTextureResource:YA,Container:uC,ContextSystem:SE,CountLimiter:ID,CubeResource:ZS,DEG_TO_RAD:wx,DRAW_MODES:em,DisplacementFilter:wC,DisplayObject:iC,ENV:Kp,Ellipse:Tx,EventBoundary:OC,EventSystem:IC,ExtensionType:Ww,Extract:IT,FORMATS:tm,FORMATS_TO_COMPONENTS:CT,FXAAFilter:xC,FederatedDisplayObject:NC,FederatedEvent:AC,FederatedMouseEvent:TC,FederatedPointerEvent:DC,FederatedWheelEvent:kC,FillStyle:sD,Filter:bE,FilterState:NE,FilterSystem:jE,Framebuffer:CE,FramebufferSystem:GE,GC_MODES:cm,GLFramebuffer:zE,GLProgram:dS,GLTexture:DS,GRAPHICS_CURVES:HT,GenerateTextureSystem:aS,Geometry:yx,GeometrySystem:$E,Graphics:uD,GraphicsData:tD,GraphicsGeometry:iD,HTMLText:Tk,HTMLTextStyle:Ck,IGLUniformData:class{},INSTALLED:tx,INTERNAL_FORMATS:VA,INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:GA,ImageBitmapResource:JS,ImageResource:DE,LINE_CAP:VT,LINE_JOIN:zT,LineStyle:oD,LoaderParserPriority:eA,MASK_TYPES:hm,MIPMAP_MODES:am,MSAA_QUALITY:pm,MaskData:YE,MaskSystem:KE,Matrix:Px,Mesh:mD,MeshBatchUvs:dD,MeshGeometry:gD,MeshMaterial:yD,MultisampleSystem:zS,NineSlicePlane:class extends bD{constructor(e,t,r,n,i){super(OE.WHITE,4,4),this._origWidth=e.orig.width,this._origHeight=e.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=t??e.defaultBorders?.left??10,this._rightWidth=n??e.defaultBorders?.right??10,this._topHeight=r??e.defaultBorders?.top??10,this._bottomHeight=i??e.defaultBorders?.bottom??10,this.texture=e}textureUpdated(){this._textureID=this.shader.texture._updateID,this._refresh()}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(e){this.geometry.getBuffer("aVertexPosition").data=e}updateHorizontalVertices(){const e=this.vertices,t=this._getMinScale();e[9]=e[11]=e[13]=e[15]=this._topHeight*t,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*t,e[25]=e[27]=e[29]=e[31]=this._height}updateVerticalVertices(){const e=this.vertices,t=this._getMinScale();e[2]=e[10]=e[18]=e[26]=this._leftWidth*t,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*t,e[6]=e[14]=e[22]=e[30]=this._width}_getMinScale(){const e=this._leftWidth+this._rightWidth,t=this._width>e?1:this._width/e,r=this._topHeight+this._bottomHeight,n=this._height>r?1:this._height/r;return Math.min(t,n)}get width(){return this._width}set width(e){this._width=e,this._refresh()}get height(){return this._height}set height(e){this._height=e,this._refresh()}get leftWidth(){return this._leftWidth}set leftWidth(e){this._leftWidth=e,this._refresh()}get rightWidth(){return this._rightWidth}set rightWidth(e){this._rightWidth=e,this._refresh()}get topHeight(){return this._topHeight}set topHeight(e){this._topHeight=e,this._refresh()}get bottomHeight(){return this._bottomHeight}set bottomHeight(e){this._bottomHeight=e,this._refresh()}_refresh(){const e=this.texture,t=this.geometry.buffers[1].data;this._origWidth=e.orig.width,this._origHeight=e.orig.height;const r=1/this._origWidth,n=1/this._origHeight;t[0]=t[8]=t[16]=t[24]=0,t[1]=t[3]=t[5]=t[7]=0,t[6]=t[14]=t[22]=t[30]=1,t[25]=t[27]=t[29]=t[31]=1,t[2]=t[10]=t[18]=t[26]=r*this._leftWidth,t[4]=t[12]=t[20]=t[28]=1-r*this._rightWidth,t[9]=t[11]=t[13]=t[15]=n*this._topHeight,t[17]=t[19]=t[21]=t[23]=1-n*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}},NoiseFilter:EC,ObjectRenderer:gE,ObjectRendererSystem:HS,ObservablePoint:Ux,PI_2:_x,PRECISION:dm,ParticleContainer:class extends uC{constructor(e=1500,t,r=16384,n=!1){super(),r>16384&&(r=16384),this._properties=[!1,!0,!1,!1,!1],this._maxSize=e,this._batchSize=r,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=Qp.NORMAL,this.autoResize=n,this.roundPixels=!0,this.baseTexture=null,this.setProperties(t),this._tintColor=new yw(0),this.tintRgb=new Float32Array(3),this.tint=16777215}setProperties(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])}updateTransform(){this.displayObjectUpdateTransform()}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintColor.toRgbArray(this.tintRgb)}render(e){!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",()=>this.onChildrenChange(0))),e.batch.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))}onChildrenChange(e){const t=Math.floor(e/this._batchSize);for(;this._bufferUpdateIDs.length<t;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[t]=++this._updateID}dispose(){if(this._buffers){for(let e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._buffers=null}}destroy(e){super.destroy(e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}},ParticleRenderer:xD,PlaneGeometry:vD,PluginSystem:nS,Point:Ex,Polygon:Dx,Prepare:XD,Program:cE,ProjectionSystem:iS,Quad:IE,QuadUv:ME,RAD_TO_DEG:bx,RENDERER_TYPE:Zp,Rectangle:Cx,RenderTexture:RE,RenderTexturePool:FE,RenderTextureSystem:cS,Renderer:WS,ResizePlugin:VC,Resource:ix,RopeGeometry:_D,RoundedRectangle:kx,Runner:nx,SAMPLER_TYPES:im,SCALE_MODES:sm,SHAPES:xx,SVGResource:eC,ScissorSystem:tS,Shader:fE,ShaderSystem:wS,SimpleMesh:class extends mD{constructor(e=OE.EMPTY,t,r,n,i){const s=new gD(t,r,n);s.getBuffer("aVertexPosition").static=!1,super(s,new yD(e),null,i),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(e){this.geometry.getBuffer("aVertexPosition").data=e}_render(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(e)}},SimplePlane:bD,SimpleRope:class extends mD{constructor(e,t,r=0){const n=new _D(e.height,t,r),i=new yD(e);r>0&&(e.baseTexture.wrapMode=om.REPEAT),super(n,i),this.autoUpdate=!0}_render(e){const t=this.geometry;(this.autoUpdate||t._width!==this.shader.texture.height)&&(t._width=this.shader.texture.height,t.update()),super._render(e)}},Sprite:hC,SpriteMaskFilter:XE,Spritesheet:rk,StartupSystem:xS,State:ex,StateSystem:SS,StencilSystem:rS,SystemManager:CS,TARGETS:rm,TEXT_GRADIENT:ED,TYPES:nm,TYPES_TO_BYTES_PER_COMPONENT:ST,TYPES_TO_BYTES_PER_PIXEL:AT,TemporaryDisplayObject:sC,Text:FD,TextFormat:ak,TextMetrics:AD,TextStyle:kD,Texture:OE,TextureGCSystem:TS,TextureMatrix:qE,TextureSystem:kS,TextureUvs:kE,Ticker:IS,TickerPlugin:MS,TilingSprite:ZD,TilingSpriteRenderer:ek,TimeLimiter:class{constructor(e){this.maxMilliseconds=e,this.frameStart=0}beginFrame(){this.frameStart=Date.now()}allowedToUpload(){return Date.now()-this.frameStart<this.maxMilliseconds}},Transform:zx,TransformFeedback:class{constructor(){this._glTransformFeedbacks={},this.buffers=[],this.disposeRunner=new nx("disposeTransformFeedback")}bindBuffer(e,t){this.buffers[e]=t}destroy(){this.disposeRunner.emit(this,!1)}},TransformFeedbackSystem:PS,UPDATE_PRIORITY:OS,UniformGroup:hE,VERSION:"7.4.3",VideoResource:rC,ViewSystem:BS,ViewableBuffer:Kw,WRAP_MODES:om,XMLFormat:lk,XMLStringFormat:uk,accessibleTarget:LC,autoDetectFormat:dk,autoDetectRenderer:LS,autoDetectResource:rx,cacheTextureArray:PA,checkDataUrl:$C,checkExtension:WC,checkMaxIfStatementsInShader:Qw,convertToList:qC,copySearchParams:XC,createStringVariations:KC,createTexture:vA,createUBOElements:gS,curves:GT,defaultFilterVertex:jS,defaultVertex:US,detectAvif:OA,detectCompressedTextures:qA,detectDefaults:IA,detectMp4:UA,detectOgv:jA,detectWebm:LA,detectWebp:RA,extensions:Yw,filters:SC,generateProgram:hS,generateUniformBufferSync:vS,getFontFamilyName:aA,getTestContext:Zx,getUBOData:yS,graphicsUtils:cD,groupD8:Lx,isMobile:Im,isSingleItem:ZC,loadBitmapFont:Ek,loadDDS:kT,loadImageBitmap:wA,loadJson:tA,loadKTX:PT,loadSVG:EA,loadTextures:xA,loadTxt:rA,loadVideo:AA,loadWebFont:cA,parseDDS:dT,parseKTX:TT,resolveCompressedTextureUrl:OT,resolveTextureUrl:zA,settings:ym,spritesheetAsset:sk,uniformParsers:$x,unsafeEvalSupported:oE,utils:$w},Symbol.toStringTag,{value:"Module"}));e("v",Dk),e("n",(e=21)=>{let t="",r=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&r[e]];return t});var kk={exports:{}};!function(e){!function(t,r){e.exports?e.exports=r():t.log=r()}(n,function(){var e=function(){},t="undefined",r=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"],i={},s=null;function o(e,t){var r=e[t];if("function"==typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(Ove){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function a(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(){for(var r=this.getLevel(),i=0;i<n.length;i++){var s=n[i];this[s]=i<r?e:this.methodFactory(s,r,this.name)}if(this.log=this.debug,typeof console===t&&r<this.levels.SILENT)return"No console available for logging"}function u(e){return function(){typeof console!==t&&(l.call(this),this[e].apply(this,arguments))}}function c(n,i,s){return function(n){return"debug"===n&&(n="log"),typeof console!==t&&("trace"===n&&r?a:void 0!==console[n]?o(console,n):void 0!==console.log?o(console,"log"):e)}(n)||u.apply(this,arguments)}function d(e,r){var o,a,u,d=this,h="loglevel";function f(){var e;if(typeof window!==t&&h){try{e=window.localStorage[h]}catch(s){}if(typeof e===t)try{var r=window.document.cookie,n=encodeURIComponent(h),i=r.indexOf(n+"=");-1!==i&&(e=/^([^;]+)/.exec(r.slice(i+n.length+1))[1])}catch(s){}return void 0===d.levels[e]&&(e=void 0),e}}function p(e){var t=e;if("string"==typeof t&&void 0!==d.levels[t.toUpperCase()]&&(t=d.levels[t.toUpperCase()]),"number"==typeof t&&t>=0&&t<=d.levels.SILENT)return t;throw new TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?h+=":"+e:"symbol"==typeof e&&(h=void 0),d.name=e,d.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},d.methodFactory=r||c,d.getLevel=function(){return null!=u?u:null!=a?a:o},d.setLevel=function(e,r){return u=p(e),!1!==r&&function(e){var r=(n[e]||"silent").toUpperCase();if(typeof window!==t&&h){try{return void(window.localStorage[h]=r)}catch(i){}try{window.document.cookie=encodeURIComponent(h)+"="+r+";"}catch(i){}}}(u),l.call(d)},d.setDefaultLevel=function(e){a=p(e),f()||d.setLevel(e,!1)},d.resetLevel=function(){u=null,function(){if(typeof window!==t&&h){try{window.localStorage.removeItem(h)}catch(e){}try{window.document.cookie=encodeURIComponent(h)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}(),l.call(d)},d.enableAll=function(e){d.setLevel(d.levels.TRACE,e)},d.disableAll=function(e){d.setLevel(d.levels.SILENT,e)},d.rebuild=function(){if(s!==d&&(o=p(s.getLevel())),l.call(d),s===d)for(var e in i)i[e].rebuild()},o=p(s?s.getLevel():"WARN");var m=f();null!=m&&(u=p(m)),l.call(d)}(s=new d).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=i[e];return t||(t=i[e]=new d(e,s.methodFactory)),t};var h=typeof window!==t?window.log:void 0;return s.noConflict=function(){return typeof window!==t&&window.log===s&&(window.log=h),s},s.getLoggers=function(){return i},s.default=s,s})}(kk),e("l",s(kk.exports));const Pk=class extends bE{constructor(e,t=0){super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nuniform float sepia;\nuniform float noise;\nuniform float noiseSize;\nuniform float scratch;\nuniform float scratchDensity;\nuniform float scratchWidth;\nuniform float vignetting;\nuniform float vignettingAlpha;\nuniform float vignettingBlur;\nuniform float seed;\n\nconst float SQRT_2 = 1.414213;\nconst vec3 SEPIA_RGB = vec3(112.0 / 255.0, 66.0 / 255.0, 20.0 / 255.0);\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvec3 Overlay(vec3 src, vec3 dst)\n{\n    // if (dst <= 0.5) then: 2 * src * dst\n    // if (dst > 0.5) then: 1 - 2 * (1 - dst) * (1 - src)\n    return vec3((dst.x <= 0.5) ? (2.0 * src.x * dst.x) : (1.0 - 2.0 * (1.0 - dst.x) * (1.0 - src.x)),\n                (dst.y <= 0.5) ? (2.0 * src.y * dst.y) : (1.0 - 2.0 * (1.0 - dst.y) * (1.0 - src.y)),\n                (dst.z <= 0.5) ? (2.0 * src.z * dst.z) : (1.0 - 2.0 * (1.0 - dst.z) * (1.0 - src.z)));\n}\n\n\nvoid main()\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n    vec3 color = gl_FragColor.rgb;\n\n    if (sepia > 0.0)\n    {\n        float gray = (color.x + color.y + color.z) / 3.0;\n        vec3 grayscale = vec3(gray);\n\n        color = Overlay(SEPIA_RGB, grayscale);\n\n        color = grayscale + sepia * (color - grayscale);\n    }\n\n    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;\n\n    if (vignetting > 0.0)\n    {\n        float outter = SQRT_2 - vignetting * SQRT_2;\n        vec2 dir = vec2(vec2(0.5, 0.5) - coord);\n        dir.y *= dimensions.y / dimensions.x;\n        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);\n        color.rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);\n    }\n\n    if (scratchDensity > seed && scratch != 0.0)\n    {\n        float phase = seed * 256.0;\n        float s = mod(floor(phase), 2.0);\n        float dist = 1.0 / scratchDensity;\n        float d = distance(coord, vec2(seed * dist, abs(s - seed * dist)));\n        if (d < seed * 0.6 + 0.4)\n        {\n            highp float period = scratchDensity * 10.0;\n\n            float xx = coord.x * period + phase;\n            float aa = abs(mod(xx, 0.5) * 4.0);\n            float bb = mod(floor(xx / 0.5), 2.0);\n            float yy = (1.0 - bb) * aa + bb * (2.0 - aa);\n\n            float kk = 2.0 * period;\n            float dw = scratchWidth / dimensions.x * (0.75 + seed);\n            float dh = dw * kk;\n\n            float tine = (yy - (2.0 - dh));\n\n            if (tine > 0.0) {\n                float _sign = sign(scratch);\n\n                tine = s * tine / period + scratch + 0.1;\n                tine = clamp(tine + 1.0, 0.5 + _sign * 0.5, 1.5 + _sign * 0.5);\n\n                color.rgb *= tine;\n            }\n        }\n    }\n\n    if (noise > 0.0 && noiseSize > 0.0)\n    {\n        vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n        pixelCoord.x = floor(pixelCoord.x / noiseSize);\n        pixelCoord.y = floor(pixelCoord.y / noiseSize);\n        // vec2 d = pixelCoord * noiseSize * vec2(1024.0 + seed * 512.0, 1024.0 - seed * 512.0);\n        // float _noise = snoise(d) * 0.5;\n        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;\n        color += _noise * noise;\n    }\n\n    gl_FragColor.rgb = color;\n}\n"),this.seed=0,this.uniforms.dimensions=new Float32Array(2),"number"==typeof e?(this.seed=e,e=void 0):this.seed=t,Object.assign(this,Pk.defaults,e)}apply(e,t,r,n){var i,s;this.uniforms.dimensions[0]=null==(i=t.filterFrame)?void 0:i.width,this.uniforms.dimensions[1]=null==(s=t.filterFrame)?void 0:s.height,this.uniforms.seed=this.seed,e.applyFilter(this,t,r,n)}set sepia(e){this.uniforms.sepia=e}get sepia(){return this.uniforms.sepia}set noise(e){this.uniforms.noise=e}get noise(){return this.uniforms.noise}set noiseSize(e){this.uniforms.noiseSize=e}get noiseSize(){return this.uniforms.noiseSize}set scratch(e){this.uniforms.scratch=e}get scratch(){return this.uniforms.scratch}set scratchDensity(e){this.uniforms.scratchDensity=e}get scratchDensity(){return this.uniforms.scratchDensity}set scratchWidth(e){this.uniforms.scratchWidth=e}get scratchWidth(){return this.uniforms.scratchWidth}set vignetting(e){this.uniforms.vignetting=e}get vignetting(){return this.uniforms.vignetting}set vignettingAlpha(e){this.uniforms.vignettingAlpha=e}get vignettingAlpha(){return this.uniforms.vignettingAlpha}set vignettingBlur(e){this.uniforms.vignettingBlur=e}get vignettingBlur(){return this.uniforms.vignettingBlur}};e("a",Pk).defaults={sepia:.3,noise:.3,noiseSize:1,scratch:.5,scratchDensity:.3,scratchWidth:1,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3};var Bk={},Ok={},Rk={};Object.defineProperty(Rk,"__esModule",{value:!0}),Rk.loop=Rk.conditional=Rk.parse=void 0,Rk.parse=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;if(Array.isArray(r))r.forEach(function(r){return e(t,r,n,i)});else if("function"==typeof r)r(t,n,i,e);else{var s=Object.keys(r)[0];Array.isArray(r[s])?(i[s]={},e(t,r[s],n,i[s])):i[s]=r[s](t,n,i,e)}return n},Rk.conditional=function(e,t){return function(r,n,i,s){t(r,n,i)&&s(r,e,n,i)}},Rk.loop=function(e,t){return function(r,n,i,s){for(var o=[],a=r.pos;t(r,n,i);){var l={};if(s(r,e,n,l),r.pos===a)break;a=r.pos,o.push(l)}return o}};var Fk={};Object.defineProperty(Fk,"__esModule",{value:!0}),Fk.readBits=Fk.readArray=Fk.readUnsigned=Fk.readString=Fk.peekBytes=Fk.readBytes=Fk.peekByte=Fk.readByte=Fk.buildStream=void 0,Fk.buildStream=function(e){return{data:e,pos:0}};var Ik=function(){return function(e){return e.data[e.pos++]}};Fk.readByte=Ik,Fk.peekByte=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(t){return t.data[t.pos+e]}};var Mk=function(e){return function(t){return t.data.subarray(t.pos,t.pos+=e)}};Fk.readBytes=Mk,Fk.peekBytes=function(e){return function(t){return t.data.subarray(t.pos,t.pos+e)}},Fk.readString=function(e){return function(t){return Array.from(Mk(e)(t)).map(function(e){return String.fromCharCode(e)}).join("")}},Fk.readUnsigned=function(e){return function(t){var r=Mk(2)(t);return e?(r[1]<<8)+r[0]:(r[0]<<8)+r[1]}},Fk.readArray=function(e,t){return function(r,n,i){for(var s="function"==typeof t?t(r,n,i):t,o=Mk(e),a=new Array(s),l=0;l<s;l++)a[l]=o(r);return a}},Fk.readBits=function(e){return function(t){for(var r=function(e){return e.data[e.pos++]}(t),n=new Array(8),i=0;i<8;i++)n[7-i]=!!(r&1<<i);return Object.keys(e).reduce(function(t,r){var i=e[r];return i.length?t[r]=function(e,t,r){for(var n=0,i=0;i<r;i++)n+=e[t+i]&&Math.pow(2,r-i-1);return n}(n,i.index,i.length):t[r]=n[i.index],t},{})}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Rk,r=Fk,n={blocks:function(e){for(var t=[],n=e.data.length,i=0,s=(0,r.readByte)()(e);0!==s&&s;s=(0,r.readByte)()(e)){if(e.pos+s>=n){var o=n-e.pos;t.push((0,r.readBytes)(o)(e)),i+=o;break}t.push((0,r.readBytes)(s)(e)),i+=s}for(var a=new Uint8Array(i),l=0,u=0;u<t.length;u++)a.set(t[u],l),l+=t[u].length;return a}},i=(0,t.conditional)({gce:[{codes:(0,r.readBytes)(2)},{byteSize:(0,r.readByte)()},{extras:(0,r.readBits)({future:{index:0,length:3},disposal:{index:3,length:3},userInput:{index:6},transparentColorGiven:{index:7}})},{delay:(0,r.readUnsigned)(!0)},{transparentColorIndex:(0,r.readByte)()},{terminator:(0,r.readByte)()}]},function(e){var t=(0,r.peekBytes)(2)(e);return 33===t[0]&&249===t[1]}),s=(0,t.conditional)({image:[{code:(0,r.readByte)()},{descriptor:[{left:(0,r.readUnsigned)(!0)},{top:(0,r.readUnsigned)(!0)},{width:(0,r.readUnsigned)(!0)},{height:(0,r.readUnsigned)(!0)},{lct:(0,r.readBits)({exists:{index:0},interlaced:{index:1},sort:{index:2},future:{index:3,length:2},size:{index:5,length:3}})}]},(0,t.conditional)({lct:(0,r.readArray)(3,function(e,t,r){return Math.pow(2,r.descriptor.lct.size+1)})},function(e,t,r){return r.descriptor.lct.exists}),{data:[{minCodeSize:(0,r.readByte)()},n]}]},function(e){return 44===(0,r.peekByte)()(e)}),o=(0,t.conditional)({text:[{codes:(0,r.readBytes)(2)},{blockSize:(0,r.readByte)()},{preData:function(e,t,n){return(0,r.readBytes)(n.text.blockSize)(e)}},n]},function(e){var t=(0,r.peekBytes)(2)(e);return 33===t[0]&&1===t[1]}),a=(0,t.conditional)({application:[{codes:(0,r.readBytes)(2)},{blockSize:(0,r.readByte)()},{id:function(e,t,n){return(0,r.readString)(n.blockSize)(e)}},n]},function(e){var t=(0,r.peekBytes)(2)(e);return 33===t[0]&&255===t[1]}),l=(0,t.conditional)({comment:[{codes:(0,r.readBytes)(2)},n]},function(e){var t=(0,r.peekBytes)(2)(e);return 33===t[0]&&254===t[1]}),u=[{header:[{signature:(0,r.readString)(3)},{version:(0,r.readString)(3)}]},{lsd:[{width:(0,r.readUnsigned)(!0)},{height:(0,r.readUnsigned)(!0)},{gct:(0,r.readBits)({exists:{index:0},resolution:{index:1,length:3},sort:{index:4},size:{index:5,length:3}})},{backgroundColorIndex:(0,r.readByte)()},{pixelAspectRatio:(0,r.readByte)()}]},(0,t.conditional)({gct:(0,r.readArray)(3,function(e,t){return Math.pow(2,t.lsd.gct.size+1)})},function(e,t){return t.lsd.gct.exists}),{frames:(0,t.loop)([i,a,l,s,o],function(e){var t=(0,r.peekByte)()(e);return 33===t||44===t})}];e.default=u}(Ok);var Nk={};Object.defineProperty(Nk,"__esModule",{value:!0}),Nk.deinterlace=void 0,Nk.deinterlace=function(e,t){for(var r=new Array(e.length),n=e.length/t,i=function(n,i){var s=e.slice(i*t,(i+1)*t);r.splice.apply(r,[n*t,t].concat(s))},s=[0,4,2,1],o=[8,8,4,2],a=0,l=0;l<4;l++)for(var u=s[l];u<n;u+=o[l])i(u,a),a++;return r};var Lk={};Object.defineProperty(Lk,"__esModule",{value:!0}),Lk.lzw=void 0,Lk.lzw=function(e,t,r){var n,i,s,o,a,l,u,c,d,h,f,p,m,g,y,v,_=4096,b=r,w=new Array(r),x=new Array(_),E=new Array(_),S=new Array(4097);for(a=1+(i=1<<(h=e)),n=i+2,u=-1,s=(1<<(o=h+1))-1,c=0;c<i;c++)x[c]=0,E[c]=c;for(f=p=m=g=y=v=0,d=0;d<b;){if(0===g){if(p<o){f+=t[v]<<p,p+=8,v++;continue}if(c=f&s,f>>=o,p-=o,c>n||c==a)break;if(c==i){s=(1<<(o=h+1))-1,n=i+2,u=-1;continue}if(-1==u){S[g++]=E[c],u=c,m=c;continue}for(l=c,c==n&&(S[g++]=m,c=u);c>i;)S[g++]=E[c],c=x[c];m=255&E[c],S[g++]=m,n<_&&(x[n]=u,E[n]=m,0===(++n&s)&&n<_&&(o++,s+=n)),u=l}g--,w[y++]=S[g],d++}for(d=y;d<b;d++)w[d]=0;return w},Object.defineProperty(Bk,"__esModule",{value:!0}),e("i",Bk.decompressFrames=Bk.decompressFrame=e("p",Bk.parseGIF=void 0));var Uk,jk=(Uk=Ok)&&Uk.__esModule?Uk:{default:Uk},zk=Rk,Vk=Fk,Gk=Nk,Hk=Lk;e("p",Bk.parseGIF=function(e){var t=new Uint8Array(e);return(0,zk.parse)((0,Vk.buildStream)(t),jk.default)});var $k=function(e,t,r){if(e.image){var n=e.image,i=n.descriptor.width*n.descriptor.height,s=(0,Hk.lzw)(n.data.minCodeSize,n.data.blocks,i);n.descriptor.lct.interlaced&&(s=(0,Gk.deinterlace)(s,n.descriptor.width));var o={pixels:s,dims:{top:e.image.descriptor.top,left:e.image.descriptor.left,width:e.image.descriptor.width,height:e.image.descriptor.height}};return n.descriptor.lct&&n.descriptor.lct.exists?o.colorTable=n.lct:o.colorTable=t,e.gce&&(o.delay=10*(e.gce.delay||10),o.disposalType=e.gce.extras.disposal,e.gce.extras.transparentColorGiven&&(o.transparentIndex=e.gce.transparentColorIndex)),r&&(o.patch=function(e){for(var t=e.pixels.length,r=new Uint8ClampedArray(4*t),n=0;n<t;n++){var i=4*n,s=e.pixels[n],o=e.colorTable[s]||[0,0,0];r[i]=o[0],r[i+1]=o[1],r[i+2]=o[2],r[i+3]=s!==e.transparentIndex?255:0}return r}(o)),o}console.warn("gif frame does not have associated image.")};Bk.decompressFrame=$k,e("i",Bk.decompressFrames=function(e,t){return e.frames.filter(function(e){return e.image}).map(function(r){return $k(r,e.gct,t)})});var Wk={};!function(e){var t=function(){var e=new Date,r=4,n={setLogLevel:function(e){r=e==this.debug?1:e==this.info?2:e==this.warn?3:(this.error,4)},debug:function(n,i){void 0===console.debug&&(console.debug=console.log),1>=r&&console.debug("["+t.getDurationString(new Date-e,1e3)+"]","["+n+"]",i)},log:function(e,t){this.debug(e.msg)},info:function(n,i){2>=r&&console.info("["+t.getDurationString(new Date-e,1e3)+"]","["+n+"]",i)},warn:function(n,i){3>=r&&console.warn("["+t.getDurationString(new Date-e,1e3)+"]","["+n+"]",i)},error:function(n,i){4>=r&&console.error("["+t.getDurationString(new Date-e,1e3)+"]","["+n+"]",i)}};return n}();t.getDurationString=function(e,t){var r;function n(e,t){for(var r=(""+e).split(".");r[0].length<t;)r[0]="0"+r[0];return r.join(".")}e<0?(r=!0,e=-e):r=!1;var i=e/(t||1),s=Math.floor(i/3600);i-=3600*s;var o=Math.floor(i/60),a=1e3*(i-=60*o);return a-=1e3*(i=Math.floor(i)),a=Math.floor(a),(r?"-":"")+s+":"+n(o,2)+":"+n(i,2)+"."+n(a,3)},t.printRanges=function(e){var r=e.length;if(r>0){for(var n="",i=0;i<r;i++)i>0&&(n+=","),n+="["+t.getDurationString(e.start(i))+","+t.getDurationString(e.end(i))+"]";return n}return"(empty)"},e.Log=t;var r=function(e){if(!(e instanceof ArrayBuffer))throw"Needs an array buffer";this.buffer=e,this.dataview=new DataView(e),this.position=0};r.prototype.getPosition=function(){return this.position},r.prototype.getEndPosition=function(){return this.buffer.byteLength},r.prototype.getLength=function(){return this.buffer.byteLength},r.prototype.seek=function(e){var t=Math.max(0,Math.min(this.buffer.byteLength,e));return this.position=isNaN(t)||!isFinite(t)?0:t,!0},r.prototype.isEos=function(){return this.getPosition()>=this.getEndPosition()},r.prototype.readAnyInt=function(e,t){var r=0;if(this.position+e<=this.buffer.byteLength){switch(e){case 1:r=t?this.dataview.getInt8(this.position):this.dataview.getUint8(this.position);break;case 2:r=t?this.dataview.getInt16(this.position):this.dataview.getUint16(this.position);break;case 3:if(t)throw"No method for reading signed 24 bits values";r=this.dataview.getUint8(this.position)<<16,r|=this.dataview.getUint8(this.position+1)<<8,r|=this.dataview.getUint8(this.position+2);break;case 4:r=t?this.dataview.getInt32(this.position):this.dataview.getUint32(this.position);break;case 8:if(t)throw"No method for reading signed 64 bits values";r=this.dataview.getUint32(this.position)<<32,r|=this.dataview.getUint32(this.position+4);break;default:throw"readInt method not implemented for size: "+e}return this.position+=e,r}throw"Not enough bytes in buffer"},r.prototype.readUint8=function(){return this.readAnyInt(1,!1)},r.prototype.readUint16=function(){return this.readAnyInt(2,!1)},r.prototype.readUint24=function(){return this.readAnyInt(3,!1)},r.prototype.readUint32=function(){return this.readAnyInt(4,!1)},r.prototype.readUint64=function(){return this.readAnyInt(8,!1)},r.prototype.readString=function(e){if(this.position+e<=this.buffer.byteLength){for(var t="",r=0;r<e;r++)t+=String.fromCharCode(this.readUint8());return t}throw"Not enough bytes in buffer"},r.prototype.readCString=function(){for(var e=[];;){var t=this.readUint8();if(0===t)break;e.push(t)}return String.fromCharCode.apply(null,e)},r.prototype.readInt8=function(){return this.readAnyInt(1,!0)},r.prototype.readInt16=function(){return this.readAnyInt(2,!0)},r.prototype.readInt32=function(){return this.readAnyInt(4,!0)},r.prototype.readInt64=function(){return this.readAnyInt(8,!1)},r.prototype.readUint8Array=function(e){for(var t=new Uint8Array(e),r=0;r<e;r++)t[r]=this.readUint8();return t},r.prototype.readInt16Array=function(e){for(var t=new Int16Array(e),r=0;r<e;r++)t[r]=this.readInt16();return t},r.prototype.readUint16Array=function(e){for(var t=new Int16Array(e),r=0;r<e;r++)t[r]=this.readUint16();return t},r.prototype.readUint32Array=function(e){for(var t=new Uint32Array(e),r=0;r<e;r++)t[r]=this.readUint32();return t},r.prototype.readInt32Array=function(e){for(var t=new Int32Array(e),r=0;r<e;r++)t[r]=this.readInt32();return t},e.MP4BoxStream=r;var n=function(e,t,r){this._byteOffset=t||0,e instanceof ArrayBuffer?this.buffer=e:"object"==typeof e?(this.dataView=e,t&&(this._byteOffset+=t)):this.buffer=new ArrayBuffer(e||0),this.position=0,this.endianness=null==r?n.LITTLE_ENDIAN:r};n.prototype={},n.prototype.getPosition=function(){return this.position},n.prototype._realloc=function(e){if(this._dynamicSize){var t=this._byteOffset+this.position+e,r=this._buffer.byteLength;if(t<=r)t>this._byteLength&&(this._byteLength=t);else{for(r<1&&(r=1);t>r;)r*=2;var n=new ArrayBuffer(r),i=new Uint8Array(this._buffer);new Uint8Array(n,0,i.length).set(i),this.buffer=n,this._byteLength=t}}},n.prototype._trimAlloc=function(){if(this._byteLength!=this._buffer.byteLength){var e=new ArrayBuffer(this._byteLength),t=new Uint8Array(e),r=new Uint8Array(this._buffer,0,t.length);t.set(r),this.buffer=e}},n.BIG_ENDIAN=!1,n.LITTLE_ENDIAN=!0,n.prototype._byteLength=0,Object.defineProperty(n.prototype,"byteLength",{get:function(){return this._byteLength-this._byteOffset}}),Object.defineProperty(n.prototype,"buffer",{get:function(){return this._trimAlloc(),this._buffer},set:function(e){this._buffer=e,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(n.prototype,"byteOffset",{get:function(){return this._byteOffset},set:function(e){this._byteOffset=e,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(n.prototype,"dataView",{get:function(){return this._dataView},set:function(e){this._byteOffset=e.byteOffset,this._buffer=e.buffer,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._byteOffset+e.byteLength}}),n.prototype.seek=function(e){var t=Math.max(0,Math.min(this.byteLength,e));this.position=isNaN(t)||!isFinite(t)?0:t},n.prototype.isEof=function(){return this.position>=this._byteLength},n.prototype.mapUint8Array=function(e){this._realloc(1*e);var t=new Uint8Array(this._buffer,this.byteOffset+this.position,e);return this.position+=1*e,t},n.prototype.readInt32Array=function(e,t){e=null==e?this.byteLength-this.position/4:e;var r=new Int32Array(e);return n.memcpy(r.buffer,0,this.buffer,this.byteOffset+this.position,e*r.BYTES_PER_ELEMENT),n.arrayToNative(r,null==t?this.endianness:t),this.position+=r.byteLength,r},n.prototype.readInt16Array=function(e,t){e=null==e?this.byteLength-this.position/2:e;var r=new Int16Array(e);return n.memcpy(r.buffer,0,this.buffer,this.byteOffset+this.position,e*r.BYTES_PER_ELEMENT),n.arrayToNative(r,null==t?this.endianness:t),this.position+=r.byteLength,r},n.prototype.readInt8Array=function(e){e=null==e?this.byteLength-this.position:e;var t=new Int8Array(e);return n.memcpy(t.buffer,0,this.buffer,this.byteOffset+this.position,e*t.BYTES_PER_ELEMENT),this.position+=t.byteLength,t},n.prototype.readUint32Array=function(e,t){e=null==e?this.byteLength-this.position/4:e;var r=new Uint32Array(e);return n.memcpy(r.buffer,0,this.buffer,this.byteOffset+this.position,e*r.BYTES_PER_ELEMENT),n.arrayToNative(r,null==t?this.endianness:t),this.position+=r.byteLength,r},n.prototype.readUint16Array=function(e,t){e=null==e?this.byteLength-this.position/2:e;var r=new Uint16Array(e);return n.memcpy(r.buffer,0,this.buffer,this.byteOffset+this.position,e*r.BYTES_PER_ELEMENT),n.arrayToNative(r,null==t?this.endianness:t),this.position+=r.byteLength,r},n.prototype.readUint8Array=function(e){e=null==e?this.byteLength-this.position:e;var t=new Uint8Array(e);return n.memcpy(t.buffer,0,this.buffer,this.byteOffset+this.position,e*t.BYTES_PER_ELEMENT),this.position+=t.byteLength,t},n.prototype.readFloat64Array=function(e,t){e=null==e?this.byteLength-this.position/8:e;var r=new Float64Array(e);return n.memcpy(r.buffer,0,this.buffer,this.byteOffset+this.position,e*r.BYTES_PER_ELEMENT),n.arrayToNative(r,null==t?this.endianness:t),this.position+=r.byteLength,r},n.prototype.readFloat32Array=function(e,t){e=null==e?this.byteLength-this.position/4:e;var r=new Float32Array(e);return n.memcpy(r.buffer,0,this.buffer,this.byteOffset+this.position,e*r.BYTES_PER_ELEMENT),n.arrayToNative(r,null==t?this.endianness:t),this.position+=r.byteLength,r},n.prototype.readInt32=function(e){var t=this._dataView.getInt32(this.position,null==e?this.endianness:e);return this.position+=4,t},n.prototype.readInt16=function(e){var t=this._dataView.getInt16(this.position,null==e?this.endianness:e);return this.position+=2,t},n.prototype.readInt8=function(){var e=this._dataView.getInt8(this.position);return this.position+=1,e},n.prototype.readUint32=function(e){var t=this._dataView.getUint32(this.position,null==e?this.endianness:e);return this.position+=4,t},n.prototype.readUint16=function(e){var t=this._dataView.getUint16(this.position,null==e?this.endianness:e);return this.position+=2,t},n.prototype.readUint8=function(){var e=this._dataView.getUint8(this.position);return this.position+=1,e},n.prototype.readFloat32=function(e){var t=this._dataView.getFloat32(this.position,null==e?this.endianness:e);return this.position+=4,t},n.prototype.readFloat64=function(e){var t=this._dataView.getFloat64(this.position,null==e?this.endianness:e);return this.position+=8,t},n.endianness=new Int8Array(new Int16Array([1]).buffer)[0]>0,n.memcpy=function(e,t,r,n,i){var s=new Uint8Array(e,t,i),o=new Uint8Array(r,n,i);s.set(o)},n.arrayToNative=function(e,t){return t==this.endianness?e:this.flipArrayEndianness(e)},n.nativeToEndian=function(e,t){return this.endianness==t?e:this.flipArrayEndianness(e)},n.flipArrayEndianness=function(e){for(var t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),r=0;r<e.byteLength;r+=e.BYTES_PER_ELEMENT)for(var n=r+e.BYTES_PER_ELEMENT-1,i=r;n>i;n--,i++){var s=t[i];t[i]=t[n],t[n]=s}return e},n.prototype.failurePosition=0,String.fromCharCodeUint8=function(e){for(var t=[],r=0;r<e.length;r++)t[r]=e[r];return String.fromCharCode.apply(null,t)},n.prototype.readString=function(e,t){return null==t||"ASCII"==t?String.fromCharCodeUint8.apply(null,[this.mapUint8Array(null==e?this.byteLength-this.position:e)]):new TextDecoder(t).decode(this.mapUint8Array(e))},n.prototype.readCString=function(e){var t=this.byteLength-this.position,r=new Uint8Array(this._buffer,this._byteOffset+this.position),n=t;null!=e&&(n=Math.min(e,t));for(var i=0;i<n&&0!==r[i];i++);var s=String.fromCharCodeUint8.apply(null,[this.mapUint8Array(i)]);return null!=e?this.position+=n-i:i!=t&&(this.position+=1),s};var s=Math.pow(2,32);n.prototype.readInt64=function(){return this.readInt32()*s+this.readUint32()},n.prototype.readUint64=function(){return this.readUint32()*s+this.readUint32()},n.prototype.readInt64=function(){return this.readUint32()*s+this.readUint32()},n.prototype.readUint24=function(){return(this.readUint8()<<16)+(this.readUint8()<<8)+this.readUint8()},e.DataStream=n,n.prototype.save=function(e){var t=new Blob([this.buffer]);if(!window.URL||!URL.createObjectURL)throw"DataStream.save: Can't create object URL.";var r=window.URL.createObjectURL(t),n=document.createElement("a");document.body.appendChild(n),n.setAttribute("href",r),n.setAttribute("download",e),n.setAttribute("target","_self"),n.click(),window.URL.revokeObjectURL(r)},n.prototype._dynamicSize=!0,Object.defineProperty(n.prototype,"dynamicSize",{get:function(){return this._dynamicSize},set:function(e){e||this._trimAlloc(),this._dynamicSize=e}}),n.prototype.shift=function(e){var t=new ArrayBuffer(this._byteLength-e),r=new Uint8Array(t),n=new Uint8Array(this._buffer,e,r.length);r.set(n),this.buffer=t,this.position-=e},n.prototype.writeInt32Array=function(e,t){if(this._realloc(4*e.length),e instanceof Int32Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)n.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapInt32Array(e.length,t);else for(var r=0;r<e.length;r++)this.writeInt32(e[r],t)},n.prototype.writeInt16Array=function(e,t){if(this._realloc(2*e.length),e instanceof Int16Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)n.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapInt16Array(e.length,t);else for(var r=0;r<e.length;r++)this.writeInt16(e[r],t)},n.prototype.writeInt8Array=function(e){if(this._realloc(1*e.length),e instanceof Int8Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)n.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapInt8Array(e.length);else for(var t=0;t<e.length;t++)this.writeInt8(e[t])},n.prototype.writeUint32Array=function(e,t){if(this._realloc(4*e.length),e instanceof Uint32Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)n.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapUint32Array(e.length,t);else for(var r=0;r<e.length;r++)this.writeUint32(e[r],t)},n.prototype.writeUint16Array=function(e,t){if(this._realloc(2*e.length),e instanceof Uint16Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)n.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapUint16Array(e.length,t);else for(var r=0;r<e.length;r++)this.writeUint16(e[r],t)},n.prototype.writeUint8Array=function(e){if(this._realloc(1*e.length),e instanceof Uint8Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)n.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapUint8Array(e.length);else for(var t=0;t<e.length;t++)this.writeUint8(e[t])},n.prototype.writeFloat64Array=function(e,t){if(this._realloc(8*e.length),e instanceof Float64Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)n.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapFloat64Array(e.length,t);else for(var r=0;r<e.length;r++)this.writeFloat64(e[r],t)},n.prototype.writeFloat32Array=function(e,t){if(this._realloc(4*e.length),e instanceof Float32Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)n.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapFloat32Array(e.length,t);else for(var r=0;r<e.length;r++)this.writeFloat32(e[r],t)},n.prototype.writeInt32=function(e,t){this._realloc(4),this._dataView.setInt32(this.position,e,null==t?this.endianness:t),this.position+=4},n.prototype.writeInt16=function(e,t){this._realloc(2),this._dataView.setInt16(this.position,e,null==t?this.endianness:t),this.position+=2},n.prototype.writeInt8=function(e){this._realloc(1),this._dataView.setInt8(this.position,e),this.position+=1},n.prototype.writeUint32=function(e,t){this._realloc(4),this._dataView.setUint32(this.position,e,null==t?this.endianness:t),this.position+=4},n.prototype.writeUint16=function(e,t){this._realloc(2),this._dataView.setUint16(this.position,e,null==t?this.endianness:t),this.position+=2},n.prototype.writeUint8=function(e){this._realloc(1),this._dataView.setUint8(this.position,e),this.position+=1},n.prototype.writeFloat32=function(e,t){this._realloc(4),this._dataView.setFloat32(this.position,e,null==t?this.endianness:t),this.position+=4},n.prototype.writeFloat64=function(e,t){this._realloc(8),this._dataView.setFloat64(this.position,e,null==t?this.endianness:t),this.position+=8},n.prototype.writeUCS2String=function(e,t,r){null==r&&(r=e.length);for(var n=0;n<e.length&&n<r;n++)this.writeUint16(e.charCodeAt(n),t);for(;n<r;n++)this.writeUint16(0)},n.prototype.writeString=function(e,t,r){var n=0;if(null==t||"ASCII"==t)if(null!=r){var i=Math.min(e.length,r);for(n=0;n<i;n++)this.writeUint8(e.charCodeAt(n));for(;n<r;n++)this.writeUint8(0)}else for(n=0;n<e.length;n++)this.writeUint8(e.charCodeAt(n));else this.writeUint8Array(new TextEncoder(t).encode(e.substring(0,r)))},n.prototype.writeCString=function(e,t){var r=0;if(null!=t){var n=Math.min(e.length,t);for(r=0;r<n;r++)this.writeUint8(e.charCodeAt(r));for(;r<t;r++)this.writeUint8(0)}else{for(r=0;r<e.length;r++)this.writeUint8(e.charCodeAt(r));this.writeUint8(0)}},n.prototype.writeStruct=function(e,t){for(var r=0;r<e.length;r+=2){var n=e[r+1];this.writeType(n,t[e[r]],t)}},n.prototype.writeType=function(e,t,r){var i;if("function"==typeof e)return e(this,t);if("object"==typeof e&&!(e instanceof Array))return e.set(this,t,r);var s=null,o="ASCII",a=this.position;switch("string"==typeof e&&/:/.test(e)&&(i=e.split(":"),e=i[0],s=parseInt(i[1])),"string"==typeof e&&/,/.test(e)&&(i=e.split(","),e=i[0],o=parseInt(i[1])),e){case"uint8":this.writeUint8(t);break;case"int8":this.writeInt8(t);break;case"uint16":this.writeUint16(t,this.endianness);break;case"int16":this.writeInt16(t,this.endianness);break;case"uint32":this.writeUint32(t,this.endianness);break;case"int32":this.writeInt32(t,this.endianness);break;case"float32":this.writeFloat32(t,this.endianness);break;case"float64":this.writeFloat64(t,this.endianness);break;case"uint16be":this.writeUint16(t,n.BIG_ENDIAN);break;case"int16be":this.writeInt16(t,n.BIG_ENDIAN);break;case"uint32be":this.writeUint32(t,n.BIG_ENDIAN);break;case"int32be":this.writeInt32(t,n.BIG_ENDIAN);break;case"float32be":this.writeFloat32(t,n.BIG_ENDIAN);break;case"float64be":this.writeFloat64(t,n.BIG_ENDIAN);break;case"uint16le":this.writeUint16(t,n.LITTLE_ENDIAN);break;case"int16le":this.writeInt16(t,n.LITTLE_ENDIAN);break;case"uint32le":this.writeUint32(t,n.LITTLE_ENDIAN);break;case"int32le":this.writeInt32(t,n.LITTLE_ENDIAN);break;case"float32le":this.writeFloat32(t,n.LITTLE_ENDIAN);break;case"float64le":this.writeFloat64(t,n.LITTLE_ENDIAN);break;case"cstring":this.writeCString(t,s);break;case"string":this.writeString(t,o,s);break;case"u16string":this.writeUCS2String(t,this.endianness,s);break;case"u16stringle":this.writeUCS2String(t,n.LITTLE_ENDIAN,s);break;case"u16stringbe":this.writeUCS2String(t,n.BIG_ENDIAN,s);break;default:if(3==e.length){for(var l=e[1],u=0;u<t.length;u++)this.writeType(l,t[u]);break}this.writeStruct(e,t)}null!=s&&(this.position=a,this._realloc(s),this.position=a+s)},n.prototype.writeUint64=function(e){var t=Math.floor(e/s);this.writeUint32(t),this.writeUint32(4294967295&e)},n.prototype.writeUint24=function(e){this.writeUint8((16711680&e)>>16),this.writeUint8((65280&e)>>8),this.writeUint8(255&e)},n.prototype.adjustUint32=function(e,t){var r=this.position;this.seek(e),this.writeUint32(t),this.seek(r)},n.prototype.mapInt32Array=function(e,t){this._realloc(4*e);var r=new Int32Array(this._buffer,this.byteOffset+this.position,e);return n.arrayToNative(r,null==t?this.endianness:t),this.position+=4*e,r},n.prototype.mapInt16Array=function(e,t){this._realloc(2*e);var r=new Int16Array(this._buffer,this.byteOffset+this.position,e);return n.arrayToNative(r,null==t?this.endianness:t),this.position+=2*e,r},n.prototype.mapInt8Array=function(e){this._realloc(1*e);var t=new Int8Array(this._buffer,this.byteOffset+this.position,e);return this.position+=1*e,t},n.prototype.mapUint32Array=function(e,t){this._realloc(4*e);var r=new Uint32Array(this._buffer,this.byteOffset+this.position,e);return n.arrayToNative(r,null==t?this.endianness:t),this.position+=4*e,r},n.prototype.mapUint16Array=function(e,t){this._realloc(2*e);var r=new Uint16Array(this._buffer,this.byteOffset+this.position,e);return n.arrayToNative(r,null==t?this.endianness:t),this.position+=2*e,r},n.prototype.mapFloat64Array=function(e,t){this._realloc(8*e);var r=new Float64Array(this._buffer,this.byteOffset+this.position,e);return n.arrayToNative(r,null==t?this.endianness:t),this.position+=8*e,r},n.prototype.mapFloat32Array=function(e,t){this._realloc(4*e);var r=new Float32Array(this._buffer,this.byteOffset+this.position,e);return n.arrayToNative(r,null==t?this.endianness:t),this.position+=4*e,r};var o=function(e){this.buffers=[],this.bufferIndex=-1,e&&(this.insertBuffer(e),this.bufferIndex=0)};(o.prototype=new n(new ArrayBuffer,0,n.BIG_ENDIAN)).initialized=function(){var e;return this.bufferIndex>-1||(this.buffers.length>0?0===(e=this.buffers[0]).fileStart?(this.buffer=e,this.bufferIndex=0,t.debug("MultiBufferStream","Stream ready for parsing"),!0):(t.warn("MultiBufferStream","The first buffer should have a fileStart of 0"),this.logBufferLevel(),!1):(t.warn("MultiBufferStream","No buffer to start parsing from"),this.logBufferLevel(),!1))},ArrayBuffer.concat=function(e,r){t.debug("ArrayBuffer","Trying to create a new buffer of size: "+(e.byteLength+r.byteLength));var n=new Uint8Array(e.byteLength+r.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(r),e.byteLength),n.buffer},o.prototype.reduceBuffer=function(e,t,r){var n;return(n=new Uint8Array(r)).set(new Uint8Array(e,t,r)),n.buffer.fileStart=e.fileStart+t,n.buffer.usedBytes=0,n.buffer},o.prototype.insertBuffer=function(e){for(var r=!0,n=0;n<this.buffers.length;n++){var i=this.buffers[n];if(e.fileStart<=i.fileStart){if(e.fileStart===i.fileStart){if(e.byteLength>i.byteLength){this.buffers.splice(n,1),n--;continue}t.warn("MultiBufferStream","Buffer (fileStart: "+e.fileStart+" - Length: "+e.byteLength+") already appended, ignoring")}else e.fileStart+e.byteLength<=i.fileStart||(e=this.reduceBuffer(e,0,i.fileStart-e.fileStart)),t.debug("MultiBufferStream","Appending new buffer (fileStart: "+e.fileStart+" - Length: "+e.byteLength+")"),this.buffers.splice(n,0,e),0===n&&(this.buffer=e);r=!1;break}if(e.fileStart<i.fileStart+i.byteLength){var s=i.fileStart+i.byteLength-e.fileStart,o=e.byteLength-s;if(!(o>0)){r=!1;break}e=this.reduceBuffer(e,s,o)}}r&&(t.debug("MultiBufferStream","Appending new buffer (fileStart: "+e.fileStart+" - Length: "+e.byteLength+")"),this.buffers.push(e),0===n&&(this.buffer=e))},o.prototype.logBufferLevel=function(e){var r,n,i,s,o,a=[],l="";for(i=0,s=0,r=0;r<this.buffers.length;r++)n=this.buffers[r],0===r?(o={},a.push(o),o.start=n.fileStart,o.end=n.fileStart+n.byteLength,l+="["+o.start+"-"):o.end===n.fileStart?o.end=n.fileStart+n.byteLength:((o={}).start=n.fileStart,l+=a[a.length-1].end-1+"], ["+o.start+"-",o.end=n.fileStart+n.byteLength,a.push(o)),i+=n.usedBytes,s+=n.byteLength;a.length>0&&(l+=o.end-1+"]");var u=e?t.info:t.debug;0===this.buffers.length?u("MultiBufferStream","No more buffer in memory"):u("MultiBufferStream",this.buffers.length+" stored buffer(s) ("+i+"/"+s+" bytes), continuous ranges: "+l)},o.prototype.cleanBuffers=function(){var e,r;for(e=0;e<this.buffers.length;e++)(r=this.buffers[e]).usedBytes===r.byteLength&&(t.debug("MultiBufferStream","Removing buffer #"+e),this.buffers.splice(e,1),e--)},o.prototype.mergeNextBuffer=function(){var e;if(this.bufferIndex+1<this.buffers.length){if((e=this.buffers[this.bufferIndex+1]).fileStart===this.buffer.fileStart+this.buffer.byteLength){var r=this.buffer.byteLength,n=this.buffer.usedBytes,i=this.buffer.fileStart;return this.buffers[this.bufferIndex]=ArrayBuffer.concat(this.buffer,e),this.buffer=this.buffers[this.bufferIndex],this.buffers.splice(this.bufferIndex+1,1),this.buffer.usedBytes=n,this.buffer.fileStart=i,t.debug("ISOFile","Concatenating buffer for box parsing (length: "+r+"->"+this.buffer.byteLength+")"),!0}return!1}return!1},o.prototype.findPosition=function(e,r,n){var i,s=null,o=-1;for(i=!0===e?0:this.bufferIndex;i<this.buffers.length&&(s=this.buffers[i]).fileStart<=r;)o=i,n&&(s.fileStart+s.byteLength<=r?s.usedBytes=s.byteLength:s.usedBytes=r-s.fileStart,this.logBufferLevel()),i++;return-1!==o&&(s=this.buffers[o]).fileStart+s.byteLength>=r?(t.debug("MultiBufferStream","Found position in existing buffer #"+o),o):-1},o.prototype.findEndContiguousBuf=function(e){var t,r,n,i=void 0!==e?e:this.bufferIndex;if(r=this.buffers[i],this.buffers.length>i+1)for(t=i+1;t<this.buffers.length&&(n=this.buffers[t]).fileStart===r.fileStart+r.byteLength;t++)r=n;return r.fileStart+r.byteLength},o.prototype.getEndFilePositionAfter=function(e){var t=this.findPosition(!0,e,!1);return-1!==t?this.findEndContiguousBuf(t):e},o.prototype.addUsedBytes=function(e){this.buffer.usedBytes+=e,this.logBufferLevel()},o.prototype.setAllUsedBytes=function(){this.buffer.usedBytes=this.buffer.byteLength,this.logBufferLevel()},o.prototype.seek=function(e,r,n){var i;return-1!==(i=this.findPosition(r,e,n))?(this.buffer=this.buffers[i],this.bufferIndex=i,this.position=e-this.buffer.fileStart,t.debug("MultiBufferStream","Repositioning parser at buffer position: "+this.position),!0):(t.debug("MultiBufferStream","Position "+e+" not found in buffered data"),!1)},o.prototype.getPosition=function(){if(-1===this.bufferIndex||null===this.buffers[this.bufferIndex])throw"Error accessing position in the MultiBufferStream";return this.buffers[this.bufferIndex].fileStart+this.position},o.prototype.getLength=function(){return this.byteLength},o.prototype.getEndPosition=function(){if(-1===this.bufferIndex||null===this.buffers[this.bufferIndex])throw"Error accessing position in the MultiBufferStream";return this.buffers[this.bufferIndex].fileStart+this.byteLength},e.MultiBufferStream=o;var a=function(){var e=[];e[3]="ES_Descriptor",e[4]="DecoderConfigDescriptor",e[5]="DecoderSpecificInfo",e[6]="SLConfigDescriptor",this.getDescriptorName=function(t){return e[t]};var r=this,n={};return this.parseOneDescriptor=function(r){var i,s,o,a=0;for(i=r.readUint8(),o=r.readUint8();128&o;)a=(a<<7)+(127&o),o=r.readUint8();return a=(a<<7)+(127&o),t.debug("MPEG4DescriptorParser","Found "+(e[i]||"Descriptor "+i)+", size "+a+" at position "+r.getPosition()),(s=e[i]?new n[e[i]](a):new n.Descriptor(a)).parse(r),s},n.Descriptor=function(e,t){this.tag=e,this.size=t,this.descs=[]},n.Descriptor.prototype.parse=function(e){this.data=e.readUint8Array(this.size)},n.Descriptor.prototype.findDescriptor=function(e){for(var t=0;t<this.descs.length;t++)if(this.descs[t].tag==e)return this.descs[t];return null},n.Descriptor.prototype.parseRemainingDescriptors=function(e){for(var t=e.position;e.position<t+this.size;){var n=r.parseOneDescriptor(e);this.descs.push(n)}},n.ES_Descriptor=function(e){n.Descriptor.call(this,3,e)},n.ES_Descriptor.prototype=new n.Descriptor,n.ES_Descriptor.prototype.parse=function(e){if(this.ES_ID=e.readUint16(),this.flags=e.readUint8(),this.size-=3,128&this.flags?(this.dependsOn_ES_ID=e.readUint16(),this.size-=2):this.dependsOn_ES_ID=0,64&this.flags){var t=e.readUint8();this.URL=e.readString(t),this.size-=t+1}else this.URL="";32&this.flags?(this.OCR_ES_ID=e.readUint16(),this.size-=2):this.OCR_ES_ID=0,this.parseRemainingDescriptors(e)},n.ES_Descriptor.prototype.getOTI=function(e){var t=this.findDescriptor(4);return t?t.oti:0},n.ES_Descriptor.prototype.getAudioConfig=function(e){var t=this.findDescriptor(4);if(!t)return null;var r=t.findDescriptor(5);if(r&&r.data){var n=(248&r.data[0])>>3;return 31===n&&r.data.length>=2&&(n=32+((7&r.data[0])<<3)+((224&r.data[1])>>5)),n}return null},n.DecoderConfigDescriptor=function(e){n.Descriptor.call(this,4,e)},n.DecoderConfigDescriptor.prototype=new n.Descriptor,n.DecoderConfigDescriptor.prototype.parse=function(e){this.oti=e.readUint8(),this.streamType=e.readUint8(),this.upStream=!!(this.streamType>>1&1),this.streamType=this.streamType>>>2,this.bufferSize=e.readUint24(),this.maxBitrate=e.readUint32(),this.avgBitrate=e.readUint32(),this.size-=13,this.parseRemainingDescriptors(e)},n.DecoderSpecificInfo=function(e){n.Descriptor.call(this,5,e)},n.DecoderSpecificInfo.prototype=new n.Descriptor,n.SLConfigDescriptor=function(e){n.Descriptor.call(this,6,e)},n.SLConfigDescriptor.prototype=new n.Descriptor,this};e.MPEG4DescriptorParser=a;var l={ERR_INVALID_DATA:-1,ERR_NOT_ENOUGH_DATA:0,OK:1,BASIC_BOXES:[{type:"mdat",name:"MediaDataBox"},{type:"idat",name:"ItemDataBox"},{type:"free",name:"FreeSpaceBox"},{type:"skip",name:"FreeSpaceBox"},{type:"meco",name:"AdditionalMetadataContainerBox"},{type:"strk",name:"SubTrackBox"}],FULL_BOXES:[{type:"hmhd",name:"HintMediaHeaderBox"},{type:"nmhd",name:"NullMediaHeaderBox"},{type:"iods",name:"ObjectDescriptorBox"},{type:"xml ",name:"XMLBox"},{type:"bxml",name:"BinaryXMLBox"},{type:"ipro",name:"ItemProtectionBox"},{type:"mere",name:"MetaboxRelationBox"}],CONTAINER_BOXES:[[{type:"moov",name:"CompressedMovieBox"},["trak","pssh"]],[{type:"trak",name:"TrackBox"}],[{type:"edts",name:"EditBox"}],[{type:"mdia",name:"MediaBox"}],[{type:"minf",name:"MediaInformationBox"}],[{type:"dinf",name:"DataInformationBox"}],[{type:"stbl",name:"SampleTableBox"},["sgpd","sbgp"]],[{type:"mvex",name:"MovieExtendsBox"},["trex"]],[{type:"moof",name:"CompressedMovieFragmentBox"},["traf"]],[{type:"traf",name:"TrackFragmentBox"},["trun","sgpd","sbgp"]],[{type:"vttc",name:"VTTCueBox"}],[{type:"tref",name:"TrackReferenceBox"}],[{type:"iref",name:"ItemReferenceBox"}],[{type:"mfra",name:"MovieFragmentRandomAccessBox"},["tfra"]],[{type:"meco",name:"AdditionalMetadataContainerBox"}],[{type:"hnti",name:"trackhintinformation"}],[{type:"hinf",name:"hintstatisticsbox"}],[{type:"strk",name:"SubTrackBox"}],[{type:"strd",name:"SubTrackDefinitionBox"}],[{type:"sinf",name:"ProtectionSchemeInfoBox"}],[{type:"rinf",name:"RestrictedSchemeInfoBox"}],[{type:"schi",name:"SchemeInformationBox"}],[{type:"trgr",name:"TrackGroupBox"}],[{type:"udta",name:"UserDataBox"},["kind"]],[{type:"iprp",name:"ItemPropertiesBox"},["ipma"]],[{type:"ipco",name:"ItemPropertyContainerBox"}],[{type:"grpl",name:"GroupsListBox"}],[{type:"j2kH",name:"J2KHeaderInfoBox"}],[{type:"etyp",name:"ExtendedTypeBox"},["tyco"]]],boxCodes:[],fullBoxCodes:[],containerBoxCodes:[],sampleEntryCodes:{},sampleGroupEntryCodes:[],trackGroupTypes:[],UUIDBoxes:{},UUIDs:[],initialize:function(){l.FullBox.prototype=new l.Box,l.ContainerBox.prototype=new l.Box,l.SampleEntry.prototype=new l.Box,l.TrackGroupTypeBox.prototype=new l.FullBox,l.BASIC_BOXES.forEach(function(e){l.createBoxCtor(e.type,e.name)}),l.FULL_BOXES.forEach(function(e){l.createFullBoxCtor(e.type,e.name)}),l.CONTAINER_BOXES.forEach(function(e){l.createContainerBoxCtor(e[0].type,e[0].name,null,e[1])})},Box:function(e,t,r,n){this.type=e,this.box_name=r,this.size=t,this.uuid=n},FullBox:function(e,t,r,n){l.Box.call(this,e,t,r,n),this.flags=0,this.version=0},ContainerBox:function(e,t,r,n){l.Box.call(this,e,t,r,n),this.boxes=[]},SampleEntry:function(e,t,r,n){l.ContainerBox.call(this,e,t),this.hdr_size=r,this.start=n},SampleGroupEntry:function(e){this.grouping_type=e},TrackGroupTypeBox:function(e,t){l.FullBox.call(this,e,t)},createBoxCtor:function(e,t,r){l.boxCodes.push(e),l[e+"Box"]=function(r){l.Box.call(this,e,r,t)},l[e+"Box"].prototype=new l.Box,r&&(l[e+"Box"].prototype.parse=r)},createFullBoxCtor:function(e,t,r){l[e+"Box"]=function(r){l.FullBox.call(this,e,r,t)},l[e+"Box"].prototype=new l.FullBox,l[e+"Box"].prototype.parse=function(e){this.parseFullHeader(e),r&&r.call(this,e)}},addSubBoxArrays:function(e){if(e){this.subBoxNames=e;for(var t=e.length,r=0;r<t;r++)this[e[r]+"s"]=[]}},createContainerBoxCtor:function(e,t,r,n){l[e+"Box"]=function(r){l.ContainerBox.call(this,e,r,t),l.addSubBoxArrays.call(this,n)},l[e+"Box"].prototype=new l.ContainerBox,r&&(l[e+"Box"].prototype.parse=r)},createMediaSampleEntryCtor:function(e,t,r){l.sampleEntryCodes[e]=[],l[e+"SampleEntry"]=function(e,t){l.SampleEntry.call(this,e,t),l.addSubBoxArrays.call(this,r)},l[e+"SampleEntry"].prototype=new l.SampleEntry,t&&(l[e+"SampleEntry"].prototype.parse=t)},createSampleEntryCtor:function(e,t,r,n){l.sampleEntryCodes[e].push(t),l[t+"SampleEntry"]=function(r){l[e+"SampleEntry"].call(this,t,r),l.addSubBoxArrays.call(this,n)},l[t+"SampleEntry"].prototype=new l[e+"SampleEntry"],r&&(l[t+"SampleEntry"].prototype.parse=r)},createEncryptedSampleEntryCtor:function(e,t,r){l.createSampleEntryCtor.call(this,e,t,r,["sinf"])},createSampleGroupCtor:function(e,t){l[e+"SampleGroupEntry"]=function(t){l.SampleGroupEntry.call(this,e,t)},l[e+"SampleGroupEntry"].prototype=new l.SampleGroupEntry,t&&(l[e+"SampleGroupEntry"].prototype.parse=t)},createTrackGroupCtor:function(e,t){l[e+"TrackGroupTypeBox"]=function(t){l.TrackGroupTypeBox.call(this,e,t)},l[e+"TrackGroupTypeBox"].prototype=new l.TrackGroupTypeBox,t&&(l[e+"TrackGroupTypeBox"].prototype.parse=t)},createUUIDBox:function(e,t,r,n,i){l.UUIDs.push(e),l.UUIDBoxes[e]=function(i){r?l.FullBox.call(this,"uuid",i,t,e):n?l.ContainerBox.call(this,"uuid",i,t,e):l.Box.call(this,"uuid",i,t,e)},l.UUIDBoxes[e].prototype=r?new l.FullBox:n?new l.ContainerBox:new l.Box,i&&(l.UUIDBoxes[e].prototype.parse=r?function(e){this.parseFullHeader(e),i&&i.call(this,e)}:i)}};function u(e){var t="<table class='inner-table'>";t+="<thead><tr><th>length</th><th>nalu_data</th></tr></thead>",t+="<tbody>";for(var r=0;r<e.length;r++){var n=e[r];t+="<tr>",t+="<td>"+n.length+"</td>",t+="<td>",t+=n.nalu.reduce(function(e,t){return e+t.toString(16).padStart(2,"0")},"0x"),t+="</td></tr>"}return t+="</tbody></table>"}function c(e,t){this.x=e,this.y=t}function d(e,t){this.bad_pixel_row=e,this.bad_pixel_column=t}l.initialize(),l.TKHD_FLAG_ENABLED=1,l.TKHD_FLAG_IN_MOVIE=2,l.TKHD_FLAG_IN_PREVIEW=4,l.TFHD_FLAG_BASE_DATA_OFFSET=1,l.TFHD_FLAG_SAMPLE_DESC=2,l.TFHD_FLAG_SAMPLE_DUR=8,l.TFHD_FLAG_SAMPLE_SIZE=16,l.TFHD_FLAG_SAMPLE_FLAGS=32,l.TFHD_FLAG_DUR_EMPTY=65536,l.TFHD_FLAG_DEFAULT_BASE_IS_MOOF=131072,l.TRUN_FLAGS_DATA_OFFSET=1,l.TRUN_FLAGS_FIRST_FLAG=4,l.TRUN_FLAGS_DURATION=256,l.TRUN_FLAGS_SIZE=512,l.TRUN_FLAGS_FLAGS=1024,l.TRUN_FLAGS_CTS_OFFSET=2048,l.Box.prototype.add=function(e){return this.addBox(new l[e+"Box"])},l.Box.prototype.addBox=function(e){return this.boxes.push(e),this[e.type+"s"]?this[e.type+"s"].push(e):this[e.type]=e,e},l.Box.prototype.set=function(e,t){return this[e]=t,this},l.Box.prototype.addEntry=function(e,t){var r=t||"entries";return this[r]||(this[r]=[]),this[r].push(e),this},e.BoxParser=l,l.parseUUID=function(e){return l.parseHex16(e)},l.parseHex16=function(e){for(var t="",r=0;r<16;r++){var n=e.readUint8().toString(16);t+=1===n.length?"0"+n:n}return t},l.parseOneBox=function(e,r,n){var i,s,o,a=e.getPosition(),u=0;if(e.getEndPosition()-a<8)return t.debug("BoxParser","Not enough data in stream to parse the type and size of the box"),{code:l.ERR_NOT_ENOUGH_DATA};if(n&&n<8)return t.debug("BoxParser","Not enough bytes left in the parent box to parse a new box"),{code:l.ERR_NOT_ENOUGH_DATA};var c=e.readUint32(),d=e.readString(4),h=d;if(t.debug("BoxParser","Found box of type '"+d+"' and size "+c+" at position "+a),u=8,"uuid"==d){if(e.getEndPosition()-e.getPosition()<16||n-u<16)return e.seek(a),t.debug("BoxParser","Not enough bytes left in the parent box to parse a UUID box"),{code:l.ERR_NOT_ENOUGH_DATA};u+=16,h=o=l.parseUUID(e)}if(1==c){if(e.getEndPosition()-e.getPosition()<8||n&&n-u<8)return e.seek(a),t.warn("BoxParser",'Not enough data in stream to parse the extended size of the "'+d+'" box'),{code:l.ERR_NOT_ENOUGH_DATA};c=e.readUint64(),u+=8}else if(0===c)if(n)c=n;else if("mdat"!==d)return t.error("BoxParser","Unlimited box size not supported for type: '"+d+"'"),i=new l.Box(d,c),{code:l.OK,box:i,size:i.size};return 0!==c&&c<u?(t.error("BoxParser","Box of type "+d+" has an invalid size "+c+" (too small to be a box)"),{code:l.ERR_NOT_ENOUGH_DATA,type:d,size:c,hdr_size:u,start:a}):0!==c&&n&&c>n?(t.error("BoxParser","Box of type '"+d+"' has a size "+c+" greater than its container size "+n),{code:l.ERR_NOT_ENOUGH_DATA,type:d,size:c,hdr_size:u,start:a}):0!==c&&a+c>e.getEndPosition()?(e.seek(a),t.info("BoxParser","Not enough data in stream to parse the entire '"+d+"' box"),{code:l.ERR_NOT_ENOUGH_DATA,type:d,size:c,hdr_size:u,start:a}):r?{code:l.OK,type:d,size:c,hdr_size:u,start:a}:(l[d+"Box"]?i=new l[d+"Box"](c):"uuid"!==d?(t.warn("BoxParser","Unknown box type: '"+d+"'"),(i=new l.Box(d,c)).has_unparsed_data=!0):l.UUIDBoxes[o]?i=new l.UUIDBoxes[o](c):(t.warn("BoxParser","Unknown uuid type: '"+o+"'"),(i=new l.Box(d,c)).uuid=o,i.has_unparsed_data=!0),i.hdr_size=u,i.start=a,i.write===l.Box.prototype.write&&"mdat"!==i.type&&(t.info("BoxParser","'"+h+"' box writing not yet implemented, keeping unparsed data in memory for later write"),i.parseDataAndRewind(e)),i.parse(e),(s=e.getPosition()-(i.start+i.size))<0?(t.warn("BoxParser","Parsing of box '"+h+"' did not read the entire indicated box data size (missing "+-s+" bytes), seeking forward"),e.seek(i.start+i.size)):s>0&&(t.error("BoxParser","Parsing of box '"+h+"' read "+s+" more bytes than the indicated box data size, seeking backwards"),0!==i.size&&e.seek(i.start+i.size)),{code:l.OK,box:i,size:i.size})},l.Box.prototype.parse=function(e){"mdat"!=this.type?this.data=e.readUint8Array(this.size-this.hdr_size):0===this.size?e.seek(e.getEndPosition()):e.seek(this.start+this.size)},l.Box.prototype.parseDataAndRewind=function(e){this.data=e.readUint8Array(this.size-this.hdr_size),e.position-=this.size-this.hdr_size},l.FullBox.prototype.parseDataAndRewind=function(e){this.parseFullHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size),this.hdr_size-=4,e.position-=this.size-this.hdr_size},l.FullBox.prototype.parseFullHeader=function(e){this.version=e.readUint8(),this.flags=e.readUint24(),this.hdr_size+=4},l.FullBox.prototype.parse=function(e){this.parseFullHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size)},l.ContainerBox.prototype.parse=function(e){for(var r,n;e.getPosition()<this.start+this.size;){if((r=l.parseOneBox(e,!1,this.size-(e.getPosition()-this.start))).code!==l.OK)return;if(n=r.box,this.boxes.push(n),this.subBoxNames&&-1!=this.subBoxNames.indexOf(n.type))this[this.subBoxNames[this.subBoxNames.indexOf(n.type)]+"s"].push(n);else{var i="uuid"!==n.type?n.type:n.uuid;this[i]?t.warn("Box of type "+i+" already stored in field of this type"):this[i]=n}}},l.Box.prototype.parseLanguage=function(e){this.language=e.readUint16();var t=[];t[0]=this.language>>10&31,t[1]=this.language>>5&31,t[2]=31&this.language,this.languageString=String.fromCharCode(t[0]+96,t[1]+96,t[2]+96)},l.SAMPLE_ENTRY_TYPE_VISUAL="Visual",l.SAMPLE_ENTRY_TYPE_AUDIO="Audio",l.SAMPLE_ENTRY_TYPE_HINT="Hint",l.SAMPLE_ENTRY_TYPE_METADATA="Metadata",l.SAMPLE_ENTRY_TYPE_SUBTITLE="Subtitle",l.SAMPLE_ENTRY_TYPE_SYSTEM="System",l.SAMPLE_ENTRY_TYPE_TEXT="Text",l.SampleEntry.prototype.parseHeader=function(e){e.readUint8Array(6),this.data_reference_index=e.readUint16(),this.hdr_size+=8},l.SampleEntry.prototype.parse=function(e){this.parseHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size)},l.SampleEntry.prototype.parseDataAndRewind=function(e){this.parseHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size),this.hdr_size-=8,e.position-=this.size-this.hdr_size},l.SampleEntry.prototype.parseFooter=function(e){l.ContainerBox.prototype.parse.call(this,e)},l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_HINT),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_METADATA),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SYSTEM),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_TEXT),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,function(e){var t;this.parseHeader(e),e.readUint16(),e.readUint16(),e.readUint32Array(3),this.width=e.readUint16(),this.height=e.readUint16(),this.horizresolution=e.readUint32(),this.vertresolution=e.readUint32(),e.readUint32(),this.frame_count=e.readUint16(),t=Math.min(31,e.readUint8()),this.compressorname=e.readString(t),t<31&&e.readString(31-t),this.depth=e.readUint16(),e.readUint16(),this.parseFooter(e)}),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,function(e){this.parseHeader(e),e.readUint32Array(2),this.channel_count=e.readUint16(),this.samplesize=e.readUint16(),e.readUint16(),e.readUint16(),this.samplerate=e.readUint32()/65536,this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"avc1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"avc2"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"avc3"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"avc4"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"av01"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"dav1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"hvc1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"hev1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"hvt1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"lhe1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"dvh1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"dvhe"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vvc1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vvi1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vvs1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vvcN"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vp08"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vp09"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"avs3"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"j2ki"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"mjp2"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"mjpg"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"uncv"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"mp4a"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"ac-3"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"ac-4"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"ec-3"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"Opus"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"mha1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"mha2"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"mhm1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"mhm2"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"fLaC"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"encv"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"enca"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE,"encu"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SYSTEM,"encs"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_TEXT,"enct"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_METADATA,"encm"),l.createBoxCtor("a1lx","AV1LayeredImageIndexingProperty",function(e){var t=16*(1+(1&e.readUint8()));this.layer_size=[];for(var r=0;r<3;r++)this.layer_size[r]=16==t?e.readUint16():e.readUint32()}),l.createBoxCtor("a1op","OperatingPointSelectorProperty",function(e){this.op_index=e.readUint8()}),l.createFullBoxCtor("auxC","AuxiliaryTypeProperty",function(e){this.aux_type=e.readCString();var t=this.size-this.hdr_size-(this.aux_type.length+1);this.aux_subtype=e.readUint8Array(t)}),l.createBoxCtor("av1C","AV1CodecConfigurationBox",function(e){var r=e.readUint8();if(1&~(r>>7))t.error("av1C marker problem");else if(this.version=127&r,1===this.version)if(r=e.readUint8(),this.seq_profile=r>>5&7,this.seq_level_idx_0=31&r,r=e.readUint8(),this.seq_tier_0=r>>7&1,this.high_bitdepth=r>>6&1,this.twelve_bit=r>>5&1,this.monochrome=r>>4&1,this.chroma_subsampling_x=r>>3&1,this.chroma_subsampling_y=r>>2&1,this.chroma_sample_position=3&r,r=e.readUint8(),this.reserved_1=r>>5&7,0===this.reserved_1){if(this.initial_presentation_delay_present=r>>4&1,1===this.initial_presentation_delay_present)this.initial_presentation_delay_minus_one=15&r;else if(this.reserved_2=15&r,0!==this.reserved_2)return void t.error("av1C reserved_2 parsing problem");var n=this.size-this.hdr_size-4;this.configOBUs=e.readUint8Array(n)}else t.error("av1C reserved_1 parsing problem");else t.error("av1C version "+this.version+" not supported")}),l.createBoxCtor("avcC","AVCConfigurationBox",function(e){var t,r;for(this.configurationVersion=e.readUint8(),this.AVCProfileIndication=e.readUint8(),this.profile_compatibility=e.readUint8(),this.AVCLevelIndication=e.readUint8(),this.lengthSizeMinusOne=3&e.readUint8(),this.nb_SPS_nalus=31&e.readUint8(),r=this.size-this.hdr_size-6,this.SPS=[],this.SPS.toString=function(){return u(this)},t=0;t<this.nb_SPS_nalus;t++)this.SPS[t]={},this.SPS[t].length=e.readUint16(),this.SPS[t].nalu=e.readUint8Array(this.SPS[t].length),r-=2+this.SPS[t].length;for(this.nb_PPS_nalus=e.readUint8(),r--,this.PPS=[],this.PPS.toString=function(){return u(this)},t=0;t<this.nb_PPS_nalus;t++)this.PPS[t]={},this.PPS[t].length=e.readUint16(),this.PPS[t].nalu=e.readUint8Array(this.PPS[t].length),r-=2+this.PPS[t].length;r>0&&(this.ext=e.readUint8Array(r))}),l.createBoxCtor("btrt","BitRateBox",function(e){this.bufferSizeDB=e.readUint32(),this.maxBitrate=e.readUint32(),this.avgBitrate=e.readUint32()}),l.createFullBoxCtor("ccst","CodingConstraintsBox",function(e){var t=e.readUint8();this.all_ref_pics_intra=!(128&~t),this.intra_pred_used=!(64&~t),this.max_ref_per_pic=(63&t)>>2,e.readUint24()}),l.createBoxCtor("cdef","ComponentDefinitionBox",function(e){var t;for(this.channel_count=e.readUint16(),this.channel_indexes=[],this.channel_types=[],this.channel_associations=[],t=0;t<this.channel_count;t++)this.channel_indexes.push(e.readUint16()),this.channel_types.push(e.readUint16()),this.channel_associations.push(e.readUint16())}),l.createBoxCtor("clap","CleanApertureBox",function(e){this.cleanApertureWidthN=e.readUint32(),this.cleanApertureWidthD=e.readUint32(),this.cleanApertureHeightN=e.readUint32(),this.cleanApertureHeightD=e.readUint32(),this.horizOffN=e.readUint32(),this.horizOffD=e.readUint32(),this.vertOffN=e.readUint32(),this.vertOffD=e.readUint32()}),l.createBoxCtor("clli","ContentLightLevelBox",function(e){this.max_content_light_level=e.readUint16(),this.max_pic_average_light_level=e.readUint16()}),l.createFullBoxCtor("cmex","CameraExtrinsicMatrixProperty",function(e){1&this.flags&&(this.pos_x=e.readInt32()),2&this.flags&&(this.pos_y=e.readInt32()),4&this.flags&&(this.pos_z=e.readInt32()),8&this.flags&&(0==this.version?16&this.flags?(this.quat_x=e.readInt32(),this.quat_y=e.readInt32(),this.quat_z=e.readInt32()):(this.quat_x=e.readInt16(),this.quat_y=e.readInt16(),this.quat_z=e.readInt16()):this.version),32&this.flags&&(this.id=e.readUint32())}),l.createFullBoxCtor("cmin","CameraIntrinsicMatrixProperty",function(e){this.focal_length_x=e.readInt32(),this.principal_point_x=e.readInt32(),this.principal_point_y=e.readInt32(),1&this.flags&&(this.focal_length_y=e.readInt32(),this.skew_factor=e.readInt32())}),l.createBoxCtor("cmpd","ComponentDefinitionBox",function(e){for(this.component_count=e.readUint32(),this.component_types=[],this.component_type_urls=[],i=0;i<this.component_count;i++){var t=e.readUint16();this.component_types.push(t),t>=32768&&this.component_type_urls.push(e.readCString())}}),l.createFullBoxCtor("co64","ChunkLargeOffsetBox",function(e){var t,r;if(t=e.readUint32(),this.chunk_offsets=[],0===this.version)for(r=0;r<t;r++)this.chunk_offsets.push(e.readUint64())}),l.createFullBoxCtor("CoLL","ContentLightLevelBox",function(e){this.maxCLL=e.readUint16(),this.maxFALL=e.readUint16()}),l.createBoxCtor("colr","ColourInformationBox",function(e){if(this.colour_type=e.readString(4),"nclx"===this.colour_type){this.colour_primaries=e.readUint16(),this.transfer_characteristics=e.readUint16(),this.matrix_coefficients=e.readUint16();var t=e.readUint8();this.full_range_flag=t>>7}else("rICC"===this.colour_type||"prof"===this.colour_type)&&(this.ICC_profile=e.readUint8Array(this.size-4))}),l.createFullBoxCtor("cprt","CopyrightBox",function(e){this.parseLanguage(e),this.notice=e.readCString()}),l.createFullBoxCtor("cslg","CompositionToDecodeBox",function(e){0===this.version&&(this.compositionToDTSShift=e.readInt32(),this.leastDecodeToDisplayDelta=e.readInt32(),this.greatestDecodeToDisplayDelta=e.readInt32(),this.compositionStartTime=e.readInt32(),this.compositionEndTime=e.readInt32())}),l.createFullBoxCtor("ctts","CompositionOffsetBox",function(e){var r,n;if(r=e.readUint32(),this.sample_counts=[],this.sample_offsets=[],0===this.version)for(n=0;n<r;n++){this.sample_counts.push(e.readUint32());var i=e.readInt32();i<0&&t.warn("BoxParser","ctts box uses negative values without using version 1"),this.sample_offsets.push(i)}else if(1==this.version)for(n=0;n<r;n++)this.sample_counts.push(e.readUint32()),this.sample_offsets.push(e.readInt32())}),l.createBoxCtor("dac3","AC3SpecificBox",function(e){var t=e.readUint8(),r=e.readUint8(),n=e.readUint8();this.fscod=t>>6,this.bsid=t>>1&31,this.bsmod=(1&t)<<2|r>>6&3,this.acmod=r>>3&7,this.lfeon=r>>2&1,this.bit_rate_code=3&r|n>>5&7}),l.createBoxCtor("dec3","EC3SpecificBox",function(e){var t=e.readUint16();this.data_rate=t>>3,this.num_ind_sub=7&t,this.ind_subs=[];for(var r=0;r<this.num_ind_sub+1;r++){var n={};this.ind_subs.push(n);var i=e.readUint8(),s=e.readUint8(),o=e.readUint8();n.fscod=i>>6,n.bsid=i>>1&31,n.bsmod=(1&i)<<4|s>>4&15,n.acmod=s>>1&7,n.lfeon=1&s,n.num_dep_sub=o>>1&15,n.num_dep_sub>0&&(n.chan_loc=(1&o)<<8|e.readUint8())}}),l.createFullBoxCtor("dfLa","FLACSpecificBox",function(e){for(var t=[],r=["STREAMINFO","PADDING","APPLICATION","SEEKTABLE","VORBIS_COMMENT","CUESHEET","PICTURE","RESERVED"];;){var n=e.readUint8(),i=Math.min(127&n,r.length-1);if(i?e.readUint8Array(e.readUint24()):(e.readUint8Array(13),this.samplerate=e.readUint32()>>12,e.readUint8Array(20)),t.push(r[i]),128&n)break}this.numMetadataBlocks=t.length+" ("+t.join(", ")+")"}),l.createBoxCtor("dimm","hintimmediateBytesSent",function(e){this.bytessent=e.readUint64()}),l.createBoxCtor("dmax","hintlongestpacket",function(e){this.time=e.readUint32()}),l.createBoxCtor("dmed","hintmediaBytesSent",function(e){this.bytessent=e.readUint64()}),l.createBoxCtor("dOps","OpusSpecificBox",function(e){if(this.Version=e.readUint8(),this.OutputChannelCount=e.readUint8(),this.PreSkip=e.readUint16(),this.InputSampleRate=e.readUint32(),this.OutputGain=e.readInt16(),this.ChannelMappingFamily=e.readUint8(),0!==this.ChannelMappingFamily){this.StreamCount=e.readUint8(),this.CoupledCount=e.readUint8(),this.ChannelMapping=[];for(var t=0;t<this.OutputChannelCount;t++)this.ChannelMapping[t]=e.readUint8()}}),l.createFullBoxCtor("dref","DataReferenceBox",function(e){var t,r;this.entries=[];for(var n=e.readUint32(),i=0;i<n;i++){if((t=l.parseOneBox(e,!1,this.size-(e.getPosition()-this.start))).code!==l.OK)return;r=t.box,this.entries.push(r)}}),l.createBoxCtor("drep","hintrepeatedBytesSent",function(e){this.bytessent=e.readUint64()}),l.createFullBoxCtor("elng","ExtendedLanguageBox",function(e){this.extended_language=e.readString(this.size-this.hdr_size)}),l.createFullBoxCtor("elst","EditListBox",function(e){this.entries=[];for(var t=e.readUint32(),r=0;r<t;r++){var n={};this.entries.push(n),1===this.version?(n.segment_duration=e.readUint64(),n.media_time=e.readInt64()):(n.segment_duration=e.readUint32(),n.media_time=e.readInt32()),n.media_rate_integer=e.readInt16(),n.media_rate_fraction=e.readInt16()}}),l.createFullBoxCtor("emsg","EventMessageBox",function(e){1==this.version?(this.timescale=e.readUint32(),this.presentation_time=e.readUint64(),this.event_duration=e.readUint32(),this.id=e.readUint32(),this.scheme_id_uri=e.readCString(),this.value=e.readCString()):(this.scheme_id_uri=e.readCString(),this.value=e.readCString(),this.timescale=e.readUint32(),this.presentation_time_delta=e.readUint32(),this.event_duration=e.readUint32(),this.id=e.readUint32());var t=this.size-this.hdr_size-(16+(this.scheme_id_uri.length+1)+(this.value.length+1));1==this.version&&(t-=4),this.message_data=e.readUint8Array(t)}),l.createEntityToGroupCtor=function(e,t){l[e+"Box"]=function(t){l.FullBox.call(this,e,t)},l[e+"Box"].prototype=new l.FullBox,l[e+"Box"].prototype.parse=function(e){if(this.parseFullHeader(e),t)t.call(this,e);else for(this.group_id=e.readUint32(),this.num_entities_in_group=e.readUint32(),this.entity_ids=[],i=0;i<this.num_entities_in_group;i++){var r=e.readUint32();this.entity_ids.push(r)}}},l.createEntityToGroupCtor("aebr"),l.createEntityToGroupCtor("afbr"),l.createEntityToGroupCtor("albc"),l.createEntityToGroupCtor("altr"),l.createEntityToGroupCtor("brst"),l.createEntityToGroupCtor("dobr"),l.createEntityToGroupCtor("eqiv"),l.createEntityToGroupCtor("favc"),l.createEntityToGroupCtor("fobr"),l.createEntityToGroupCtor("iaug"),l.createEntityToGroupCtor("pano"),l.createEntityToGroupCtor("slid"),l.createEntityToGroupCtor("ster"),l.createEntityToGroupCtor("tsyn"),l.createEntityToGroupCtor("wbbr"),l.createEntityToGroupCtor("prgr"),l.createEntityToGroupCtor("pymd",function(e){this.group_id=e.readUint32(),this.num_entities_in_group=e.readUint32(),this.entity_ids=[];for(var t=0;t<this.num_entities_in_group;t++){var r=e.readUint32();this.entity_ids.push(r)}for(this.tile_size_x=e.readUint16(),this.tile_size_y=e.readUint16(),this.layer_binning=[],this.tiles_in_layer_column_minus1=[],this.tiles_in_layer_row_minus1=[],t=0;t<this.num_entities_in_group;t++)this.layer_binning[t]=e.readUint16(),this.tiles_in_layer_row_minus1[t]=e.readUint16(),this.tiles_in_layer_column_minus1[t]=e.readUint16()}),l.createFullBoxCtor("esds","ElementaryStreamDescriptorBox",function(e){var t=e.readUint8Array(this.size-this.hdr_size);if(void 0!==a){var r=new a;this.esd=r.parseOneDescriptor(new n(t.buffer,0,n.BIG_ENDIAN))}}),l.createBoxCtor("fiel","FieldHandlingBox",function(e){this.fieldCount=e.readUint8(),this.fieldOrdering=e.readUint8()}),l.createBoxCtor("frma","OriginalFormatBox",function(e){this.data_format=e.readString(4)}),l.createBoxCtor("ftyp","FileTypeBox",function(e){var t=this.size-this.hdr_size;this.major_brand=e.readString(4),this.minor_version=e.readUint32(),t-=8,this.compatible_brands=[];for(var r=0;t>=4;)this.compatible_brands[r]=e.readString(4),t-=4,r++}),l.createFullBoxCtor("hdlr","HandlerBox",function(e){0===this.version&&(e.readUint32(),this.handler=e.readString(4),e.readUint32Array(3),this.name=e.readString(this.size-this.hdr_size-20),"\0"===this.name[this.name.length-1]&&(this.name=this.name.slice(0,-1)))}),l.createBoxCtor("hvcC","HEVCConfigurationBox",function(e){var t,r,n,i;this.configurationVersion=e.readUint8(),i=e.readUint8(),this.general_profile_space=i>>6,this.general_tier_flag=(32&i)>>5,this.general_profile_idc=31&i,this.general_profile_compatibility=e.readUint32(),this.general_constraint_indicator=e.readUint8Array(6),this.general_level_idc=e.readUint8(),this.min_spatial_segmentation_idc=4095&e.readUint16(),this.parallelismType=3&e.readUint8(),this.chroma_format_idc=3&e.readUint8(),this.bit_depth_luma_minus8=7&e.readUint8(),this.bit_depth_chroma_minus8=7&e.readUint8(),this.avgFrameRate=e.readUint16(),i=e.readUint8(),this.constantFrameRate=i>>6,this.numTemporalLayers=(13&i)>>3,this.temporalIdNested=(4&i)>>2,this.lengthSizeMinusOne=3&i,this.nalu_arrays=[],this.nalu_arrays.toString=function(){var e="<table class='inner-table'>";e+="<thead><tr><th>completeness</th><th>nalu_type</th><th>nalu_data</th></tr></thead>",e+="<tbody>";for(var t=0;t<this.length;t++){var r=this[t];e+="<tr>",e+="<td rowspan='"+r.length+"'>"+r.completeness+"</td>",e+="<td rowspan='"+r.length+"'>"+r.nalu_type+"</td>";for(var n=0;n<r.length;n++)0!==n&&(e+="<tr>"),e+="<td>",e+=r[n].data.reduce(function(e,t){return e+t.toString(16).padStart(2,"0")},"0x"),e+="</td></tr>"}return e+="</tbody></table>"};var s=e.readUint8();for(t=0;t<s;t++){var o=[];this.nalu_arrays.push(o),i=e.readUint8(),o.completeness=(128&i)>>7,o.nalu_type=63&i;var a=e.readUint16();for(r=0;r<a;r++){var l={};o.push(l),n=e.readUint16(),l.data=e.readUint8Array(n)}}}),l.createFullBoxCtor("iinf","ItemInfoBox",function(e){var r;0===this.version?this.entry_count=e.readUint16():this.entry_count=e.readUint32(),this.item_infos=[];for(var n=0;n<this.entry_count;n++){if((r=l.parseOneBox(e,!1,this.size-(e.getPosition()-this.start))).code!==l.OK)return;"infe"!==r.box.type&&t.error("BoxParser","Expected 'infe' box, got "+r.box.type),this.item_infos[n]=r.box}}),l.createFullBoxCtor("iloc","ItemLocationBox",function(e){var t;t=e.readUint8(),this.offset_size=t>>4&15,this.length_size=15&t,t=e.readUint8(),this.base_offset_size=t>>4&15,1===this.version||2===this.version?this.index_size=15&t:this.index_size=0,this.items=[];var r=0;if(this.version<2)r=e.readUint16();else{if(2!==this.version)throw"version of iloc box not supported";r=e.readUint32()}for(var n=0;n<r;n++){var i={};if(this.items.push(i),this.version<2)i.item_ID=e.readUint16();else{if(2!==this.version)throw"version of iloc box not supported";i.item_ID=e.readUint32()}switch(1===this.version||2===this.version?i.construction_method=15&e.readUint16():i.construction_method=0,i.data_reference_index=e.readUint16(),this.base_offset_size){case 0:i.base_offset=0;break;case 4:i.base_offset=e.readUint32();break;case 8:i.base_offset=e.readUint64();break;default:throw"Error reading base offset size"}var s=e.readUint16();i.extents=[];for(var o=0;o<s;o++){var a={};if(i.extents.push(a),1===this.version||2===this.version)switch(this.index_size){case 0:a.extent_index=0;break;case 4:a.extent_index=e.readUint32();break;case 8:a.extent_index=e.readUint64();break;default:throw"Error reading extent index"}switch(this.offset_size){case 0:a.extent_offset=0;break;case 4:a.extent_offset=e.readUint32();break;case 8:a.extent_offset=e.readUint64();break;default:throw"Error reading extent index"}switch(this.length_size){case 0:a.extent_length=0;break;case 4:a.extent_length=e.readUint32();break;case 8:a.extent_length=e.readUint64();break;default:throw"Error reading extent index"}}}}),l.createBoxCtor("imir","ImageMirror",function(e){var t=e.readUint8();this.reserved=t>>7,this.axis=1&t}),l.createFullBoxCtor("infe","ItemInfoEntry",function(e){if(0!==this.version&&1!==this.version||(this.item_ID=e.readUint16(),this.item_protection_index=e.readUint16(),this.item_name=e.readCString(),this.content_type=e.readCString(),this.content_encoding=e.readCString()),1===this.version)return this.extension_type=e.readString(4),t.warn("BoxParser","Cannot parse extension type"),void e.seek(this.start+this.size);this.version>=2&&(2===this.version?this.item_ID=e.readUint16():3===this.version&&(this.item_ID=e.readUint32()),this.item_protection_index=e.readUint16(),this.item_type=e.readString(4),this.item_name=e.readCString(),"mime"===this.item_type?(this.content_type=e.readCString(),this.content_encoding=e.readCString()):"uri "===this.item_type&&(this.item_uri_type=e.readCString()))}),l.createFullBoxCtor("ipma","ItemPropertyAssociationBox",function(e){var t,r;for(entry_count=e.readUint32(),this.associations=[],t=0;t<entry_count;t++){var n={};this.associations.push(n),this.version<1?n.id=e.readUint16():n.id=e.readUint32();var i=e.readUint8();for(n.props=[],r=0;r<i;r++){var s=e.readUint8(),o={};n.props.push(o),o.essential=(128&s)>>7==1,1&this.flags?o.property_index=(127&s)<<8|e.readUint8():o.property_index=127&s}}}),l.createFullBoxCtor("iref","ItemReferenceBox",function(e){var r,n;for(this.references=[];e.getPosition()<this.start+this.size;){if((r=l.parseOneBox(e,!0,this.size-(e.getPosition()-this.start))).code!==l.OK)return;(n=0===this.version?new l.SingleItemTypeReferenceBox(r.type,r.size,r.hdr_size,r.start):new l.SingleItemTypeReferenceBoxLarge(r.type,r.size,r.hdr_size,r.start)).write===l.Box.prototype.write&&"mdat"!==n.type&&(t.warn("BoxParser",n.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),n.parseDataAndRewind(e)),n.parse(e),this.references.push(n)}}),l.createBoxCtor("irot","ImageRotation",function(e){this.angle=3&e.readUint8()}),l.createFullBoxCtor("ispe","ImageSpatialExtentsProperty",function(e){this.image_width=e.readUint32(),this.image_height=e.readUint32()}),l.createFullBoxCtor("kind","KindBox",function(e){this.schemeURI=e.readCString(),this.value=e.readCString()}),l.createFullBoxCtor("leva","LevelAssignmentBox",function(e){var r=e.readUint8();this.levels=[];for(var n=0;n<r;n++){var i={};this.levels[n]=i,i.track_ID=e.readUint32();var s=e.readUint8();switch(i.padding_flag=s>>7,i.assignment_type=127&s,i.assignment_type){case 0:i.grouping_type=e.readString(4);break;case 1:i.grouping_type=e.readString(4),i.grouping_type_parameter=e.readUint32();break;case 2:case 3:break;case 4:i.sub_track_id=e.readUint32();break;default:t.warn("BoxParser","Unknown leva assignement type")}}}),l.createBoxCtor("lhvC","LHEVCConfigurationBox",function(e){var t,r,n;this.configurationVersion=e.readUint8(),this.min_spatial_segmentation_idc=4095&e.readUint16(),this.parallelismType=3&e.readUint8(),n=e.readUint8(),this.numTemporalLayers=(13&n)>>3,this.temporalIdNested=(4&n)>>2,this.lengthSizeMinusOne=3&n,this.nalu_arrays=[],this.nalu_arrays.toString=function(){var e="<table class='inner-table'>";e+="<thead><tr><th>completeness</th><th>nalu_type</th><th>nalu_data</th></tr></thead>",e+="<tbody>";for(var t=0;t<this.length;t++){var r=this[t];e+="<tr>",e+="<td rowspan='"+r.length+"'>"+r.completeness+"</td>",e+="<td rowspan='"+r.length+"'>"+r.nalu_type+"</td>";for(var n=0;n<r.length;n++)0!==n&&(e+="<tr>"),e+="<td>",e+=r[n].data.reduce(function(e,t){return e+t.toString(16).padStart(2,"0")},"0x"),e+="</td></tr>"}return e+="</tbody></table>"};var i=e.readUint8();for(t=0;t<i;t++){var s=[];this.nalu_arrays.push(s),n=e.readUint8(),s.completeness=(128&n)>>7,s.nalu_type=63&n;var o=e.readUint16();for(r=0;r<o;r++){var a={};s.push(a);var l=e.readUint16();a.data=e.readUint8Array(l)}}}),l.createBoxCtor("lsel","LayerSelectorProperty",function(e){this.layer_id=e.readUint16()}),l.createBoxCtor("maxr","hintmaxrate",function(e){this.period=e.readUint32(),this.bytes=e.readUint32()}),c.prototype.toString=function(){return"("+this.x+","+this.y+")"},l.createBoxCtor("mdcv","MasteringDisplayColourVolumeBox",function(e){this.display_primaries=[],this.display_primaries[0]=new c(e.readUint16(),e.readUint16()),this.display_primaries[1]=new c(e.readUint16(),e.readUint16()),this.display_primaries[2]=new c(e.readUint16(),e.readUint16()),this.white_point=new c(e.readUint16(),e.readUint16()),this.max_display_mastering_luminance=e.readUint32(),this.min_display_mastering_luminance=e.readUint32()}),l.createFullBoxCtor("mdhd","MediaHeaderBox",function(e){1==this.version?(this.creation_time=e.readUint64(),this.modification_time=e.readUint64(),this.timescale=e.readUint32(),this.duration=e.readUint64()):(this.creation_time=e.readUint32(),this.modification_time=e.readUint32(),this.timescale=e.readUint32(),this.duration=e.readUint32()),this.parseLanguage(e),e.readUint16()}),l.createFullBoxCtor("mehd","MovieExtendsHeaderBox",function(e){1&this.flags&&(t.warn("BoxParser","mehd box incorrectly uses flags set to 1, converting version to 1"),this.version=1),1==this.version?this.fragment_duration=e.readUint64():this.fragment_duration=e.readUint32()}),l.createFullBoxCtor("meta","MetaBox",function(e){this.boxes=[],l.ContainerBox.prototype.parse.call(this,e)}),l.createFullBoxCtor("mfhd","MovieFragmentHeaderBox",function(e){this.sequence_number=e.readUint32()}),l.createFullBoxCtor("mfro","MovieFragmentRandomAccessOffsetBox",function(e){this._size=e.readUint32()}),l.createFullBoxCtor("mskC","MaskConfigurationProperty",function(e){this.bits_per_pixel=e.readUint8()}),l.createFullBoxCtor("mvhd","MovieHeaderBox",function(e){1==this.version?(this.creation_time=e.readUint64(),this.modification_time=e.readUint64(),this.timescale=e.readUint32(),this.duration=e.readUint64()):(this.creation_time=e.readUint32(),this.modification_time=e.readUint32(),this.timescale=e.readUint32(),this.duration=e.readUint32()),this.rate=e.readUint32(),this.volume=e.readUint16()>>8,e.readUint16(),e.readUint32Array(2),this.matrix=e.readUint32Array(9),e.readUint32Array(6),this.next_track_id=e.readUint32()}),l.createBoxCtor("npck","hintPacketsSent",function(e){this.packetssent=e.readUint32()}),l.createBoxCtor("nump","hintPacketsSent",function(e){this.packetssent=e.readUint64()}),l.createFullBoxCtor("padb","PaddingBitsBox",function(e){var t=e.readUint32();this.padbits=[];for(var r=0;r<Math.floor((t+1)/2);r++)this.padbits=e.readUint8()}),l.createBoxCtor("pasp","PixelAspectRatioBox",function(e){this.hSpacing=e.readUint32(),this.vSpacing=e.readUint32()}),l.createBoxCtor("payl","CuePayloadBox",function(e){this.text=e.readString(this.size-this.hdr_size)}),l.createBoxCtor("payt","hintpayloadID",function(e){this.payloadID=e.readUint32();var t=e.readUint8();this.rtpmap_string=e.readString(t)}),l.createFullBoxCtor("pdin","ProgressiveDownloadInfoBox",function(e){var t=(this.size-this.hdr_size)/8;this.rate=[],this.initial_delay=[];for(var r=0;r<t;r++)this.rate[r]=e.readUint32(),this.initial_delay[r]=e.readUint32()}),l.createFullBoxCtor("pitm","PrimaryItemBox",function(e){0===this.version?this.item_id=e.readUint16():this.item_id=e.readUint32()}),l.createFullBoxCtor("pixi","PixelInformationProperty",function(e){var t;for(this.num_channels=e.readUint8(),this.bits_per_channels=[],t=0;t<this.num_channels;t++)this.bits_per_channels[t]=e.readUint8()}),l.createBoxCtor("pmax","hintlargestpacket",function(e){this.bytes=e.readUint32()}),l.createFullBoxCtor("prdi","ProgressiveDerivedImageItemInformationProperty",function(e){if(this.step_count=e.readUint16(),this.item_count=[],2&this.flags)for(var t=0;t<this.step_count;t++)this.item_count[t]=e.readUint16()}),l.createFullBoxCtor("prft","ProducerReferenceTimeBox",function(e){this.ref_track_id=e.readUint32(),this.ntp_timestamp=e.readUint64(),0===this.version?this.media_time=e.readUint32():this.media_time=e.readUint64()}),l.createFullBoxCtor("pssh","ProtectionSystemSpecificHeaderBox",function(e){if(this.system_id=l.parseHex16(e),this.version>0){var t=e.readUint32();this.kid=[];for(var r=0;r<t;r++)this.kid[r]=l.parseHex16(e)}var n=e.readUint32();n>0&&(this.data=e.readUint8Array(n))}),l.createFullBoxCtor("clef","TrackCleanApertureDimensionsBox",function(e){this.width=e.readUint32(),this.height=e.readUint32()}),l.createFullBoxCtor("enof","TrackEncodedPixelsDimensionsBox",function(e){this.width=e.readUint32(),this.height=e.readUint32()}),l.createFullBoxCtor("prof","TrackProductionApertureDimensionsBox",function(e){this.width=e.readUint32(),this.height=e.readUint32()}),l.createContainerBoxCtor("tapt","TrackApertureModeDimensionsBox",null,["clef","prof","enof"]),l.createBoxCtor("rtp ","rtpmoviehintinformation",function(e){this.descriptionformat=e.readString(4),this.sdptext=e.readString(this.size-this.hdr_size-4)}),l.createFullBoxCtor("saio","SampleAuxiliaryInformationOffsetsBox",function(e){1&this.flags&&(this.aux_info_type=e.readString(4),this.aux_info_type_parameter=e.readUint32());var t=e.readUint32();this.offset=[];for(var r=0;r<t;r++)0===this.version?this.offset[r]=e.readUint32():this.offset[r]=e.readUint64()}),l.createFullBoxCtor("saiz","SampleAuxiliaryInformationSizesBox",function(e){if(1&this.flags&&(this.aux_info_type=e.readString(4),this.aux_info_type_parameter=e.readUint32()),this.default_sample_info_size=e.readUint8(),this.sample_count=e.readUint32(),this.sample_info_size=[],0===this.default_sample_info_size)for(var t=0;t<this.sample_count;t++)this.sample_info_size[t]=e.readUint8()}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_METADATA,"mett",function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.mime_format=e.readCString(),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_METADATA,"metx",function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.namespace=e.readCString(),this.schema_location=e.readCString(),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE,"sbtt",function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.mime_format=e.readCString(),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE,"stpp",function(e){this.parseHeader(e),this.namespace=e.readCString(),this.schema_location=e.readCString(),this.auxiliary_mime_types=e.readCString(),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE,"stxt",function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.mime_format=e.readCString(),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE,"tx3g",function(e){this.parseHeader(e),this.displayFlags=e.readUint32(),this.horizontal_justification=e.readInt8(),this.vertical_justification=e.readInt8(),this.bg_color_rgba=e.readUint8Array(4),this.box_record=e.readInt16Array(4),this.style_record=e.readUint8Array(12),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_METADATA,"wvtt",function(e){this.parseHeader(e),this.parseFooter(e)}),l.createSampleGroupCtor("alst",function(e){var t,r=e.readUint16();for(this.first_output_sample=e.readUint16(),this.sample_offset=[],t=0;t<r;t++)this.sample_offset[t]=e.readUint32();var n=this.description_length-4-4*r;for(this.num_output_samples=[],this.num_total_samples=[],t=0;t<n/4;t++)this.num_output_samples[t]=e.readUint16(),this.num_total_samples[t]=e.readUint16()}),l.createSampleGroupCtor("avll",function(e){this.layerNumber=e.readUint8(),this.accurateStatisticsFlag=e.readUint8(),this.avgBitRate=e.readUint16(),this.avgFrameRate=e.readUint16()}),l.createSampleGroupCtor("avss",function(e){this.subSequenceIdentifier=e.readUint16(),this.layerNumber=e.readUint8();var t=e.readUint8();this.durationFlag=t>>7,this.avgRateFlag=t>>6&1,this.durationFlag&&(this.duration=e.readUint32()),this.avgRateFlag&&(this.accurateStatisticsFlag=e.readUint8(),this.avgBitRate=e.readUint16(),this.avgFrameRate=e.readUint16()),this.dependency=[];for(var r=e.readUint8(),n=0;n<r;n++){var i={};this.dependency.push(i),i.subSeqDirectionFlag=e.readUint8(),i.layerNumber=e.readUint8(),i.subSequenceIdentifier=e.readUint16()}}),l.createSampleGroupCtor("dtrt",function(e){t.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("mvif",function(e){t.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("prol",function(e){this.roll_distance=e.readInt16()}),l.createSampleGroupCtor("rap ",function(e){var t=e.readUint8();this.num_leading_samples_known=t>>7,this.num_leading_samples=127&t}),l.createSampleGroupCtor("rash",function(e){if(this.operation_point_count=e.readUint16(),this.description_length!==2+(1===this.operation_point_count?2:6*this.operation_point_count)+9)t.warn("BoxParser","Mismatch in "+this.grouping_type+" sample group length"),this.data=e.readUint8Array(this.description_length-2);else{if(1===this.operation_point_count)this.target_rate_share=e.readUint16();else{this.target_rate_share=[],this.available_bitrate=[];for(var r=0;r<this.operation_point_count;r++)this.available_bitrate[r]=e.readUint32(),this.target_rate_share[r]=e.readUint16()}this.maximum_bitrate=e.readUint32(),this.minimum_bitrate=e.readUint32(),this.discard_priority=e.readUint8()}}),l.createSampleGroupCtor("roll",function(e){this.roll_distance=e.readInt16()}),l.SampleGroupEntry.prototype.parse=function(e){t.warn("BoxParser","Unknown Sample Group type: "+this.grouping_type),this.data=e.readUint8Array(this.description_length)},l.createSampleGroupCtor("scif",function(e){t.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("scnm",function(e){t.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("seig",function(e){this.reserved=e.readUint8();var t=e.readUint8();this.crypt_byte_block=t>>4,this.skip_byte_block=15&t,this.isProtected=e.readUint8(),this.Per_Sample_IV_Size=e.readUint8(),this.KID=l.parseHex16(e),this.constant_IV_size=0,this.constant_IV=0,1===this.isProtected&&0===this.Per_Sample_IV_Size&&(this.constant_IV_size=e.readUint8(),this.constant_IV=e.readUint8Array(this.constant_IV_size))}),l.createSampleGroupCtor("stsa",function(e){t.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("sync",function(e){var t=e.readUint8();this.NAL_unit_type=63&t}),l.createSampleGroupCtor("tele",function(e){var t=e.readUint8();this.level_independently_decodable=t>>7}),l.createSampleGroupCtor("tsas",function(e){t.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("tscl",function(e){t.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("vipr",function(e){t.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createFullBoxCtor("sbgp","SampleToGroupBox",function(e){this.grouping_type=e.readString(4),1===this.version?this.grouping_type_parameter=e.readUint32():this.grouping_type_parameter=0,this.entries=[];for(var t=e.readUint32(),r=0;r<t;r++){var n={};this.entries.push(n),n.sample_count=e.readInt32(),n.group_description_index=e.readInt32()}}),d.prototype.toString=function(){return"[row: "+this.bad_pixel_row+", column: "+this.bad_pixel_column+"]"},l.createFullBoxCtor("sbpm","SensorBadPixelsMapBox",function(e){var t;for(this.component_count=e.readUint16(),this.component_index=[],t=0;t<this.component_count;t++)this.component_index.push(e.readUint16());var r=e.readUint8();for(this.correction_applied=!(128&~r),this.num_bad_rows=e.readUint32(),this.num_bad_cols=e.readUint32(),this.num_bad_pixels=e.readUint32(),this.bad_rows=[],this.bad_columns=[],this.bad_pixels=[],t=0;t<this.num_bad_rows;t++)this.bad_rows.push(e.readUint32());for(t=0;t<this.num_bad_cols;t++)this.bad_columns.push(e.readUint32());for(t=0;t<this.num_bad_pixels;t++){var n=e.readUint32(),i=e.readUint32();this.bad_pixels.push(new d(n,i))}}),l.createFullBoxCtor("schm","SchemeTypeBox",function(e){this.scheme_type=e.readString(4),this.scheme_version=e.readUint32(),1&this.flags&&(this.scheme_uri=e.readString(this.size-this.hdr_size-8))}),l.createBoxCtor("sdp ","rtptracksdphintinformation",function(e){this.sdptext=e.readString(this.size-this.hdr_size)}),l.createFullBoxCtor("sdtp","SampleDependencyTypeBox",function(e){var t,r=this.size-this.hdr_size;this.is_leading=[],this.sample_depends_on=[],this.sample_is_depended_on=[],this.sample_has_redundancy=[];for(var n=0;n<r;n++)t=e.readUint8(),this.is_leading[n]=t>>6,this.sample_depends_on[n]=t>>4&3,this.sample_is_depended_on[n]=t>>2&3,this.sample_has_redundancy[n]=3&t}),l.createFullBoxCtor("senc","SampleEncryptionBox"),l.createFullBoxCtor("sgpd","SampleGroupDescriptionBox",function(e){this.grouping_type=e.readString(4),t.debug("BoxParser","Found Sample Groups of type "+this.grouping_type),1===this.version?this.default_length=e.readUint32():this.default_length=0,this.version>=2&&(this.default_group_description_index=e.readUint32()),this.entries=[];for(var r=e.readUint32(),n=0;n<r;n++){var i;i=l[this.grouping_type+"SampleGroupEntry"]?new l[this.grouping_type+"SampleGroupEntry"](this.grouping_type):new l.SampleGroupEntry(this.grouping_type),this.entries.push(i),1===this.version&&0===this.default_length?i.description_length=e.readUint32():i.description_length=this.default_length,i.write===l.SampleGroupEntry.prototype.write&&(t.info("BoxParser","SampleGroup for type "+this.grouping_type+" writing not yet implemented, keeping unparsed data in memory for later write"),i.data=e.readUint8Array(i.description_length),e.position-=i.description_length),i.parse(e)}}),l.createFullBoxCtor("sidx","CompressedSegmentIndexBox",function(e){this.reference_ID=e.readUint32(),this.timescale=e.readUint32(),0===this.version?(this.earliest_presentation_time=e.readUint32(),this.first_offset=e.readUint32()):(this.earliest_presentation_time=e.readUint64(),this.first_offset=e.readUint64()),e.readUint16(),this.references=[];for(var t=e.readUint16(),r=0;r<t;r++){var n={};this.references.push(n);var i=e.readUint32();n.reference_type=i>>31&1,n.referenced_size=2147483647&i,n.subsegment_duration=e.readUint32(),i=e.readUint32(),n.starts_with_SAP=i>>31&1,n.SAP_type=i>>28&7,n.SAP_delta_time=268435455&i}}),l.SingleItemTypeReferenceBox=function(e,t,r,n){l.Box.call(this,e,t),this.hdr_size=r,this.start=n},l.SingleItemTypeReferenceBox.prototype=new l.Box,l.SingleItemTypeReferenceBox.prototype.parse=function(e){this.from_item_ID=e.readUint16();var t=e.readUint16();this.references=[];for(var r=0;r<t;r++)this.references[r]={},this.references[r].to_item_ID=e.readUint16()},l.SingleItemTypeReferenceBoxLarge=function(e,t,r,n){l.Box.call(this,e,t),this.hdr_size=r,this.start=n},l.SingleItemTypeReferenceBoxLarge.prototype=new l.Box,l.SingleItemTypeReferenceBoxLarge.prototype.parse=function(e){this.from_item_ID=e.readUint32();var t=e.readUint16();this.references=[];for(var r=0;r<t;r++)this.references[r]={},this.references[r].to_item_ID=e.readUint32()},l.createFullBoxCtor("SmDm","SMPTE2086MasteringDisplayMetadataBox",function(e){this.primaryRChromaticity_x=e.readUint16(),this.primaryRChromaticity_y=e.readUint16(),this.primaryGChromaticity_x=e.readUint16(),this.primaryGChromaticity_y=e.readUint16(),this.primaryBChromaticity_x=e.readUint16(),this.primaryBChromaticity_y=e.readUint16(),this.whitePointChromaticity_x=e.readUint16(),this.whitePointChromaticity_y=e.readUint16(),this.luminanceMax=e.readUint32(),this.luminanceMin=e.readUint32()}),l.createFullBoxCtor("smhd","SoundMediaHeaderBox",function(e){this.balance=e.readUint16(),e.readUint16()}),l.createFullBoxCtor("ssix","CompressedSubsegmentIndexBox",function(e){this.subsegments=[];for(var t=e.readUint32(),r=0;r<t;r++){var n={};this.subsegments.push(n),n.ranges=[];for(var i=e.readUint32(),s=0;s<i;s++){var o={};n.ranges.push(o),o.level=e.readUint8(),o.range_size=e.readUint24()}}}),l.createFullBoxCtor("stco","ChunkOffsetBox",function(e){var t;if(t=e.readUint32(),this.chunk_offsets=[],0===this.version)for(var r=0;r<t;r++)this.chunk_offsets.push(e.readUint32())}),l.createFullBoxCtor("stdp","DegradationPriorityBox",function(e){var t=(this.size-this.hdr_size)/2;this.priority=[];for(var r=0;r<t;r++)this.priority[r]=e.readUint16()}),l.createFullBoxCtor("sthd","SubtitleMediaHeaderBox"),l.createFullBoxCtor("stri","SubTrackInformationBox",function(e){this.switch_group=e.readUint16(),this.alternate_group=e.readUint16(),this.sub_track_id=e.readUint32();var t=(this.size-this.hdr_size-8)/4;this.attribute_list=[];for(var r=0;r<t;r++)this.attribute_list[r]=e.readUint32()}),l.createFullBoxCtor("stsc","SampleToChunkBox",function(e){var t,r;if(t=e.readUint32(),this.first_chunk=[],this.samples_per_chunk=[],this.sample_description_index=[],0===this.version)for(r=0;r<t;r++)this.first_chunk.push(e.readUint32()),this.samples_per_chunk.push(e.readUint32()),this.sample_description_index.push(e.readUint32())}),l.createFullBoxCtor("stsd","SampleDescriptionBox",function(e){var r,n,i,s;for(this.entries=[],i=e.readUint32(),r=1;r<=i;r++){if((n=l.parseOneBox(e,!0,this.size-(e.getPosition()-this.start))).code!==l.OK)return;l[n.type+"SampleEntry"]?((s=new l[n.type+"SampleEntry"](n.size)).hdr_size=n.hdr_size,s.start=n.start):(t.warn("BoxParser","Unknown sample entry type: "+n.type),s=new l.SampleEntry(n.type,n.size,n.hdr_size,n.start)),s.write===l.SampleEntry.prototype.write&&(t.info("BoxParser","SampleEntry "+s.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),s.parseDataAndRewind(e)),s.parse(e),this.entries.push(s)}}),l.createFullBoxCtor("stsg","SubTrackSampleGroupBox",function(e){this.grouping_type=e.readUint32();var t=e.readUint16();this.group_description_index=[];for(var r=0;r<t;r++)this.group_description_index[r]=e.readUint32()}),l.createFullBoxCtor("stsh","ShadowSyncSampleBox",function(e){var t,r;if(t=e.readUint32(),this.shadowed_sample_numbers=[],this.sync_sample_numbers=[],0===this.version)for(r=0;r<t;r++)this.shadowed_sample_numbers.push(e.readUint32()),this.sync_sample_numbers.push(e.readUint32())}),l.createFullBoxCtor("stss","SyncSampleBox",function(e){var t,r;if(r=e.readUint32(),0===this.version)for(this.sample_numbers=[],t=0;t<r;t++)this.sample_numbers.push(e.readUint32())}),l.createFullBoxCtor("stsz","SampleSizeBox",function(e){var t;if(this.sample_sizes=[],0===this.version)for(this.sample_size=e.readUint32(),this.sample_count=e.readUint32(),t=0;t<this.sample_count;t++)0===this.sample_size?this.sample_sizes.push(e.readUint32()):this.sample_sizes[t]=this.sample_size}),l.createFullBoxCtor("stts","TimeToSampleBox",function(e){var r,n,i;if(r=e.readUint32(),this.sample_counts=[],this.sample_deltas=[],0===this.version)for(n=0;n<r;n++)this.sample_counts.push(e.readUint32()),(i=e.readInt32())<0&&(t.warn("BoxParser","File uses negative stts sample delta, using value 1 instead, sync may be lost!"),i=1),this.sample_deltas.push(i)}),l.createFullBoxCtor("stvi","StereoVideoBox",function(e){var t=e.readUint32();this.single_view_allowed=3&t,this.stereo_scheme=e.readUint32();var r,n,i=e.readUint32();for(this.stereo_indication_type=e.readString(i),this.boxes=[];e.getPosition()<this.start+this.size;){if((r=l.parseOneBox(e,!1,this.size-(e.getPosition()-this.start))).code!==l.OK)return;n=r.box,this.boxes.push(n),this[n.type]=n}}),l.createBoxCtor("styp","SegmentTypeBox",function(e){l.ftypBox.prototype.parse.call(this,e)}),l.createFullBoxCtor("stz2","CompactSampleSizeBox",function(e){var r,n;if(this.sample_sizes=[],0===this.version)if(this.reserved=e.readUint24(),this.field_size=e.readUint8(),n=e.readUint32(),4===this.field_size)for(r=0;r<n;r+=2){var i=e.readUint8();this.sample_sizes[r]=i>>4&15,this.sample_sizes[r+1]=15&i}else if(8===this.field_size)for(r=0;r<n;r++)this.sample_sizes[r]=e.readUint8();else if(16===this.field_size)for(r=0;r<n;r++)this.sample_sizes[r]=e.readUint16();else t.error("BoxParser","Error in length field in stz2 box")}),l.createFullBoxCtor("subs","SubSampleInformationBox",function(e){var t,r,n,i;for(n=e.readUint32(),this.entries=[],t=0;t<n;t++){var s={};if(this.entries[t]=s,s.sample_delta=e.readUint32(),s.subsamples=[],(i=e.readUint16())>0)for(r=0;r<i;r++){var o={};s.subsamples.push(o),1==this.version?o.size=e.readUint32():o.size=e.readUint16(),o.priority=e.readUint8(),o.discardable=e.readUint8(),o.codec_specific_parameters=e.readUint32()}}}),l.createFullBoxCtor("tenc","TrackEncryptionBox",function(e){if(e.readUint8(),0===this.version)e.readUint8();else{var t=e.readUint8();this.default_crypt_byte_block=t>>4&15,this.default_skip_byte_block=15&t}this.default_isProtected=e.readUint8(),this.default_Per_Sample_IV_Size=e.readUint8(),this.default_KID=l.parseHex16(e),1===this.default_isProtected&&0===this.default_Per_Sample_IV_Size&&(this.default_constant_IV_size=e.readUint8(),this.default_constant_IV=e.readUint8Array(this.default_constant_IV_size))}),l.createFullBoxCtor("tfdt","TrackFragmentBaseMediaDecodeTimeBox",function(e){1==this.version?this.baseMediaDecodeTime=e.readUint64():this.baseMediaDecodeTime=e.readUint32()}),l.createFullBoxCtor("tfhd","TrackFragmentHeaderBox",function(e){var t=0;this.track_id=e.readUint32(),this.size-this.hdr_size>t&&this.flags&l.TFHD_FLAG_BASE_DATA_OFFSET?(this.base_data_offset=e.readUint64(),t+=8):this.base_data_offset=0,this.size-this.hdr_size>t&&this.flags&l.TFHD_FLAG_SAMPLE_DESC?(this.default_sample_description_index=e.readUint32(),t+=4):this.default_sample_description_index=0,this.size-this.hdr_size>t&&this.flags&l.TFHD_FLAG_SAMPLE_DUR?(this.default_sample_duration=e.readUint32(),t+=4):this.default_sample_duration=0,this.size-this.hdr_size>t&&this.flags&l.TFHD_FLAG_SAMPLE_SIZE?(this.default_sample_size=e.readUint32(),t+=4):this.default_sample_size=0,this.size-this.hdr_size>t&&this.flags&l.TFHD_FLAG_SAMPLE_FLAGS?(this.default_sample_flags=e.readUint32(),t+=4):this.default_sample_flags=0}),l.createFullBoxCtor("tfra","TrackFragmentRandomAccessBox",function(e){this.track_ID=e.readUint32(),e.readUint24();var t=e.readUint8();this.length_size_of_traf_num=t>>4&3,this.length_size_of_trun_num=t>>2&3,this.length_size_of_sample_num=3&t,this.entries=[];for(var r=e.readUint32(),n=0;n<r;n++)1===this.version?(this.time=e.readUint64(),this.moof_offset=e.readUint64()):(this.time=e.readUint32(),this.moof_offset=e.readUint32()),this.traf_number=e["readUint"+8*(this.length_size_of_traf_num+1)](),this.trun_number=e["readUint"+8*(this.length_size_of_trun_num+1)](),this.sample_number=e["readUint"+8*(this.length_size_of_sample_num+1)]()}),l.createFullBoxCtor("tkhd","TrackHeaderBox",function(e){1==this.version?(this.creation_time=e.readUint64(),this.modification_time=e.readUint64(),this.track_id=e.readUint32(),e.readUint32(),this.duration=e.readUint64()):(this.creation_time=e.readUint32(),this.modification_time=e.readUint32(),this.track_id=e.readUint32(),e.readUint32(),this.duration=e.readUint32()),e.readUint32Array(2),this.layer=e.readInt16(),this.alternate_group=e.readInt16(),this.volume=e.readInt16()>>8,e.readUint16(),this.matrix=e.readInt32Array(9),this.width=e.readUint32(),this.height=e.readUint32()}),l.createBoxCtor("tmax","hintmaxrelativetime",function(e){this.time=e.readUint32()}),l.createBoxCtor("tmin","hintminrelativetime",function(e){this.time=e.readUint32()}),l.createBoxCtor("totl","hintBytesSent",function(e){this.bytessent=e.readUint32()}),l.createBoxCtor("tpay","hintBytesSent",function(e){this.bytessent=e.readUint32()}),l.createBoxCtor("tpyl","hintBytesSent",function(e){this.bytessent=e.readUint64()}),l.TrackGroupTypeBox.prototype.parse=function(e){this.parseFullHeader(e),this.track_group_id=e.readUint32()},l.createTrackGroupCtor("msrc"),l.TrackReferenceTypeBox=function(e,t,r,n){l.Box.call(this,e,t),this.hdr_size=r,this.start=n},l.TrackReferenceTypeBox.prototype=new l.Box,l.TrackReferenceTypeBox.prototype.parse=function(e){this.track_ids=e.readUint32Array((this.size-this.hdr_size)/4)},l.trefBox.prototype.parse=function(e){for(var r,n;e.getPosition()<this.start+this.size;){if((r=l.parseOneBox(e,!0,this.size-(e.getPosition()-this.start))).code!==l.OK)return;(n=new l.TrackReferenceTypeBox(r.type,r.size,r.hdr_size,r.start)).write===l.Box.prototype.write&&"mdat"!==n.type&&(t.info("BoxParser","TrackReference "+n.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),n.parseDataAndRewind(e)),n.parse(e),this.boxes.push(n)}},l.createFullBoxCtor("trep","TrackExtensionPropertiesBox",function(e){for(this.track_ID=e.readUint32(),this.boxes=[];e.getPosition()<this.start+this.size;){if(ret=l.parseOneBox(e,!1,this.size-(e.getPosition()-this.start)),ret.code!==l.OK)return;box=ret.box,this.boxes.push(box)}}),l.createFullBoxCtor("trex","TrackExtendsBox",function(e){this.track_id=e.readUint32(),this.default_sample_description_index=e.readUint32(),this.default_sample_duration=e.readUint32(),this.default_sample_size=e.readUint32(),this.default_sample_flags=e.readUint32()}),l.createBoxCtor("trpy","hintBytesSent",function(e){this.bytessent=e.readUint64()}),l.createFullBoxCtor("trun","TrackRunBox",function(e){var t=0;if(this.sample_count=e.readUint32(),t+=4,this.size-this.hdr_size>t&&this.flags&l.TRUN_FLAGS_DATA_OFFSET?(this.data_offset=e.readInt32(),t+=4):this.data_offset=0,this.size-this.hdr_size>t&&this.flags&l.TRUN_FLAGS_FIRST_FLAG?(this.first_sample_flags=e.readUint32(),t+=4):this.first_sample_flags=0,this.sample_duration=[],this.sample_size=[],this.sample_flags=[],this.sample_composition_time_offset=[],this.size-this.hdr_size>t)for(var r=0;r<this.sample_count;r++)this.flags&l.TRUN_FLAGS_DURATION&&(this.sample_duration[r]=e.readUint32()),this.flags&l.TRUN_FLAGS_SIZE&&(this.sample_size[r]=e.readUint32()),this.flags&l.TRUN_FLAGS_FLAGS&&(this.sample_flags[r]=e.readUint32()),this.flags&l.TRUN_FLAGS_CTS_OFFSET&&(0===this.version?this.sample_composition_time_offset[r]=e.readUint32():this.sample_composition_time_offset[r]=e.readInt32())}),l.createFullBoxCtor("tsel","TrackSelectionBox",function(e){this.switch_group=e.readUint32();var t=(this.size-this.hdr_size-4)/4;this.attribute_list=[];for(var r=0;r<t;r++)this.attribute_list[r]=e.readUint32()}),l.createFullBoxCtor("txtC","TextConfigBox",function(e){this.config=e.readCString()}),l.createBoxCtor("tyco","TypeCombinationBox",function(e){var t=(this.size-this.hdr_size)/4;this.compatible_brands=[];for(var r=0;r<t;r++)this.compatible_brands[r]=e.readString(4)}),l.createFullBoxCtor("udes","UserDescriptionProperty",function(e){this.lang=e.readCString(),this.name=e.readCString(),this.description=e.readCString(),this.tags=e.readCString()}),l.createFullBoxCtor("uncC","UncompressedFrameConfigBox",function(e){var t;if(this.profile=e.readString(4),1==this.version);else if(0==this.version){for(this.component_count=e.readUint32(),this.component_index=[],this.component_bit_depth_minus_one=[],this.component_format=[],this.component_align_size=[],t=0;t<this.component_count;t++)this.component_index.push(e.readUint16()),this.component_bit_depth_minus_one.push(e.readUint8()),this.component_format.push(e.readUint8()),this.component_align_size.push(e.readUint8());this.sampling_type=e.readUint8(),this.interleave_type=e.readUint8(),this.block_size=e.readUint8();var r=e.readUint8();this.component_little_endian=r>>7&1,this.block_pad_lsb=r>>6&1,this.block_little_endian=r>>5&1,this.block_reversed=r>>4&1,this.pad_unknown=r>>3&1,this.pixel_size=e.readUint32(),this.row_align_size=e.readUint32(),this.tile_align_size=e.readUint32(),this.num_tile_cols_minus_one=e.readUint32(),this.num_tile_rows_minus_one=e.readUint32()}}),l.createFullBoxCtor("url ","DataEntryUrlBox",function(e){1!==this.flags&&(this.location=e.readCString())}),l.createFullBoxCtor("urn ","DataEntryUrnBox",function(e){this.name=e.readCString(),this.size-this.hdr_size-this.name.length-1>0&&(this.location=e.readCString())}),l.createUUIDBox("a5d40b30e81411ddba2f0800200c9a66","LiveServerManifestBox",!0,!1,function(e){this.LiveServerManifest=e.readString(this.size-this.hdr_size).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}),l.createUUIDBox("d08a4f1810f34a82b6c832d8aba183d3","PiffProtectionSystemSpecificHeaderBox",!0,!1,function(e){this.system_id=l.parseHex16(e);var t=e.readUint32();t>0&&(this.data=e.readUint8Array(t))}),l.createUUIDBox("a2394f525a9b4f14a2446c427c648df4","PiffSampleEncryptionBox",!0,!1),l.createUUIDBox("8974dbce7be74c5184f97148f9882554","PiffTrackEncryptionBox",!0,!1,function(e){this.default_AlgorithmID=e.readUint24(),this.default_IV_size=e.readUint8(),this.default_KID=l.parseHex16(e)}),l.createUUIDBox("d4807ef2ca3946958e5426cb9e46a79f","TfrfBox",!0,!1,function(e){this.fragment_count=e.readUint8(),this.entries=[];for(var t=0;t<this.fragment_count;t++){var r={},n=0,i=0;1===this.version?(n=e.readUint64(),i=e.readUint64()):(n=e.readUint32(),i=e.readUint32()),r.absolute_time=n,r.absolute_duration=i,this.entries.push(r)}}),l.createUUIDBox("6d1d9b0542d544e680e2141daff757b2","TfxdBox",!0,!1,function(e){1===this.version?(this.absolute_time=e.readUint64(),this.duration=e.readUint64()):(this.absolute_time=e.readUint32(),this.duration=e.readUint32())}),l.createFullBoxCtor("vmhd","VideoMediaHeaderBox",function(e){this.graphicsmode=e.readUint16(),this.opcolor=e.readUint16Array(3)}),l.createFullBoxCtor("vpcC","VPCodecConfigurationRecord",function(e){var t;1===this.version?(this.profile=e.readUint8(),this.level=e.readUint8(),t=e.readUint8(),this.bitDepth=t>>4,this.chromaSubsampling=t>>1&7,this.videoFullRangeFlag=1&t,this.colourPrimaries=e.readUint8(),this.transferCharacteristics=e.readUint8(),this.matrixCoefficients=e.readUint8(),this.codecIntializationDataSize=e.readUint16(),this.codecIntializationData=e.readUint8Array(this.codecIntializationDataSize)):(this.profile=e.readUint8(),this.level=e.readUint8(),t=e.readUint8(),this.bitDepth=t>>4&15,this.colorSpace=15&t,t=e.readUint8(),this.chromaSubsampling=t>>4&15,this.transferFunction=t>>1&7,this.videoFullRangeFlag=1&t,this.codecIntializationDataSize=e.readUint16(),this.codecIntializationData=e.readUint8Array(this.codecIntializationDataSize))}),l.createBoxCtor("vttC","WebVTTConfigurationBox",function(e){this.text=e.readString(this.size-this.hdr_size)}),l.createFullBoxCtor("vvcC","VvcConfigurationBox",function(e){var t,r,n={held_bits:void 0,num_held_bits:0,stream_read_1_bytes:function(e){this.held_bits=e.readUint8(),this.num_held_bits=8},stream_read_2_bytes:function(e){this.held_bits=e.readUint16(),this.num_held_bits=16},extract_bits:function(e){var t=this.held_bits>>this.num_held_bits-e&(1<<e)-1;return this.num_held_bits-=e,t}};if(n.stream_read_1_bytes(e),n.extract_bits(5),this.lengthSizeMinusOne=n.extract_bits(2),this.ptl_present_flag=n.extract_bits(1),this.ptl_present_flag){if(n.stream_read_2_bytes(e),this.ols_idx=n.extract_bits(9),this.num_sublayers=n.extract_bits(3),this.constant_frame_rate=n.extract_bits(2),this.chroma_format_idc=n.extract_bits(2),n.stream_read_1_bytes(e),this.bit_depth_minus8=n.extract_bits(3),n.extract_bits(5),n.stream_read_2_bytes(e),n.extract_bits(2),this.num_bytes_constraint_info=n.extract_bits(6),this.general_profile_idc=n.extract_bits(7),this.general_tier_flag=n.extract_bits(1),this.general_level_idc=e.readUint8(),n.stream_read_1_bytes(e),this.ptl_frame_only_constraint_flag=n.extract_bits(1),this.ptl_multilayer_enabled_flag=n.extract_bits(1),this.general_constraint_info=new Uint8Array(this.num_bytes_constraint_info),this.num_bytes_constraint_info){for(t=0;t<this.num_bytes_constraint_info-1;t++){var i=n.extract_bits(6);n.stream_read_1_bytes(e);var s=n.extract_bits(2);this.general_constraint_info[t]=i<<2|s}this.general_constraint_info[this.num_bytes_constraint_info-1]=n.extract_bits(6)}else n.extract_bits(6);if(this.num_sublayers>1){for(n.stream_read_1_bytes(e),this.ptl_sublayer_present_mask=0,r=this.num_sublayers-2;r>=0;--r){var o=n.extract_bits(1);this.ptl_sublayer_present_mask|=o<<r}for(r=this.num_sublayers;r<=8&&this.num_sublayers>1;++r)n.extract_bits(1);for(this.sublayer_level_idc=[],r=this.num_sublayers-2;r>=0;--r)this.ptl_sublayer_present_mask&1<<r&&(this.sublayer_level_idc[r]=e.readUint8())}if(this.ptl_num_sub_profiles=e.readUint8(),this.general_sub_profile_idc=[],this.ptl_num_sub_profiles)for(t=0;t<this.ptl_num_sub_profiles;t++)this.general_sub_profile_idc.push(e.readUint32());this.max_picture_width=e.readUint16(),this.max_picture_height=e.readUint16(),this.avg_frame_rate=e.readUint16()}this.nalu_arrays=[];var a=e.readUint8();for(t=0;t<a;t++){var l=[];this.nalu_arrays.push(l),n.stream_read_1_bytes(e),l.completeness=n.extract_bits(1),n.extract_bits(2),l.nalu_type=n.extract_bits(5);var u=1;for(13!=l.nalu_type&&12!=l.nalu_type&&(u=e.readUint16()),r=0;r<u;r++){var c=e.readUint16();l.push({data:e.readUint8Array(c),length:c})}}}),l.createFullBoxCtor("vvnC","VvcNALUConfigBox",function(e){var t=strm.readUint8();this.lengthSizeMinusOne=3&t}),l.SampleEntry.prototype.isVideo=function(){return!1},l.SampleEntry.prototype.isAudio=function(){return!1},l.SampleEntry.prototype.isSubtitle=function(){return!1},l.SampleEntry.prototype.isMetadata=function(){return!1},l.SampleEntry.prototype.isHint=function(){return!1},l.SampleEntry.prototype.getCodec=function(){return this.type.replace(".","")},l.SampleEntry.prototype.getWidth=function(){return""},l.SampleEntry.prototype.getHeight=function(){return""},l.SampleEntry.prototype.getChannelCount=function(){return""},l.SampleEntry.prototype.getSampleRate=function(){return""},l.SampleEntry.prototype.getSampleSize=function(){return""},l.VisualSampleEntry.prototype.isVideo=function(){return!0},l.VisualSampleEntry.prototype.getWidth=function(){return this.width},l.VisualSampleEntry.prototype.getHeight=function(){return this.height},l.AudioSampleEntry.prototype.isAudio=function(){return!0},l.AudioSampleEntry.prototype.getChannelCount=function(){return this.channel_count},l.AudioSampleEntry.prototype.getSampleRate=function(){return this.samplerate},l.AudioSampleEntry.prototype.getSampleSize=function(){return this.samplesize},l.SubtitleSampleEntry.prototype.isSubtitle=function(){return!0},l.MetadataSampleEntry.prototype.isMetadata=function(){return!0},l.decimalToHex=function(e,t){var r=Number(e).toString(16);for(t=null==t?t=2:t;r.length<t;)r="0"+r;return r},l.avc1SampleEntry.prototype.getCodec=l.avc2SampleEntry.prototype.getCodec=l.avc3SampleEntry.prototype.getCodec=l.avc4SampleEntry.prototype.getCodec=function(){var e=l.SampleEntry.prototype.getCodec.call(this);return this.avcC?e+"."+l.decimalToHex(this.avcC.AVCProfileIndication)+l.decimalToHex(this.avcC.profile_compatibility)+l.decimalToHex(this.avcC.AVCLevelIndication):e},l.hev1SampleEntry.prototype.getCodec=l.hvc1SampleEntry.prototype.getCodec=function(){var e,t=l.SampleEntry.prototype.getCodec.call(this);if(this.hvcC){switch(t+=".",this.hvcC.general_profile_space){case 0:t+="";break;case 1:t+="A";break;case 2:t+="B";break;case 3:t+="C"}t+=this.hvcC.general_profile_idc,t+=".";var r=this.hvcC.general_profile_compatibility,n=0;for(e=0;e<32&&(n|=1&r,31!=e);e++)n<<=1,r>>=1;t+=l.decimalToHex(n,0),t+=".",0===this.hvcC.general_tier_flag?t+="L":t+="H",t+=this.hvcC.general_level_idc;var i=!1,s="";for(e=5;e>=0;e--)(this.hvcC.general_constraint_indicator[e]||i)&&(s="."+l.decimalToHex(this.hvcC.general_constraint_indicator[e],0)+s,i=!0);t+=s}return t},l.vvc1SampleEntry.prototype.getCodec=l.vvi1SampleEntry.prototype.getCodec=function(){var e,t=l.SampleEntry.prototype.getCodec.call(this);if(this.vvcC){t+="."+this.vvcC.general_profile_idc,this.vvcC.general_tier_flag?t+=".H":t+=".L",t+=this.vvcC.general_level_idc;var r="";if(this.vvcC.general_constraint_info){var n,i=[],s=0;for(s|=this.vvcC.ptl_frame_only_constraint<<7,s|=this.vvcC.ptl_multilayer_enabled<<6,e=0;e<this.vvcC.general_constraint_info.length;++e)s|=this.vvcC.general_constraint_info[e]>>2&63,i.push(s),s&&(n=e),s=this.vvcC.general_constraint_info[e]>>2&3;if(void 0===n)r=".CA";else{r=".C";var o="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",a=0,u=0;for(e=0;e<=n;++e)for(a=a<<8|i[e],u+=8;u>=5;)r+=o[a>>u-5&31],a&=(1<<(u-=5))-1;u&&(r+=o[31&(a<<=5-u)])}}t+=r}return t},l.mp4aSampleEntry.prototype.getCodec=function(){var e=l.SampleEntry.prototype.getCodec.call(this);if(this.esds&&this.esds.esd){var t=this.esds.esd.getOTI(),r=this.esds.esd.getAudioConfig();return e+"."+l.decimalToHex(t)+(r?"."+r:"")}return e},l.stxtSampleEntry.prototype.getCodec=function(){var e=l.SampleEntry.prototype.getCodec.call(this);return this.mime_format?e+"."+this.mime_format:e},l.vp08SampleEntry.prototype.getCodec=l.vp09SampleEntry.prototype.getCodec=function(){var e=l.SampleEntry.prototype.getCodec.call(this),t=this.vpcC.level;0==t&&(t="00");var r=this.vpcC.bitDepth;return 8==r&&(r="08"),e+".0"+this.vpcC.profile+"."+t+"."+r},l.av01SampleEntry.prototype.getCodec=function(){var e,t=l.SampleEntry.prototype.getCodec.call(this),r=this.av1C.seq_level_idx_0;return r<10&&(r="0"+r),2===this.av1C.seq_profile&&1===this.av1C.high_bitdepth?e=1===this.av1C.twelve_bit?"12":"10":this.av1C.seq_profile<=2&&(e=1===this.av1C.high_bitdepth?"10":"08"),t+"."+this.av1C.seq_profile+"."+r+(this.av1C.seq_tier_0?"H":"M")+"."+e},l.Box.prototype.writeHeader=function(e,r){this.size+=8,this.size>s&&(this.size+=8),"uuid"===this.type&&(this.size+=16),t.debug("BoxWriter","Writing box "+this.type+" of size: "+this.size+" at position "+e.getPosition()+(r||"")),this.size>s?e.writeUint32(1):(this.sizePosition=e.getPosition(),e.writeUint32(this.size)),e.writeString(this.type,null,4),"uuid"===this.type&&e.writeUint8Array(this.uuid),this.size>s&&e.writeUint64(this.size)},l.FullBox.prototype.writeHeader=function(e){this.size+=4,l.Box.prototype.writeHeader.call(this,e," v="+this.version+" f="+this.flags),e.writeUint8(this.version),e.writeUint24(this.flags)},l.Box.prototype.write=function(e){"mdat"===this.type?this.data&&(this.size=this.data.length,this.writeHeader(e),e.writeUint8Array(this.data)):(this.size=this.data?this.data.length:0,this.writeHeader(e),this.data&&e.writeUint8Array(this.data))},l.ContainerBox.prototype.write=function(e){this.size=0,this.writeHeader(e);for(var r=0;r<this.boxes.length;r++)this.boxes[r]&&(this.boxes[r].write(e),this.size+=this.boxes[r].size);t.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},l.TrackReferenceTypeBox.prototype.write=function(e){this.size=4*this.track_ids.length,this.writeHeader(e),e.writeUint32Array(this.track_ids)},l.avcCBox.prototype.write=function(e){var t;for(this.size=7,t=0;t<this.SPS.length;t++)this.size+=2+this.SPS[t].length;for(t=0;t<this.PPS.length;t++)this.size+=2+this.PPS[t].length;for(this.ext&&(this.size+=this.ext.length),this.writeHeader(e),e.writeUint8(this.configurationVersion),e.writeUint8(this.AVCProfileIndication),e.writeUint8(this.profile_compatibility),e.writeUint8(this.AVCLevelIndication),e.writeUint8(this.lengthSizeMinusOne+252),e.writeUint8(this.SPS.length+224),t=0;t<this.SPS.length;t++)e.writeUint16(this.SPS[t].length),e.writeUint8Array(this.SPS[t].nalu);for(e.writeUint8(this.PPS.length),t=0;t<this.PPS.length;t++)e.writeUint16(this.PPS[t].length),e.writeUint8Array(this.PPS[t].nalu);this.ext&&e.writeUint8Array(this.ext)},l.co64Box.prototype.write=function(e){var t;for(this.version=0,this.flags=0,this.size=4+8*this.chunk_offsets.length,this.writeHeader(e),e.writeUint32(this.chunk_offsets.length),t=0;t<this.chunk_offsets.length;t++)e.writeUint64(this.chunk_offsets[t])},l.cslgBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=20,this.writeHeader(e),e.writeInt32(this.compositionToDTSShift),e.writeInt32(this.leastDecodeToDisplayDelta),e.writeInt32(this.greatestDecodeToDisplayDelta),e.writeInt32(this.compositionStartTime),e.writeInt32(this.compositionEndTime)},l.cttsBox.prototype.write=function(e){var t;for(this.version=0,this.flags=0,this.size=4+8*this.sample_counts.length,this.writeHeader(e),e.writeUint32(this.sample_counts.length),t=0;t<this.sample_counts.length;t++)e.writeUint32(this.sample_counts[t]),1===this.version?e.writeInt32(this.sample_offsets[t]):e.writeUint32(this.sample_offsets[t])},l.drefBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4,this.writeHeader(e),e.writeUint32(this.entries.length);for(var r=0;r<this.entries.length;r++)this.entries[r].write(e),this.size+=this.entries[r].size;t.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},l.elngBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=this.extended_language.length,this.writeHeader(e),e.writeString(this.extended_language)},l.elstBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4+12*this.entries.length,this.writeHeader(e),e.writeUint32(this.entries.length);for(var t=0;t<this.entries.length;t++){var r=this.entries[t];e.writeUint32(r.segment_duration),e.writeInt32(r.media_time),e.writeInt16(r.media_rate_integer),e.writeInt16(r.media_rate_fraction)}},l.emsgBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=16+this.message_data.length+(this.scheme_id_uri.length+1)+(this.value.length+1),this.writeHeader(e),e.writeCString(this.scheme_id_uri),e.writeCString(this.value),e.writeUint32(this.timescale),e.writeUint32(this.presentation_time_delta),e.writeUint32(this.event_duration),e.writeUint32(this.id),e.writeUint8Array(this.message_data)},l.ftypBox.prototype.write=function(e){this.size=8+4*this.compatible_brands.length,this.writeHeader(e),e.writeString(this.major_brand,null,4),e.writeUint32(this.minor_version);for(var t=0;t<this.compatible_brands.length;t++)e.writeString(this.compatible_brands[t],null,4)},l.hdlrBox.prototype.write=function(e){this.size=20+this.name.length+1,this.version=0,this.flags=0,this.writeHeader(e),e.writeUint32(0),e.writeString(this.handler,null,4),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeCString(this.name)},l.hvcCBox.prototype.write=function(e){var t,r;for(this.size=23,t=0;t<this.nalu_arrays.length;t++)for(this.size+=3,r=0;r<this.nalu_arrays[t].length;r++)this.size+=2+this.nalu_arrays[t][r].data.length;for(this.writeHeader(e),e.writeUint8(this.configurationVersion),e.writeUint8((this.general_profile_space<<6)+(this.general_tier_flag<<5)+this.general_profile_idc),e.writeUint32(this.general_profile_compatibility),e.writeUint8Array(this.general_constraint_indicator),e.writeUint8(this.general_level_idc),e.writeUint16(this.min_spatial_segmentation_idc+(15<<24)),e.writeUint8(this.parallelismType+252),e.writeUint8(this.chroma_format_idc+252),e.writeUint8(this.bit_depth_luma_minus8+248),e.writeUint8(this.bit_depth_chroma_minus8+248),e.writeUint16(this.avgFrameRate),e.writeUint8((this.constantFrameRate<<6)+(this.numTemporalLayers<<3)+(this.temporalIdNested<<2)+this.lengthSizeMinusOne),e.writeUint8(this.nalu_arrays.length),t=0;t<this.nalu_arrays.length;t++)for(e.writeUint8((this.nalu_arrays[t].completeness<<7)+this.nalu_arrays[t].nalu_type),e.writeUint16(this.nalu_arrays[t].length),r=0;r<this.nalu_arrays[t].length;r++)e.writeUint16(this.nalu_arrays[t][r].data.length),e.writeUint8Array(this.nalu_arrays[t][r].data)},l.kindBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=this.schemeURI.length+1+(this.value.length+1),this.writeHeader(e),e.writeCString(this.schemeURI),e.writeCString(this.value)},l.mdhdBox.prototype.write=function(e){this.size=20,this.flags=0,this.version=0,this.writeHeader(e),e.writeUint32(this.creation_time),e.writeUint32(this.modification_time),e.writeUint32(this.timescale),e.writeUint32(this.duration),e.writeUint16(this.language),e.writeUint16(0)},l.mehdBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4,this.writeHeader(e),e.writeUint32(this.fragment_duration)},l.mfhdBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4,this.writeHeader(e),e.writeUint32(this.sequence_number)},l.mvhdBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=96,this.writeHeader(e),e.writeUint32(this.creation_time),e.writeUint32(this.modification_time),e.writeUint32(this.timescale),e.writeUint32(this.duration),e.writeUint32(this.rate),e.writeUint16(this.volume<<8),e.writeUint16(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32Array(this.matrix),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(this.next_track_id)},l.SampleEntry.prototype.writeHeader=function(e){this.size=8,l.Box.prototype.writeHeader.call(this,e),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint16(this.data_reference_index)},l.SampleEntry.prototype.writeFooter=function(e){for(var r=0;r<this.boxes.length;r++)this.boxes[r].write(e),this.size+=this.boxes[r].size;t.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},l.SampleEntry.prototype.write=function(e){this.writeHeader(e),e.writeUint8Array(this.data),this.size+=this.data.length,t.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},l.VisualSampleEntry.prototype.write=function(e){this.writeHeader(e),this.size+=70,e.writeUint16(0),e.writeUint16(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint16(this.width),e.writeUint16(this.height),e.writeUint32(this.horizresolution),e.writeUint32(this.vertresolution),e.writeUint32(0),e.writeUint16(this.frame_count),e.writeUint8(Math.min(31,this.compressorname.length)),e.writeString(this.compressorname,null,31),e.writeUint16(this.depth),e.writeInt16(-1),this.writeFooter(e)},l.AudioSampleEntry.prototype.write=function(e){this.writeHeader(e),this.size+=20,e.writeUint32(0),e.writeUint32(0),e.writeUint16(this.channel_count),e.writeUint16(this.samplesize),e.writeUint16(0),e.writeUint16(0),e.writeUint32(this.samplerate<<16),this.writeFooter(e)},l.stppSampleEntry.prototype.write=function(e){this.writeHeader(e),this.size+=this.namespace.length+1+this.schema_location.length+1+this.auxiliary_mime_types.length+1,e.writeCString(this.namespace),e.writeCString(this.schema_location),e.writeCString(this.auxiliary_mime_types),this.writeFooter(e)},l.SampleGroupEntry.prototype.write=function(e){e.writeUint8Array(this.data)},l.sbgpBox.prototype.write=function(e){this.version=1,this.flags=0,this.size=12+8*this.entries.length,this.writeHeader(e),e.writeString(this.grouping_type,null,4),e.writeUint32(this.grouping_type_parameter),e.writeUint32(this.entries.length);for(var t=0;t<this.entries.length;t++){var r=this.entries[t];e.writeInt32(r.sample_count),e.writeInt32(r.group_description_index)}},l.sgpdBox.prototype.write=function(e){var t,r;for(this.flags=0,this.size=12,t=0;t<this.entries.length;t++)r=this.entries[t],1===this.version&&(0===this.default_length&&(this.size+=4),this.size+=r.data.length);for(this.writeHeader(e),e.writeString(this.grouping_type,null,4),1===this.version&&e.writeUint32(this.default_length),this.version>=2&&e.writeUint32(this.default_sample_description_index),e.writeUint32(this.entries.length),t=0;t<this.entries.length;t++)r=this.entries[t],1===this.version&&0===this.default_length&&e.writeUint32(r.description_length),r.write(e)},l.sidxBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=20+12*this.references.length,this.writeHeader(e),e.writeUint32(this.reference_ID),e.writeUint32(this.timescale),e.writeUint32(this.earliest_presentation_time),e.writeUint32(this.first_offset),e.writeUint16(0),e.writeUint16(this.references.length);for(var t=0;t<this.references.length;t++){var r=this.references[t];e.writeUint32(r.reference_type<<31|r.referenced_size),e.writeUint32(r.subsegment_duration),e.writeUint32(r.starts_with_SAP<<31|r.SAP_type<<28|r.SAP_delta_time)}},l.smhdBox.prototype.write=function(e){this.version=0,this.flags=1,this.size=4,this.writeHeader(e),e.writeUint16(this.balance),e.writeUint16(0)},l.stcoBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4+4*this.chunk_offsets.length,this.writeHeader(e),e.writeUint32(this.chunk_offsets.length),e.writeUint32Array(this.chunk_offsets)},l.stscBox.prototype.write=function(e){var t;for(this.version=0,this.flags=0,this.size=4+12*this.first_chunk.length,this.writeHeader(e),e.writeUint32(this.first_chunk.length),t=0;t<this.first_chunk.length;t++)e.writeUint32(this.first_chunk[t]),e.writeUint32(this.samples_per_chunk[t]),e.writeUint32(this.sample_description_index[t])},l.stsdBox.prototype.write=function(e){var r;for(this.version=0,this.flags=0,this.size=0,this.writeHeader(e),e.writeUint32(this.entries.length),this.size+=4,r=0;r<this.entries.length;r++)this.entries[r].write(e),this.size+=this.entries[r].size;t.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},l.stshBox.prototype.write=function(e){var t;for(this.version=0,this.flags=0,this.size=4+8*this.shadowed_sample_numbers.length,this.writeHeader(e),e.writeUint32(this.shadowed_sample_numbers.length),t=0;t<this.shadowed_sample_numbers.length;t++)e.writeUint32(this.shadowed_sample_numbers[t]),e.writeUint32(this.sync_sample_numbers[t])},l.stssBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4+4*this.sample_numbers.length,this.writeHeader(e),e.writeUint32(this.sample_numbers.length),e.writeUint32Array(this.sample_numbers)},l.stszBox.prototype.write=function(e){var t,r=!0;if(this.version=0,this.flags=0,this.sample_sizes.length>0)for(t=0;t+1<this.sample_sizes.length;){if(this.sample_sizes[t+1]!==this.sample_sizes[0]){r=!1;break}t++}else r=!1;this.size=8,r||(this.size+=4*this.sample_sizes.length),this.writeHeader(e),r?e.writeUint32(this.sample_sizes[0]):e.writeUint32(0),e.writeUint32(this.sample_sizes.length),r||e.writeUint32Array(this.sample_sizes)},l.sttsBox.prototype.write=function(e){var t;for(this.version=0,this.flags=0,this.size=4+8*this.sample_counts.length,this.writeHeader(e),e.writeUint32(this.sample_counts.length),t=0;t<this.sample_counts.length;t++)e.writeUint32(this.sample_counts[t]),e.writeUint32(this.sample_deltas[t])},l.tfdtBox.prototype.write=function(e){var t=Math.pow(2,32)-1;this.version=this.baseMediaDecodeTime>t?1:0,this.flags=0,this.size=4,1===this.version&&(this.size+=4),this.writeHeader(e),1===this.version?e.writeUint64(this.baseMediaDecodeTime):e.writeUint32(this.baseMediaDecodeTime)},l.tfhdBox.prototype.write=function(e){this.version=0,this.size=4,this.flags&l.TFHD_FLAG_BASE_DATA_OFFSET&&(this.size+=8),this.flags&l.TFHD_FLAG_SAMPLE_DESC&&(this.size+=4),this.flags&l.TFHD_FLAG_SAMPLE_DUR&&(this.size+=4),this.flags&l.TFHD_FLAG_SAMPLE_SIZE&&(this.size+=4),this.flags&l.TFHD_FLAG_SAMPLE_FLAGS&&(this.size+=4),this.writeHeader(e),e.writeUint32(this.track_id),this.flags&l.TFHD_FLAG_BASE_DATA_OFFSET&&e.writeUint64(this.base_data_offset),this.flags&l.TFHD_FLAG_SAMPLE_DESC&&e.writeUint32(this.default_sample_description_index),this.flags&l.TFHD_FLAG_SAMPLE_DUR&&e.writeUint32(this.default_sample_duration),this.flags&l.TFHD_FLAG_SAMPLE_SIZE&&e.writeUint32(this.default_sample_size),this.flags&l.TFHD_FLAG_SAMPLE_FLAGS&&e.writeUint32(this.default_sample_flags)},l.tkhdBox.prototype.write=function(e){this.version=0,this.size=80,this.writeHeader(e),e.writeUint32(this.creation_time),e.writeUint32(this.modification_time),e.writeUint32(this.track_id),e.writeUint32(0),e.writeUint32(this.duration),e.writeUint32(0),e.writeUint32(0),e.writeInt16(this.layer),e.writeInt16(this.alternate_group),e.writeInt16(this.volume<<8),e.writeUint16(0),e.writeInt32Array(this.matrix),e.writeUint32(this.width),e.writeUint32(this.height)},l.trexBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=20,this.writeHeader(e),e.writeUint32(this.track_id),e.writeUint32(this.default_sample_description_index),e.writeUint32(this.default_sample_duration),e.writeUint32(this.default_sample_size),e.writeUint32(this.default_sample_flags)},l.trunBox.prototype.write=function(e){this.version=0,this.size=4,this.flags&l.TRUN_FLAGS_DATA_OFFSET&&(this.size+=4),this.flags&l.TRUN_FLAGS_FIRST_FLAG&&(this.size+=4),this.flags&l.TRUN_FLAGS_DURATION&&(this.size+=4*this.sample_duration.length),this.flags&l.TRUN_FLAGS_SIZE&&(this.size+=4*this.sample_size.length),this.flags&l.TRUN_FLAGS_FLAGS&&(this.size+=4*this.sample_flags.length),this.flags&l.TRUN_FLAGS_CTS_OFFSET&&(this.size+=4*this.sample_composition_time_offset.length),this.writeHeader(e),e.writeUint32(this.sample_count),this.flags&l.TRUN_FLAGS_DATA_OFFSET&&(this.data_offset_position=e.getPosition(),e.writeInt32(this.data_offset)),this.flags&l.TRUN_FLAGS_FIRST_FLAG&&e.writeUint32(this.first_sample_flags);for(var t=0;t<this.sample_count;t++)this.flags&l.TRUN_FLAGS_DURATION&&e.writeUint32(this.sample_duration[t]),this.flags&l.TRUN_FLAGS_SIZE&&e.writeUint32(this.sample_size[t]),this.flags&l.TRUN_FLAGS_FLAGS&&e.writeUint32(this.sample_flags[t]),this.flags&l.TRUN_FLAGS_CTS_OFFSET&&(0===this.version?e.writeUint32(this.sample_composition_time_offset[t]):e.writeInt32(this.sample_composition_time_offset[t]))},l["url Box"].prototype.write=function(e){this.version=0,this.location?(this.flags=0,this.size=this.location.length+1):(this.flags=1,this.size=0),this.writeHeader(e),this.location&&e.writeCString(this.location)},l["urn Box"].prototype.write=function(e){this.version=0,this.flags=0,this.size=this.name.length+1+(this.location?this.location.length+1:0),this.writeHeader(e),e.writeCString(this.name),this.location&&e.writeCString(this.location)},l.vmhdBox.prototype.write=function(e){this.version=0,this.flags=1,this.size=8,this.writeHeader(e),e.writeUint16(this.graphicsmode),e.writeUint16Array(this.opcolor)},l.cttsBox.prototype.unpack=function(e){var t,r,n;for(n=0,t=0;t<this.sample_counts.length;t++)for(r=0;r<this.sample_counts[t];r++)e[n].pts=e[n].dts+this.sample_offsets[t],n++},l.sttsBox.prototype.unpack=function(e){var t,r,n;for(n=0,t=0;t<this.sample_counts.length;t++)for(r=0;r<this.sample_counts[t];r++)e[n].dts=0===n?0:e[n-1].dts+this.sample_deltas[t],n++},l.stcoBox.prototype.unpack=function(e){var t;for(t=0;t<this.chunk_offsets.length;t++)e[t].offset=this.chunk_offsets[t]},l.stscBox.prototype.unpack=function(e){var t,r,n,i,s;for(i=0,s=0,t=0;t<this.first_chunk.length;t++)for(r=0;r<(t+1<this.first_chunk.length?this.first_chunk[t+1]:1/0);r++)for(s++,n=0;n<this.samples_per_chunk[t];n++){if(!e[i])return;e[i].description_index=this.sample_description_index[t],e[i].chunk_index=s,i++}},l.stszBox.prototype.unpack=function(e){var t;for(t=0;t<this.sample_sizes.length;t++)e[t].size=this.sample_sizes[t]},l.DIFF_BOXES_PROP_NAMES=["boxes","entries","references","subsamples","items","item_infos","extents","associations","subsegments","ranges","seekLists","seekPoints","esd","levels"],l.DIFF_PRIMITIVE_ARRAY_PROP_NAMES=["compatible_brands","matrix","opcolor","sample_counts","sample_deltas","first_chunk","samples_per_chunk","sample_sizes","chunk_offsets","sample_offsets","sample_description_index","sample_duration"],l.boxEqualFields=function(e,t){if(e&&!t)return!1;var r;for(r in e)if(!(l.DIFF_BOXES_PROP_NAMES.indexOf(r)>-1||e[r]instanceof l.Box||t[r]instanceof l.Box||void 0===e[r]||void 0===t[r]||"function"==typeof e[r]||"function"==typeof t[r]||e.subBoxNames&&e.subBoxNames.indexOf(r.slice(0,4))>-1||t.subBoxNames&&t.subBoxNames.indexOf(r.slice(0,4))>-1||"data"===r||"start"===r||"size"===r||"creation_time"===r||"modification_time"===r||l.DIFF_PRIMITIVE_ARRAY_PROP_NAMES.indexOf(r)>-1||e[r]===t[r]))return!1;return!0},l.boxEqual=function(e,t){if(!l.boxEqualFields(e,t))return!1;for(var r=0;r<l.DIFF_BOXES_PROP_NAMES.length;r++){var n=l.DIFF_BOXES_PROP_NAMES[r];if(e[n]&&t[n]&&!l.boxEqual(e[n],t[n]))return!1}return!0};var h=function(){};h.prototype.parseSample=function(e){var t,n,i=new r(e.buffer);for(t=[];!i.isEos();)(n=l.parseOneBox(i,!1)).code===l.OK&&"vttc"===n.box.type&&t.push(n.box);return t},h.prototype.getText=function(e,t,r){function n(e,t,r){return r=r||"0",(e+="").length>=t?e:new Array(t-e.length+1).join(r)+e}function i(e){var t=Math.floor(e/3600),r=Math.floor((e-3600*t)/60),i=Math.floor(e-3600*t-60*r),s=Math.floor(1e3*(e-3600*t-60*r-i));return n(t,2)+":"+n(r,2)+":"+n(i,2)+"."+n(s,3)}for(var s=this.parseSample(r),o="",a=0;a<s.length;a++){var l=s[a];o+=i(e)+" --\x3e "+i(t)+"\r\n",o+=l.payl.text}return o};var f=function(){};f.prototype.parseSample=function(e){var t,n={resources:[]},i=new r(e.data.buffer);if(e.subsamples&&0!==e.subsamples.length){if(n.documentString=i.readString(e.subsamples[0].size),e.subsamples.length>1)for(t=1;t<e.subsamples.length;t++)n.resources[t]=i.readUint8Array(e.subsamples[t].size)}else n.documentString=i.readString(e.data.length);return"undefined"!=typeof DOMParser&&(n.document=(new DOMParser).parseFromString(n.documentString,"application/xml")),n};var p=function(){};p.prototype.parseSample=function(e){return new r(e.data.buffer).readString(e.data.length)},p.prototype.parseConfig=function(e){var t=new r(e.buffer);return t.readUint32(),t.readCString()},e.VTTin4Parser=h,e.XMLSubtitlein4Parser=f,e.Textin4Parser=p;var m=function(e){this.stream=e||new o,this.boxes=[],this.mdats=[],this.moofs=[],this.isProgressive=!1,this.moovStartFound=!1,this.onMoovStart=null,this.moovStartSent=!1,this.onReady=null,this.readySent=!1,this.onSegment=null,this.onSamples=null,this.onError=null,this.sampleListBuilt=!1,this.fragmentedTracks=[],this.extractedTracks=[],this.isFragmentationInitialized=!1,this.sampleProcessingStarted=!1,this.nextMoofNumber=0,this.itemListBuilt=!1,this.items=[],this.entity_groups=[],this.onSidx=null,this.sidxSent=!1};m.prototype.setSegmentOptions=function(e,t,r){var n=this.getTrackById(e);if(n){var i={};this.fragmentedTracks.push(i),i.id=e,i.user=t,i.trak=n,n.nextSample=0,i.segmentStream=null,i.nb_samples=1e3,i.rapAlignement=!0,r&&(r.nbSamples&&(i.nb_samples=r.nbSamples),r.rapAlignement&&(i.rapAlignement=r.rapAlignement))}},m.prototype.unsetSegmentOptions=function(e){for(var t=-1,r=0;r<this.fragmentedTracks.length;r++)this.fragmentedTracks[r].id==e&&(t=r);t>-1&&this.fragmentedTracks.splice(t,1)},m.prototype.setExtractionOptions=function(e,t,r){var n=this.getTrackById(e);if(n){var i={};this.extractedTracks.push(i),i.id=e,i.user=t,i.trak=n,n.nextSample=0,i.nb_samples=1e3,i.samples=[],r&&r.nbSamples&&(i.nb_samples=r.nbSamples)}},m.prototype.unsetExtractionOptions=function(e){for(var t=-1,r=0;r<this.extractedTracks.length;r++)this.extractedTracks[r].id==e&&(t=r);t>-1&&this.extractedTracks.splice(t,1)},m.prototype.parse=function(){var e,r;if(!this.restoreParsePosition||this.restoreParsePosition())for(;;){if(this.hasIncompleteMdat&&this.hasIncompleteMdat()){if(this.processIncompleteMdat())continue;return}if(this.saveParsePosition&&this.saveParsePosition(),(e=l.parseOneBox(this.stream,!1)).code===l.ERR_NOT_ENOUGH_DATA){if(this.processIncompleteBox){if(this.processIncompleteBox(e))continue;return}return}var n;switch(n="uuid"!==(r=e.box).type?r.type:r.uuid,this.boxes.push(r),n){case"mdat":this.mdats.push(r);break;case"moof":this.moofs.push(r);break;case"moov":this.moovStartFound=!0,0===this.mdats.length&&(this.isProgressive=!0);default:void 0!==this[n]&&t.warn("ISOFile","Duplicate Box of type: "+n+", overriding previous occurrence"),this[n]=r}this.updateUsedBytes&&this.updateUsedBytes(r,e)}},m.prototype.checkBuffer=function(e){if(null==e)throw"Buffer must be defined and non empty";if(void 0===e.fileStart)throw"Buffer must have a fileStart property";return 0===e.byteLength?(t.warn("ISOFile","Ignoring empty buffer (fileStart: "+e.fileStart+")"),this.stream.logBufferLevel(),!1):(t.info("ISOFile","Processing buffer (fileStart: "+e.fileStart+")"),e.usedBytes=0,this.stream.insertBuffer(e),this.stream.logBufferLevel(),!!this.stream.initialized()||(t.warn("ISOFile","Not ready to start parsing"),!1))},m.prototype.appendBuffer=function(e,r){var n;if(this.checkBuffer(e))return this.parse(),this.moovStartFound&&!this.moovStartSent&&(this.moovStartSent=!0,this.onMoovStart&&this.onMoovStart()),this.moov?(this.sampleListBuilt||(this.buildSampleLists(),this.sampleListBuilt=!0),this.updateSampleLists(),this.onReady&&!this.readySent&&(this.readySent=!0,this.onReady(this.getInfo())),this.processSamples(r),this.nextSeekPosition?(n=this.nextSeekPosition,this.nextSeekPosition=void 0):n=this.nextParsePosition,this.stream.getEndFilePositionAfter&&(n=this.stream.getEndFilePositionAfter(n))):n=this.nextParsePosition?this.nextParsePosition:0,this.sidx&&this.onSidx&&!this.sidxSent&&(this.onSidx(this.sidx),this.sidxSent=!0),this.meta&&(this.flattenItemInfo&&!this.itemListBuilt&&(this.flattenItemInfo(),this.itemListBuilt=!0),this.processItems&&this.processItems(this.onItem)),this.stream.cleanBuffers&&(t.info("ISOFile","Done processing buffer (fileStart: "+e.fileStart+") - next buffer to fetch should have a fileStart position of "+n),this.stream.logBufferLevel(),this.stream.cleanBuffers(),this.stream.logBufferLevel(!0),t.info("ISOFile","Sample data size in memory: "+this.getAllocatedSampleDataSize())),n},m.prototype.getInfo=function(){var e,t,r,n,i,s,o={},a=new Date("1904-01-01T00:00:00Z").getTime();if(this.moov)for(o.hasMoov=!0,o.duration=this.moov.mvhd.duration,o.timescale=this.moov.mvhd.timescale,o.isFragmented=null!=this.moov.mvex,o.isFragmented&&this.moov.mvex.mehd&&(o.fragment_duration=this.moov.mvex.mehd.fragment_duration),o.isProgressive=this.isProgressive,o.hasIOD=null!=this.moov.iods,o.brands=[],o.brands.push(this.ftyp.major_brand),o.brands=o.brands.concat(this.ftyp.compatible_brands),o.created=new Date(a+1e3*this.moov.mvhd.creation_time),o.modified=new Date(a+1e3*this.moov.mvhd.modification_time),o.tracks=[],o.audioTracks=[],o.videoTracks=[],o.subtitleTracks=[],o.metadataTracks=[],o.hintTracks=[],o.otherTracks=[],e=0;e<this.moov.traks.length;e++){if(s=(r=this.moov.traks[e]).mdia.minf.stbl.stsd.entries[0],n={},o.tracks.push(n),n.id=r.tkhd.track_id,n.name=r.mdia.hdlr.name,n.references=[],r.tref)for(t=0;t<r.tref.boxes.length;t++)i={},n.references.push(i),i.type=r.tref.boxes[t].type,i.track_ids=r.tref.boxes[t].track_ids;r.edts&&(n.edits=r.edts.elst.entries),n.created=new Date(a+1e3*r.tkhd.creation_time),n.modified=new Date(a+1e3*r.tkhd.modification_time),n.movie_duration=r.tkhd.duration,n.movie_timescale=o.timescale,n.layer=r.tkhd.layer,n.alternate_group=r.tkhd.alternate_group,n.volume=r.tkhd.volume,n.matrix=r.tkhd.matrix,n.track_width=r.tkhd.width/65536,n.track_height=r.tkhd.height/65536,n.timescale=r.mdia.mdhd.timescale,n.cts_shift=r.mdia.minf.stbl.cslg,n.duration=r.mdia.mdhd.duration,n.samples_duration=r.samples_duration,n.codec=s.getCodec(),n.kind=r.udta&&r.udta.kinds.length?r.udta.kinds[0]:{schemeURI:"",value:""},n.language=r.mdia.elng?r.mdia.elng.extended_language:r.mdia.mdhd.languageString,n.nb_samples=r.samples.length,n.size=r.samples_size,n.bitrate=8*n.size*n.timescale/n.samples_duration,s.isAudio()?(n.type="audio",o.audioTracks.push(n),n.audio={},n.audio.sample_rate=s.getSampleRate(),n.audio.channel_count=s.getChannelCount(),n.audio.sample_size=s.getSampleSize()):s.isVideo()?(n.type="video",o.videoTracks.push(n),n.video={},n.video.width=s.getWidth(),n.video.height=s.getHeight()):s.isSubtitle()?(n.type="subtitles",o.subtitleTracks.push(n)):s.isHint()?(n.type="metadata",o.hintTracks.push(n)):s.isMetadata()?(n.type="metadata",o.metadataTracks.push(n)):(n.type="metadata",o.otherTracks.push(n))}else o.hasMoov=!1;if(o.mime="",o.hasMoov&&o.tracks){for(o.videoTracks&&o.videoTracks.length>0?o.mime+='video/mp4; codecs="':o.audioTracks&&o.audioTracks.length>0?o.mime+='audio/mp4; codecs="':o.mime+='application/mp4; codecs="',e=0;e<o.tracks.length;e++)0!==e&&(o.mime+=","),o.mime+=o.tracks[e].codec;o.mime+='"; profiles="',o.mime+=this.ftyp.compatible_brands.join(),o.mime+='"'}return o},m.prototype.setNextSeekPositionFromSample=function(e){e&&(this.nextSeekPosition?this.nextSeekPosition=Math.min(e.offset+e.alreadyRead,this.nextSeekPosition):this.nextSeekPosition=e.offset+e.alreadyRead)},m.prototype.processSamples=function(e){var r,n;if(this.sampleProcessingStarted){if(this.isFragmentationInitialized&&null!==this.onSegment)for(r=0;r<this.fragmentedTracks.length;r++){var i=this.fragmentedTracks[r];for(n=i.trak;n.nextSample<n.samples.length&&this.sampleProcessingStarted;){t.debug("ISOFile","Creating media fragment on track #"+i.id+" for sample "+n.nextSample);var s=this.createFragment(i.id,n.nextSample,i.segmentStream);if(!s)break;if(i.segmentStream=s,n.nextSample++,(n.nextSample%i.nb_samples===0||e||n.nextSample>=n.samples.length)&&(t.info("ISOFile","Sending fragmented data on track #"+i.id+" for samples ["+Math.max(0,n.nextSample-i.nb_samples)+","+(n.nextSample-1)+"]"),t.info("ISOFile","Sample data size in memory: "+this.getAllocatedSampleDataSize()),this.onSegment&&this.onSegment(i.id,i.user,i.segmentStream.buffer,n.nextSample,e||n.nextSample>=n.samples.length),i.segmentStream=null,i!==this.fragmentedTracks[r]))break}}if(null!==this.onSamples)for(r=0;r<this.extractedTracks.length;r++){var o=this.extractedTracks[r];for(n=o.trak;n.nextSample<n.samples.length&&this.sampleProcessingStarted;){t.debug("ISOFile","Exporting on track #"+o.id+" sample #"+n.nextSample);var a=this.getSample(n,n.nextSample);if(!a){this.setNextSeekPositionFromSample(n.samples[n.nextSample]);break}if(n.nextSample++,o.samples.push(a),(n.nextSample%o.nb_samples===0||n.nextSample>=n.samples.length)&&(t.debug("ISOFile","Sending samples on track #"+o.id+" for sample "+n.nextSample),this.onSamples&&this.onSamples(o.id,o.user,o.samples),o.samples=[],o!==this.extractedTracks[r]))break}}}},m.prototype.getBox=function(e){var t=this.getBoxes(e,!0);return t.length?t[0]:null},m.prototype.getBoxes=function(e,t){var r=[];return m._sweep.call(this,e,r,t),r},m._sweep=function(e,t,r){for(var n in this.type&&this.type==e&&t.push(this),this.boxes){if(t.length&&r)return;m._sweep.call(this.boxes[n],e,t,r)}},m.prototype.getTrackSamplesInfo=function(e){var t=this.getTrackById(e);return t?t.samples:void 0},m.prototype.getTrackSample=function(e,t){var r=this.getTrackById(e);return this.getSample(r,t)},m.prototype.releaseUsedSamples=function(e,r){var n=0,i=this.getTrackById(e);i.lastValidSample||(i.lastValidSample=0);for(var s=i.lastValidSample;s<r;s++)n+=this.releaseSample(i,s);t.info("ISOFile","Track #"+e+" released samples up to "+r+" (released size: "+n+", remaining: "+this.samplesDataSize+")"),i.lastValidSample=r},m.prototype.start=function(){this.sampleProcessingStarted=!0,this.processSamples(!1)},m.prototype.stop=function(){this.sampleProcessingStarted=!1},m.prototype.flush=function(){t.info("ISOFile","Flushing remaining samples"),this.updateSampleLists(),this.processSamples(!0),this.stream.cleanBuffers(),this.stream.logBufferLevel(!0)},m.prototype.seekTrack=function(e,r,n){var i,s,o,a,l=0,u=0;if(0===n.samples.length)return t.info("ISOFile","No sample in track, cannot seek! Using time "+t.getDurationString(0,1)+" and offset: 0"),{offset:0,time:0};for(i=0;i<n.samples.length;i++){if(s=n.samples[i],0===i)u=0,a=s.timescale;else if(s.cts>e*s.timescale){u=i-1;break}r&&s.is_sync&&(l=i)}for(r&&(u=l),e=n.samples[u].cts,n.nextSample=u;n.samples[u].alreadyRead===n.samples[u].size&&n.samples[u+1];)u++;return o=n.samples[u].offset+n.samples[u].alreadyRead,t.info("ISOFile","Seeking to "+(r?"RAP":"")+" sample #"+n.nextSample+" on track "+n.tkhd.track_id+", time "+t.getDurationString(e,a)+" and offset: "+o),{offset:o,time:e/a}},m.prototype.getTrackDuration=function(e){var t;return e.samples?((t=e.samples[e.samples.length-1]).cts+t.duration)/t.timescale:1/0},m.prototype.seek=function(e,r){var n,i,s,o=this.moov,a={offset:1/0,time:1/0};if(this.moov){for(s=0;s<o.traks.length;s++)n=o.traks[s],e>this.getTrackDuration(n)||((i=this.seekTrack(e,r,n)).offset<a.offset&&(a.offset=i.offset),i.time<a.time&&(a.time=i.time));return t.info("ISOFile","Seeking at time "+t.getDurationString(a.time,1)+" needs a buffer with a fileStart position of "+a.offset),a.offset===1/0?a={offset:this.nextParsePosition,time:0}:a.offset=this.stream.getEndFilePositionAfter(a.offset),t.info("ISOFile","Adjusted seek position (after checking data already in buffer): "+a.offset),a}throw"Cannot seek: moov not received!"},m.prototype.equal=function(e){for(var t=0;t<this.boxes.length&&t<e.boxes.length;){var r=this.boxes[t],n=e.boxes[t];if(!l.boxEqual(r,n))return!1;t++}return!0},e.ISOFile=m,m.prototype.lastBoxStartPosition=0,m.prototype.parsingMdat=null,m.prototype.nextParsePosition=0,m.prototype.discardMdatData=!1,m.prototype.processIncompleteBox=function(e){var t;return"mdat"===e.type?(t=new l[e.type+"Box"](e.size),this.parsingMdat=t,this.boxes.push(t),this.mdats.push(t),t.start=e.start,t.hdr_size=e.hdr_size,this.stream.addUsedBytes(t.hdr_size),this.lastBoxStartPosition=t.start+t.size,this.stream.seek(t.start+t.size,!1,this.discardMdatData)?(this.parsingMdat=null,!0):(this.moovStartFound?this.nextParsePosition=this.stream.findEndContiguousBuf():this.nextParsePosition=t.start+t.size,!1)):("moov"===e.type&&(this.moovStartFound=!0,0===this.mdats.length&&(this.isProgressive=!0)),this.stream.mergeNextBuffer&&this.stream.mergeNextBuffer()?(this.nextParsePosition=this.stream.getEndPosition(),!0):(e.type?this.moovStartFound?this.nextParsePosition=this.stream.getEndPosition():this.nextParsePosition=this.stream.getPosition()+e.size:this.nextParsePosition=this.stream.getEndPosition(),!1))},m.prototype.hasIncompleteMdat=function(){return null!==this.parsingMdat},m.prototype.processIncompleteMdat=function(){var e;return e=this.parsingMdat,this.stream.seek(e.start+e.size,!1,this.discardMdatData)?(t.debug("ISOFile","Found 'mdat' end in buffered data"),this.parsingMdat=null,!0):(this.nextParsePosition=this.stream.findEndContiguousBuf(),!1)},m.prototype.restoreParsePosition=function(){return this.stream.seek(this.lastBoxStartPosition,!0,this.discardMdatData)},m.prototype.saveParsePosition=function(){this.lastBoxStartPosition=this.stream.getPosition()},m.prototype.updateUsedBytes=function(e,t){this.stream.addUsedBytes&&("mdat"===e.type?(this.stream.addUsedBytes(e.hdr_size),this.discardMdatData&&this.stream.addUsedBytes(e.size-e.hdr_size)):this.stream.addUsedBytes(e.size))},m.prototype.add=l.Box.prototype.add,m.prototype.addBox=l.Box.prototype.addBox,m.prototype.init=function(e){var t=e||{};this.add("ftyp").set("major_brand",t.brands&&t.brands[0]||"iso4").set("minor_version",0).set("compatible_brands",t.brands||["iso4"]);var r=this.add("moov");return r.add("mvhd").set("timescale",t.timescale||600).set("rate",t.rate||65536).set("creation_time",0).set("modification_time",0).set("duration",t.duration||0).set("volume",t.width?0:256).set("matrix",[65536,0,0,0,65536,0,0,0,1073741824]).set("next_track_id",1),r.add("mvex"),this},m.prototype.addTrack=function(e){this.moov||this.init(e);var t=e||{};t.width=t.width||320,t.height=t.height||320,t.id=t.id||this.moov.mvhd.next_track_id,t.type=t.type||"avc1";var n=this.moov.add("trak");this.moov.mvhd.next_track_id=t.id+1,n.add("tkhd").set("flags",l.TKHD_FLAG_ENABLED|l.TKHD_FLAG_IN_MOVIE|l.TKHD_FLAG_IN_PREVIEW).set("creation_time",0).set("modification_time",0).set("track_id",t.id).set("duration",t.duration||0).set("layer",t.layer||0).set("alternate_group",0).set("volume",1).set("matrix",[65536,0,0,0,65536,0,0,0,1073741824]).set("width",t.width<<16).set("height",t.height<<16);var i=n.add("mdia");i.add("mdhd").set("creation_time",0).set("modification_time",0).set("timescale",t.timescale||1).set("duration",t.media_duration||0).set("language",t.language||"und"),i.add("hdlr").set("handler",t.hdlr||"vide").set("name",t.name||"Track created with MP4Box.js"),i.add("elng").set("extended_language",t.language||"fr-FR");var s=i.add("minf");if(void 0!==l[t.type+"SampleEntry"]){var o=new l[t.type+"SampleEntry"];o.data_reference_index=1;var a="";for(var u in l.sampleEntryCodes)for(var c=l.sampleEntryCodes[u],d=0;d<c.length;d++)if(c.indexOf(t.type)>-1){a=u;break}switch(a){case"Visual":if(s.add("vmhd").set("graphicsmode",0).set("opcolor",[0,0,0]),o.set("width",t.width).set("height",t.height).set("horizresolution",72<<16).set("vertresolution",72<<16).set("frame_count",1).set("compressorname",t.type+" Compressor").set("depth",24),t.avcDecoderConfigRecord){var h=new l.avcCBox;h.parse(new r(t.avcDecoderConfigRecord)),o.addBox(h)}else if(t.hevcDecoderConfigRecord){var f=new l.hvcCBox;f.parse(new r(t.hevcDecoderConfigRecord)),o.addBox(f)}break;case"Audio":s.add("smhd").set("balance",t.balance||0),o.set("channel_count",t.channel_count||2).set("samplesize",t.samplesize||16).set("samplerate",t.samplerate||65536);break;case"Hint":s.add("hmhd");break;case"Subtitle":s.add("sthd"),"stpp"===t.type&&o.set("namespace",t.namespace||"nonamespace").set("schema_location",t.schema_location||"").set("auxiliary_mime_types",t.auxiliary_mime_types||"");break;default:s.add("nmhd")}t.description&&o.addBox(t.description),t.description_boxes&&t.description_boxes.forEach(function(e){o.addBox(e)}),s.add("dinf").add("dref").addEntry((new l["url Box"]).set("flags",1));var p=s.add("stbl");return p.add("stsd").addEntry(o),p.add("stts").set("sample_counts",[]).set("sample_deltas",[]),p.add("stsc").set("first_chunk",[]).set("samples_per_chunk",[]).set("sample_description_index",[]),p.add("stco").set("chunk_offsets",[]),p.add("stsz").set("sample_sizes",[]),this.moov.mvex.add("trex").set("track_id",t.id).set("default_sample_description_index",t.default_sample_description_index||1).set("default_sample_duration",t.default_sample_duration||0).set("default_sample_size",t.default_sample_size||0).set("default_sample_flags",t.default_sample_flags||0),this.buildTrakSampleLists(n),t.id}},l.Box.prototype.computeSize=function(e){var t=e||new n;t.endianness=n.BIG_ENDIAN,this.write(t)},m.prototype.addSample=function(e,t,r){var n=r||{},i={},s=this.getTrackById(e);if(null!==s){i.number=s.samples.length,i.track_id=s.tkhd.track_id,i.timescale=s.mdia.mdhd.timescale,i.description_index=n.sample_description_index?n.sample_description_index-1:0,i.description=s.mdia.minf.stbl.stsd.entries[i.description_index],i.data=t,i.size=t.byteLength,i.alreadyRead=i.size,i.duration=n.duration||1,i.cts=n.cts||0,i.dts=n.dts||0,i.is_sync=n.is_sync||!1,i.is_leading=n.is_leading||0,i.depends_on=n.depends_on||0,i.is_depended_on=n.is_depended_on||0,i.has_redundancy=n.has_redundancy||0,i.degradation_priority=n.degradation_priority||0,i.offset=0,i.subsamples=n.subsamples,s.samples.push(i),s.samples_size+=i.size,s.samples_duration+=i.duration,void 0===s.first_dts&&(s.first_dts=n.dts),this.processSamples();var o=this.createSingleSampleMoof(i);return this.addBox(o),o.computeSize(),o.trafs[0].truns[0].data_offset=o.size+8,this.add("mdat").data=new Uint8Array(t),i}},m.prototype.createSingleSampleMoof=function(e){var t=0;t=e.is_sync?1<<25:65536;var r=new l.moofBox;r.add("mfhd").set("sequence_number",this.nextMoofNumber),this.nextMoofNumber++;var n=r.add("traf"),i=this.getTrackById(e.track_id);return n.add("tfhd").set("track_id",e.track_id).set("flags",l.TFHD_FLAG_DEFAULT_BASE_IS_MOOF),n.add("tfdt").set("baseMediaDecodeTime",e.dts-(i.first_dts||0)),n.add("trun").set("flags",l.TRUN_FLAGS_DATA_OFFSET|l.TRUN_FLAGS_DURATION|l.TRUN_FLAGS_SIZE|l.TRUN_FLAGS_FLAGS|l.TRUN_FLAGS_CTS_OFFSET).set("data_offset",0).set("first_sample_flags",0).set("sample_count",1).set("sample_duration",[e.duration]).set("sample_size",[e.size]).set("sample_flags",[t]).set("sample_composition_time_offset",[e.cts-e.dts]),r},m.prototype.lastMoofIndex=0,m.prototype.samplesDataSize=0,m.prototype.resetTables=function(){var e,t,r,n,i,s;for(this.initial_duration=this.moov.mvhd.duration,this.moov.mvhd.duration=0,e=0;e<this.moov.traks.length;e++){(t=this.moov.traks[e]).tkhd.duration=0,t.mdia.mdhd.duration=0,(t.mdia.minf.stbl.stco||t.mdia.minf.stbl.co64).chunk_offsets=[],(r=t.mdia.minf.stbl.stsc).first_chunk=[],r.samples_per_chunk=[],r.sample_description_index=[],(t.mdia.minf.stbl.stsz||t.mdia.minf.stbl.stz2).sample_sizes=[],(n=t.mdia.minf.stbl.stts).sample_counts=[],n.sample_deltas=[],(i=t.mdia.minf.stbl.ctts)&&(i.sample_counts=[],i.sample_offsets=[]),s=t.mdia.minf.stbl.stss;var o=t.mdia.minf.stbl.boxes.indexOf(s);-1!=o&&(t.mdia.minf.stbl.boxes[o]=null)}},m.initSampleGroups=function(e,t,r,n,i){var s,o,a,l;function u(e,t,r){this.grouping_type=e,this.grouping_type_parameter=t,this.sbgp=r,this.last_sample_in_run=-1,this.entry_index=-1}for(t&&(t.sample_groups_info=[]),e.sample_groups_info||(e.sample_groups_info=[]),o=0;o<r.length;o++){for(l=r[o].grouping_type+"/"+r[o].grouping_type_parameter,a=new u(r[o].grouping_type,r[o].grouping_type_parameter,r[o]),t&&(t.sample_groups_info[l]=a),e.sample_groups_info[l]||(e.sample_groups_info[l]=a),s=0;s<n.length;s++)n[s].grouping_type===r[o].grouping_type&&(a.description=n[s],a.description.used=!0);if(i)for(s=0;s<i.length;s++)i[s].grouping_type===r[o].grouping_type&&(a.fragment_description=i[s],a.fragment_description.used=!0,a.is_fragment=!0)}if(t){if(i)for(o=0;o<i.length;o++)!i[o].used&&i[o].version>=2&&(l=i[o].grouping_type+"/0",(a=new u(i[o].grouping_type,0)).is_fragment=!0,t.sample_groups_info[l]||(t.sample_groups_info[l]=a))}else for(o=0;o<n.length;o++)!n[o].used&&n[o].version>=2&&(l=n[o].grouping_type+"/0",a=new u(n[o].grouping_type,0),e.sample_groups_info[l]||(e.sample_groups_info[l]=a))},m.setSampleGroupProperties=function(e,t,r,n){var i,s;for(i in t.sample_groups=[],n){var o;t.sample_groups[i]={},t.sample_groups[i].grouping_type=n[i].grouping_type,t.sample_groups[i].grouping_type_parameter=n[i].grouping_type_parameter,r>=n[i].last_sample_in_run&&(n[i].last_sample_in_run<0&&(n[i].last_sample_in_run=0),n[i].entry_index++,n[i].entry_index<=n[i].sbgp.entries.length-1&&(n[i].last_sample_in_run+=n[i].sbgp.entries[n[i].entry_index].sample_count)),n[i].entry_index<=n[i].sbgp.entries.length-1?t.sample_groups[i].group_description_index=n[i].sbgp.entries[n[i].entry_index].group_description_index:t.sample_groups[i].group_description_index=-1,0!==t.sample_groups[i].group_description_index&&(o=n[i].fragment_description?n[i].fragment_description:n[i].description,t.sample_groups[i].group_description_index>0?(s=t.sample_groups[i].group_description_index>65535?(t.sample_groups[i].group_description_index>>16)-1:t.sample_groups[i].group_description_index-1,o&&s>=0&&(t.sample_groups[i].description=o.entries[s])):o&&o.version>=2&&o.default_group_description_index>0&&(t.sample_groups[i].description=o.entries[o.default_group_description_index-1]))}},m.process_sdtp=function(e,t,r){t&&(e?(t.is_leading=e.is_leading[r],t.depends_on=e.sample_depends_on[r],t.is_depended_on=e.sample_is_depended_on[r],t.has_redundancy=e.sample_has_redundancy[r]):(t.is_leading=0,t.depends_on=0,t.is_depended_on=0,t.has_redundancy=0))},m.prototype.buildSampleLists=function(){var e,t;for(e=0;e<this.moov.traks.length;e++)t=this.moov.traks[e],this.buildTrakSampleLists(t)},m.prototype.buildTrakSampleLists=function(e){var t,r,n,i,s,o,a,l,u,c,d,h,f,p,g,y,v,_,b,w,x,E,S,C;if(e.samples=[],e.samples_duration=0,e.samples_size=0,r=e.mdia.minf.stbl.stco||e.mdia.minf.stbl.co64,n=e.mdia.minf.stbl.stsc,i=e.mdia.minf.stbl.stsz||e.mdia.minf.stbl.stz2,s=e.mdia.minf.stbl.stts,o=e.mdia.minf.stbl.ctts,a=e.mdia.minf.stbl.stss,l=e.mdia.minf.stbl.stsd,u=e.mdia.minf.stbl.subs,h=e.mdia.minf.stbl.stdp,c=e.mdia.minf.stbl.sbgps,d=e.mdia.minf.stbl.sgpds,_=-1,b=-1,w=-1,x=-1,E=0,S=0,C=0,m.initSampleGroups(e,null,c,d),void 0!==i){for(t=0;t<i.sample_sizes.length;t++){var A={};A.number=t,A.track_id=e.tkhd.track_id,A.timescale=e.mdia.mdhd.timescale,A.alreadyRead=0,e.samples[t]=A,A.size=i.sample_sizes[t],e.samples_size+=A.size,0===t?(p=1,f=0,A.chunk_index=p,A.chunk_run_index=f,v=n.samples_per_chunk[f],y=0,g=f+1<n.first_chunk.length?n.first_chunk[f+1]-1:1/0):t<v?(A.chunk_index=p,A.chunk_run_index=f):(p++,A.chunk_index=p,y=0,p<=g||(g=1+ ++f<n.first_chunk.length?n.first_chunk[f+1]-1:1/0),A.chunk_run_index=f,v+=n.samples_per_chunk[f]),A.description_index=n.sample_description_index[A.chunk_run_index]-1,A.description=l.entries[A.description_index],A.offset=r.chunk_offsets[A.chunk_index-1]+y,y+=A.size,t>_&&(b++,_<0&&(_=0),_+=s.sample_counts[b]),t>0?(e.samples[t-1].duration=s.sample_deltas[b],e.samples_duration+=e.samples[t-1].duration,A.dts=e.samples[t-1].dts+e.samples[t-1].duration):A.dts=0,o?(t>=w&&(x++,w<0&&(w=0),w+=o.sample_counts[x]),A.cts=e.samples[t].dts+o.sample_offsets[x]):A.cts=A.dts,a?(t==a.sample_numbers[E]-1?(A.is_sync=!0,E++):(A.is_sync=!1,A.degradation_priority=0),u&&u.entries[S].sample_delta+C==t+1&&(A.subsamples=u.entries[S].subsamples,C+=u.entries[S].sample_delta,S++)):A.is_sync=!0,m.process_sdtp(e.mdia.minf.stbl.sdtp,A,A.number),A.degradation_priority=h?h.priority[t]:0,u&&u.entries[S].sample_delta+C==t&&(A.subsamples=u.entries[S].subsamples,C+=u.entries[S].sample_delta),(c.length>0||d.length>0)&&m.setSampleGroupProperties(e,A,t,e.sample_groups_info)}t>0&&(e.samples[t-1].duration=Math.max(e.mdia.mdhd.duration-e.samples[t-1].dts,0),e.samples_duration+=e.samples[t-1].duration)}},m.prototype.updateSampleLists=function(){var e,t,r,n,i,s,o,a,u,c,d,h,f,p,g;if(void 0!==this.moov)for(;this.lastMoofIndex<this.moofs.length;)if(u=this.moofs[this.lastMoofIndex],this.lastMoofIndex++,"moof"==u.type)for(c=u,e=0;e<c.trafs.length;e++){for(d=c.trafs[e],h=this.getTrackById(d.tfhd.track_id),f=this.getTrexById(d.tfhd.track_id),n=d.tfhd.flags&l.TFHD_FLAG_SAMPLE_DESC?d.tfhd.default_sample_description_index:f?f.default_sample_description_index:1,i=d.tfhd.flags&l.TFHD_FLAG_SAMPLE_DUR?d.tfhd.default_sample_duration:f?f.default_sample_duration:0,s=d.tfhd.flags&l.TFHD_FLAG_SAMPLE_SIZE?d.tfhd.default_sample_size:f?f.default_sample_size:0,o=d.tfhd.flags&l.TFHD_FLAG_SAMPLE_FLAGS?d.tfhd.default_sample_flags:f?f.default_sample_flags:0,d.sample_number=0,d.sbgps.length>0&&m.initSampleGroups(h,d,d.sbgps,h.mdia.minf.stbl.sgpds,d.sgpds),t=0;t<d.truns.length;t++){var y=d.truns[t];for(r=0;r<y.sample_count;r++){(p={}).moof_number=this.lastMoofIndex,p.number_in_traf=d.sample_number,d.sample_number++,p.number=h.samples.length,d.first_sample_index=h.samples.length,h.samples.push(p),p.track_id=h.tkhd.track_id,p.timescale=h.mdia.mdhd.timescale,p.description_index=n-1,p.description=h.mdia.minf.stbl.stsd.entries[p.description_index],p.size=s,y.flags&l.TRUN_FLAGS_SIZE&&(p.size=y.sample_size[r]),h.samples_size+=p.size,p.duration=i,y.flags&l.TRUN_FLAGS_DURATION&&(p.duration=y.sample_duration[r]),h.samples_duration+=p.duration,h.first_traf_merged||r>0?p.dts=h.samples[h.samples.length-2].dts+h.samples[h.samples.length-2].duration:(d.tfdt?p.dts=d.tfdt.baseMediaDecodeTime:p.dts=0,h.first_traf_merged=!0),p.cts=p.dts,y.flags&l.TRUN_FLAGS_CTS_OFFSET&&(p.cts=p.dts+y.sample_composition_time_offset[r]),g=o,y.flags&l.TRUN_FLAGS_FLAGS?g=y.sample_flags[r]:0===r&&y.flags&l.TRUN_FLAGS_FIRST_FLAG&&(g=y.first_sample_flags),p.is_sync=!(g>>16&1),p.is_leading=g>>26&3,p.depends_on=g>>24&3,p.is_depended_on=g>>22&3,p.has_redundancy=g>>20&3,p.degradation_priority=65535&g;var v=!!(d.tfhd.flags&l.TFHD_FLAG_BASE_DATA_OFFSET),_=!!(d.tfhd.flags&l.TFHD_FLAG_DEFAULT_BASE_IS_MOOF),b=!!(y.flags&l.TRUN_FLAGS_DATA_OFFSET),w=0;w=v?d.tfhd.base_data_offset:_||0===t?c.start:a,p.offset=0===t&&0===r?b?w+y.data_offset:w:a,a=p.offset+p.size,(d.sbgps.length>0||d.sgpds.length>0||h.mdia.minf.stbl.sbgps.length>0||h.mdia.minf.stbl.sgpds.length>0)&&m.setSampleGroupProperties(h,p,p.number_in_traf,d.sample_groups_info)}}if(d.subs){h.has_fragment_subsamples=!0;var x=d.first_sample_index;for(t=0;t<d.subs.entries.length;t++)x+=d.subs.entries[t].sample_delta,(p=h.samples[x-1]).subsamples=d.subs.entries[t].subsamples}}},m.prototype.getSample=function(e,r){var i,s=e.samples[r];if(!this.moov)return null;if(s.data){if(s.alreadyRead==s.size)return s}else s.data=new Uint8Array(s.size),s.alreadyRead=0,this.samplesDataSize+=s.size,t.debug("ISOFile","Allocating sample #"+r+" on track #"+e.tkhd.track_id+" of size "+s.size+" (total: "+this.samplesDataSize+")");for(;;){var o=this.stream.findPosition(!0,s.offset+s.alreadyRead,!1);if(!(o>-1))return null;var a=(i=this.stream.buffers[o]).byteLength-(s.offset+s.alreadyRead-i.fileStart);if(s.size-s.alreadyRead<=a)return t.debug("ISOFile","Getting sample #"+r+" data (alreadyRead: "+s.alreadyRead+" offset: "+(s.offset+s.alreadyRead-i.fileStart)+" read size: "+(s.size-s.alreadyRead)+" full size: "+s.size+")"),n.memcpy(s.data.buffer,s.alreadyRead,i,s.offset+s.alreadyRead-i.fileStart,s.size-s.alreadyRead),i.usedBytes+=s.size-s.alreadyRead,this.stream.logBufferLevel(),s.alreadyRead=s.size,s;if(0===a)return null;t.debug("ISOFile","Getting sample #"+r+" partial data (alreadyRead: "+s.alreadyRead+" offset: "+(s.offset+s.alreadyRead-i.fileStart)+" read size: "+a+" full size: "+s.size+")"),n.memcpy(s.data.buffer,s.alreadyRead,i,s.offset+s.alreadyRead-i.fileStart,a),s.alreadyRead+=a,i.usedBytes+=a,this.stream.logBufferLevel()}},m.prototype.releaseSample=function(e,t){var r=e.samples[t];return r.data?(this.samplesDataSize-=r.size,r.data=null,r.alreadyRead=0,r.size):0},m.prototype.getAllocatedSampleDataSize=function(){return this.samplesDataSize},m.prototype.getCodecs=function(){var e,t="";for(e=0;e<this.moov.traks.length;e++)e>0&&(t+=","),t+=this.moov.traks[e].mdia.minf.stbl.stsd.entries[0].getCodec();return t},m.prototype.getTrexById=function(e){var t;if(!this.moov||!this.moov.mvex)return null;for(t=0;t<this.moov.mvex.trexs.length;t++){var r=this.moov.mvex.trexs[t];if(r.track_id==e)return r}return null},m.prototype.getTrackById=function(e){if(void 0===this.moov)return null;for(var t=0;t<this.moov.traks.length;t++){var r=this.moov.traks[t];if(r.tkhd.track_id==e)return r}return null},m.prototype.itemsDataSize=0,m.prototype.flattenItemInfo=function(){var e,r,n,i=this.items,s=this.entity_groups,o=this.meta;if(null!=o&&void 0!==o.hdlr&&void 0!==o.iinf){for(e=0;e<o.iinf.item_infos.length;e++)(n={}).id=o.iinf.item_infos[e].item_ID,i[n.id]=n,n.ref_to=[],n.name=o.iinf.item_infos[e].item_name,o.iinf.item_infos[e].protection_index>0&&(n.protection=o.ipro.protections[o.iinf.item_infos[e].protection_index-1]),o.iinf.item_infos[e].item_type?n.type=o.iinf.item_infos[e].item_type:n.type="mime",n.content_type=o.iinf.item_infos[e].content_type,n.content_encoding=o.iinf.item_infos[e].content_encoding,n.item_uri_type=o.iinf.item_infos[e].item_uri_type;if(o.grpl)for(e=0;e<o.grpl.boxes.length;e++)entity_group={},entity_group.id=o.grpl.boxes[e].group_id,entity_group.entity_ids=o.grpl.boxes[e].entity_ids,entity_group.type=o.grpl.boxes[e].type,s[entity_group.id]=entity_group;if(o.iloc)for(e=0;e<o.iloc.items.length;e++){var a=o.iloc.items[e];switch(n=i[a.item_ID],0!==a.data_reference_index&&(t.warn("Item storage with reference to other files: not supported"),n.source=o.dinf.boxes[a.data_reference_index-1]),a.construction_method){case 0:case 1:break;case 2:t.warn("Item storage with construction_method : not supported")}for(n.extents=[],n.size=0,r=0;r<a.extents.length;r++)n.extents[r]={},n.extents[r].offset=a.extents[r].extent_offset+a.base_offset,1==a.construction_method&&(n.extents[r].offset+=o.idat.start+o.idat.hdr_size),n.extents[r].length=a.extents[r].extent_length,n.extents[r].alreadyRead=0,n.size+=n.extents[r].length}if(o.pitm&&(i[o.pitm.item_id].primary=!0),o.iref)for(e=0;e<o.iref.references.length;e++){var l=o.iref.references[e];for(r=0;r<l.references.length;r++)i[l.from_item_ID].ref_to.push({type:l.type,id:l.references[r]})}if(o.iprp)for(var u=0;u<o.iprp.ipmas.length;u++){var c=o.iprp.ipmas[u];for(e=0;e<c.associations.length;e++){var d=c.associations[e];if((n=i[d.id])||(n=s[d.id]),n)for(void 0===n.properties&&(n.properties={},n.properties.boxes=[]),r=0;r<d.props.length;r++){var h=d.props[r];if(h.property_index>0&&h.property_index-1<o.iprp.ipco.boxes.length){var f=o.iprp.ipco.boxes[h.property_index-1];n.properties[f.type]=f,n.properties.boxes.push(f)}}}}}},m.prototype.getItem=function(e){var r,i;if(!this.meta)return null;if(!(i=this.items[e]).data&&i.size)i.data=new Uint8Array(i.size),i.alreadyRead=0,this.itemsDataSize+=i.size,t.debug("ISOFile","Allocating item #"+e+" of size "+i.size+" (total: "+this.itemsDataSize+")");else if(i.alreadyRead===i.size)return i;for(var s=0;s<i.extents.length;s++){var o=i.extents[s];if(o.alreadyRead!==o.length){var a=this.stream.findPosition(!0,o.offset+o.alreadyRead,!1);if(!(a>-1))return null;var l=(r=this.stream.buffers[a]).byteLength-(o.offset+o.alreadyRead-r.fileStart);if(!(o.length-o.alreadyRead<=l))return t.debug("ISOFile","Getting item #"+e+" extent #"+s+" partial data (alreadyRead: "+o.alreadyRead+" offset: "+(o.offset+o.alreadyRead-r.fileStart)+" read size: "+l+" full extent size: "+o.length+" full item size: "+i.size+")"),n.memcpy(i.data.buffer,i.alreadyRead,r,o.offset+o.alreadyRead-r.fileStart,l),o.alreadyRead+=l,i.alreadyRead+=l,r.usedBytes+=l,this.stream.logBufferLevel(),null;t.debug("ISOFile","Getting item #"+e+" extent #"+s+" data (alreadyRead: "+o.alreadyRead+" offset: "+(o.offset+o.alreadyRead-r.fileStart)+" read size: "+(o.length-o.alreadyRead)+" full extent size: "+o.length+" full item size: "+i.size+")"),n.memcpy(i.data.buffer,i.alreadyRead,r,o.offset+o.alreadyRead-r.fileStart,o.length-o.alreadyRead),r.usedBytes+=o.length-o.alreadyRead,this.stream.logBufferLevel(),i.alreadyRead+=o.length-o.alreadyRead,o.alreadyRead=o.length}}return i.alreadyRead===i.size?i:null},m.prototype.releaseItem=function(e){var t=this.items[e];if(t.data){this.itemsDataSize-=t.size,t.data=null,t.alreadyRead=0;for(var r=0;r<t.extents.length;r++)t.extents[r].alreadyRead=0;return t.size}return 0},m.prototype.processItems=function(e){for(var t in this.items){var r=this.items[t];this.getItem(r.id),e&&!r.sent&&(e(r),r.sent=!0,r.data=null)}},m.prototype.hasItem=function(e){for(var t in this.items){var r=this.items[t];if(r.name===e)return r.id}return-1},m.prototype.getMetaHandler=function(){return this.meta?this.meta.hdlr.handler:null},m.prototype.getPrimaryItem=function(){return this.meta&&this.meta.pitm?this.getItem(this.meta.pitm.item_id):null},m.prototype.itemToFragmentedTrackFile=function(e){var t=e||{},r=null;if(null==(r=t.itemId?this.getItem(t.itemId):this.getPrimaryItem()))return null;var n=new m;n.discardMdatData=!1;var i={type:r.type,description_boxes:r.properties.boxes};r.properties.ispe&&(i.width=r.properties.ispe.image_width,i.height=r.properties.ispe.image_height);var s=n.addTrack(i);return s?(n.addSample(s,r.data),n):null},m.prototype.write=function(e){for(var t=0;t<this.boxes.length;t++)this.boxes[t].write(e)},m.prototype.createFragment=function(e,r,i){var s=this.getTrackById(e),o=this.getSample(s,r);if(null==o)return this.setNextSeekPositionFromSample(s.samples[r]),null;var a=i||new n;a.endianness=n.BIG_ENDIAN;var u=this.createSingleSampleMoof(o);u.write(a),u.trafs[0].truns[0].data_offset=u.size+8,t.debug("MP4Box","Adjusting data_offset with new value "+u.trafs[0].truns[0].data_offset),a.adjustUint32(u.trafs[0].truns[0].data_offset_position,u.trafs[0].truns[0].data_offset);var c=new l.mdatBox;return c.data=o.data,c.write(a),a},m.writeInitializationSegment=function(e,r,i,s){var o;t.debug("ISOFile","Generating initialization segment");var a=new n;a.endianness=n.BIG_ENDIAN,e.write(a);var l=r.add("mvex");for(i&&l.add("mehd").set("fragment_duration",i),o=0;o<r.traks.length;o++)l.add("trex").set("track_id",r.traks[o].tkhd.track_id).set("default_sample_description_index",1).set("default_sample_duration",s).set("default_sample_size",0).set("default_sample_flags",65536);return r.write(a),a.buffer},m.prototype.save=function(e){var t=new n;t.endianness=n.BIG_ENDIAN,this.write(t),t.save(e)},m.prototype.getBuffer=function(){var e=new n;return e.endianness=n.BIG_ENDIAN,this.write(e),e.buffer},m.prototype.initializeSegmentation=function(){var e,r,n,i;for(null===this.onSegment&&t.warn("MP4Box","No segmentation callback set!"),this.isFragmentationInitialized||(this.isFragmentationInitialized=!0,this.nextMoofNumber=0,this.resetTables()),r=[],e=0;e<this.fragmentedTracks.length;e++){var s=new l.moovBox;s.mvhd=this.moov.mvhd,s.boxes.push(s.mvhd),n=this.getTrackById(this.fragmentedTracks[e].id),s.boxes.push(n),s.traks.push(n),(i={}).id=n.tkhd.track_id,i.user=this.fragmentedTracks[e].user,i.buffer=m.writeInitializationSegment(this.ftyp,s,this.moov.mvex&&this.moov.mvex.mehd?this.moov.mvex.mehd.fragment_duration:void 0,this.moov.traks[e].samples.length>0?this.moov.traks[e].samples[0].duration:0),r.push(i)}return r},l.Box.prototype.printHeader=function(e){this.size+=8,this.size>s&&(this.size+=8),"uuid"===this.type&&(this.size+=16),e.log(e.indent+"size:"+this.size),e.log(e.indent+"type:"+this.type)},l.FullBox.prototype.printHeader=function(e){this.size+=4,l.Box.prototype.printHeader.call(this,e),e.log(e.indent+"version:"+this.version),e.log(e.indent+"flags:"+this.flags)},l.Box.prototype.print=function(e){this.printHeader(e)},l.ContainerBox.prototype.print=function(e){this.printHeader(e);for(var t=0;t<this.boxes.length;t++)if(this.boxes[t]){var r=e.indent;e.indent+=" ",this.boxes[t].print(e),e.indent=r}},m.prototype.print=function(e){e.indent="";for(var t=0;t<this.boxes.length;t++)this.boxes[t]&&this.boxes[t].print(e)},l.mvhdBox.prototype.print=function(e){l.FullBox.prototype.printHeader.call(this,e),e.log(e.indent+"creation_time: "+this.creation_time),e.log(e.indent+"modification_time: "+this.modification_time),e.log(e.indent+"timescale: "+this.timescale),e.log(e.indent+"duration: "+this.duration),e.log(e.indent+"rate: "+this.rate),e.log(e.indent+"volume: "+(this.volume>>8)),e.log(e.indent+"matrix: "+this.matrix.join(", ")),e.log(e.indent+"next_track_id: "+this.next_track_id)},l.tkhdBox.prototype.print=function(e){l.FullBox.prototype.printHeader.call(this,e),e.log(e.indent+"creation_time: "+this.creation_time),e.log(e.indent+"modification_time: "+this.modification_time),e.log(e.indent+"track_id: "+this.track_id),e.log(e.indent+"duration: "+this.duration),e.log(e.indent+"volume: "+(this.volume>>8)),e.log(e.indent+"matrix: "+this.matrix.join(", ")),e.log(e.indent+"layer: "+this.layer),e.log(e.indent+"alternate_group: "+this.alternate_group),e.log(e.indent+"width: "+this.width),e.log(e.indent+"height: "+this.height)};var g={createFile:function(e,t){var r=void 0===e||e,n=new m(t);return n.discardMdatData=!r,n}};e.createFile=g.createFile}(Wk),e("M",s(Wk));const qk="object"==typeof global&&global&&global.Object===Object&&global;var Xk="object"==typeof self&&self&&self.Object===Object&&self;const Yk=qk||Xk||Function("return this")(),Kk=Yk.Symbol;var Zk=Object.prototype,Jk=Zk.hasOwnProperty,Qk=Zk.toString,eP=Kk?Kk.toStringTag:void 0,tP=Object.prototype.toString,rP="[object Null]",nP="[object Undefined]",iP=Kk?Kk.toStringTag:void 0;function sP(e){return null==e?void 0===e?nP:rP:iP&&iP in Object(e)?function(e){var t=Jk.call(e,eP),r=e[eP];try{e[eP]=void 0;var n=!0}catch(Ove){}var i=Qk.call(e);return n&&(t?e[eP]=r:delete e[eP]),i}(e):function(e){return tP.call(e)}(e)}function oP(e){return null!=e&&"object"==typeof e}const aP=Array.isArray;function lP(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function uP(e){return e}var cP="[object AsyncFunction]",dP="[object Function]",hP="[object GeneratorFunction]",fP="[object Proxy]";function pP(e){if(!lP(e))return!1;var t=sP(e);return t==dP||t==hP||t==cP||t==fP}const mP=Yk["__core-js_shared__"];var gP=function(){var e=/[^.]+$/.exec(mP&&mP.keys&&mP.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),yP=Function.prototype.toString;function vP(e){if(null!=e){try{return yP.call(e)}catch(Ove){}try{return e+""}catch(Ove){}}return""}var _P=/^\[object .+?Constructor\]$/,bP=Function.prototype,wP=Object.prototype,xP=bP.toString,EP=wP.hasOwnProperty,SP=RegExp("^"+xP.call(EP).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function CP(e){return!(!lP(e)||(t=e,gP&&gP in t))&&(pP(e)?SP:_P).test(vP(e));var t}function AP(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return CP(r)?r:void 0}const TP=AP(Yk,"WeakMap");var DP=Object.create;const kP=function(){function e(){}return function(t){if(!lP(t))return{};if(DP)return DP(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function PP(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var BP=Date.now;const OP=function(){try{var e=AP(Object,"defineProperty");return e({},"",{}),e}catch(Ove){}}();var RP=OP?function(e,t){return OP(e,"toString",{configurable:!0,enumerable:!1,value:(r=t,function(){return r}),writable:!0});var r}:uP,FP=function(e){var t=0,r=0;return function(){var n=BP(),i=16-(n-r);if(r=n,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(RP);const IP=FP;var MP=9007199254740991,NP=/^(?:0|[1-9]\d*)$/;function LP(e,t){var r=typeof e;return!!(t=null==t?MP:t)&&("number"==r||"symbol"!=r&&NP.test(e))&&e>-1&&e%1==0&&e<t}function UP(e,t,r){"__proto__"==t&&OP?OP(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function jP(e,t){return e===t||e!=e&&t!=t}var zP=Object.prototype.hasOwnProperty;function VP(e,t,r){var n=e[t];zP.call(e,t)&&jP(n,r)&&(void 0!==r||t in e)||UP(e,t,r)}function GP(e,t,r,n){var i=!r;r||(r={});for(var s=-1,o=t.length;++s<o;){var a=t[s],l=n?n(r[a],e[a],a,r,e):void 0;void 0===l&&(l=e[a]),i?UP(r,a,l):VP(r,a,l)}return r}var HP=Math.max;function $P(e,t){return IP(function(e,t,r){return t=HP(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,s=HP(n.length-t,0),o=Array(s);++i<s;)o[i]=n[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=n[i];return a[t]=r(o),function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(e,this,a)}}(e,t,uP),e+"")}var WP=9007199254740991;function qP(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=WP}function XP(e){return null!=e&&qP(e.length)&&!pP(e)}var YP=Object.prototype;function KP(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||YP)}function ZP(e){return oP(e)&&"[object Arguments]"==sP(e)}var JP=Object.prototype,QP=JP.hasOwnProperty,eB=JP.propertyIsEnumerable,tB=ZP(function(){return arguments}())?ZP:function(e){return oP(e)&&QP.call(e,"callee")&&!eB.call(e,"callee")};const rB=tB;var nB="object"==typeof e&&e&&!e.nodeType&&e,iB=nB&&"object"==typeof t&&t&&!t.nodeType&&t,sB=iB&&iB.exports===nB?Yk.Buffer:void 0;const oB=(sB?sB.isBuffer:void 0)||function(){return!1};var aB={};function lB(e){return function(t){return e(t)}}aB["[object Float32Array]"]=aB["[object Float64Array]"]=aB["[object Int8Array]"]=aB["[object Int16Array]"]=aB["[object Int32Array]"]=aB["[object Uint8Array]"]=aB["[object Uint8ClampedArray]"]=aB["[object Uint16Array]"]=aB["[object Uint32Array]"]=!0,aB["[object Arguments]"]=aB["[object Array]"]=aB["[object ArrayBuffer]"]=aB["[object Boolean]"]=aB["[object DataView]"]=aB["[object Date]"]=aB["[object Error]"]=aB["[object Function]"]=aB["[object Map]"]=aB["[object Number]"]=aB["[object Object]"]=aB["[object RegExp]"]=aB["[object Set]"]=aB["[object String]"]=aB["[object WeakMap]"]=!1;var uB="object"==typeof e&&e&&!e.nodeType&&e,cB=uB&&"object"==typeof t&&t&&!t.nodeType&&t,dB=cB&&cB.exports===uB&&qk.process;const hB=function(){try{var e=cB&&cB.require&&cB.require("util").types;return e||dB&&dB.binding&&dB.binding("util")}catch(Ove){}}();var fB=hB&&hB.isTypedArray;const pB=fB?lB(fB):function(e){return oP(e)&&qP(e.length)&&!!aB[sP(e)]};var mB=Object.prototype.hasOwnProperty;function gB(e,t){var r=aP(e),n=!r&&rB(e),i=!r&&!n&&oB(e),s=!r&&!n&&!i&&pB(e),o=r||n||i||s,a=o?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],l=a.length;for(var u in e)!t&&!mB.call(e,u)||o&&("length"==u||i&&("offset"==u||"parent"==u)||s&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||LP(u,l))||a.push(u);return a}function yB(e,t){return function(r){return e(t(r))}}const vB=yB(Object.keys,Object);var _B=Object.prototype.hasOwnProperty;function bB(e){return XP(e)?gB(e):function(e){if(!KP(e))return vB(e);var t=[];for(var r in Object(e))_B.call(e,r)&&"constructor"!=r&&t.push(r);return t}(e)}var wB=Object.prototype.hasOwnProperty;function xB(e){if(!lP(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=KP(e),r=[];for(var n in e)("constructor"!=n||!t&&wB.call(e,n))&&r.push(n);return r}function EB(e){return XP(e)?gB(e,!0):xB(e)}const SB=AP(Object,"create");var CB=Object.prototype.hasOwnProperty,AB=Object.prototype.hasOwnProperty;function TB(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function DB(e,t){for(var r=e.length;r--;)if(jP(e[r][0],t))return r;return-1}TB.prototype.clear=function(){this.__data__=SB?SB(null):{},this.size=0},TB.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},TB.prototype.get=function(e){var t=this.__data__;if(SB){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return CB.call(t,e)?t[e]:void 0},TB.prototype.has=function(e){var t=this.__data__;return SB?void 0!==t[e]:AB.call(t,e)},TB.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=SB&&void 0===t?"__lodash_hash_undefined__":t,this};var kB=Array.prototype.splice;function PB(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}PB.prototype.clear=function(){this.__data__=[],this.size=0},PB.prototype.delete=function(e){var t=this.__data__,r=DB(t,e);return!(r<0||(r==t.length-1?t.pop():kB.call(t,r,1),--this.size,0))},PB.prototype.get=function(e){var t=this.__data__,r=DB(t,e);return r<0?void 0:t[r][1]},PB.prototype.has=function(e){return DB(this.__data__,e)>-1},PB.prototype.set=function(e,t){var r=this.__data__,n=DB(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};const BB=AP(Yk,"Map");function OB(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function RB(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function FB(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}RB.prototype.clear=function(){this.size=0,this.__data__={hash:new TB,map:new(BB||PB),string:new TB}},RB.prototype.delete=function(e){var t=OB(this,e).delete(e);return this.size-=t?1:0,t},RB.prototype.get=function(e){return OB(this,e).get(e)},RB.prototype.has=function(e){return OB(this,e).has(e)},RB.prototype.set=function(e,t){var r=OB(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};const IB=yB(Object.getPrototypeOf,Object);var MB=Function.prototype,NB=Object.prototype,LB=MB.toString,UB=NB.hasOwnProperty,jB=LB.call(Object);function zB(e){var t=this.__data__=new PB(e);this.size=t.size}zB.prototype.clear=function(){this.__data__=new PB,this.size=0},zB.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},zB.prototype.get=function(e){return this.__data__.get(e)},zB.prototype.has=function(e){return this.__data__.has(e)},zB.prototype.set=function(e,t){var r=this.__data__;if(r instanceof PB){var n=r.__data__;if(!BB||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new RB(n)}return r.set(e,t),this.size=r.size,this};var VB="object"==typeof e&&e&&!e.nodeType&&e,GB=VB&&"object"==typeof t&&t&&!t.nodeType&&t,HB=GB&&GB.exports===VB?Yk.Buffer:void 0,$B=HB?HB.allocUnsafe:void 0;function WB(e,t){if(t)return e.slice();var r=e.length,n=$B?$B(r):new e.constructor(r);return e.copy(n),n}function qB(){return[]}var XB=Object.prototype.propertyIsEnumerable,YB=Object.getOwnPropertySymbols,KB=YB?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var r=-1,n=null==e?0:e.length,i=0,s=[];++r<n;){var o=e[r];t(o,r,e)&&(s[i++]=o)}return s}(YB(e),function(t){return XB.call(e,t)}))}:qB;const ZB=KB,JB=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)FB(t,ZB(e)),e=IB(e);return t}:qB;function QB(e,t,r){var n=t(e);return aP(e)?n:FB(n,r(e))}function eO(e){return QB(e,bB,ZB)}function tO(e){return QB(e,EB,JB)}const rO=AP(Yk,"DataView"),nO=AP(Yk,"Promise"),iO=AP(Yk,"Set");var sO="[object Map]",oO="[object Promise]",aO="[object Set]",lO="[object WeakMap]",uO="[object DataView]",cO=vP(rO),dO=vP(BB),hO=vP(nO),fO=vP(iO),pO=vP(TP),mO=sP;(rO&&mO(new rO(new ArrayBuffer(1)))!=uO||BB&&mO(new BB)!=sO||nO&&mO(nO.resolve())!=oO||iO&&mO(new iO)!=aO||TP&&mO(new TP)!=lO)&&(mO=function(e){var t=sP(e),r="[object Object]"==t?e.constructor:void 0,n=r?vP(r):"";if(n)switch(n){case cO:return uO;case dO:return sO;case hO:return oO;case fO:return aO;case pO:return lO}return t});const gO=mO;var yO=Object.prototype.hasOwnProperty;const vO=Yk.Uint8Array;function _O(e){var t=new e.constructor(e.byteLength);return new vO(t).set(new vO(e)),t}var bO=/\w*$/,wO=Kk?Kk.prototype:void 0,xO=wO?wO.valueOf:void 0;function EO(e,t){var r=t?_O(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var SO="[object Boolean]",CO="[object Date]",AO="[object Map]",TO="[object Number]",DO="[object RegExp]",kO="[object Set]",PO="[object String]",BO="[object Symbol]",OO="[object ArrayBuffer]",RO="[object DataView]",FO="[object Float32Array]",IO="[object Float64Array]",MO="[object Int8Array]",NO="[object Int16Array]",LO="[object Int32Array]",UO="[object Uint8Array]",jO="[object Uint8ClampedArray]",zO="[object Uint16Array]",VO="[object Uint32Array]";function GO(e,t,r){var n,i,s,o=e.constructor;switch(t){case OO:return _O(e);case SO:case CO:return new o(+e);case RO:return function(e,t){var r=t?_O(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case FO:case IO:case MO:case NO:case LO:case UO:case jO:case zO:case VO:return EO(e,r);case AO:return new o;case TO:case PO:return new o(e);case DO:return(s=new(i=e).constructor(i.source,bO.exec(i))).lastIndex=i.lastIndex,s;case kO:return new o;case BO:return n=e,xO?Object(xO.call(n)):{}}}function HO(e){return"function"!=typeof e.constructor||KP(e)?{}:kP(IB(e))}var $O=hB&&hB.isMap;const WO=$O?lB($O):function(e){return oP(e)&&"[object Map]"==gO(e)};var qO=hB&&hB.isSet;const XO=qO?lB(qO):function(e){return oP(e)&&"[object Set]"==gO(e)};var YO=1,KO=2,ZO=4,JO="[object Arguments]",QO="[object Function]",eR="[object GeneratorFunction]",tR="[object Object]",rR={};function nR(e,t,r,n,i,s){var o,a=t&YO,l=t&KO,u=t&ZO;if(r&&(o=i?r(e,n,i,s):r(e)),void 0!==o)return o;if(!lP(e))return e;var c=aP(e);if(c){if(o=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&yO.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!a)return PP(e,o)}else{var d=gO(e),h=d==QO||d==eR;if(oB(e))return WB(e,a);if(d==tR||d==JO||h&&!i){if(o=l||h?{}:HO(e),!a)return l?function(e,t){return GP(e,JB(e),t)}(e,function(e,t){return e&&GP(t,EB(t),e)}(o,e)):function(e,t){return GP(e,ZB(e),t)}(e,function(e,t){return e&&GP(t,bB(t),e)}(o,e))}else{if(!rR[d])return i?e:{};o=GO(e,d,a)}}s||(s=new zB);var f=s.get(e);if(f)return f;s.set(e,o),XO(e)?e.forEach(function(n){o.add(nR(n,t,r,n,e,s))}):WO(e)&&e.forEach(function(n,i){o.set(i,nR(n,t,r,i,e,s))});var p=c?void 0:(u?l?tO:eO:l?EB:bB)(e);return function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););}(p||e,function(n,i){p&&(n=e[i=n]),VP(o,i,nR(n,t,r,i,e,s))}),o}rR[JO]=rR["[object Array]"]=rR["[object ArrayBuffer]"]=rR["[object DataView]"]=rR["[object Boolean]"]=rR["[object Date]"]=rR["[object Float32Array]"]=rR["[object Float64Array]"]=rR["[object Int8Array]"]=rR["[object Int16Array]"]=rR["[object Int32Array]"]=rR["[object Map]"]=rR["[object Number]"]=rR[tR]=rR["[object RegExp]"]=rR["[object Set]"]=rR["[object String]"]=rR["[object Symbol]"]=rR["[object Uint8Array]"]=rR["[object Uint8ClampedArray]"]=rR["[object Uint16Array]"]=rR["[object Uint32Array]"]=!0,rR["[object Error]"]=rR[QO]=rR["[object WeakMap]"]=!1;var iR,sR=1,oR=4,aR=function(e,t,r){for(var n=-1,i=Object(e),s=r(e),o=s.length;o--;){var a=s[iR?o:++n];if(!1===t(i[a],a,i))break}return e};const lR=aR;function uR(e,t,r){(void 0!==r&&!jP(e[t],r)||void 0===r&&!(t in e))&&UP(e,t,r)}function cR(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function dR(e,t,r,n,i,s,o){var a=cR(e,r),l=cR(t,r),u=o.get(l);if(u)uR(e,r,u);else{var c,d=s?s(a,l,r+"",e,t,o):void 0,h=void 0===d;if(h){var f=aP(l),p=!f&&oB(l),m=!f&&!p&&pB(l);d=l,f||p||m?aP(a)?d=a:oP(c=a)&&XP(c)?d=PP(a):p?(h=!1,d=WB(l,!0)):m?(h=!1,d=EO(l,!0)):d=[]:function(e){if(!oP(e)||"[object Object]"!=sP(e))return!1;var t=IB(e);if(null===t)return!0;var r=UB.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&LB.call(r)==jB}(l)||rB(l)?(d=a,rB(a)?d=function(e){return GP(e,EB(e))}(a):lP(a)&&!pP(a)||(d=HO(l))):h=!1}h&&(o.set(l,d),i(d,l,n,s,o),o.delete(l)),uR(e,r,d)}}function hR(e,t,r,n,i){e!==t&&lR(t,function(s,o){if(i||(i=new zB),lP(s))dR(e,t,o,r,hR,n,i);else{var a=n?n(cR(e,o),s,o+"",e,t,i):void 0;void 0===a&&(a=s),uR(e,o,a)}},EB)}var fR,pR=(fR=function(e,t,r){hR(e,t,r)},$P(function(e,t){var r=-1,n=t.length,i=n>1?t[n-1]:void 0,s=n>2?t[2]:void 0;for(i=fR.length>3&&"function"==typeof i?(n--,i):void 0,s&&function(e,t,r){if(!lP(r))return!1;var n=typeof t;return!!("number"==n?XP(r)&&LP(t,r.length):"string"==n&&t in r)&&jP(r[t],e)}(t[0],t[1],s)&&(i=n<3?void 0:i,n=1),e=Object(e);++r<n;){var o=t[r];o&&fR(e,o,r,i)}return e}));function mR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gR(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}
/*!
			 * GSAP 3.14.1
			 * https://gsap.com
			 *
			 * @license Copyright 2008-2025, GreenSock. All rights reserved.
			 * Subject to the terms at https://gsap.com/standard-license
			 * @author: Jack Doyle, jack@greensock.com
			*/e("s",pR);var yR,vR,_R,bR,wR,xR,ER,SR,CR,AR,TR,DR={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},kR={duration:.5,overwrite:!1,delay:0},PR=1e8,BR=1e-8,OR=2*Math.PI,RR=OR/4,FR=0,IR=Math.sqrt,MR=Math.cos,NR=Math.sin,LR=function(e){return"string"==typeof e},UR=function(e){return"function"==typeof e},jR=function(e){return"number"==typeof e},zR=function(e){return void 0===e},VR=function(e){return"object"==typeof e},GR=function(e){return!1!==e},HR=function(){return"undefined"!=typeof window},$R=function(e){return UR(e)||LR(e)},WR="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},qR=Array.isArray,XR=/random\([^)]+\)/g,YR=/,\s*/g,KR=/(?:-?\.?\d|\.)+/gi,ZR=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,JR=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,QR=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,eF=/[+-]=-?[.\d]+/,tF=/[^,'"\[\]\s]+/gi,rF=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,nF={},iF={},sF=function(e){return(iF=IF(e,nF))&&MM},oF=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},aF=function(e,t){return!t&&console.warn(e)},lF=function(e,t){return e&&(nF[e]=t)&&iF&&(iF[e]=t)||nF},uF=function(){return 0},cF={suppressEvents:!0,isStart:!0,kill:!1},dF={suppressEvents:!0,kill:!1},hF={suppressEvents:!0},fF={},pF=[],mF={},gF={},yF={},vF=30,_F=[],bF="",wF=function(e){var t,r,n=e[0];if(VR(n)||UR(n)||(e=[e]),!(t=(n._gsap||{}).harness)){for(r=_F.length;r--&&!_F[r].targetTest(n););t=_F[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new KI(e[r],t)))||e.splice(r,1);return e},xF=function(e){return e._gsap||wF(fI(e))[0]._gsap},EF=function(e,t,r){return(r=e[t])&&UR(r)?e[t]():zR(r)&&e.getAttribute&&e.getAttribute(t)||r},SF=function(e,t){return(e=e.split(",")).forEach(t)||e},CF=function(e){return Math.round(1e5*e)/1e5||0},AF=function(e){return Math.round(1e7*e)/1e7||0},TF=function(e,t){var r=t.charAt(0),n=parseFloat(t.substr(2));return e=parseFloat(e),"+"===r?e+n:"-"===r?e-n:"*"===r?e*n:e/n},DF=function(e,t){for(var r=t.length,n=0;e.indexOf(t[n])<0&&++n<r;);return n<r},kF=function(){var e,t,r=pF.length,n=pF.slice(0);for(mF={},pF.length=0,e=0;e<r;e++)(t=n[e])&&t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0)._lazy=0)},PF=function(e){return!!(e._initted||e._startAt||e.add)},BF=function(e,t,r,n){pF.length&&!vR&&kF(),e.render(t,r,n||!!(vR&&t<0&&PF(e))),pF.length&&!vR&&kF()},OF=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(tF).length<2?t:LR(e)?e.trim():e},RF=function(e){return e},FF=function(e,t){for(var r in t)r in e||(e[r]=t[r]);return e},IF=function(e,t){for(var r in t)e[r]=t[r];return e},MF=function e(t,r){for(var n in r)"__proto__"!==n&&"constructor"!==n&&"prototype"!==n&&(t[n]=VR(r[n])?e(t[n]||(t[n]={}),r[n]):r[n]);return t},NF=function(e,t){var r,n={};for(r in e)r in t||(n[r]=e[r]);return n},LF=function(e){var t,r=e.parent||bR,n=e.keyframes?(t=qR(e.keyframes),function(e,r){for(var n in r)n in e||"duration"===n&&t||"ease"===n||(e[n]=r[n])}):FF;if(GR(e.inherit))for(;r;)n(e,r.vars.defaults),r=r.parent||r._dp;return e},UF=function(e,t,r,n,i){void 0===r&&(r="_first"),void 0===n&&(n="_last");var s,o=e[n];if(i)for(s=t[i];o&&o[i]>s;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[r],e[r]=t),t._next?t._next._prev=t:e[n]=t,t._prev=o,t.parent=t._dp=e,t},jF=function(e,t,r,n){void 0===r&&(r="_first"),void 0===n&&(n="_last");var i=t._prev,s=t._next;i?i._next=s:e[r]===t&&(e[r]=s),s?s._prev=i:e[n]===t&&(e[n]=i),t._next=t._prev=t.parent=null},zF=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},VF=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var r=e;r;)r._dirty=1,r=r.parent;return e},GF=function(e,t,r,n){return e._startAt&&(vR?e._startAt.revert(dF):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,n))},HF=function e(t){return!t||t._ts&&e(t.parent)},$F=function(e){return e._repeat?WF(e._tTime,e=e.duration()+e._rDelay)*e:0},WF=function(e,t){var r=Math.floor(e=AF(e/t));return e&&r===e?r-1:r},qF=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},XF=function(e){return e._end=AF(e._start+(e._tDur/Math.abs(e._ts||e._rts||BR)||0))},YF=function(e,t){var r=e._dp;return r&&r.smoothChildTiming&&e._ts&&(e._start=AF(r._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),XF(e),r._dirty||VF(r,e)),e},KF=function(e,t){var r;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(r=qF(e.rawTime(),t),(!t._dur||lI(0,t.totalDuration(),r)-t._tTime>BR)&&t.render(r,!0)),VF(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(r=e;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;e._zTime=-1e-8}},ZF=function(e,t,r,n){return t.parent&&zF(t),t._start=AF((jR(r)?r:r||e!==bR?sI(e,r,t):e._time)+t._delay),t._end=AF(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),UF(e,t,"_first","_last",e._sort?"_start":0),tI(t)||(e._recent=t),n||KF(e,t),e._ts<0&&YF(e,e._tTime),e},JF=function(e,t){return(nF.ScrollTrigger||oF("scrollTrigger",t))&&nF.ScrollTrigger.create(t,e)},QF=function(e,t,r,n,i){return iM(e,t,i),e._initted?!r&&e._pt&&!vR&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&CR!==NI.frame?(pF.push(e),e._lazy=[i,n],1):void 0:1},eI=function e(t){var r=t.parent;return r&&r._ts&&r._initted&&!r._lock&&(r.rawTime()<0||e(r))},tI=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},rI=function(e,t,r,n){var i=e._repeat,s=AF(t)||0,o=e._tTime/e._tDur;return o&&!n&&(e._time*=s/e._dur),e._dur=s,e._tDur=i?i<0?1e10:AF(s*(i+1)+e._rDelay*i):s,o>0&&!n&&YF(e,e._tTime=e._tDur*o),e.parent&&XF(e),r||VF(e.parent,e),e},nI=function(e){return e instanceof JI?VF(e):rI(e,e._dur)},iI={_start:0,endTime:uF,totalDuration:uF},sI=function e(t,r,n){var i,s,o,a=t.labels,l=t._recent||iI,u=t.duration()>=PR?l.endTime(!1):t._dur;return LR(r)&&(isNaN(r)||r in a)?(s=r.charAt(0),o="%"===r.substr(-1),i=r.indexOf("="),"<"===s||">"===s?(i>=0&&(r=r.replace(/=/,"")),("<"===s?l._start:l.endTime(l._repeat>=0))+(parseFloat(r.substr(1))||0)*(o?(i<0?l:n).totalDuration()/100:1)):i<0?(r in a||(a[r]=u),a[r]):(s=parseFloat(r.charAt(i-1)+r.substr(i+1)),o&&n&&(s=s/100*(qR(n)?n[0]:n).totalDuration()),i>1?e(t,r.substr(0,i-1),n)+s:u+s)):null==r?u:+r},oI=function(e,t,r){var n,i,s=jR(t[1]),o=(s?2:1)+(e<2?0:1),a=t[o];if(s&&(a.duration=t[1]),a.parent=r,e){for(n=a,i=r;i&&!("immediateRender"in n);)n=i.vars.defaults||{},i=GR(i.vars.inherit)&&i.parent;a.immediateRender=GR(n.immediateRender),e<2?a.runBackwards=1:a.startAt=t[o-1]}return new uM(t[0],a,t[o+1])},aI=function(e,t){return e||0===e?t(e):t},lI=function(e,t,r){return r<e?e:r>t?t:r},uI=function(e,t){return LR(e)&&(t=rF.exec(e))?t[1]:""},cI=[].slice,dI=function(e,t){return e&&VR(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&VR(e[0]))&&!e.nodeType&&e!==wR},hI=function(e,t,r){return void 0===r&&(r=[]),e.forEach(function(e){var n;return LR(e)&&!t||dI(e,1)?(n=r).push.apply(n,fI(e)):r.push(e)})||r},fI=function(e,t,r){return _R&&!t&&_R.selector?_R.selector(e):!LR(e)||r||!xR&&LI()?qR(e)?hI(e,r):dI(e)?cI.call(e,0):e?[e]:[]:cI.call((t||ER).querySelectorAll(e),0)},pI=function(e){return e=fI(e)[0]||aF("Invalid scope")||{},function(t){var r=e.current||e.nativeElement||e;return fI(t,r.querySelectorAll?r:r===e?aF("Invalid scope")||ER.createElement("div"):e)}},mI=function(e){return e.sort(function(){return.5-Math.random()})},gI=function(e){if(UR(e))return e;var t=VR(e)?e:{each:e},r=$I(t.ease),n=t.from||0,i=parseFloat(t.base)||0,s={},o=n>0&&n<1,a=isNaN(n)||o,l=t.axis,u=n,c=n;return LR(n)?u=c={center:.5,edges:.5,end:1}[n]||0:!o&&a&&(u=n[0],c=n[1]),function(e,o,d){var h,f,p,m,g,y,v,_,b,w=(d||t).length,x=s[w];if(!x){if(!(b="auto"===t.grid?0:(t.grid||[1,PR])[1])){for(v=-1e8;v<(v=d[b++].getBoundingClientRect().left)&&b<w;);b<w&&b--}for(x=s[w]=[],h=a?Math.min(b,w)*u-.5:n%b,f=b===PR?0:a?w*c/b-.5:n/b|0,v=0,_=PR,y=0;y<w;y++)p=y%b-h,m=f-(y/b|0),x[y]=g=l?Math.abs("y"===l?m:p):IR(p*p+m*m),g>v&&(v=g),g<_&&(_=g);"random"===n&&mI(x),x.max=v-_,x.min=_,x.v=w=(parseFloat(t.amount)||parseFloat(t.each)*(b>w?w-1:l?"y"===l?w/b:b:Math.max(b,w/b))||0)*("edges"===n?-1:1),x.b=w<0?i-w:i,x.u=uI(t.amount||t.each)||0,r=r&&w<0?GI(r):r}return w=(x[e]-x.min)/x.max||0,AF(x.b+(r?r(w):w)*x.v)+x.u}},yI=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(r){var n=AF(Math.round(parseFloat(r)/e)*e*t);return(n-n%1)/t+(jR(r)?0:uI(r))}},vI=function(e,t){var r,n,i=qR(e);return!i&&VR(e)&&(r=i=e.radius||PR,e.values?(e=fI(e.values),(n=!jR(e[0]))&&(r*=r)):e=yI(e.increment)),aI(t,i?UR(e)?function(t){return n=e(t),Math.abs(n-t)<=r?n:t}:function(t){for(var i,s,o=parseFloat(n?t.x:t),a=parseFloat(n?t.y:0),l=PR,u=0,c=e.length;c--;)(i=n?(i=e[c].x-o)*i+(s=e[c].y-a)*s:Math.abs(e[c]-o))<l&&(l=i,u=c);return u=!r||l<=r?e[u]:t,n||u===t||jR(t)?u:u+uI(t)}:yI(e))},_I=function(e,t,r,n){return aI(qR(e)?!t:!0===r?!!(r=0):!n,function(){return qR(e)?e[~~(Math.random()*e.length)]:(r=r||1e-5)&&(n=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((e-r/2+Math.random()*(t-e+.99*r))/r)*r*n)/n})},bI=function(e,t,r){return aI(r,function(r){return e[~~t(r)]})},wI=function(e){return e.replace(XR,function(e){var t=e.indexOf("[")+1,r=e.substring(t||7,t?e.indexOf("]"):e.length-1).split(YR);return _I(t?r:+r[0],t?0:+r[1],+r[2]||1e-5)})},xI=function(e,t,r,n,i){var s=t-e,o=n-r;return aI(i,function(t){return r+((t-e)/s*o||0)})},EI=function(e,t,r){var n,i,s,o=e.labels,a=PR;for(n in o)(i=o[n]-t)<0==!!r&&i&&a>(i=Math.abs(i))&&(s=n,a=i);return s},SI=function(e,t,r){var n,i,s,o=e.vars,a=o[t],l=_R,u=e._ctx;if(a)return n=o[t+"Params"],i=o.callbackScope||e,r&&pF.length&&kF(),u&&(_R=u),s=n?a.apply(i,n):a.call(i),_R=l,s},CI=function(e){return zF(e),e.scrollTrigger&&e.scrollTrigger.kill(!!vR),e.progress()<1&&SI(e,"onInterrupt"),e},AI=[],TI=function(e){if(e)if(e=!e.name&&e.default||e,HR()||e.headless){var t=e.name,r=UR(e),n=t&&!r&&e.init?function(){this._props=[]}:e,i={init:uF,render:vM,add:rM,kill:bM,modifier:_M,rawVars:0},s={targetTest:0,get:0,getSetter:pM,aliases:{},register:0};if(LI(),e!==n){if(gF[t])return;FF(n,FF(NF(e,i),s)),IF(n.prototype,IF(i,NF(e,s))),gF[n.prop=t]=n,e.targetTest&&(_F.push(n),fF[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}lF(t,n),e.register&&e.register(MM,n,EM)}else AI.push(e)},DI=255,kI={aqua:[0,DI,DI],lime:[0,DI,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,DI],navy:[0,0,128],white:[DI,DI,DI],olive:[128,128,0],yellow:[DI,DI,0],orange:[DI,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[DI,0,0],pink:[DI,192,203],cyan:[0,DI,DI],transparent:[DI,DI,DI,0]},PI=function(e,t,r){return(6*(e+=e<0?1:e>1?-1:0)<1?t+(r-t)*e*6:e<.5?r:3*e<2?t+(r-t)*(2/3-e)*6:t)*DI+.5|0},BI=function(e,t,r){var n,i,s,o,a,l,u,c,d,h,f=e?jR(e)?[e>>16,e>>8&DI,e&DI]:0:kI.black;if(!f){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),kI[e])f=kI[e];else if("#"===e.charAt(0)){if(e.length<6&&(n=e.charAt(1),i=e.charAt(2),s=e.charAt(3),e="#"+n+n+i+i+s+s+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(f=parseInt(e.substr(1,6),16))>>16,f>>8&DI,f&DI,parseInt(e.substr(7),16)/255];f=[(e=parseInt(e.substr(1),16))>>16,e>>8&DI,e&DI]}else if("hsl"===e.substr(0,3))if(f=h=e.match(KR),t){if(~e.indexOf("="))return f=e.match(ZR),r&&f.length<4&&(f[3]=1),f}else o=+f[0]%360/360,a=+f[1]/100,n=2*(l=+f[2]/100)-(i=l<=.5?l*(a+1):l+a-l*a),f.length>3&&(f[3]*=1),f[0]=PI(o+1/3,n,i),f[1]=PI(o,n,i),f[2]=PI(o-1/3,n,i);else f=e.match(KR)||kI.transparent;f=f.map(Number)}return t&&!h&&(n=f[0]/DI,i=f[1]/DI,s=f[2]/DI,l=((u=Math.max(n,i,s))+(c=Math.min(n,i,s)))/2,u===c?o=a=0:(d=u-c,a=l>.5?d/(2-u-c):d/(u+c),o=u===n?(i-s)/d+(i<s?6:0):u===i?(s-n)/d+2:(n-i)/d+4,o*=60),f[0]=~~(o+.5),f[1]=~~(100*a+.5),f[2]=~~(100*l+.5)),r&&f.length<4&&(f[3]=1),f},OI=function(e){var t=[],r=[],n=-1;return e.split(FI).forEach(function(e){var i=e.match(JR)||[];t.push.apply(t,i),r.push(n+=i.length+1)}),t.c=r,t},RI=function(e,t,r){var n,i,s,o,a="",l=(e+a).match(FI),u=t?"hsla(":"rgba(",c=0;if(!l)return e;if(l=l.map(function(e){return(e=BI(e,t,1))&&u+(t?e[0]+","+e[1]+"%,"+e[2]+"%,"+e[3]:e.join(","))+")"}),r&&(s=OI(e),(n=r.c).join(a)!==s.c.join(a)))for(o=(i=e.replace(FI,"1").split(JR)).length-1;c<o;c++)a+=i[c]+(~n.indexOf(c)?l.shift()||u+"0,0,0,0)":(s.length?s:l.length?l:r).shift());if(!i)for(o=(i=e.split(FI)).length-1;c<o;c++)a+=i[c]+l[c];return a+i[o]},FI=function(){var e,t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in kI)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),II=/hsl[a]?\(/,MI=function(e){var t,r=e.join(" ");if(FI.lastIndex=0,FI.test(r))return t=II.test(r),e[1]=RI(e[1],t),e[0]=RI(e[0],t,OI(e[1])),!0},NI=function(){var e,t,r,n,i,s,o=Date.now,a=500,l=33,u=o(),c=u,d=1e3/240,h=d,f=[],p=function r(p){var m,g,y,v,_=o()-c,b=!0===p;if((_>a||_<0)&&(u+=_-l),((m=(y=(c+=_)-u)-h)>0||b)&&(v=++n.frame,i=y-1e3*n.time,n.time=y/=1e3,h+=m+(m>=d?4:d-m),g=1),b||(e=t(r)),g)for(s=0;s<f.length;s++)f[s](y,i,v,p)};return n={time:0,frame:0,tick:function(){p(!0)},deltaRatio:function(e){return i/(1e3/(e||60))},wake:function(){SR&&(!xR&&HR()&&(wR=xR=window,ER=wR.document||{},nF.gsap=MM,(wR.gsapVersions||(wR.gsapVersions=[])).push(MM.version),sF(iF||wR.GreenSockGlobals||!wR.gsap&&wR||{}),AI.forEach(TI)),r="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame,e&&n.sleep(),t=r||function(e){return setTimeout(e,h-1e3*n.time+1|0)},TR=1,p(2))},sleep:function(){(r?cancelAnimationFrame:clearTimeout)(e),TR=0,t=uF},lagSmoothing:function(e,t){a=e||1/0,l=Math.min(t||33,a)},fps:function(e){d=1e3/(e||240),h=1e3*n.time+d},add:function(e,t,r){var i=t?function(t,r,s,o){e(t,r,s,o),n.remove(i)}:e;return n.remove(e),f[r?"unshift":"push"](i),LI(),i},remove:function(e,t){~(t=f.indexOf(e))&&f.splice(t,1)&&s>=t&&s--},_listeners:f},n}(),LI=function(){return!TR&&NI.wake()},UI={},jI=/^[\d.\-M][\d.\-,\s]/,zI=/["']/g,VI=function(e){for(var t,r,n,i={},s=e.substr(1,e.length-3).split(":"),o=s[0],a=1,l=s.length;a<l;a++)r=s[a],t=a!==l-1?r.lastIndexOf(","):r.length,n=r.substr(0,t),i[o]=isNaN(n)?n.replace(zI,"").trim():+n,o=r.substr(t+1).trim();return i},GI=function(e){return function(t){return 1-e(1-t)}},HI=function e(t,r){for(var n,i=t._first;i;)i instanceof JI?e(i,r):!i.vars.yoyoEase||i._yoyo&&i._repeat||i._yoyo===r||(i.timeline?e(i.timeline,r):(n=i._ease,i._ease=i._yEase,i._yEase=n,i._yoyo=r)),i=i._next},$I=function(e,t){return e&&(UR(e)?e:UI[e]||function(e){var t,r,n,i,s=(e+"").split("("),o=UI[s[0]];return o&&s.length>1&&o.config?o.config.apply(null,~e.indexOf("{")?[VI(s[1])]:(t=e,r=t.indexOf("(")+1,n=t.indexOf(")"),i=t.indexOf("(",r),t.substring(r,~i&&i<n?t.indexOf(")",n+1):n)).split(",").map(OF)):UI._CE&&jI.test(e)?UI._CE("",e):o}(e))||t},WI=function(e,t,r,n){void 0===r&&(r=function(e){return 1-t(1-e)}),void 0===n&&(n=function(e){return e<.5?t(2*e)/2:1-t(2*(1-e))/2});var i,s={easeIn:t,easeOut:r,easeInOut:n};return SF(e,function(e){for(var t in UI[e]=nF[e]=s,UI[i=e.toLowerCase()]=r,s)UI[i+("easeIn"===t?".in":"easeOut"===t?".out":".inOut")]=UI[e+"."+t]=s[t]}),s},qI=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},XI=function e(t,r,n){var i=r>=1?r:1,s=(n||(t?.3:.45))/(r<1?r:1),o=s/OR*(Math.asin(1/i)||0),a=function(e){return 1===e?1:i*Math.pow(2,-10*e)*NR((e-o)*s)+1},l="out"===t?a:"in"===t?function(e){return 1-a(1-e)}:qI(a);return s=OR/s,l.config=function(r,n){return e(t,r,n)},l},YI=function e(t,r){void 0===r&&(r=1.70158);var n=function(e){return e?--e*e*((r+1)*e+r)+1:0},i="out"===t?n:"in"===t?function(e){return 1-n(1-e)}:qI(n);return i.config=function(r){return e(t,r)},i};SF("Linear,Quad,Cubic,Quart,Quint,Strong",function(e,t){var r=t<5?t+1:t;WI(e+",Power"+(r-1),t?function(e){return Math.pow(e,r)}:function(e){return e},function(e){return 1-Math.pow(1-e,r)},function(e){return e<.5?Math.pow(2*e,r)/2:1-Math.pow(2*(1-e),r)/2})}),UI.Linear.easeNone=UI.none=UI.Linear.easeIn,WI("Elastic",XI("in"),XI("out"),XI()),function(e,t){var r=1/t,n=2*r,i=2.5*r,s=function(s){return s<r?e*s*s:s<n?e*Math.pow(s-1.5/t,2)+.75:s<i?e*(s-=2.25/t)*s+.9375:e*Math.pow(s-2.625/t,2)+.984375};WI("Bounce",function(e){return 1-s(1-e)},s)}(7.5625,2.75),WI("Expo",function(e){return Math.pow(2,10*(e-1))*e+e*e*e*e*e*e*(1-e)}),WI("Circ",function(e){return-(IR(1-e*e)-1)}),WI("Sine",function(e){return 1===e?1:1-MR(e*RR)}),WI("Back",YI("in"),YI("out"),YI()),UI.SteppedEase=UI.steps=nF.SteppedEase={config:function(e,t){void 0===e&&(e=1);var r=1/e,n=e+(t?0:1),i=t?1:0;return function(e){return((n*lI(0,.99999999,e)|0)+i)*r}}},kR.ease=UI["quad.out"],SF("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(e){return bF+=e+","+e+"Params,"});var KI=function(e,t){this.id=FR++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:EF,this.set=t?t.getSetter:pM},ZI=function(){function e(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,rI(this,+e.duration,1,1),this.data=e.data,_R&&(this._ctx=_R,_R.data.push(this)),TR||NI.wake()}var t=e.prototype;return t.delay=function(e){return e||0===e?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},t.duration=function(e){return arguments.length?this.totalDuration(this._repeat>0?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},t.totalDuration=function(e){return arguments.length?(this._dirty=0,rI(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(e,t){if(LI(),!arguments.length)return this._tTime;var r=this._dp;if(r&&r.smoothChildTiming&&this._ts){for(YF(this,e),!r._dp||r.parent||KF(r,this);r&&r.parent;)r.parent._time!==r._start+(r._ts>=0?r._tTime/r._ts:(r.totalDuration()-r._tTime)/-r._ts)&&r.totalTime(r._tTime,!0),r=r.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&e<this._tDur||this._ts<0&&e>0||!this._tDur&&!e)&&ZF(this._dp,this,this._start-this._delay)}return(this._tTime!==e||!this._dur&&!t||this._initted&&Math.abs(this._zTime)===BR||!this._initted&&this._dur&&e||!e&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=e),BF(this,e,t)),this},t.time=function(e,t){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+$F(this))%(this._dur+this._rDelay)||(e?this._dur:0),t):this._time},t.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?e:1-e)+$F(this),t):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(e,t){var r=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*r,t):this._repeat?WF(this._tTime,r)+1:1},t.timeScale=function(e,t){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===e)return this;var r=this.parent&&this._ts?qF(this.parent._time,this):this._tTime;return this._rts=+e||0,this._ts=this._ps||-1e-8===e?0:this._rts,this.totalTime(lI(-Math.abs(this._delay),this.totalDuration(),r),!1!==t),XF(this),function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e}(this)},t.paused=function(e){return arguments.length?(this._ps!==e&&(this._ps=e,e?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(LI(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==BR&&(this._tTime-=BR)))),this):this._ps},t.startTime=function(e){if(arguments.length){this._start=AF(e);var t=this.parent||this._dp;return t&&(t._sort||!this.parent)&&ZF(t,this,this._start-this._delay),this}return this._start},t.endTime=function(e){return this._start+(GR(e)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(e){var t=this.parent||this._dp;return t?e&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?qF(t.rawTime(e),this):this._tTime:this._tTime},t.revert=function(e){void 0===e&&(e=hF);var t=vR;return vR=e,PF(this)&&(this.timeline&&this.timeline.revert(e),this.totalTime(-.01,e.suppressEvents)),"nested"!==this.data&&!1!==e.kill&&this.kill(),vR=t,this},t.globalTime=function(e){for(var t=this,r=arguments.length?e:t.rawTime();t;)r=t._start+r/(Math.abs(t._ts)||1),t=t._dp;return!this.parent&&this._sat?this._sat.globalTime(e):r},t.repeat=function(e){return arguments.length?(this._repeat=e===1/0?-2:e,nI(this)):-2===this._repeat?1/0:this._repeat},t.repeatDelay=function(e){if(arguments.length){var t=this._time;return this._rDelay=e,nI(this),t?this.time(t):this}return this._rDelay},t.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},t.seek=function(e,t){return this.totalTime(sI(this,e),GR(t))},t.restart=function(e,t){return this.play().totalTime(e?-this._delay:0,GR(t)),this._dur||(this._zTime=-1e-8),this},t.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},t.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},t.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-1e-8:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},t.isActive=function(){var e,t=this.parent||this._dp,r=this._start;return!(t&&!(this._ts&&this._initted&&t.isActive()&&(e=t.rawTime(!0))>=r&&e<this.endTime(!0)-BR))},t.eventCallback=function(e,t,r){var n=this.vars;return arguments.length>1?(t?(n[e]=t,r&&(n[e+"Params"]=r),"onUpdate"===e&&(this._onUpdate=t)):delete n[e],this):n[e]},t.then=function(e){var t=this,r=t._prom;return new Promise(function(n){var i=UR(e)?e:RF,s=function(){var e=t.then;t.then=null,r&&r(),UR(i)&&(i=i(t))&&(i.then||i===t)&&(t.then=e),n(i),t.then=e};t._initted&&1===t.totalProgress()&&t._ts>=0||!t._tTime&&t._ts<0?s():t._prom=s})},t.kill=function(){CI(this)},e}();FF(ZI.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var JI=function(e){function t(t,r){var n;return void 0===t&&(t={}),(n=e.call(this,t)||this).labels={},n.smoothChildTiming=!!t.smoothChildTiming,n.autoRemoveChildren=!!t.autoRemoveChildren,n._sort=GR(t.sortChildren),bR&&ZF(t.parent||bR,mR(n),r),t.reversed&&n.reverse(),t.paused&&n.paused(!0),t.scrollTrigger&&JF(mR(n),t.scrollTrigger),n}gR(t,e);var r=t.prototype;return r.to=function(e,t,r){return oI(0,arguments,this),this},r.from=function(e,t,r){return oI(1,arguments,this),this},r.fromTo=function(e,t,r,n){return oI(2,arguments,this),this},r.set=function(e,t,r){return t.duration=0,t.parent=this,LF(t).repeatDelay||(t.repeat=0),t.immediateRender=!!t.immediateRender,new uM(e,t,sI(this,r),1),this},r.call=function(e,t,r){return ZF(this,uM.delayedCall(0,e,t),r)},r.staggerTo=function(e,t,r,n,i,s,o){return r.duration=t,r.stagger=r.stagger||n,r.onComplete=s,r.onCompleteParams=o,r.parent=this,new uM(e,r,sI(this,i)),this},r.staggerFrom=function(e,t,r,n,i,s,o){return r.runBackwards=1,LF(r).immediateRender=GR(r.immediateRender),this.staggerTo(e,t,r,n,i,s,o)},r.staggerFromTo=function(e,t,r,n,i,s,o,a){return n.startAt=r,LF(n).immediateRender=GR(n.immediateRender),this.staggerTo(e,t,n,i,s,o,a)},r.render=function(e,t,r){var n,i,s,o,a,l,u,c,d,h,f,p,m=this._time,g=this._dirty?this.totalDuration():this._tDur,y=this._dur,v=e<=0?0:AF(e),_=this._zTime<0!=e<0&&(this._initted||!y);if(this!==bR&&v>g&&e>=0&&(v=g),v!==this._tTime||r||_){if(m!==this._time&&y&&(v+=this._time-m,e+=this._time-m),n=v,d=this._start,l=!(c=this._ts),_&&(y||(m=this._zTime),(e||!t)&&(this._zTime=e)),this._repeat){if(f=this._yoyo,a=y+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*a+e,t,r);if(n=AF(v%a),v===g?(o=this._repeat,n=y):((o=~~(h=AF(v/a)))&&o===h&&(n=y,o--),n>y&&(n=y)),h=WF(this._tTime,a),!m&&this._tTime&&h!==o&&this._tTime-h*a-this._dur<=0&&(h=o),f&&1&o&&(n=y-n,p=1),o!==h&&!this._lock){var b=f&&1&h,w=b===(f&&1&o);if(o<h&&(b=!b),m=b?0:v%y?y:v,this._lock=1,this.render(m||(p?0:AF(o*a)),t,!y)._lock=0,this._tTime=v,!t&&this.parent&&SI(this,"onRepeat"),this.vars.repeatRefresh&&!p&&(this.invalidate()._lock=1,h=o),m&&m!==this._time||l!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(y=this._dur,g=this._tDur,w&&(this._lock=2,m=b?y:-1e-4,this.render(m,!0),this.vars.repeatRefresh&&!p&&this.invalidate()),this._lock=0,!this._ts&&!l)return this;HI(this,p)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(u=function(e,t,r){var n;if(r>t)for(n=e._first;n&&n._start<=r;){if("isPause"===n.data&&n._start>t)return n;n=n._next}else for(n=e._last;n&&n._start>=r;){if("isPause"===n.data&&n._start<t)return n;n=n._prev}}(this,AF(m),AF(n)),u&&(v-=n-(n=u._start))),this._tTime=v,this._time=n,this._act=!c,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=e,m=0),!m&&v&&y&&!t&&!h&&(SI(this,"onStart"),this._tTime!==v))return this;if(n>=m&&e>=0)for(i=this._first;i;){if(s=i._next,(i._act||n>=i._start)&&i._ts&&u!==i){if(i.parent!==this)return this.render(e,t,r);if(i.render(i._ts>0?(n-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(n-i._start)*i._ts,t,r),n!==this._time||!this._ts&&!l){u=0,s&&(v+=this._zTime=-1e-8);break}}i=s}else{i=this._last;for(var x=e<0?e:n;i;){if(s=i._prev,(i._act||x<=i._end)&&i._ts&&u!==i){if(i.parent!==this)return this.render(e,t,r);if(i.render(i._ts>0?(x-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(x-i._start)*i._ts,t,r||vR&&PF(i)),n!==this._time||!this._ts&&!l){u=0,s&&(v+=this._zTime=x?-1e-8:BR);break}}i=s}}if(u&&!t&&(this.pause(),u.render(n>=m?0:-1e-8)._zTime=n>=m?1:-1,this._ts))return this._start=d,XF(this),this.render(e,t,r);this._onUpdate&&!t&&SI(this,"onUpdate",!0),(v===g&&this._tTime>=this.totalDuration()||!v&&m)&&(d!==this._start&&Math.abs(c)===Math.abs(this._ts)||this._lock||((e||!y)&&(v===g&&this._ts>0||!v&&this._ts<0)&&zF(this,1),t||e<0&&!m||!v&&!m&&g||(SI(this,v===g&&e>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(v<g&&this.timeScale()>0)&&this._prom())))}return this},r.add=function(e,t){var r=this;if(jR(t)||(t=sI(this,t,e)),!(e instanceof ZI)){if(qR(e))return e.forEach(function(e){return r.add(e,t)}),this;if(LR(e))return this.addLabel(e,t);if(!UR(e))return this;e=uM.delayedCall(0,e)}return this!==e?ZF(this,e,t):this},r.getChildren=function(e,t,r,n){void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===r&&(r=!0),void 0===n&&(n=-1e8);for(var i=[],s=this._first;s;)s._start>=n&&(s instanceof uM?t&&i.push(s):(r&&i.push(s),e&&i.push.apply(i,s.getChildren(!0,t,r)))),s=s._next;return i},r.getById=function(e){for(var t=this.getChildren(1,1,1),r=t.length;r--;)if(t[r].vars.id===e)return t[r]},r.remove=function(e){return LR(e)?this.removeLabel(e):UR(e)?this.killTweensOf(e):(e.parent===this&&jF(this,e),e===this._recent&&(this._recent=this._last),VF(this))},r.totalTime=function(t,r){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=AF(NI.time-(this._ts>0?t/this._ts:(this.totalDuration()-t)/-this._ts))),e.prototype.totalTime.call(this,t,r),this._forcing=0,this):this._tTime},r.addLabel=function(e,t){return this.labels[e]=sI(this,t),this},r.removeLabel=function(e){return delete this.labels[e],this},r.addPause=function(e,t,r){var n=uM.delayedCall(0,t||uF,r);return n.data="isPause",this._hasPause=1,ZF(this,n,sI(this,e))},r.removePause=function(e){var t=this._first;for(e=sI(this,e);t;)t._start===e&&"isPause"===t.data&&zF(t),t=t._next},r.killTweensOf=function(e,t,r){for(var n=this.getTweensOf(e,r),i=n.length;i--;)QI!==n[i]&&n[i].kill(e,t);return this},r.getTweensOf=function(e,t){for(var r,n=[],i=fI(e),s=this._first,o=jR(t);s;)s instanceof uM?DF(s._targets,i)&&(o?(!QI||s._initted&&s._ts)&&s.globalTime(0)<=t&&s.globalTime(s.totalDuration())>t:!t||s.isActive())&&n.push(s):(r=s.getTweensOf(i,t)).length&&n.push.apply(n,r),s=s._next;return n},r.tweenTo=function(e,t){t=t||{};var r,n=this,i=sI(n,e),s=t,o=s.startAt,a=s.onStart,l=s.onStartParams,u=s.immediateRender,c=uM.to(n,FF({ease:t.ease||"none",lazy:!1,immediateRender:!1,time:i,overwrite:"auto",duration:t.duration||Math.abs((i-(o&&"time"in o?o.time:n._time))/n.timeScale())||BR,onStart:function(){if(n.pause(),!r){var e=t.duration||Math.abs((i-(o&&"time"in o?o.time:n._time))/n.timeScale());c._dur!==e&&rI(c,e,0,1).render(c._time,!0,!0),r=1}a&&a.apply(c,l||[])}},t));return u?c.render(0):c},r.tweenFromTo=function(e,t,r){return this.tweenTo(t,FF({startAt:{time:sI(this,e)}},r))},r.recent=function(){return this._recent},r.nextLabel=function(e){return void 0===e&&(e=this._time),EI(this,sI(this,e))},r.previousLabel=function(e){return void 0===e&&(e=this._time),EI(this,sI(this,e),1)},r.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.previousLabel(this._time+BR)},r.shiftChildren=function(e,t,r){void 0===r&&(r=0);var n,i=this._first,s=this.labels;for(e=AF(e);i;)i._start>=r&&(i._start+=e,i._end+=e),i=i._next;if(t)for(n in s)s[n]>=r&&(s[n]+=e);return VF(this)},r.invalidate=function(t){var r=this._first;for(this._lock=0;r;)r.invalidate(t),r=r._next;return e.prototype.invalidate.call(this,t)},r.clear=function(e){void 0===e&&(e=!0);for(var t,r=this._first;r;)t=r._next,this.remove(r),r=t;return this._dp&&(this._time=this._tTime=this._pTime=0),e&&(this.labels={}),VF(this)},r.totalDuration=function(e){var t,r,n,i=0,s=this,o=s._last,a=PR;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-e:e));if(s._dirty){for(n=s.parent;o;)t=o._prev,o._dirty&&o.totalDuration(),(r=o._start)>a&&s._sort&&o._ts&&!s._lock?(s._lock=1,ZF(s,o,r-o._delay,1)._lock=0):a=r,r<0&&o._ts&&(i-=r,(!n&&!s._dp||n&&n.smoothChildTiming)&&(s._start+=AF(r/s._ts),s._time-=r,s._tTime-=r),s.shiftChildren(-r,!1,-Infinity),a=0),o._end>i&&o._ts&&(i=o._end),o=t;rI(s,s===bR&&s._time>i?s._time:i,1,1),s._dirty=0}return s._tDur},t.updateRoot=function(e){if(bR._ts&&(BF(bR,qF(e,bR)),CR=NI.frame),NI.frame>=vF){vF+=DR.autoSleep||120;var t=bR._first;if((!t||!t._ts)&&DR.autoSleep&&NI._listeners.length<2){for(;t&&!t._ts;)t=t._next;t||NI.sleep()}}},t}(ZI);FF(JI.prototype,{_lock:0,_hasPause:0,_forcing:0});var QI,eM,tM=function(e,t,r,n,i,s,o){var a,l,u,c,d,h,f,p,m=new EM(this._pt,e,t,0,1,yM,null,i),g=0,y=0;for(m.b=r,m.e=n,r+="",(f=~(n+="").indexOf("random("))&&(n=wI(n)),s&&(s(p=[r,n],e,t),r=p[0],n=p[1]),l=r.match(QR)||[];a=QR.exec(n);)c=a[0],d=n.substring(g,a.index),u?u=(u+1)%5:"rgba("===d.substr(-5)&&(u=1),c!==l[y++]&&(h=parseFloat(l[y-1])||0,m._pt={_next:m._pt,p:d||1===y?d:",",s:h,c:"="===c.charAt(1)?TF(h,c)-h:parseFloat(c)-h,m:u&&u<4?Math.round:0},g=QR.lastIndex);return m.c=g<n.length?n.substring(g,n.length):"",m.fp=o,(eF.test(n)||f)&&(m.e=0),this._pt=m,m},rM=function(e,t,r,n,i,s,o,a,l,u){UR(n)&&(n=n(i||0,e,s));var c,d=e[t],h="get"!==r?r:UR(d)?l?e[t.indexOf("set")||!UR(e["get"+t.substr(3)])?t:"get"+t.substr(3)](l):e[t]():d,f=UR(d)?l?hM:dM:cM;if(LR(n)&&(~n.indexOf("random(")&&(n=wI(n)),"="===n.charAt(1)&&((c=TF(h,n)+(uI(h)||0))||0===c)&&(n=c)),!u||h!==n||eM)return isNaN(h*n)||""===n?(!d&&!(t in e)&&oF(t,n),tM.call(this,e,t,h,n,f,a||DR.stringFilter,l)):(c=new EM(this._pt,e,t,+h||0,n-(h||0),"boolean"==typeof d?gM:mM,0,f),l&&(c.fp=l),o&&c.modifier(o,this,e),this._pt=c)},nM=function(e,t,r,n,i,s){var o,a,l,u;if(gF[e]&&!1!==(o=new gF[e]).init(i,o.rawVars?t[e]:function(e,t,r,n,i){if(UR(e)&&(e=oM(e,i,t,r,n)),!VR(e)||e.style&&e.nodeType||qR(e)||WR(e))return LR(e)?oM(e,i,t,r,n):e;var s,o={};for(s in e)o[s]=oM(e[s],i,t,r,n);return o}(t[e],n,i,s,r),r,n,s)&&(r._pt=a=new EM(r._pt,i,e,0,1,o.render,o,0,o.priority),r!==AR))for(l=r._ptLookup[r._targets.indexOf(i)],u=o._props.length;u--;)l[o._props[u]]=a;return o},iM=function e(t,r,n){var i,s,o,a,l,u,c,d,h,f,p,m,g,y=t.vars,v=y.ease,_=y.startAt,b=y.immediateRender,w=y.lazy,x=y.onUpdate,E=y.runBackwards,S=y.yoyoEase,C=y.keyframes,A=y.autoRevert,T=t._dur,D=t._startAt,k=t._targets,P=t.parent,B=P&&"nested"===P.data?P.vars.targets:k,O="auto"===t._overwrite&&!yR,R=t.timeline;if(R&&(!C||!v)&&(v="none"),t._ease=$I(v,kR.ease),t._yEase=S?GI($I(!0===S?v:S,kR.ease)):0,S&&t._yoyo&&!t._repeat&&(S=t._yEase,t._yEase=t._ease,t._ease=S),t._from=!R&&!!y.runBackwards,!R||C&&!y.stagger){if(m=(d=k[0]?xF(k[0]).harness:0)&&y[d.prop],i=NF(y,fF),D&&(D._zTime<0&&D.progress(1),r<0&&E&&b&&!A?D.render(-1,!0):D.revert(E&&T?dF:cF),D._lazy=0),_){if(zF(t._startAt=uM.set(k,FF({data:"isStart",overwrite:!1,parent:P,immediateRender:!0,lazy:!D&&GR(w),startAt:null,delay:0,onUpdate:x&&function(){return SI(t,"onUpdate")},stagger:0},_))),t._startAt._dp=0,t._startAt._sat=t,r<0&&(vR||!b&&!A)&&t._startAt.revert(dF),b&&T&&r<=0&&n<=0)return void(r&&(t._zTime=r))}else if(E&&T&&!D)if(r&&(b=!1),o=FF({overwrite:!1,data:"isFromStart",lazy:b&&!D&&GR(w),immediateRender:b,stagger:0,parent:P},i),m&&(o[d.prop]=m),zF(t._startAt=uM.set(k,o)),t._startAt._dp=0,t._startAt._sat=t,r<0&&(vR?t._startAt.revert(dF):t._startAt.render(-1,!0)),t._zTime=r,b){if(!r)return}else e(t._startAt,BR,BR);for(t._pt=t._ptCache=0,w=T&&GR(w)||w&&!T,s=0;s<k.length;s++){if(c=(l=k[s])._gsap||wF(k)[s]._gsap,t._ptLookup[s]=f={},mF[c.id]&&pF.length&&kF(),p=B===k?s:B.indexOf(l),d&&!1!==(h=new d).init(l,m||i,t,p,B)&&(t._pt=a=new EM(t._pt,l,h.name,0,1,h.render,h,0,h.priority),h._props.forEach(function(e){f[e]=a}),h.priority&&(u=1)),!d||m)for(o in i)gF[o]&&(h=nM(o,i,t,p,l,B))?h.priority&&(u=1):f[o]=a=rM.call(t,l,o,"get",i[o],p,B,0,y.stringFilter);t._op&&t._op[s]&&t.kill(l,t._op[s]),O&&t._pt&&(QI=t,bR.killTweensOf(l,f,t.globalTime(r)),g=!t.parent,QI=0),t._pt&&w&&(mF[c.id]=1)}u&&xM(t),t._onInit&&t._onInit(t)}t._onUpdate=x,t._initted=(!t._op||t._pt)&&!g,C&&r<=0&&R.render(PR,!0,!0)},sM=function(e,t,r,n){var i,s,o=t.ease||n||"power1.inOut";if(qR(t))s=r[e]||(r[e]=[]),t.forEach(function(e,r){return s.push({t:r/(t.length-1)*100,v:e,e:o})});else for(i in t)s=r[i]||(r[i]=[]),"ease"===i||s.push({t:parseFloat(e),v:t[i],e:o})},oM=function(e,t,r,n,i){return UR(e)?e.call(t,r,n,i):LR(e)&&~e.indexOf("random(")?wI(e):e},aM=bF+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",lM={};SF(aM+",id,stagger,delay,duration,paused,scrollTrigger",function(e){return lM[e]=1});var uM=function(e){function t(t,r,n,i){var s;"number"==typeof r&&(n.duration=r,r=n,n=null);var o,a,l,u,c,d,h,f,p=(s=e.call(this,i?r:LF(r))||this).vars,m=p.duration,g=p.delay,y=p.immediateRender,v=p.stagger,_=p.overwrite,b=p.keyframes,w=p.defaults,x=p.scrollTrigger,E=p.yoyoEase,S=r.parent||bR,C=(qR(t)||WR(t)?jR(t[0]):"length"in r)?[t]:fI(t);if(s._targets=C.length?wF(C):aF("GSAP target "+t+" not found. https://gsap.com",!DR.nullTargetWarn)||[],s._ptLookup=[],s._overwrite=_,b||v||$R(m)||$R(g)){if(r=s.vars,(o=s.timeline=new JI({data:"nested",defaults:w||{},targets:S&&"nested"===S.data?S.vars.targets:C})).kill(),o.parent=o._dp=mR(s),o._start=0,v||$R(m)||$R(g)){if(u=C.length,h=v&&gI(v),VR(v))for(c in v)~aM.indexOf(c)&&(f||(f={}),f[c]=v[c]);for(a=0;a<u;a++)(l=NF(r,lM)).stagger=0,E&&(l.yoyoEase=E),f&&IF(l,f),d=C[a],l.duration=+oM(m,mR(s),a,d,C),l.delay=(+oM(g,mR(s),a,d,C)||0)-s._delay,!v&&1===u&&l.delay&&(s._delay=g=l.delay,s._start+=g,l.delay=0),o.to(d,l,h?h(a,d,C):0),o._ease=UI.none;o.duration()?m=g=0:s.timeline=0}else if(b){LF(FF(o.vars.defaults,{ease:"none"})),o._ease=$I(b.ease||r.ease||"none");var A,T,D,k=0;if(qR(b))b.forEach(function(e){return o.to(C,e,">")}),o.duration();else{for(c in l={},b)"ease"===c||"easeEach"===c||sM(c,b[c],l,b.easeEach);for(c in l)for(A=l[c].sort(function(e,t){return e.t-t.t}),k=0,a=0;a<A.length;a++)(D={ease:(T=A[a]).e,duration:(T.t-(a?A[a-1].t:0))/100*m})[c]=T.v,o.to(C,D,k),k+=D.duration;o.duration()<m&&o.to({},{duration:m-o.duration()})}}m||s.duration(m=o.duration())}else s.timeline=0;return!0!==_||yR||(QI=mR(s),bR.killTweensOf(C),QI=0),ZF(S,mR(s),n),r.reversed&&s.reverse(),r.paused&&s.paused(!0),(y||!m&&!b&&s._start===AF(S._time)&&GR(y)&&HF(mR(s))&&"nested"!==S.data)&&(s._tTime=-1e-8,s.render(Math.max(0,-g)||0)),x&&JF(mR(s),x),s}gR(t,e);var r=t.prototype;return r.render=function(e,t,r){var n,i,s,o,a,l,u,c,d,h=this._time,f=this._tDur,p=this._dur,m=e<0,g=e>f-BR&&!m?f:e<BR?0:e;if(p){if(g!==this._tTime||!e||r||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==m||this._lazy){if(n=g,c=this.timeline,this._repeat){if(o=p+this._rDelay,this._repeat<-1&&m)return this.totalTime(100*o+e,t,r);if(n=AF(g%o),g===f?(s=this._repeat,n=p):(s=~~(a=AF(g/o)))&&s===a?(n=p,s--):n>p&&(n=p),(l=this._yoyo&&1&s)&&(d=this._yEase,n=p-n),a=WF(this._tTime,o),n===h&&!r&&this._initted&&s===a)return this._tTime=g,this;s!==a&&(c&&this._yEase&&HI(c,l),this.vars.repeatRefresh&&!l&&!this._lock&&n!==o&&this._initted&&(this._lock=r=1,this.render(AF(o*s),!0).invalidate()._lock=0))}if(!this._initted){if(QF(this,m?e:n,r,t,g))return this._tTime=0,this;if(!(h===this._time||r&&this.vars.repeatRefresh&&s!==a))return this;if(p!==this._dur)return this.render(e,t,r)}if(this._tTime=g,this._time=n,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=u=(d||this._ease)(n/p),this._from&&(this.ratio=u=1-u),!h&&g&&!t&&!a&&(SI(this,"onStart"),this._tTime!==g))return this;for(i=this._pt;i;)i.r(u,i.d),i=i._next;c&&c.render(e<0?e:c._dur*c._ease(n/this._dur),t,r)||this._startAt&&(this._zTime=e),this._onUpdate&&!t&&(m&&GF(this,e,0,r),SI(this,"onUpdate")),this._repeat&&s!==a&&this.vars.onRepeat&&!t&&this.parent&&SI(this,"onRepeat"),g!==this._tDur&&g||this._tTime!==g||(m&&!this._onUpdate&&GF(this,e,0,!0),(e||!p)&&(g===this._tDur&&this._ts>0||!g&&this._ts<0)&&zF(this,1),t||m&&!h||!(g||h||l)||(SI(this,g===f?"onComplete":"onReverseComplete",!0),this._prom&&!(g<f&&this.timeScale()>0)&&this._prom()))}}else!function(e,t,r,n){var i,s,o,a=e.ratio,l=t<0||!t&&(!e._start&&eI(e)&&(e._initted||!tI(e))||(e._ts<0||e._dp._ts<0)&&!tI(e))?0:1,u=e._rDelay,c=0;if(u&&e._repeat&&(c=lI(0,e._tDur,t),s=WF(c,u),e._yoyo&&1&s&&(l=1-l),s!==WF(e._tTime,u)&&(a=1-l,e.vars.repeatRefresh&&e._initted&&e.invalidate())),l!==a||vR||n||e._zTime===BR||!t&&e._zTime){if(!e._initted&&QF(e,t,n,r,c))return;for(o=e._zTime,e._zTime=t||(r?BR:0),r||(r=t&&!o),e.ratio=l,e._from&&(l=1-l),e._time=0,e._tTime=c,i=e._pt;i;)i.r(l,i.d),i=i._next;t<0&&GF(e,t,0,!0),e._onUpdate&&!r&&SI(e,"onUpdate"),c&&e._repeat&&!r&&e.parent&&SI(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===l&&(l&&zF(e,1),r||vR||(SI(e,l?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}(this,e,t,r);return this},r.targets=function(){return this._targets},r.invalidate=function(t){return(!t||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(t),e.prototype.invalidate.call(this,t)},r.resetTo=function(e,t,r,n,i){TR||NI.wake(),this._ts||this.play();var s=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||iM(this,s),function(e,t,r,n,i,s,o,a){var l,u,c,d,h=(e._pt&&e._ptCache||(e._ptCache={}))[t];if(!h)for(h=e._ptCache[t]=[],c=e._ptLookup,d=e._targets.length;d--;){if((l=c[d][t])&&l.d&&l.d._pt)for(l=l.d._pt;l&&l.p!==t&&l.fp!==t;)l=l._next;if(!l)return eM=1,e.vars[t]="+=0",iM(e,o),eM=0,a?aF(t+" not eligible for reset"):1;h.push(l)}for(d=h.length;d--;)(l=(u=h[d])._pt||u).s=!n&&0!==n||i?l.s+(n||0)+s*l.c:n,l.c=r-l.s,u.e&&(u.e=CF(r)+uI(u.e)),u.b&&(u.b=l.s+uI(u.b))}(this,e,t,r,n,this._ease(s/this._dur),s,i)?this.resetTo(e,t,r,n,1):(YF(this,0),this.parent||UF(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},r.kill=function(e,t){if(void 0===t&&(t="all"),!(e||t&&"all"!==t))return this._lazy=this._pt=0,this.parent?CI(this):this.scrollTrigger&&this.scrollTrigger.kill(!!vR),this;if(this.timeline){var r=this.timeline.totalDuration();return this.timeline.killTweensOf(e,t,QI&&!0!==QI.vars.overwrite)._first||CI(this),this.parent&&r!==this.timeline.totalDuration()&&rI(this,this._dur*this.timeline._tDur/r,0,1),this}var n,i,s,o,a,l,u,c=this._targets,d=e?fI(e):c,h=this._ptLookup,f=this._pt;if((!t||"all"===t)&&function(e,t){for(var r=e.length,n=r===t.length;n&&r--&&e[r]===t[r];);return r<0}(c,d))return"all"===t&&(this._pt=0),CI(this);for(n=this._op=this._op||[],"all"!==t&&(LR(t)&&(a={},SF(t,function(e){return a[e]=1}),t=a),t=function(e,t){var r,n,i,s,o=e[0]?xF(e[0]).harness:0,a=o&&o.aliases;if(!a)return t;for(n in r=IF({},t),a)if(n in r)for(i=(s=a[n].split(",")).length;i--;)r[s[i]]=r[n];return r}(c,t)),u=c.length;u--;)if(~d.indexOf(c[u]))for(a in i=h[u],"all"===t?(n[u]=t,o=i,s={}):(s=n[u]=n[u]||{},o=t),o)(l=i&&i[a])&&("kill"in l.d&&!0!==l.d.kill(a)||jF(this,l,"_pt"),delete i[a]),"all"!==s&&(s[a]=1);return this._initted&&!this._pt&&f&&CI(this),this},t.to=function(e,r){return new t(e,r,arguments[2])},t.from=function(e,t){return oI(1,arguments)},t.delayedCall=function(e,r,n,i){return new t(r,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:e,onComplete:r,onReverseComplete:r,onCompleteParams:n,onReverseCompleteParams:n,callbackScope:i})},t.fromTo=function(e,t,r){return oI(2,arguments)},t.set=function(e,r){return r.duration=0,r.repeatDelay||(r.repeat=0),new t(e,r)},t.killTweensOf=function(e,t,r){return bR.killTweensOf(e,t,r)},t}(ZI);FF(uM.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),SF("staggerTo,staggerFrom,staggerFromTo",function(e){uM[e]=function(){var t=new JI,r=cI.call(arguments,0);return r.splice("staggerFromTo"===e?5:4,0,0),t[e].apply(t,r)}});var cM=function(e,t,r){return e[t]=r},dM=function(e,t,r){return e[t](r)},hM=function(e,t,r,n){return e[t](n.fp,r)},fM=function(e,t,r){return e.setAttribute(t,r)},pM=function(e,t){return UR(e[t])?dM:zR(e[t])&&e.setAttribute?fM:cM},mM=function(e,t){return t.set(t.t,t.p,Math.round(1e6*(t.s+t.c*e))/1e6,t)},gM=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},yM=function(e,t){var r=t._pt,n="";if(!e&&t.b)n=t.b;else if(1===e&&t.e)n=t.e;else{for(;r;)n=r.p+(r.m?r.m(r.s+r.c*e):Math.round(1e4*(r.s+r.c*e))/1e4)+n,r=r._next;n+=t.c}t.set(t.t,t.p,n,t)},vM=function(e,t){for(var r=t._pt;r;)r.r(e,r.d),r=r._next},_M=function(e,t,r,n){for(var i,s=this._pt;s;)i=s._next,s.p===n&&s.modifier(e,t,r),s=i},bM=function(e){for(var t,r,n=this._pt;n;)r=n._next,n.p===e&&!n.op||n.op===e?jF(this,n,"_pt"):n.dep||(t=1),n=r;return!t},wM=function(e,t,r,n){n.mSet(e,t,n.m.call(n.tween,r,n.mt),n)},xM=function(e){for(var t,r,n,i,s=e._pt;s;){for(t=s._next,r=n;r&&r.pr>s.pr;)r=r._next;(s._prev=r?r._prev:i)?s._prev._next=s:n=s,(s._next=r)?r._prev=s:i=s,s=t}e._pt=n},EM=function(){function e(e,t,r,n,i,s,o,a,l){this.t=t,this.s=n,this.c=i,this.p=r,this.r=s||mM,this.d=o||this,this.set=a||cM,this.pr=l||0,this._next=e,e&&(e._prev=this)}return e.prototype.modifier=function(e,t,r){this.mSet=this.mSet||this.set,this.set=wM,this.m=e,this.mt=r,this.tween=t},e}();SF(bF+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(e){return fF[e]=1}),nF.TweenMax=nF.TweenLite=uM,nF.TimelineLite=nF.TimelineMax=JI,bR=new JI({sortChildren:!1,defaults:kR,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),DR.stringFilter=MI;var SM=[],CM={},AM=[],TM=0,DM=0,kM=function(e){return(CM[e]||AM).map(function(e){return e()})},PM=function(){var e=Date.now(),t=[];e-TM>2&&(kM("matchMediaInit"),SM.forEach(function(e){var r,n,i,s,o=e.queries,a=e.conditions;for(n in o)(r=wR.matchMedia(o[n]).matches)&&(i=1),r!==a[n]&&(a[n]=r,s=1);s&&(e.revert(),i&&t.push(e))}),kM("matchMediaRevert"),t.forEach(function(e){return e.onMatch(e,function(t){return e.add(null,t)})}),TM=e,kM("matchMedia"))},BM=function(){function e(e,t){this.selector=t&&pI(t),this.data=[],this._r=[],this.isReverted=!1,this.id=DM++,e&&this.add(e)}var t=e.prototype;return t.add=function(e,t,r){UR(e)&&(r=t,t=e,e=UR);var n=this,i=function(){var e,i=_R,s=n.selector;return i&&i!==n&&i.data.push(n),r&&(n.selector=pI(r)),_R=n,e=t.apply(n,arguments),UR(e)&&n._r.push(e),_R=i,n.selector=s,n.isReverted=!1,e};return n.last=i,e===UR?i(n,function(e){return n.add(null,e)}):e?n[e]=i:i},t.ignore=function(e){var t=_R;_R=null,e(this),_R=t},t.getTweens=function(){var t=[];return this.data.forEach(function(r){return r instanceof e?t.push.apply(t,r.getTweens()):r instanceof uM&&!(r.parent&&"nested"===r.parent.data)&&t.push(r)}),t},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(e,t){var r=this;if(e?function(){for(var t,n=r.getTweens(),i=r.data.length;i--;)"isFlip"===(t=r.data[i]).data&&(t.revert(),t.getChildren(!0,!0,!1).forEach(function(e){return n.splice(n.indexOf(e),1)}));for(n.map(function(e){return{g:e._dur||e._delay||e._sat&&!e._sat.vars.immediateRender?e.globalTime(0):-1/0,t:e}}).sort(function(e,t){return t.g-e.g||-1/0}).forEach(function(t){return t.t.revert(e)}),i=r.data.length;i--;)(t=r.data[i])instanceof JI?"nested"!==t.data&&(t.scrollTrigger&&t.scrollTrigger.revert(),t.kill()):!(t instanceof uM)&&t.revert&&t.revert(e);r._r.forEach(function(t){return t(e,r)}),r.isReverted=!0}():this.data.forEach(function(e){return e.kill&&e.kill()}),this.clear(),t)for(var n=SM.length;n--;)SM[n].id===this.id&&SM.splice(n,1)},t.revert=function(e){this.kill(e||{})},e}(),OM=function(){function e(e){this.contexts=[],this.scope=e,_R&&_R.data.push(this)}var t=e.prototype;return t.add=function(e,t,r){VR(e)||(e={matches:e});var n,i,s,o=new BM(0,r||this.scope),a=o.conditions={};for(i in _R&&!o.selector&&(o.selector=_R.selector),this.contexts.push(o),t=o.add("onMatch",t),o.queries=e,e)"all"===i?s=1:(n=wR.matchMedia(e[i]))&&(SM.indexOf(o)<0&&SM.push(o),(a[i]=n.matches)&&(s=1),n.addListener?n.addListener(PM):n.addEventListener("change",PM));return s&&t(o,function(e){return o.add(null,e)}),this},t.revert=function(e){this.kill(e||{})},t.kill=function(e){this.contexts.forEach(function(t){return t.kill(e,!0)})},e}(),RM={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach(function(e){return TI(e)})},timeline:function(e){return new JI(e)},getTweensOf:function(e,t){return bR.getTweensOf(e,t)},getProperty:function(e,t,r,n){LR(e)&&(e=fI(e)[0]);var i=xF(e||{}).get,s=r?RF:OF;return"native"===r&&(r=""),e?t?s((gF[t]&&gF[t].get||i)(e,t,r,n)):function(t,r,n){return s((gF[t]&&gF[t].get||i)(e,t,r,n))}:e},quickSetter:function(e,t,r){if((e=fI(e)).length>1){var n=e.map(function(e){return MM.quickSetter(e,t,r)}),i=n.length;return function(e){for(var t=i;t--;)n[t](e)}}e=e[0]||{};var s=gF[t],o=xF(e),a=o.harness&&(o.harness.aliases||{})[t]||t,l=s?function(t){var n=new s;AR._pt=0,n.init(e,r?t+r:t,AR,0,[e]),n.render(1,n),AR._pt&&vM(1,AR)}:o.set(e,a);return s?l:function(t){return l(e,a,r?t+r:t,o,1)}},quickTo:function(e,t,r){var n,i=MM.to(e,FF(((n={})[t]="+=0.1",n.paused=!0,n.stagger=0,n),r||{})),s=function(e,r,n){return i.resetTo(t,e,r,n)};return s.tween=i,s},isTweening:function(e){return bR.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=$I(e.ease,kR.ease)),MF(kR,e||{})},config:function(e){return MF(DR,e||{})},registerEffect:function(e){var t=e.name,r=e.effect,n=e.plugins,i=e.defaults,s=e.extendTimeline;(n||"").split(",").forEach(function(e){return e&&!gF[e]&&!nF[e]&&aF(t+" effect requires "+e+" plugin.")}),yF[t]=function(e,t,n){return r(fI(e),FF(t||{},i),n)},s&&(JI.prototype[t]=function(e,r,n){return this.add(yF[t](e,VR(r)?r:(n=r)&&{},this),n)})},registerEase:function(e,t){UI[e]=$I(t)},parseEase:function(e,t){return arguments.length?$I(e,t):UI},getById:function(e){return bR.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var r,n,i=new JI(e);for(i.smoothChildTiming=GR(e.smoothChildTiming),bR.remove(i),i._dp=0,i._time=i._tTime=bR._time,r=bR._first;r;)n=r._next,!t&&!r._dur&&r instanceof uM&&r.vars.onComplete===r._targets[0]||ZF(i,r,r._start-r._delay),r=n;return ZF(bR,i,0),i},context:function(e,t){return e?new BM(e,t):_R},matchMedia:function(e){return new OM(e)},matchMediaRefresh:function(){return SM.forEach(function(e){var t,r,n=e.conditions;for(r in n)n[r]&&(n[r]=!1,t=1);t&&e.revert()})||PM()},addEventListener:function(e,t){var r=CM[e]||(CM[e]=[]);~r.indexOf(t)||r.push(t)},removeEventListener:function(e,t){var r=CM[e],n=r&&r.indexOf(t);n>=0&&r.splice(n,1)},utils:{wrap:function e(t,r,n){var i=r-t;return qR(t)?bI(t,e(0,t.length),r):aI(n,function(e){return(i+(e-t)%i)%i+t})},wrapYoyo:function e(t,r,n){var i=r-t,s=2*i;return qR(t)?bI(t,e(0,t.length-1),r):aI(n,function(e){return t+((e=(s+(e-t)%s)%s||0)>i?s-e:e)})},distribute:gI,random:_I,snap:vI,normalize:function(e,t,r){return xI(e,t,0,1,r)},getUnit:uI,clamp:function(e,t,r){return aI(r,function(r){return lI(e,t,r)})},splitColor:BI,toArray:fI,selector:pI,mapRange:xI,pipe:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.reduce(function(e,t){return t(e)},e)}},unitize:function(e,t){return function(r){return e(parseFloat(r))+(t||uI(r))}},interpolate:function e(t,r,n,i){var s=isNaN(t+r)?0:function(e){return(1-e)*t+e*r};if(!s){var o,a,l,u,c,d=LR(t),h={};if(!0===n&&(i=1)&&(n=null),d)t={p:t},r={p:r};else if(qR(t)&&!qR(r)){for(l=[],u=t.length,c=u-2,a=1;a<u;a++)l.push(e(t[a-1],t[a]));u--,s=function(e){e*=u;var t=Math.min(c,~~e);return l[t](e-t)},n=r}else i||(t=IF(qR(t)?[]:{},t));if(!l){for(o in r)rM.call(h,t,o,"get",r[o]);s=function(e){return vM(e,h)||(d?t.p:t)}}}return aI(n,s)},shuffle:mI},install:sF,effects:yF,ticker:NI,updateRoot:JI.updateRoot,plugins:gF,globalTimeline:bR,core:{PropTween:EM,globals:lF,Tween:uM,Timeline:JI,Animation:ZI,getCache:xF,_removeLinkedListItem:jF,reverting:function(){return vR},context:function(e){return e&&_R&&(_R.data.push(e),e._ctx=_R),_R},suppressOverwrites:function(e){return yR=e}}};SF("to,from,fromTo,delayedCall,set,killTweensOf",function(e){return RM[e]=uM[e]}),NI.add(JI.updateRoot),AR=RM.to({},{duration:0});var FM=function(e,t){for(var r=e._pt;r&&r.p!==t&&r.op!==t&&r.fp!==t;)r=r._next;return r},IM=function(e,t){return{name:e,headless:1,rawVars:1,init:function(e,r,n){n._onInit=function(e){var n,i;if(LR(r)&&(n={},SF(r,function(e){return n[e]=1}),r=n),t){for(i in n={},r)n[i]=t(r[i]);r=n}!function(e,t){var r,n,i,s=e._targets;for(r in t)for(n=s.length;n--;)(i=e._ptLookup[n][r])&&(i=i.d)&&(i._pt&&(i=FM(i,r)),i&&i.modifier&&i.modifier(t[r],e,s[n],r))}(e,r)}}}},MM=RM.registerPlugin({name:"attr",init:function(e,t,r,n,i){var s,o,a;for(s in this.tween=r,t)a=e.getAttribute(s)||"",(o=this.add(e,"setAttribute",(a||0)+"",t[s],n,i,0,0,s)).op=s,o.b=a,this._props.push(s)},render:function(e,t){for(var r=t._pt;r;)vR?r.set(r.t,r.p,r.b,r):r.r(e,r.d),r=r._next}},{name:"endArray",headless:1,init:function(e,t){for(var r=t.length;r--;)this.add(e,r,e[r]||0,t[r],0,0,0,0,0,1)}},IM("roundProps",yI),IM("modifiers"),IM("snap",vI))||RM;uM.version=JI.version=MM.version="3.14.1",SR=1,HR()&&LI(),UI.Power0,UI.Power1,UI.Power2,UI.Power3,UI.Power4,UI.Linear,UI.Quad,UI.Cubic,UI.Quart,UI.Quint,UI.Strong,UI.Elastic,UI.Back,UI.SteppedEase,UI.Bounce,UI.Sine,UI.Expo,UI.Circ;
/*!
			 * CSSPlugin 3.14.1
			 * https://gsap.com
			 *
			 * Copyright 2008-2025, GreenSock. All rights reserved.
			 * Subject to the terms at https://gsap.com/standard-license
			 * @author: Jack Doyle, jack@greensock.com
			*/
var NM,LM,UM,jM,zM,VM,GM,HM,$M={},WM=180/Math.PI,qM=Math.PI/180,XM=Math.atan2,YM=/([A-Z])/g,KM=/(left|right|width|margin|padding|x)/i,ZM=/[\s,\(]\S/,JM={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},QM=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},eN=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},tN=function(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},rN=function(e,t){return t.set(t.t,t.p,1===e?t.e:e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},nN=function(e,t){var r=t.s+t.c*e;t.set(t.t,t.p,~~(r+(r<0?-.5:.5))+t.u,t)},iN=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},sN=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},oN=function(e,t,r){return e.style[t]=r},aN=function(e,t,r){return e.style.setProperty(t,r)},lN=function(e,t,r){return e._gsap[t]=r},uN=function(e,t,r){return e._gsap.scaleX=e._gsap.scaleY=r},cN=function(e,t,r,n,i){var s=e._gsap;s.scaleX=s.scaleY=r,s.renderTransform(i,s)},dN=function(e,t,r,n,i){var s=e._gsap;s[t]=r,s.renderTransform(i,s)},hN="transform",fN=hN+"Origin",pN=function e(t,r){var n=this,i=this.target,s=i.style,o=i._gsap;if(t in $M&&s){if(this.tfm=this.tfm||{},"transform"===t)return JM.transform.split(",").forEach(function(t){return e.call(n,t,r)});if(~(t=JM[t]||t).indexOf(",")?t.split(",").forEach(function(e){return n.tfm[e]=ON(i,e)}):this.tfm[t]=o.x?o[t]:ON(i,t),t===fN&&(this.tfm.zOrigin=o.zOrigin),this.props.indexOf(hN)>=0)return;o.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(fN,r,"")),t=hN}(s||r)&&this.props.push(t,r,s[t])},mN=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},gN=function(){var e,t,r=this.props,n=this.target,i=n.style,s=n._gsap;for(e=0;e<r.length;e+=3)r[e+1]?2===r[e+1]?n[r[e]](r[e+2]):n[r[e]]=r[e+2]:r[e+2]?i[r[e]]=r[e+2]:i.removeProperty("--"===r[e].substr(0,2)?r[e]:r[e].replace(YM,"-$1").toLowerCase());if(this.tfm){for(t in this.tfm)s[t]=this.tfm[t];s.svg&&(s.renderTransform(),n.setAttribute("data-svg-origin",this.svgo||"")),(e=GM())&&e.isStart||i[hN]||(mN(i),s.zOrigin&&i[fN]&&(i[fN]+=" "+s.zOrigin+"px",s.zOrigin=0,s.renderTransform()),s.uncache=1)}},yN=function(e,t){var r={target:e,props:[],revert:gN,save:pN};return e._gsap||MM.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(e){return r.save(e)}),r},vN=function(e,t){var r=LM.createElementNS?LM.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):LM.createElement(e);return r&&r.style?r:LM.createElement(e)},_N=function e(t,r,n){var i=getComputedStyle(t);return i[r]||i.getPropertyValue(r.replace(YM,"-$1").toLowerCase())||i.getPropertyValue(r)||!n&&e(t,wN(r)||r,1)||""},bN="O,Moz,ms,Ms,Webkit".split(","),wN=function(e,t,r){var n=(t||zM).style,i=5;if(e in n&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);i--&&!(bN[i]+e in n););return i<0?null:(3===i?"ms":i>=0?bN[i]:"")+e},xN=function(){"undefined"!=typeof window&&window.document&&(NM=window,LM=NM.document,UM=LM.documentElement,zM=vN("div")||{style:{}},vN("div"),hN=wN(hN),fN=hN+"Origin",zM.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",HM=!!wN("perspective"),GM=MM.core.reverting,jM=1)},EN=function(e){var t,r=e.ownerSVGElement,n=vN("svg",r&&r.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=e.cloneNode(!0);i.style.display="block",n.appendChild(i),UM.appendChild(n);try{t=i.getBBox()}catch(Ove){}return n.removeChild(i),UM.removeChild(n),t},SN=function(e,t){for(var r=t.length;r--;)if(e.hasAttribute(t[r]))return e.getAttribute(t[r])},CN=function(e){var t,r;try{t=e.getBBox()}catch(n){t=EN(e),r=1}return t&&(t.width||t.height)||r||(t=EN(e)),!t||t.width||t.x||t.y?t:{x:+SN(e,["x","cx","x1"])||0,y:+SN(e,["y","cy","y1"])||0,width:0,height:0}},AN=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!CN(e))},TN=function(e,t){if(t){var r,n=e.style;t in $M&&t!==fN&&(t=hN),n.removeProperty?("ms"!==(r=t.substr(0,2))&&"webkit"!==t.substr(0,6)||(t="-"+t),n.removeProperty("--"===r?t:t.replace(YM,"-$1").toLowerCase())):n.removeAttribute(t)}},DN=function(e,t,r,n,i,s){var o=new EM(e._pt,t,r,0,1,s?sN:iN);return e._pt=o,o.b=n,o.e=i,e._props.push(r),o},kN={deg:1,rad:1,turn:1},PN={grid:1,flex:1},BN=function e(t,r,n,i){var s,o,a,l,u=parseFloat(n)||0,c=(n+"").trim().substr((u+"").length)||"px",d=zM.style,h=KM.test(r),f="svg"===t.tagName.toLowerCase(),p=(f?"client":"offset")+(h?"Width":"Height"),m=100,g="px"===i,y="%"===i;if(i===c||!u||kN[i]||kN[c])return u;if("px"!==c&&!g&&(u=e(t,r,n,"px")),l=t.getCTM&&AN(t),(y||"%"===c)&&($M[r]||~r.indexOf("adius")))return s=l?t.getBBox()[h?"width":"height"]:t[p],CF(y?u/s*m:u/100*s);if(d[h?"width":"height"]=m+(g?c:i),o="rem"!==i&&~r.indexOf("adius")||"em"===i&&t.appendChild&&!f?t:t.parentNode,l&&(o=(t.ownerSVGElement||{}).parentNode),o&&o!==LM&&o.appendChild||(o=LM.body),(a=o._gsap)&&y&&a.width&&h&&a.time===NI.time&&!a.uncache)return CF(u/a.width*m);if(!y||"height"!==r&&"width"!==r)(y||"%"===c)&&!PN[_N(o,"display")]&&(d.position=_N(t,"position")),o===t&&(d.position="static"),o.appendChild(zM),s=zM[p],o.removeChild(zM),d.position="absolute";else{var v=t.style[r];t.style[r]=m+i,s=t[p],v?t.style[r]=v:TN(t,r)}return h&&y&&((a=xF(o)).time=NI.time,a.width=o[p]),CF(g?s*u/m:s&&u?m/s*u:0)},ON=function(e,t,r,n){var i;return jM||xN(),t in JM&&"transform"!==t&&~(t=JM[t]).indexOf(",")&&(t=t.split(",")[0]),$M[t]&&"transform"!==t?(i=HN(e,n),i="transformOrigin"!==t?i[t]:i.svg?i.origin:$N(_N(e,fN))+" "+i.zOrigin+"px"):(!(i=e.style[t])||"auto"===i||n||~(i+"").indexOf("calc("))&&(i=NN[t]&&NN[t](e,t,r)||_N(e,t)||EF(e,t)||("opacity"===t?1:0)),r&&!~(i+"").trim().indexOf(" ")?BN(e,t,i,r)+r:i},RN=function(e,t,r,n){if(!r||"none"===r){var i=wN(t,e,1),s=i&&_N(e,i,1);s&&s!==r?(t=i,r=s):"borderColor"===t&&(r=_N(e,"borderTopColor"))}var o,a,l,u,c,d,h,f,p,m,g,y=new EM(this._pt,e.style,t,0,1,yM),v=0,_=0;if(y.b=r,y.e=n,r+="","var(--"===(n+="").substring(0,6)&&(n=_N(e,n.substring(4,n.indexOf(")")))),"auto"===n&&(d=e.style[t],e.style[t]=n,n=_N(e,t)||n,d?e.style[t]=d:TN(e,t)),MI(o=[r,n]),n=o[1],l=(r=o[0]).match(JR)||[],(n.match(JR)||[]).length){for(;a=JR.exec(n);)h=a[0],p=n.substring(v,a.index),c?c=(c+1)%5:"rgba("!==p.substr(-5)&&"hsla("!==p.substr(-5)||(c=1),h!==(d=l[_++]||"")&&(u=parseFloat(d)||0,g=d.substr((u+"").length),"="===h.charAt(1)&&(h=TF(u,h)+g),f=parseFloat(h),m=h.substr((f+"").length),v=JR.lastIndex-m.length,m||(m=m||DR.units[t]||g,v===n.length&&(n+=m,y.e+=m)),g!==m&&(u=BN(e,t,d,m)||0),y._pt={_next:y._pt,p:p||1===_?p:",",s:u,c:f-u,m:c&&c<4||"zIndex"===t?Math.round:0});y.c=v<n.length?n.substring(v,n.length):""}else y.r="display"===t&&"none"===n?sN:iN;return eF.test(n)&&(y.e=0),this._pt=y,y},FN={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},IN=function(e){var t=e.split(" "),r=t[0],n=t[1]||"50%";return"top"!==r&&"bottom"!==r&&"left"!==n&&"right"!==n||(e=r,r=n,n=e),t[0]=FN[r]||r,t[1]=FN[n]||n,t.join(" ")},MN=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var r,n,i,s=t.t,o=s.style,a=t.u,l=s._gsap;if("all"===a||!0===a)o.cssText="",n=1;else for(i=(a=a.split(",")).length;--i>-1;)r=a[i],$M[r]&&(n=1,r="transformOrigin"===r?fN:hN),TN(s,r);n&&(TN(s,hN),l&&(l.svg&&s.removeAttribute("transform"),o.scale=o.rotate=o.translate="none",HN(s,1),l.uncache=1,mN(o)))}},NN={clearProps:function(e,t,r,n,i){if("isFromStart"!==i.data){var s=e._pt=new EM(e._pt,t,r,0,0,MN);return s.u=n,s.pr=-10,s.tween=i,e._props.push(r),1}}},LN=[1,0,0,1,0,0],UN={},jN=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},zN=function(e){var t=_N(e,hN);return jN(t)?LN:t.substr(7).match(ZR).map(CF)},VN=function(e,t){var r,n,i,s,o=e._gsap||xF(e),a=e.style,l=zN(e);return o.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(l=[(i=e.transform.baseVal.consolidate().matrix).a,i.b,i.c,i.d,i.e,i.f]).join(",")?LN:l:(l!==LN||e.offsetParent||e===UM||o.svg||(i=a.display,a.display="block",(r=e.parentNode)&&(e.offsetParent||e.getBoundingClientRect().width)||(s=1,n=e.nextElementSibling,UM.appendChild(e)),l=zN(e),i?a.display=i:TN(e,"display"),s&&(n?r.insertBefore(e,n):r?r.appendChild(e):UM.removeChild(e))),t&&l.length>6?[l[0],l[1],l[4],l[5],l[12],l[13]]:l)},GN=function(e,t,r,n,i,s){var o,a,l,u=e._gsap,c=i||VN(e,!0),d=u.xOrigin||0,h=u.yOrigin||0,f=u.xOffset||0,p=u.yOffset||0,m=c[0],g=c[1],y=c[2],v=c[3],_=c[4],b=c[5],w=t.split(" "),x=parseFloat(w[0])||0,E=parseFloat(w[1])||0;r?c!==LN&&(a=m*v-g*y)&&(l=x*(-g/a)+E*(m/a)-(m*b-g*_)/a,x=x*(v/a)+E*(-y/a)+(y*b-v*_)/a,E=l):(x=(o=CN(e)).x+(~w[0].indexOf("%")?x/100*o.width:x),E=o.y+(~(w[1]||w[0]).indexOf("%")?E/100*o.height:E)),n||!1!==n&&u.smooth?(_=x-d,b=E-h,u.xOffset=f+(_*m+b*y)-_,u.yOffset=p+(_*g+b*v)-b):u.xOffset=u.yOffset=0,u.xOrigin=x,u.yOrigin=E,u.smooth=!!n,u.origin=t,u.originIsAbsolute=!!r,e.style[fN]="0px 0px",s&&(DN(s,u,"xOrigin",d,x),DN(s,u,"yOrigin",h,E),DN(s,u,"xOffset",f,u.xOffset),DN(s,u,"yOffset",p,u.yOffset)),e.setAttribute("data-svg-origin",x+" "+E)},HN=function(e,t){var r=e._gsap||new KI(e);if("x"in r&&!t&&!r.uncache)return r;var n,i,s,o,a,l,u,c,d,h,f,p,m,g,y,v,_,b,w,x,E,S,C,A,T,D,k,P,B,O,R,F,I=e.style,M=r.scaleX<0,N="px",L="deg",U=getComputedStyle(e),j=_N(e,fN)||"0";return n=i=s=l=u=c=d=h=f=0,o=a=1,r.svg=!(!e.getCTM||!AN(e)),U.translate&&("none"===U.translate&&"none"===U.scale&&"none"===U.rotate||(I[hN]=("none"!==U.translate?"translate3d("+(U.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==U.rotate?"rotate("+U.rotate+") ":"")+("none"!==U.scale?"scale("+U.scale.split(" ").join(",")+") ":"")+("none"!==U[hN]?U[hN]:"")),I.scale=I.rotate=I.translate="none"),g=VN(e,r.svg),r.svg&&(r.uncache?(T=e.getBBox(),j=r.xOrigin-T.x+"px "+(r.yOrigin-T.y)+"px",A=""):A=!t&&e.getAttribute("data-svg-origin"),GN(e,A||j,!!A||r.originIsAbsolute,!1!==r.smooth,g)),p=r.xOrigin||0,m=r.yOrigin||0,g!==LN&&(b=g[0],w=g[1],x=g[2],E=g[3],n=S=g[4],i=C=g[5],6===g.length?(o=Math.sqrt(b*b+w*w),a=Math.sqrt(E*E+x*x),l=b||w?XM(w,b)*WM:0,(d=x||E?XM(x,E)*WM+l:0)&&(a*=Math.abs(Math.cos(d*qM))),r.svg&&(n-=p-(p*b+m*x),i-=m-(p*w+m*E))):(F=g[6],O=g[7],k=g[8],P=g[9],B=g[10],R=g[11],n=g[12],i=g[13],s=g[14],u=(y=XM(F,B))*WM,y&&(A=S*(v=Math.cos(-y))+k*(_=Math.sin(-y)),T=C*v+P*_,D=F*v+B*_,k=S*-_+k*v,P=C*-_+P*v,B=F*-_+B*v,R=O*-_+R*v,S=A,C=T,F=D),c=(y=XM(-x,B))*WM,y&&(v=Math.cos(-y),R=E*(_=Math.sin(-y))+R*v,b=A=b*v-k*_,w=T=w*v-P*_,x=D=x*v-B*_),l=(y=XM(w,b))*WM,y&&(A=b*(v=Math.cos(y))+w*(_=Math.sin(y)),T=S*v+C*_,w=w*v-b*_,C=C*v-S*_,b=A,S=T),u&&Math.abs(u)+Math.abs(l)>359.9&&(u=l=0,c=180-c),o=CF(Math.sqrt(b*b+w*w+x*x)),a=CF(Math.sqrt(C*C+F*F)),y=XM(S,C),d=Math.abs(y)>2e-4?y*WM:0,f=R?1/(R<0?-R:R):0),r.svg&&(A=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!jN(_N(e,hN)),A&&e.setAttribute("transform",A))),Math.abs(d)>90&&Math.abs(d)<270&&(M?(o*=-1,d+=l<=0?180:-180,l+=l<=0?180:-180):(a*=-1,d+=d<=0?180:-180)),t=t||r.uncache,r.x=n-((r.xPercent=n&&(!t&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-n)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+N,r.y=i-((r.yPercent=i&&(!t&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-i)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+N,r.z=s+N,r.scaleX=CF(o),r.scaleY=CF(a),r.rotation=CF(l)+L,r.rotationX=CF(u)+L,r.rotationY=CF(c)+L,r.skewX=d+L,r.skewY=h+L,r.transformPerspective=f+N,(r.zOrigin=parseFloat(j.split(" ")[2])||!t&&r.zOrigin||0)&&(I[fN]=$N(j)),r.xOffset=r.yOffset=0,r.force3D=DR.force3D,r.renderTransform=r.svg?JN:HM?ZN:qN,r.uncache=0,r},$N=function(e){return(e=e.split(" "))[0]+" "+e[1]},WN=function(e,t,r){var n=uI(t);return CF(parseFloat(t)+parseFloat(BN(e,"x",r+"px",n)))+n},qN=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,ZN(e,t)},XN="0deg",YN="0px",KN=") ",ZN=function(e,t){var r=t||this,n=r.xPercent,i=r.yPercent,s=r.x,o=r.y,a=r.z,l=r.rotation,u=r.rotationY,c=r.rotationX,d=r.skewX,h=r.skewY,f=r.scaleX,p=r.scaleY,m=r.transformPerspective,g=r.force3D,y=r.target,v=r.zOrigin,_="",b="auto"===g&&e&&1!==e||!0===g;if(v&&(c!==XN||u!==XN)){var w,x=parseFloat(u)*qM,E=Math.sin(x),S=Math.cos(x);x=parseFloat(c)*qM,w=Math.cos(x),s=WN(y,s,E*w*-v),o=WN(y,o,-Math.sin(x)*-v),a=WN(y,a,S*w*-v+v)}m!==YN&&(_+="perspective("+m+KN),(n||i)&&(_+="translate("+n+"%, "+i+"%) "),(b||s!==YN||o!==YN||a!==YN)&&(_+=a!==YN||b?"translate3d("+s+", "+o+", "+a+") ":"translate("+s+", "+o+KN),l!==XN&&(_+="rotate("+l+KN),u!==XN&&(_+="rotateY("+u+KN),c!==XN&&(_+="rotateX("+c+KN),d===XN&&h===XN||(_+="skew("+d+", "+h+KN),1===f&&1===p||(_+="scale("+f+", "+p+KN),y.style[hN]=_||"translate(0, 0)"},JN=function(e,t){var r,n,i,s,o,a=t||this,l=a.xPercent,u=a.yPercent,c=a.x,d=a.y,h=a.rotation,f=a.skewX,p=a.skewY,m=a.scaleX,g=a.scaleY,y=a.target,v=a.xOrigin,_=a.yOrigin,b=a.xOffset,w=a.yOffset,x=a.forceCSS,E=parseFloat(c),S=parseFloat(d);h=parseFloat(h),f=parseFloat(f),(p=parseFloat(p))&&(f+=p=parseFloat(p),h+=p),h||f?(h*=qM,f*=qM,r=Math.cos(h)*m,n=Math.sin(h)*m,i=Math.sin(h-f)*-g,s=Math.cos(h-f)*g,f&&(p*=qM,o=Math.tan(f-p),i*=o=Math.sqrt(1+o*o),s*=o,p&&(o=Math.tan(p),r*=o=Math.sqrt(1+o*o),n*=o)),r=CF(r),n=CF(n),i=CF(i),s=CF(s)):(r=m,s=g,n=i=0),(E&&!~(c+"").indexOf("px")||S&&!~(d+"").indexOf("px"))&&(E=BN(y,"x",c,"px"),S=BN(y,"y",d,"px")),(v||_||b||w)&&(E=CF(E+v-(v*r+_*i)+b),S=CF(S+_-(v*n+_*s)+w)),(l||u)&&(o=y.getBBox(),E=CF(E+l/100*o.width),S=CF(S+u/100*o.height)),o="matrix("+r+","+n+","+i+","+s+","+E+","+S+")",y.setAttribute("transform",o),x&&(y.style[hN]=o)},QN=function(e,t,r,n,i){var s,o,a=360,l=LR(i),u=parseFloat(i)*(l&&~i.indexOf("rad")?WM:1)-n,c=n+u+"deg";return l&&("short"===(s=i.split("_")[1])&&(u%=a)!==u%180&&(u+=u<0?a:-360),"cw"===s&&u<0?u=(u+36e9)%a-~~(u/a)*a:"ccw"===s&&u>0&&(u=(u-36e9)%a-~~(u/a)*a)),e._pt=o=new EM(e._pt,t,r,n,u,eN),o.e=c,o.u="deg",e._props.push(r),o},eL=function(e,t){for(var r in t)e[r]=t[r];return e},tL=function(e,t,r){var n,i,s,o,a,l,u,c=eL({},r._gsap),d=r.style;for(i in c.svg?(s=r.getAttribute("transform"),r.setAttribute("transform",""),d[hN]=t,n=HN(r,1),TN(r,hN),r.setAttribute("transform",s)):(s=getComputedStyle(r)[hN],d[hN]=t,n=HN(r,1),d[hN]=s),$M)(s=c[i])!==(o=n[i])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(i)<0&&(a=uI(s)!==(u=uI(o))?BN(r,i,s,u):parseFloat(s),l=parseFloat(o),e._pt=new EM(e._pt,n,i,a,l-a,QM),e._pt.u=u||0,e._props.push(i));eL(n,c)};SF("padding,margin,Width,Radius",function(e,t){var r="Top",n="Right",i="Bottom",s="Left",o=(t<3?[r,n,i,s]:[r+s,r+n,i+n,i+s]).map(function(r){return t<2?e+r:"border"+r+e});NN[t>1?"border"+e:e]=function(e,t,r,n,i){var s,a;if(arguments.length<4)return s=o.map(function(t){return ON(e,t,r)}),5===(a=s.join(" ")).split(s[0]).length?s[0]:a;s=(n+"").split(" "),a={},o.forEach(function(e,t){return a[e]=s[t]=s[t]||s[(t-1)/2|0]}),e.init(t,a,i)}});var rL,nL,iL,sL={name:"css",register:xN,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,r,n,i){var s,o,a,l,u,c,d,h,f,p,m,g,y,v,_,b,w,x=this._props,E=e.style,S=r.vars.startAt;for(d in jM||xN(),this.styles=this.styles||yN(e),b=this.styles.props,this.tween=r,t)if("autoRound"!==d&&(o=t[d],!gF[d]||!nM(d,t,r,n,e,i)))if(u=typeof o,c=NN[d],"function"===u&&(u=typeof(o=o.call(r,n,e,i))),"string"===u&&~o.indexOf("random(")&&(o=wI(o)),c)c(this,e,d,o,r)&&(_=1);else if("--"===d.substr(0,2))s=(getComputedStyle(e).getPropertyValue(d)+"").trim(),o+="",FI.lastIndex=0,FI.test(s)||(h=uI(s),(f=uI(o))?h!==f&&(s=BN(e,d,s,f)+f):h&&(o+=h)),this.add(E,"setProperty",s,o,n,i,0,0,d),x.push(d),b.push(d,0,E[d]);else if("undefined"!==u){if(S&&d in S?(s="function"==typeof S[d]?S[d].call(r,n,e,i):S[d],LR(s)&&~s.indexOf("random(")&&(s=wI(s)),uI(s+"")||"auto"===s||(s+=DR.units[d]||uI(ON(e,d))||""),"="===(s+"").charAt(1)&&(s=ON(e,d))):s=ON(e,d),l=parseFloat(s),(p="string"===u&&"="===o.charAt(1)&&o.substr(0,2))&&(o=o.substr(2)),a=parseFloat(o),d in JM&&("autoAlpha"===d&&(1===l&&"hidden"===ON(e,"visibility")&&a&&(l=0),b.push("visibility",0,E.visibility),DN(this,E,"visibility",l?"inherit":"hidden",a?"inherit":"hidden",!a)),"scale"!==d&&"transform"!==d&&~(d=JM[d]).indexOf(",")&&(d=d.split(",")[0])),m=d in $M){if(this.styles.save(d),w=o,"string"===u&&"var(--"===o.substring(0,6)){if("calc("===(o=_N(e,o.substring(4,o.indexOf(")")))).substring(0,5)){var C=e.style.perspective;e.style.perspective=o,o=_N(e,"perspective"),C?e.style.perspective=C:TN(e,"perspective")}a=parseFloat(o)}if(g||((y=e._gsap).renderTransform&&!t.parseTransform||HN(e,t.parseTransform),v=!1!==t.smoothOrigin&&y.smooth,(g=this._pt=new EM(this._pt,E,hN,0,1,y.renderTransform,y,0,-1)).dep=1),"scale"===d)this._pt=new EM(this._pt,y,"scaleY",y.scaleY,(p?TF(y.scaleY,p+a):a)-y.scaleY||0,QM),this._pt.u=0,x.push("scaleY",d),d+="X";else{if("transformOrigin"===d){b.push(fN,0,E[fN]),o=IN(o),y.svg?GN(e,o,0,v,0,this):((f=parseFloat(o.split(" ")[2])||0)!==y.zOrigin&&DN(this,y,"zOrigin",y.zOrigin,f),DN(this,E,d,$N(s),$N(o)));continue}if("svgOrigin"===d){GN(e,o,1,v,0,this);continue}if(d in UN){QN(this,y,d,l,p?TF(l,p+o):o);continue}if("smoothOrigin"===d){DN(this,y,"smooth",y.smooth,o);continue}if("force3D"===d){y[d]=o;continue}if("transform"===d){tL(this,o,e);continue}}}else d in E||(d=wN(d)||d);if(m||(a||0===a)&&(l||0===l)&&!ZM.test(o)&&d in E)a||(a=0),(h=(s+"").substr((l+"").length))!==(f=uI(o)||(d in DR.units?DR.units[d]:h))&&(l=BN(e,d,s,f)),this._pt=new EM(this._pt,m?y:E,d,l,(p?TF(l,p+a):a)-l,m||"px"!==f&&"zIndex"!==d||!1===t.autoRound?QM:nN),this._pt.u=f||0,m&&w!==o?(this._pt.b=s,this._pt.e=w,this._pt.r=rN):h!==f&&"%"!==f&&(this._pt.b=s,this._pt.r=tN);else if(d in E)RN.call(this,e,d,s,p?p+o:o);else if(d in e)this.add(e,d,s||e[d],p?p+o:o,n,i);else if("parseTransform"!==d){oF(d,o);continue}m||(d in E?b.push(d,0,E[d]):"function"==typeof e[d]?b.push(d,2,e[d]()):b.push(d,1,s||e[d])),x.push(d)}_&&xM(this)},render:function(e,t){if(t.tween._time||!GM())for(var r=t._pt;r;)r.r(e,r.d),r=r._next;else t.styles.revert()},get:ON,aliases:JM,getSetter:function(e,t,r){var n=JM[t];return n&&n.indexOf(",")<0&&(t=n),t in $M&&t!==fN&&(e._gsap.x||ON(e,"x"))?r&&VM===r?"scale"===t?uN:lN:(VM=r||{})&&("scale"===t?cN:dN):e.style&&!zR(e.style[t])?oN:~t.indexOf("-")?aN:pM(e,t)},core:{_removeProperty:TN,_getMatrix:VN}};MM.utils.checkPrefix=wN,MM.core.getStyleSaver=yN,iL=SF((rL="x,y,z,scale,scaleX,scaleY,xPercent,yPercent")+","+(nL="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(e){$M[e]=1}),SF(nL,function(e){DR.units[e]="deg",UN[e]=1}),JM[iL[13]]=rL+","+nL,SF("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(e){var t=e.split(":");JM[t[1]]=iL[t[0]]}),SF("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(e){DR.units[e]="px"}),MM.registerPlugin(sL),e("q",MM.registerPlugin(sL)||MM).core.Tween;
/*!
			 * PixiPlugin 3.14.1
			 * https://gsap.com
			 *
			 * @license Copyright 2008-2025, GreenSock. All rights reserved.
			 * Subject to the terms at https://gsap.com/standard-license
			 * @author: Jack Doyle, jack@greensock.com
			*/var oL,aL,lL,uL,cL,dL,hL,fL,pL,mL,gL=function(){return"undefined"!=typeof window},yL=function(){return oL||gL()&&(oL=window.gsap)&&oL.registerPlugin&&oL},vL=function(e){return"function"==typeof e},_L=function(e){return console.warn(e)},bL=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],wL=.212671,xL=.71516,EL=.072169,SL=function(e){return vL(uL[e])?uL[e]:uL.filters[e]},CL=function(e,t){var r,n,i=[],s=0,o=0;for(r=0;r<4;r++){for(n=0;n<5;n++)o=4===n?e[s+4]:0,i[s+n]=e[s]*t[n]+e[s+1]*t[n+5]+e[s+2]*t[n+10]+e[s+3]*t[n+15]+o;s+=5}return i},AL=function(e,t){var r=1-t,n=r*wL,i=r*xL,s=r*EL;return CL([n+t,i,s,0,0,n,i+t,s,0,0,n,i,s+t,0,0,0,0,0,1,0],e)},TL=function(e,t,r){var n=aL(t),i=n[0]/255,s=n[1]/255,o=n[2]/255,a=1-r;return CL([a+r*i*wL,r*i*xL,r*i*EL,0,0,r*s*wL,a+r*s*xL,r*s*EL,0,0,r*o*wL,r*o*xL,a+r*o*EL,0,0,0,0,0,1,0],e)},DL=function(e,t){t*=Math.PI/180;var r=Math.cos(t),n=Math.sin(t);return CL([wL+r*(1-wL)+n*-wL,xL+r*-xL+n*-xL,EL+r*-EL+n*(1-EL),0,0,wL+r*-wL+.143*n,xL+.28484*r+.14*n,EL+r*-EL+-.283*n,0,0,wL+r*-wL+-.787329*n,xL+r*-xL+n*xL,EL+r*(1-EL)+n*EL,0,0,0,0,0,1,0,0,0,0,0,1],e)},kL=function(e,t){return CL([t,0,0,0,.5*(1-t),0,t,0,0,.5*(1-t),0,0,t,0,.5*(1-t),0,0,0,1,0],e)},PL=function(e,t){var r,n=SL(t),i=e.filters||[],s=i.length;for(n||_L(t+" not found. PixiPlugin.registerPIXI(PIXI)");--s>-1;)if(i[s]instanceof n)return i[s];return r=new n,"BlurFilter"===t&&(fL?r.strength=0:r.blur=0),e.filters=[].concat(i,[r]),r},BL=function(e,t,r,n){t.add(r,e,r[e],n[e]),t._props.push(e)},OL=function(e,t){var r=new(SL("ColorMatrixFilter"));return r.matrix=t,r.brightness(e,!0),r.matrix},RL={contrast:1,saturation:1,colorizeAmount:0,colorize:"rgb(255,255,255)",hue:0,brightness:1},FL=function(e,t,r){var n,i,s,o=PL(e,"ColorMatrixFilter"),a=e._gsColorMatrixFilter=e._gsColorMatrixFilter||function(e){var t,r={};for(t in e)r[t]=e[t];return r}(RL),l=t.combineCMF&&!("colorMatrixFilter"in t&&!t.colorMatrixFilter);s=o.matrix,t.resolution&&(o.resolution=t.resolution),t.matrix&&t.matrix.length===s.length?(i=t.matrix,1!==a.contrast&&BL("contrast",r,a,RL),a.hue&&BL("hue",r,a,RL),1!==a.brightness&&BL("brightness",r,a,RL),a.colorizeAmount&&(BL("colorize",r,a,RL),BL("colorizeAmount",r,a,RL)),1!==a.saturation&&BL("saturation",r,a,RL)):(i=bL.slice(),null!=t.contrast?(i=kL(i,+t.contrast),BL("contrast",r,a,t)):1!==a.contrast&&(l?i=kL(i,a.contrast):BL("contrast",r,a,RL)),null!=t.hue?(i=DL(i,+t.hue),BL("hue",r,a,t)):a.hue&&(l?i=DL(i,a.hue):BL("hue",r,a,RL)),null!=t.brightness?(i=OL(+t.brightness,i),BL("brightness",r,a,t)):1!==a.brightness&&(l?i=OL(a.brightness,i):BL("brightness",r,a,RL)),null!=t.colorize?(t.colorizeAmount="colorizeAmount"in t?+t.colorizeAmount:1,i=TL(i,t.colorize,t.colorizeAmount),BL("colorize",r,a,t),BL("colorizeAmount",r,a,t)):a.colorizeAmount&&(l?i=TL(i,a.colorize,a.colorizeAmount):(BL("colorize",r,a,RL),BL("colorizeAmount",r,a,RL))),null!=t.saturation?(i=AL(i,+t.saturation),BL("saturation",r,a,t)):1!==a.saturation&&(l?i=AL(i,a.saturation):BL("saturation",r,a,RL))),n=i.length;for(;--n>-1;)i[n]!==s[n]&&r.add(s,n,s[n],i[n],"colorMatrixFilter");r._props.push("colorMatrixFilter")},IL=function(e,t){var r=t.t,n=t.p,i=t.color;(0,t.set)(r,n,i[0]<<16|i[1]<<8|i[2])},ML=function(e,t){var r=t.g;fL?(r.fill(),r.stroke()):r&&(r.dirty++,r.clearDirty++)},NL=function(e,t){t.t.visible=!!t.t.alpha},LL=function(e,t,r,n){var i=e[t],s=aL(vL(i)?e[t.indexOf("set")||!vL(e["get"+t.substr(3)])?t:"get"+t.substr(3)]():i),o=aL(r);n._pt=new cL(n._pt,e,t,0,0,IL,{t:e,p:t,color:s,set:dL(e,t)}),n.add(s,0,s[0],o[0]),n.add(s,1,s[1],o[1]),n.add(s,2,s[2],o[2])},UL={tint:1,lineColor:1,fillColor:1,strokeColor:1},jL="position,scale,skew,pivot,anchor,tilePosition,tileScale".split(","),zL={x:"position",y:"position",tileX:"tilePosition",tileY:"tilePosition"},VL={colorMatrixFilter:1,saturation:1,contrast:1,hue:1,colorize:1,colorizeAmount:1,brightness:1,combineCMF:1},GL=Math.PI/180,HL=function(e){return"string"==typeof e},$L=function(e){return HL(e)&&"="===e.charAt(1)?e.substr(0,2)+parseFloat(e.substr(2))*GL:e*GL},WL=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e5*(t.s+t.c*e))/1e5,t)},qL=function(e,t,r,n,i,s){var o,a,l=360*(s?GL:1),u=HL(i),c=u&&"="===i.charAt(1)?+(i.charAt(0)+"1"):0,d=parseFloat(c?i.substr(2):i)*(s?GL:1),h=c?d*c:d-n,f=n+h;return u&&("short"===(o=i.split("_")[1])&&(h%=l)!==h%(l/2)&&(h+=h<0?l:-l),"cw"===o&&h<0?h=(h+1e10*l)%l-~~(h/l)*l:"ccw"===o&&h>0&&(h=(h-1e10*l)%l-~~(h/l)*l)),e._pt=a=new cL(e._pt,t,r,n,h,WL),a.e=f,a},XL=function(){if(!lL){oL=yL();var e=(uL=lL=uL||gL()&&window.PIXI)&&uL.VERSION&&parseFloat(uL.VERSION.split(".")[0])||0;hL=4===e,fL=e>=8,aL=function(e){return oL.utils.splitColor("0x"===(e+"").substr(0,2)?"#"+e.substr(2):e)}}};for(pL=0;pL<jL.length;pL++)mL=jL[pL],zL[mL+"X"]=mL,zL[mL+"Y"]=mL;var YL=e("P",{version:"3.14.1",name:"pixi",register:function(e,t,r){oL=e,cL=r,dL=t.getSetter,XL()},headless:!0,registerPIXI:function(e){uL=e},init:function(e,t,r,n,i){if(uL||XL(),!uL)return _L("PIXI was not found. PixiPlugin.registerPIXI(PIXI);"),!1;var s,o,a,l,u,c,d,h,f,p;for(c in t){if(s=zL[c],a=t[c],s)o=~c.charAt(c.length-1).toLowerCase().indexOf("x")?"x":"y",this.add(e[s],o,e[s][o],"skew"===s?$L(a):a,0,0,0,0,0,1);else if("scale"===c||"anchor"===c||"pivot"===c||"tileScale"===c)this.add(e[c],"x",e[c].x,a),this.add(e[c],"y",e[c].y,a);else if("rotation"===c||"angle"===c)qL(this,e,c,e[c],a,"rotation"===c);else if(VL[c])l||(FL(e,t.colorMatrixFilter||t,this),l=!0);else if("blur"===c||"blurX"===c||"blurY"===c||"blurPadding"===c){if(u=PL(e,"BlurFilter"),this.add(u,c,u[c],a),0!==t.blurPadding)for(d=t.blurPadding||2*Math.max(u[c],a),h=e.filters.length;--h>-1;)e.filters[h].padding=Math.max(e.filters[h].padding,d)}else if(UL[c])if(("lineColor"===c||"fillColor"===c||"strokeColor"===c)&&e instanceof uL.Graphics){f="fillStyle"in e?[e]:(e.geometry||e).graphicsData,p=c.substr(0,c.length-5),fL&&"line"===p&&(p="stroke"),this._pt=new cL(this._pt,e,c,0,0,ML,{g:e.geometry||e}),h=f.length;for(;--h>-1;)LL(hL?f[h]:f[h][p+"Style"],hL?c:"color",a,this)}else LL(e,c,a,this);else"autoAlpha"===c?(this._pt=new cL(this._pt,e,"visible",0,0,NL),this.add(e,"alpha",e.alpha,a),this._props.push("alpha","visible")):"resolution"!==c&&this.add(e,c,"get",a);this._props.push(c)}}});yL()&&oL.registerPlugin(YL);class KL{constructor(e=0,t=0,r=0,n=0){this._x=Number(e),this._y=Number(t),this._width=Number(r),this._height=Number(n),this._hull=[new Ex,new Ex,new Ex,new Ex],this.currentID=-1,this.dirtyID=0}get x(){return this._x}set x(e){this._x=e,this.dirtyID++}get y(){return this._y}set y(e){this._y=e,this.dirtyID++}get width(){return this._width}set width(e){this._width=e,this.dirtyID++}get height(){return this._height}set height(e){this._height=e,this.dirtyID++}get hull(){return this.isDirty()&&this.update(),this._hull}get topLeft(){return this.isDirty()&&this.update(),this._hull[0]}get topRight(){return this.isDirty()&&this.update(),this._hull[1]}get bottomRight(){return this.isDirty()&&this.update(),this._hull[2]}get bottomLeft(){return this.isDirty()&&this.update(),this._hull[3]}isDirty(){return this.currentID!==this.dirtyID}update(){const[e,t,r,n]=this._hull;e.set(this._x,this._y),t.set(this._x+this._width,this._y),r.set(this._x+this._width,this._y+this._height),n.set(this._x,this._y+this._height)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}clone(){return new KL(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,t){return!(this.width<=0||this.height<=0)&&e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}equals(e){return!!e&&e.x===this.x&&e.y===this.y&&e.width===this.width&&e.height===this.height}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t,this}fit(e){const t=Math.max(this.x,e.x),r=Math.min(this.x+this.width,e.x+e.width),n=Math.max(this.y,e.y),i=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(r-t,0),this.y=n,this.height=Math.max(i-n,0),this}ceil(e=1,t=.001){const r=Math.ceil((this.x+this.width-t)*e)/e,n=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=r-this.x,this.height=n-this.y,this}enlarge(e){const t=Math.min(this.x,e.x),r=Math.max(this.x+this.width,e.x+e.width),n=Math.min(this.y,e.y),i=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=r-t,this.y=n,this.height=i-n,this}}const ZL=new Ex;class JL{constructor(e=0,t=0,r=0,n=0,i=0){e instanceof KL&&(i=t||0,t=e.y,r=e.width,n=e.height,e=e.x),this.innerBounds=new KL(e,t,r,n),this._rotation=i,this._center=new Ux(this.updateCenter,this),this._hull=[new Ex,new Ex,new Ex,new Ex],this._matrix=new Px,this.currentID=-1,this.dirtyID=0}get rotation(){return this._rotation}set rotation(e){this._rotation=e,this.dirtyID++}get center(){return this.isDirty()&&this.update(),this._center}set center(e){this.center.copyFrom(e)}get hull(){return this.isDirty()&&this.update(),this._hull}get topLeft(){return this.isDirty()&&this.update(),this._hull[0]}get topRight(){return this.isDirty()&&this.update(),this._hull[1]}get bottomRight(){return this.isDirty()&&this.update(),this._hull[2]}get bottomLeft(){return this.isDirty()&&this.update(),this._hull[3]}equals(e){return!!e&&this.innerBounds.equals(e.innerBounds)&&this.rotation===e.rotation}contains(e,t){"number"==typeof e&&(e=ZL.set(e,t));const r=this._matrix.applyInverse(e,ZL);return this.innerBounds.contains(r.x,r.y)}copyFrom(e){return this.innerBounds.copyFrom(e.innerBounds),this.rotation=e.rotation,this.dirtyID++,this}isDirty(){return this.currentID!==this.dirtyID+this.innerBounds.dirtyID}update(){const e=this.innerBounds,t=this._rotation,r=this._center,[n,i,s,o]=this._hull,a=this._matrix;r._x=e.x+e.width/2,r._y=e.y+e.height/2,a.identity().translate(-r.x,-r.y).rotate(t).translate(r.x,r.y),a.apply(e.topLeft,n),a.apply(e.topRight,i),a.apply(e.bottomRight,s),a.apply(e.bottomLeft,o),this.currentID=this.dirtyID+this.innerBounds.dirtyID}updateCenter(){const e=this.center,t=this.innerBounds;t.x=e.x-t.width/2,t.y=e.y-t.height/2}}class QL{constructor(e,t){this._history=new Array(e),this._decayRatio=t,this._currentIndex=0;for(let r=0;r<e;r++)this._history[r]=0}next(e){const{_history:t,_decayRatio:r}=this,n=t.length;this._currentIndex=this._currentIndex<n-1?this._currentIndex+1:0,t[this._currentIndex]=e;let i=0,s=0;for(let o=this._currentIndex+1;o<n;o++)i=(i+t[o])*r,s=(s+1)*r;for(let o=0;o<=this._currentIndex;o++)i=(i+t[o])*r,s=(s+1)*r;return this._average=i/s,this._average}absDev(){let e=0;for(let t=0,r=this._history.length;t<r;t++)e+=Math.abs(this._history[t]-this._average);return e/this._history.length}}class eU{constructor(e={}){eU.prototype.__init.call(this),this._freeList=[],this._freeCount=0,this._borrowRate=0,this._returnRate=0,this._flowRate=0,this._borrowRateAverage=0,this._reserveCount=e.reserve||0,this._capacityRatio=e.capacityRatio||1.2,this._decayRatio=e.decayRatio||.67,this._marginAverage=0,this._borrowRateAverageProvider=new QL(128,this._decayRatio),this._marginAverageProvider=new QL(128,this._decayRatio)}get capacity(){return this._freeList.length}set capacity(e){this._freeList.length=Math.ceil(e)}allocate(){return++this._borrowRate,++this._flowRate,this._freeCount>0?this._freeList[--this._freeCount]:this.create()}allocateArray(e){let t,r;Array.isArray(e)?(t=e,r=e.length):(r=e,t=new Array(r)),this._borrowRate+=r,this._flowRate+=r;let n=0;if(this._freeCount>0){const e=this._freeList,i=Math.min(this._freeCount,r);let s=this._freeCount;for(let r=0;r<i;r++)t[n]=e[s-1],++n,--s;this._freeCount=s}for(;n<r;)t[n]=this.create(),++n;return t}release(e){++this._returnRate,--this._flowRate,this._freeCount===this.capacity&&(this.capacity*=this._capacityRatio),this._freeList[this._freeCount]=e,++this._freeCount}releaseArray(e){this._returnRate+=e.length,this._flowRate-=e.length,this._freeCount+e.length>this.capacity&&(this.capacity=Math.max(this.capacity*this._capacityRatio,this._freeCount+e.length));for(let t=0,r=e.length;t<r;t++)this._freeList[this._freeCount]=e[t],++this._freeCount}reserve(e){if(this._reserveCount=e,this._freeCount<e){const t=this._freeCount-e;for(let e=0;e<t;e++)this._freeList[this._freeCount]=this.create(),++this._freeCount}}limit(e){if(this._freeCount>e){this.capacity>e*this._capacityRatio&&(this.capacity=e*this._capacityRatio);const t=Math.min(this._freeCount,this.capacity);for(let r=e;r<t;r++)this._freeList[r]=null}}startGC(e=IS.shared){e.add(this._gcTick,null,OS.UTILITY)}stopGC(e=IS.shared){e.remove(this._gcTick)}__init(){this._gcTick=()=>{this._borrowRateAverage=this._borrowRateAverageProvider.next(this._borrowRate),this._marginAverage=this._marginAverageProvider.next(this._freeCount-this._borrowRate);const e=this._borrowRateAverageProvider.absDev();this._flowRate=0,this._borrowRate=0,this._returnRate=0;const t=this._freeCount,r=this._freeList.length;if(t<128&&this._borrowRateAverage<128&&r<128)return;const n=Math.max(this._borrowRateAverage*(this._capacityRatio-1),this._reserveCount);if(this._freeCount>n+e){const t=n+e;this.capacity=Math.min(this._freeList.length,Math.ceil(t)),this._freeCount=this._freeList.length}}}}var tU;const rU=new Map;class nU{static build(e){let t=rU.get(e);return t||(t=new class extends eU{create(){return new e}},rU.set(e,t),t)}static buildFunctional(e){return new(tU=class extends eU{constructor(...e){super(...e),tU.prototype.__init.call(this)}__init(){this.create=e}})}}const iU={color:16777215,outlineColor:0,outlineThickness:1,radius:8,shape:"tooth"},sU=uD;class oU extends sU{constructor(e,t,r={},n,i,s){super(),this.transformer=e;const o=Object.assign({},iU,r);this._handle=t,this._style=o,this.onHandleDelta=n,this.onHandleCommit=i,this._dirty=!0,this.interactive=!0,this.cursor=s||"move",this._pointerDown=!1,this._pointerDragging=!1,this._pointerPosition=new Ex,this._pointerMoveTarget=null,this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onpointerdown=this.onPointerDown,this.onpointermove=this.onPointerMove,this.onpointerup=this.onPointerUp,this.onpointerupoutside=this.onPointerUp}get handle(){return this._handle}set handle(e){this._handle=e,this._dirty=!0}get style(){return this._style}set style(e){this._style=Object.assign({},iU,e),this._dirty=!0}render(e){this._dirty&&(this.draw(),this._dirty=!1),super.render(e)}draw(){const e=this._handle,t=this._style,r=t.radius;if(this.clear().lineStyle(t.outlineThickness,t.outlineColor).beginFill(t.color),"square"===t.shape)this.drawRect(-r/2,-r/2,r,r);else if("tooth"===t.shape)switch(e){case"middleLeft":this.drawPolygon([-r/2,-r/2,-r/2,r/2,r/2,r/2,1.1*r,0,r/2,-r/2]);break;case"topCenter":this.drawPolygon([-r/2,-r/2,r/2,-r/2,r/2,r/2,0,1.1*r,-r/2,r/2]);break;case"middleRight":this.drawPolygon([-r/2,r/2,1.1*-r,0,-r/2,-r/2,r/2,-r/2,r/2,r/2]);break;case"bottomCenter":this.drawPolygon([0,1.1*-r,r/2,-r/2,r/2,r/2,-r/2,r/2,-r/2,-r/2]);break;case"rotator":this.drawCircle(0,0,r/Math.sqrt(2));break;default:this.drawRect(-r/2,-r/2,r,r)}else this.drawCircle(0,0,r);this.endFill()}onPointerDown(e){this._pointerDown=!0,this._pointerDragging=!1,e.stopPropagation(),this._pointerMoveTarget&&(this._pointerMoveTarget.removeEventListener("globalpointermove",this.onPointerMove),this._pointerMoveTarget=null),this._pointerMoveTarget=this.transformer.stage||this,this._pointerMoveTarget.addEventListener("globalpointermove",this.onPointerMove)}onPointerMove(e){this._pointerDown&&(this._pointerDragging?this.onDrag(e):this.onDragStart(e),e.stopPropagation())}onPointerUp(e){this._pointerDragging&&this.onDragEnd(e),this._pointerDown=!1,this._pointerMoveTarget&&(this._pointerMoveTarget.removeEventListener("globalpointermove",this.onPointerMove),this._pointerMoveTarget=null)}onDragStart(e){this._pointerPosition.copyFrom(e.data.global),this._pointerDragging=!0}onDrag(e){const t=e.data.global;this.onHandleDelta&&this.onHandleDelta(t),this._pointerPosition.copyFrom(t)}onDragEnd(e){this._pointerDragging=!1,this.onHandleCommit&&this.onHandleCommit()}}function aU(e,t,r,n){const{x:i,y:s}=r,{x:o,y:a}=n;if(Math.abs(o-i)<.01)return Math.abs(e-i);if(Math.abs(a-s)<.01)return Math.abs(t-s);const l=(a-s)/(o-i);return Math.abs((l*e-t+(a-l*o))/Math.sqrt(l*l+1))}const lU=nU.build(Ex),uU=[new Ex,new Ex,new Ex,new Ex],cU=new Px,dU=new Ex,hU=new Array(12),fU=[[0,0,0,1,-1,1,-1,-1,1,-1,1,0],[0,0,-1,0,-1,-1,1,-1,1,1,0,1],[0,0,1,0,1,1,-1,1,-1,-1,0,-1],[0,0,0,-1,1,-1,1,1,-1,1,-1,0]],pU=uD;class mU extends pU{constructor(e){super(),this.transformer=e,this.boxScalingHandles=[this.addChild(new uD),this.addChild(new uD),this.addChild(new uD),this.addChild(new uD)],this.boxScalingHandles.forEach(e=>{e.interactive=!0}),this.boxScalingHandles[0].cursor=RU.topCenter,this.boxScalingHandles[1].cursor=RU.middleRight,this.boxScalingHandles[2].cursor=RU.bottomCenter,this.boxScalingHandles[3].cursor=RU.middleLeft}hitHandleType(e,t,r){const{boxRotationEnabled:n,boxRotationTolerance:i,boxScalingEnabled:s,boxScalingTolerance:o}=this.transformer,[a,l,u,c]=e.hull,{x:d,y:h}=t.applyInverse(r,dU);if(s){const e=aU(d,h,a,l)*t.d,r=aU(d,h,a,c)*t.a,n=aU(d,h,l,u)*t.a,i=aU(d,h,c,u)*t.d,s=Math.min(e,r,n,i);if(s<o)switch(s){case e:return"topCenter";case r:return"middleLeft";case n:return"middleRight";case i:return"bottomCenter"}}if(n&&!e.contains(d,h)){const e=Math.sqrt((a.x-d)**2+(a.y-h)**2),t=Math.sqrt((l.x-d)**2+(l.y-h)**2),r=Math.sqrt((c.x-d)**2+(c.y-h)**2),n=Math.sqrt((u.x-d)**2+(u.y-h)**2),s=Math.min(e,t,r,n);if(s<1.45*i)switch(s){case e:return"boxRotateTopLeft";case t:return"boxRotateTopRight";case r:return"boxRotateBottomLeft";case n:return"boxRotateBottomRight"}}return null}drawBounds(e){const t=uU;for(let r=0;r<4;r++)this.transformer.projectToLocal(e.hull[r],t[r]);this.drawPolygon(t)}drawBoxScalingTolerance(e,t=this.transformer.boxScalingTolerance){e.innerBounds.pad(-t);const r=lU.allocateArray(4);r.forEach((t,r)=>{this.projectToLocal(e.hull[r],t)}),e.innerBounds.pad(2.5*t);const n=lU.allocateArray(4);n.forEach((t,r)=>{this.projectToLocal(e.hull[r],t)}),e.innerBounds.pad(-1.5*this.transformer.boxScalingTolerance);for(let i=0;i<4;i++){const e=r[i],t=r[(i+1)%4],s=n[i],o=n[(i+1)%4];this.boxScalingHandles[i].clear().beginFill(16777215,1e-4).drawPolygon(e,s,o,t).endFill()}}drawBoxRotationTolerance(){const{boxRotateTopLeft:e,boxRotateTopRight:t,boxRotateBottomLeft:r,boxRotateBottomRight:n}=this.transformer.handleAnchors,i=2*this.transformer.boxRotationTolerance,s=cU.identity().scale(i,i).rotate(this.transformer.getGroupBounds().rotation);for(let o=0;o<4;o++){const i=fU[o];let a;switch(o){case 0:a=e;break;case 1:a=t;break;case 2:a=r;break;case 3:a=n}for(let e=0;e<i.length;e+=2){const t=i[e],r=i[e+1];dU.set(t,r),s.apply(dU,dU),hU[e]=dU.x+a.x,hU[e+1]=dU.y+a.y}this.drawPolygon(hU.slice())}}projectToLocal(e,t){return this.transformer.projectToLocal(e,t)}}const gU=new Px;function yU(e){const t=gU.identity();return t.c=Math.tan(e),t}function vU(e){const t=gU.identity();return t.b=Math.tan(e),t}function _U(e,t,r,n=e.pivot){const i=t.a,s=t.b,o=t.c,a=t.d,l=-Math.atan2(-o,a),u=Math.atan2(s,i);return r=null!=r?r:u,e.pivot.set(n.x,n.y),e.rotation=r,e.skew.x=r+l,e.skew.y=-r+u,e.scale.x=Math.sqrt(i*i+s*s),e.scale.y=Math.sqrt(o*o+a*a),e.position.x=t.tx+(n.x*t.a+n.y*t.c),e.position.y=t.ty+(n.x*t.b+n.y*t.d),e}const bU=new Px,wU=new Px;function xU(e,t,r){if(!r){const t=e.parent?e.parent:e.enableTempParent();e.updateTransform(),e.disableTempParent(t)}const n=e.worldTransform,i=e.parent?wU.copyFrom(e.parent.worldTransform):Px.IDENTITY;bU.copyFrom(n),bU.prepend(t),bU.prepend(i.invert()),_U(e.transform,bU)}const EU=new zx,SU=[new Ex,new Ex,new Ex,new Ex],CU=new Px,AU=new Ex,TU=new JL,DU=new Cx,kU=[new Ex,new Ex,new Ex,new Ex],PU=new Ex,BU=new Px,OU=nU.build(Ex),RU={topLeft:"nw-resize",topCenter:"n-resize",topRight:"ne-resize",middleLeft:"w-resize",middleRight:"e-resize",bottomLeft:"sw-resize",bottomCenter:"s-resize",bottomRight:"se-resize"},FU=["topLeft","topCenter","topRight","middleLeft","middleCenter","middleRight","bottomLeft","bottomCenter","bottomRight"],IU={topLeft:{x:-1,y:-1},topCenter:{x:0,y:-1},topRight:{x:1,y:-1},middleLeft:{x:-1,y:0},middleCenter:{x:0,y:0},middleRight:{x:1,y:0},bottomLeft:{x:-1,y:1},bottomCenter:{x:0,y:1},bottomRight:{x:1,y:1}},MU=[...FU,"rotator","skewHorizontal","skewVertical"],NU=[Math.PI/4,Math.PI/2,3*Math.PI/4,Math.PI,0,-Math.PI/4,-Math.PI/2,3*-Math.PI/4,-Math.PI],LU=Math.PI/90,UU=[Math.PI/4,-Math.PI/4],jU=Math.PI/90,zU={color:0,thickness:2},VU=uC;class GU extends VU{constructor(e={}){super(),GU.prototype.__init.call(this),GU.prototype.__init2.call(this),GU.prototype.__init3.call(this),GU.prototype.__init4.call(this),GU.prototype.__init5.call(this),this.interactive=!0,this.cursors=Object.assign({default:"move"},e.cursors),this.cursor=this.cursors.default,this.boundingBoxes=e.boundingBoxes||"all",this.group=e.group||[],this.boxRotationTolerance=e.boxRotationTolerance||16,this.boxScalingTolerance=e.boxScalingTolerance||4,this.centeredScaling=!!e.centeredScaling,this.projectionTransform=new Px,this.lockAspectRatio=!0===e.lockAspectRatio,this.rotationSnaps=e.rotationSnaps||NU,this.rotationSnapTolerance=void 0!==e.rotationSnapTolerance?e.rotationSnapTolerance:LU,this.skewRadius=e.skewRadius||64,this.skewSnaps=e.skewSnaps||UU,this.skewSnapTolerance=void 0!==e.skewSnapTolerance?e.skewSnapTolerance:jU,this.boxRotationEnabled=!0===e.boxRotationEnabled,this.boxScalingEnabled=!0===e.boxScalingEnabled,this._rotateEnabled=!1!==e.rotateEnabled,this._scaleEnabled=!1!==e.scaleEnabled,this._skewEnabled=!0===e.skewEnabled,this.translateEnabled=!1!==e.translateEnabled,this.transientGroupTilt=void 0===e.transientGroupTilt||e.transientGroupTilt,this.wireframe=this.addChild(new mU(this)),this.wireframe.cursor="none",this.stage=e.stage||null,this._skewX=0,this._skewY=0,this._transformType="none",this._wireframeStyle=Object.assign({},zU,e.wireframeStyle||{});const t=e.handleConstructor||oU,r=e.handleStyle||{};this._handleStyle=r;const n={rotator:this.addChild(new t(this,"rotator",r,e=>{this.rotateGroup("rotator",e)},this.commitGroup))},i=FU.reduce((e,n)=>{const i=new t(this,n,r,null,this.commitGroup,RU[n]);return i.onHandleDelta=e=>{this.scaleGroup(i.handle,e)},i.visible=this._scaleEnabled,e[n]=i,this.addChild(e[n]),e},{}),s={skewHorizontal:this.addChild(new t(this,"skewHorizontal",r,e=>{this.skewGroup("skewHorizontal",e)},this.commitGroup,"pointer")),skewVertical:this.addChild(new t(this,"skewVertical",r,e=>{this.skewGroup("skewVertical",e)},this.commitGroup,"pointer"))};this.handles=Object.assign({},i,n,s),this.handles.middleCenter.visible=!1,this.handles.skewHorizontal.visible=this._skewEnabled,this.handles.skewVertical.visible=this._skewEnabled,this.handleAnchors={rotator:new Ex,boxRotateTopLeft:new Ex,boxRotateTopRight:new Ex,boxRotateBottomLeft:new Ex,boxRotateBottomRight:new Ex,topLeft:new Ex,topCenter:new Ex,topRight:new Ex,middleLeft:new Ex,middleCenter:new Ex,middleRight:new Ex,bottomLeft:new Ex,bottomCenter:new Ex,bottomRight:new Ex,skewHorizontal:new Ex,skewVertical:new Ex},this.groupBounds=new JL,this.updateGroupBounds(),this._pointerDown=!1,this._pointerDragging=!1,this._pointerPosition=new Ex,this._pointerMoveTarget=null,this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.addEventListener("pointerdown",this.onPointerDown),this.addEventListener("pointerup",this.onPointerUp),this.addEventListener("pointerupoutside",this.onPointerUp)}get enabledHandles(){return this._enabledHandles}set enabledHandles(e){(this._enabledHandles||e)&&(this._enabledHandles=e,MU.forEach(e=>{this.handles[e].visible=!1}),e?e.forEach(e=>{this.handles[e].visible=!0}):(this.handles.rotator.visible=this._rotateEnabled,this.handles.skewHorizontal.visible=this._skewEnabled,this.handles.skewVertical.visible=this._skewEnabled,FU.forEach(e=>{"middleCenter"!==e&&(this.handles[e].visible=this._scaleEnabled)})))}get handleStyle(){return this._handleStyle}set handleStyle(e){const t=this.handles;for(const r in t)t[r].style=e;this._handleStyle=e}get rotateEnabled(){return this._rotateEnabled}set rotateEnabled(e){if(this._rotateEnabled!==e){if(this._rotateEnabled=e,this._enabledHandles)return;this.handles.rotator.visible=e}}get scaleEnabled(){return this._scaleEnabled}set scaleEnabled(e){if(this._scaleEnabled!==e){if(this._scaleEnabled=e,this._enabledHandles)return;FU.forEach(t=>{"middleCenter"!==t&&(this.handles[t].visible=e)})}}get skewEnabled(){return this._skewEnabled}set skewEnabled(e){if(this._skewEnabled!==e){if(this._skewEnabled=e,this._enabledHandles)return;this.handles.skewHorizontal.visible=e,this.handles.skewVertical.visible=e}}get transformType(){return this._transformType}get wireframeStyle(){return this._wireframeStyle}set wireframeStyle(e){this._wireframeStyle=Object.assign({},zU,e)}getGroupBounds(e=!1){return e&&this.updateGroupBounds(),this.groupBounds}__init(){this.translateGroup=e=>{this._transformHandle=null,this._transformType="translate";const t=CU.identity().translate(e.x,e.y);this.prependTransform(t)}}__init2(){this.rotateGroup=(e,t)=>{this._transformHandle=e,this._transformType="rotate";const r=this.groupBounds,n=this.worldTransform.apply(this.handleAnchors[e],AU);this.projectionTransform.applyInverse(n,n),t=this.projectionTransform.applyInverse(t,PU);const i=r.center,s=Math.atan2(n.y-i.y,n.x-i.x);let o=Math.atan2(t.y-i.y,t.x-i.x)-s,a=this.groupBounds.rotation+o;a=this.snapAngle(a,this.rotationSnapTolerance,this.rotationSnaps),o=a-this.groupBounds.rotation;const l=CU.identity().translate(-i.x,-i.y).rotate(o).translate(i.x,i.y);this.prependTransform(l,!0),this.updateGroupBounds(a),this._skewX+=o,this._skewY+=o}}__init3(){this.scaleGroup=(e,t)=>{this._transformHandle=e,this._transformType="scale";const r=IU[e].x,n=IU[e].y,i=this.handles,s=this.groupBounds,o=s.rotation,a=s.innerBounds,l=this.worldTransform.apply(this.handleAnchors[e],AU);this.projectionTransform.applyInverse(l,l);const u=(t=this.projectionTransform.applyInverse(t,PU)).x-l.x,c=t.y-l.y,d=(s.topRight.x-s.topLeft.x)/a.width,h=(s.topRight.y-s.topLeft.y)/a.width,f=u*((s.bottomLeft.x-s.topLeft.x)/a.height)+c*((s.bottomLeft.y-s.topLeft.y)/a.height);let p=1+(u*d+c*h)*r/a.width,m=1+f*n/a.height;this.lockAspectRatio&&("topLeft"===e||"topRight"===e||"bottomLeft"===e||"bottomRight"===e)&&(p>m?m=p:p=m);const g=CU.identity();if(0!==r&&0!==p){const e=this.centeredScaling?s.center:1===r?s.topLeft:s.topRight;g.translate(-e.x,-e.y).rotate(-o).scale(p,1).rotate(o).translate(e.x,e.y)}if(0!==n&&0!==m){const e=this.centeredScaling?s.center:1===n?s.topLeft:s.bottomLeft;g.translate(-e.x,-e.y).rotate(-o).scale(1,m).rotate(o).translate(e.x,e.y)}if((m<0||p<0)&&!(m<0&&p<0))switch(e){case"topLeft":case"bottomLeft":this.swapHandles(i.topLeft,i.bottomLeft);break;case"topCenter":case"bottomCenter":this.swapHandles(i.topCenter,i.bottomCenter);break;case"topRight":case"bottomRight":this.swapHandles(i.topRight,i.bottomRight)}this.prependTransform(g)}}__init4(){this.skewGroup=(e,t)=>{this._transformHandle=e,this._transformType="skew";const r=this.groupBounds,n=AU.copyFrom(t);this.projectionTransform.applyInverse(n,n);const i=r.center,s=CU.identity().translate(-i.x,-i.y);let o=this.groupBounds.rotation;if("skewHorizontal"===e){const e=this._skewX;this._skewX=Math.atan2(n.y-i.y,n.x-i.x),this._skewX=this.snapAngle(this._skewX,this.skewSnapTolerance,this.skewSnaps),s.prepend(vU(-e)),s.prepend(vU(this._skewX))}else{const e=this._skewY,t=Math.atan2(n.y-i.y,n.x-i.x)-Math.PI/2;this._skewY=t,this._skewY=this.snapAngle(this._skewY,this.skewSnapTolerance,this.skewSnaps),s.prepend(yU(e)),s.prepend(yU(-this._skewY)),o-=this._skewY-e}s.translate(i.x,i.y),this.prependTransform(s,!0),this.updateGroupBounds(o)}}__init5(){this.commitGroup=()=>{this._transformHandle=null,this._transformType="none",!1!==this.transientGroupTilt&&this.group.length>1&&this.updateGroupBounds(0),this.emit("transformcommit")}}render(e){this.renderable&&this.visible&&(!this.lazyMode||this.lazyDirty)&&this.draw(),super.render(e)}draw(){const e=this.group,{color:t,thickness:r}=this._wireframeStyle;this.wireframe.clear(),"none"!==this.boundingBoxes&&this.wireframe.lineStyle(r,t),this.translateEnabled&&this.wireframe.beginFill(16777215,1e-4);for(let i=0,s=e.length;i<s&&"all"===this.boundingBoxes;i++)this.wireframe.drawBounds(GU.calculateOrientedBounds(e[i],TU));const n=1!==e.length?GU.calculateGroupOrientedBounds(e,this.groupBounds.rotation,TU,!0):GU.calculateOrientedBounds(e[0],TU);this.wireframe.drawBounds(n),this.drawHandles(n),this.groupBounds.copyFrom(n),this.boxRotationEnabled&&(this.wireframe.closePath().beginFill(16777215,1e-4).lineStyle(),this.wireframe.drawBoxRotationTolerance()),this.boxScalingEnabled&&(this.wireframe.closePath().beginFill(16773375,1e-4).lineStyle(),this.wireframe.drawBoxScalingTolerance(n)),this.lazyDirty=!1}drawHandles(e){const t=this.handles,r=this.handleAnchors,{topLeft:n,topRight:i,bottomLeft:s,bottomRight:o,center:a}=e,[l,u,c,d]=kU,h=AU;if(this.projectToLocal(n,l),this.projectToLocal(i,u),this.projectToLocal(s,c),this.projectToLocal(o,d),this.projectToLocal(a,h),r.topLeft.copyFrom(l),r.topCenter.set((l.x+u.x)/2,(l.y+u.y)/2),r.topRight.copyFrom(u),r.middleLeft.set((l.x+c.x)/2,(l.y+c.y)/2),r.middleCenter.set((l.x+d.x)/2,(l.y+d.y)/2),r.middleRight.set((u.x+d.x)/2,(u.y+d.y)/2),r.bottomLeft.copyFrom(c),r.bottomCenter.set((c.x+d.x)/2,(c.y+d.y)/2),r.bottomRight.copyFrom(d),this.boxRotationEnabled&&(r.boxRotateTopLeft.copyFrom(r.topLeft),r.boxRotateTopRight.copyFrom(r.topRight),r.boxRotateBottomLeft.copyFrom(r.bottomLeft),r.boxRotateBottomRight.copyFrom(r.bottomRight)),this._rotateEnabled){const e=(l.x+u.x)/2,r=(l.y+u.y)/2;let n=-(l.y-u.y),i=l.x-u.x;const s=Math.sqrt(n*n+i*i);n*=32/s,i*=32/s,t.rotator.position.x=e+n,t.rotator.position.y=r+i,this.wireframe.moveTo(e,r).lineTo(t.rotator.position.x,t.rotator.position.y),this.handleAnchors.rotator.copyFrom(t.rotator.position)}if(this._skewEnabled){const e=h.x,n=h.y;this.worldTransform.apply(h,h),r.skewHorizontal.set(h.x+Math.cos(this._skewX)*this.skewRadius,h.y+Math.sin(this._skewX)*this.skewRadius),r.skewVertical.set(h.x+-Math.sin(this._skewY)*this.skewRadius,h.y+Math.cos(this._skewY)*this.skewRadius),this.worldTransform.applyInverse(r.skewHorizontal,r.skewHorizontal),this.worldTransform.applyInverse(r.skewVertical,r.skewVertical),h.set(e,n),this.wireframe.beginFill(this.wireframeStyle.color).drawCircle(h.x,h.y,2*this.wireframeStyle.thickness).endFill(),this.wireframe.moveTo(h.x,h.y).lineTo(t.skewHorizontal.x,t.skewHorizontal.y).moveTo(h.x,h.y).lineTo(t.skewVertical.x,t.skewVertical.y)}for(const f in t){let e=this.groupBounds.rotation;"skewHorizontal"===f?e=this._skewX:"skewVertical"===f&&(e=this._skewY);const n=t[f];n.rotation=e,n.position.copyFrom(r[f]),n.getBounds(!1,DU)}}onPointerDown(e){this._pointerDown=!0,this._pointerDragging=!1,e.stopPropagation(),this._pointerMoveTarget&&(this._pointerMoveTarget.removeEventListener("globalpointermove",this.onPointerMove),this._pointerMoveTarget=null),this._pointerMoveTarget=this.stage||this,this._pointerMoveTarget.addEventListener("globalpointermove",this.onPointerMove)}onPointerMove(e){const t=this._pointerPosition,r=OU.allocate().copyFrom(e.data.global),n=this.wireframe.hitHandleType(this.groupBounds,this.projectionTransform,r);if(this._pointerDown){const i=r.x,s=r.y;if(this._pointerDragging)switch(this._transformHandle){case"boxRotateTopLeft":case"boxRotateTopRight":case"boxRotateBottomLeft":case"boxRotateBottomRight":this.rotateGroup(this._transformHandle,r);break;case"topCenter":case"middleLeft":case"middleRight":case"bottomCenter":this.scaleGroup(this._transformHandle,r);break;default:if(this.translateEnabled){const[e,n,i]=kU;e.set(0,0),n.set(r.x-t.x,r.y-t.y),this.projectionTransform.applyInverse(e,e),this.projectionTransform.applyInverse(n,n),i.set(n.x-e.x,n.y-e.y),this.translateGroup(i)}}else this._transformHandle=this.wireframe.hitHandleType(this.groupBounds,this.projectionTransform,r),this.setCursorFromHoveredHandle(n);this._pointerPosition.x=i,this._pointerPosition.y=s,this._pointerDragging=!0,e.stopPropagation()}else this.setCursorFromHoveredHandle(n);OU.release(r)}onPointerUp(e){this._pointerDragging=!1,this._pointerDown=!1,this.commitGroup(),e.stopPropagation(),this._pointerMoveTarget&&(this._pointerMoveTarget.removeEventListener("globalpointermove",this.onPointerMove),this._pointerMoveTarget=null)}prependTransform(e,t=!1){const r=this.group;for(let n=0,i=r.length;n<i;n++)xU(r[n],e,!1);BU.copyFrom(e),t||this.updateGroupBounds(),this.emit("transformchange",BU)}updateGroupBounds(e=this.groupBounds.rotation){GU.calculateGroupOrientedBounds(this.group,e,this.groupBounds),this.drawHandles(this.groupBounds),this.lazyDirty=!0}snapAngle(e,t,r){if(e%=2*Math.PI,!r||1===r.length||!t)return e;for(let n=0,i=r.length;n<i;n++)if(Math.abs(e-r[n])<=t)return r[n];return e}swapHandles(e,t){const r=e.handle,n=t.handle,i=e.cursor,s=t.cursor,o=e.x,a=t.x,l=e.y,u=t.y;e.handle=n,t.handle=r,e.position.set(a,u),t.position.set(o,l),e.cursor=s,t.cursor=i,this.handles[r]=t,this.handles[n]=e,this._transformHandle===r?this._transformHandle=n:this._transformHandle===n&&(this._transformHandle=r)}setCursorFromHoveredHandle(e){if(e&&e.startsWith("boxRotate"))this.cursor=this.cursors.boxRotate||this.cursors.default;else if(e)switch(e){case"topCenter":this.cursor=this.cursors.boxScaleTop||this.cursors.default;break;case"middleLeft":this.cursor=this.cursors.boxScaleLeft||this.cursors.default;break;case"middleRight":this.cursor=this.cursors.boxScaleRight||this.cursors.default;break;case"bottomCenter":this.cursor=this.cursors.boxScaleBottom||this.cursors.default}else this.cursor=this.cursors.translate||this.cursors.default}projectToLocal(e,t){return t||(t=new Ex),this.projectionTransform.apply(e,t),this.worldTransform.applyInverse(t,t),t}static calculateTransformedCorners(e,t=e.worldTransform,r,n=0){const i=e.getLocalBounds();return e.getBounds(),(r=r||[new Ex,new Ex,new Ex,new Ex])[n].set(i.x,i.y),r[n+1].set(i.x+i.width,i.y),r[n+2].set(i.x+i.width,i.y+i.height),r[n+3].set(i.x,i.y+i.height),t.apply(r[n],r[n]),t.apply(r[n+1],r[n+1]),t.apply(r[n+2],r[n+2]),t.apply(r[n+3],r[n+3]),r}static calculateOrientedBounds(e,t){const r=e.parent?e.parent:e.enableTempParent();e.updateTransform(),e.disableTempParent(r),_U(EU,e.worldTransform),EU.updateLocalTransform();const n=EU.rotation,i=GU.calculateTransformedCorners(e,e.worldTransform,SU),s=(i[0].x+i[1].x+i[2].x+i[3].x)/4,o=(i[0].y+i[1].y+i[2].y+i[3].y)/4,a=CU.identity().translate(-s,-o).rotate(-EU.rotation).translate(s,o);return a.apply(i[0],i[0]),a.apply(i[1],i[1]),a.apply(i[2],i[2]),a.apply(i[3],i[3]),(t=t||new JL).rotation=n,t.innerBounds.x=Math.min(i[0].x,i[1].x,i[2].x,i[3].x),t.innerBounds.y=Math.min(i[0].y,i[1].y,i[2].y,i[3].y),t.innerBounds.width=Math.max(i[0].x,i[1].x,i[2].x,i[3].x)-t.innerBounds.x,t.innerBounds.height=Math.max(i[0].y,i[1].y,i[2].y,i[3].y)-t.innerBounds.y,t}static calculateGroupOrientedBounds(e,t,r,n=!1){const i=e.length,s=OU.allocateArray(4*i);for(let d=0;d<i;d++){const t=e[d];if(!n){const e=t.parent?t.parent:t.enableTempParent();t.updateTransform(),t.disableTempParent(e)}GU.calculateTransformedCorners(t,t.worldTransform,s,4*d)}const o=CU.identity().rotate(-t);let a=Number.MAX_VALUE,l=Number.MAX_VALUE,u=-Number.MAX_VALUE,c=-Number.MAX_VALUE;for(let d=0,h=s.length;d<h;d++){const e=s[d];o.apply(e,e);const t=e.x,r=e.y;a=t<a?t:a,l=r<l?r:l,u=t>u?t:u,c=r>c?r:c}return OU.releaseArray(s),(r=r||new JL).innerBounds.x=a,r.innerBounds.y=l,r.innerBounds.width=u-a,r.innerBounds.height=c-l,r.rotation=t,o.applyInverse(r.center,AU),r.center.copyFrom(AU),r}}e("y",GU);var HU=Symbol.for("immer-nothing"),$U=Symbol.for("immer-draftable"),WU=Symbol.for("immer-state");function qU(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var XU=Object.getPrototypeOf;function YU(e){return!!e&&!!e[WU]}function KU(e){return!!e&&(QU(e)||Array.isArray(e)||!!e[$U]||!!e.constructor?.[$U]||ij(e)||sj(e))}var ZU=Object.prototype.constructor.toString(),JU=new WeakMap;function QU(e){if(!e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);if(null===t||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if("function"!=typeof r)return!1;let n=JU.get(r);return void 0===n&&(n=Function.toString.call(r),JU.set(r,n)),n===ZU}function ej(e,t,r=!0){0===tj(e)?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function tj(e){const t=e[WU];return t?t.type_:Array.isArray(e)?1:ij(e)?2:sj(e)?3:0}function rj(e,t){return 2===tj(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function nj(e,t,r){const n=tj(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function ij(e){return e instanceof Map}function sj(e){return e instanceof Set}function oj(e){return e.copy_||e.base_}function aj(e,t){if(ij(e))return new Map(e);if(sj(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=QU(e);if(!0===t||"class_only"===t&&!r){const t=Object.getOwnPropertyDescriptors(e);delete t[WU];let r=Reflect.ownKeys(t);for(let n=0;n<r.length;n++){const i=r[n],s=t[i];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(XU(e),t)}{const t=XU(e);if(null!==t&&r)return{...e};const n=Object.create(t);return Object.assign(n,e)}}function lj(e,t=!1){return cj(e)||YU(e)||!KU(e)||(tj(e)>1&&Object.defineProperties(e,{set:uj,add:uj,clear:uj,delete:uj}),Object.freeze(e),t&&Object.values(e).forEach(e=>lj(e,!0))),e}var uj={value:function(){qU(2)}};function cj(e){return null===e||"object"!=typeof e||Object.isFrozen(e)}var dj,hj={};function fj(e){const t=hj[e];return t||qU(0),t}function pj(){return dj}function mj(e,t){t&&(fj("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function gj(e){yj(e),e.drafts_.forEach(_j),e.drafts_=null}function yj(e){e===dj&&(dj=e.parent_)}function vj(e){return dj={drafts_:[],parent_:dj,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function _j(e){const t=e[WU];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function bj(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return void 0!==e&&e!==r?(r[WU].modified_&&(gj(t),qU(4)),KU(e)&&(e=wj(t,e),t.parent_||Ej(t,e)),t.patches_&&fj("Patches").generateReplacementPatches_(r[WU].base_,e,t.patches_,t.inversePatches_)):e=wj(t,r,[]),gj(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==HU?e:void 0}function wj(e,t,r){if(cj(t))return t;const n=e.immer_.shouldUseStrictIteration(),i=t[WU];if(!i)return ej(t,(n,s)=>xj(e,i,t,n,s,r),n),t;if(i.scope_!==e)return t;if(!i.modified_)return Ej(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const t=i.copy_;let s=t,o=!1;3===i.type_&&(s=new Set(t),t.clear(),o=!0),ej(s,(n,s)=>xj(e,i,t,n,s,r,o),n),Ej(e,t,!1),r&&e.patches_&&fj("Patches").generatePatches_(i,r,e.patches_,e.inversePatches_)}return i.copy_}function xj(e,t,r,n,i,s,o){if(null==i)return;if("object"!=typeof i&&!o)return;const a=cj(i);if(!a||o){if(YU(i)){const o=wj(e,i,s&&t&&3!==t.type_&&!rj(t.assigned_,n)?s.concat(n):void 0);if(nj(r,n,o),!YU(o))return;e.canAutoFreeze_=!1}else o&&r.add(i);if(KU(i)&&!a){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;if(t&&t.base_&&t.base_[n]===i&&a)return;wj(e,i),t&&t.scope_.parent_||"symbol"==typeof n||!(ij(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))||Ej(e,i)}}}function Ej(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&lj(t,r)}var Sj={get(e,t){if(t===WU)return e;const r=oj(e);if(!rj(r,t))return function(e,t,r){const n=Tj(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}(e,r,t);const n=r[t];return e.finalized_||!KU(n)?n:n===Aj(e.base_,t)?(kj(e),e.copy_[t]=Pj(n,e)):n},has:(e,t)=>t in oj(e),ownKeys:e=>Reflect.ownKeys(oj(e)),set(e,t,r){const n=Tj(oj(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const n=Aj(oj(e),t),i=n?.[WU];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(r,n)&&(void 0!==r||rj(e.base_,t)))return!0;kj(e),Dj(e)}return e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==Aj(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,kj(e),Dj(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const r=oj(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty(){qU(11)},getPrototypeOf:e=>XU(e.base_),setPrototypeOf(){qU(12)}},Cj={};function Aj(e,t){const r=e[WU];return(r?oj(r):e)[t]}function Tj(e,t){if(!(t in e))return;let r=XU(e);for(;r;){const e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=XU(r)}}function Dj(e){e.modified_||(e.modified_=!0,e.parent_&&Dj(e.parent_))}function kj(e){e.copy_||(e.copy_=aj(e.base_,e.scope_.immer_.useStrictShallowCopy_))}function Pj(e,t){const r=ij(e)?fj("MapSet").proxyMap_(e,t):sj(e)?fj("MapSet").proxySet_(e,t):function(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:pj(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,s=Sj;r&&(i=[n],s=Cj);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return n.draft_=a,n.revoke_=o,a}(e,t);return(t?t.scope_:pj()).drafts_.push(r),r}function Bj(e){if(!KU(e)||cj(e))return e;const t=e[WU];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=aj(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=aj(e,!0);return ej(r,(e,t)=>{nj(r,e,Bj(t))},n),t&&(t.finalized_=!1),r}function Oj(){class e extends Map{constructor(e,t){super(),this[WU]={type_:2,parent_:t,scope_:t?t.scope_:pj(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:e,draft_:this,isManual_:!1,revoked_:!1}}get size(){return oj(this[WU]).size}has(e){return oj(this[WU]).has(e)}set(e,r){const n=this[WU];return i(n),oj(n).has(e)&&oj(n).get(e)===r||(t(n),Dj(n),n.assigned_.set(e,!0),n.copy_.set(e,r),n.assigned_.set(e,!0)),this}delete(e){if(!this.has(e))return!1;const r=this[WU];return i(r),t(r),Dj(r),r.base_.has(e)?r.assigned_.set(e,!1):r.assigned_.delete(e),r.copy_.delete(e),!0}clear(){const e=this[WU];i(e),oj(e).size&&(t(e),Dj(e),e.assigned_=new Map,ej(e.base_,t=>{e.assigned_.set(t,!1)}),e.copy_.clear())}forEach(e,t){oj(this[WU]).forEach((r,n,i)=>{e.call(t,this.get(n),n,this)})}get(e){const r=this[WU];i(r);const n=oj(r).get(e);if(r.finalized_||!KU(n))return n;if(n!==r.base_.get(e))return n;const s=Pj(n,r);return t(r),r.copy_.set(e,s),s}keys(){return oj(this[WU]).keys()}values(){const e=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{const t=e.next();return t.done?t:{done:!1,value:this.get(t.value)}}}}entries(){const e=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{const t=e.next();if(t.done)return t;const r=this.get(t.value);return{done:!1,value:[t.value,r]}}}}[Symbol.iterator](){return this.entries()}}function t(e){e.copy_||(e.assigned_=new Map,e.copy_=new Map(e.base_))}class r extends Set{constructor(e,t){super(),this[WU]={type_:3,parent_:t,scope_:t?t.scope_:pj(),modified_:!1,finalized_:!1,copy_:void 0,base_:e,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1}}get size(){return oj(this[WU]).size}has(e){const t=this[WU];return i(t),t.copy_?!!t.copy_.has(e)||!(!t.drafts_.has(e)||!t.copy_.has(t.drafts_.get(e))):t.base_.has(e)}add(e){const t=this[WU];return i(t),this.has(e)||(n(t),Dj(t),t.copy_.add(e)),this}delete(e){if(!this.has(e))return!1;const t=this[WU];return i(t),n(t),Dj(t),t.copy_.delete(e)||!!t.drafts_.has(e)&&t.copy_.delete(t.drafts_.get(e))}clear(){const e=this[WU];i(e),oj(e).size&&(n(e),Dj(e),e.copy_.clear())}values(){const e=this[WU];return i(e),n(e),e.copy_.values()}entries(){const e=this[WU];return i(e),n(e),e.copy_.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(e,t){const r=this.values();let n=r.next();for(;!n.done;)e.call(t,n.value,n.value,this),n=r.next()}}function n(e){e.copy_||(e.copy_=new Set,e.base_.forEach(t=>{if(KU(t)){const r=Pj(t,e);e.drafts_.set(t,r),e.copy_.add(r)}else e.copy_.add(t)}))}function i(e){e.revoked_&&qU(3,JSON.stringify(oj(e)))}!function(e,t){hj[e]||(hj[e]=t)}("MapSet",{proxyMap_:function(t,r){return new e(t,r)},proxySet_:function(e,t){return new r(e,t)}})}ej(Sj,(e,t)=>{Cj[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Cj.deleteProperty=function(e,t){return Cj.set.call(this,e,t,void 0)},Cj.set=function(e,t,r){return Sj.set.call(this,e[0],t,r,e[0])};var Rj=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,t,r)=>{if("function"==typeof e&&"function"!=typeof t){const r=t;t=e;const n=this;return function(e=r,...i){return n.produce(e,e=>t.call(this,e,...i))}}let n;if("function"!=typeof t&&qU(6),void 0!==r&&"function"!=typeof r&&qU(7),KU(e)){const i=vj(this),s=Pj(e,void 0);let o=!0;try{n=t(s),o=!1}finally{o?gj(i):yj(i)}return mj(i,r),bj(n,i)}if(!e||"object"!=typeof e){if(n=t(e),void 0===n&&(n=e),n===HU&&(n=void 0),this.autoFreeze_&&lj(n,!0),r){const t=[],i=[];fj("Patches").generateReplacementPatches_(e,n,t,i),r(t,i)}return n}qU(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...r)=>this.produceWithPatches(t,t=>e(t,...r));let r,n;const i=this.produce(e,t,(e,t)=>{r=e,n=t});return[i,r,n]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),"boolean"==typeof e?.useStrictIteration&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){var t;KU(e)||qU(8),YU(e)&&(YU(t=e)||qU(10),e=Bj(t));const r=vj(this),n=Pj(e,void 0);return n[WU].isManual_=!0,yj(r),n}finishDraft(e,t){const r=e&&e[WU];r&&r.isManual_||qU(9);const{scope_:n}=r;return mj(n,t),bj(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));const n=fj("Patches").applyPatches_;return YU(e)?n(e,t):this.produce(e,e=>n(e,t))}},Fj=Rj.produce,Ij=Rj.setAutoFreeze.bind(Rj),Mj=Rj.createDraft.bind(Rj),Nj=Rj.finishDraft.bind(Rj);function Lj(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function Uj(...e){return t=>{let r=!1;const n=e.map(e=>{const n=Lj(e,t);return r||"function"!=typeof n||(r=!0),n});if(r)return()=>{for(let t=0;t<n.length;t++){const r=n[t];"function"==typeof r?r():Lj(e[t],null)}}}}function jj(...e){return $.useCallback(Uj(...e),e)}function zj(e){const t=Vj(e),r=$.forwardRef((e,r)=>{const{children:n,...i}=e,s=$.Children.toArray(n),o=s.find($j);if(o){const e=o.props.children,n=s.map(t=>t===o?$.Children.count(e)>1?$.Children.only(null):$.isValidElement(e)?e.props.children:null:t);return te.jsx(t,{...i,ref:r,children:$.isValidElement(e)?$.cloneElement(e,void 0,n):null})}return te.jsx(t,{...i,ref:r,children:n})});return r.displayName=`${e}.Slot`,r}function Vj(e){const t=$.forwardRef((e,t)=>{const{children:r,...n}=e;if($.isValidElement(r)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}(r),i=function(e,t){const r={...t};for(const n in t){const i=e[n],s=t[n];/^on[A-Z]/.test(n)?i&&s?r[n]=(...e)=>{const t=s(...e);return i(...e),t}:i&&(r[n]=i):"style"===n?r[n]={...i,...s}:"className"===n&&(r[n]=[i,s].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==$.Fragment&&(i.ref=t?Uj(t,e):e),$.cloneElement(r,i)}return $.Children.count(r)>1?$.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}e("D",e=>(t,r,n)=>(n.setState=(e,r,...n)=>{const i="function"==typeof e?Fj(e):e;return t(i,r,...n)},e(n.setState,r,n)));var Gj=Symbol("radix.slottable");function Hj(e){const t=({children:e})=>te.jsx(te.Fragment,{children:e});return t.displayName=`${e}.Slottable`,t.__radixId=Gj,t}function $j(e){return $.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Gj}var Wj=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const r=zj(`Primitive.${t}`),n=$.forwardRef((e,n)=>{const{asChild:i,...s}=e,o=i?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),te.jsx(o,{...s,ref:n})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function qj(e,t){e&&ld.flushSync(()=>e.dispatchEvent(t))}var Xj=globalThis?.document?$.useLayoutEffect:()=>{},Yj=e=>{const{present:t,children:r}=e,n=function(e){const[t,r]=$.useState(),n=$.useRef(null),i=$.useRef(e),s=$.useRef("none"),o=e?"mounted":"unmounted",[a,l]=function(e,t){return $.useReducer((e,r)=>t[e][r]??e,e)}(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return $.useEffect(()=>{const e=Kj(n.current);s.current="mounted"===a?e:"none"},[a]),Xj(()=>{const t=n.current,r=i.current;if(r!==e){const n=s.current,o=Kj(t);l(e?"MOUNT":"none"===o||"none"===t?.display?"UNMOUNT":r&&n!==o?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,l]),Xj(()=>{if(t){let e;const r=t.ownerDocument.defaultView??window,o=s=>{const o=Kj(n.current).includes(CSS.escape(s.animationName));if(s.target===t&&o&&(l("ANIMATION_END"),!i.current)){const n=t.style.animationFillMode;t.style.animationFillMode="forwards",e=r.setTimeout(()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=n)})}},a=e=>{e.target===t&&(s.current=Kj(n.current))};return t.addEventListener("animationstart",a),t.addEventListener("animationcancel",o),t.addEventListener("animationend",o),()=>{r.clearTimeout(e),t.removeEventListener("animationstart",a),t.removeEventListener("animationcancel",o),t.removeEventListener("animationend",o)}}l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:$.useCallback(e=>{n.current=e?getComputedStyle(e):null,r(e)},[])}}(t),i="function"==typeof r?r({present:n.isPresent}):$.Children.only(r),s=jj(n.ref,function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}(i));return"function"==typeof r||n.isPresent?$.cloneElement(i,{ref:s}):null};function Kj(e){return e?.animationName||"none"}function Zj(e,t=[]){let r=[];const n=()=>{const t=r.map(e=>$.createContext(e));return function(r){const n=r?.[e]||t;return $.useMemo(()=>({[`__scope${e}`]:{...r,[e]:n}}),[r,n])}};return n.scopeName=e,[function(t,n){const i=$.createContext(n),s=r.length;r=[...r,n];const o=t=>{const{scope:r,children:n,...o}=t,a=r?.[e]?.[s]||i,l=$.useMemo(()=>o,Object.values(o));return te.jsx(a.Provider,{value:l,children:n})};return o.displayName=t+"Provider",[o,function(r,o){const a=o?.[e]?.[s]||i,l=$.useContext(a);if(l)return l;if(void 0!==n)return n;throw new Error(`\`${r}\` must be used within \`${t}\``)}]},Jj(n,...t)]}function Jj(...e){const t=e[0];if(1===e.length)return t;const r=()=>{const r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const n=r.reduce((t,{useScope:r,scopeName:n})=>({...t,...r(e)[`__scope${n}`]}),{});return $.useMemo(()=>({[`__scope${t.scopeName}`]:n}),[n])}};return r.scopeName=t.scopeName,r}function Qj(e){const t=$.useRef(e);return $.useEffect(()=>{t.current=e}),$.useMemo(()=>(...e)=>t.current?.(...e),[])}Yj.displayName="Presence";var ez=$.createContext(void 0);function tz(e){const t=$.useContext(ez);return e||t||"ltr"}function rz(e,[t,r]){return Math.min(r,Math.max(t,e))}function nz(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(e?.(n),!1===r||!n.defaultPrevented)return t?.(n)}}var iz="ScrollArea",[sz,oz]=Zj(iz),[az,lz]=sz(iz),uz=$.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:i,scrollHideDelay:s=600,...o}=e,[a,l]=$.useState(null),[u,c]=$.useState(null),[d,h]=$.useState(null),[f,p]=$.useState(null),[m,g]=$.useState(null),[y,v]=$.useState(0),[_,b]=$.useState(0),[w,x]=$.useState(!1),[E,S]=$.useState(!1),C=jj(t,e=>l(e)),A=tz(i);return te.jsx(az,{scope:r,type:n,dir:A,scrollHideDelay:s,scrollArea:a,viewport:u,onViewportChange:c,content:d,onContentChange:h,scrollbarX:f,onScrollbarXChange:p,scrollbarXEnabled:w,onScrollbarXEnabledChange:x,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:E,onScrollbarYEnabledChange:S,onCornerWidthChange:v,onCornerHeightChange:b,children:te.jsx(Wj.div,{dir:A,...o,ref:C,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":_+"px",...e.style}})})});uz.displayName=iz;var cz="ScrollAreaViewport",dz=$.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,nonce:i,...s}=e,o=lz(cz,r),a=jj(t,$.useRef(null),o.onViewportChange);return te.jsxs(te.Fragment,{children:[te.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),te.jsx(Wj.div,{"data-radix-scroll-area-viewport":"",...s,ref:a,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:te.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});dz.displayName=cz;var hz="ScrollAreaScrollbar",fz=e("J",$.forwardRef((e,t)=>{const{forceMount:r,...n}=e,i=lz(hz,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a="horizontal"===e.orientation;return $.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),"hover"===i.type?te.jsx(pz,{...n,ref:t,forceMount:r}):"scroll"===i.type?te.jsx(mz,{...n,ref:t,forceMount:r}):"auto"===i.type?te.jsx(gz,{...n,ref:t,forceMount:r}):"always"===i.type?te.jsx(yz,{...n,ref:t}):null}));fz.displayName=hz;var pz=$.forwardRef((e,t)=>{const{forceMount:r,...n}=e,i=lz(hz,e.__scopeScrollArea),[s,o]=$.useState(!1);return $.useEffect(()=>{const e=i.scrollArea;let t=0;if(e){const r=()=>{window.clearTimeout(t),o(!0)},n=()=>{t=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return e.addEventListener("pointerenter",r),e.addEventListener("pointerleave",n),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",r),e.removeEventListener("pointerleave",n)}}},[i.scrollArea,i.scrollHideDelay]),te.jsx(Yj,{present:r||s,children:te.jsx(gz,{"data-state":s?"visible":"hidden",...n,ref:t})})}),mz=$.forwardRef((e,t)=>{const{forceMount:r,...n}=e,i=lz(hz,e.__scopeScrollArea),s="horizontal"===e.orientation,o=Mz(()=>l("SCROLL_END"),100),[a,l]=function(e,t){return $.useReducer((e,r)=>t[e][r]??e,e)}("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return $.useEffect(()=>{if("idle"===a){const e=window.setTimeout(()=>l("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(e)}},[a,i.scrollHideDelay,l]),$.useEffect(()=>{const e=i.viewport,t=s?"scrollLeft":"scrollTop";if(e){let r=e[t];const n=()=>{const n=e[t];r!==n&&(l("SCROLL"),o()),r=n};return e.addEventListener("scroll",n),()=>e.removeEventListener("scroll",n)}},[i.viewport,s,l,o]),te.jsx(Yj,{present:r||"hidden"!==a,children:te.jsx(yz,{"data-state":"hidden"===a?"hidden":"visible",...n,ref:t,onPointerEnter:nz(e.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:nz(e.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),gz=$.forwardRef((e,t)=>{const r=lz(hz,e.__scopeScrollArea),{forceMount:n,...i}=e,[s,o]=$.useState(!1),a="horizontal"===e.orientation,l=Mz(()=>{if(r.viewport){const e=r.viewport.offsetWidth<r.viewport.scrollWidth,t=r.viewport.offsetHeight<r.viewport.scrollHeight;o(a?e:t)}},10);return Nz(r.viewport,l),Nz(r.content,l),te.jsx(Yj,{present:n||s,children:te.jsx(yz,{"data-state":s?"visible":"hidden",...i,ref:t})})}),yz=$.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,i=lz(hz,e.__scopeScrollArea),s=$.useRef(null),o=$.useRef(0),[a,l]=$.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=Pz(a.viewport,a.content),c={...n,sizes:a,onSizesChange:l,hasThumb:Boolean(u>0&&u<1),onThumbChange:e=>s.current=e,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:e=>o.current=e};function d(e,t){return function(e,t,r,n="ltr"){const i=Bz(r),s=i/2,o=t||s,a=i-o,l=r.scrollbar.paddingStart+o,u=r.scrollbar.size-r.scrollbar.paddingEnd-a,c=r.content-r.viewport,d="ltr"===n?[0,c]:[-1*c,0],h=Rz([l,u],d);return h(e)}(e,o.current,a,t)}return"horizontal"===r?te.jsx(vz,{...c,ref:t,onThumbPositionChange:()=>{if(i.viewport&&s.current){const e=Oz(i.viewport.scrollLeft,a,i.dir);s.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{i.viewport&&(i.viewport.scrollLeft=e)},onDragScroll:e=>{i.viewport&&(i.viewport.scrollLeft=d(e,i.dir))}}):"vertical"===r?te.jsx(_z,{...c,ref:t,onThumbPositionChange:()=>{if(i.viewport&&s.current){const e=Oz(i.viewport.scrollTop,a);s.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{i.viewport&&(i.viewport.scrollTop=e)},onDragScroll:e=>{i.viewport&&(i.viewport.scrollTop=d(e))}}):null}),vz=$.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...i}=e,s=lz(hz,e.__scopeScrollArea),[o,a]=$.useState(),l=$.useRef(null),u=jj(t,l,s.onScrollbarXChange);return $.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),te.jsx(xz,{"data-orientation":"horizontal",...i,ref:u,sizes:r,style:{bottom:0,left:"rtl"===s.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===s.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Bz(r)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,r)=>{if(s.viewport){const n=s.viewport.scrollLeft+t.deltaX;e.onWheelScroll(n),Fz(n,r)&&t.preventDefault()}},onResize:()=>{l.current&&s.viewport&&o&&n({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:kz(o.paddingLeft),paddingEnd:kz(o.paddingRight)}})}})}),_z=$.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...i}=e,s=lz(hz,e.__scopeScrollArea),[o,a]=$.useState(),l=$.useRef(null),u=jj(t,l,s.onScrollbarYChange);return $.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),te.jsx(xz,{"data-orientation":"vertical",...i,ref:u,sizes:r,style:{top:0,right:"ltr"===s.dir?0:void 0,left:"rtl"===s.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Bz(r)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,r)=>{if(s.viewport){const n=s.viewport.scrollTop+t.deltaY;e.onWheelScroll(n),Fz(n,r)&&t.preventDefault()}},onResize:()=>{l.current&&s.viewport&&o&&n({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:kz(o.paddingTop),paddingEnd:kz(o.paddingBottom)}})}})}),[bz,wz]=sz(hz),xz=$.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:i,onThumbChange:s,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:l,onDragScroll:u,onWheelScroll:c,onResize:d,...h}=e,f=lz(hz,r),[p,m]=$.useState(null),g=jj(t,e=>m(e)),y=$.useRef(null),v=$.useRef(""),_=f.viewport,b=n.content-n.viewport,w=Qj(c),x=Qj(l),E=Mz(d,10);function S(e){if(y.current){const t=e.clientX-y.current.left,r=e.clientY-y.current.top;u({x:t,y:r})}}return $.useEffect(()=>{const e=e=>{const t=e.target,r=p?.contains(t);r&&w(e,b)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[_,p,b,w]),$.useEffect(x,[n,x]),Nz(p,E),Nz(f.content,E),te.jsx(bz,{scope:r,scrollbar:p,hasThumb:i,onThumbChange:Qj(s),onThumbPointerUp:Qj(o),onThumbPositionChange:x,onThumbPointerDown:Qj(a),children:te.jsx(Wj.div,{...h,ref:g,style:{position:"absolute",...h.style},onPointerDown:nz(e.onPointerDown,e=>{0===e.button&&(e.target.setPointerCapture(e.pointerId),y.current=p.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",f.viewport&&(f.viewport.style.scrollBehavior="auto"),S(e))}),onPointerMove:nz(e.onPointerMove,S),onPointerUp:nz(e.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=v.current,f.viewport&&(f.viewport.style.scrollBehavior=""),y.current=null})})})}),Ez="ScrollAreaThumb",Sz=e("K",$.forwardRef((e,t)=>{const{forceMount:r,...n}=e,i=wz(Ez,e.__scopeScrollArea);return te.jsx(Yj,{present:r||i.hasThumb,children:te.jsx(Cz,{ref:t,...n})})})),Cz=$.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...i}=e,s=lz(Ez,r),o=wz(Ez,r),{onThumbPositionChange:a}=o,l=jj(t,e=>o.onThumbChange(e)),u=$.useRef(void 0),c=Mz(()=>{u.current&&(u.current(),u.current=void 0)},100);return $.useEffect(()=>{const e=s.viewport;if(e){const t=()=>{if(c(),!u.current){const t=Iz(e,a);u.current=t,a()}};return a(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[s.viewport,c,a]),te.jsx(Wj.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:nz(e.onPointerDownCapture,e=>{const t=e.target.getBoundingClientRect(),r=e.clientX-t.left,n=e.clientY-t.top;o.onThumbPointerDown({x:r,y:n})}),onPointerUp:nz(e.onPointerUp,o.onThumbPointerUp)})});Sz.displayName=Ez;var Az="ScrollAreaCorner",Tz=$.forwardRef((e,t)=>{const r=lz(Az,e.__scopeScrollArea),n=Boolean(r.scrollbarX&&r.scrollbarY);return"scroll"!==r.type&&n?te.jsx(Dz,{...e,ref:t}):null});Tz.displayName=Az;var Dz=$.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,i=lz(Az,r),[s,o]=$.useState(0),[a,l]=$.useState(0),u=Boolean(s&&a);return Nz(i.scrollbarX,()=>{const e=i.scrollbarX?.offsetHeight||0;i.onCornerHeightChange(e),l(e)}),Nz(i.scrollbarY,()=>{const e=i.scrollbarY?.offsetWidth||0;i.onCornerWidthChange(e),o(e)}),u?te.jsx(Wj.div,{...n,ref:t,style:{width:s,height:a,position:"absolute",right:"ltr"===i.dir?0:void 0,left:"rtl"===i.dir?0:void 0,bottom:0,...e.style}}):null});function kz(e){return e?parseInt(e,10):0}function Pz(e,t){const r=e/t;return isNaN(r)?0:r}function Bz(e){const t=Pz(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function Oz(e,t,r="ltr"){const n=Bz(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-n,l=rz(e,"ltr"===r?[0,o]:[-1*o,0]);return Rz([0,o],[0,a])(l)}function Rz(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function Fz(e,t){return e>0&&e<t}var Iz=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=r.left!==s.left,a=r.top!==s.top;(o||a)&&t(),r=s,n=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(n)};function Mz(e,t){const r=Qj(e),n=$.useRef(0);return $.useEffect(()=>()=>window.clearTimeout(n.current),[]),$.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function Nz(e,t){const r=Qj(t);Xj(()=>{let t=0;if(e){const n=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(r)});return n.observe(e),()=>{window.cancelAnimationFrame(t),n.unobserve(e)}}},[e,r])}e("H",uz),e("V",dz),e("I",Tz);const Lz=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,Uz=kf,jz=(e("bP",(e,t)=>r=>{var n;if(null==(null==t?void 0:t.variants))return Uz(e,null==r?void 0:r.class,null==r?void 0:r.className);const{variants:i,defaultVariants:s}=t,o=Object.keys(i).map(e=>{const t=null==r?void 0:r[e],n=null==s?void 0:s[e];if(null===t)return null;const o=Lz(t)||Lz(n);return i[e][o]}),a=r&&Object.entries(r).reduce((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e},{}),l=null==t||null===(n=t.compoundVariants)||void 0===n?void 0:n.reduce((e,t)=>{let{class:r,className:n,...i}=t;return Object.entries(i).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...s,...a}[t]):{...s,...a}[t]===r})?[...e,r,n]:e},[]);return Uz(e,o,l,null==r?void 0:r.class,null==r?void 0:r.className)}),e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),zz=(...e)=>e.filter((e,t,r)=>Boolean(e)&&r.indexOf(e)===t).join(" ");
/**
			 * @license lucide-react v0.436.0 - ISC
			 *
			 * This source code is licensed under the ISC license.
			 * See the LICENSE file in the root directory of this source tree.
			 */
var Vz={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
			 * @license lucide-react v0.436.0 - ISC
			 *
			 * This source code is licensed under the ISC license.
			 * See the LICENSE file in the root directory of this source tree.
			 */const Gz=$.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:s,iconNode:o,...a},l)=>$.createElement("svg",{ref:l,...Vz,width:t,height:t,stroke:e,strokeWidth:n?24*Number(r)/Number(t):r,className:zz("lucide",i),...a},[...o.map(([e,t])=>$.createElement(e,t)),...Array.isArray(s)?s:[s]])),Hz=(e,t)=>{const r=$.forwardRef(({className:r,...n},i)=>$.createElement(Gz,{ref:i,iconNode:t,className:zz(`lucide-${jz(e)}`,r),...n}));return r.displayName=`${e}`,r};
/**
			 * @license lucide-react v0.436.0 - ISC
			 *
			 * This source code is licensed under the ISC license.
			 * See the LICENSE file in the root directory of this source tree.
			 */e("aS",Hz("ALargeSmall",[["path",{d:"M21 14h-5",key:"1vh23k"}],["path",{d:"M16 16v-3.5a2.5 2.5 0 0 1 5 0V16",key:"1wh10o"}],["path",{d:"M4.5 13h6",key:"dfilno"}],["path",{d:"m3 16 4.5-9 4.5 9",key:"2dxa0e"}]])),e("Q",Hz("AlignCenter",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"17",x2:"7",y1:"12",y2:"12",key:"rsh8ii"}],["line",{x1:"19",x2:"5",y1:"18",y2:"18",key:"1t0tuv"}]])),e("W",Hz("AlignJustify",[["line",{x1:"3",x2:"21",y1:"6",y2:"6",key:"4m8b97"}],["line",{x1:"3",x2:"21",y1:"12",y2:"12",key:"10d38w"}],["line",{x1:"3",x2:"21",y1:"18",y2:"18",key:"kwyyxn"}]])),e("X",Hz("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]])),e("Y",Hz("AlignRight",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}],["line",{x1:"21",x2:"7",y1:"18",y2:"18",key:"1g9eri"}]])),e("aW",Hz("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]])),e("cR",Hz("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])),e("aV",Hz("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]])),e("dC",Hz("AudioLines",[["path",{d:"M2 10v3",key:"1fnikh"}],["path",{d:"M6 6v11",key:"11sgs0"}],["path",{d:"M10 3v18",key:"yhl04a"}],["path",{d:"M14 8v7",key:"3a1oy3"}],["path",{d:"M18 5v13",key:"123xd1"}],["path",{d:"M22 10v3",key:"154ddg"}]])),e("a8",Hz("Baseline",[["path",{d:"M4 20h16",key:"14thso"}],["path",{d:"m6 16 6-12 6 12",key:"1b4byz"}],["path",{d:"M8 12h8",key:"1wcyev"}]])),e("a0",Hz("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]])),e("aT",Hz("BookOpenText",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}],["path",{d:"M6 8h2",key:"30oboj"}],["path",{d:"M6 12h2",key:"32wvfc"}],["path",{d:"M16 8h2",key:"msurwy"}],["path",{d:"M16 12h2",key:"7q9ll5"}]])),e("aZ",Hz("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]])),e("a1",Hz("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])),e("Z",Hz("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])),e("a2",Hz("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])),e("a4",Hz("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]])),e("dL",Hz("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]])),e("a6",Hz("CodeXml",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]])),e("aa",Hz("Combine",[["rect",{width:"8",height:"8",x:"2",y:"2",rx:"2",key:"z1hh3n"}],["path",{d:"M14 2c1.1 0 2 .9 2 2v4c0 1.1-.9 2-2 2",key:"83orz6"}],["path",{d:"M20 2c1.1 0 2 .9 2 2v4c0 1.1-.9 2-2 2",key:"k86dmt"}],["path",{d:"M10 18H5c-1.7 0-3-1.3-3-3v-1",key:"6vokjl"}],["polyline",{points:"7 21 10 18 7 15",key:"1k02g0"}],["rect",{width:"8",height:"8",x:"14",y:"14",rx:"2",key:"1fa9i4"}]])),e("aU",Hz("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])),e("a$",Hz("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])),e("aw",Hz("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])),e("ai",Hz("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])),e("aO",Hz("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])),e("aN",Hz("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])),e("dB",Hz("FileAudio",[["path",{d:"M17.5 22h.5a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"rslqgf"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M2 19a2 2 0 1 1 4 0v1a2 2 0 1 1-4 0v-4a6 6 0 0 1 12 0v4a2 2 0 1 1-4 0v-1a2 2 0 1 1 4 0",key:"9f7x3i"}]])),e("a7",Hz("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]])),e("a3",Hz("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])),e("dH",Hz("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]])),e("b8",Hz("FlipHorizontal2",[["path",{d:"m3 7 5 5-5 5V7",key:"couhi7"}],["path",{d:"m21 7-5 5 5 5V7",key:"6ouia7"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 14v2",key:"8jcxud"}],["path",{d:"M12 8v2",key:"1woqiv"}],["path",{d:"M12 2v2",key:"tus03m"}]])),e("aY",Hz("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]])),e("af",Hz("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]])),e("aj",Hz("Heading1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]])),e("ak",Hz("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]])),e("al",Hz("Heading3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]])),e("am",Hz("Heading4",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17 10v4h4",key:"13sv97"}],["path",{d:"M21 10v8",key:"1kdml4"}]])),e("an",Hz("Heading5",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17 13v-3h4",key:"1nvgqp"}],["path",{d:"M17 17.7c.4.2.8.3 1.3.3 1.5 0 2.7-1.1 2.7-2.5S19.8 13 18.3 13H17",key:"2nebdn"}]])),e("ao",Hz("Heading6",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["circle",{cx:"19",cy:"16",r:"2",key:"15mx69"}],["path",{d:"M20 10c-2 2-3 3.5-3 6",key:"f35dl0"}]])),e("ap",Hz("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])),e("b3",Hz("Images",[["path",{d:"M18 22H4a2 2 0 0 1-2-2V6",key:"pblm9e"}],["path",{d:"m22 13-1.296-1.296a2.41 2.41 0 0 0-3.408 0L11 18",key:"nf6bnh"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["rect",{width:"16",height:"16",x:"6",y:"2",rx:"2",key:"12espp"}]])),e("ay",Hz("IndentDecrease",[["polyline",{points:"7 8 3 12 7 16",key:"2j60jr"}],["line",{x1:"21",x2:"11",y1:"12",y2:"12",key:"1fxxak"}],["line",{x1:"21",x2:"11",y1:"6",y2:"6",key:"asgu94"}],["line",{x1:"21",x2:"11",y1:"18",y2:"18",key:"13dsj7"}]])),e("aq",Hz("IndentIncrease",[["polyline",{points:"3 8 7 12 3 16",key:"f3rxhf"}],["line",{x1:"21",x2:"11",y1:"12",y2:"12",key:"1fxxak"}],["line",{x1:"21",x2:"11",y1:"6",y2:"6",key:"asgu94"}],["line",{x1:"21",x2:"11",y1:"18",y2:"18",key:"13dsj7"}]])),e("ar",Hz("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]])),e("as",Hz("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]])),e("b1",Hz("LibraryBig",[["rect",{width:"8",height:"18",x:"3",y:"3",rx:"1",key:"oynpb5"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M20.4 18.9c.2.5-.1 1.1-.6 1.3l-1.9.7c-.5.2-1.1-.1-1.3-.6L11.1 5.1c-.2-.5.1-1.1.6-1.3l1.9-.7c.5-.2 1.1.1 1.3.6Z",key:"1qboyk"}]])),e("b5",Hz("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]])),e("aM",Hz("Link2Off",[["path",{d:"M9 17H7A5 5 0 0 1 7 7",key:"10o201"}],["path",{d:"M15 7h2a5 5 0 0 1 4 8",key:"1d3206"}],["line",{x1:"8",x2:"12",y1:"12",y2:"12",key:"rvw6j4"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]])),e("au",Hz("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]])),e("ax",Hz("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]])),e("aK",Hz("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]])),e("cw",Hz("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])),e("aQ",Hz("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]])),e("aP",Hz("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])),e("ad",Hz("MessageSquarePlus",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M9 10h6",key:"9gxzsh"}]])),e("ac",Hz("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])),e("a_",Hz("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]])),e("av",Hz("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])),e("b4",Hz("MonitorPlay",[["path",{d:"M10 7.75a.75.75 0 0 1 1.142-.638l3.664 2.249a.75.75 0 0 1 0 1.278l-3.664 2.25a.75.75 0 0 1-1.142-.64z",key:"1pctta"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",key:"x3v2xh"}]])),e("b9",Hz("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]])),e("_",Hz("PaintBucket",[["path",{d:"m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z",key:"irua1i"}],["path",{d:"m5 2 5 5",key:"1lls2c"}],["path",{d:"M2 13h15",key:"1hkzvu"}],["path",{d:"M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z",key:"xk76lq"}]])),e("cx",Hz("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]])),e("ag",Hz("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])),e("az",Hz("Pilcrow",[["path",{d:"M13 4v16",key:"8vvj80"}],["path",{d:"M17 4v16",key:"7dpous"}],["path",{d:"M19 4H9.5a4.5 4.5 0 0 0 0 9H13",key:"sh4n9v"}]])),e("cy",Hz("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])),e("O",Hz("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])),e("$",Hz("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]])),e("aB",Hz("RectangleHorizontal",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]])),e("a9",Hz("RectangleVertical",[["rect",{width:"12",height:"20",x:"6",y:"2",rx:"2",key:"1oxtiu"}]])),e("aA",Hz("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]])),e("aC",Hz("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])),e("aD",Hz("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])),e("ah",Hz("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]])),e("b7",Hz("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])),e("cv",Hz("Split",[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]])),e("b0",Hz("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])),e("aX",Hz("SquarePlus",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])),e("aE",Hz("Strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]])),e("aF",Hz("Subscript",[["path",{d:"m4 5 8 8",key:"1eunvl"}],["path",{d:"m12 5-8 8",key:"1ah0jp"}],["path",{d:"M20 19h-4c0-1.5.44-2 1.5-2.5S20 15.33 20 14c0-.47-.17-.93-.48-1.29a2.11 2.11 0 0 0-2.62-.44c-.42.24-.74.62-.9 1.07",key:"e8ta8j"}]])),e("ba",Hz("SunMedium",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 3v1",key:"1asbbs"}],["path",{d:"M12 20v1",key:"1wcdkc"}],["path",{d:"M3 12h1",key:"lp3yf2"}],["path",{d:"M20 12h1",key:"1vloll"}],["path",{d:"m18.364 5.636-.707.707",key:"1hakh0"}],["path",{d:"m6.343 17.657-.707.707",key:"18m9nf"}],["path",{d:"m5.636 5.636.707.707",key:"1xv1c5"}],["path",{d:"m17.657 17.657.707.707",key:"vl76zb"}]])),e("cS",Hz("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]])),e("aG",Hz("Superscript",[["path",{d:"m4 19 8-8",key:"hr47gm"}],["path",{d:"m12 19-8-8",key:"1dhhmo"}],["path",{d:"M20 12h-4c0-1.5.442-2 1.5-2.5S20 8.334 20 7.002c0-.472-.17-.93-.484-1.29a2.105 2.105 0 0 0-2.617-.436c-.42.239-.738.614-.899 1.06",key:"1dfcux"}]])),e("aH",Hz("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]])),e("aI",Hz("Text",[["path",{d:"M17 6.1H3",key:"wptmhv"}],["path",{d:"M21 12.1H3",key:"1j38uz"}],["path",{d:"M15.1 18H3",key:"1nb16a"}]])),e("ae",Hz("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])),e("aJ",Hz("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]])),e("aR",Hz("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]])),e("aL",Hz("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]])),e("ab",Hz("Ungroup",[["rect",{width:"8",height:"6",x:"5",y:"4",rx:"1",key:"nzclkv"}],["rect",{width:"8",height:"6",x:"11",y:"14",rx:"1",key:"4tytwb"}]])),e("cu",Hz("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])),e("dA",Hz("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]])),e("b2",Hz("Wallpaper",[["circle",{cx:"8",cy:"9",r:"2",key:"gjzl9d"}],["path",{d:"m9 17 6.1-6.1a2 2 0 0 1 2.81.01L22 15V5a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2",key:"69xh40"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["path",{d:"M12 17v4",key:"1riwvh"}]])),e("b6",Hz("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]])),e("at",Hz("WrapText",[["line",{x1:"3",x2:"21",y1:"6",y2:"6",key:"4m8b97"}],["path",{d:"M3 12h15a3 3 0 1 1 0 6h-4",key:"1cl7v7"}],["polyline",{points:"16 16 14 18 16 20",key:"1jznyi"}],["line",{x1:"3",x2:"10",y1:"18",y2:"18",key:"1h33wv"}]])),e("a5",Hz("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]));var $z=q[" useInsertionEffect ".trim().toString()]||Xj;function Wz({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[i,s,o]=function({defaultProp:e,onChange:t}){const[r,n]=$.useState(e),i=$.useRef(r),s=$.useRef(t);return $z(()=>{s.current=t},[t]),$.useEffect(()=>{i.current!==r&&(s.current?.(r),i.current=r)},[r,i]),[r,n,s]}({defaultProp:t,onChange:r}),a=void 0!==e,l=a?e:i;{const t=$.useRef(void 0!==e);$.useEffect(()=>{const e=t.current;if(e!==a){const t=e?"controlled":"uncontrolled",r=a?"controlled":"uncontrolled";console.warn(`${n} is changing from ${t} to ${r}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}t.current=a},[a,n])}const u=$.useCallback(t=>{if(a){const r=function(e){return"function"==typeof e}(t)?t(e):t;r!==e&&o.current?.(r)}else s(t)},[a,e,s,o]);return[l,u]}function qz(e){const t=e+"CollectionProvider",[r,n]=Zj(t),[i,s]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=e=>{const{scope:t,children:r}=e,n=W.useRef(null),s=W.useRef(new Map).current;return te.jsx(i,{scope:t,itemMap:s,collectionRef:n,children:r})};o.displayName=t;const a=e+"CollectionSlot",l=zj(a),u=W.forwardRef((e,t)=>{const{scope:r,children:n}=e,i=jj(t,s(a,r).collectionRef);return te.jsx(l,{ref:i,children:n})});u.displayName=a;const c=e+"CollectionItemSlot",d="data-radix-collection-item",h=zj(c),f=W.forwardRef((e,t)=>{const{scope:r,children:n,...i}=e,o=W.useRef(null),a=jj(t,o),l=s(c,r);return W.useEffect(()=>(l.itemMap.set(o,{ref:o,...i}),()=>{l.itemMap.delete(o)})),te.jsx(h,{[d]:"",ref:a,children:n})});return f.displayName=c,[{Provider:o,Slot:u,ItemSlot:f},function(t){const r=s(e+"CollectionConsumer",t),n=W.useCallback(()=>{const e=r.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll(`[${d}]`)),n=Array.from(r.itemMap.values()).sort((e,r)=>t.indexOf(e.ref.current)-t.indexOf(r.ref.current));return n},[r.collectionRef,r.itemMap]);return n},n]}var Xz,Yz="dismissableLayer.update",Kz="dismissableLayer.pointerDownOutside",Zz="dismissableLayer.focusOutside",Jz=$.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Qz=$.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=e,u=$.useContext(Jz),[c,d]=$.useState(null),h=c?.ownerDocument??globalThis?.document,[,f]=$.useState({}),p=jj(t,e=>d(e)),m=Array.from(u.layers),[g]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=m.indexOf(g),v=c?m.indexOf(c):-1,_=u.layersWithOutsidePointerEventsDisabled.size>0,b=v>=y,w=function(e,t=globalThis?.document){const r=Qj(e),n=$.useRef(!1),i=$.useRef(()=>{});return $.useEffect(()=>{const e=e=>{if(e.target&&!n.current){let n=function(){rV(Kz,r,s,{discrete:!0})};const s={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",i.current),i.current=n,t.addEventListener("click",i.current,{once:!0})):n()}else t.removeEventListener("click",i.current);n.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",e),t.removeEventListener("click",i.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}(e=>{const t=e.target,r=[...u.branches].some(e=>e.contains(t));b&&!r&&(i?.(e),o?.(e),e.defaultPrevented||a?.())},h),x=function(e,t=globalThis?.document){const r=Qj(e),n=$.useRef(!1);return $.useEffect(()=>{const e=e=>{e.target&&!n.current&&rV(Zz,r,{originalEvent:e},{discrete:!1})};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}(e=>{const t=e.target;[...u.branches].some(e=>e.contains(t))||(s?.(e),o?.(e),e.defaultPrevented||a?.())},h);return function(e,t=globalThis?.document){const r=Qj(e);$.useEffect(()=>{const e=e=>{"Escape"===e.key&&r(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[r,t])}(e=>{v===u.layers.size-1&&(n?.(e),!e.defaultPrevented&&a&&(e.preventDefault(),a()))},h),$.useEffect(()=>{if(c)return r&&(0===u.layersWithOutsidePointerEventsDisabled.size&&(Xz=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(c)),u.layers.add(c),tV(),()=>{r&&1===u.layersWithOutsidePointerEventsDisabled.size&&(h.body.style.pointerEvents=Xz)}},[c,h,r,u]),$.useEffect(()=>()=>{c&&(u.layers.delete(c),u.layersWithOutsidePointerEventsDisabled.delete(c),tV())},[c,u]),$.useEffect(()=>{const e=()=>f({});return document.addEventListener(Yz,e),()=>document.removeEventListener(Yz,e)},[]),te.jsx(Wj.div,{...l,ref:p,style:{pointerEvents:_?b?"auto":"none":void 0,...e.style},onFocusCapture:nz(e.onFocusCapture,x.onFocusCapture),onBlurCapture:nz(e.onBlurCapture,x.onBlurCapture),onPointerDownCapture:nz(e.onPointerDownCapture,w.onPointerDownCapture)})});Qz.displayName="DismissableLayer";var eV=$.forwardRef((e,t)=>{const r=$.useContext(Jz),n=$.useRef(null),i=jj(t,n);return $.useEffect(()=>{const e=n.current;if(e)return r.branches.add(e),()=>{r.branches.delete(e)}},[r.branches]),te.jsx(Wj.div,{...e,ref:i})});function tV(){const e=new CustomEvent(Yz);document.dispatchEvent(e)}function rV(e,t,r,{discrete:n}){const i=r.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),n?qj(i,s):i.dispatchEvent(s)}eV.displayName="DismissableLayerBranch";var nV=Qz,iV=eV,sV=0;function oV(){$.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??aV()),document.body.insertAdjacentElement("beforeend",e[1]??aV()),sV++,()=>{1===sV&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),sV--}},[])}function aV(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var lV="focusScope.autoFocusOnMount",uV="focusScope.autoFocusOnUnmount",cV={bubbles:!1,cancelable:!0},dV=$.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=e,[a,l]=$.useState(null),u=Qj(i),c=Qj(s),d=$.useRef(null),h=jj(t,e=>l(e)),f=$.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;$.useEffect(()=>{if(n){let e=function(e){if(f.paused||!a)return;const t=e.target;a.contains(t)?d.current=t:mV(d.current,{select:!0})},t=function(e){if(f.paused||!a)return;const t=e.relatedTarget;null!==t&&(a.contains(t)||mV(d.current,{select:!0}))},r=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&mV(a)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const n=new MutationObserver(r);return a&&n.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),n.disconnect()}}},[n,a,f.paused]),$.useEffect(()=>{if(a){gV.add(f);const e=document.activeElement;if(!a.contains(e)){const t=new CustomEvent(lV,cV);a.addEventListener(lV,u),a.dispatchEvent(t),t.defaultPrevented||(function(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(mV(n,{select:t}),document.activeElement!==r)return}(hV(a).filter(e=>"A"!==e.tagName),{select:!0}),document.activeElement===e&&mV(a))}return()=>{a.removeEventListener(lV,u),setTimeout(()=>{const t=new CustomEvent(uV,cV);a.addEventListener(uV,c),a.dispatchEvent(t),t.defaultPrevented||mV(e??document.body,{select:!0}),a.removeEventListener(uV,c),gV.remove(f)},0)}}},[a,u,c,f]);const p=$.useCallback(e=>{if(!r&&!n)return;if(f.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,i=document.activeElement;if(t&&i){const t=e.currentTarget,[n,s]=function(e){const t=hV(e),r=fV(t,e),n=fV(t.reverse(),e);return[r,n]}(t);n&&s?e.shiftKey||i!==s?e.shiftKey&&i===n&&(e.preventDefault(),r&&mV(s,{select:!0})):(e.preventDefault(),r&&mV(n,{select:!0})):i===t&&e.preventDefault()}},[r,n,f.paused]);return te.jsx(Wj.div,{tabIndex:-1,...o,ref:h,onKeyDown:p})});function hV(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function fV(e,t){for(const r of e)if(!pV(r,{upTo:t}))return r}function pV(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function mV(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}dV.displayName="FocusScope";var gV=function(){let e=[];return{add(t){const r=e[0];t!==r&&r?.pause(),e=yV(e,t),e.unshift(t)},remove(t){e=yV(e,t),e[0]?.resume()}}}();function yV(e,t){const r=[...e],n=r.indexOf(t);return-1!==n&&r.splice(n,1),r}var vV=q[" useId ".trim().toString()]||(()=>{}),_V=0;function bV(e){const[t,r]=$.useState(vV());return Xj(()=>{e||r(e=>e??String(_V++))},[e]),e||(t?`radix-${t}`:"")}const wV=["top","right","bottom","left"],xV=Math.min,EV=Math.max,SV=Math.round,CV=Math.floor,AV=e=>({x:e,y:e}),TV={left:"right",right:"left",bottom:"top",top:"bottom"},DV={start:"end",end:"start"};function kV(e,t,r){return EV(e,xV(t,r))}function PV(e,t){return"function"==typeof e?e(t):e}function BV(e){return e.split("-")[0]}function OV(e){return e.split("-")[1]}function RV(e){return"x"===e?"y":"x"}function FV(e){return"y"===e?"height":"width"}const IV=new Set(["top","bottom"]);function MV(e){return IV.has(BV(e))?"y":"x"}function NV(e){return RV(MV(e))}function LV(e){return e.replace(/start|end/g,e=>DV[e])}const UV=["left","right"],jV=["right","left"],zV=["top","bottom"],VV=["bottom","top"];function GV(e,t,r,n){const i=OV(e);let s=function(e,t,r){switch(e){case"top":case"bottom":return r?t?jV:UV:t?UV:jV;case"left":case"right":return t?zV:VV;default:return[]}}(BV(e),"start"===r,n);return i&&(s=s.map(e=>e+"-"+i),t&&(s=s.concat(s.map(LV)))),s}function HV(e){return e.replace(/left|right|bottom|top/g,e=>TV[e])}function $V(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function WV(e){const{x:t,y:r,width:n,height:i}=e;return{width:n,height:i,top:r,left:t,right:t+n,bottom:r+i,x:t,y:r}}function qV(e,t,r){let{reference:n,floating:i}=e;const s=MV(t),o=NV(t),a=FV(o),l=BV(t),u="y"===s,c=n.x+n.width/2-i.width/2,d=n.y+n.height/2-i.height/2,h=n[a]/2-i[a]/2;let f;switch(l){case"top":f={x:c,y:n.y-i.height};break;case"bottom":f={x:c,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:d};break;case"left":f={x:n.x-i.width,y:d};break;default:f={x:n.x,y:n.y}}switch(OV(t)){case"start":f[o]-=h*(r&&u?-1:1);break;case"end":f[o]+=h*(r&&u?-1:1)}return f}async function XV(e,t){var r;void 0===t&&(t={});const{x:n,y:i,platform:s,rects:o,elements:a,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=PV(t,e),p=$V(f),m=a[h?"floating"===d?"reference":"floating":d],g=WV(await s.getClippingRect({element:null==(r=await(null==s.isElement?void 0:s.isElement(m)))||r?m:m.contextElement||await(null==s.getDocumentElement?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),y="floating"===d?{x:n,y:i,width:o.floating.width,height:o.floating.height}:o.reference,v=await(null==s.getOffsetParent?void 0:s.getOffsetParent(a.floating)),_=await(null==s.isElement?void 0:s.isElement(v))&&await(null==s.getScale?void 0:s.getScale(v))||{x:1,y:1},b=WV(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:v,strategy:l}):y);return{top:(g.top-b.top+p.top)/_.y,bottom:(b.bottom-g.bottom+p.bottom)/_.y,left:(g.left-b.left+p.left)/_.x,right:(b.right-g.right+p.right)/_.x}}function YV(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function KV(e){return wV.some(t=>e[t]>=0)}const ZV=new Set(["left","top"]);function JV(){return"undefined"!=typeof window}function QV(e){return rG(e)?(e.nodeName||"").toLowerCase():"#document"}function eG(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function tG(e){var t;return null==(t=(rG(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function rG(e){return!!JV()&&(e instanceof Node||e instanceof eG(e).Node)}function nG(e){return!!JV()&&(e instanceof Element||e instanceof eG(e).Element)}function iG(e){return!!JV()&&(e instanceof HTMLElement||e instanceof eG(e).HTMLElement)}function sG(e){return!(!JV()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof eG(e).ShadowRoot)}const oG=new Set(["inline","contents"]);function aG(e){const{overflow:t,overflowX:r,overflowY:n,display:i}=_G(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!oG.has(i)}const lG=new Set(["table","td","th"]);function uG(e){return lG.has(QV(e))}const cG=[":popover-open",":modal"];function dG(e){return cG.some(t=>{try{return e.matches(t)}catch(fY){return!1}})}const hG=["transform","translate","scale","rotate","perspective"],fG=["transform","translate","scale","rotate","perspective","filter"],pG=["paint","layout","strict","content"];function mG(e){const t=gG(),r=nG(e)?_G(e):e;return hG.some(e=>!!r[e]&&"none"!==r[e])||!!r.containerType&&"normal"!==r.containerType||!t&&!!r.backdropFilter&&"none"!==r.backdropFilter||!t&&!!r.filter&&"none"!==r.filter||fG.some(e=>(r.willChange||"").includes(e))||pG.some(e=>(r.contain||"").includes(e))}function gG(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const yG=new Set(["html","body","#document"]);function vG(e){return yG.has(QV(e))}function _G(e){return eG(e).getComputedStyle(e)}function bG(e){return nG(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function wG(e){if("html"===QV(e))return e;const t=e.assignedSlot||e.parentNode||sG(e)&&e.host||tG(e);return sG(t)?t.host:t}function xG(e){const t=wG(e);return vG(t)?e.ownerDocument?e.ownerDocument.body:e.body:iG(t)&&aG(t)?t:xG(t)}function EG(e,t,r){var n;void 0===t&&(t=[]),void 0===r&&(r=!0);const i=xG(e),s=i===(null==(n=e.ownerDocument)?void 0:n.body),o=eG(i);if(s){const e=SG(o);return t.concat(o,o.visualViewport||[],aG(i)?i:[],e&&r?EG(e):[])}return t.concat(i,EG(i,[],r))}function SG(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function CG(e){const t=_G(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const i=iG(e),s=i?e.offsetWidth:r,o=i?e.offsetHeight:n,a=SV(r)!==s||SV(n)!==o;return a&&(r=s,n=o),{width:r,height:n,$:a}}function AG(e){return nG(e)?e:e.contextElement}function TG(e){const t=AG(e);if(!iG(t))return AV(1);const r=t.getBoundingClientRect(),{width:n,height:i,$:s}=CG(t);let o=(s?SV(r.width):r.width)/n,a=(s?SV(r.height):r.height)/i;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}const DG=AV(0);function kG(e){const t=eG(e);return gG()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:DG}function PG(e,t,r,n){void 0===t&&(t=!1),void 0===r&&(r=!1);const i=e.getBoundingClientRect(),s=AG(e);let o=AV(1);t&&(n?nG(n)&&(o=TG(n)):o=TG(e));const a=function(e,t,r){return void 0===t&&(t=!1),!(!r||t&&r!==eG(e))&&t}(s,r,n)?kG(s):AV(0);let l=(i.left+a.x)/o.x,u=(i.top+a.y)/o.y,c=i.width/o.x,d=i.height/o.y;if(s){const e=eG(s),t=n&&nG(n)?eG(n):n;let r=e,i=SG(r);for(;i&&n&&t!==r;){const e=TG(i),t=i.getBoundingClientRect(),n=_G(i),s=t.left+(i.clientLeft+parseFloat(n.paddingLeft))*e.x,o=t.top+(i.clientTop+parseFloat(n.paddingTop))*e.y;l*=e.x,u*=e.y,c*=e.x,d*=e.y,l+=s,u+=o,r=eG(i),i=SG(r)}}return WV({width:c,height:d,x:l,y:u})}function BG(e,t){const r=bG(e).scrollLeft;return t?t.left+r:PG(tG(e)).left+r}function OG(e,t){const r=e.getBoundingClientRect();return{x:r.left+t.scrollLeft-BG(e,r),y:r.top+t.scrollTop}}const RG=new Set(["absolute","fixed"]);function FG(e,t,r){let n;if("viewport"===t)n=function(e,t){const r=eG(e),n=tG(e),i=r.visualViewport;let s=n.clientWidth,o=n.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const e=gG();(!e||e&&"fixed"===t)&&(a=i.offsetLeft,l=i.offsetTop)}const u=BG(n);if(u<=0){const e=n.ownerDocument,t=e.body,r=getComputedStyle(t),i="CSS1Compat"===e.compatMode&&parseFloat(r.marginLeft)+parseFloat(r.marginRight)||0,o=Math.abs(n.clientWidth-t.clientWidth-i);o<=25&&(s-=o)}else u<=25&&(s+=u);return{width:s,height:o,x:a,y:l}}(e,r);else if("document"===t)n=function(e){const t=tG(e),r=bG(e),n=e.ownerDocument.body,i=EV(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),s=EV(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+BG(e);const a=-r.scrollTop;return"rtl"===_G(n).direction&&(o+=EV(t.clientWidth,n.clientWidth)-i),{width:i,height:s,x:o,y:a}}(tG(e));else if(nG(t))n=function(e,t){const r=PG(e,!0,"fixed"===t),n=r.top+e.clientTop,i=r.left+e.clientLeft,s=iG(e)?TG(e):AV(1);return{width:e.clientWidth*s.x,height:e.clientHeight*s.y,x:i*s.x,y:n*s.y}}(t,r);else{const r=kG(e);n={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return WV(n)}function IG(e,t){const r=wG(e);return!(r===t||!nG(r)||vG(r))&&("fixed"===_G(r).position||IG(r,t))}function MG(e,t,r){const n=iG(t),i=tG(t),s="fixed"===r,o=PG(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=AV(0);function u(){l.x=BG(i)}if(n||!n&&!s)if(("body"!==QV(t)||aG(i))&&(a=bG(t)),n){const e=PG(t,!0,s,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else i&&u();s&&!n&&i&&u();const c=!i||n||s?AV(0):OG(i,a);return{x:o.left+a.scrollLeft-l.x-c.x,y:o.top+a.scrollTop-l.y-c.y,width:o.width,height:o.height}}function NG(e){return"static"===_G(e).position}function LG(e,t){if(!iG(e)||"fixed"===_G(e).position)return null;if(t)return t(e);let r=e.offsetParent;return tG(e)===r&&(r=r.ownerDocument.body),r}function UG(e,t){const r=eG(e);if(dG(e))return r;if(!iG(e)){let t=wG(e);for(;t&&!vG(t);){if(nG(t)&&!NG(t))return t;t=wG(t)}return r}let n=LG(e,t);for(;n&&uG(n)&&NG(n);)n=LG(n,t);return n&&vG(n)&&NG(n)&&!mG(n)?r:n||function(e){let t=wG(e);for(;iG(t)&&!vG(t);){if(mG(t))return t;if(dG(t))return null;t=wG(t)}return null}(e)||r}const jG={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:r,offsetParent:n,strategy:i}=e;const s="fixed"===i,o=tG(n),a=!!t&&dG(t.floating);if(n===o||a&&s)return r;let l={scrollLeft:0,scrollTop:0},u=AV(1);const c=AV(0),d=iG(n);if((d||!d&&!s)&&(("body"!==QV(n)||aG(o))&&(l=bG(n)),iG(n))){const e=PG(n);u=TG(n),c.x=e.x+n.clientLeft,c.y=e.y+n.clientTop}const h=!o||d||s?AV(0):OG(o,l);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-l.scrollLeft*u.x+c.x+h.x,y:r.y*u.y-l.scrollTop*u.y+c.y+h.y}},getDocumentElement:tG,getClippingRect:function(e){let{element:t,boundary:r,rootBoundary:n,strategy:i}=e;const s="clippingAncestors"===r?dG(t)?[]:function(e,t){const r=t.get(e);if(r)return r;let n=EG(e,[],!1).filter(e=>nG(e)&&"body"!==QV(e)),i=null;const s="fixed"===_G(e).position;let o=s?wG(e):e;for(;nG(o)&&!vG(o);){const t=_G(o),r=mG(o);r||"fixed"!==t.position||(i=null),(s?!r&&!i:!r&&"static"===t.position&&i&&RG.has(i.position)||aG(o)&&!r&&IG(e,o))?n=n.filter(e=>e!==o):i=t,o=wG(o)}return t.set(e,n),n}(t,this._c):[].concat(r),o=[...s,n],a=o[0],l=o.reduce((e,r)=>{const n=FG(t,r,i);return e.top=EV(n.top,e.top),e.right=xV(n.right,e.right),e.bottom=xV(n.bottom,e.bottom),e.left=EV(n.left,e.left),e},FG(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:UG,getElementRects:async function(e){const t=this.getOffsetParent||UG,r=this.getDimensions,n=await r(e.floating);return{reference:MG(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:r}=CG(e);return{width:t,height:r}},getScale:TG,isElement:nG,isRTL:function(e){return"rtl"===_G(e).direction}};function zG(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function VG(e,t,r,n){void 0===n&&(n={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o="function"==typeof ResizeObserver,layoutShift:a="function"==typeof IntersectionObserver,animationFrame:l=!1}=n,u=AG(e),c=i||s?[...u?EG(u):[],...EG(t)]:[];c.forEach(e=>{i&&e.addEventListener("scroll",r,{passive:!0}),s&&e.addEventListener("resize",r)});const d=u&&a?function(e,t){let r,n=null;const i=tG(e);function s(){var e;clearTimeout(r),null==(e=n)||e.disconnect(),n=null}return function o(a,l){void 0===a&&(a=!1),void 0===l&&(l=1),s();const u=e.getBoundingClientRect(),{left:c,top:d,width:h,height:f}=u;if(a||t(),!h||!f)return;const p={rootMargin:-CV(d)+"px "+-CV(i.clientWidth-(c+h))+"px "+-CV(i.clientHeight-(d+f))+"px "+-CV(c)+"px",threshold:EV(0,xV(1,l))||1};let m=!0;function g(t){const n=t[0].intersectionRatio;if(n!==l){if(!m)return o();n?o(!1,n):r=setTimeout(()=>{o(!1,1e-7)},1e3)}1!==n||zG(u,e.getBoundingClientRect())||o(),m=!1}try{n=new IntersectionObserver(g,{...p,root:i.ownerDocument})}catch(fY){n=new IntersectionObserver(g,p)}n.observe(e)}(!0),s}(u,r):null;let h,f=-1,p=null;o&&(p=new ResizeObserver(e=>{let[n]=e;n&&n.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var e;null==(e=p)||e.observe(t)})),r()}),u&&!l&&p.observe(u),p.observe(t));let m=l?PG(e):null;return l&&function t(){const n=PG(e);m&&!zG(m,n)&&r(),m=n,h=requestAnimationFrame(t)}(),r(),()=>{var e;c.forEach(e=>{i&&e.removeEventListener("scroll",r),s&&e.removeEventListener("resize",r)}),null==d||d(),null==(e=p)||e.disconnect(),p=null,l&&cancelAnimationFrame(h)}}const GG=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:i,y:s,placement:o,middlewareData:a}=t,l=await async function(e,t){const{placement:r,platform:n,elements:i}=e,s=await(null==n.isRTL?void 0:n.isRTL(i.floating)),o=BV(r),a=OV(r),l="y"===MV(r),u=ZV.has(o)?-1:1,c=s&&l?-1:1,d=PV(t,e);let{mainAxis:h,crossAxis:f,alignmentAxis:p}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&"number"==typeof p&&(f="end"===a?-1*p:p),l?{x:f*c,y:h*u}:{x:h*u,y:f*c}}(t,e);return o===(null==(r=a.offset)?void 0:r.placement)&&null!=(n=a.arrow)&&n.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},HG=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:e=>{let{x:t,y:r}=e;return{x:t,y:r}}},...l}=PV(e,t),u={x:r,y:n},c=await XV(t,l),d=MV(BV(i)),h=RV(d);let f=u[h],p=u[d];if(s){const e="y"===h?"bottom":"right";f=kV(f+c["y"===h?"top":"left"],f,f-c[e])}if(o){const e="y"===d?"bottom":"right";p=kV(p+c["y"===d?"top":"left"],p,p-c[e])}const m=a.fn({...t,[h]:f,[d]:p});return{...m,data:{x:m.x-r,y:m.y-n,enabled:{[h]:s,[d]:o}}}}}},$G=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:u}=t,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=PV(e,t);if(null!=(r=s.arrow)&&r.alignmentOffset)return{};const y=BV(i),v=MV(a),_=BV(a)===a,b=await(null==l.isRTL?void 0:l.isRTL(u.floating)),w=h||(_||!m?[HV(a)]:function(e){const t=HV(e);return[LV(e),t,LV(t)]}(a)),x="none"!==p;!h&&x&&w.push(...GV(a,m,p,b));const E=[a,...w],S=await XV(t,g),C=[];let A=(null==(n=s.flip)?void 0:n.overflows)||[];if(c&&C.push(S[y]),d){const e=function(e,t,r){void 0===r&&(r=!1);const n=OV(e),i=NV(e),s=FV(i);let o="x"===i?n===(r?"end":"start")?"right":"left":"start"===n?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=HV(o)),[o,HV(o)]}(i,o,b);C.push(S[e[0]],S[e[1]])}if(A=[...A,{placement:i,overflows:C}],!C.every(e=>e<=0)){var T,D;const e=((null==(T=s.flip)?void 0:T.index)||0)+1,t=E[e];if(t&&("alignment"!==d||v===MV(t)||A.every(e=>MV(e.placement)!==v||e.overflows[0]>0)))return{data:{index:e,overflows:A},reset:{placement:t}};let r=null==(D=A.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:D.placement;if(!r)switch(f){case"bestFit":{var k;const e=null==(k=A.filter(e=>{if(x){const t=MV(e.placement);return t===v||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:k[0];e&&(r=e);break}case"initialPlacement":r=a}if(i!==r)return{reset:{placement:r}}}return{}}}},WG=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:i,rects:s,platform:o,elements:a}=t,{apply:l=()=>{},...u}=PV(e,t),c=await XV(t,u),d=BV(i),h=OV(i),f="y"===MV(i),{width:p,height:m}=s.floating;let g,y;"top"===d||"bottom"===d?(g=d,y=h===(await(null==o.isRTL?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(y=d,g="end"===h?"top":"bottom");const v=m-c.top-c.bottom,_=p-c.left-c.right,b=xV(m-c[g],v),w=xV(p-c[y],_),x=!t.middlewareData.shift;let E=b,S=w;if(null!=(r=t.middlewareData.shift)&&r.enabled.x&&(S=_),null!=(n=t.middlewareData.shift)&&n.enabled.y&&(E=v),x&&!h){const e=EV(c.left,0),t=EV(c.right,0),r=EV(c.top,0),n=EV(c.bottom,0);f?S=p-2*(0!==e||0!==t?e+t:EV(c.left,c.right)):E=m-2*(0!==r||0!==n?r+n:EV(c.top,c.bottom))}await l({...t,availableWidth:S,availableHeight:E});const C=await o.getDimensions(a.floating);return p!==C.width||m!==C.height?{reset:{rects:!0}}:{}}}},qG=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...i}=PV(e,t);switch(n){case"referenceHidden":{const e=YV(await XV(t,{...i,elementContext:"reference"}),r.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:KV(e)}}}case"escaped":{const e=YV(await XV(t,{...i,altBoundary:!0}),r.floating);return{data:{escapedOffsets:e,escaped:KV(e)}}}default:return{}}}}},XG=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=t,{element:u,padding:c=0}=PV(e,t)||{};if(null==u)return{};const d=$V(c),h={x:r,y:n},f=NV(i),p=FV(f),m=await o.getDimensions(u),g="y"===f,y=g?"top":"left",v=g?"bottom":"right",_=g?"clientHeight":"clientWidth",b=s.reference[p]+s.reference[f]-h[f]-s.floating[p],w=h[f]-s.reference[f],x=await(null==o.getOffsetParent?void 0:o.getOffsetParent(u));let E=x?x[_]:0;E&&await(null==o.isElement?void 0:o.isElement(x))||(E=a.floating[_]||s.floating[p]);const S=b/2-w/2,C=E/2-m[p]/2-1,A=xV(d[y],C),T=xV(d[v],C),D=A,k=E-m[p]-T,P=E/2-m[p]/2+S,B=kV(D,P,k),O=!l.arrow&&null!=OV(i)&&P!==B&&s.reference[p]/2-(P<D?A:T)-m[p]/2<0,R=O?P<D?P-D:P-k:0;return{[f]:h[f]+R,data:{[f]:B,centerOffset:P-B-R,...O&&{alignmentOffset:R}},reset:O}}}),YG=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=PV(e,t),c={x:r,y:n},d=MV(i),h=RV(d);let f=c[h],p=c[d];const m=PV(a,t),g="number"==typeof m?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const e="y"===h?"height":"width",t=s.reference[h]-s.floating[e]+g.mainAxis,r=s.reference[h]+s.reference[e]-g.mainAxis;f<t?f=t:f>r&&(f=r)}if(u){var y,v;const e="y"===h?"width":"height",t=ZV.has(BV(i)),r=s.reference[d]-s.floating[e]+(t&&(null==(y=o.offset)?void 0:y[d])||0)+(t?0:g.crossAxis),n=s.reference[d]+s.reference[e]+(t?0:(null==(v=o.offset)?void 0:v[d])||0)-(t?g.crossAxis:0);p<r?p=r:p>n&&(p=n)}return{[h]:f,[d]:p}}}},KG=(e,t,r)=>{const n=new Map,i={platform:jG,...r},s={...i.platform,_c:n};return(async(e,t,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:o}=r,a=s.filter(Boolean),l=await(null==o.isRTL?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:d}=qV(u,n,l),h=n,f={},p=0;for(let m=0;m<a.length;m++){const{name:r,fn:s}=a[m],{x:g,y:y,data:v,reset:_}=await s({x:c,y:d,initialPlacement:n,placement:h,strategy:i,middlewareData:f,rects:u,platform:o,elements:{reference:e,floating:t}});c=null!=g?g:c,d=null!=y?y:d,f={...f,[r]:{...f[r],...v}},_&&p<=50&&(p++,"object"==typeof _&&(_.placement&&(h=_.placement),_.rects&&(u=!0===_.rects?await o.getElementRects({reference:e,floating:t,strategy:i}):_.rects),({x:c,y:d}=qV(u,h,l))),m=-1)}return{x:c,y:d,placement:h,strategy:i,middlewareData:f}})(e,t,{...i,platform:s})};var ZG="undefined"!=typeof document?$.useLayoutEffect:function(){};function JG(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let r,n,i;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;0!==n--;)if(!JG(e[n],t[n]))return!1;return!0}if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(n=r;0!==n--;)if(!{}.hasOwnProperty.call(t,i[n]))return!1;for(n=r;0!==n--;){const r=i[n];if(!("_owner"===r&&e.$$typeof||JG(e[r],t[r])))return!1}return!0}return e!=e&&t!=t}function QG(e){return"undefined"==typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function eH(e,t){const r=QG(e);return Math.round(t*r)/r}function tH(e){const t=$.useRef(e);return ZG(()=>{t.current=e}),t}function rH(e){void 0===e&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=e,[c,d]=$.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,f]=$.useState(n);JG(h,n)||f(n);const[p,m]=$.useState(null),[g,y]=$.useState(null),v=$.useCallback(e=>{e!==x.current&&(x.current=e,m(e))},[]),_=$.useCallback(e=>{e!==E.current&&(E.current=e,y(e))},[]),b=s||p,w=o||g,x=$.useRef(null),E=$.useRef(null),S=$.useRef(c),C=null!=l,A=tH(l),T=tH(i),D=tH(u),k=$.useCallback(()=>{if(!x.current||!E.current)return;const e={placement:t,strategy:r,middleware:h};T.current&&(e.platform=T.current),KG(x.current,E.current,e).then(e=>{const t={...e,isPositioned:!1!==D.current};P.current&&!JG(S.current,t)&&(S.current=t,ld.flushSync(()=>{d(t)}))})},[h,t,r,T,D]);ZG(()=>{!1===u&&S.current.isPositioned&&(S.current.isPositioned=!1,d(e=>({...e,isPositioned:!1})))},[u]);const P=$.useRef(!1);ZG(()=>(P.current=!0,()=>{P.current=!1}),[]),ZG(()=>{if(b&&(x.current=b),w&&(E.current=w),b&&w){if(A.current)return A.current(b,w,k);k()}},[b,w,k,A,C]);const B=$.useMemo(()=>({reference:x,floating:E,setReference:v,setFloating:_}),[v,_]),O=$.useMemo(()=>({reference:b,floating:w}),[b,w]),R=$.useMemo(()=>{const e={position:r,left:0,top:0};if(!O.floating)return e;const t=eH(O.floating,c.x),n=eH(O.floating,c.y);return a?{...e,transform:"translate("+t+"px, "+n+"px)",...QG(O.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:t,top:n}},[r,a,O.floating,c.x,c.y]);return $.useMemo(()=>({...c,update:k,refs:B,elements:O,floatingStyles:R}),[c,k,B,O,R])}const nH=e=>({name:"arrow",options:e,fn(t){const{element:r,padding:n}="function"==typeof e?e(t):e;return r&&(i=r,{}.hasOwnProperty.call(i,"current"))?null!=r.current?XG({element:r.current,padding:n}).fn(t):{}:r?XG({element:r,padding:n}).fn(t):{};var i}}),iH=e("dw",(e,t)=>({...GG(e),options:[e,t]})),sH=(e,t)=>({...HG(e),options:[e,t]}),oH=(e,t)=>({...YG(e),options:[e,t]}),aH=e("dx",(e,t)=>({...$G(e),options:[e,t]})),lH=(e,t)=>({...WG(e),options:[e,t]}),uH=(e,t)=>({...qG(e),options:[e,t]}),cH=(e,t)=>({...nH(e),options:[e,t]});var dH=$.forwardRef((e,t)=>{const{children:r,width:n=10,height:i=5,...s}=e;return te.jsx(Wj.svg,{...s,ref:t,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:te.jsx("polygon",{points:"0,0 30,0 15,10"})})});dH.displayName="Arrow";var hH=dH;function fH(e){const[t,r]=$.useState(void 0);return Xj(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const t=new ResizeObserver(t=>{if(!Array.isArray(t))return;if(!t.length)return;const n=t[0];let i,s;if("borderBoxSize"in n){const e=n.borderBoxSize,t=Array.isArray(e)?e[0]:e;i=t.inlineSize,s=t.blockSize}else i=e.offsetWidth,s=e.offsetHeight;r({width:i,height:s})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}var pH="Popper",[mH,gH]=Zj(pH),[yH,vH]=mH(pH),_H=e=>{const{__scopePopper:t,children:r}=e,[n,i]=$.useState(null);return te.jsx(yH,{scope:t,anchor:n,onAnchorChange:i,children:r})};_H.displayName=pH;var bH="PopperAnchor",wH=$.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...i}=e,s=vH(bH,r),o=$.useRef(null),a=jj(t,o),l=$.useRef(null);return $.useEffect(()=>{const e=l.current;l.current=n?.current||o.current,e!==l.current&&s.onAnchorChange(l.current)}),n?null:te.jsx(Wj.div,{...i,ref:a})});wH.displayName=bH;var xH="PopperContent",[EH,SH]=mH(xH),CH=$.forwardRef((e,t)=>{const{__scopePopper:r,side:n="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:c=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:f="optimized",onPlaced:p,...m}=e,g=vH(xH,r),[y,v]=$.useState(null),_=jj(t,e=>v(e)),[b,w]=$.useState(null),x=fH(b),E=x?.width??0,S=x?.height??0,C=n+("center"!==s?"-"+s:""),A="number"==typeof c?c:{top:0,right:0,bottom:0,left:0,...c},T=Array.isArray(u)?u:[u],D=T.length>0,k={padding:A,boundary:T.filter(kH),altBoundary:D},{refs:P,floatingStyles:B,placement:O,isPositioned:R,middlewareData:F}=rH({strategy:"fixed",placement:C,whileElementsMounted:(...e)=>VG(...e,{animationFrame:"always"===f}),elements:{reference:g.anchor},middleware:[iH({mainAxis:i+S,alignmentAxis:o}),l&&sH({mainAxis:!0,crossAxis:!1,limiter:"partial"===d?oH():void 0,...k}),l&&aH({...k}),lH({...k,apply:({elements:e,rects:t,availableWidth:r,availableHeight:n})=>{const{width:i,height:s}=t.reference,o=e.floating.style;o.setProperty("--radix-popper-available-width",`${r}px`),o.setProperty("--radix-popper-available-height",`${n}px`),o.setProperty("--radix-popper-anchor-width",`${i}px`),o.setProperty("--radix-popper-anchor-height",`${s}px`)}}),b&&cH({element:b,padding:a}),PH({arrowWidth:E,arrowHeight:S}),h&&uH({strategy:"referenceHidden",...k})]}),[I,M]=BH(O),N=Qj(p);Xj(()=>{R&&N?.()},[R,N]);const L=F.arrow?.x,U=F.arrow?.y,j=0!==F.arrow?.centerOffset,[z,V]=$.useState();return Xj(()=>{y&&V(window.getComputedStyle(y).zIndex)},[y]),te.jsx("div",{ref:P.setFloating,"data-radix-popper-content-wrapper":"",style:{...B,transform:R?B.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:z,"--radix-popper-transform-origin":[F.transformOrigin?.x,F.transformOrigin?.y].join(" "),...F.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:te.jsx(EH,{scope:r,placedSide:I,onArrowChange:w,arrowX:L,arrowY:U,shouldHideArrow:j,children:te.jsx(Wj.div,{"data-side":I,"data-align":M,...m,ref:_,style:{...m.style,animation:R?void 0:"none"}})})})});CH.displayName=xH;var AH="PopperArrow",TH={top:"bottom",right:"left",bottom:"top",left:"right"},DH=$.forwardRef(function(e,t){const{__scopePopper:r,...n}=e,i=SH(AH,r),s=TH[i.placedSide];return te.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:te.jsx(hH,{...n,ref:t,style:{...n.style,display:"block"}})})});function kH(e){return null!==e}DH.displayName=AH;var PH=e=>({name:"transformOrigin",options:e,fn(t){const{placement:r,rects:n,middlewareData:i}=t,s=0!==i.arrow?.centerOffset,o=s?0:e.arrowWidth,a=s?0:e.arrowHeight,[l,u]=BH(r),c={start:"0%",center:"50%",end:"100%"}[u],d=(i.arrow?.x??0)+o/2,h=(i.arrow?.y??0)+a/2;let f="",p="";return"bottom"===l?(f=s?c:`${d}px`,p=-a+"px"):"top"===l?(f=s?c:`${d}px`,p=`${n.floating.height+a}px`):"right"===l?(f=-a+"px",p=s?c:`${h}px`):"left"===l&&(f=`${n.floating.width+a}px`,p=s?c:`${h}px`),{data:{x:f,y:p}}}});function BH(e){const[t,r="center"]=e.split("-");return[t,r]}var OH=_H,RH=wH,FH=CH,IH=DH,MH=$.forwardRef((e,t)=>{const{container:r,...n}=e,[i,s]=$.useState(!1);Xj(()=>s(!0),[]);const o=r||i&&globalThis?.document?.body;return o?ud.createPortal(te.jsx(Wj.div,{...n,ref:t}),o):null});MH.displayName="Portal";var NH="rovingFocusGroup.onEntryFocus",LH={bubbles:!1,cancelable:!0},UH="RovingFocusGroup",[jH,zH,VH]=qz(UH),[GH,HH]=Zj(UH,[VH]),[$H,WH]=GH(UH),qH=$.forwardRef((e,t)=>te.jsx(jH.Provider,{scope:e.__scopeRovingFocusGroup,children:te.jsx(jH.Slot,{scope:e.__scopeRovingFocusGroup,children:te.jsx(XH,{...e,ref:t})})}));qH.displayName=UH;var XH=$.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:c=!1,...d}=e,h=$.useRef(null),f=jj(t,h),p=tz(s),[m,g]=Wz({prop:o,defaultProp:a??null,onChange:l,caller:UH}),[y,v]=$.useState(!1),_=Qj(u),b=zH(r),w=$.useRef(!1),[x,E]=$.useState(0);return $.useEffect(()=>{const e=h.current;if(e)return e.addEventListener(NH,_),()=>e.removeEventListener(NH,_)},[_]),te.jsx($H,{scope:r,orientation:n,dir:p,loop:i,currentTabStopId:m,onItemFocus:$.useCallback(e=>g(e),[g]),onItemShiftTab:$.useCallback(()=>v(!0),[]),onFocusableItemAdd:$.useCallback(()=>E(e=>e+1),[]),onFocusableItemRemove:$.useCallback(()=>E(e=>e-1),[]),children:te.jsx(Wj.div,{tabIndex:y||0===x?-1:0,"data-orientation":n,...d,ref:f,style:{outline:"none",...e.style},onMouseDown:nz(e.onMouseDown,()=>{w.current=!0}),onFocus:nz(e.onFocus,e=>{const t=!w.current;if(e.target===e.currentTarget&&t&&!y){const t=new CustomEvent(NH,LH);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=b().filter(e=>e.focusable);JH([e.find(e=>e.active),e.find(e=>e.id===m),...e].filter(Boolean).map(e=>e.ref.current),c)}}w.current=!1}),onBlur:nz(e.onBlur,()=>v(!1))})})}),YH="RovingFocusGroupItem",KH=$.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:i=!1,tabStopId:s,children:o,...a}=e,l=bV(),u=s||l,c=WH(YH,r),d=c.currentTabStopId===u,h=zH(r),{onFocusableItemAdd:f,onFocusableItemRemove:p,currentTabStopId:m}=c;return $.useEffect(()=>{if(n)return f(),()=>p()},[n,f,p]),te.jsx(jH.ItemSlot,{scope:r,id:u,focusable:n,active:i,children:te.jsx(Wj.span,{tabIndex:d?0:-1,"data-orientation":c.orientation,...a,ref:t,onMouseDown:nz(e.onMouseDown,e=>{n?c.onItemFocus(u):e.preventDefault()}),onFocus:nz(e.onFocus,()=>c.onItemFocus(u)),onKeyDown:nz(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void c.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,r){const n=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,r);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(n)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(n)?void 0:ZH[n]}(e,c.orientation,c.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let i=h().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)i.reverse();else if("prev"===t||"next"===t){"prev"===t&&i.reverse();const s=i.indexOf(e.currentTarget);i=c.loop?(n=s+1,(r=i).map((e,t)=>r[(n+t)%r.length])):i.slice(s+1)}setTimeout(()=>JH(i))}var r,n}),children:"function"==typeof o?o({isCurrentTabStop:d,hasTabStop:null!=m}):o})})});KH.displayName=YH;var ZH={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function JH(e,t=!1){const r=document.activeElement;for(const n of e){if(n===r)return;if(n.focus({preventScroll:t}),document.activeElement!==r)return}}var QH=qH,e$=KH,t$=new WeakMap,r$=new WeakMap,n$={},i$=0,s$=function(e){return e&&(e.host||s$(e.parentNode))},o$=function(e,t,r,n){var i=function(e,t){return t.map(function(t){if(e.contains(t))return t;var r=s$(t);return r&&e.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",e,". Doing nothing"),null)}).filter(function(e){return Boolean(e)})}(t,Array.isArray(e)?e:[e]);n$[r]||(n$[r]=new WeakMap);var s=n$[r],o=[],a=new Set,l=new Set(i),u=function(e){e&&!a.has(e)&&(a.add(e),u(e.parentNode))};i.forEach(u);var c=function(e){e&&!l.has(e)&&Array.prototype.forEach.call(e.children,function(e){if(a.has(e))c(e);else try{var t=e.getAttribute(n),i=null!==t&&"false"!==t,l=(t$.get(e)||0)+1,u=(s.get(e)||0)+1;t$.set(e,l),s.set(e,u),o.push(e),1===l&&i&&r$.set(e,!0),1===u&&e.setAttribute(r,"true"),i||e.setAttribute(n,"true")}catch(Ove){console.error("aria-hidden: cannot operate on ",e,Ove)}})};return c(t),a.clear(),i$++,function(){o.forEach(function(e){var t=t$.get(e)-1,i=s.get(e)-1;t$.set(e,t),s.set(e,i),t||(r$.has(e)||e.removeAttribute(n),r$.delete(e)),i||e.removeAttribute(r)}),--i$||(t$=new WeakMap,t$=new WeakMap,r$=new WeakMap,n$={})}},a$=function(e,t,r){void 0===r&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),i=t||function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body}(e);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live], script"))),o$(n,i,r,"aria-hidden")):function(){return null}},l$=function(){return l$=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},l$.apply(this,arguments)};function u$(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}"function"==typeof SuppressedError&&SuppressedError;var c$="right-scroll-bar-position",d$="width-before-scroll-bar";function h$(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var f$="undefined"!=typeof window?$.useLayoutEffect:$.useEffect,p$=new WeakMap;function m$(e,t){var r=function(e,t){var r=$.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(e){var t=r.value;t!==e&&(r.value=e,r.callback(e,t))}}}})[0];return r.callback=t,r.facade}(t||null,function(t){return e.forEach(function(e){return h$(e,t)})});return f$(function(){var t=p$.get(r);if(t){var n=new Set(t),i=new Set(e),s=r.current;n.forEach(function(e){i.has(e)||h$(e,null)}),i.forEach(function(e){n.has(e)||h$(e,s)})}p$.set(r,e)},[e]),r}function g$(e){return e}var y$=function(e){var t=e.sideCar,r=u$(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return $.createElement(n,l$({},r))};y$.isSideCarExport=!0;var v$=function(e){void 0===e&&(e={});var t=function(e,t){void 0===t&&(t=g$);var r=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(e){var i=t(e,n);return r.push(i),function(){r=r.filter(function(e){return e!==i})}},assignSyncMedium:function(e){for(n=!0;r.length;){var t=r;r=[],t.forEach(e)}r={push:function(t){return e(t)},filter:function(){return r}}},assignMedium:function(e){n=!0;var t=[];if(r.length){var i=r;r=[],i.forEach(e),t=r}var s=function(){var r=t;t=[],r.forEach(e)},o=function(){return Promise.resolve().then(s)};o(),r={push:function(e){t.push(e),o()},filter:function(e){return t=t.filter(e),r}}}};return i}(null);return t.options=l$({async:!0,ssr:!1},e),t}(),_$=function(){},b$=$.forwardRef(function(e,t){var r=$.useRef(null),n=$.useState({onScrollCapture:_$,onWheelCapture:_$,onTouchMoveCapture:_$}),i=n[0],s=n[1],o=e.forwardProps,a=e.children,l=e.className,u=e.removeScrollBar,c=e.enabled,d=e.shards,h=e.sideCar,f=e.noRelative,p=e.noIsolation,m=e.inert,g=e.allowPinchZoom,y=e.as,v=void 0===y?"div":y,_=e.gapMode,b=u$(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=h,x=m$([r,t]),E=l$(l$({},b),i);return $.createElement($.Fragment,null,c&&$.createElement(w,{sideCar:v$,removeScrollBar:u,shards:d,noRelative:f,noIsolation:p,inert:m,setCallbacks:s,allowPinchZoom:!!g,lockRef:r,gapMode:_}),o?$.cloneElement($.Children.only(a),l$(l$({},E),{ref:x})):$.createElement(v,l$({},E,{className:l,ref:x}),a))});function w$(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=function(){if("undefined"!=typeof __webpack_nonce__)return __webpack_nonce__}();return t&&e.setAttribute("nonce",t),e}b$.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},b$.classNames={fullWidth:d$,zeroRight:c$};var x$=function(){var e=0,t=null;return{add:function(r){var n,i;0==e&&(t=w$())&&(i=r,(n=t).styleSheet?n.styleSheet.cssText=i:n.appendChild(document.createTextNode(i)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},E$=function(){var e,t=(e=x$(),function(t,r){$.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])});return function(e){var r=e.styles,n=e.dynamic;return t(r,n),null}},S$={left:0,top:0,right:0,gap:0},C$=function(e){return parseInt(e||"",10)||0},A$=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return S$;var t=function(e){var t=window.getComputedStyle(document.body),r=t["padding"===e?"paddingLeft":"marginLeft"],n=t["padding"===e?"paddingTop":"marginTop"],i=t["padding"===e?"paddingRight":"marginRight"];return[C$(r),C$(n),C$(i)]}(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},T$=E$(),D$="data-scroll-locked",k$=function(e,t,r,n){var i=e.left,s=e.top,o=e.right,a=e.gap;return void 0===r&&(r="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(n,";\n   padding-right: ").concat(a,"px ").concat(n,";\n  }\n  body[").concat(D$,"] {\n    overflow: hidden ").concat(n,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(n,";"),"margin"===r&&"\n    padding-left: ".concat(i,"px;\n    padding-top: ").concat(s,"px;\n    padding-right: ").concat(o,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(a,"px ").concat(n,";\n    "),"padding"===r&&"padding-right: ".concat(a,"px ").concat(n,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(c$," {\n    right: ").concat(a,"px ").concat(n,";\n  }\n  \n  .").concat(d$," {\n    margin-right: ").concat(a,"px ").concat(n,";\n  }\n  \n  .").concat(c$," .").concat(c$," {\n    right: 0 ").concat(n,";\n  }\n  \n  .").concat(d$," .").concat(d$," {\n    margin-right: 0 ").concat(n,";\n  }\n  \n  body[").concat(D$,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(a,"px;\n  }\n")},P$=function(){var e=parseInt(document.body.getAttribute(D$)||"0",10);return isFinite(e)?e:0},B$=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,i=void 0===n?"margin":n;$.useEffect(function(){return document.body.setAttribute(D$,(P$()+1).toString()),function(){var e=P$()-1;e<=0?document.body.removeAttribute(D$):document.body.setAttribute(D$,e.toString())}},[]);var s=$.useMemo(function(){return A$(i)},[i]);return $.createElement(T$,{styles:k$(s,!t,i,r?"":"!important")})},O$=!1;if("undefined"!=typeof window)try{var R$=Object.defineProperty({},"passive",{get:function(){return O$=!0,!0}});window.addEventListener("test",R$,R$),window.removeEventListener("test",R$,R$)}catch(mke){O$=!1}var F$=!!O$&&{passive:!1},I$=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return"hidden"!==r[t]&&!(r.overflowY===r.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===r[t])},M$=function(e,t){var r=t.ownerDocument,n=t;do{if("undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot&&(n=n.host),N$(e,n)){var i=L$(e,n);if(i[1]>i[2])return!0}n=n.parentNode}while(n&&n!==r.body);return!1},N$=function(e,t){return"v"===e?function(e){return I$(e,"overflowY")}(t):function(e){return I$(e,"overflowX")}(t)},L$=function(e,t){return"v"===e?function(e){return[e.scrollTop,e.scrollHeight,e.clientHeight]}(t):function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t)},U$=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},j$=function(e){return[e.deltaX,e.deltaY]},z$=function(e){return e&&"current"in e?e.current:e},V$=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},G$=0,H$=[];function $$(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const W$=(q$=function(e){var t=$.useRef([]),r=$.useRef([0,0]),n=$.useRef(),i=$.useState(G$++)[0],s=$.useState(E$)[0],o=$.useRef(e);$.useEffect(function(){o.current=e},[e]),$.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var t=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}([e.lockRef.current],(e.shards||[]).map(z$),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=$.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!o.current.allowPinchZoom;var i,s=U$(e),a=r.current,l="deltaX"in e?e.deltaX:a[0]-s[0],u="deltaY"in e?e.deltaY:a[1]-s[1],c=e.target,d=Math.abs(l)>Math.abs(u)?"h":"v";if("touches"in e&&"h"===d&&"range"===c.type)return!1;var h=window.getSelection(),f=h&&h.anchorNode;if(f&&(f===c||f.contains(c)))return!1;var p=M$(d,c);if(!p)return!0;if(p?i=d:(i="v"===d?"h":"v",p=M$(d,c)),!p)return!1;if(!n.current&&"changedTouches"in e&&(l||u)&&(n.current=i),!i)return!0;var m=n.current||i;return function(e,t,r,n,i){var s=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),o=s*n,a=r.target,l=t.contains(a),u=!1,c=o>0,d=0,h=0;do{if(!a)break;var f=L$(e,a),p=f[0],m=f[1]-f[2]-s*p;(p||m)&&N$(e,a)&&(d+=m,h+=p);var g=a.parentNode;a=g&&g.nodeType===Node.DOCUMENT_FRAGMENT_NODE?g.host:g}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(c&&(i&&Math.abs(d)<1||!i&&o>d)||!c&&(i&&Math.abs(h)<1||!i&&-o>h))&&(u=!0),u}(m,t,e,"h"===m?l:u,!0)},[]),l=$.useCallback(function(e){var r=e;if(H$.length&&H$[H$.length-1]===s){var n="deltaY"in r?j$(r):U$(r),i=t.current.filter(function(e){return e.name===r.type&&(e.target===r.target||r.target===e.shadowParent)&&function(e,t){return e[0]===t[0]&&e[1]===t[1]}(e.delta,n)})[0];if(i&&i.should)r.cancelable&&r.preventDefault();else if(!i){var l=(o.current.shards||[]).map(z$).filter(Boolean).filter(function(e){return e.contains(r.target)});(l.length>0?a(r,l[0]):!o.current.noIsolation)&&r.cancelable&&r.preventDefault()}}},[]),u=$.useCallback(function(e,r,n,i){var s={name:e,delta:r,target:n,should:i,shadowParent:$$(n)};t.current.push(s),setTimeout(function(){t.current=t.current.filter(function(e){return e!==s})},1)},[]),c=$.useCallback(function(e){r.current=U$(e),n.current=void 0},[]),d=$.useCallback(function(t){u(t.type,j$(t),t.target,a(t,e.lockRef.current))},[]),h=$.useCallback(function(t){u(t.type,U$(t),t.target,a(t,e.lockRef.current))},[]);$.useEffect(function(){return H$.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,F$),document.addEventListener("touchmove",l,F$),document.addEventListener("touchstart",c,F$),function(){H$=H$.filter(function(e){return e!==s}),document.removeEventListener("wheel",l,F$),document.removeEventListener("touchmove",l,F$),document.removeEventListener("touchstart",c,F$)}},[]);var f=e.removeScrollBar,p=e.inert;return $.createElement($.Fragment,null,p?$.createElement(s,{styles:V$(i)}):null,f?$.createElement(B$,{noRelative:e.noRelative,gapMode:e.gapMode}):null)},v$.useMedium(q$),y$);var q$,X$=$.forwardRef(function(e,t){return $.createElement(b$,l$({},e,{ref:t,sideCar:W$}))});X$.classNames=b$.classNames;const Y$=X$;var K$=["Enter"," "],Z$=["ArrowUp","PageDown","End"],J$=["ArrowDown","PageUp","Home",...Z$],Q$={ltr:[...K$,"ArrowRight"],rtl:[...K$,"ArrowLeft"]},eW={ltr:["ArrowLeft"],rtl:["ArrowRight"]},tW="Menu",[rW,nW,iW]=qz(tW),[sW,oW]=Zj(tW,[iW,gH,HH]),aW=gH(),lW=HH(),[uW,cW]=sW(tW),[dW,hW]=sW(tW),fW=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:i,onOpenChange:s,modal:o=!0}=e,a=aW(t),[l,u]=$.useState(null),c=$.useRef(!1),d=Qj(s),h=tz(i);return $.useEffect(()=>{const e=()=>{c.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=()=>c.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}},[]),te.jsx(OH,{...a,children:te.jsx(uW,{scope:t,open:r,onOpenChange:d,content:l,onContentChange:u,children:te.jsx(dW,{scope:t,onClose:$.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:c,dir:h,modal:o,children:n})})})};fW.displayName=tW;var pW=$.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,i=aW(r);return te.jsx(RH,{...i,...n,ref:t})});pW.displayName="MenuAnchor";var mW="MenuPortal",[gW,yW]=sW(mW,{forceMount:void 0}),vW=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:i}=e,s=cW(mW,t);return te.jsx(gW,{scope:t,forceMount:r,children:te.jsx(Yj,{present:r||s.open,children:te.jsx(MH,{asChild:!0,container:i,children:n})})})};vW.displayName=mW;var _W="MenuContent",[bW,wW]=sW(_W),xW=$.forwardRef((e,t)=>{const r=yW(_W,e.__scopeMenu),{forceMount:n=r.forceMount,...i}=e,s=cW(_W,e.__scopeMenu),o=hW(_W,e.__scopeMenu);return te.jsx(rW.Provider,{scope:e.__scopeMenu,children:te.jsx(Yj,{present:n||s.open,children:te.jsx(rW.Slot,{scope:e.__scopeMenu,children:o.modal?te.jsx(EW,{...i,ref:t}):te.jsx(SW,{...i,ref:t})})})})}),EW=$.forwardRef((e,t)=>{const r=cW(_W,e.__scopeMenu),n=$.useRef(null),i=jj(t,n);return $.useEffect(()=>{const e=n.current;if(e)return a$(e)},[]),te.jsx(AW,{...e,ref:i,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:nz(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),SW=$.forwardRef((e,t)=>{const r=cW(_W,e.__scopeMenu);return te.jsx(AW,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),CW=zj("MenuContent.ScrollLock"),AW=$.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:u,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:h,onDismiss:f,disableOutsideScroll:p,...m}=e,g=cW(_W,r),y=hW(_W,r),v=aW(r),_=lW(r),b=nW(r),[w,x]=$.useState(null),E=$.useRef(null),S=jj(t,E,g.onContentChange),C=$.useRef(0),A=$.useRef(""),T=$.useRef(0),D=$.useRef(null),k=$.useRef("right"),P=$.useRef(0),B=p?Y$:$.Fragment,O=p?{as:CW,allowPinchZoom:!0}:void 0,R=e=>{const t=A.current+e,r=b().filter(e=>!e.disabled),n=document.activeElement,i=r.find(e=>e.ref.current===n)?.textValue,s=function(e,t,r){const n=t.length>1&&Array.from(t).every(e=>e===t[0]),i=n?t[0]:t,s=r?e.indexOf(r):-1;let o=(a=e,l=Math.max(s,0),a.map((e,t)=>a[(l+t)%a.length]));var a,l;1===i.length&&(o=o.filter(e=>e!==r));const u=o.find(e=>e.toLowerCase().startsWith(i.toLowerCase()));return u!==r?u:void 0}(r.map(e=>e.textValue),t,i),o=r.find(e=>e.textValue===s)?.ref.current;!function e(t){A.current=t,window.clearTimeout(C.current),""!==t&&(C.current=window.setTimeout(()=>e(""),1e3))}(t),o&&setTimeout(()=>o.focus())};$.useEffect(()=>()=>window.clearTimeout(C.current),[]),oV();const F=$.useCallback(e=>k.current===D.current?.side&&function(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return function(e,t){const{x:r,y:n}=e;let i=!1;for(let s=0,o=t.length-1;s<t.length;o=s++){const e=t[s],a=t[o],l=e.x,u=e.y,c=a.x,d=a.y;u>n!=d>n&&r<(c-l)*(n-u)/(d-u)+l&&(i=!i)}return i}(r,t)}(e,D.current?.area),[]);return te.jsx(bW,{scope:r,searchRef:A,onItemEnter:$.useCallback(e=>{F(e)&&e.preventDefault()},[F]),onItemLeave:$.useCallback(e=>{F(e)||(E.current?.focus(),x(null))},[F]),onTriggerLeave:$.useCallback(e=>{F(e)&&e.preventDefault()},[F]),pointerGraceTimerRef:T,onPointerGraceIntentChange:$.useCallback(e=>{D.current=e},[]),children:te.jsx(B,{...O,children:te.jsx(dV,{asChild:!0,trapped:i,onMountAutoFocus:nz(s,e=>{e.preventDefault(),E.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:te.jsx(Qz,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:u,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:h,onDismiss:f,children:te.jsx(QH,{asChild:!0,..._,dir:y.dir,orientation:"vertical",loop:n,currentTabStopId:w,onCurrentTabStopIdChange:x,onEntryFocus:nz(l,e=>{y.isUsingKeyboardRef.current||e.preventDefault()}),preventScrollOnEntryFocus:!0,children:te.jsx(FH,{role:"menu","aria-orientation":"vertical","data-state":eq(g.open),"data-radix-menu-content":"",dir:y.dir,...v,...m,ref:S,style:{outline:"none",...m.style},onKeyDown:nz(m.onKeyDown,e=>{const t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,r=e.ctrlKey||e.altKey||e.metaKey,n=1===e.key.length;t&&("Tab"===e.key&&e.preventDefault(),!r&&n&&R(e.key));const i=E.current;if(e.target!==i)return;if(!J$.includes(e.key))return;e.preventDefault();const s=b().filter(e=>!e.disabled).map(e=>e.ref.current);Z$.includes(e.key)&&s.reverse(),function(e){const t=document.activeElement;for(const r of e){if(r===t)return;if(r.focus(),document.activeElement!==t)return}}(s)}),onBlur:nz(e.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(C.current),A.current="")}),onPointerMove:nz(e.onPointerMove,nq(e=>{const t=e.target,r=P.current!==e.clientX;if(e.currentTarget.contains(t)&&r){const t=e.clientX>P.current?"right":"left";k.current=t,P.current=e.clientX}}))})})})})})})});xW.displayName=_W;var TW=$.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return te.jsx(Wj.div,{role:"group",...n,ref:t})});TW.displayName="MenuGroup";var DW=$.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return te.jsx(Wj.div,{...n,ref:t})});DW.displayName="MenuLabel";var kW="MenuItem",PW="menu.itemSelect",BW=$.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...i}=e,s=$.useRef(null),o=hW(kW,e.__scopeMenu),a=wW(kW,e.__scopeMenu),l=jj(t,s),u=$.useRef(!1);return te.jsx(OW,{...i,ref:l,disabled:r,onClick:nz(e.onClick,()=>{const e=s.current;if(!r&&e){const t=new CustomEvent(PW,{bubbles:!0,cancelable:!0});e.addEventListener(PW,e=>n?.(e),{once:!0}),qj(e,t),t.defaultPrevented?u.current=!1:o.onClose()}}),onPointerDown:t=>{e.onPointerDown?.(t),u.current=!0},onPointerUp:nz(e.onPointerUp,e=>{u.current||e.currentTarget?.click()}),onKeyDown:nz(e.onKeyDown,e=>{const t=""!==a.searchRef.current;r||t&&" "===e.key||K$.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})})});BW.displayName=kW;var OW=$.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:i,...s}=e,o=wW(kW,r),a=lW(r),l=$.useRef(null),u=jj(t,l),[c,d]=$.useState(!1),[h,f]=$.useState("");return $.useEffect(()=>{const e=l.current;e&&f((e.textContent??"").trim())},[s.children]),te.jsx(rW.ItemSlot,{scope:r,disabled:n,textValue:i??h,children:te.jsx(e$,{asChild:!0,...a,focusable:!n,children:te.jsx(Wj.div,{role:"menuitem","data-highlighted":c?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...s,ref:u,onPointerMove:nz(e.onPointerMove,nq(e=>{n?o.onItemLeave(e):(o.onItemEnter(e),e.defaultPrevented||e.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:nz(e.onPointerLeave,nq(e=>o.onItemLeave(e))),onFocus:nz(e.onFocus,()=>d(!0)),onBlur:nz(e.onBlur,()=>d(!1))})})})}),RW=$.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...i}=e;return te.jsx(zW,{scope:e.__scopeMenu,checked:r,children:te.jsx(BW,{role:"menuitemcheckbox","aria-checked":tq(r)?"mixed":r,...i,ref:t,"data-state":rq(r),onSelect:nz(i.onSelect,()=>n?.(!!tq(r)||!r),{checkForDefaultPrevented:!1})})})});RW.displayName="MenuCheckboxItem";var FW="MenuRadioGroup",[IW,MW]=sW(FW,{value:void 0,onValueChange:()=>{}}),NW=$.forwardRef((e,t)=>{const{value:r,onValueChange:n,...i}=e,s=Qj(n);return te.jsx(IW,{scope:e.__scopeMenu,value:r,onValueChange:s,children:te.jsx(TW,{...i,ref:t})})});NW.displayName=FW;var LW="MenuRadioItem",UW=$.forwardRef((e,t)=>{const{value:r,...n}=e,i=MW(LW,e.__scopeMenu),s=r===i.value;return te.jsx(zW,{scope:e.__scopeMenu,checked:s,children:te.jsx(BW,{role:"menuitemradio","aria-checked":s,...n,ref:t,"data-state":rq(s),onSelect:nz(n.onSelect,()=>i.onValueChange?.(r),{checkForDefaultPrevented:!1})})})});UW.displayName=LW;var jW="MenuItemIndicator",[zW,VW]=sW(jW,{checked:!1}),GW=$.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...i}=e,s=VW(jW,r);return te.jsx(Yj,{present:n||tq(s.checked)||!0===s.checked,children:te.jsx(Wj.span,{...i,ref:t,"data-state":rq(s.checked)})})});GW.displayName=jW;var HW=$.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return te.jsx(Wj.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});HW.displayName="MenuSeparator";var $W=$.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,i=aW(r);return te.jsx(IH,{...i,...n,ref:t})});$W.displayName="MenuArrow";var WW="MenuSub",[qW,XW]=sW(WW),YW=e=>{const{__scopeMenu:t,children:r,open:n=!1,onOpenChange:i}=e,s=cW(WW,t),o=aW(t),[a,l]=$.useState(null),[u,c]=$.useState(null),d=Qj(i);return $.useEffect(()=>(!1===s.open&&d(!1),()=>d(!1)),[s.open,d]),te.jsx(OH,{...o,children:te.jsx(uW,{scope:t,open:n,onOpenChange:d,content:u,onContentChange:c,children:te.jsx(qW,{scope:t,contentId:bV(),triggerId:bV(),trigger:a,onTriggerChange:l,children:r})})})};YW.displayName=WW;var KW="MenuSubTrigger",ZW=$.forwardRef((e,t)=>{const r=cW(KW,e.__scopeMenu),n=hW(KW,e.__scopeMenu),i=XW(KW,e.__scopeMenu),s=wW(KW,e.__scopeMenu),o=$.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,u={__scopeMenu:e.__scopeMenu},c=$.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return $.useEffect(()=>c,[c]),$.useEffect(()=>{const e=a.current;return()=>{window.clearTimeout(e),l(null)}},[a,l]),te.jsx(pW,{asChild:!0,...u,children:te.jsx(OW,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":i.contentId,"data-state":eq(r.open),...e,ref:Uj(t,i.onTriggerChange),onClick:t=>{e.onClick?.(t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:nz(e.onPointerMove,nq(t=>{s.onItemEnter(t),t.defaultPrevented||e.disabled||r.open||o.current||(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),c()},100))})),onPointerLeave:nz(e.onPointerLeave,nq(e=>{c();const t=r.content?.getBoundingClientRect();if(t){const n=r.content?.dataset.side,i="right"===n,o=i?-5:5,l=t[i?"left":"right"],u=t[i?"right":"left"];s.onPointerGraceIntentChange({area:[{x:e.clientX+o,y:e.clientY},{x:l,y:t.top},{x:u,y:t.top},{x:u,y:t.bottom},{x:l,y:t.bottom}],side:n}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(e),e.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:nz(e.onKeyDown,t=>{const i=""!==s.searchRef.current;e.disabled||i&&" "===t.key||Q$[n.dir].includes(t.key)&&(r.onOpenChange(!0),r.content?.focus(),t.preventDefault())})})})});ZW.displayName=KW;var JW="MenuSubContent",QW=$.forwardRef((e,t)=>{const r=yW(_W,e.__scopeMenu),{forceMount:n=r.forceMount,...i}=e,s=cW(_W,e.__scopeMenu),o=hW(_W,e.__scopeMenu),a=XW(JW,e.__scopeMenu),l=$.useRef(null),u=jj(t,l);return te.jsx(rW.Provider,{scope:e.__scopeMenu,children:te.jsx(Yj,{present:n||s.open,children:te.jsx(rW.Slot,{scope:e.__scopeMenu,children:te.jsx(AW,{id:a.contentId,"aria-labelledby":a.triggerId,...i,ref:u,align:"start",side:"rtl"===o.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{o.isUsingKeyboardRef.current&&l.current?.focus(),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:nz(e.onFocusOutside,e=>{e.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:nz(e.onEscapeKeyDown,e=>{o.onClose(),e.preventDefault()}),onKeyDown:nz(e.onKeyDown,e=>{const t=e.currentTarget.contains(e.target),r=eW[o.dir].includes(e.key);t&&r&&(s.onOpenChange(!1),a.trigger?.focus(),e.preventDefault())})})})})})});function eq(e){return e?"open":"closed"}function tq(e){return"indeterminate"===e}function rq(e){return tq(e)?"indeterminate":e?"checked":"unchecked"}function nq(e){return t=>"mouse"===t.pointerType?e(t):void 0}QW.displayName=JW;var iq=fW,sq=pW,oq=vW,aq=xW,lq=TW,uq=DW,cq=BW,dq=RW,hq=NW,fq=UW,pq=GW,mq=HW,gq=$W,yq=YW,vq=ZW,_q=QW,bq="DropdownMenu",[wq,xq]=Zj(bq,[oW]),Eq=oW(),[Sq,Cq]=wq(bq),Aq=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:i,defaultOpen:s,onOpenChange:o,modal:a=!0}=e,l=Eq(t),u=$.useRef(null),[c,d]=Wz({prop:i,defaultProp:s??!1,onChange:o,caller:bq});return te.jsx(Sq,{scope:t,triggerId:bV(),triggerRef:u,contentId:bV(),open:c,onOpenChange:d,onOpenToggle:$.useCallback(()=>d(e=>!e),[d]),modal:a,children:te.jsx(iq,{...l,open:c,onOpenChange:d,dir:n,modal:a,children:r})})};Aq.displayName=bq;var Tq="DropdownMenuTrigger",Dq=$.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...i}=e,s=Cq(Tq,r),o=Eq(r);return te.jsx(sq,{asChild:!0,...o,children:te.jsx(Wj.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...i,ref:Uj(t,s.triggerRef),onPointerDown:nz(e.onPointerDown,e=>{n||0!==e.button||!1!==e.ctrlKey||(s.onOpenToggle(),s.open||e.preventDefault())}),onKeyDown:nz(e.onKeyDown,e=>{n||(["Enter"," "].includes(e.key)&&s.onOpenToggle(),"ArrowDown"===e.key&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())})})})});Dq.displayName=Tq;var kq=e=>{const{__scopeDropdownMenu:t,...r}=e,n=Eq(t);return te.jsx(oq,{...n,...r})};kq.displayName="DropdownMenuPortal";var Pq="DropdownMenuContent",Bq=$.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Cq(Pq,r),s=Eq(r),o=$.useRef(!1);return te.jsx(aq,{id:i.contentId,"aria-labelledby":i.triggerId,...s,...n,ref:t,onCloseAutoFocus:nz(e.onCloseAutoFocus,e=>{o.current||i.triggerRef.current?.focus(),o.current=!1,e.preventDefault()}),onInteractOutside:nz(e.onInteractOutside,e=>{const t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey,n=2===t.button||r;i.modal&&!n||(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Bq.displayName=Pq,$.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Eq(r);return te.jsx(lq,{...i,...n,ref:t})}).displayName="DropdownMenuGroup";var Oq=$.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Eq(r);return te.jsx(uq,{...i,...n,ref:t})});Oq.displayName="DropdownMenuLabel";var Rq=$.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Eq(r);return te.jsx(cq,{...i,...n,ref:t})});Rq.displayName="DropdownMenuItem";var Fq=$.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Eq(r);return te.jsx(dq,{...i,...n,ref:t})});Fq.displayName="DropdownMenuCheckboxItem",$.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Eq(r);return te.jsx(hq,{...i,...n,ref:t})}).displayName="DropdownMenuRadioGroup";var Iq=$.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Eq(r);return te.jsx(fq,{...i,...n,ref:t})});Iq.displayName="DropdownMenuRadioItem";var Mq=$.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Eq(r);return te.jsx(pq,{...i,...n,ref:t})});Mq.displayName="DropdownMenuItemIndicator";var Nq=$.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Eq(r);return te.jsx(mq,{...i,...n,ref:t})});Nq.displayName="DropdownMenuSeparator",$.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Eq(r);return te.jsx(gq,{...i,...n,ref:t})}).displayName="DropdownMenuArrow";var Lq=$.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Eq(r);return te.jsx(vq,{...i,...n,ref:t})});Lq.displayName="DropdownMenuSubTrigger";var Uq=$.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Eq(r);return te.jsx(_q,{...i,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});function jq(e,t){if(null==e)return{};var r,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}Uq.displayName="DropdownMenuSubContent",e("bo",Aq),e("bp",Dq),e("be",kq),e("bf",Bq),e("bm",Oq),e("bg",Rq),e("bh",Fq),e("bk",Iq),e("bi",Mq),e("bn",Nq),e("bq",e=>{const{__scopeDropdownMenu:t,children:r,open:n,onOpenChange:i,defaultOpen:s}=e,o=Eq(t),[a,l]=Wz({prop:n,defaultProp:s??!1,onChange:i,caller:"DropdownMenuSub"});return te.jsx(yq,{...o,open:a,onOpenChange:l,children:r})}),e("bb",Lq),e("bd",Uq);var zq=["color"],Vq=(e("c8",$.forwardRef(function(e,t){var r=e.color,n=void 0===r?"currentColor":r,i=jq(e,zq);return $.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),$.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))})),["color"]),Gq=(e("bj",$.forwardRef(function(e,t){var r=e.color,n=void 0===r?"currentColor":r,i=jq(e,Vq);return $.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),$.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))})),["color"]),Hq=(e("cc",$.forwardRef(function(e,t){var r=e.color,n=void 0===r?"currentColor":r,i=jq(e,Gq);return $.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),$.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))})),["color"]),$q=(e("bc",$.forwardRef(function(e,t){var r=e.color,n=void 0===r?"currentColor":r,i=jq(e,Hq);return $.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),$.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))})),["color"]),Wq=(e("ca",$.forwardRef(function(e,t){var r=e.color,n=void 0===r?"currentColor":r,i=jq(e,$q);return $.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),$.createElement("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))})),["color"]),qq=(e("bJ",$.forwardRef(function(e,t){var r=e.color,n=void 0===r?"currentColor":r,i=jq(e,Wq);return $.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),$.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))})),["color"]);e("bl",$.forwardRef(function(e,t){var r=e.color,n=void 0===r?"currentColor":r,i=jq(e,qq);return $.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),$.createElement("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:n}))}));const Xq="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,Yq=Object.keys,Kq=Array.isArray;function Zq(e,t){return"object"!=typeof t||Yq(t).forEach(function(r){e[r]=t[r]}),e}"undefined"==typeof Promise||Xq.Promise||(Xq.Promise=Promise);const Jq=Object.getPrototypeOf,Qq={}.hasOwnProperty;function eX(e,t){return Qq.call(e,t)}function tX(e,t){"function"==typeof t&&(t=t(Jq(e))),("undefined"==typeof Reflect?Yq:Reflect.ownKeys)(t).forEach(r=>{nX(e,r,t[r])})}const rX=Object.defineProperty;function nX(e,t,r,n){rX(e,t,Zq(r&&eX(r,"get")&&"function"==typeof r.get?{get:r.get,set:r.set,configurable:!0}:{value:r,configurable:!0,writable:!0},n))}function iX(e){return{from:function(t){return e.prototype=Object.create(t.prototype),nX(e.prototype,"constructor",e),{extend:tX.bind(null,e.prototype)}}}}const sX=Object.getOwnPropertyDescriptor;function oX(e,t){let r;return sX(e,t)||(r=Jq(e))&&oX(r,t)}const aX=[].slice;function lX(e,t,r){return aX.call(e,t,r)}function uX(e,t){return t(e)}function cX(e){if(!e)throw new Error("Assertion Failed")}function dX(e){Xq.setImmediate?setImmediate(e):setTimeout(e,0)}function hX(e,t){return e.reduce((e,r,n)=>{var i=t(r,n);return i&&(e[i[0]]=i[1]),e},{})}function fX(e,t){if("string"==typeof t&&eX(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var r=[],n=0,i=t.length;n<i;++n){var s=fX(e,t[n]);r.push(s)}return r}var o=t.indexOf(".");if(-1!==o){var a=e[t.substr(0,o)];return null==a?void 0:fX(a,t.substr(o+1))}}function pX(e,t,r){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){cX("string"!=typeof r&&"length"in r);for(var n=0,i=t.length;n<i;++n)pX(e,t[n],r[n])}else{var s=t.indexOf(".");if(-1!==s){var o=t.substr(0,s),a=t.substr(s+1);if(""===a)void 0===r?Kq(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=r;else{var l=e[o];l&&eX(e,o)||(l=e[o]={}),pX(l,a,r)}}else void 0===r?Kq(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=r}}function mX(e){var t={};for(var r in e)eX(e,r)&&(t[r]=e[r]);return t}const gX=[].concat;function yX(e){return gX.apply([],e)}const vX="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(yX([8,16,32,64].map(e=>["Int","Uint","Float"].map(t=>t+e+"Array")))).filter(e=>Xq[e]),_X=vX.map(e=>Xq[e]);hX(vX,e=>[e,!0]);let bX=null;function wX(e){bX="undefined"!=typeof WeakMap&&new WeakMap;const t=xX(e);return bX=null,t}function xX(e){if(!e||"object"!=typeof e)return e;let t=bX&&bX.get(e);if(t)return t;if(Kq(e)){t=[],bX&&bX.set(e,t);for(var r=0,n=e.length;r<n;++r)t.push(xX(e[r]))}else if(_X.indexOf(e.constructor)>=0)t=e;else{const r=Jq(e);for(var i in t=r===Object.prototype?{}:Object.create(r),bX&&bX.set(e,t),e)eX(e,i)&&(t[i]=xX(e[i]))}return t}const{toString:EX}={};function SX(e){return EX.call(e).slice(8,-1)}const CX="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",AX="symbol"==typeof CX?function(e){var t;return null!=e&&(t=e[CX])&&t.apply(e)}:function(){return null},TX={};function DX(e){var t,r,n,i;if(1===arguments.length){if(Kq(e))return e.slice();if(this===TX&&"string"==typeof e)return[e];if(i=AX(e)){for(r=[];!(n=i.next()).done;)r.push(n.value);return r}if(null==e)return[e];if("number"==typeof(t=e.length)){for(r=new Array(t);t--;)r[t]=e[t];return r}return[e]}for(t=arguments.length,r=new Array(t);t--;)r[t]=arguments[t];return r}const kX="undefined"!=typeof Symbol?e=>"AsyncFunction"===e[Symbol.toStringTag]:()=>!1;var PX="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function BX(e,t){PX=e,OX=t}var OX=()=>!0;const RX=!new Error("").stack;function FX(){if(RX)try{throw FX.arguments,new Error}catch(Ove){return Ove}return new Error}function IX(e,t){var r=e.stack;return r?(t=t||0,0===r.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),r.split("\n").slice(t).filter(OX).map(e=>"\n"+e).join("")):""}var MX=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],NX=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(MX),LX={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function UX(e,t){this._e=FX(),this.name=e,this.message=t}function jX(e,t){return e+". Errors: "+Object.keys(t).map(e=>t[e].toString()).filter((e,t,r)=>r.indexOf(e)===t).join("\n")}function zX(e,t,r,n){this._e=FX(),this.failures=t,this.failedKeys=n,this.successCount=r,this.message=jX(e,t)}function VX(e,t){this._e=FX(),this.name="BulkError",this.failures=Object.keys(t).map(e=>t[e]),this.failuresByPos=t,this.message=jX(e,t)}iX(UX).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+IX(this._e,2))}},toString:function(){return this.name+": "+this.message}}),iX(zX).from(UX),iX(VX).from(UX);var GX=NX.reduce((e,t)=>(e[t]=t+"Error",e),{});const HX=UX;var $X=NX.reduce((e,t)=>{var r=t+"Error";function n(e,n){this._e=FX(),this.name=r,e?"string"==typeof e?(this.message=`${e}${n?"\n "+n:""}`,this.inner=n||null):"object"==typeof e&&(this.message=`${e.name} ${e.message}`,this.inner=e):(this.message=LX[t]||r,this.inner=null)}return iX(n).from(HX),e[t]=n,e},{});$X.Syntax=SyntaxError,$X.Type=TypeError,$X.Range=RangeError;var WX=MX.reduce((e,t)=>(e[t+"Error"]=$X[t],e),{}),qX=NX.reduce((e,t)=>(-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=$X[t]),e),{});function XX(){}function YX(e){return e}function KX(e,t){return null==e||e===YX?t:function(r){return t(e(r))}}function ZX(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function JX(e,t){return e===XX?t:function(){var r=e.apply(this,arguments);void 0!==r&&(arguments[0]=r);var n=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return n&&(this.onsuccess=this.onsuccess?ZX(n,this.onsuccess):n),i&&(this.onerror=this.onerror?ZX(i,this.onerror):i),void 0!==s?s:r}}function QX(e,t){return e===XX?t:function(){e.apply(this,arguments);var r=this.onsuccess,n=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),r&&(this.onsuccess=this.onsuccess?ZX(r,this.onsuccess):r),n&&(this.onerror=this.onerror?ZX(n,this.onerror):n)}}function eY(e,t){return e===XX?t:function(r){var n=e.apply(this,arguments);Zq(r,n);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?ZX(i,this.onsuccess):i),s&&(this.onerror=this.onerror?ZX(s,this.onerror):s),void 0===n?void 0===o?void 0:o:Zq(n,o)}}function tY(e,t){return e===XX?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function rY(e,t){return e===XX?t:function(){var r=e.apply(this,arguments);if(r&&"function"==typeof r.then){for(var n=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return r.then(function(){return t.apply(n,s)})}return t.apply(this,arguments)}}qX.ModifyError=zX,qX.DexieError=UX,qX.BulkError=VX;var nY={};const[iY,sY,oY]="undefined"==typeof Promise?[]:(()=>{let e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,Jq(e),e];const t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,Jq(t),e]})(),aY=sY&&sY.then,lY=iY&&iY.constructor,uY=!!oY;var cY=!1,dY=oY?()=>{oY.then(FY)}:Xq.setImmediate?setImmediate.bind(null,FY):Xq.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver(()=>{FY(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(FY,0)},hY=function(e,t){wY.push([e,t]),pY&&(dY(),pY=!1)},fY=!0,pY=!0,mY=[],gY=[],yY=null,vY=YX,_Y={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:sK,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(e=>{try{sK(e[0],e[1])}catch(e){}})}},bY=_Y,wY=[],xY=0,EY=[];function SY(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=XX,this._lib=!1;var t=this._PSD=bY;if(PX&&(this._stackHolder=FX(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==nY)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&DY(this,this._value))}this._state=null,this._value=null,++t.ref,TY(this,e)}const CY={get:function(){var e=bY,t=HY;function r(r,n){var i=!e.global&&(e!==bY||t!==HY);const s=i&&!XY();var o=new SY((t,o)=>{PY(this,new AY(rK(r,e,i,s),rK(n,e,i,s),t,o,e))});return PX&&RY(o,this),o}return r.prototype=nY,r},set:function(e){nX(this,"then",e&&e.prototype===nY?CY:{get:function(){return e},set:CY.set})}};function AY(e,t,r,n,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=r,this.reject=n,this.psd=i}function TY(e,t){try{t(t=>{if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&IY();t&&"function"==typeof t.then?TY(e,(e,r)=>{t instanceof SY?t._then(e,r):t.then(e,r)}):(e._state=!0,e._value=t,kY(e)),r&&MY()}},DY.bind(null,e))}catch(t){DY(e,t)}}function DY(e,t){if(gY.push(t),null===e._state){var r=e._lib&&IY();t=vY(t),e._state=!1,e._value=t,PX&&null!==t&&"object"==typeof t&&!t._promise&&function(e){try{e.apply(null,void 0)}catch(e){}}(()=>{var r=oX(t,"stack");t._promise=e,nX(t,"stack",{get:()=>cY?r&&(r.get?r.get.apply(t):r.value):e.stack})}),function(e){mY.some(t=>t._value===e._value)||mY.push(e)}(e),kY(e),r&&MY()}}function kY(e){var t=e._listeners;e._listeners=[];for(var r=0,n=t.length;r<n;++r)PY(e,t[r]);var i=e._PSD;--i.ref||i.finalize(),0===xY&&(++xY,hY(()=>{0==--xY&&NY()},[]))}function PY(e,t){if(null!==e._state){var r=e._state?t.onFulfilled:t.onRejected;if(null===r)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++xY,hY(BY,[r,e,t])}else e._listeners.push(t)}function BY(e,t,r){try{yY=t;var n,i=t._value;t._state?n=e(i):(gY.length&&(gY=[]),n=e(i),-1===gY.indexOf(i)&&function(e){for(var t=mY.length;t;)if(mY[--t]._value===e._value)return void mY.splice(t,1)}(t)),r.resolve(n)}catch(e){r.reject(e)}finally{yY=null,0==--xY&&NY(),--r.psd.ref||r.psd.finalize()}}function OY(e,t,r){if(t.length===r)return t;var n="";if(!1===e._state){var i,s,o=e._value;null!=o?(i=o.name||"Error",s=o.message||o,n=IX(o,0)):(i=o,s=""),t.push(i+(s?": "+s:"")+n)}return PX&&((n=IX(e._stackHolder,2))&&-1===t.indexOf(n)&&t.push(n),e._prev&&OY(e._prev,t,r)),t}function RY(e,t){var r=t?t._numPrev+1:0;r<100&&(e._prev=t,e._numPrev=r)}function FY(){IY()&&MY()}function IY(){var e=fY;return fY=!1,pY=!1,e}function MY(){var e,t,r;do{for(;wY.length>0;)for(e=wY,wY=[],r=e.length,t=0;t<r;++t){var n=e[t];n[0].apply(null,n[1])}}while(wY.length>0);fY=!0,pY=!0}function NY(){var e=mY;mY=[],e.forEach(e=>{e._PSD.onunhandled.call(null,e._value,e)});for(var t=EY.slice(0),r=t.length;r;)t[--r]()}function LY(e){return new SY(nY,!1,e)}function UY(e,t){var r=bY;return function(){var n=IY(),i=bY;try{return JY(r,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{JY(i,!1),n&&MY()}}}tX(SY.prototype,{then:CY,_then:function(e,t){PY(this,new AY(null,null,e,t,bY))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],r=arguments[1];return"function"==typeof t?this.then(null,e=>e instanceof t?r(e):LY(e)):this.then(null,e=>e&&e.name===t?r(e):LY(e))},finally:function(e){return this.then(t=>(e(),t),t=>(e(),LY(t)))},stack:{get:function(){if(this._stack)return this._stack;try{cY=!0;var e=OY(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{cY=!1}}},timeout:function(e,t){return e<1/0?new SY((r,n)=>{var i=setTimeout(()=>n(new $X.Timeout(t)),e);this.then(r,n).finally(clearTimeout.bind(null,i))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&nX(SY.prototype,Symbol.toStringTag,"Dexie.Promise"),_Y.env=QY(),tX(SY,{all:function(){var e=DX.apply(null,arguments).map(YY);return new SY(function(t,r){0===e.length&&t([]);var n=e.length;e.forEach((i,s)=>SY.resolve(i).then(r=>{e[s]=r,--n||t(e)},r))})},resolve:e=>{if(e instanceof SY)return e;if(e&&"function"==typeof e.then)return new SY((t,r)=>{e.then(t,r)});var t=new SY(nY,!0,e);return RY(t,yY),t},reject:LY,race:function(){var e=DX.apply(null,arguments).map(YY);return new SY((t,r)=>{e.map(e=>SY.resolve(e).then(t,r))})},PSD:{get:()=>bY,set:e=>bY=e},totalEchoes:{get:()=>HY},newPSD:WY,usePSD:eK,scheduler:{get:()=>hY,set:e=>{hY=e}},rejectionMapper:{get:()=>vY,set:e=>{vY=e}},follow:(e,t)=>new SY((r,n)=>WY((t,r)=>{var n=bY;n.unhandleds=[],n.onunhandled=r,n.finalize=ZX(function(){!function(e){EY.push(function t(){e(),EY.splice(EY.indexOf(t),1)}),++xY,hY(()=>{0==--xY&&NY()},[])}(()=>{0===this.unhandleds.length?t():r(this.unhandleds[0])})},n.finalize),e()},t,r,n))}),lY&&(lY.allSettled&&nX(SY,"allSettled",function(){const e=DX.apply(null,arguments).map(YY);return new SY(t=>{0===e.length&&t([]);let r=e.length;const n=new Array(r);e.forEach((e,i)=>SY.resolve(e).then(e=>n[i]={status:"fulfilled",value:e},e=>n[i]={status:"rejected",reason:e}).then(()=>--r||t(n)))})}),lY.any&&"undefined"!=typeof AggregateError&&nX(SY,"any",function(){const e=DX.apply(null,arguments).map(YY);return new SY((t,r)=>{0===e.length&&r(new AggregateError([]));let n=e.length;const i=new Array(n);e.forEach((e,s)=>SY.resolve(e).then(e=>t(e),e=>{i[s]=e,--n||r(new AggregateError(i))}))})}));const jY={awaits:0,echoes:0,id:0};var zY=0,VY=[],GY=0,HY=0,$Y=0;function WY(e,t,r,n){var i=bY,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++$Y;var o=_Y.env;s.env=uY?{Promise:SY,PromiseProp:{value:SY,configurable:!0,writable:!0},all:SY.all,race:SY.race,allSettled:SY.allSettled,any:SY.any,resolve:SY.resolve,reject:SY.reject,nthen:nK(o.nthen,s),gthen:nK(o.gthen,s)}:{},t&&Zq(s,t),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=eK(s,e,r,n);return 0===s.ref&&s.finalize(),a}function qY(){return jY.id||(jY.id=++zY),++jY.awaits,jY.echoes+=100,jY.id}function XY(){return!!jY.awaits&&(0==--jY.awaits&&(jY.id=0),jY.echoes=100*jY.awaits,!0)}function YY(e){return jY.echoes&&e&&e.constructor===lY?(qY(),e.then(e=>(XY(),e),e=>(XY(),oK(e)))):e}function KY(e){++HY,jY.echoes&&0!=--jY.echoes||(jY.echoes=jY.id=0),VY.push(bY),JY(e,!0)}function ZY(){var e=VY[VY.length-1];VY.pop(),JY(e,!1)}function JY(e,t){var r=bY;if((t?!jY.echoes||GY++&&e===bY:!GY||--GY&&e===bY)||tK(t?KY.bind(null,e):ZY),e!==bY&&(bY=e,r===_Y&&(_Y.env=QY()),uY)){var n=_Y.env.Promise,i=e.env;sY.then=i.nthen,n.prototype.then=i.gthen,(r.global||e.global)&&(Object.defineProperty(Xq,"Promise",i.PromiseProp),n.all=i.all,n.race=i.race,n.resolve=i.resolve,n.reject=i.reject,i.allSettled&&(n.allSettled=i.allSettled),i.any&&(n.any=i.any))}}function QY(){var e=Xq.Promise;return uY?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(Xq,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:sY.then,gthen:e.prototype.then}:{}}function eK(e,t,r,n,i){var s=bY;try{return JY(e,!0),t(r,n,i)}finally{JY(s,!1)}}function tK(e){aY.call(iY,e)}function rK(e,t,r,n){return"function"!=typeof e?e:function(){var i=bY;r&&qY(),JY(t,!0);try{return e.apply(this,arguments)}finally{JY(i,!1),n&&tK(XY)}}}function nK(e,t){return function(r,n){return e.call(this,rK(r,t),rK(n,t))}}-1===(""+aY).indexOf("[native code]")&&(qY=XY=XX);const iK="unhandledrejection";function sK(e,t){var r;try{r=t.onuncatched(e)}catch(Ove){}if(!1!==r)try{var n,i={promise:t,reason:e};if(Xq.document&&document.createEvent?((n=document.createEvent("Event")).initEvent(iK,!0,!0),Zq(n,i)):Xq.CustomEvent&&Zq(n=new CustomEvent(iK,{detail:i}),i),n&&Xq.dispatchEvent&&(dispatchEvent(n),!Xq.PromiseRejectionEvent&&Xq.onunhandledrejection))try{Xq.onunhandledrejection(n)}catch(Ove){}PX&&n&&!n.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch(Ove){}}var oK=SY.reject;function aK(e,t,r,n){if(e.idbdb&&(e._state.openComplete||bY.letThrough||e._vip)){var i=e._createTransaction(t,r,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(i){return i.name===GX.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>aK(e,t,r,n))):oK(i)}return i._promise(t,(e,t)=>WY(()=>(bY.trans=i,n(e,t,i)))).then(e=>i._completion.then(()=>e))}if(e._state.openComplete)return oK(new $X.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return oK(new $X.DatabaseClosed);e.open().catch(XX)}return e._state.dbReadyPromise.then(()=>aK(e,t,r,n))}const lK="3.2.7",uK=String.fromCharCode(65535),cK=-1/0,dK="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",hK="String expected.",fK=[],pK="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),mK=pK,gK=pK,yK=e=>!/(dexie\.js|dexie\.min\.js)/.test(e),vK="__dbnames",_K="readonly",bK="readwrite";function wK(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const xK={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function EK(e){return"string"!=typeof e||/\./.test(e)?e=>e:t=>(void 0===t[e]&&e in t&&delete(t=wX(t))[e],t)}class SK{_trans(e,t,r){const n=this._tx||bY.trans,i=this.name;function s(e,r,n){if(!n.schema[i])throw new $X.NotFound("Table "+i+" not part of transaction");return t(n.idbtrans,n)}const o=IY();try{return n&&n.db===this.db?n===bY.trans?n._promise(e,s,r):WY(()=>n._promise(e,s,r),{trans:n,transless:bY.transless||bY}):aK(this.db,e,[this.name],s)}finally{o&&MY()}}get(e,t){return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",t=>this.core.get({trans:t,key:e}).then(e=>this.hook.reading.fire(e))).then(t)}where(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(Kq(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const t=Yq(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(e=>{if(e.compound&&t.every(t=>e.keyPath.indexOf(t)>=0)){for(let r=0;r<t.length;++r)if(-1===t.indexOf(e.keyPath[r]))return!1;return!0}return!1}).sort((e,t)=>e.keyPath.length-t.keyPath.length)[0];if(r&&this.db._maxKey!==uK){const n=r.keyPath.slice(0,t.length);return this.where(n).equals(n.map(t=>e[t]))}!r&&PX&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${t.join("+")}]`);const{idxByName:n}=this.schema,i=this.db._deps.indexedDB;function s(e,t){try{return 0===i.cmp(e,t)}catch(e){return!1}}const[o,a]=t.reduce(([t,r],i)=>{const o=n[i],a=e[i];return[t||o,t||!o?wK(r,o&&o.multi?e=>{const t=fX(e,i);return Kq(t)&&t.some(e=>s(a,e))}:e=>s(a,fX(e,i))):r]},[null,null]);return o?this.where(o.name).equals(e[o.keyPath]).filter(a):r?this.filter(a):this.where(t).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,Kq(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const t=t=>{if(!t)return t;const r=Object.create(e.prototype);for(var n in t)if(eX(t,n))try{r[n]=t[n]}catch(e){}return r};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e}defineClass(){return this.mapToClass(function(e){Zq(this,e)})}add(e,t){const{auto:r,keyPath:n}=this.schema.primKey;let i=e;return n&&r&&(i=EK(n)(e)),this._trans("readwrite",e=>this.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[i]})).then(e=>e.numFailures?SY.reject(e.failures[0]):e.lastResult).then(t=>{if(n)try{pX(e,n,t)}catch(e){}return t})}update(e,t){if("object"!=typeof e||Kq(e))return this.where(":id").equals(e).modify(t);{const r=fX(e,this.schema.primKey.keyPath);if(void 0===r)return oK(new $X.InvalidArgument("Given object does not contain its primary key"));try{"function"!=typeof t?Yq(t).forEach(r=>{pX(e,r,t[r])}):t(e,{value:e,primKey:r})}catch(e){}return this.where(":id").equals(r).modify(t)}}put(e,t){const{auto:r,keyPath:n}=this.schema.primKey;let i=e;return n&&r&&(i=EK(n)(e)),this._trans("readwrite",e=>this.core.mutate({trans:e,type:"put",values:[i],keys:null!=t?[t]:null})).then(e=>e.numFailures?SY.reject(e.failures[0]):e.lastResult).then(t=>{if(n)try{pX(e,n,t)}catch(e){}return t})}delete(e){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"delete",keys:[e]})).then(e=>e.numFailures?SY.reject(e.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:xK})).then(e=>e.numFailures?SY.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",t=>this.core.getMany({keys:e,trans:t}).then(e=>e.map(e=>this.hook.reading.fire(e))))}bulkAdd(e,t,r){const n=Array.isArray(t)?t:void 0,i=(r=r||(n?void 0:t))?r.allKeys:void 0;return this._trans("readwrite",t=>{const{auto:r,keyPath:s}=this.schema.primKey;if(s&&n)throw new $X.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(n&&n.length!==e.length)throw new $X.InvalidArgument("Arguments objects and keys must have the same length");const o=e.length;let a=s&&r?e.map(EK(s)):e;return this.core.mutate({trans:t,type:"add",keys:n,values:a,wantResults:i}).then(({numFailures:e,results:t,lastResult:r,failures:n})=>{if(0===e)return i?t:r;throw new VX(`${this.name}.bulkAdd(): ${e} of ${o} operations failed`,n)})})}bulkPut(e,t,r){const n=Array.isArray(t)?t:void 0,i=(r=r||(n?void 0:t))?r.allKeys:void 0;return this._trans("readwrite",t=>{const{auto:r,keyPath:s}=this.schema.primKey;if(s&&n)throw new $X.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(n&&n.length!==e.length)throw new $X.InvalidArgument("Arguments objects and keys must have the same length");const o=e.length;let a=s&&r?e.map(EK(s)):e;return this.core.mutate({trans:t,type:"put",keys:n,values:a,wantResults:i}).then(({numFailures:e,results:t,lastResult:r,failures:n})=>{if(0===e)return i?t:r;throw new VX(`${this.name}.bulkPut(): ${e} of ${o} operations failed`,n)})})}bulkDelete(e){const t=e.length;return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"delete",keys:e})).then(({numFailures:e,lastResult:r,failures:n})=>{if(0===e)return r;throw new VX(`${this.name}.bulkDelete(): ${e} of ${t} operations failed`,n)})}}function CK(e){var t={},r=function(r,n){if(n){for(var i=arguments.length,s=new Array(i-1);--i;)s[i-1]=arguments[i];return t[r].subscribe.apply(null,s),e}if("string"==typeof r)return t[r]};r.addEventType=s;for(var n=1,i=arguments.length;n<i;++n)s(arguments[n]);return r;function s(e,n,i){if("object"!=typeof e){var o;n||(n=tY),i||(i=XX);var a={subscribers:[],fire:i,subscribe:function(e){-1===a.subscribers.indexOf(e)&&(a.subscribers.push(e),a.fire=n(a.fire,e))},unsubscribe:function(e){a.subscribers=a.subscribers.filter(function(t){return t!==e}),a.fire=a.subscribers.reduce(n,i)}};return t[e]=r[e]=a,a}Yq(o=e).forEach(function(e){var t=o[e];if(Kq(t))s(e,o[e][0],o[e][1]);else{if("asap"!==t)throw new $X.InvalidArgument("Invalid event config");var r=s(e,YX,function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach(function(e){dX(function(){e.apply(null,t)})})})}})}}function AK(e,t){return iX(t).from({prototype:e}),t}function TK(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function DK(e,t){e.filter=wK(e.filter,t)}function kK(e,t,r){var n=e.replayFilter;e.replayFilter=n?()=>wK(n(),t()):t,e.justLimit=r&&!n}function PK(e,t){if(e.isPrimKey)return t.primaryKey;const r=t.getIndexByKeyPath(e.index);if(!r)throw new $X.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return r}function BK(e,t,r){const n=PK(e,t.schema);return t.openCursor({trans:r,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:n,range:e.range}})}function OK(e,t,r,n){const i=e.replayFilter?wK(e.filter,e.replayFilter()):e.filter;if(e.or){const s={},o=(e,r,n)=>{if(!i||i(r,n,e=>r.stop(e),e=>r.fail(e))){var o=r.primaryKey,a=""+o;"[object ArrayBuffer]"===a&&(a=""+new Uint8Array(o)),eX(s,a)||(s[a]=!0,t(e,r,n))}};return Promise.all([e.or._iterate(o,r),RK(BK(e,n,r),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}return RK(BK(e,n,r),wK(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function RK(e,t,r,n){var i=UY(n?(e,t,i)=>r(n(e),t,i):r);return e.then(e=>{if(e)return e.start(()=>{var r=()=>e.continue();t&&!t(e,e=>r=e,t=>{e.stop(t),r=XX},t=>{e.fail(t),r=XX})||i(e.value,e,e=>r=e),r()})})}function FK(e,t){try{const r=IK(e),n=IK(t);if(r!==n)return"Array"===r?1:"Array"===n?-1:"binary"===r?1:"binary"===n?-1:"string"===r?1:"string"===n?-1:"Date"===r?1:"Date"!==n?NaN:-1;switch(r){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(e,t){const r=e.length,n=t.length,i=r<n?r:n;for(let s=0;s<i;++s)if(e[s]!==t[s])return e[s]<t[s]?-1:1;return r===n?0:r<n?-1:1}(MK(e),MK(t));case"Array":return function(e,t){const r=e.length,n=t.length,i=r<n?r:n;for(let s=0;s<i;++s){const r=FK(e[s],t[s]);if(0!==r)return r}return r===n?0:r<n?-1:1}(e,t)}}catch(e){}return NaN}function IK(e){const t=typeof e;if("object"!==t)return t;if(ArrayBuffer.isView(e))return"binary";const r=SX(e);return"ArrayBuffer"===r?"binary":r}function MK(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class NK{_read(e,t){var r=this._ctx;return r.error?r.table._trans(null,oK.bind(null,r.error)):r.table._trans("readonly",e).then(t)}_write(e){var t=this._ctx;return t.error?t.table._trans(null,oK.bind(null,t.error)):t.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var t=this._ctx;t.algorithm=wK(t.algorithm,e)}_iterate(e,t){return OK(this._ctx,e,t,this._ctx.table.core)}clone(e){var t=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&Zq(r,e),t._ctx=r,t}raw(){return this._ctx.valueMapper=null,this}each(e){var t=this._ctx;return this._read(r=>OK(t,e,r,t.table.core))}count(e){return this._read(e=>{const t=this._ctx,r=t.table.core;if(TK(t,!0))return r.count({trans:e,query:{index:PK(t,r.schema),range:t.range}}).then(e=>Math.min(e,t.limit));var n=0;return OK(t,()=>(++n,!1),e,r).then(()=>n)}).then(e)}sortBy(e,t){const r=e.split(".").reverse(),n=r[0],i=r.length-1;function s(e,t){return t?s(e[r[t]],t-1):e[n]}var o="next"===this._ctx.dir?1:-1;function a(e,t){var r=s(e,i),n=s(t,i);return r<n?-o:r>n?o:0}return this.toArray(function(e){return e.sort(a)}).then(t)}toArray(e){return this._read(e=>{var t=this._ctx;if("next"===t.dir&&TK(t,!0)&&t.limit>0){const{valueMapper:r}=t,n=PK(t,t.table.core.schema);return t.table.core.query({trans:e,limit:t.limit,values:!0,query:{index:n,range:t.range}}).then(({result:e})=>r?e.map(r):e)}{const r=[];return OK(t,e=>r.push(e),e,t.table.core).then(()=>r)}},e)}offset(e){var t=this._ctx;return e<=0||(t.offset+=e,TK(t)?kK(t,()=>{var t=e;return(e,r)=>0===t||(1===t?(--t,!1):(r(()=>{e.advance(t),t=0}),!1))}):kK(t,()=>{var t=e;return()=>--t<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),kK(this._ctx,()=>{var t=e;return function(e,r,n){return--t<=0&&r(n),t>=0}},!0),this}until(e,t){return DK(this._ctx,function(r,n,i){return!e(r.value)||(n(i),t)}),this}first(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){var t,r;return DK(this._ctx,function(t){return e(t.value)}),t=this._ctx,r=e,t.isMatch=wK(t.isMatch,r),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,r){e(r.key,r)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,r){e(r.primaryKey,r)})}keys(e){var t=this._ctx;t.keysOnly=!t.isMatch;var r=[];return this.each(function(e,t){r.push(t.key)}).then(function(){return r}).then(e)}primaryKeys(e){var t=this._ctx;if("next"===t.dir&&TK(t,!0)&&t.limit>0)return this._read(e=>{var r=PK(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:r,range:t.range}})}).then(({result:e})=>e).then(e);t.keysOnly=!t.isMatch;var r=[];return this.each(function(e,t){r.push(t.primaryKey)}).then(function(){return r}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(e){return e[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var r={};return DK(this._ctx,function(e){var t=e.primaryKey.toString(),n=eX(r,t);return r[t]=!0,!n}),this}modify(e){var t=this._ctx;return this._write(r=>{var n;if("function"==typeof e)n=e;else{var i=Yq(e),s=i.length;n=function(t){for(var r=!1,n=0;n<s;++n){var o=i[n],a=e[o];fX(t,o)!==a&&(pX(t,o,a),r=!0)}return r}}const o=t.table.core,{outbound:a,extractKey:l}=o.schema.primaryKey,u=this.db._options.modifyChunkSize||200,c=[];let d=0;const h=[],f=(e,t)=>{const{failures:r,numFailures:n}=t;d+=e-n;for(let i of Yq(r))c.push(r[i])};return this.clone().primaryKeys().then(i=>{const s=c=>{const d=Math.min(u,i.length-c);return o.getMany({trans:r,keys:i.slice(c,c+d),cache:"immutable"}).then(h=>{const p=[],m=[],g=a?[]:null,y=[];for(let e=0;e<d;++e){const t=h[e],r={value:wX(t),primKey:i[c+e]};!1!==n.call(r,r.value,r)&&(null==r.value?y.push(i[c+e]):a||0===FK(l(t),l(r.value))?(m.push(r.value),a&&g.push(i[c+e])):(y.push(i[c+e]),p.push(r.value)))}const v=TK(t)&&t.limit===1/0&&("function"!=typeof e||e===LK)&&{index:t.index,range:t.range};return Promise.resolve(p.length>0&&o.mutate({trans:r,type:"add",values:p}).then(e=>{for(let t in e.failures)y.splice(parseInt(t),1);f(p.length,e)})).then(()=>(m.length>0||v&&"object"==typeof e)&&o.mutate({trans:r,type:"put",keys:g,values:m,criteria:v,changeSpec:"function"!=typeof e&&e}).then(e=>f(m.length,e))).then(()=>(y.length>0||v&&e===LK)&&o.mutate({trans:r,type:"delete",keys:y,criteria:v}).then(e=>f(y.length,e))).then(()=>i.length>c+d&&s(c+u))})};return s(0).then(()=>{if(c.length>0)throw new zX("Error modifying one or more objects",c,d,h);return i.length})})})}delete(){var e=this._ctx,t=e.range;return TK(e)&&(e.isPrimKey&&!gK||3===t.type)?this._write(r=>{const{primaryKey:n}=e.table.core.schema,i=t;return e.table.core.count({trans:r,query:{index:n,range:i}}).then(t=>e.table.core.mutate({trans:r,type:"deleteRange",range:i}).then(({failures:e,lastResult:r,results:n,numFailures:i})=>{if(i)throw new zX("Could not delete some values",Object.keys(e).map(t=>e[t]),t-i);return t-i}))}):this.modify(LK)}}const LK=(e,t)=>t.value=null;function UK(e,t){return e<t?-1:e===t?0:1}function jK(e,t){return e>t?-1:e===t?0:1}function zK(e,t,r){var n=e instanceof qK?new e.Collection(e):e;return n._ctx.error=r?new r(t):new TypeError(t),n}function VK(e){return new e.Collection(e,()=>WK("")).limit(0)}function GK(e,t,r,n,i,s){for(var o=Math.min(e.length,n.length),a=-1,l=0;l<o;++l){var u=t[l];if(u!==n[l])return i(e[l],r[l])<0?e.substr(0,l)+r[l]+r.substr(l+1):i(e[l],n[l])<0?e.substr(0,l)+n[l]+r.substr(l+1):a>=0?e.substr(0,a)+t[a]+r.substr(a+1):null;i(e[l],u)<0&&(a=l)}return o<n.length&&"next"===s?e+r.substr(e.length):o<e.length&&"prev"===s?e.substr(0,r.length):a<0?null:e.substr(0,a)+n[a]+r.substr(a+1)}function HK(e,t,r,n){var i,s,o,a,l,u,c,d=r.length;if(!r.every(e=>"string"==typeof e))return zK(e,hK);function h(e){i=function(e){return"next"===e?e=>e.toUpperCase():e=>e.toLowerCase()}(e),s=function(e){return"next"===e?e=>e.toLowerCase():e=>e.toUpperCase()}(e),o="next"===e?UK:jK;var t=r.map(function(e){return{lower:s(e),upper:i(e)}}).sort(function(e,t){return o(e.lower,t.lower)});a=t.map(function(e){return e.upper}),l=t.map(function(e){return e.lower}),u=e,c="next"===e?"":n}h("next");var f=new e.Collection(e,()=>$K(a[0],l[d-1]+n));f._ondirectionchange=function(e){h(e)};var p=0;return f._addAlgorithm(function(e,r,n){var i=e.key;if("string"!=typeof i)return!1;var h=s(i);if(t(h,l,p))return!0;for(var f=null,m=p;m<d;++m){var g=GK(i,h,a[m],l[m],o,u);null===g&&null===f?p=m+1:(null===f||o(f,g)>0)&&(f=g)}return r(null!==f?function(){e.continue(f+c)}:n),!1}),f}function $K(e,t,r,n){return{type:2,lower:e,upper:t,lowerOpen:r,upperOpen:n}}function WK(e){return{type:1,lower:e,upper:e}}class qK{get Collection(){return this._ctx.table.db.Collection}between(e,t,r,n){r=!1!==r,n=!0===n;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(r||n)&&(!r||!n)?VK(this):new this.Collection(this,()=>$K(e,t,!r,!n))}catch(e){return zK(this,dK)}}equals(e){return null==e?zK(this,dK):new this.Collection(this,()=>WK(e))}above(e){return null==e?zK(this,dK):new this.Collection(this,()=>$K(e,void 0,!0))}aboveOrEqual(e){return null==e?zK(this,dK):new this.Collection(this,()=>$K(e,void 0,!1))}below(e){return null==e?zK(this,dK):new this.Collection(this,()=>$K(void 0,e,!1,!0))}belowOrEqual(e){return null==e?zK(this,dK):new this.Collection(this,()=>$K(void 0,e))}startsWith(e){return"string"!=typeof e?zK(this,hK):this.between(e,e+uK,!0,!0)}startsWithIgnoreCase(e){return""===e?this.startsWith(e):HK(this,(e,t)=>0===e.indexOf(t[0]),[e],uK)}equalsIgnoreCase(e){return HK(this,(e,t)=>e===t[0],[e],"")}anyOfIgnoreCase(){var e=DX.apply(TX,arguments);return 0===e.length?VK(this):HK(this,(e,t)=>-1!==t.indexOf(e),e,"")}startsWithAnyOfIgnoreCase(){var e=DX.apply(TX,arguments);return 0===e.length?VK(this):HK(this,(e,t)=>t.some(t=>0===e.indexOf(t)),e,uK)}anyOf(){const e=DX.apply(TX,arguments);let t=this._cmp;try{e.sort(t)}catch(e){return zK(this,dK)}if(0===e.length)return VK(this);const r=new this.Collection(this,()=>$K(e[0],e[e.length-1]));r._ondirectionchange=r=>{t="next"===r?this._ascending:this._descending,e.sort(t)};let n=0;return r._addAlgorithm((r,i,s)=>{const o=r.key;for(;t(o,e[n])>0;)if(++n,n===e.length)return i(s),!1;return 0===t(o,e[n])||(i(()=>{r.continue(e[n])}),!1)}),r}notEqual(e){return this.inAnyRange([[cK,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=DX.apply(TX,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return zK(this,dK)}const t=e.reduce((e,t)=>e?e.concat([[e[e.length-1][1],t]]):[[cK,t]],null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,t){const r=this._cmp,n=this._ascending,i=this._descending,s=this._min,o=this._max;if(0===e.length)return VK(this);if(!e.every(e=>void 0!==e[0]&&void 0!==e[1]&&n(e[0],e[1])<=0))return zK(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",$X.InvalidArgument);const a=!t||!1!==t.includeLowers,l=t&&!0===t.includeUppers;let u,c=n;function d(e,t){return c(e[0],t[0])}try{u=e.reduce(function(e,t){let n=0,i=e.length;for(;n<i;++n){const i=e[n];if(r(t[0],i[1])<0&&r(t[1],i[0])>0){i[0]=s(i[0],t[0]),i[1]=o(i[1],t[1]);break}}return n===i&&e.push(t),e},[]),u.sort(d)}catch(e){return zK(this,dK)}let h=0;const f=l?e=>n(e,u[h][1])>0:e=>n(e,u[h][1])>=0,p=a?e=>i(e,u[h][0])>0:e=>i(e,u[h][0])>=0;let m=f;const g=new this.Collection(this,()=>$K(u[0][0],u[u.length-1][1],!a,!l));return g._ondirectionchange=e=>{"next"===e?(m=f,c=n):(m=p,c=i),u.sort(d)},g._addAlgorithm((e,t,r)=>{for(var i=e.key;m(i);)if(++h,h===u.length)return t(r),!1;return!!function(e){return!f(e)&&!p(e)}(i)||(0===this._cmp(i,u[h][1])||0===this._cmp(i,u[h][0])||t(()=>{c===n?e.continue(u[h][0]):e.continue(u[h][1])}),!1)}),g}startsWithAnyOf(){const e=DX.apply(TX,arguments);return e.every(e=>"string"==typeof e)?0===e.length?VK(this):this.inAnyRange(e.map(e=>[e,e+uK])):zK(this,"startsWithAnyOf() only works with strings")}}function XK(e){return UY(function(t){return YK(t),e(t.target.error),!1})}function YK(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const KK="storagemutated",ZK="x-storagemutated-1",JK=CK(null,KK);class QK{_lock(){return cX(!bY.global),++this._reculock,1!==this._reculock||bY.global||(bY.lockOwnerFor=this),this}_unlock(){if(cX(!bY.global),0==--this._reculock)for(bY.global||(bY.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{eK(e[1],e[0])}catch(e){}}return this}_locked(){return this._reculock&&bY.lockOwnerFor!==this}create(e){if(!this.mode)return this;const t=this.db.idbdb,r=this.db._state.dbOpenError;if(cX(!this.idbtrans),!e&&!t)switch(r&&r.name){case"DatabaseClosedError":throw new $X.DatabaseClosed(r);case"MissingAPIError":throw new $X.MissingAPI(r.message,r);default:throw new $X.OpenFailed(r)}if(!this.active)throw new $X.TransactionInactive;return cX(null===this._completion._state),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):t.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=UY(t=>{YK(t),this._reject(e.error)}),e.onabort=UY(t=>{YK(t),this.active&&this._reject(new $X.Abort(e.error)),this.active=!1,this.on("abort").fire(t)}),e.oncomplete=UY(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&JK.storagemutated.fire(e.mutatedParts)}),this}_promise(e,t,r){if("readwrite"===e&&"readwrite"!==this.mode)return oK(new $X.ReadOnly("Transaction is readonly"));if(!this.active)return oK(new $X.TransactionInactive);if(this._locked())return new SY((n,i)=>{this._blockedFuncs.push([()=>{this._promise(e,t,r).then(n,i)},bY])});if(r)return WY(()=>{var e=new SY((e,r)=>{this._lock();const n=t(e,r,this);n&&n.then&&n.then(e,r)});return e.finally(()=>this._unlock()),e._lib=!0,e});var n=new SY((e,r)=>{var n=t(e,r,this);n&&n.then&&n.then(e,r)});return n._lib=!0,n}_root(){return this.parent?this.parent._root():this}waitFor(e){var t=this._root();const r=SY.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then(()=>r);else{t._waitingFor=r,t._waitingQueue=[];var n=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(n.get(-1/0).onsuccess=e)}()}var i=t._waitingFor;return new SY((e,n)=>{r.then(r=>t._waitingQueue.push(UY(e.bind(null,r))),e=>t._waitingQueue.push(UY(n.bind(null,e)))).finally(()=>{t._waitingFor===i&&(t._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new $X.Abort))}table(e){const t=this._memoizedTables||(this._memoizedTables={});if(eX(t,e))return t[e];const r=this.schema[e];if(!r)throw new $X.NotFound("Table "+e+" not part of transaction");const n=new this.db.Table(e,r,this);return n.core=this.db.core.table(e),t[e]=n,n}}function eZ(e,t,r,n,i,s,o){return{name:e,keyPath:t,unique:r,multi:n,auto:i,compound:s,src:(r&&!o?"&":"")+(n?"*":"")+(i?"++":"")+tZ(t)}}function tZ(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function rZ(e,t,r){return{name:e,primKey:t,indexes:r,mappedClass:null,idxByName:hX(r,e=>[e.name,e])}}let nZ=e=>{try{return e.only([[]]),nZ=()=>[[]],[[]]}catch(e){return nZ=()=>uK,uK}};function iZ(e){return null==e?()=>{}:"string"==typeof e?function(e){return 1===e.split(".").length?t=>t[e]:t=>fX(t,e)}(e):t=>fX(t,e)}function sZ(e){return[].slice.call(e)}let oZ=0;function aZ(e){return null==e?":id":"string"==typeof e?e:`[${e.join("+")}]`}function lZ({_novip:e},t){const r=t.db,n=function(e,t,{IDBKeyRange:r,indexedDB:n},i){const s=function(e,t){return t.reduce((e,{create:t})=>({...e,...t(e)}),e)}(function(e,t,r){function n(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:r,upper:n,lowerOpen:i,upperOpen:s}=e;return void 0===r?void 0===n?null:t.upperBound(n,!!s):void 0===n?t.lowerBound(r,!!i):t.bound(r,n,!!i,!!s)}const{schema:i,hasGetAll:s}=function(e,t){const r=sZ(e.objectStoreNames);return{schema:{name:e.name,tables:r.map(e=>t.objectStore(e)).map(e=>{const{keyPath:t,autoIncrement:r}=e,n=Kq(t),i=null==t,s={},o={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:i,compound:n,keyPath:t,autoIncrement:r,unique:!0,extractKey:iZ(t)},indexes:sZ(e.indexNames).map(t=>e.index(t)).map(e=>{const{name:t,unique:r,multiEntry:n,keyPath:i}=e,o={name:t,compound:Kq(i),keyPath:i,unique:r,multiEntry:n,extractKey:iZ(i)};return s[aZ(i)]=o,o}),getIndexByKeyPath:e=>s[aZ(e)]};return s[":id"]=o.primaryKey,null!=t&&(s[aZ(t)]=o.primaryKey),o})},hasGetAll:r.length>0&&"getAll"in t.objectStore(r[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,r),o=i.tables.map(e=>function(e){const t=e.name;return{name:t,schema:e,mutate:function({trans:e,type:r,keys:i,values:s,range:o}){return new Promise((a,l)=>{a=UY(a);const u=e.objectStore(t),c=null==u.keyPath,d="put"===r||"add"===r;if(!d&&"delete"!==r&&"deleteRange"!==r)throw new Error("Invalid operation type: "+r);const{length:h}=i||s||{length:1};if(i&&s&&i.length!==s.length)throw new Error("Given keys array must have same length as given values array.");if(0===h)return a({numFailures:0,failures:{},results:[],lastResult:void 0});let f;const p=[],m=[];let g=0;const y=e=>{++g,YK(e)};if("deleteRange"===r){if(4===o.type)return a({numFailures:g,failures:m,results:[],lastResult:void 0});3===o.type?p.push(f=u.clear()):p.push(f=u.delete(n(o)))}else{const[e,t]=d?c?[s,i]:[s,null]:[i,null];if(d)for(let n=0;n<h;++n)p.push(f=t&&void 0!==t[n]?u[r](e[n],t[n]):u[r](e[n])),f.onerror=y;else for(let n=0;n<h;++n)p.push(f=u[r](e[n])),f.onerror=y}const v=e=>{const t=e.target.result;p.forEach((e,t)=>null!=e.error&&(m[t]=e.error)),a({numFailures:g,failures:m,results:"delete"===r?i:p.map(e=>e.result),lastResult:t})};f.onerror=e=>{y(e),v(e)},f.onsuccess=v})},getMany:({trans:e,keys:r})=>new Promise((n,i)=>{n=UY(n);const s=e.objectStore(t),o=r.length,a=new Array(o);let l,u=0,c=0;const d=e=>{const t=e.target;a[t._pos]=t.result,++c===u&&n(a)},h=XK(i);for(let e=0;e<o;++e)null!=r[e]&&(l=s.get(r[e]),l._pos=e,l.onsuccess=d,l.onerror=h,++u);0===u&&n(a)}),get:({trans:e,key:r})=>new Promise((n,i)=>{n=UY(n);const s=e.objectStore(t).get(r);s.onsuccess=e=>n(e.target.result),s.onerror=XK(i)}),query:function(e){return r=>new Promise((i,s)=>{i=UY(i);const{trans:o,values:a,limit:l,query:u}=r,c=l===1/0?void 0:l,{index:d,range:h}=u,f=o.objectStore(t),p=d.isPrimaryKey?f:f.index(d.name),m=n(h);if(0===l)return i({result:[]});if(e){const e=a?p.getAll(m,c):p.getAllKeys(m,c);e.onsuccess=e=>i({result:e.target.result}),e.onerror=XK(s)}else{let e=0;const t=a||!("openKeyCursor"in p)?p.openCursor(m):p.openKeyCursor(m),r=[];t.onsuccess=n=>{const s=t.result;return s?(r.push(a?s.value:s.primaryKey),++e===l?i({result:r}):void s.continue()):i({result:r})},t.onerror=XK(s)}})}(s),openCursor:function({trans:e,values:r,query:i,reverse:s,unique:o}){return new Promise((a,l)=>{a=UY(a);const{index:u,range:c}=i,d=e.objectStore(t),h=u.isPrimaryKey?d:d.index(u.name),f=s?o?"prevunique":"prev":o?"nextunique":"next",p=r||!("openKeyCursor"in h)?h.openCursor(n(c),f):h.openKeyCursor(n(c),f);p.onerror=XK(l),p.onsuccess=UY(t=>{const r=p.result;if(!r)return void a(null);r.___id=++oZ,r.done=!1;const n=r.continue.bind(r);let i=r.continuePrimaryKey;i&&(i=i.bind(r));const s=r.advance.bind(r),o=()=>{throw new Error("Cursor not stopped")};r.trans=e,r.stop=r.continue=r.continuePrimaryKey=r.advance=()=>{throw new Error("Cursor not started")},r.fail=UY(l),r.next=function(){let e=1;return this.start(()=>e--?this.continue():this.stop()).then(()=>this)},r.start=e=>{const t=new Promise((e,t)=>{e=UY(e),p.onerror=XK(t),r.fail=t,r.stop=t=>{r.stop=r.continue=r.continuePrimaryKey=r.advance=o,e(t)}}),a=()=>{if(p.result)try{e()}catch(e){r.fail(e)}else r.done=!0,r.start=()=>{throw new Error("Cursor behind last entry")},r.stop()};return p.onsuccess=UY(e=>{p.onsuccess=a,a()}),r.continue=n,r.continuePrimaryKey=i,r.advance=s,a(),t},a(r)},l)})},count({query:e,trans:r}){const{index:i,range:s}=e;return new Promise((e,o)=>{const a=r.objectStore(t),l=i.isPrimaryKey?a:a.index(i.name),u=n(s),c=u?l.count(u):l.count();c.onsuccess=UY(t=>e(t.target.result)),c.onerror=XK(o)})}}}(e)),a={};return o.forEach(e=>a[e.name]=e),{stack:"dbcore",transaction:e.transaction.bind(e),table(e){if(!a[e])throw new Error(`Table '${e}' not found`);return a[e]},MIN_KEY:-1/0,MAX_KEY:nZ(t),schema:i}}(t,r,i),e.dbcore);return{dbcore:s}}(e._middlewares,r,e._deps,t);e.core=n.dbcore,e.tables.forEach(t=>{const r=t.name;e.core.schema.tables.some(e=>e.name===r)&&(t.core=e.core.table(r),e[r]instanceof e.Table&&(e[r].core=t.core))})}function uZ({_novip:e},t,r,n){r.forEach(r=>{const i=n[r];t.forEach(t=>{const n=oX(t,r);(!n||"value"in n&&void 0===n.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?nX(t,r,{get(){return this.table(r)},set(e){rX(this,r,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[r]=new e.Table(r,i))})})}function cZ({_novip:e},t){t.forEach(t=>{for(let r in t)t[r]instanceof e.Table&&delete t[r]})}function dZ(e,t){return e._cfg.version-t._cfg.version}function hZ(e,t){const r={del:[],add:[],change:[]};let n;for(n in e)t[n]||r.del.push(n);for(n in t){const i=e[n],s=t[n];if(i){const e={name:n,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto&&!pK)e.recreate=!0,r.change.push(e);else{const t=i.idxByName,n=s.idxByName;let o;for(o in t)n[o]||e.del.push(o);for(o in n){const r=t[o],i=n[o];r?r.src!==i.src&&e.change.push(i):e.add.push(i)}(e.del.length>0||e.add.length>0||e.change.length>0)&&r.change.push(e)}}else r.add.push([n,s])}return r}function fZ(e,t,r,n){const i=e.db.createObjectStore(t,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});return n.forEach(e=>pZ(i,e)),i}function pZ(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function mZ(e,t,r){const n={};return lX(t.objectStoreNames,0).forEach(e=>{const t=r.objectStore(e);let i=t.keyPath;const s=eZ(tZ(i),i||"",!1,!1,!!t.autoIncrement,i&&"string"!=typeof i,!0),o=[];for(let r=0;r<t.indexNames.length;++r){const e=t.index(t.indexNames[r]);i=e.keyPath;var a=eZ(e.name,i,!!e.unique,!!e.multiEntry,!1,i&&"string"!=typeof i,!1);o.push(a)}n[e]=rZ(e,s,o)}),n}function gZ({_novip:e},t,r){const n=r.db.objectStoreNames;for(let i=0;i<n.length;++i){const s=n[i],o=r.objectStore(s);e._hasGetAll="getAll"in o;for(let e=0;e<o.indexNames.length;++e){const r=o.indexNames[e],n=o.index(r).keyPath,i="string"==typeof n?n:"["+lX(n).join("+")+"]";if(t[s]){const e=t[s].idxByName[i];e&&(e.name=r,delete t[s].idxByName[i],t[s].idxByName[r]=e)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Xq.WorkerGlobalScope&&Xq instanceof Xq.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}class yZ{_parseStoresSpec(e,t){Yq(e).forEach(r=>{if(null!==e[r]){var n=e[r].split(",").map((e,t)=>{const r=(e=e.trim()).replace(/([&*]|\+\+)/g,""),n=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return eZ(r,n||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),Kq(n),0===t)}),i=n.shift();if(i.multi)throw new $X.Schema("Primary key cannot be multi-valued");n.forEach(e=>{if(e.auto)throw new $X.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new $X.Schema("Index must have a name and cannot be an empty string")}),t[r]=rZ(r,i,n)}})}stores(e){const t=this.db;this._cfg.storesSource=this._cfg.storesSource?Zq(this._cfg.storesSource,e):e;const r=t._versions,n={};let i={};return r.forEach(e=>{Zq(n,e._cfg.storesSource),i=e._cfg.dbschema={},e._parseStoresSpec(n,i)}),t._dbSchema=i,cZ(t,[t._allTables,t,t.Transaction.prototype]),uZ(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],Yq(i),i),t._storeNames=Yq(i),this}upgrade(e){return this._cfg.contentUpgrade=rY(this._cfg.contentUpgrade||XX,e),this}}function vZ(e,t){let r=e._dbNamesDB;return r||(r=e._dbNamesDB=new jZ(vK,{addons:[],indexedDB:e,IDBKeyRange:t}),r.version(1).stores({dbnames:"name"})),r.table("dbnames")}function _Z(e){return e&&"function"==typeof e.databases}function bZ(e){return WY(function(){return bY.letThrough=!0,e()})}function wZ(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(t){var r=function(){return indexedDB.databases().finally(t)};e=setInterval(r,100),r()}).finally(function(){return clearInterval(e)}):Promise.resolve()}function xZ(e){const t=e._state,{indexedDB:r}=e._deps;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(()=>t.dbOpenError?oK(t.dbOpenError):e);PX&&(t.openCanceller._stackHolder=FX()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;const n=t.openCanceller;function i(){if(t.openCanceller!==n)throw new $X.DatabaseClosed("db.open() was cancelled")}let s=t.dbReadyResolve,o=null,a=!1;const l=()=>new SY((n,s)=>{if(i(),!r)throw new $X.MissingAPI;const l=e.name,u=t.autoSchema?r.open(l):r.open(l,Math.round(10*e.verno));if(!u)throw new $X.MissingAPI;u.onerror=XK(s),u.onblocked=UY(e._fireOnBlocked),u.onupgradeneeded=UY(n=>{if(o=u.transaction,t.autoSchema&&!e._options.allowEmptyDB){u.onerror=YK,o.abort(),u.result.close();const e=r.deleteDatabase(l);e.onsuccess=e.onerror=UY(()=>{s(new $X.NoSuchDatabase(`Database ${l} doesnt exist`))})}else{o.onerror=XK(s);var i=n.oldVersion>Math.pow(2,62)?0:n.oldVersion;a=i<1,e._novip.idbdb=u.result,function(e,t,r,n){const i=e._dbSchema,s=e._createTransaction("readwrite",e._storeNames,i);s.create(r),s._completion.catch(n);const o=s._reject.bind(s),a=bY.transless||bY;WY(()=>{bY.trans=s,bY.transless=a,0===t?(Yq(i).forEach(e=>{fZ(r,e,i[e].primKey,i[e].indexes)}),lZ(e,r),SY.follow(()=>e.on.populate.fire(s)).catch(o)):function({_novip:e},t,r,n){const i=[],s=e._versions;let o=e._dbSchema=mZ(0,e.idbdb,n),a=!1;const l=s.filter(e=>e._cfg.version>=t);return l.forEach(s=>{i.push(()=>{const i=o,l=s._cfg.dbschema;gZ(e,i,n),gZ(e,l,n),o=e._dbSchema=l;const u=hZ(i,l);u.add.forEach(e=>{fZ(n,e[0],e[1].primKey,e[1].indexes)}),u.change.forEach(e=>{if(e.recreate)throw new $X.Upgrade("Not yet support for changing primary key");{const t=n.objectStore(e.name);e.add.forEach(e=>pZ(t,e)),e.change.forEach(e=>{t.deleteIndex(e.name),pZ(t,e)}),e.del.forEach(e=>t.deleteIndex(e))}});const c=s._cfg.contentUpgrade;if(c&&s._cfg.version>t){lZ(e,n),r._memoizedTables={},a=!0;let t=mX(l);u.del.forEach(e=>{t[e]=i[e]}),cZ(e,[e.Transaction.prototype]),uZ(e,[e.Transaction.prototype],Yq(t),t),r.schema=t;const s=kX(c);let o;s&&qY();const d=SY.follow(()=>{if(o=c(r),o&&s){var e=XY.bind(null,null);o.then(e,e)}});return o&&"function"==typeof o.then?SY.resolve(o):d.then(()=>o)}}),i.push(t=>{a&&mK||function(e,t){[].slice.call(t.db.objectStoreNames).forEach(r=>null==e[r]&&t.db.deleteObjectStore(r))}(s._cfg.dbschema,t),cZ(e,[e.Transaction.prototype]),uZ(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),r.schema=e._dbSchema})}),function e(){return i.length?SY.resolve(i.shift()(r.idbtrans)).then(e):SY.resolve()}().then(()=>{var e,t;t=n,Yq(e=o).forEach(r=>{t.db.objectStoreNames.contains(r)||fZ(t,r,e[r].primKey,e[r].indexes)})})}(e,t,s,r).catch(o)})}(e,i/10,o,s)}},s),u.onsuccess=UY(()=>{o=null;const r=e._novip.idbdb=u.result,i=lX(r.objectStoreNames);if(i.length>0)try{const n=r.transaction(1===(s=i).length?s[0]:s,"readonly");t.autoSchema?function({_novip:e},t,r){e.verno=t.version/10;const n=e._dbSchema=mZ(0,t,r);e._storeNames=lX(t.objectStoreNames,0),uZ(e,[e._allTables],Yq(n),n)}(e,r,n):(gZ(e,e._dbSchema,n),function(e,t){const r=hZ(mZ(0,e.idbdb,t),e._dbSchema);return!(r.add.length||r.change.some(e=>e.add.length||e.change.length))}(e,n)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),lZ(e,n)}catch(e){}var s;fK.push(e),r.onversionchange=UY(r=>{t.vcFired=!0,e.on("versionchange").fire(r)}),r.onclose=UY(t=>{e.on("close").fire(t)}),a&&function({indexedDB:e,IDBKeyRange:t},r){!_Z(e)&&r!==vK&&vZ(e,t).put({name:r}).catch(XX)}(e._deps,l),n()},s)}).catch(e=>e&&"UnknownError"===e.name&&t.PR1398_maxLoop>0?(t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),l()):SY.reject(e));return SY.race([n,("undefined"==typeof navigator?SY.resolve():wZ()).then(l)]).then(()=>(i(),t.onReadyBeingFired=[],SY.resolve(bZ(()=>e.on.ready.fire(e.vip))).then(function r(){if(t.onReadyBeingFired.length>0){let n=t.onReadyBeingFired.reduce(rY,XX);return t.onReadyBeingFired=[],SY.resolve(bZ(()=>n(e.vip))).then(r)}}))).finally(()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(()=>e).catch(r=>{t.dbOpenError=r;try{o&&o.abort()}catch(e){}return n===t.openCanceller&&e._close(),oK(r)}).finally(()=>{t.openComplete=!0,s()})}function EZ(e){var t=t=>e.next(t),r=i(t),n=i(t=>e.throw(t));function i(e){return t=>{var i=e(t),s=i.value;return i.done?s:s&&"function"==typeof s.then?s.then(r,n):Kq(s)?Promise.all(s).then(r,n):r(s)}}return i(t)()}function SZ(e,t,r){var n=arguments.length;if(n<2)throw new $X.InvalidArgument("Too few arguments");for(var i=new Array(n-1);--n;)i[n-1]=arguments[n];return r=i.pop(),[e,yX(i),r]}function CZ(e,t,r,n,i){return SY.resolve().then(()=>{const s=bY.transless||bY,o=e._createTransaction(t,r,e._dbSchema,n),a={trans:o,transless:s};if(n)o.idbtrans=n.idbtrans;else try{o.create(),e._state.PR1398_maxLoop=3}catch(n){return n.name===GX.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>CZ(e,t,r,null,i))):oK(n)}const l=kX(i);let u;l&&qY();const c=SY.follow(()=>{if(u=i.call(o,o),u)if(l){var e=XY.bind(null,null);u.then(e,e)}else"function"==typeof u.next&&"function"==typeof u.throw&&(u=EZ(u))},a);return(u&&"function"==typeof u.then?SY.resolve(u).then(e=>o.active?e:oK(new $X.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):c.then(()=>u)).then(e=>(n&&o._resolve(),o._completion.then(()=>e))).catch(e=>(o._reject(e),oK(e)))})}function AZ(e,t,r){const n=Kq(e)?e.slice():[e];for(let i=0;i<r;++i)n.push(t);return n}const TZ={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(t){const r=e.table(t),{schema:n}=r,i={},s=[];function o(e,t,r){const n=aZ(e),a=i[n]=i[n]||[],l=null==e?0:"string"==typeof e?1:e.length,u=t>0,c={...r,isVirtual:u,keyTail:t,keyLength:l,extractKey:iZ(e),unique:!u&&r.unique};return a.push(c),c.isPrimaryKey||s.push(c),l>1&&o(2===l?e[0]:e.slice(0,l-1),t+1,r),a.sort((e,t)=>e.keyTail-t.keyTail),c}const a=o(n.primaryKey.keyPath,0,n.primaryKey);i[":id"]=[a];for(const e of n.indexes)o(e.keyPath,0,e);function l(t){const r=t.query.index;return r.isVirtual?{...t,query:{index:r,range:(n=t.query.range,i=r.keyTail,{type:1===n.type?2:n.type,lower:AZ(n.lower,n.lowerOpen?e.MAX_KEY:e.MIN_KEY,i),lowerOpen:!0,upper:AZ(n.upper,n.upperOpen?e.MIN_KEY:e.MAX_KEY,i),upperOpen:!0})}}:t;var n,i}const u={...r,schema:{...n,primaryKey:a,indexes:s,getIndexByKeyPath:function(e){const t=i[aZ(e)];return t&&t[0]}},count:e=>r.count(l(e)),query:e=>r.query(l(e)),openCursor(t){const{keyTail:n,isVirtual:i,keyLength:s}=t.query.index;return i?r.openCursor(l(t)).then(r=>r&&function(r){const i=Object.create(r,{continue:{value:function(i){null!=i?r.continue(AZ(i,t.reverse?e.MAX_KEY:e.MIN_KEY,n)):t.unique?r.continue(r.key.slice(0,s).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,n)):r.continue()}},continuePrimaryKey:{value(t,i){r.continuePrimaryKey(AZ(t,e.MAX_KEY,n),i)}},primaryKey:{get:()=>r.primaryKey},key:{get(){const e=r.key;return 1===s?e[0]:e.slice(0,s)}},value:{get:()=>r.value}});return i}(r)):r.openCursor(t)}};return u}}}};function DZ(e,t,r,n){return r=r||{},n=n||"",Yq(e).forEach(i=>{if(eX(t,i)){var s=e[i],o=t[i];if("object"==typeof s&&"object"==typeof o&&s&&o){const e=SX(s);e!==SX(o)?r[n+i]=t[i]:"Object"===e?DZ(s,o,r,n+i+"."):s!==o&&(r[n+i]=t[i])}else s!==o&&(r[n+i]=t[i])}else r[n+i]=void 0}),Yq(t).forEach(i=>{eX(e,i)||(r[n+i]=t[i])}),r}const kZ={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(t){const r=e.table(t),{primaryKey:n}=r.schema,i={...r,mutate(e){const i=bY.trans,{deleting:s,creating:o,updating:a}=i.table(t).hook;switch(e.type){case"add":if(o.fire===XX)break;return i._promise("readwrite",()=>l(e),!0);case"put":if(o.fire===XX&&a.fire===XX)break;return i._promise("readwrite",()=>l(e),!0);case"delete":if(s.fire===XX)break;return i._promise("readwrite",()=>l(e),!0);case"deleteRange":if(s.fire===XX)break;return i._promise("readwrite",()=>function(e){return u(e.trans,e.range,1e4)}(e),!0)}return r.mutate(e);function l(e){const t=bY.trans,i=e.keys||function(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}(n,e);if(!i)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?{...e,keys:i}:{...e}).type&&(e.values=[...e.values]),e.keys&&(e.keys=[...e.keys]),function(e,t,r){return"add"===t.type?Promise.resolve([]):e.getMany({trans:t.trans,keys:r,cache:"immutable"})}(r,e,i).then(l=>{const u=i.map((r,i)=>{const u=l[i],c={onerror:null,onsuccess:null};if("delete"===e.type)s.fire.call(c,r,u,t);else if("add"===e.type||void 0===u){const s=o.fire.call(c,r,e.values[i],t);null==r&&null!=s&&(r=s,e.keys[i]=r,n.outbound||pX(e.values[i],n.keyPath,r))}else{const n=DZ(u,e.values[i]),s=a.fire.call(c,n,r,u,t);if(s){const t=e.values[i];Object.keys(s).forEach(e=>{eX(t,e)?t[e]=s[e]:pX(t,e,s[e])})}}return c});return r.mutate(e).then(({failures:t,results:r,numFailures:n,lastResult:s})=>{for(let o=0;o<i.length;++o){const n=r?r[o]:i[o],s=u[o];null==n?s.onerror&&s.onerror(t[o]):s.onsuccess&&s.onsuccess("put"===e.type&&l[o]?e.values[o]:n)}return{failures:t,results:r,numFailures:n,lastResult:s}}).catch(e=>(u.forEach(t=>t.onerror&&t.onerror(e)),Promise.reject(e)))})}function u(e,t,i){return r.query({trans:e,values:!1,query:{index:n,range:t},limit:i}).then(({result:r})=>l({type:"delete",keys:r,trans:e}).then(n=>n.numFailures>0?Promise.reject(n.failures[0]):r.length<i?{failures:[],numFailures:0,lastResult:void 0}:u(e,{...t,lower:r[r.length-1],lowerOpen:!0},i)))}}};return i}})};function PZ(e,t,r){try{if(!t)return null;if(t.keys.length<e.length)return null;const n=[];for(let i=0,s=0;i<t.keys.length&&s<e.length;++i)0===FK(t.keys[i],e[s])&&(n.push(r?wX(t.values[i]):t.values[i]),++s);return n.length===e.length?n:null}catch(e){return null}}const BZ={stack:"dbcore",level:-1,create:e=>({table:t=>{const r=e.table(t);return{...r,getMany:e=>{if(!e.cache)return r.getMany(e);const t=PZ(e.keys,e.trans._cache,"clone"===e.cache);return t?SY.resolve(t):r.getMany(e).then(t=>(e.trans._cache={keys:e.keys,values:"clone"===e.cache?wX(t):t},t))},mutate:e=>("add"!==e.type&&(e.trans._cache=null),r.mutate(e))}}})};function OZ(e){return!("from"in e)}const RZ=function(e,t){if(!this){const t=new RZ;return e&&"d"in e&&Zq(t,e),t}Zq(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function FZ(e,t,r){const n=FK(t,r);if(isNaN(n))return;if(n>0)throw RangeError();if(OZ(e))return Zq(e,{from:t,to:r,d:1});const i=e.l,s=e.r;if(FK(r,e.from)<0)return i?FZ(i,t,r):e.l={from:t,to:r,d:1,l:null,r:null},NZ(e);if(FK(t,e.to)>0)return s?FZ(s,t,r):e.r={from:t,to:r,d:1,l:null,r:null},NZ(e);FK(t,e.from)<0&&(e.from=t,e.l=null,e.d=s?s.d+1:1),FK(r,e.to)>0&&(e.to=r,e.r=null,e.d=e.l?e.l.d+1:1);const o=!e.r;i&&!e.l&&IZ(e,i),s&&o&&IZ(e,s)}function IZ(e,t){OZ(t)||function e(t,{from:r,to:n,l:i,r:s}){FZ(t,r,n),i&&e(t,i),s&&e(t,s)}(e,t)}function MZ(e){let t=OZ(e)?null:{s:0,n:e};return{next(e){const r=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&FK(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||FK(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function NZ(e){var t,r;const n=((null===(t=e.r)||void 0===t?void 0:t.d)||0)-((null===(r=e.l)||void 0===r?void 0:r.d)||0),i=n>1?"r":n<-1?"l":"";if(i){const t="r"===i?"l":"r",r={...e},n=e[i];e.from=n.from,e.to=n.to,e[i]=n[i],r[i]=n[t],e[t]=r,r.d=LZ(r)}e.d=LZ(e)}function LZ({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}tX(RZ.prototype,{add(e){return IZ(this,e),this},addKey(e){return FZ(this,e,e),this},addKeys(e){return e.forEach(e=>FZ(this,e,e)),this},[CX](){return MZ(this)}});const UZ={stack:"dbcore",level:0,create:e=>{const t=e.schema.name,r=new RZ(e.MIN_KEY,e.MAX_KEY);return{...e,table:n=>{const i=e.table(n),{schema:s}=i,{primaryKey:o}=s,{extractKey:a,outbound:l}=o,u={...i,mutate:e=>{const o=e.trans,a=o.mutatedParts||(o.mutatedParts={}),l=e=>{const r=`idb://${t}/${n}/${e}`;return a[r]||(a[r]=new RZ)},u=l(""),c=l(":dels"),{type:d}=e;let[h,f]="deleteRange"===e.type?[e.range]:"delete"===e.type?[e.keys]:e.values.length<50?[[],e.values]:[];const p=e.trans._cache;return i.mutate(e).then(e=>{if(Kq(h)){"delete"!==d&&(h=e.results),u.addKeys(h);const t=PZ(h,p);t||"add"===d||c.addKeys(h),(t||f)&&function(e,t,r,n){t.indexes.forEach(function(t){const i=e(t.name||"");function s(e){return null!=e?t.extractKey(e):null}const o=e=>t.multiEntry&&Kq(e)?e.forEach(e=>i.addKey(e)):i.addKey(e);(r||n).forEach((e,t)=>{const i=r&&s(r[t]),a=n&&s(n[t]);0!==FK(i,a)&&(null!=i&&o(i),null!=a&&o(a))})})}(l,s,t,f)}else if(h){const e={from:h.lower,to:h.upper};c.add(e),u.add(e)}else u.add(r),c.add(r),s.indexes.forEach(e=>l(e.name).add(r));return e})}},c=({query:{index:t,range:r}})=>{var n,i;return[t,new RZ(null!==(n=r.lower)&&void 0!==n?n:e.MIN_KEY,null!==(i=r.upper)&&void 0!==i?i:e.MAX_KEY)]},d={get:e=>[o,new RZ(e.key)],getMany:e=>[o,(new RZ).addKeys(e.keys)],count:c,query:c,openCursor:c};return Yq(d).forEach(e=>{u[e]=function(s){const{subscr:o}=bY;if(o){const u=e=>{const r=`idb://${t}/${n}/${e}`;return o[r]||(o[r]=new RZ)},c=u(""),h=u(":dels"),[f,p]=d[e](s);if(u(f.name||"").add(p),!f.isPrimaryKey){if("count"!==e){const t="query"===e&&l&&s.values&&i.query({...s,values:!1});return i[e].apply(this,arguments).then(r=>{if("query"===e){if(l&&s.values)return t.then(({result:e})=>(c.addKeys(e),r));const e=s.values?r.result.map(a):r.result;s.values?c.addKeys(e):h.addKeys(e)}else if("openCursor"===e){const e=r,t=s.values;return e&&Object.create(e,{key:{get:()=>(h.addKey(e.primaryKey),e.key)},primaryKey:{get(){const t=e.primaryKey;return h.addKey(t),t}},value:{get:()=>(t&&c.addKey(e.primaryKey),e.value)}})}return r})}h.add(r)}}return i[e].apply(this,arguments)}}),u}}}};class jZ{constructor(e,t){this._middlewares={},this.verno=0;const r=jZ.dependencies;this._options=t={addons:jZ.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...t},this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};const{addons:n}=t;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const i={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:XX,dbReadyPromise:null,cancelOpen:XX,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var s;i.dbReadyPromise=new SY(e=>{i.dbReadyResolve=e}),i.openCanceller=new SY((e,t)=>{i.cancelOpen=t}),this._state=i,this.name=e,this.on=CK(this,"populate","blocked","versionchange","close",{ready:[rY,XX]}),this.on.ready.subscribe=uX(this.on.ready.subscribe,e=>(t,r)=>{jZ.vip(()=>{const n=this._state;if(n.openComplete)n.dbOpenError||SY.resolve().then(t),r&&e(t);else if(n.onReadyBeingFired)n.onReadyBeingFired.push(t),r&&e(t);else{e(t);const n=this;r||e(function e(){n.on.ready.unsubscribe(t),n.on.ready.unsubscribe(e)})}})}),this.Collection=(s=this,AK(NK.prototype,function(e,t){this.db=s;let r=xK,n=null;if(t)try{r=t()}catch(e){n=e}const i=e._ctx,o=i.table,a=o.hook.reading.fire;this._ctx={table:o,index:i.index,isPrimKey:!i.index||o.schema.primKey.keyPath&&i.index===o.schema.primKey.name,range:r,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:n,or:i.or,valueMapper:a!==YX?a:null}})),this.Table=function(e){return AK(SK.prototype,function(t,r,n){this.db=e,this._tx=n,this.name=t,this.schema=r,this.hook=e._allTables[t]?e._allTables[t].hook:CK(null,{creating:[JX,XX],reading:[KX,YX],updating:[eY,XX],deleting:[QX,XX]})})}(this),this.Transaction=function(e){return AK(QK.prototype,function(t,r,n,i,s){this.db=e,this.mode=t,this.storeNames=r,this.schema=n,this.chromeTransactionDurability=i,this.idbtrans=null,this.on=CK(this,"complete","error","abort"),this.parent=s||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new SY((e,t)=>{this._resolve=e,this._reject=t}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},e=>{var t=this.active;return this.active=!1,this.on.error.fire(e),this.parent?this.parent._reject(e):t&&this.idbtrans&&this.idbtrans.abort(),oK(e)})})}(this),this.Version=function(e){return AK(yZ.prototype,function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(e){return AK(qK.prototype,function(t,r,n){this.db=e,this._ctx={table:t,index:":id"===r?null:r,or:n};const i=e._deps.indexedDB;if(!i)throw new $X.MissingAPI;this._cmp=this._ascending=i.cmp.bind(i),this._descending=(e,t)=>i.cmp(t,e),this._max=(e,t)=>i.cmp(e,t)>0?e:t,this._min=(e,t)=>i.cmp(e,t)<0?e:t,this._IDBKeyRange=e._deps.IDBKeyRange})}(this),this.on("versionchange",e=>{e.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",e=>{!e.newVersion||e.newVersion<e.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${e.oldVersion/10}`)}),this._maxKey=nZ(t.IDBKeyRange),this._createTransaction=(e,t,r,n)=>new this.Transaction(e,t,r,this._options.chromeTransactionDurability,n),this._fireOnBlocked=e=>{this.on("blocked").fire(e),fK.filter(e=>e.name===this.name&&e!==this&&!e._state.vcFired).map(t=>t.on("versionchange").fire(e))},this.use(TZ),this.use(kZ),this.use(UZ),this.use(BZ),this.vip=Object.create(this,{_vip:{value:!0}}),n.forEach(e=>e(this))}version(e){if(isNaN(e)||e<.1)throw new $X.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new $X.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const t=this._versions;var r=t.filter(t=>t._cfg.version===e)[0];return r||(r=new this.Version(e),t.push(r),t.sort(dZ),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(e){return this.idbdb&&(this._state.openComplete||bY.letThrough||this._vip)?e():new SY((e,t)=>{if(this._state.openComplete)return t(new $X.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void t(new $X.DatabaseClosed);this.open().catch(XX)}this._state.dbReadyPromise.then(e,t)}).then(e)}use({stack:e,create:t,level:r,name:n}){n&&this.unuse({stack:e,name:n});const i=this._middlewares[e]||(this._middlewares[e]=[]);return i.push({stack:e,create:t,level:null==r?10:r,name:n}),i.sort((e,t)=>e.level-t.level),this}unuse({stack:e,name:t,create:r}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(e=>r?e.create!==r:!!t&&e.name!==t)),this}open(){return xZ(this)}_close(){const e=this._state,t=fK.indexOf(this);if(t>=0&&fK.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this._novip.idbdb=null}e.dbReadyPromise=new SY(t=>{e.dbReadyResolve=t}),e.openCanceller=new SY((t,r)=>{e.cancelOpen=r})}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new $X.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,t=this._state;return new SY((r,n)=>{const i=()=>{this.close();var e=this._deps.indexedDB.deleteDatabase(this.name);e.onsuccess=UY(()=>{!function({indexedDB:e,IDBKeyRange:t},r){!_Z(e)&&r!==vK&&vZ(e,t).delete(r).catch(XX)}(this._deps,this.name),r()}),e.onerror=XK(n),e.onblocked=this._fireOnBlocked};if(e)throw new $X.InvalidArgument("Arguments not allowed in db.delete()");t.isBeingOpened?t.dbReadyPromise.then(i):i()})}backendDB(){return this.idbdb}isOpen(){return null!==this.idbdb}hasBeenClosed(){const e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name}hasFailed(){return null!==this._state.dbOpenError}dynamicallyOpened(){return this._state.autoSchema}get tables(){return Yq(this._allTables).map(e=>this._allTables[e])}transaction(){const e=SZ.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,t,r){let n=bY.trans;n&&n.db===this&&-1===e.indexOf("!")||(n=null);const i=-1!==e.indexOf("?");let s,o;e=e.replace("!","").replace("?","");try{if(o=t.map(e=>{var t=e instanceof this.Table?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t}),"r"==e||e===_K)s=_K;else{if("rw"!=e&&e!=bK)throw new $X.InvalidArgument("Invalid transaction mode: "+e);s=bK}if(n){if(n.mode===_K&&s===bK){if(!i)throw new $X.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");n=null}n&&o.forEach(e=>{if(n&&-1===n.storeNames.indexOf(e)){if(!i)throw new $X.SubTransaction("Table "+e+" not included in parent transaction.");n=null}}),i&&n&&!n.active&&(n=null)}}catch(e){return n?n._promise(null,(t,r)=>{r(e)}):oK(e)}const a=CZ.bind(null,this,s,o,n,r);return n?n._promise(s,a,"lock"):bY.trans?eK(bY.transless,()=>this._whenReady(a)):this._whenReady(a)}table(e){if(!eX(this._allTables,e))throw new $X.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}e("br",jZ);const zZ="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable";class VZ{constructor(e){this._subscribe=e}subscribe(e,t,r){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:r})}[zZ](){return this}}function GZ(e,t){return Yq(t).forEach(r=>{IZ(e[r]||(e[r]=new RZ),t[r])}),e}function HZ(e){let t,r=!1;const n=new VZ(n=>{const i=kX(e);let s=!1,o={},a={};const l={get closed(){return s},unsubscribe:()=>{s=!0,JK.storagemutated.unsubscribe(h)}};n.start&&n.start(l);let u=!1,c=!1;function d(){return Yq(a).some(e=>o[e]&&function(e,t){const r=MZ(t);let n=r.next();if(n.done)return!1;let i=n.value;const s=MZ(e);let o=s.next(i.from),a=o.value;for(;!n.done&&!o.done;){if(FK(a.from,i.to)<=0&&FK(a.to,i.from)>=0)return!0;FK(i.from,a.from)<0?i=(n=r.next(a.from)).value:a=(o=s.next(i.from)).value}return!1}(o[e],a[e]))}const h=e=>{GZ(o,e),d()&&f()},f=()=>{if(u||s)return;o={};const p={},m=function(t){i&&qY();const r=()=>WY(e,{subscr:t,trans:null}),n=bY.trans?eK(bY.transless,r):r();return i&&n.then(XY,XY),n}(p);c||(JK(KK,h),c=!0),u=!0,Promise.resolve(m).then(e=>{r=!0,t=e,u=!1,s||(d()?f():(o={},a=p,n.next&&n.next(e)))},e=>{u=!1,r=!1,n.error&&n.error(e),l.unsubscribe()})};return f(),l});return n.hasValue=()=>r,n.getValue=()=>t,n}let $Z;try{$Z={indexedDB:Xq.indexedDB||Xq.mozIndexedDB||Xq.webkitIndexedDB||Xq.msIndexedDB,IDBKeyRange:Xq.IDBKeyRange||Xq.webkitIDBKeyRange}}catch(Ove){$Z={indexedDB:null,IDBKeyRange:null}}const WZ=jZ;function qZ(e){let t=XZ;try{XZ=!0,JK.storagemutated.fire(e)}finally{XZ=t}}tX(WZ,{...qX,delete:e=>new WZ(e,{addons:[]}).delete(),exists:e=>new WZ(e,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(e){try{return function({indexedDB:e,IDBKeyRange:t}){return _Z(e)?Promise.resolve(e.databases()).then(e=>e.map(e=>e.name).filter(e=>e!==vK)):vZ(e,t).toCollection().primaryKeys()}(WZ.dependencies).then(e)}catch(e){return oK(new $X.MissingAPI)}},defineClass:()=>function(e){Zq(this,e)},ignoreTransaction:e=>bY.trans?eK(bY.transless,e):e(),vip:bZ,async:function(e){return function(){try{var t=EZ(e.apply(this,arguments));return t&&"function"==typeof t.then?t:SY.resolve(t)}catch(e){return oK(e)}}},spawn:function(e,t,r){try{var n=EZ(e.apply(r,t||[]));return n&&"function"==typeof n.then?n:SY.resolve(n)}catch(e){return oK(e)}},currentTransaction:{get:()=>bY.trans||null},waitFor:function(e,t){const r=SY.resolve("function"==typeof e?WZ.ignoreTransaction(e):e).timeout(t||6e4);return bY.trans?bY.trans.waitFor(r):r},Promise:SY,debug:{get:()=>PX,set:e=>{BX(e,"dexie"===e?()=>!0:yK)}},derive:iX,extend:Zq,props:tX,override:uX,Events:CK,on:JK,liveQuery:HZ,extendObservabilitySet:GZ,getByKeyPath:fX,setByKeyPath:pX,delByKeyPath:function(e,t){"string"==typeof t?pX(e,t,void 0):"length"in t&&[].map.call(t,function(t){pX(e,t,void 0)})},shallowClone:mX,deepClone:wX,getObjectDiff:DZ,cmp:FK,asap:dX,minKey:cK,addons:[],connections:fK,errnames:GX,dependencies:$Z,semVer:lK,version:lK.split(".").map(e=>parseInt(e)).reduce((e,t,r)=>e+t/Math.pow(10,2*r))}),WZ.maxKey=nZ(WZ.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(JK(KK,e=>{if(!XZ){let t;pK?(t=document.createEvent("CustomEvent"),t.initCustomEvent(ZK,!0,!0,e)):t=new CustomEvent(ZK,{detail:e}),XZ=!0,dispatchEvent(t),XZ=!1}}),addEventListener(ZK,({detail:e})=>{XZ||qZ(e)}));let XZ=!1;if("undefined"!=typeof BroadcastChannel){const e=new BroadcastChannel(ZK);"function"==typeof e.unref&&e.unref(),JK(KK,t=>{XZ||e.postMessage(t)}),e.onmessage=e=>{e.data&&qZ(e.data)}}else if("undefined"!=typeof self&&"undefined"!=typeof navigator){JK(KK,e=>{try{XZ||("undefined"!=typeof localStorage&&localStorage.setItem(ZK,JSON.stringify({trig:Math.random(),changedParts:e})),"object"==typeof self.clients&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(t=>t.postMessage({type:ZK,changedParts:e})))}catch(e){}}),"undefined"!=typeof addEventListener&&addEventListener("storage",e=>{if(e.key===ZK){const t=JSON.parse(e.newValue);t&&qZ(t.changedParts)}});const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",function({data:e}){e&&e.type===ZK&&qZ(e.changedParts)})}SY.rejectionMapper=function(e,t){if(!e||e instanceof UX||e instanceof TypeError||e instanceof SyntaxError||!e.name||!WX[e.name])return e;var r=new WX[e.name](t||e.message,e);return"stack"in e&&nX(r,"stack",{get:function(){return this.inner.stack}}),r},BX(PX,yK);
/*! *****************************************************************************
			Copyright (c) Microsoft Corporation.

			Permission to use, copy, modify, and/or distribute this software for any
			purpose with or without fee is hereby granted.

			THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
			REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
			AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
			INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
			LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
			OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
			PERFORMANCE OF THIS SOFTWARE.
			***************************************************************************** */
var YZ=function(){return YZ=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},YZ.apply(this,arguments)};function KZ(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{l(n.next(e))}catch(Ove){s(Ove)}}function a(e){try{l(n.throw(e))}catch(Ove){s(Ove)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}l((n=n.apply(e,t||[])).next())})}function ZZ(e,t){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(Ove){s=[6,Ove],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function JZ(e){return[e.schema.primKey].concat(e.schema.indexes).map(function(e){return e.src}).join(",")}function QZ(e,t){return new Promise(function(r,n){var i=new FileReader;i.onabort=function(e){return n(new Error("file read aborted"))},i.onerror=function(e){return n(e.target.error)},i.onload=function(e){return r(e.target.result)},"binary"===t?i.readAsArrayBuffer(e):i.readAsText(e)})}function eJ(e,t){if("undefined"==typeof FileReaderSync)throw new Error("FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.");var r=new FileReaderSync;return"binary"===t?r.readAsArrayBuffer(e):r.readAsText(e)}var tJ="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function rJ(e,t){return e(t={exports:{}},t.exports),t.exports}for(var nJ=rJ(function(e,t){e.exports=function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t,r,n,i,s,o){try{var a=e[s](o),l=a.value}catch(u){return void r(u)}a.done?t(l):Promise.resolve(l).then(n,i)}function r(e){return function(){var r=this,n=arguments;return new Promise(function(i,s){var o=e.apply(r,n);function a(e){t(o,i,s,a,l,"next",e)}function l(e){t(o,i,s,a,l,"throw",e)}a(void 0)})}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){o(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function u(e,t){return h(e)||p(e,t)||g()}function c(e){return d(e)||f(e)||m()}function d(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function h(e){if(Array.isArray(e))return e}function f(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function p(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var r=[],n=!0,i=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(mke){i=!0,s=mke}finally{try{n||null==a.return||a.return()}finally{if(i)throw s}}return r}}function m(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function g(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var y=function e(t){n(this,e),this.p=new Promise(t)};y.__typeson__type__="TypesonPromise","undefined"!=typeof Symbol&&(y.prototype[Symbol.toStringTag]="TypesonPromise"),y.prototype.then=function(e,t){var r=this;return new y(function(n,i){r.p.then(function(t){n(e?e(t):t)}).catch(function(e){return t?t(e):Promise.reject(e)}).then(n,i)})},y.prototype.catch=function(e){return this.then(null,e)},y.resolve=function(e){return new y(function(t){t(e)})},y.reject=function(e){return new y(function(t,r){r(e)})},["all","race"].forEach(function(e){y[e]=function(t){return new y(function(r,n){Promise[e](t.map(function(e){return e&&e.constructor&&"TypesonPromise"===e.constructor.__typeson__type__?e.p:e})).then(r,n)})}});var v={}.toString,_={}.hasOwnProperty,b=Object.getPrototypeOf,w=_.toString;function x(e,t){return T(e)&&"function"==typeof e.then&&(!t||"function"==typeof e.catch)}function E(e){return v.call(e).slice(8,-1)}function S(t,r){if(!t||"object"!==e(t))return!1;var n=b(t);if(!n)return null===r;var i=_.call(n,"constructor")&&n.constructor;return"function"!=typeof i?null===r:r===i||null!==r&&w.call(i)===w.call(r)||"function"==typeof r&&"string"==typeof i.__typeson__type__&&i.__typeson__type__===r.__typeson__type__}function C(e){return!(!e||"Object"!==E(e))&&(!b(e)||S(e,Object))}function A(e){if(!e||"Object"!==E(e))return!1;var t=b(e);return!t||S(e,Object)||A(t)}function T(t){return t&&"object"===e(t)}function D(e){return e.replace(/~/g,"~0").replace(/\./g,"~1")}function k(e){return e.replace(/~1/g,".").replace(/~0/g,"~")}function P(e,t){if(""===t)return e;var r=t.indexOf(".");if(r>-1){var n=e[k(t.slice(0,r))];return void 0===n?void 0:P(n,t.slice(r+1))}return e[k(t)]}function B(e,t,r){if(""===t)return r;var n=t.indexOf(".");return n>-1?B(e[k(t.slice(0,n))],t.slice(n+1),r):(e[k(t)]=r,e)}function O(t){return null===t?"null":Array.isArray(t)?"array":e(t)}var R=Object.keys,F=Array.isArray,I={}.hasOwnProperty,M=["type","replaced","iterateIn","iterateUnsetNumeric"];function N(e,t){if(""===e.keypath)return-1;var r=e.keypath.match(/\./g)||0,n=t.keypath.match(/\./g)||0;return r&&(r=r.length),n&&(n=n.length),r>n?-1:r<n?1:e.keypath<t.keypath?-1:e.keypath>t.keypath}var L=function(){function t(e){n(this,t),this.options=e,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return s(t,[{key:"stringify",value:function(e,t,r,n){n=l({},this.options,{},n,{stringification:!0});var i=this.encapsulate(e,null,n);return F(i)?JSON.stringify(i[0],t,r):i.then(function(e){return JSON.stringify(e,t,r)})}},{key:"stringifySync",value:function(e,t,r,n){return this.stringify(e,t,r,l({throwOnBadSyncType:!0},n,{sync:!0}))}},{key:"stringifyAsync",value:function(e,t,r,n){return this.stringify(e,t,r,l({throwOnBadSyncType:!0},n,{sync:!1}))}},{key:"parse",value:function(e,t,r){return r=l({},this.options,{},r,{parse:!0}),this.revive(JSON.parse(e,t),r)}},{key:"parseSync",value:function(e,t,r){return this.parse(e,t,l({throwOnBadSyncType:!0},r,{sync:!0}))}},{key:"parseAsync",value:function(e,t,r){return this.parse(e,t,l({throwOnBadSyncType:!0},r,{sync:!1}))}},{key:"specialTypeNames",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.returnTypeNames=!0,this.encapsulate(e,t,r)}},{key:"rootTypeName",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.iterateNone=!0,this.encapsulate(e,t,r)}},{key:"encapsulate",value:function(n,i,s){var o=(s=l({sync:!0},this.options,{},s)).sync,a=this,d={},h=[],f=[],p=[],m=!("cyclic"in s)||s.cyclic,g=s.encapsulateObserver,v=E("",n,m,i||{},p);function _(e){var r=Object.values(d);if(s.iterateNone)return r.length?r[0]:t.getJSONType(e);if(r.length){if(s.returnTypeNames)return c(new Set(r));e&&C(e)&&!I.call(e,"$types")?e.$types=d:e={$:e,$types:{$:d}}}else T(e)&&I.call(e,"$types")&&(e={$:e,$types:!0});return!s.returnTypeNames&&e}function b(e,t){return w.apply(this,arguments)}function w(){return w=r(regeneratorRuntime.mark(function e(t,n){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(n.map(function(e){return e[1].p}));case 2:return i=e.sent,e.next=5,Promise.all(i.map(function(){var e=r(regeneratorRuntime.mark(function e(r){var i,s,o,a,l,c,d,h,f,p,m,g,v,_;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=[],s=n.splice(0,1),o=u(s,1),a=o[0],l=u(a,7),c=l[0],d=l[2],h=l[3],f=l[4],p=l[5],m=l[6],g=E(c,r,d,h,i,!0,m),v=S(g,y),!c||!v){e.next=11;break}return e.next=8,g.p;case 8:return _=e.sent,f[p]=_,e.abrupt("return",b(t,i));case 11:return c?f[p]=g:t=v?g.p:g,e.abrupt("return",b(t,i));case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}},e)})),w.apply(this,arguments)}function x(e,t,r){Object.assign(e,t);var n=M.map(function(t){var r=e[t];return delete e[t],r});r(),M.forEach(function(t,r){e[t]=n[r]})}function E(r,n,i,o,l,u,c){var p,m={},v=e(n),_=g?function(e){var s=c||o.type||t.getJSONType(n);g(Object.assign(e||m,{keypath:r,value:n,cyclic:i,stateObj:o,promisesData:l,resolvingTypesonPromise:u,awaitingTypesonPromise:S(n,y)},{type:s}))}:null;if(["string","boolean","number","undefined"].includes(v))return void 0===n||"number"===v&&(isNaN(n)||n===-1/0||n===1/0)?(p=o.replaced?n:A(r,n,o,l,!1,u,_))!==n&&(m={replaced:p}):p=n,_&&_(),p;if(null===n)return _&&_(),n;if(i&&!o.iterateIn&&!o.iterateUnsetNumeric&&n&&"object"===e(n)){var b=h.indexOf(n);if(!(b<0))return d[r]="#",_&&_({cyclicKeypath:f[b]}),"#"+f[b];!0===i&&(h.push(n),f.push(r))}var w,T=C(n),k=F(n),P=(T||k)&&(!a.plainObjectReplacers.length||o.replaced)||o.iterateIn?n:A(r,n,o,l,T||k,null,_);if(P!==n?(p=P,m={replaced:P}):""===r&&S(n,y)?(l.push([r,n,i,o,void 0,void 0,o.type]),p=n):k&&"object"!==o.iterateIn||"array"===o.iterateIn?(w=new Array(n.length),m={clone:w}):(["function","symbol"].includes(e(n))||"toJSON"in n||S(n,y)||S(n,Promise)||S(n,ArrayBuffer))&&!T&&"object"!==o.iterateIn?p=n:(w={},o.addLength&&(w.length=n.length),m={clone:w}),_&&_(),s.iterateNone)return w||p;if(!w)return p;if(o.iterateIn){var B=function(e){var t={ownKeys:I.call(n,e)};x(o,t,function(){var t=r+(r?".":"")+D(e),s=E(t,n[e],Boolean(i),o,l,u);S(s,y)?l.push([t,s,Boolean(i),o,w,e,o.type]):void 0!==s&&(w[e]=s)})};for(var O in n)B(O);_&&_({endIterateIn:!0,end:!0})}else R(n).forEach(function(e){var t=r+(r?".":"")+D(e);x(o,{ownKeys:!0},function(){var r=E(t,n[e],Boolean(i),o,l,u);S(r,y)?l.push([t,r,Boolean(i),o,w,e,o.type]):void 0!==r&&(w[e]=r)})}),_&&_({endIterateOwn:!0,end:!0});if(o.iterateUnsetNumeric){for(var M=n.length,N=function(e){if(!(e in n)){var t=r+(r?".":"")+e;x(o,{ownKeys:!1},function(){var r=E(t,void 0,Boolean(i),o,l,u);S(r,y)?l.push([t,r,Boolean(i),o,w,e,o.type]):void 0!==r&&(w[e]=r)})}},L=0;L<M;L++)N(L);_&&_({endIterateUnsetNumeric:!0,end:!0})}return w}function A(e,t,r,n,i,s,l){for(var u=i?a.plainObjectReplacers:a.nonplainObjectReplacers,c=u.length;c--;){var h=u[c];if(h.test(t,r)){var f=h.type;if(a.revivers[f]){var p=d[e];d[e]=p?[f].concat(p):f}return Object.assign(r,{type:f,replaced:!0}),!o&&h.replaceAsync||h.replace?(l&&l({replacing:!0}),E(e,h[o||!h.replaceAsync?"replace":"replaceAsync"](t,r),m&&"readonly",r,n,s,f)):(l&&l({typeDetected:!0}),E(e,t,m&&"readonly",r,n,s,f))}}return t}return p.length?o&&s.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(b(v,p)).then(_):!o&&s.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():s.stringification&&o?[_(v)]:o?_(v):Promise.resolve(_(v))}},{key:"encapsulateSync",value:function(e,t,r){return this.encapsulate(e,t,l({throwOnBadSyncType:!0},r,{sync:!0}))}},{key:"encapsulateAsync",value:function(e,t,r){return this.encapsulate(e,t,l({throwOnBadSyncType:!0},r,{sync:!1}))}},{key:"revive",value:function(e,t){var r=e&&e.$types;if(!r)return e;if(!0===r)return e.$;var n=(t=l({sync:!0},this.options,{},t)).sync,i=[],s={},o=!0;r.$&&C(r.$)&&(e=e.$,r=r.$,o=!1);var a=this;function c(e,t){var r=u(a.revivers[e]||[],1)[0];if(!r)throw new Error("Unregistered type: "+e);return n&&!("revive"in r)?t:r[n&&r.revive?"revive":!n&&r.reviveAsync?"reviveAsync":"revive"](t,s)}function d(){var t=[];if(Object.entries(r).forEach(function(e){var n=u(e,2),i=n[0],s=n[1];"#"!==s&&[].concat(s).forEach(function(e){u(a.revivers[e]||[null,{}],2)[1].plain&&(t.push({keypath:i,type:e}),delete r[i])})}),t.length)return t.sort(N).reduce(function t(r,n){var i=n.keypath,s=n.type;if(x(r))return r.then(function(e){return t(e,{keypath:i,type:s})});var o=P(e,i);if(S(o=c(s,o),y))return o.then(function(t){var r=B(e,i,t);r===t&&(e=r)});var a=B(e,i,o);a===o&&(e=a)},void 0)}var h=[];function f(e,t,n,s,a){if(!o||"$types"!==e){var l=r[e],d=F(t);if(d||C(t)){var p=d?new Array(t.length):{};for(R(t).forEach(function(r){var i=f(e+(e?".":"")+D(r),t[r],n||p,p,r),s=function(e){return S(e,U)?p[r]=void 0:void 0!==e&&(p[r]=e),e};S(i,y)?h.push(i.then(function(e){return s(e)})):s(i)}),t=p;i.length;){var m=u(i[0],4),g=m[0],v=m[1],_=m[2],b=m[3],w=P(g,v);if(void 0===w)break;_[b]=w,i.splice(0,1)}}if(!l)return t;if("#"===l){var x=P(n,t.slice(1));return void 0===x&&i.push([n,t.slice(1),s,a]),x}return[].concat(l).reduce(function e(t,r){return S(t,y)?t.then(function(t){return e(t,r)}):c(r,t)},t)}}function p(e){return S(e,U)?void 0:e}var m,g=d();return S(g,y)?m=g.then(function(){return e}):(m=f("",e,null),h.length&&(m=y.resolve(m).then(function(e){return y.all([e].concat(h))}).then(function(e){return u(e,1)[0]}))),x(m)?n&&t.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():S(m,y)?m.p.then(p):m:!n&&t.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():n?p(m):Promise.resolve(p(m))}},{key:"reviveSync",value:function(e,t){return this.revive(e,l({throwOnBadSyncType:!0},t,{sync:!0}))}},{key:"reviveAsync",value:function(e,t){return this.revive(e,l({throwOnBadSyncType:!0},t,{sync:!1}))}},{key:"register",value:function(e,r){return r=r||{},[].concat(e).forEach(function e(n){var i=this;if(F(n))return n.map(function(t){return e.call(i,t)});n&&R(n).forEach(function(e){if("#"===e)throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(t.JSON_TYPES.includes(e))throw new TypeError("Plain JSON object types are reserved as type names");var i=n[e],s=i&&i.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,o=s.filter(function(t){return t.type===e});if(o.length&&(s.splice(s.indexOf(o[0]),1),delete this.revivers[e],delete this.types[e]),"function"==typeof i){var a=i;i={test:function(e){return e&&e.constructor===a},replace:function(e){return l({},e)},revive:function(e){return Object.assign(Object.create(a.prototype),e)}}}else if(F(i)){var c=u(i,3);i={test:c[0],replace:c[1],revive:c[2]}}if(i&&i.test){var d={type:e,test:i.test.bind(i)};i.replace&&(d.replace=i.replace.bind(i)),i.replaceAsync&&(d.replaceAsync=i.replaceAsync.bind(i));var h="number"==typeof r.fallback?r.fallback:r.fallback?0:1/0;if(i.testPlainObjects?this.plainObjectReplacers.splice(h,0,d):this.nonplainObjectReplacers.splice(h,0,d),i.revive||i.reviveAsync){var f={};i.revive&&(f.revive=i.revive.bind(i)),i.reviveAsync&&(f.reviveAsync=i.reviveAsync.bind(i)),this.revivers[e]=[f,{plain:i.testPlainObjects}]}this.types[e]=i}},this)},this),this}}]),t}(),U=function e(){n(this,e)};return U.__typeson__type__="TypesonUndefined",L.Undefined=U,L.Promise=y,L.isThenable=x,L.toStringTag=E,L.hasConstructorOf=S,L.isObject=T,L.isPlainObject=C,L.isUserObject=A,L.escapeKeyPathComponent=D,L.unescapeKeyPathComponent=k,L.getByKeyPath=P,L.getJSONType=O,L.JSON_TYPES=["null","boolean","number","string","array","object"],L}()}),iJ=rJ(function(e,t){e.exports=function(){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function s(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach(function(t){c(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,i=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,s=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw s}}return r}}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var y=function e(t){l(this,e),this.p=new Promise(t)};y.__typeson__type__="TypesonPromise","undefined"!=typeof Symbol&&(y.prototype[Symbol.toStringTag]="TypesonPromise"),y.prototype.then=function(e,t){var r=this;return new y(function(n,i){r.p.then(function(t){n(e?e(t):t)}).catch(function(e){return t?t(e):Promise.reject(e)}).then(n,i)})},y.prototype.catch=function(e){return this.then(null,e)},y.resolve=function(e){return new y(function(t){t(e)})},y.reject=function(e){return new y(function(t,r){r(e)})},["all","race"].forEach(function(e){y[e]=function(t){return new y(function(r,n){Promise[e](t.map(function(e){return e&&e.constructor&&"TypesonPromise"===e.constructor.__typeson__type__?e.p:e})).then(r,n)})}});var v={}.toString,_={}.hasOwnProperty,b=Object.getPrototypeOf,w=_.toString;function x(e,t){return A(e)&&"function"==typeof e.then&&(!t||"function"==typeof e.catch)}function E(e){return v.call(e).slice(8,-1)}function S(e,t){if(!e||"object"!==a(e))return!1;var r=b(e);if(!r)return null===t;var n=_.call(r,"constructor")&&r.constructor;return"function"!=typeof n?null===t:t===n||null!==t&&w.call(n)===w.call(t)||"function"==typeof t&&"string"==typeof n.__typeson__type__&&n.__typeson__type__===t.__typeson__type__}function C(e){return!(!e||"Object"!==E(e))&&(!b(e)||S(e,Object))}function A(e){return e&&"object"===a(e)}function T(e){return e.replace(/~/g,"~0").replace(/\./g,"~1")}function D(e){return e.replace(/~1/g,".").replace(/~0/g,"~")}function k(e,t){if(""===t)return e;var r=t.indexOf(".");if(r>-1){var n=e[D(t.slice(0,r))];return void 0===n?void 0:k(n,t.slice(r+1))}return e[D(t)]}function P(e,t,r){if(""===t)return r;var n=t.indexOf(".");return n>-1?P(e[D(t.slice(0,n))],t.slice(n+1),r):(e[D(t)]=r,e)}function B(e,t,r){return r?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}var O=Object.keys,R=Array.isArray,F={}.hasOwnProperty,I=["type","replaced","iterateIn","iterateUnsetNumeric"];function M(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function N(e,t){if(""===e.keypath)return-1;var r=e.keypath.match(/\./g)||0,n=t.keypath.match(/\./g)||0;return r&&(r=r.length),n&&(n=n.length),r>n?-1:r<n?1:e.keypath<t.keypath?-1:e.keypath>t.keypath}var L=function(){function e(t){l(this,e),this.options=t,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return function(e,t,r){t&&u(e.prototype,t),r&&u(e,r)}(e,[{key:"stringify",value:function(e,t,r,n){n=h(h(h({},this.options),n),{},{stringification:!0});var i=this.encapsulate(e,null,n);return R(i)?JSON.stringify(i[0],t,r):i.then(function(e){return JSON.stringify(e,t,r)})}},{key:"stringifySync",value:function(e,t,r,n){return this.stringify(e,t,r,h(h({throwOnBadSyncType:!0},n),{},{sync:!0}))}},{key:"stringifyAsync",value:function(e,t,r,n){return this.stringify(e,t,r,h(h({throwOnBadSyncType:!0},n),{},{sync:!1}))}},{key:"parse",value:function(e,t,r){return r=h(h(h({},this.options),r),{},{parse:!0}),this.revive(JSON.parse(e,t),r)}},{key:"parseSync",value:function(e,t,r){return this.parse(e,t,h(h({throwOnBadSyncType:!0},r),{},{sync:!0}))}},{key:"parseAsync",value:function(e,t,r){return this.parse(e,t,h(h({throwOnBadSyncType:!0},r),{},{sync:!1}))}},{key:"specialTypeNames",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.returnTypeNames=!0,this.encapsulate(e,t,r)}},{key:"rootTypeName",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.iterateNone=!0,this.encapsulate(e,t,r)}},{key:"encapsulate",value:function(t,r,n){var i=M(function(e,t){return B(Promise.all(t.map(function(e){return e[1].p})),function(r){return B(Promise.all(r.map(M(function(r){var n=!1,s=[],o=f(t.splice(0,1),1),a=f(o[0],7),l=a[0],u=a[2],c=a[3],d=a[4],h=a[5],p=a[6],m=w(l,r,u,c,s,!0,p),g=S(m,y);return function(e,t){var r=e();return r&&r.then?r.then(t):t(r)}(function(){if(l&&g)return B(m.p,function(t){return d[h]=t,n=!0,i(e,s)})},function(t){return n?t:(l?d[h]=m:e=g?m.p:m,i(e,s))})}))),function(){return e})})}),s=(n=h(h({sync:!0},this.options),n)).sync,o=this,l={},u=[],c=[],d=[],m=!("cyclic"in n)||n.cyclic,g=n.encapsulateObserver,v=w("",t,m,r||{},d);function _(t){var r=Object.values(l);if(n.iterateNone)return r.length?r[0]:e.getJSONType(t);if(r.length){if(n.returnTypeNames)return p(new Set(r));t&&C(t)&&!F.call(t,"$types")?t.$types=l:t={$:t,$types:{$:l}}}else A(t)&&F.call(t,"$types")&&(t={$:t,$types:!0});return!n.returnTypeNames&&t}function b(e,t,r){Object.assign(e,t);var n=I.map(function(t){var r=e[t];return delete e[t],r});r(),I.forEach(function(t,r){e[t]=n[r]})}function w(t,r,i,s,d,h,f){var p,m={},v=a(r),_=g?function(n){var o=f||s.type||e.getJSONType(r);g(Object.assign(n||m,{keypath:t,value:r,cyclic:i,stateObj:s,promisesData:d,resolvingTypesonPromise:h,awaitingTypesonPromise:S(r,y)},{type:o}))}:null;if(["string","boolean","number","undefined"].includes(v))return void 0===r||Number.isNaN(r)||r===Number.NEGATIVE_INFINITY||r===Number.POSITIVE_INFINITY?(p=s.replaced?r:x(t,r,s,d,!1,h,_))!==r&&(m={replaced:p}):p=r,_&&_(),p;if(null===r)return _&&_(),r;if(i&&!s.iterateIn&&!s.iterateUnsetNumeric&&r&&"object"===a(r)){var E=u.indexOf(r);if(!(E<0))return l[t]="#",_&&_({cyclicKeypath:c[E]}),"#"+c[E];!0===i&&(u.push(r),c.push(t))}var A,D=C(r),k=R(r),P=(D||k)&&(!o.plainObjectReplacers.length||s.replaced)||s.iterateIn?r:x(t,r,s,d,D||k,null,_);if(P!==r?(p=P,m={replaced:P}):""===t&&S(r,y)?(d.push([t,r,i,s,void 0,void 0,s.type]),p=r):k&&"object"!==s.iterateIn||"array"===s.iterateIn?(A=new Array(r.length),m={clone:A}):(["function","symbol"].includes(a(r))||"toJSON"in r||S(r,y)||S(r,Promise)||S(r,ArrayBuffer))&&!D&&"object"!==s.iterateIn?p=r:(A={},s.addLength&&(A.length=r.length),m={clone:A}),_&&_(),n.iterateNone)return A||p;if(!A)return p;if(s.iterateIn){var B=function(e){var n={ownKeys:F.call(r,e)};b(s,n,function(){var n=t+(t?".":"")+T(e),o=w(n,r[e],Boolean(i),s,d,h);S(o,y)?d.push([n,o,Boolean(i),s,A,e,s.type]):void 0!==o&&(A[e]=o)})};for(var I in r)B(I);_&&_({endIterateIn:!0,end:!0})}else O(r).forEach(function(e){var n=t+(t?".":"")+T(e);b(s,{ownKeys:!0},function(){var t=w(n,r[e],Boolean(i),s,d,h);S(t,y)?d.push([n,t,Boolean(i),s,A,e,s.type]):void 0!==t&&(A[e]=t)})}),_&&_({endIterateOwn:!0,end:!0});if(s.iterateUnsetNumeric){for(var M=r.length,N=function(e){if(!(e in r)){var n=t+(t?".":"")+e;b(s,{ownKeys:!1},function(){var t=w(n,void 0,Boolean(i),s,d,h);S(t,y)?d.push([n,t,Boolean(i),s,A,e,s.type]):void 0!==t&&(A[e]=t)})}},L=0;L<M;L++)N(L);_&&_({endIterateUnsetNumeric:!0,end:!0})}return A}function x(e,t,r,n,i,a,u){for(var c=i?o.plainObjectReplacers:o.nonplainObjectReplacers,d=c.length;d--;){var h=c[d];if(h.test(t,r)){var f=h.type;if(o.revivers[f]){var p=l[e];l[e]=p?[f].concat(p):f}return Object.assign(r,{type:f,replaced:!0}),!s&&h.replaceAsync||h.replace?(u&&u({replacing:!0}),w(e,h[s||!h.replaceAsync?"replace":"replaceAsync"](t,r),m&&"readonly",r,n,a,f)):(u&&u({typeDetected:!0}),w(e,t,m&&"readonly",r,n,a,f))}}return t}return d.length?s&&n.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(i(v,d)).then(_):!s&&n.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():n.stringification&&s?[_(v)]:s?_(v):Promise.resolve(_(v))}},{key:"encapsulateSync",value:function(e,t,r){return this.encapsulate(e,t,h(h({throwOnBadSyncType:!0},r),{},{sync:!0}))}},{key:"encapsulateAsync",value:function(e,t,r){return this.encapsulate(e,t,h(h({throwOnBadSyncType:!0},r),{},{sync:!1}))}},{key:"revive",value:function(e,t){var r=e&&e.$types;if(!r)return e;if(!0===r)return e.$;var n=(t=h(h({sync:!0},this.options),t)).sync,i=[],s={},o=!0;r.$&&C(r.$)&&(e=e.$,r=r.$,o=!1);var a=this;function l(e,t){var r=f(a.revivers[e]||[],1)[0];if(!r)throw new Error("Unregistered type: "+e);return n&&!("revive"in r)?t:r[n&&r.revive?"revive":!n&&r.reviveAsync?"reviveAsync":"revive"](t,s)}var u=[];function c(e){return S(e,U)?void 0:e}var d,p=function(){var t=[];if(Object.entries(r).forEach(function(e){var n=f(e,2),i=n[0],s=n[1];"#"!==s&&[].concat(s).forEach(function(e){f(a.revivers[e]||[null,{}],2)[1].plain&&(t.push({keypath:i,type:e}),delete r[i])})}),t.length)return t.sort(N).reduce(function t(r,n){var i=n.keypath,s=n.type;if(x(r))return r.then(function(e){return t(e,{keypath:i,type:s})});var o=k(e,i);if(S(o=l(s,o),y))return o.then(function(t){var r=P(e,i,t);r===t&&(e=r)});var a=P(e,i,o);a===o&&(e=a)},void 0)}();return S(p,y)?d=p.then(function(){return e}):(d=function e(t,n,s,a,c){if(!o||"$types"!==t){var d=r[t],h=R(n);if(h||C(n)){var p=h?new Array(n.length):{};for(O(n).forEach(function(r){var i=e(t+(t?".":"")+T(r),n[r],s||p,p,r),o=function(e){return S(e,U)?p[r]=void 0:void 0!==e&&(p[r]=e),e};S(i,y)?u.push(i.then(function(e){return o(e)})):o(i)}),n=p;i.length;){var m=f(i[0],4),g=m[0],v=m[1],_=m[2],b=m[3],w=k(g,v);if(void 0===w)break;_[b]=w,i.splice(0,1)}}if(!d)return n;if("#"===d){var x=k(s,n.slice(1));return void 0===x&&i.push([s,n.slice(1),a,c]),x}return[].concat(d).reduce(function e(t,r){return S(t,y)?t.then(function(t){return e(t,r)}):l(r,t)},n)}}("",e,null),u.length&&(d=y.resolve(d).then(function(e){return y.all([e].concat(u))}).then(function(e){return f(e,1)[0]}))),x(d)?n&&t.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():S(d,y)?d.p.then(c):d:!n&&t.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():n?c(d):Promise.resolve(c(d))}},{key:"reviveSync",value:function(e,t){return this.revive(e,h(h({throwOnBadSyncType:!0},t),{},{sync:!0}))}},{key:"reviveAsync",value:function(e,t){return this.revive(e,h(h({throwOnBadSyncType:!0},t),{},{sync:!1}))}},{key:"register",value:function(t,r){return r=r||{},[].concat(t).forEach(function t(n){var i=this;if(R(n))return n.map(function(e){return t.call(i,e)});n&&O(n).forEach(function(t){if("#"===t)throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(e.JSON_TYPES.includes(t))throw new TypeError("Plain JSON object types are reserved as type names");var i=n[t],s=i&&i.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,o=s.filter(function(e){return e.type===t});if(o.length&&(s.splice(s.indexOf(o[0]),1),delete this.revivers[t],delete this.types[t]),"function"==typeof i){var a=i;i={test:function(e){return e&&e.constructor===a},replace:function(e){return h({},e)},revive:function(e){return Object.assign(Object.create(a.prototype),e)}}}else if(R(i)){var l=f(i,3);i={test:l[0],replace:l[1],revive:l[2]}}if(i&&i.test){var u={type:t,test:i.test.bind(i)};i.replace&&(u.replace=i.replace.bind(i)),i.replaceAsync&&(u.replaceAsync=i.replaceAsync.bind(i));var c="number"==typeof r.fallback?r.fallback:r.fallback?0:Number.POSITIVE_INFINITY;if(i.testPlainObjects?this.plainObjectReplacers.splice(c,0,u):this.nonplainObjectReplacers.splice(c,0,u),i.revive||i.reviveAsync){var d={};i.revive&&(d.revive=i.revive.bind(i)),i.reviveAsync&&(d.reviveAsync=i.reviveAsync.bind(i)),this.revivers[t]=[d,{plain:i.testPlainObjects}]}this.types[t]=i}},this)},this),this}}]),e}(),U=function e(){l(this,e)};U.__typeson__type__="TypesonUndefined",L.Undefined=U,L.Promise=y,L.isThenable=x,L.toStringTag=E,L.hasConstructorOf=S,L.isObject=A,L.isPlainObject=C,L.isUserObject=function e(t){if(!t||"Object"!==E(t))return!1;var r=b(t);return!r||S(t,Object)||e(r)},L.escapeKeyPathComponent=T,L.unescapeKeyPathComponent=D,L.getByKeyPath=k,L.getJSONType=function(e){return null===e?"null":Array.isArray(e)?"array":a(e)},L.JSON_TYPES=["null","boolean","number","string","array","object"];for(var j={userObject:{test:function(e,t){return L.isUserObject(e)},replace:function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e)},revive:function(e){return e}}},z=[{arrayNonindexKeys:{testPlainObjects:!0,test:function(e,t){return!!Array.isArray(e)&&(Object.keys(e).some(function(e){return String(Number.parseInt(e))!==e})&&(t.iterateIn="object",t.addLength=!0),!0)},replace:function(e,t){return t.iterateUnsetNumeric=!0,e},revive:function(e){if(Array.isArray(e))return e;var t=[];return Object.keys(e).forEach(function(r){var n=e[r];t[r]=n}),t}}},{sparseUndefined:{test:function(e,t){return void 0===e&&!1===t.ownKeys},replace:function(e){return 0},revive:function(e){}}}],V={undef:{test:function(e,t){return void 0===e&&(t.ownKeys||!("ownKeys"in t))},replace:function(e){return 0},revive:function(e){return new L.Undefined}}},G={StringObject:{test:function(t){return"String"===L.toStringTag(t)&&"object"===e(t)},replace:function(e){return String(e)},revive:function(e){return new String(e)}},BooleanObject:{test:function(t){return"Boolean"===L.toStringTag(t)&&"object"===e(t)},replace:function(e){return Boolean(e)},revive:function(e){return new Boolean(e)}},NumberObject:{test:function(t){return"Number"===L.toStringTag(t)&&"object"===e(t)},replace:function(e){return Number(e)},revive:function(e){return new Number(e)}}},H=[{nan:{test:function(e){return Number.isNaN(e)},replace:function(e){return"NaN"},revive:function(e){return Number.NaN}}},{infinity:{test:function(e){return e===Number.POSITIVE_INFINITY},replace:function(e){return"Infinity"},revive:function(e){return Number.POSITIVE_INFINITY}}},{negativeInfinity:{test:function(e){return e===Number.NEGATIVE_INFINITY},replace:function(e){return"-Infinity"},revive:function(e){return Number.NEGATIVE_INFINITY}}}],$={date:{test:function(e){return"Date"===L.toStringTag(e)},replace:function(e){var t=e.getTime();return Number.isNaN(t)?"NaN":t},revive:function(e){return"NaN"===e?new Date(Number.NaN):new Date(e)}}},W={regexp:{test:function(e){return"RegExp"===L.toStringTag(e)},replace:function(e){return{source:e.source,flags:(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":"")}},revive:function(e){var t=e.source,r=e.flags;return new RegExp(t,r)}}},q={map:{test:function(e){return"Map"===L.toStringTag(e)},replace:function(e){return s(e.entries())},revive:function(e){return new Map(e)}}},X={set:{test:function(e){return"Set"===L.toStringTag(e)},replace:function(e){return s(e.values())},revive:function(e){return new Set(e)}}},Y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",K=new Uint8Array(256),Z=0;Z<Y.length;Z++)K[Y.charCodeAt(Z)]=Z;var J=function(e,t,r){null==r&&(r=e.byteLength);for(var n=new Uint8Array(e,t||0,r),i=n.length,s="",o=0;o<i;o+=3)s+=Y[n[o]>>2],s+=Y[(3&n[o])<<4|n[o+1]>>4],s+=Y[(15&n[o+1])<<2|n[o+2]>>6],s+=Y[63&n[o+2]];return i%3==2?s=s.slice(0,-1)+"=":i%3==1&&(s=s.slice(0,-2)+"=="),s},Q=function(e){var t,r,n,i,s=e.length,o=.75*e.length,a=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);for(var l=new ArrayBuffer(o),u=new Uint8Array(l),c=0;c<s;c+=4)t=K[e.charCodeAt(c)],r=K[e.charCodeAt(c+1)],n=K[e.charCodeAt(c+2)],i=K[e.charCodeAt(c+3)],u[a++]=t<<2|r>>4,u[a++]=(15&r)<<4|n>>2,u[a++]=(3&n)<<6|63&i;return l},ee={arraybuffer:{test:function(e){return"ArrayBuffer"===L.toStringTag(e)},replace:function(e,t){t.buffers||(t.buffers=[]);var r=t.buffers.indexOf(e);return r>-1?{index:r}:(t.buffers.push(e),J(e))},revive:function(t,r){if(r.buffers||(r.buffers=[]),"object"===e(t))return r.buffers[t.index];var n=Q(t);return r.buffers.push(n),n}}},te="undefined"==typeof self?tJ:self,re={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(e){var t=e,r=te[t];r&&(re[e.toLowerCase()]={test:function(e){return L.toStringTag(e)===t},replace:function(e,t){var r=e.buffer,n=e.byteOffset,i=e.length;t.buffers||(t.buffers=[]);var s=t.buffers.indexOf(r);return s>-1?{index:s,byteOffset:n,length:i}:(t.buffers.push(r),{encoded:J(r),byteOffset:n,length:i})},revive:function(e,t){t.buffers||(t.buffers=[]);var n,i=e.byteOffset,s=e.length,o=e.encoded,a=e.index;return"index"in e?n=t.buffers[a]:(n=Q(o),t.buffers.push(n)),new r(n,i,s)}})});var ne={dataview:{test:function(e){return"DataView"===L.toStringTag(e)},replace:function(e,t){var r=e.buffer,n=e.byteOffset,i=e.byteLength;t.buffers||(t.buffers=[]);var s=t.buffers.indexOf(r);return s>-1?{index:s,byteOffset:n,byteLength:i}:(t.buffers.push(r),{encoded:J(r),byteOffset:n,byteLength:i})},revive:function(e,t){t.buffers||(t.buffers=[]);var r,n=e.byteOffset,i=e.byteLength,s=e.encoded,o=e.index;return"index"in e?r=t.buffers[o]:(r=Q(s),t.buffers.push(r)),new DataView(r,n,i)}}},ie={IntlCollator:{test:function(e){return L.hasConstructorOf(e,Intl.Collator)},replace:function(e){return e.resolvedOptions()},revive:function(e){return new Intl.Collator(e.locale,e)}},IntlDateTimeFormat:{test:function(e){return L.hasConstructorOf(e,Intl.DateTimeFormat)},replace:function(e){return e.resolvedOptions()},revive:function(e){return new Intl.DateTimeFormat(e.locale,e)}},IntlNumberFormat:{test:function(e){return L.hasConstructorOf(e,Intl.NumberFormat)},replace:function(e){return e.resolvedOptions()},revive:function(e){return new Intl.NumberFormat(e.locale,e)}}};function se(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t.buffer}var oe={file:{test:function(e){return"File"===L.toStringTag(e)},replace:function(e){var t=new XMLHttpRequest;if(t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("GET",URL.createObjectURL(e),!1),t.send(),200!==t.status&&0!==t.status)throw new Error("Bad File access: "+t.status);return{type:e.type,stringContents:t.responseText,name:e.name,lastModified:e.lastModified}},revive:function(e){var t=e.name,r=e.type,n=e.stringContents,i=e.lastModified;return new File([se(n)],t,{type:r,lastModified:i})},replaceAsync:function(e){return new L.Promise(function(t,r){var n=new FileReader;n.addEventListener("load",function(){t({type:e.type,stringContents:n.result,name:e.name,lastModified:e.lastModified})}),n.addEventListener("error",function(){r(n.error)}),n.readAsBinaryString(e)})}}},ae={bigint:{test:function(e){return"bigint"==typeof e},replace:function(e){return String(e)},revive:function(e){return BigInt(e)}}},le={bigintObject:{test:function(t){return"object"===e(t)&&L.hasConstructorOf(t,BigInt)},replace:function(e){return String(e)},revive:function(e){return new Object(BigInt(e))}}},ue={cryptokey:{test:function(e){return"CryptoKey"===L.toStringTag(e)&&e.extractable},replaceAsync:function(e){return new L.Promise(function(t,r){crypto.subtle.exportKey("jwk",e).catch(function(e){r(e)}).then(function(r){t({jwk:r,algorithm:e.algorithm,usages:e.usages})})})},revive:function(e){var t=e.jwk,r=e.algorithm,n=e.usages;return crypto.subtle.importKey("jwk",t,r,!0,n)}}};return[j,V,z,G,H,$,W,{imagedata:{test:function(e){return"ImageData"===L.toStringTag(e)},replace:function(e){return{array:s(e.data),width:e.width,height:e.height}},revive:function(e){return new ImageData(new Uint8ClampedArray(e.array),e.width,e.height)}}},{imagebitmap:{test:function(e){return"ImageBitmap"===L.toStringTag(e)||e&&e.dataset&&"ImageBitmap"===e.dataset.toStringTag},replace:function(e){var t=document.createElement("canvas");return t.getContext("2d").drawImage(e,0,0),t.toDataURL()},revive:function(e){var t=document.createElement("canvas"),r=t.getContext("2d"),n=document.createElement("img");return n.addEventListener("load",function(){r.drawImage(n,0,0)}),n.src=e,t},reviveAsync:function(e){var t=document.createElement("canvas"),r=t.getContext("2d"),n=document.createElement("img");return n.addEventListener("load",function(){r.drawImage(n,0,0)}),n.src=e,createImageBitmap(t)}}},oe,{file:oe.file,filelist:{test:function(e){return"FileList"===L.toStringTag(e)},replace:function(e){for(var t=[],r=0;r<e.length;r++)t[r]=e.item(r);return t},revive:function(e){return new(function(){function e(){t(this,e),this._files=arguments[0],this.length=this._files.length}return function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(e,[{key:"item",value:function(e){return this._files[e]}},{key:Symbol.toStringTag,get:function(){return"FileList"}}]),e}())(e)}}},{blob:{test:function(e){return"Blob"===L.toStringTag(e)},replace:function(e){var t=new XMLHttpRequest;if(t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("GET",URL.createObjectURL(e),!1),t.send(),200!==t.status&&0!==t.status)throw new Error("Bad Blob access: "+t.status);return{type:e.type,stringContents:t.responseText}},revive:function(e){var t=e.type,r=e.stringContents;return new Blob([se(r)],{type:t})},replaceAsync:function(e){return new L.Promise(function(t,r){var n=new FileReader;n.addEventListener("load",function(){t({type:e.type,stringContents:n.result})}),n.addEventListener("error",function(){r(n.error)}),n.readAsBinaryString(e)})}}}].concat("function"==typeof Map?q:[],"function"==typeof Set?X:[],"function"==typeof ArrayBuffer?ee:[],"function"==typeof Uint8Array?re:[],"function"==typeof DataView?ne:[],"undefined"!=typeof Intl?ie:[],"undefined"!=typeof crypto?ue:[],"undefined"!=typeof BigInt?[ae,le]:[])}()}),sJ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",oJ=new Uint8Array(256),aJ=0;aJ<64;aJ++)oJ[sJ.codePointAt(aJ)]=aJ;var lJ=function(e,t,r){null==r&&(r=e.byteLength);for(var n=new Uint8Array(e,t||0,r),i=n.length,s="",o=0;o<i;o+=3)s+=sJ[n[o]>>2],s+=sJ[(3&n[o])<<4|n[o+1]>>4],s+=sJ[(15&n[o+1])<<2|n[o+2]>>6],s+=sJ[63&n[o+2]];return i%3==2?s=s.slice(0,-1)+"=":i%3==1&&(s=s.slice(0,-2)+"=="),s},uJ=function(e){var t,r,n,i,s=e.length,o=.75*e.length,a=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);for(var l=new ArrayBuffer(o),u=new Uint8Array(l),c=0;c<s;c+=4)t=oJ[e.codePointAt(c)],r=oJ[e.codePointAt(c+1)],n=oJ[e.codePointAt(c+2)],i=oJ[e.codePointAt(c+3)],u[a++]=t<<2|r>>4,u[a++]=(15&r)<<4|n>>2,u[a++]=(3&n)<<6|63&i;return l},cJ="undefined"==typeof self?global:self,dJ={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(e){var t=e,r=cJ[t];r&&(dJ[e.toLowerCase()+"2"]={test:function(e){return nJ.toStringTag(e)===t},replace:function(e){return{buffer:e.buffer,byteOffset:e.byteOffset,length:e.length}},revive:function(e){var t=e.buffer,n=e.byteOffset,i=e.length;return new r(t,n,i)}})});var hJ={arraybuffer:{test:function(e){return"ArrayBuffer"===nJ.toStringTag(e)},replace:function(e){return lJ(e,0,e.byteLength)},revive:function(e){return uJ(e)}}},fJ=(new nJ).register(iJ),pJ="FileReaderSync"in self,mJ=[],gJ=0;fJ.register([hJ,dJ,{blob2:{test:function(e){return"Blob"===nJ.toStringTag(e)},replace:function(e){if(e.isClosed)throw new Error("The Blob is closed");if(pJ){var t=eJ(e,"binary"),r=lJ(t,0,t.byteLength);return{type:e.type,data:r}}mJ.push(e);var n={type:e.type,data:{start:gJ,end:gJ+e.size}};return gJ+=e.size,n},finalize:function(e,t){e.data=lJ(t,0,t.byteLength)},revive:function(e){var t=e.type,r=e.data;return new Blob([uJ(r)],{type:t})}}}]),fJ.mustFinalize=function(){return mJ.length>0},fJ.finalize=function(e){return KZ(void 0,void 0,void 0,function(){var t,r,n,i,s,o,a,l,u,c,d,h;return ZZ(this,function(f){switch(f.label){case 0:return[4,QZ(new Blob(mJ),"binary")];case 1:if(t=f.sent(),e)for(r=0,n=e;r<n.length;r++)if((i=n[r]).$types)for(a in s=i.$types,(o=s.$)&&(s=s.$),s)l=s[a],(u=fJ.types[l])&&u.finalize&&(c=jZ.getByKeyPath(i,o?"$."+a:a),u.finalize(c,t.slice(null===(d=c.data)||void 0===d?void 0:d.start,null===(h=c.data)||void 0===h?void 0:h.end)));return mJ=[],gJ=0,[2]}})})};var yJ=function(){},vJ=rJ(function(e,t){!function(e){var t="object"==typeof process&&process.env?process.env:self;e.parser=function(e){return new N(e)},e.CParser=N,e.CStream=L,e.createStream=function(e){return new L(e)},e.MAX_BUFFER_LENGTH=10485760,e.DEBUG="debug"===t.CDEBUG,e.INFO="debug"===t.CDEBUG||"info"===t.CDEBUG,e.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var r,n={textNode:void 0,numberNode:""},i=e.EVENTS.filter(function(e){return"error"!==e&&"end"!==e}),s=0;for(var o in e.STATE={BEGIN:s++,VALUE:s++,OPEN_OBJECT:s++,CLOSE_OBJECT:s++,OPEN_ARRAY:s++,CLOSE_ARRAY:s++,TEXT_ESCAPE:s++,STRING:s++,BACKSLASH:s++,END:s++,OPEN_KEY:s++,CLOSE_KEY:s++,TRUE:s++,TRUE2:s++,TRUE3:s++,FALSE:s++,FALSE2:s++,FALSE3:s++,FALSE4:s++,NULL:s++,NULL2:s++,NULL3:s++,NUMBER_DECIMAL_POINT:s++,NUMBER_DIGIT:s++},e.STATE)e.STATE[e.STATE[o]]=o;s=e.STATE;const a=9,l=10,u=13,c=32,d=34,h=43,f=44,p=45,m=46,g=48,y=57,v=58,_=69,b=91,w=92,x=93,E=97,S=98,C=101,A=102,T=108,D=110,k=114,P=115,B=116,O=117,R=123,F=125;function I(e){for(var t in n)e[t]=n[t]}Object.create||(Object.create=function(e){function t(){this.__proto__=e}return t.prototype=e,new t}),Object.getPrototypeOf||(Object.getPrototypeOf=function(e){return e.__proto__}),Object.keys||(Object.keys=function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t});var M=/[\\"\n]/g;function N(t){if(!(this instanceof N))return new N(t);var r=this;I(r),r.bufferCheckPosition=e.MAX_BUFFER_LENGTH,r.q=r.c=r.p="",r.opt=t||{},r.closed=r.closedRoot=r.sawRoot=!1,r.tag=r.error=null,r.state=s.BEGIN,r.stack=new Array,r.position=r.column=0,r.line=1,r.slashed=!1,r.unicodeI=0,r.unicodeS=null,r.depth=0,U(r,"onready")}N.prototype={end:function(){H(this)},write:function(t){var r=this;if(this.error)throw this.error;if(r.closed)return G(r,"Cannot write after close. Assign an onready handler.");if(null===t)return H(r);var i=0,o=t.charCodeAt(0),a=r.p;for(e.DEBUG&&console.log("write -> ["+t+"]");o&&(a=o,r.c=o=t.charCodeAt(i++),a!==o?r.p=a:a=r.p,o);)switch(e.DEBUG&&console.log(i,o,e.STATE[r.state]),r.position++,o===l?(r.line++,r.column=0):r.column++,r.state){case s.BEGIN:o===R?r.state=s.OPEN_OBJECT:o===b?r.state=s.OPEN_ARRAY:$(o)||G(r,"Non-whitespace before {[.");continue;case s.OPEN_KEY:case s.OPEN_OBJECT:if($(o))continue;if(r.state===s.OPEN_KEY)r.stack.push(s.CLOSE_KEY);else{if(o===F){U(r,"onopenobject"),this.depth++,U(r,"oncloseobject"),this.depth--,r.state=r.stack.pop()||s.VALUE;continue}r.stack.push(s.CLOSE_OBJECT)}o===d?r.state=s.STRING:G(r,'Malformed object key should start with "');continue;case s.CLOSE_KEY:case s.CLOSE_OBJECT:if($(o))continue;r.state,s.CLOSE_KEY,o===v?(r.state===s.CLOSE_OBJECT?(r.stack.push(s.CLOSE_OBJECT),z(r,"onopenobject"),this.depth++):z(r,"onkey"),r.state=s.VALUE):o===F?(j(r,"oncloseobject"),this.depth--,r.state=r.stack.pop()||s.VALUE):o===f?(r.state===s.CLOSE_OBJECT&&r.stack.push(s.CLOSE_OBJECT),z(r),r.state=s.OPEN_KEY):G(r,"Bad object");continue;case s.OPEN_ARRAY:case s.VALUE:if($(o))continue;if(r.state===s.OPEN_ARRAY){if(U(r,"onopenarray"),this.depth++,r.state=s.VALUE,o===x){U(r,"onclosearray"),this.depth--,r.state=r.stack.pop()||s.VALUE;continue}r.stack.push(s.CLOSE_ARRAY)}o===d?r.state=s.STRING:o===R?r.state=s.OPEN_OBJECT:o===b?r.state=s.OPEN_ARRAY:o===B?r.state=s.TRUE:o===A?r.state=s.FALSE:o===D?r.state=s.NULL:o===p?r.numberNode+="-":g<=o&&o<=y?(r.numberNode+=String.fromCharCode(o),r.state=s.NUMBER_DIGIT):G(r,"Bad value");continue;case s.CLOSE_ARRAY:if(o===f)r.stack.push(s.CLOSE_ARRAY),z(r,"onvalue"),r.state=s.VALUE;else if(o===x)j(r,"onclosearray"),this.depth--,r.state=r.stack.pop()||s.VALUE;else{if($(o))continue;G(r,"Bad array")}continue;case s.STRING:void 0===r.textNode&&(r.textNode="");var u=i-1,c=r.slashed,I=r.unicodeI;e:for(;;){for(e.DEBUG&&console.log(i,o,e.STATE[r.state],c);I>0;)if(r.unicodeS+=String.fromCharCode(o),o=t.charCodeAt(i++),r.position++,4===I?(r.textNode+=String.fromCharCode(parseInt(r.unicodeS,16)),I=0,u=i-1):I++,!o)break e;if(o===d&&!c){r.state=r.stack.pop()||s.VALUE,r.textNode+=t.substring(u,i-1),r.position+=i-1-u;break}if(o===w&&!c&&(c=!0,r.textNode+=t.substring(u,i-1),r.position+=i-1-u,o=t.charCodeAt(i++),r.position++,!o))break;if(c){if(c=!1,o===D?r.textNode+="\n":o===k?r.textNode+="\r":o===B?r.textNode+="\t":o===A?r.textNode+="\f":o===S?r.textNode+="\b":o===O?(I=1,r.unicodeS=""):r.textNode+=String.fromCharCode(o),o=t.charCodeAt(i++),r.position++,u=i-1,o)continue;break}M.lastIndex=i;var N=M.exec(t);if(null===N){i=t.length+1,r.textNode+=t.substring(u,i-1),r.position+=i-1-u;break}if(i=N.index+1,!(o=t.charCodeAt(N.index))){r.textNode+=t.substring(u,i-1),r.position+=i-1-u;break}}r.slashed=c,r.unicodeI=I;continue;case s.TRUE:o===k?r.state=s.TRUE2:G(r,"Invalid true started with t"+o);continue;case s.TRUE2:o===O?r.state=s.TRUE3:G(r,"Invalid true started with tr"+o);continue;case s.TRUE3:o===C?(U(r,"onvalue",!0),r.state=r.stack.pop()||s.VALUE):G(r,"Invalid true started with tru"+o);continue;case s.FALSE:o===E?r.state=s.FALSE2:G(r,"Invalid false started with f"+o);continue;case s.FALSE2:o===T?r.state=s.FALSE3:G(r,"Invalid false started with fa"+o);continue;case s.FALSE3:o===P?r.state=s.FALSE4:G(r,"Invalid false started with fal"+o);continue;case s.FALSE4:o===C?(U(r,"onvalue",!1),r.state=r.stack.pop()||s.VALUE):G(r,"Invalid false started with fals"+o);continue;case s.NULL:o===O?r.state=s.NULL2:G(r,"Invalid null started with n"+o);continue;case s.NULL2:o===T?r.state=s.NULL3:G(r,"Invalid null started with nu"+o);continue;case s.NULL3:o===T?(U(r,"onvalue",null),r.state=r.stack.pop()||s.VALUE):G(r,"Invalid null started with nul"+o);continue;case s.NUMBER_DECIMAL_POINT:o===m?(r.numberNode+=".",r.state=s.NUMBER_DIGIT):G(r,"Leading zero not followed by .");continue;case s.NUMBER_DIGIT:g<=o&&o<=y?r.numberNode+=String.fromCharCode(o):o===m?(-1!==r.numberNode.indexOf(".")&&G(r,"Invalid number has two dots"),r.numberNode+="."):o===C||o===_?(-1===r.numberNode.indexOf("e")&&-1===r.numberNode.indexOf("E")||G(r,"Invalid number has two exponential"),r.numberNode+="e"):o===h||o===p?(a!==C&&a!==_&&G(r,"Invalid symbol in number"),r.numberNode+=String.fromCharCode(o)):(V(r),i--,r.state=r.stack.pop()||s.VALUE);continue;default:G(r,"Unknown state: "+r.state)}return r.position>=r.bufferCheckPosition&&function(t){var r=Math.max(e.MAX_BUFFER_LENGTH,10),i=0;for(var s in n){var o=void 0===t[s]?0:t[s].length;o>r&&("text"===s?closeText(t):G(t,"Max buffer length exceeded: "+s)),i=Math.max(i,o)}t.bufferCheckPosition=e.MAX_BUFFER_LENGTH-i+t.position}(r),r},resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{r=yJ}catch(W){r=function(){}}function L(e){if(!(this instanceof L))return new L(e);this._parser=new N(e),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var t=this;r.apply(t),this._parser.onend=function(){t.emit("end")},this._parser.onerror=function(e){t.emit("error",e),t._parser.error=null},i.forEach(function(e){Object.defineProperty(t,"on"+e,{get:function(){return t._parser["on"+e]},set:function(r){if(!r)return t.removeAllListeners(e),t._parser["on"+e]=r,r;t.on(e,r)},enumerable:!0,configurable:!1})})}function U(t,r,n){e.INFO&&console.log("-- emit",r,n),t[r]&&t[r](n)}function j(e,t,r){z(e),U(e,t,r)}function z(e,t){var r,n;e.textNode=(r=e.opt,void 0===(n=e.textNode)||(r.trim&&(n=n.trim()),r.normalize&&(n=n.replace(/\s+/g," "))),n),void 0!==e.textNode&&U(e,t||"onvalue",e.textNode),e.textNode=void 0}function V(e){e.numberNode&&U(e,"onvalue",parseFloat(e.numberNode)),e.numberNode=""}function G(e,t){return z(e),t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c,t=new Error(t),e.error=t,U(e,"onerror",t),e}function H(e){return e.state===s.VALUE&&0===e.depth||G(e,"Unexpected end"),z(e),e.c="",e.closed=!0,U(e,"onend"),N.call(e,e.opt),e}function $(e){return e===u||e===l||e===c||e===a}L.prototype=Object.create(r.prototype,{constructor:{value:L}}),L.prototype.write=function(e){e=new Buffer(e);for(var t=0;t<e.length;t++){var r=e[t];if(this.bytes_remaining>0){for(var n=0;n<this.bytes_remaining;n++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+n]=e[n];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,t=t+n-1,this._parser.write(this.string),this.emit("data",this.string)}else if(0===this.bytes_remaining&&r>=128){if(r>=194&&r<=223&&(this.bytes_in_sequence=2),r>=224&&r<=239&&(this.bytes_in_sequence=3),r>=240&&r<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+t>e.length){for(var i=0;i<=e.length-1-t;i++)this.temp_buffs[this.bytes_in_sequence][i]=e[t+i];return this.bytes_remaining=t+this.bytes_in_sequence-e.length,!0}this.string=e.slice(t,t+this.bytes_in_sequence).toString(),t=t+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string)}else{for(var s=t;s<e.length&&!(e[s]>=128);s++);this.string=e.slice(t,s).toString(),this._parser.write(this.string),this.emit("data",this.string),t=s-1}}},L.prototype.end=function(e){return e&&e.length&&this._parser.write(e.toString()),this._parser.end(),!0},L.prototype.on=function(e,t){var n=this;return n._parser["on"+e]||-1===i.indexOf(e)||(n._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),n.emit.apply(n,t)}),r.prototype.on.call(n,e,t)},L.prototype.destroy=function(){I(this._parser),this.emit("close")}}(t)});function _J(e){var t=0,r=function(e){var t,r,n,i=vJ.parser(),s=0,o=[],a=!1,l=!1;return i.onopenobject=function(i){var a={incomplete:!0};t||(t=a),r&&(o.push([n,r,l]),e&&(l?r.push(a):r[n]=a)),r=a,n=i,l=!1,++s},i.onkey=function(e){return n=e},i.onvalue=function(e){return l?r.push(e):r[n]=e},i.oncloseobject=function(){var t;if(delete r.incomplete,n=null,0===--s)a=!0;else{var i=r;t=o.pop(),n=t[0],r=t[1],l=t[2],e||(l?r.push(i):r[n]=i)}},i.onopenarray=function(){var i=[];i.incomplete=!0,t||(t=i),r&&(o.push([n,r,l]),e&&(l?r.push(i):r[n]=i)),r=i,l=!0,n=null,++s},i.onclosearray=function(){var t;if(delete r.incomplete,n=null,0===--s)a=!0;else{var i=r;t=o.pop(),n=t[0],r=t[1],l=t[2],e||(l?r.push(i):r[n]=i)}},{write:function(e){return i.write(e),t},done:function(){return a}}}(!0),n={pullAsync:function(i){return KZ(this,void 0,void 0,function(){var s,o,a;return ZZ(this,function(l){switch(l.label){case 0:return s=e.slice(t,t+i),t+=i,[4,QZ(s,"text")];case 1:return o=l.sent(),a=r.write(o),n.result=a||{},[2,a]}})})},pullSync:function(i){var s=e.slice(t,t+i);t+=i;var o=eJ(s,"text"),a=r.write(o);return n.result=a||{},a},done:function(){return r.done()},eof:function(){return t>=e.size},result:{}};return n}function bJ(e,t,r){return KZ(this,void 0,void 0,function(){function n(){return KZ(this,void 0,void 0,function(){var t,n,o,h;return ZZ(this,function(f){switch(f.label){case 0:t=function(t){var n,i,s,o,a,h,f,p,m,g,y,v,_;return ZZ(this,function(b){switch(b.label){case 0:if(u.includes(t.tableName))return[2,"continue"];if(!t.rows)return[2,"break"];if(!t.rows.incomplete&&0===t.rows.length)return[2,"continue"];if(c&&jZ.ignoreTransaction(function(){return c(d)}),n=t.tableName,i=e.table(n),s=l.tables.filter(function(e){return e.name===n})[0].schema,!i){if(r.acceptMissingTables)return[2,"continue"];throw new Error("Exported table ".concat(t.tableName," is missing in installed database"))}if(!r.acceptChangedPrimaryKey&&s.split(",")[0]!=i.schema.primKey.src)throw new Error("Primary key differs for table ".concat(t.tableName,". "));for(o=t.rows,a=[],h=0;h<o.length&&!(f=o[h]).incomplete;h++)a.push(fJ.revive(f));return p=r.filter,m=r.transform,g=p?t.inbound?a.filter(function(e){return p(n,e)}):a.filter(function(e){var t=e[0],r=e[1];return p(n,r,t)}):a,m&&(g=g.map(t.inbound?function(e){return m(n,e).value}:function(e){var t=e[0],r=e[1],i=m(n,r,t);return[i.key,i.value]})),y=t.inbound?[void 0,g]:[g.map(function(e){return e[0]}),a.map(function(e){return e[1]})],v=y[0],_=y[1],r.overwriteValues?[4,i.bulkPut(_,v)]:[3,2];case 1:return b.sent(),[3,4];case 2:return[4,i.bulkAdd(_,v)];case 3:b.sent(),b.label=4;case 4:return d.completedRows+=a.length,a.incomplete||(d.completedTables+=1),o.splice(0,a.length),[2]}})},n=0,o=l.data,f.label=1;case 1:return n<o.length?(h=o[n],[5,t(h)]):[3,4];case 2:if("break"===f.sent())return[3,4];f.label=3;case 3:return n++,[3,1];case 4:for(;l.data.length>0&&l.data[0].rows&&!l.data[0].rows.incomplete;)l.data.splice(0,1);return s.done()||s.eof()?[3,8]:a?(s.pullSync(i),[3,7]):[3,5];case 5:return[4,jZ.waitFor(s.pullAsync(i))];case 6:f.sent(),f.label=7;case 7:return[3,9];case 8:return[3,10];case 9:return[3,0];case 10:return[2]}})})}var i,s,o,a,l,u,c,d,h,f,p;return ZZ(this,function(m){switch(m.label){case 0:return i=(r=r||{}).chunkSizeBytes||1048576,[4,wJ(t,i)];case 1:if(s=m.sent(),o=s.result,a="FileReaderSync"in self,l=o.data,u=r.skipTables?r.skipTables:[],!r.acceptNameDiff&&e.name!==l.databaseName)throw new Error("Name differs. Current database name is ".concat(e.name," but export is ").concat(l.databaseName));if(!r.acceptVersionDiff&&e.verno!==l.databaseVersion)throw new Error("Database version differs. Current database is in version ".concat(e.verno," but export is ").concat(l.databaseVersion));if(c=r.progressCallback,d={done:!1,completedRows:0,completedTables:0,totalRows:l.tables.reduce(function(e,t){return e+t.rowCount},0),totalTables:l.tables.length},c&&jZ.ignoreTransaction(function(){return c(d)}),!r.clearTablesBeforeImport)return[3,5];h=0,f=e.tables,m.label=2;case 2:return h<f.length?(p=f[h],u.includes(p.name)?[3,4]:[4,p.clear()]):[3,5];case 3:m.sent(),m.label=4;case 4:return h++,[3,2];case 5:return r.noTransaction?[4,n()]:[3,7];case 6:return m.sent(),[3,9];case 7:return[4,e.transaction("rw",e.tables,n)];case 8:m.sent(),m.label=9;case 9:return d.done=!0,c&&jZ.ignoreTransaction(function(){return c(d)}),[2]}})})}function wJ(e,t){return KZ(this,void 0,void 0,function(){var r,n;return ZZ(this,function(i){switch(i.label){case 0:r="slice"in e?_J(e):e,i.label=1;case 1:return r.eof()?[3,3]:[4,r.pullAsync(t)];case 2:return i.sent(),r.result.data&&r.result.data.data?[3,3]:[3,1];case 3:if(!(n=r.result)||"dexie"!=n.formatName)throw new Error("Given file is not a dexie export");if(n.formatVersion>1)throw new Error("Format version ".concat(n.formatVersion," not supported"));if(!n.data)throw new Error("No data in export file");if(!n.data.databaseName)throw new Error("Missing databaseName in export file");if(!n.data.databaseVersion)throw new Error("Missing databaseVersion in export file");if(!n.data.tables)throw new Error("Missing tables in export file");return[2,r]}})})}jZ.prototype.export=function(e){return function(e,t){return KZ(this,void 0,void 0,function(){function r(){return KZ(this,void 0,void 0,function(){var r,n,d,h,f,p,m,g,y,v;return ZZ(this,function(_){switch(_.label){case 0:return[4,Promise.all(i.map(function(e){return e.count()}))];case 1:(r=_.sent()).forEach(function(e,t){return o[t].rowCount=e}),c.totalRows=r.reduce(function(e,t){return e+t}),n=JSON.stringify(l,void 0,a?2:void 0),d=n.lastIndexOf("]"),h=n.substring(0,d),s.push(h),f=t.filter,p=t.transform,m=function(r){var n,i,o,l,d,h,m,g,y,v,_;return ZZ(this,function(b){switch(b.label){case 0:n=e.table(r),i=n.schema.primKey,o=!!i.keyPath,l=t.numRowsPerChunk||2e3,d=o?{tableName:n.name,inbound:!0,rows:[]}:{tableName:n.name,inbound:!1,rows:[]},h=JSON.stringify(d,void 0,a?2:void 0),a&&(h=h.split("\n").join("\n    ")),m=h.lastIndexOf("]"),s.push(h.substring(0,m)),g=null,y=0,v=!0,_=function(){var e,t,d,h,m,_,b,w,x;return ZZ(this,function(E){switch(E.label){case 0:return u&&jZ.ignoreTransaction(function(){return u(c)}),[4,(e=null==g?n.limit(l):n.where(":id").above(g).limit(l)).toArray()];case 1:return 0===(t=E.sent()).length?[2,"break"]:(null!=g&&y>0&&(s.push(","),a&&s.push("\n      ")),v=t.length===l,o?(d=f?t.filter(function(e){return f(r,e)}):t,h=p?d.map(function(e){return p(r,e).value}):d,m=h.map(function(e){return fJ.encapsulate(e)}),fJ.mustFinalize()?[4,jZ.waitFor(fJ.finalize(m))]:[3,3]):[3,4]);case 2:E.sent(),E.label=3;case 3:return x=JSON.stringify(m,void 0,a?2:void 0),a&&(x=x.split("\n").join("\n      ")),s.push(new Blob([x.substring(1,x.length-1)])),y=h.length,g=t.length>0?jZ.getByKeyPath(t[t.length-1],i.keyPath):null,[3,8];case 4:return[4,e.primaryKeys()];case 5:return _=E.sent(),b=_.map(function(e,r){return[e,t[r]]}),f&&(b=b.filter(function(e){var t=e[0],n=e[1];return f(r,n,t)})),p&&(b=b.map(function(e){var t=e[0],n=e[1],i=p(r,n,t);return[i.key,i.value]})),w=b.map(function(e){return fJ.encapsulate(e)}),fJ.mustFinalize()?[4,jZ.waitFor(fJ.finalize(w))]:[3,7];case 6:E.sent(),E.label=7;case 7:x=JSON.stringify(w,void 0,a?2:void 0),a&&(x=x.split("\n").join("\n      ")),s.push(new Blob([x.substring(1,x.length-1)])),y=b.length,g=_.length>0?_[_.length-1]:null,E.label=8;case 8:return c.completedRows+=t.length,[2]}})},b.label=1;case 1:return v?[5,_()]:[3,3];case 2:return"break"===b.sent()?[3,3]:[3,1];case 3:return s.push(h.substr(m)),c.completedTables+=1,c.completedTables<c.totalTables&&s.push(","),[2]}})},g=0,y=o,_.label=2;case 2:return g<y.length?(v=y[g].name,[5,m(v)]):[3,5];case 3:_.sent(),_.label=4;case 4:return g++,[3,2];case 5:return s.push(n.substr(d)),c.done=!0,u&&jZ.ignoreTransaction(function(){return u(c)}),[2]}})})}var n,i,s,o,a,l,u,c;return ZZ(this,function(d){switch(d.label){case 0:n=(t=t||{}).skipTables?t.skipTables:[],i=e.tables.filter(function(e){return!n.includes(e.name)}),s=[],o=i.map(function(e){return{name:e.name,schema:JZ(e),rowCount:0}}),a=t.prettyJson,l={formatName:"dexie",formatVersion:1,data:{databaseName:e.name,databaseVersion:e.verno,tables:o,data:[]}},u=t.progressCallback,c={done:!1,completedRows:0,completedTables:0,totalRows:NaN,totalTables:o.length},d.label=1;case 1:return d.trys.push([1,,6,7]),t.noTransaction?[4,r()]:[3,3];case 2:return d.sent(),[3,5];case 3:return[4,e.transaction("r",e.tables,r)];case 4:d.sent(),d.label=5;case 5:return[3,7];case 6:return fJ.finalize(),[7];case 7:return[2,new Blob(s,{type:"text/json"})]}})})}(this,e)},jZ.prototype.import=function(e,t){return bJ(this,e,t)},jZ.import=function(e,t){return function(e,t){return KZ(this,void 0,void 0,function(){var r,n,i,s;return ZZ(this,function(o){switch(o.label){case 0:return r=(t=t||{}).chunkSizeBytes||1048576,[4,wJ(e,r)];case 1:return n=o.sent(),i=n.result.data,(s=new jZ(void 0!==t.name?t.name:i.databaseName)).version(i.databaseVersion).stores(function(e){for(var t={},r=0,n=e.tables;r<n.length;r++){var i=n[r];t[i.name]=i.schema}return t}(i)),[4,bJ(s,n,void 0!==t.name?YZ(YZ({},t),{acceptNameDiff:!0}):t)];case 2:return o.sent(),[2,s]}})})}(e,t)};var xJ="Menubar",[EJ,SJ,CJ]=qz(xJ),[AJ,TJ]=Zj(xJ,[CJ,HH]),DJ=oW(),kJ=HH(),[PJ,BJ]=AJ(xJ),OJ=$.forwardRef((e,t)=>{const{__scopeMenubar:r,value:n,onValueChange:i,defaultValue:s,loop:o=!0,dir:a,...l}=e,u=tz(a),c=kJ(r),[d,h]=Wz({prop:n,onChange:i,defaultProp:s??"",caller:xJ}),[f,p]=$.useState(null);return te.jsx(PJ,{scope:r,value:d,onMenuOpen:$.useCallback(e=>{h(e),p(e)},[h]),onMenuClose:$.useCallback(()=>h(""),[h]),onMenuToggle:$.useCallback(e=>{h(t=>t?"":e),p(e)},[h]),dir:u,loop:o,children:te.jsx(EJ.Provider,{scope:r,children:te.jsx(EJ.Slot,{scope:r,children:te.jsx(QH,{asChild:!0,...c,orientation:"horizontal",loop:o,dir:u,currentTabStopId:f,onCurrentTabStopIdChange:p,children:te.jsx(Wj.div,{role:"menubar",...l,ref:t})})})})})});OJ.displayName=xJ;var RJ="MenubarMenu",[FJ,IJ]=AJ(RJ),MJ=e=>{const{__scopeMenubar:t,value:r,...n}=e,i=bV(),s=r||i||"LEGACY_REACT_AUTO_VALUE",o=BJ(RJ,t),a=DJ(t),l=$.useRef(null),u=$.useRef(!1),c=o.value===s;return $.useEffect(()=>{c||(u.current=!1)},[c]),te.jsx(FJ,{scope:t,value:s,triggerId:bV(),triggerRef:l,contentId:bV(),wasKeyboardTriggerOpenRef:u,children:te.jsx(iq,{...a,open:c,onOpenChange:e=>{e||o.onMenuClose()},modal:!1,dir:o.dir,...n})})};MJ.displayName=RJ;var NJ="MenubarTrigger",LJ=$.forwardRef((e,t)=>{const{__scopeMenubar:r,disabled:n=!1,...i}=e,s=kJ(r),o=DJ(r),a=BJ(NJ,r),l=IJ(NJ,r),u=$.useRef(null),c=jj(t,u,l.triggerRef),[d,h]=$.useState(!1),f=a.value===l.value;return te.jsx(EJ.ItemSlot,{scope:r,value:l.value,disabled:n,children:te.jsx(e$,{asChild:!0,...s,focusable:!n,tabStopId:l.value,children:te.jsx(sq,{asChild:!0,...o,children:te.jsx(Wj.button,{type:"button",role:"menuitem",id:l.triggerId,"aria-haspopup":"menu","aria-expanded":f,"aria-controls":f?l.contentId:void 0,"data-highlighted":d?"":void 0,"data-state":f?"open":"closed","data-disabled":n?"":void 0,disabled:n,...i,ref:c,onPointerDown:nz(e.onPointerDown,e=>{n||0!==e.button||!1!==e.ctrlKey||(a.onMenuOpen(l.value),f||e.preventDefault())}),onPointerEnter:nz(e.onPointerEnter,()=>{Boolean(a.value)&&!f&&(a.onMenuOpen(l.value),u.current?.focus())}),onKeyDown:nz(e.onKeyDown,e=>{n||(["Enter"," "].includes(e.key)&&a.onMenuToggle(l.value),"ArrowDown"===e.key&&a.onMenuOpen(l.value),["Enter"," ","ArrowDown"].includes(e.key)&&(l.wasKeyboardTriggerOpenRef.current=!0,e.preventDefault()))}),onFocus:nz(e.onFocus,()=>h(!0)),onBlur:nz(e.onBlur,()=>h(!1))})})})})});LJ.displayName=NJ;var UJ=e=>{const{__scopeMenubar:t,...r}=e,n=DJ(t);return te.jsx(oq,{...n,...r})};UJ.displayName="MenubarPortal";var jJ="MenubarContent",zJ=$.forwardRef((e,t)=>{const{__scopeMenubar:r,align:n="start",...i}=e,s=DJ(r),o=BJ(jJ,r),a=IJ(jJ,r),l=SJ(r),u=$.useRef(!1);return te.jsx(aq,{id:a.contentId,"aria-labelledby":a.triggerId,"data-radix-menubar-content":"",...s,...i,ref:t,align:n,onCloseAutoFocus:nz(e.onCloseAutoFocus,e=>{Boolean(o.value)||u.current||a.triggerRef.current?.focus(),u.current=!1,e.preventDefault()}),onFocusOutside:nz(e.onFocusOutside,e=>{const t=e.target;l().some(e=>e.ref.current?.contains(t))&&e.preventDefault()}),onInteractOutside:nz(e.onInteractOutside,()=>{u.current=!0}),onEntryFocus:e=>{a.wasKeyboardTriggerOpenRef.current||e.preventDefault()},onKeyDown:nz(e.onKeyDown,e=>{if(["ArrowRight","ArrowLeft"].includes(e.key)){const n=e.target,i=n.hasAttribute("data-radix-menubar-subtrigger"),s=n.closest("[data-radix-menubar-content]")!==e.currentTarget,u=("rtl"===o.dir?"ArrowRight":"ArrowLeft")===e.key;if(!u&&i)return;if(s&&u)return;let c=l().filter(e=>!e.disabled).map(e=>e.value);u&&c.reverse();const d=c.indexOf(a.value);c=o.loop?(r=d+1,(t=c).map((e,n)=>t[(r+n)%t.length])):c.slice(d+1);const[h]=c;h&&o.onMenuOpen(h)}var t,r},{checkForDefaultPrevented:!1}),style:{...e.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});zJ.displayName=jJ,$.forwardRef((e,t)=>{const{__scopeMenubar:r,...n}=e,i=DJ(r);return te.jsx(lq,{...i,...n,ref:t})}).displayName="MenubarGroup";var VJ=$.forwardRef((e,t)=>{const{__scopeMenubar:r,...n}=e,i=DJ(r);return te.jsx(uq,{...i,...n,ref:t})});VJ.displayName="MenubarLabel";var GJ=$.forwardRef((e,t)=>{const{__scopeMenubar:r,...n}=e,i=DJ(r);return te.jsx(cq,{...i,...n,ref:t})});GJ.displayName="MenubarItem";var HJ=$.forwardRef((e,t)=>{const{__scopeMenubar:r,...n}=e,i=DJ(r);return te.jsx(dq,{...i,...n,ref:t})});HJ.displayName="MenubarCheckboxItem",$.forwardRef((e,t)=>{const{__scopeMenubar:r,...n}=e,i=DJ(r);return te.jsx(hq,{...i,...n,ref:t})}).displayName="MenubarRadioGroup";var $J=$.forwardRef((e,t)=>{const{__scopeMenubar:r,...n}=e,i=DJ(r);return te.jsx(fq,{...i,...n,ref:t})});$J.displayName="MenubarRadioItem";var WJ=$.forwardRef((e,t)=>{const{__scopeMenubar:r,...n}=e,i=DJ(r);return te.jsx(pq,{...i,...n,ref:t})});WJ.displayName="MenubarItemIndicator";var qJ=$.forwardRef((e,t)=>{const{__scopeMenubar:r,...n}=e,i=DJ(r);return te.jsx(mq,{...i,...n,ref:t})});qJ.displayName="MenubarSeparator",$.forwardRef((e,t)=>{const{__scopeMenubar:r,...n}=e,i=DJ(r);return te.jsx(gq,{...i,...n,ref:t})}).displayName="MenubarArrow";var XJ=$.forwardRef((e,t)=>{const{__scopeMenubar:r,...n}=e,i=DJ(r);return te.jsx(vq,{"data-radix-menubar-subtrigger":"",...i,...n,ref:t})});XJ.displayName="MenubarSubTrigger";var YJ=$.forwardRef((e,t)=>{const{__scopeMenubar:r,...n}=e,i=DJ(r);return te.jsx(_q,{...i,"data-radix-menubar-content":"",...n,ref:t,style:{...e.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});YJ.displayName="MenubarSubContent",e("bt",OJ),e("bF",MJ),e("bu",LJ),e("bx",UJ),e("by",zJ),e("bD",VJ),e("bz",GJ),e("bA",HJ),e("bC",$J),e("bB",WJ),e("bE",qJ),e("bv",XJ),e("bw",YJ);var KJ=e=>"checkbox"===e.type,ZJ=e=>e instanceof Date,JJ=e=>null==e;const QJ=e=>"object"==typeof e;var eQ=e=>!JJ(e)&&!Array.isArray(e)&&QJ(e)&&!ZJ(e),tQ=e=>eQ(e)&&e.target?KJ(e.target)?e.target.checked:e.target.value:e,rQ=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),nQ=e=>{const t=e.constructor&&e.constructor.prototype;return eQ(t)&&t.hasOwnProperty("isPrototypeOf")},iQ="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function sQ(e){let t;const r=Array.isArray(e),n="undefined"!=typeof FileList&&e instanceof FileList;if(e instanceof Date)t=new Date(e);else{if(iQ&&(e instanceof Blob||n)||!r&&!eQ(e))return e;if(t=r?[]:Object.create(Object.getPrototypeOf(e)),r||nQ(e))for(const r in e)e.hasOwnProperty(r)&&(t[r]=sQ(e[r]));else t=e}return t}var oQ=e=>/^\w*$/.test(e),aQ=e=>void 0===e,lQ=e=>Array.isArray(e)?e.filter(Boolean):[],uQ=e=>lQ(e.replace(/["|']|\]/g,"").split(/\.|\[/)),cQ=(e,t,r)=>{if(!t||!eQ(e))return r;const n=(oQ(t)?[t]:uQ(t)).reduce((e,t)=>JJ(e)?e:e[t],e);return aQ(n)||n===e?aQ(e[t])?r:e[t]:n},dQ=e=>"boolean"==typeof e,hQ=(e,t,r)=>{let n=-1;const i=oQ(t)?[t]:uQ(t),s=i.length,o=s-1;for(;++n<s;){const t=i[n];let s=r;if(n!==o){const r=e[t];s=eQ(r)||Array.isArray(r)?r:isNaN(+i[n+1])?{}:[]}if("__proto__"===t||"constructor"===t||"prototype"===t)return;e[t]=s,e=e[t]}};const fQ={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},pQ={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},mQ="max",gQ="min",yQ="maxLength",vQ="minLength",_Q="pattern",bQ="required",wQ="validate",xQ=W.createContext(null);xQ.displayName="HookFormContext";const EQ=e("bS",()=>W.useContext(xQ));e("bT",e=>{const{children:t,...r}=e;return W.createElement(xQ.Provider,{value:r},t)});var SQ=(e,t,r,n=!0)=>{const i={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(i,s,{get:()=>{const i=s;return t._proxyFormState[i]!==pQ.all&&(t._proxyFormState[i]=!n||pQ.all),r&&(r[i]=!0),e[i]}});return i};const CQ="undefined"!=typeof window?W.useLayoutEffect:W.useEffect;var AQ=e=>"string"==typeof e,TQ=(e,t,r,n,i)=>AQ(e)?(n&&t.watch.add(e),cQ(r,e,i)):Array.isArray(e)?e.map(e=>(n&&t.watch.add(e),cQ(r,e))):(n&&(t.watchAll=!0),r),DQ=e=>JJ(e)||!QJ(e);function kQ(e,t,r=new WeakSet){if(DQ(e)||DQ(t))return Object.is(e,t);if(ZJ(e)&&ZJ(t))return e.getTime()===t.getTime();const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const s of n){const n=e[s];if(!i.includes(s))return!1;if("ref"!==s){const e=t[s];if(ZJ(n)&&ZJ(e)||eQ(n)&&eQ(e)||Array.isArray(n)&&Array.isArray(e)?!kQ(n,e,r):!Object.is(n,e))return!1}}return!0}function PQ(e){const t=EQ(),{control:r=t.control,name:n,defaultValue:i,disabled:s,exact:o,compute:a}=e||{},l=W.useRef(i),u=W.useRef(a),c=W.useRef(void 0),d=W.useRef(r),h=W.useRef(n);u.current=a;const[f,p]=W.useState(()=>{const e=r._getWatch(n,l.current);return u.current?u.current(e):e}),m=W.useCallback(e=>{const t=TQ(n,r._names,e||r._formValues,!1,l.current);return u.current?u.current(t):t},[r._formValues,r._names,n]),g=W.useCallback(e=>{if(!s){const t=TQ(n,r._names,e||r._formValues,!1,l.current);if(u.current){const e=u.current(t);kQ(e,c.current)||(p(e),c.current=e)}else p(t)}},[r._formValues,r._names,s,n]);CQ(()=>(d.current===r&&kQ(h.current,n)||(d.current=r,h.current=n,g()),r._subscribe({name:n,formState:{values:!0},exact:o,callback:e=>{g(e.values)}})),[r,o,n,g]),W.useEffect(()=>r._removeUnmounted());const y=d.current!==r,v=h.current,_=W.useMemo(()=>{if(s)return null;const e=!y&&!kQ(v,n);return y||e?m():null},[s,y,n,v,m]);return null!==_?_:f}function BQ(e){const t=EQ(),{name:r,disabled:n,control:i=t.control,shouldUnregister:s,defaultValue:o,exact:a=!0}=e,l=rQ(i._names.array,r),u=W.useMemo(()=>cQ(i._formValues,r,cQ(i._defaultValues,r,o)),[i,r,o]),c=PQ({control:i,name:r,defaultValue:u,exact:a}),d=function(e){const t=EQ(),{control:r=t.control,disabled:n,name:i,exact:s}=e||{},[o,a]=W.useState(r._formState),l=W.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return CQ(()=>r._subscribe({name:i,formState:l.current,exact:s,callback:e=>{!n&&a({...r._formState,...e})}}),[i,n,s]),W.useEffect(()=>{l.current.isValid&&r._setValid(!0)},[r]),W.useMemo(()=>SQ(o,r,l.current,!1),[o,r])}({control:i,name:r,exact:a}),h=W.useRef(e),f=W.useRef(void 0),p=W.useRef(i.register(r,{...e.rules,value:c,...dQ(e.disabled)?{disabled:e.disabled}:{}}));h.current=e;const m=W.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!cQ(d.errors,r)},isDirty:{enumerable:!0,get:()=>!!cQ(d.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!cQ(d.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!cQ(d.validatingFields,r)},error:{enumerable:!0,get:()=>cQ(d.errors,r)}}),[d,r]),g=W.useCallback(e=>p.current.onChange({target:{value:tQ(e),name:r},type:fQ.CHANGE}),[r]),y=W.useCallback(()=>p.current.onBlur({target:{value:cQ(i._formValues,r),name:r},type:fQ.BLUR}),[r,i._formValues]),v=W.useCallback(e=>{const t=cQ(i._fields,r);t&&e&&(t._f.ref={focus:()=>e.focus&&e.focus(),select:()=>e.select&&e.select(),setCustomValidity:t=>e.setCustomValidity(t),reportValidity:()=>e.reportValidity()})},[i._fields,r]),_=W.useMemo(()=>({name:r,value:c,...dQ(n)||d.disabled?{disabled:d.disabled||n}:{},onChange:g,onBlur:y,ref:v}),[r,n,d.disabled,g,y,v,c]);return W.useEffect(()=>{const e=i._options.shouldUnregister||s,t=f.current;t&&t!==r&&!l&&i.unregister(t),i.register(r,{...h.current.rules,...dQ(h.current.disabled)?{disabled:h.current.disabled}:{}});const n=(e,t)=>{const r=cQ(i._fields,e);r&&r._f&&(r._f.mount=t)};if(n(r,!0),e){const e=sQ(cQ(i._options.defaultValues,r,h.current.defaultValue));hQ(i._defaultValues,r,e),aQ(cQ(i._formValues,r))&&hQ(i._formValues,r,e)}return!l&&i.register(r),f.current=r,()=>{(l?e&&!i._state.action:e)?i.unregister(r):n(r,!1)}},[r,i,l,s]),W.useEffect(()=>{i._setDisabledField({disabled:n,name:r})},[n,r,i]),W.useMemo(()=>({field:_,formState:d,fieldState:m}),[_,d,m])}e("bR",e=>e.render(BQ(e)));var OQ=(e,t,r,n,i)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:i||!0}}:{},RQ=e=>Array.isArray(e)?e:[e],FQ=()=>{let e=[];return{get observers(){return e},next:t=>{for(const r of e)r.next&&r.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter(e=>e!==t)}}),unsubscribe:()=>{e=[]}}};function IQ(e,t){const r={};for(const n in e)if(e.hasOwnProperty(n)){const i=e[n],s=t[n];if(i&&eQ(i)&&s){const e=IQ(i,s);eQ(e)&&(r[n]=e)}else e[n]&&(r[n]=s)}return r}var MQ=e=>eQ(e)&&!Object.keys(e).length,NQ=e=>"file"===e.type,LQ=e=>"function"==typeof e,UQ=e=>{if(!iQ)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},jQ=e=>"select-multiple"===e.type,zQ=e=>"radio"===e.type,VQ=e=>zQ(e)||KJ(e),GQ=e=>UQ(e)&&e.isConnected;function HQ(e,t){const r=Array.isArray(t)?t:oQ(t)?[t]:uQ(t),n=1===r.length?e:function(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=aQ(e)?n++:e[t[n++]];return e}(e,r),i=r.length-1,s=r[i];return n&&delete n[s],0!==i&&(eQ(n)&&MQ(n)||Array.isArray(n)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!aQ(e[t]))return!1;return!0}(n))&&HQ(e,r.slice(0,-1)),e}var $Q=e=>{for(const t in e)if(LQ(e[t]))return!0;return!1};function WQ(e){return Array.isArray(e)||eQ(e)&&!$Q(e)}function qQ(e,t={}){for(const r in e){const n=e[r];WQ(n)?(t[r]=Array.isArray(n)?[]:{},qQ(n,t[r])):aQ(n)||(t[r]=!0)}return t}function XQ(e,t,r){r||(r=qQ(t));for(const n in e){const i=e[n];if(WQ(i))aQ(t)||DQ(r[n])?r[n]=qQ(i,Array.isArray(i)?[]:{}):XQ(i,JJ(t)?{}:t[n],r[n]);else{const e=t[n];r[n]=!kQ(i,e)}}return r}const YQ={value:!1,isValid:!1},KQ={value:!0,isValid:!0};var ZQ=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!aQ(e[0].attributes.value)?aQ(e[0].value)||""===e[0].value?KQ:{value:e[0].value,isValid:!0}:KQ:YQ}return YQ},JQ=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>aQ(e)?e:t?""===e?NaN:e?+e:e:r&&AQ(e)?new Date(e):n?n(e):e;const QQ={isValid:!1,value:null};var e0=e=>Array.isArray(e)?e.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,QQ):QQ;function t0(e){const t=e.ref;return NQ(t)?t.files:zQ(t)?e0(e.refs).value:jQ(t)?[...t.selectedOptions].map(({value:e})=>e):KJ(t)?ZQ(e.refs).value:JQ(aQ(t.value)?e.ref.value:t.value,e)}var r0=(e,t,r,n)=>{const i={};for(const s of e){const e=cQ(t,s);e&&hQ(i,s,e._f)}return{criteriaMode:r,names:[...e],fields:i,shouldUseNativeValidation:n}},n0=e=>e instanceof RegExp,i0=e=>aQ(e)?e:n0(e)?e.source:eQ(e)?n0(e.value)?e.value.source:e.value:e,s0=e=>({isOnSubmit:!e||e===pQ.onSubmit,isOnBlur:e===pQ.onBlur,isOnChange:e===pQ.onChange,isOnAll:e===pQ.all,isOnTouch:e===pQ.onTouched});const o0="AsyncFunction";var a0=e=>!!e&&!!e.validate&&!!(LQ(e.validate)&&e.validate.constructor.name===o0||eQ(e.validate)&&Object.values(e.validate).find(e=>e.constructor.name===o0)),l0=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),u0=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))));const c0=(e,t,r,n)=>{for(const i of r||Object.keys(e)){const r=cQ(e,i);if(r){const{_f:e,...s}=r;if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],i)&&!n)return!0;if(e.ref&&t(e.ref,e.name)&&!n)return!0;if(c0(s,t))break}else if(eQ(s)&&c0(s,t))break}}};function d0(e,t,r){const n=cQ(e,r);if(n||oQ(r))return{error:n,name:r};const i=r.split(".");for(;i.length;){const n=i.join("."),s=cQ(t,n),o=cQ(e,n);if(s&&!Array.isArray(s)&&r!==n)return{name:r};if(o&&o.type)return{name:n,error:o};if(o&&o.root&&o.root.type)return{name:`${n}.root`,error:o.root};i.pop()}return{name:r}}var h0=(e,t,r,n)=>{r(e);const{name:i,...s}=e;return MQ(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(e=>t[e]===(!n||pQ.all))},f0=(e,t,r)=>!e||!t||e===t||RQ(e).some(e=>e&&(r?e===t:e.startsWith(t)||t.startsWith(e))),p0=(e,t,r,n,i)=>!i.isOnAll&&(!r&&i.isOnTouch?!(t||e):(r?n.isOnBlur:i.isOnBlur)?!e:!(r?n.isOnChange:i.isOnChange)||e),m0=(e,t)=>!lQ(cQ(e,t)).length&&HQ(e,t),g0=(e,t,r)=>{const n=RQ(cQ(e,r));return hQ(n,"root",t[r]),hQ(e,r,n),e};function y0(e,t,r="validate"){if(AQ(e)||Array.isArray(e)&&e.every(AQ)||dQ(e)&&!e)return{type:r,message:AQ(e)?e:"",ref:t}}var v0=e=>eQ(e)&&!n0(e)?e:{value:e,message:""},_0=async(e,t,r,n,i,s)=>{const{ref:o,refs:a,required:l,maxLength:u,minLength:c,min:d,max:h,pattern:f,validate:p,name:m,valueAsNumber:g,mount:y}=e._f,v=cQ(r,m);if(!y||t.has(m))return{};const _=a?a[0]:o,b=e=>{i&&_.reportValidity&&(_.setCustomValidity(dQ(e)?"":e||""),_.reportValidity())},w={},x=zQ(o),E=KJ(o),S=x||E,C=(g||NQ(o))&&aQ(o.value)&&aQ(v)||UQ(o)&&""===o.value||""===v||Array.isArray(v)&&!v.length,A=OQ.bind(null,m,n,w),T=(e,t,r,n=yQ,i=vQ)=>{const s=e?t:r;w[m]={type:e?n:i,message:s,ref:o,...A(e?n:i,s)}};if(s?!Array.isArray(v)||!v.length:l&&(!S&&(C||JJ(v))||dQ(v)&&!v||E&&!ZQ(a).isValid||x&&!e0(a).isValid)){const{value:e,message:t}=AQ(l)?{value:!!l,message:l}:v0(l);if(e&&(w[m]={type:bQ,message:t,ref:_,...A(bQ,t)},!n))return b(t),w}if(!(C||JJ(d)&&JJ(h))){let e,t;const r=v0(h),i=v0(d);if(JJ(v)||isNaN(v)){const n=o.valueAsDate||new Date(v),s=e=>new Date((new Date).toDateString()+" "+e),a="time"==o.type,l="week"==o.type;AQ(r.value)&&v&&(e=a?s(v)>s(r.value):l?v>r.value:n>new Date(r.value)),AQ(i.value)&&v&&(t=a?s(v)<s(i.value):l?v<i.value:n<new Date(i.value))}else{const n=o.valueAsNumber||(v?+v:v);JJ(r.value)||(e=n>r.value),JJ(i.value)||(t=n<i.value)}if((e||t)&&(T(!!e,r.message,i.message,mQ,gQ),!n))return b(w[m].message),w}if((u||c)&&!C&&(AQ(v)||s&&Array.isArray(v))){const e=v0(u),t=v0(c),r=!JJ(e.value)&&v.length>+e.value,i=!JJ(t.value)&&v.length<+t.value;if((r||i)&&(T(r,e.message,t.message),!n))return b(w[m].message),w}if(f&&!C&&AQ(v)){const{value:e,message:t}=v0(f);if(n0(e)&&!v.match(e)&&(w[m]={type:_Q,message:t,ref:o,...A(_Q,t)},!n))return b(t),w}if(p)if(LQ(p)){const e=y0(await p(v,r),_);if(e&&(w[m]={...e,...A(wQ,e.message)},!n))return b(e.message),w}else if(eQ(p)){let e={};for(const t in p){if(!MQ(e)&&!n)break;const i=y0(await p[t](v,r),_,t);i&&(e={...i,...A(t,i.message)},b(i.message),n&&(w[m]=e))}if(!MQ(e)&&(w[m]={ref:_,...e},!n))return w}return b(!0),w};const b0={mode:pQ.onSubmit,reValidateMode:pQ.onChange,shouldFocusError:!0};var w0=()=>{if("undefined"!=typeof crypto&&crypto.randomUUID)return crypto.randomUUID();const e="undefined"==typeof performance?Date.now():1e3*performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=(16*Math.random()+e)%16|0;return("x"==t?r:3&r|8).toString(16)})},x0=(e,t,r={})=>r.shouldFocus||aQ(r.shouldFocus)?r.focusName||`${e}.${aQ(r.focusIndex)?t:r.focusIndex}.`:"",E0=(e,t)=>[...e,...RQ(t)],S0=e=>Array.isArray(e)?e.map(()=>{}):void 0;function C0(e,t,r){return[...e.slice(0,t),...RQ(r),...e.slice(t)]}var A0=(e,t,r)=>Array.isArray(e)?(aQ(e[r])&&(e[r]=void 0),e.splice(r,0,e.splice(t,1)[0]),e):[],T0=(e,t)=>[...RQ(t),...RQ(e)],D0=(e,t)=>aQ(t)?[]:function(e,t){let r=0;const n=[...e];for(const i of t)n.splice(i-r,1),r++;return lQ(n).length?n:[]}(e,RQ(t).sort((e,t)=>e-t)),k0=(e,t,r)=>{[e[t],e[r]]=[e[r],e[t]]},P0=(e,t,r)=>(e[t]=r,e);const B0=(e,t,r)=>{if(e&&"reportValidity"in e){const n=cQ(r,t);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},O0=(e,t)=>{for(const r in t.fields){const n=t.fields[r];n&&n.ref&&"reportValidity"in n.ref?B0(n.ref,r,e):n.refs&&n.refs.forEach(t=>B0(t,r,e))}},R0=(e,t)=>{t.shouldUseNativeValidation&&O0(e,t);const r={};for(const n in e){const i=cQ(t.fields,n),s=Object.assign(e[n]||{},{ref:i&&i.ref});if(F0(t.names||Object.keys(e),n)){const e=Object.assign({},cQ(r,n));hQ(e,"root",s),hQ(r,n,e)}else hQ(r,n,s)}return r},F0=(e,t)=>e.some(e=>e.startsWith(t+"."));var I0,M0,N0=function(e,t){for(var r={};e.length;){var n=e[0],i=n.code,s=n.message,o=n.path.join(".");if(!r[o])if("unionErrors"in n){var a=n.unionErrors[0].errors[0];r[o]={message:a.message,type:a.code}}else r[o]={message:s,type:i};if("unionErrors"in n&&n.unionErrors.forEach(function(t){return t.errors.forEach(function(t){return e.push(t)})}),t){var l=r[o].types,u=l&&l[n.code];r[o]=OQ(o,t,r,i,u?[].concat(u,n.message):n.message)}e.shift()}return r};e("bX",function(e,t,r){return void 0===r&&(r={}),function(n,i,s){try{return Promise.resolve(function(i,o){try{var a=Promise.resolve(e["sync"===r.mode?"parse":"parseAsync"](n,t)).then(function(e){return s.shouldUseNativeValidation&&O0({},s),{errors:{},values:r.raw?n:e}})}catch(Bve){return o(Bve)}return a&&a.then?a.then(void 0,o):a}(0,function(e){if(function(e){return Array.isArray(null==e?void 0:e.errors)}(e))return{values:{},errors:R0(N0(e.errors,!s.shouldUseNativeValidation&&"all"===s.criteriaMode),s)};throw e}))}catch(Bve){return Promise.reject(Bve)}}}),function(e){e.assertEqual=e=>{},e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const r of e)t[r]=r;return t},e.getValidEnumValues=t=>{const r=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),n={};for(const e of r)n[e]=t[e];return e.objectValues(n)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(const r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(I0||(I0={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(M0||(M0={}));const L0=I0.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),U0=e=>{switch(typeof e){case"undefined":return L0.undefined;case"string":return L0.string;case"number":return Number.isNaN(e)?L0.nan:L0.number;case"boolean":return L0.boolean;case"function":return L0.function;case"bigint":return L0.bigint;case"symbol":return L0.symbol;case"object":return Array.isArray(e)?L0.array:null===e?L0.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?L0.promise:"undefined"!=typeof Map&&e instanceof Map?L0.map:"undefined"!=typeof Set&&e instanceof Set?L0.set:"undefined"!=typeof Date&&e instanceof Date?L0.date:L0.object;default:return L0.unknown}},j0=I0.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class z0 extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(const i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(n);else if("invalid_return_type"===i.code)n(i.returnTypeError);else if("invalid_arguments"===i.code)n(i.argumentsError);else if(0===i.path.length)r._errors.push(t(i));else{let e=r,n=0;for(;n<i.path.length;){const r=i.path[n];n===i.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(i))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}static assert(e){if(!(e instanceof z0))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,I0.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},r=[];for(const n of this.issues)if(n.path.length>0){const r=n.path[0];t[r]=t[r]||[],t[r].push(e(n))}else r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}z0.create=e=>new z0(e);const V0=(e,t)=>{let r;switch(e.code){case j0.invalid_type:r=e.received===L0.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case j0.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,I0.jsonStringifyReplacer)}`;break;case j0.unrecognized_keys:r=`Unrecognized key(s) in object: ${I0.joinValues(e.keys,", ")}`;break;case j0.invalid_union:r="Invalid input";break;case j0.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${I0.joinValues(e.options)}`;break;case j0.invalid_enum_value:r=`Invalid enum value. Expected ${I0.joinValues(e.options)}, received '${e.received}'`;break;case j0.invalid_arguments:r="Invalid function arguments";break;case j0.invalid_return_type:r="Invalid function return type";break;case j0.invalid_date:r="Invalid date";break;case j0.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:I0.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case j0.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type||"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case j0.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case j0.custom:r="Invalid input";break;case j0.invalid_intersection_types:r="Intersection results could not be merged";break;case j0.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case j0.not_finite:r="Number must be finite";break;default:r=t.defaultError,I0.assertNever(e)}return{message:r}};let G0=V0;function H0(e,t){const r=G0,n=(e=>{const{data:t,path:r,errorMaps:n,issueData:i}=e,s=[...r,...i.path||[]],o={...i,path:s};if(void 0!==i.message)return{...i,path:s,message:i.message};let a="";const l=n.filter(e=>!!e).slice().reverse();for(const u of l)a=u(o,{data:t,defaultError:a}).message;return{...i,path:s,message:a}})({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===V0?void 0:V0].filter(e=>!!e)});e.common.issues.push(n)}class $0{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const n of t){if("aborted"===n.status)return W0;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const n of t){const e=await n.key,t=await n.value;r.push({key:e,value:t})}return $0.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const n of t){const{key:t,value:i}=n;if("aborted"===t.status)return W0;if("aborted"===i.status)return W0;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"===t.value||void 0===i.value&&!n.alwaysSet||(r[t.value]=i.value)}return{status:e.value,value:r}}}const W0=Object.freeze({status:"aborted"}),q0=e=>({status:"dirty",value:e}),X0=e=>({status:"valid",value:e}),Y0=e=>"aborted"===e.status,K0=e=>"dirty"===e.status,Z0=e=>"valid"===e.status,J0=e=>"undefined"!=typeof Promise&&e instanceof Promise;var Q0;!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:e?.message}(Q0||(Q0={}));class e1{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const t1=(e,t)=>{if(Z0(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new z0(e.common.issues);return this._error=t,this._error}}};function r1(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:i}:{errorMap:(t,i)=>{const{message:s}=e;return"invalid_enum_value"===t.code?{message:s??i.defaultError}:void 0===i.data?{message:s??n??i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:s??r??i.defaultError}},description:i}}class n1{get description(){return this._def.description}_getType(e){return U0(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:U0(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new $0,ctx:{common:e.parent.common,data:e.data,parsedType:U0(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(J0(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){const r={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:U0(e)},n=this._parseSync({data:e,path:r.path,parent:r});return t1(r,n)}"~validate"(e){const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:U0(e)};if(!this["~standard"].async)try{const r=this._parseSync({data:e,path:[],parent:t});return Z0(r)?{value:r.value}:{issues:t.common.issues}}catch(mke){mke?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>Z0(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:U0(e)},n=this._parse({data:e,path:r.path,parent:r}),i=await(J0(n)?n:Promise.resolve(n));return t1(r,i)}refine(e,t){const r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,n)=>{const i=e(t),s=()=>n.addIssue({code:j0.custom,...r(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then(e=>!!e||(s(),!1)):!!i||(s(),!1)})}refinement(e,t){return this._refinement((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1))}_refinement(e){return new n2({schema:this,typeName:f2.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return i2.create(this,this._def)}nullable(){return s2.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return j1.create(this)}promise(){return r2.create(this,this._def)}or(e){return G1.create([this,e],this._def)}and(e){return q1.create(this,e,this._def)}transform(e){return new n2({...r1(this._def),schema:this,typeName:f2.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new o2({...r1(this._def),innerType:this,defaultValue:t,typeName:f2.ZodDefault})}brand(){return new u2({typeName:f2.ZodBranded,type:this,...r1(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new a2({...r1(this._def),innerType:this,catchValue:t,typeName:f2.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return c2.create(this,e)}readonly(){return d2.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const i1=/^c[^\s-]{8,}$/i,s1=/^[0-9a-z]+$/,o1=/^[0-9A-HJKMNP-TV-Z]{26}$/i,a1=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,l1=/^[a-z0-9_-]{21}$/i,u1=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,c1=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,d1=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let h1;const f1=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,p1=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,m1=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,g1=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,y1=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,v1=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,_1="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",b1=new RegExp(`^${_1}$`);function w1(e){let t="[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),`([01]\\d|2[0-3]):[0-5]\\d(:${t})${e.precision?"+":"?"}`}function x1(e){return new RegExp(`^${w1(e)}$`)}function E1(e){let t=`${_1}T${w1(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function S1(e,t){return!("v4"!==t&&t||!f1.test(e))||!("v6"!==t&&t||!m1.test(e))}function C1(e,t){if(!u1.test(e))return!1;try{const[r]=e.split(".");if(!r)return!1;const n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!("object"!=typeof i||null===i||"typ"in i&&"JWT"!==i?.typ||!i.alg||t&&i.alg!==t)}catch{return!1}}function A1(e,t){return!("v4"!==t&&t||!p1.test(e))||!("v6"!==t&&t||!g1.test(e))}class T1 extends n1{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==L0.string){const t=this._getOrReturnCtx(e);return H0(t,{code:j0.invalid_type,expected:L0.string,received:t.parsedType}),W0}const t=new $0;let r;for(const n of this._def.checks)if("min"===n.kind)e.data.length<n.value&&(r=this._getOrReturnCtx(e,r),H0(r,{code:j0.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),t.dirty());else if("max"===n.kind)e.data.length>n.value&&(r=this._getOrReturnCtx(e,r),H0(r,{code:j0.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),t.dirty());else if("length"===n.kind){const i=e.data.length>n.value,s=e.data.length<n.value;(i||s)&&(r=this._getOrReturnCtx(e,r),i?H0(r,{code:j0.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}):s&&H0(r,{code:j0.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}),t.dirty())}else if("email"===n.kind)d1.test(e.data)||(r=this._getOrReturnCtx(e,r),H0(r,{validation:"email",code:j0.invalid_string,message:n.message}),t.dirty());else if("emoji"===n.kind)h1||(h1=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),h1.test(e.data)||(r=this._getOrReturnCtx(e,r),H0(r,{validation:"emoji",code:j0.invalid_string,message:n.message}),t.dirty());else if("uuid"===n.kind)a1.test(e.data)||(r=this._getOrReturnCtx(e,r),H0(r,{validation:"uuid",code:j0.invalid_string,message:n.message}),t.dirty());else if("nanoid"===n.kind)l1.test(e.data)||(r=this._getOrReturnCtx(e,r),H0(r,{validation:"nanoid",code:j0.invalid_string,message:n.message}),t.dirty());else if("cuid"===n.kind)i1.test(e.data)||(r=this._getOrReturnCtx(e,r),H0(r,{validation:"cuid",code:j0.invalid_string,message:n.message}),t.dirty());else if("cuid2"===n.kind)s1.test(e.data)||(r=this._getOrReturnCtx(e,r),H0(r,{validation:"cuid2",code:j0.invalid_string,message:n.message}),t.dirty());else if("ulid"===n.kind)o1.test(e.data)||(r=this._getOrReturnCtx(e,r),H0(r,{validation:"ulid",code:j0.invalid_string,message:n.message}),t.dirty());else if("url"===n.kind)try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),H0(r,{validation:"url",code:j0.invalid_string,message:n.message}),t.dirty()}else"regex"===n.kind?(n.regex.lastIndex=0,n.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),H0(r,{validation:"regex",code:j0.invalid_string,message:n.message}),t.dirty())):"trim"===n.kind?e.data=e.data.trim():"includes"===n.kind?e.data.includes(n.value,n.position)||(r=this._getOrReturnCtx(e,r),H0(r,{code:j0.invalid_string,validation:{includes:n.value,position:n.position},message:n.message}),t.dirty()):"toLowerCase"===n.kind?e.data=e.data.toLowerCase():"toUpperCase"===n.kind?e.data=e.data.toUpperCase():"startsWith"===n.kind?e.data.startsWith(n.value)||(r=this._getOrReturnCtx(e,r),H0(r,{code:j0.invalid_string,validation:{startsWith:n.value},message:n.message}),t.dirty()):"endsWith"===n.kind?e.data.endsWith(n.value)||(r=this._getOrReturnCtx(e,r),H0(r,{code:j0.invalid_string,validation:{endsWith:n.value},message:n.message}),t.dirty()):"datetime"===n.kind?E1(n).test(e.data)||(r=this._getOrReturnCtx(e,r),H0(r,{code:j0.invalid_string,validation:"datetime",message:n.message}),t.dirty()):"date"===n.kind?b1.test(e.data)||(r=this._getOrReturnCtx(e,r),H0(r,{code:j0.invalid_string,validation:"date",message:n.message}),t.dirty()):"time"===n.kind?x1(n).test(e.data)||(r=this._getOrReturnCtx(e,r),H0(r,{code:j0.invalid_string,validation:"time",message:n.message}),t.dirty()):"duration"===n.kind?c1.test(e.data)||(r=this._getOrReturnCtx(e,r),H0(r,{validation:"duration",code:j0.invalid_string,message:n.message}),t.dirty()):"ip"===n.kind?S1(e.data,n.version)||(r=this._getOrReturnCtx(e,r),H0(r,{validation:"ip",code:j0.invalid_string,message:n.message}),t.dirty()):"jwt"===n.kind?C1(e.data,n.alg)||(r=this._getOrReturnCtx(e,r),H0(r,{validation:"jwt",code:j0.invalid_string,message:n.message}),t.dirty()):"cidr"===n.kind?A1(e.data,n.version)||(r=this._getOrReturnCtx(e,r),H0(r,{validation:"cidr",code:j0.invalid_string,message:n.message}),t.dirty()):"base64"===n.kind?y1.test(e.data)||(r=this._getOrReturnCtx(e,r),H0(r,{validation:"base64",code:j0.invalid_string,message:n.message}),t.dirty()):"base64url"===n.kind?v1.test(e.data)||(r=this._getOrReturnCtx(e,r),H0(r,{validation:"base64url",code:j0.invalid_string,message:n.message}),t.dirty()):I0.assertNever(n);return{status:t.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:j0.invalid_string,...Q0.errToObj(r)})}_addCheck(e){return new T1({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Q0.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Q0.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Q0.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Q0.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Q0.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Q0.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Q0.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Q0.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Q0.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Q0.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Q0.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Q0.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Q0.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...Q0.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...Q0.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Q0.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Q0.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...Q0.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Q0.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Q0.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Q0.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Q0.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Q0.errToObj(t)})}nonempty(e){return this.min(1,Q0.errToObj(e))}trim(){return new T1({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new T1({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new T1({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function D1(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n;return Number.parseInt(e.toFixed(i).replace(".",""))%Number.parseInt(t.toFixed(i).replace(".",""))/10**i}T1.create=e=>new T1({checks:[],typeName:f2.ZodString,coerce:e?.coerce??!1,...r1(e)});class k1 extends n1{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==L0.number){const t=this._getOrReturnCtx(e);return H0(t,{code:j0.invalid_type,expected:L0.number,received:t.parsedType}),W0}let t;const r=new $0;for(const n of this._def.checks)"int"===n.kind?I0.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),H0(t,{code:j0.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty()):"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),H0(t,{code:j0.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),H0(t,{code:j0.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"multipleOf"===n.kind?0!==D1(e.data,n.value)&&(t=this._getOrReturnCtx(e,t),H0(t,{code:j0.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),H0(t,{code:j0.not_finite,message:n.message}),r.dirty()):I0.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Q0.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Q0.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Q0.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Q0.toString(t))}setLimit(e,t,r,n){return new k1({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Q0.toString(n)}]})}_addCheck(e){return new k1({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Q0.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Q0.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Q0.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Q0.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Q0.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Q0.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Q0.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Q0.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Q0.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&I0.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}k1.create=e=>new k1({checks:[],typeName:f2.ZodNumber,coerce:e?.coerce||!1,...r1(e)});class P1 extends n1{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==L0.bigint)return this._getInvalidInput(e);let t;const r=new $0;for(const n of this._def.checks)"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),H0(t,{code:j0.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),H0(t,{code:j0.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),H0(t,{code:j0.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):I0.assertNever(n);return{status:r.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return H0(t,{code:j0.invalid_type,expected:L0.bigint,received:t.parsedType}),W0}gte(e,t){return this.setLimit("min",e,!0,Q0.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Q0.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Q0.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Q0.toString(t))}setLimit(e,t,r,n){return new P1({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Q0.toString(n)}]})}_addCheck(e){return new P1({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Q0.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Q0.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Q0.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Q0.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Q0.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}P1.create=e=>new P1({checks:[],typeName:f2.ZodBigInt,coerce:e?.coerce??!1,...r1(e)});class B1 extends n1{_parse(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==L0.boolean){const t=this._getOrReturnCtx(e);return H0(t,{code:j0.invalid_type,expected:L0.boolean,received:t.parsedType}),W0}return X0(e.data)}}B1.create=e=>new B1({typeName:f2.ZodBoolean,coerce:e?.coerce||!1,...r1(e)});class O1 extends n1{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==L0.date){const t=this._getOrReturnCtx(e);return H0(t,{code:j0.invalid_type,expected:L0.date,received:t.parsedType}),W0}if(Number.isNaN(e.data.getTime()))return H0(this._getOrReturnCtx(e),{code:j0.invalid_date}),W0;const t=new $0;let r;for(const n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(r=this._getOrReturnCtx(e,r),H0(r,{code:j0.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),t.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(r=this._getOrReturnCtx(e,r),H0(r,{code:j0.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),t.dirty()):I0.assertNever(n);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new O1({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Q0.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Q0.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}O1.create=e=>new O1({checks:[],coerce:e?.coerce||!1,typeName:f2.ZodDate,...r1(e)});class R1 extends n1{_parse(e){if(this._getType(e)!==L0.symbol){const t=this._getOrReturnCtx(e);return H0(t,{code:j0.invalid_type,expected:L0.symbol,received:t.parsedType}),W0}return X0(e.data)}}R1.create=e=>new R1({typeName:f2.ZodSymbol,...r1(e)});class F1 extends n1{_parse(e){if(this._getType(e)!==L0.undefined){const t=this._getOrReturnCtx(e);return H0(t,{code:j0.invalid_type,expected:L0.undefined,received:t.parsedType}),W0}return X0(e.data)}}F1.create=e=>new F1({typeName:f2.ZodUndefined,...r1(e)});class I1 extends n1{_parse(e){if(this._getType(e)!==L0.null){const t=this._getOrReturnCtx(e);return H0(t,{code:j0.invalid_type,expected:L0.null,received:t.parsedType}),W0}return X0(e.data)}}I1.create=e=>new I1({typeName:f2.ZodNull,...r1(e)});class M1 extends n1{constructor(){super(...arguments),this._any=!0}_parse(e){return X0(e.data)}}M1.create=e=>new M1({typeName:f2.ZodAny,...r1(e)});class N1 extends n1{constructor(){super(...arguments),this._unknown=!0}_parse(e){return X0(e.data)}}N1.create=e=>new N1({typeName:f2.ZodUnknown,...r1(e)});class L1 extends n1{_parse(e){const t=this._getOrReturnCtx(e);return H0(t,{code:j0.invalid_type,expected:L0.never,received:t.parsedType}),W0}}L1.create=e=>new L1({typeName:f2.ZodNever,...r1(e)});class U1 extends n1{_parse(e){if(this._getType(e)!==L0.undefined){const t=this._getOrReturnCtx(e);return H0(t,{code:j0.invalid_type,expected:L0.void,received:t.parsedType}),W0}return X0(e.data)}}U1.create=e=>new U1({typeName:f2.ZodVoid,...r1(e)});class j1 extends n1{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==L0.array)return H0(t,{code:j0.invalid_type,expected:L0.array,received:t.parsedType}),W0;if(null!==n.exactLength){const e=t.data.length>n.exactLength.value,i=t.data.length<n.exactLength.value;(e||i)&&(H0(t,{code:e?j0.too_big:j0.too_small,minimum:i?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(H0(t,{code:j0.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(H0(t,{code:j0.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>n.type._parseAsync(new e1(t,e,t.path,r)))).then(e=>$0.mergeArray(r,e));const i=[...t.data].map((e,r)=>n.type._parseSync(new e1(t,e,t.path,r)));return $0.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new j1({...this._def,minLength:{value:e,message:Q0.toString(t)}})}max(e,t){return new j1({...this._def,maxLength:{value:e,message:Q0.toString(t)}})}length(e,t){return new j1({...this._def,exactLength:{value:e,message:Q0.toString(t)}})}nonempty(e){return this.min(1,e)}}function z1(e){if(e instanceof V1){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=i2.create(z1(n))}return new V1({...e._def,shape:()=>t})}return e instanceof j1?new j1({...e._def,type:z1(e.element)}):e instanceof i2?i2.create(z1(e.unwrap())):e instanceof s2?s2.create(z1(e.unwrap())):e instanceof X1?X1.create(e.items.map(e=>z1(e))):e}j1.create=(e,t)=>new j1({type:e,minLength:null,maxLength:null,exactLength:null,typeName:f2.ZodArray,...r1(t)});class V1 extends n1{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=I0.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==L0.object){const t=this._getOrReturnCtx(e);return H0(t,{code:j0.invalid_type,expected:L0.object,received:t.parsedType}),W0}const{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:i}=this._getCached(),s=[];if(!(this._def.catchall instanceof L1&&"strip"===this._def.unknownKeys))for(const a in r.data)i.includes(a)||s.push(a);const o=[];for(const a of i){const e=n[a],t=r.data[a];o.push({key:{status:"valid",value:a},value:e._parse(new e1(r,t,r.path,a)),alwaysSet:a in r.data})}if(this._def.catchall instanceof L1){const e=this._def.unknownKeys;if("passthrough"===e)for(const t of s)o.push({key:{status:"valid",value:t},value:{status:"valid",value:r.data[t]}});else if("strict"===e)s.length>0&&(H0(r,{code:j0.unrecognized_keys,keys:s}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of s){const n=r.data[t];o.push({key:{status:"valid",value:t},value:e._parse(new e1(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const e=[];for(const t of o){const r=await t.key,n=await t.value;e.push({key:r,value:n,alwaysSet:t.alwaysSet})}return e}).then(e=>$0.mergeObjectSync(t,e)):$0.mergeObjectSync(t,o)}get shape(){return this._def.shape()}strict(e){return Q0.errToObj,new V1({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{const n=this._def.errorMap?.(t,r).message??r.defaultError;return"unrecognized_keys"===t.code?{message:Q0.errToObj(e).message??n}:{message:n}}}:{}})}strip(){return new V1({...this._def,unknownKeys:"strip"})}passthrough(){return new V1({...this._def,unknownKeys:"passthrough"})}extend(e){return new V1({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new V1({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:f2.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new V1({...this._def,catchall:e})}pick(e){const t={};for(const r of I0.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new V1({...this._def,shape:()=>t})}omit(e){const t={};for(const r of I0.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new V1({...this._def,shape:()=>t})}deepPartial(){return z1(this)}partial(e){const t={};for(const r of I0.objectKeys(this.shape)){const n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()}return new V1({...this._def,shape:()=>t})}required(e){const t={};for(const r of I0.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof i2;)e=e._def.innerType;t[r]=e}return new V1({...this._def,shape:()=>t})}keyof(){return Q1(I0.objectKeys(this.shape))}}V1.create=(e,t)=>new V1({shape:()=>e,unknownKeys:"strip",catchall:L1.create(),typeName:f2.ZodObject,...r1(t)}),V1.strictCreate=(e,t)=>new V1({shape:()=>e,unknownKeys:"strict",catchall:L1.create(),typeName:f2.ZodObject,...r1(t)}),V1.lazycreate=(e,t)=>new V1({shape:e,unknownKeys:"strip",catchall:L1.create(),typeName:f2.ZodObject,...r1(t)});class G1 extends n1{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{const r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const n of e)if("dirty"===n.result.status)return t.common.issues.push(...n.ctx.common.issues),n.result;const r=e.map(e=>new z0(e.ctx.common.issues));return H0(t,{code:j0.invalid_union,unionErrors:r}),W0});{let e;const n=[];for(const s of r){const r={...t,common:{...t.common,issues:[]},parent:null},i=s._parseSync({data:t.data,path:t.path,parent:r});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const i=n.map(e=>new z0(e));return H0(t,{code:j0.invalid_union,unionErrors:i}),W0}}get options(){return this._def.options}}G1.create=(e,t)=>new G1({options:e,typeName:f2.ZodUnion,...r1(t)});const H1=e=>e instanceof Z1?H1(e.schema):e instanceof n2?H1(e.innerType()):e instanceof J1?[e.value]:e instanceof e2?e.options:e instanceof t2?I0.objectValues(e.enum):e instanceof o2?H1(e._def.innerType):e instanceof F1?[void 0]:e instanceof I1?[null]:e instanceof i2?[void 0,...H1(e.unwrap())]:e instanceof s2?[null,...H1(e.unwrap())]:e instanceof u2||e instanceof d2?H1(e.unwrap()):e instanceof a2?H1(e._def.innerType):[];class $1 extends n1{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==L0.object)return H0(t,{code:j0.invalid_type,expected:L0.object,received:t.parsedType}),W0;const r=this.discriminator,n=t.data[r],i=this.optionsMap.get(n);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(H0(t,{code:j0.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),W0)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const n=new Map;for(const i of t){const t=H1(i.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const r of t){if(n.has(r))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(r)}`);n.set(r,i)}}return new $1({typeName:f2.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...r1(r)})}}function W1(e,t){const r=U0(e),n=U0(t);if(e===t)return{valid:!0,data:e};if(r===L0.object&&n===L0.object){const r=I0.objectKeys(t),n=I0.objectKeys(e).filter(e=>-1!==r.indexOf(e)),i={...e,...t};for(const s of n){const r=W1(e[s],t[s]);if(!r.valid)return{valid:!1};i[s]=r.data}return{valid:!0,data:i}}if(r===L0.array&&n===L0.array){if(e.length!==t.length)return{valid:!1};const r=[];for(let n=0;n<e.length;n++){const i=W1(e[n],t[n]);if(!i.valid)return{valid:!1};r.push(i.data)}return{valid:!0,data:r}}return r===L0.date&&n===L0.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}class q1 extends n1{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if(Y0(e)||Y0(n))return W0;const i=W1(e.value,n.value);return i.valid?((K0(e)||K0(n))&&t.dirty(),{status:t.value,value:i.data}):(H0(r,{code:j0.invalid_intersection_types}),W0)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>n(e,t)):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}q1.create=(e,t,r)=>new q1({left:e,right:t,typeName:f2.ZodIntersection,...r1(r)});class X1 extends n1{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==L0.array)return H0(r,{code:j0.invalid_type,expected:L0.array,received:r.parsedType}),W0;if(r.data.length<this._def.items.length)return H0(r,{code:j0.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),W0;!this._def.rest&&r.data.length>this._def.items.length&&(H0(r,{code:j0.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const n=[...r.data].map((e,t)=>{const n=this._def.items[t]||this._def.rest;return n?n._parse(new e1(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(n).then(e=>$0.mergeArray(t,e)):$0.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new X1({...this._def,rest:e})}}X1.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new X1({items:e,typeName:f2.ZodTuple,rest:null,...r1(t)})};class Y1 extends n1{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==L0.map)return H0(r,{code:j0.invalid_type,expected:L0.map,received:r.parsedType}),W0;const n=this._def.keyType,i=this._def.valueType,s=[...r.data.entries()].map(([e,t],s)=>({key:n._parse(new e1(r,e,r.path,[s,"key"])),value:i._parse(new e1(r,t,r.path,[s,"value"]))}));if(r.common.async){const e=new Map;return Promise.resolve().then(async()=>{for(const r of s){const n=await r.key,i=await r.value;if("aborted"===n.status||"aborted"===i.status)return W0;"dirty"!==n.status&&"dirty"!==i.status||t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}})}{const e=new Map;for(const r of s){const n=r.key,i=r.value;if("aborted"===n.status||"aborted"===i.status)return W0;"dirty"!==n.status&&"dirty"!==i.status||t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}}}Y1.create=(e,t,r)=>new Y1({valueType:t,keyType:e,typeName:f2.ZodMap,...r1(r)});class K1 extends n1{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==L0.set)return H0(r,{code:j0.invalid_type,expected:L0.set,received:r.parsedType}),W0;const n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(H0(r,{code:j0.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(H0(r,{code:j0.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());const i=this._def.valueType;function s(e){const r=new Set;for(const n of e){if("aborted"===n.status)return W0;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}const o=[...r.data.values()].map((e,t)=>i._parse(new e1(r,e,r.path,t)));return r.common.async?Promise.all(o).then(e=>s(e)):s(o)}min(e,t){return new K1({...this._def,minSize:{value:e,message:Q0.toString(t)}})}max(e,t){return new K1({...this._def,maxSize:{value:e,message:Q0.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}K1.create=(e,t)=>new K1({valueType:e,minSize:null,maxSize:null,typeName:f2.ZodSet,...r1(t)});class Z1 extends n1{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Z1.create=(e,t)=>new Z1({getter:e,typeName:f2.ZodLazy,...r1(t)});class J1 extends n1{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return H0(t,{received:t.data,code:j0.invalid_literal,expected:this._def.value}),W0}return{status:"valid",value:e.data}}get value(){return this._def.value}}function Q1(e,t){return new e2({values:e,typeName:f2.ZodEnum,...r1(t)})}J1.create=(e,t)=>new J1({value:e,typeName:f2.ZodLiteral,...r1(t)});class e2 extends n1{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),r=this._def.values;return H0(t,{expected:I0.joinValues(r),received:t.parsedType,code:j0.invalid_type}),W0}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return H0(t,{received:t.data,code:j0.invalid_enum_value,options:r}),W0}return X0(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return e2.create(e,{...this._def,...t})}exclude(e,t=this._def){return e2.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}e2.create=Q1;class t2 extends n1{_parse(e){const t=I0.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==L0.string&&r.parsedType!==L0.number){const e=I0.objectValues(t);return H0(r,{expected:I0.joinValues(e),received:r.parsedType,code:j0.invalid_type}),W0}if(this._cache||(this._cache=new Set(I0.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const e=I0.objectValues(t);return H0(r,{received:r.data,code:j0.invalid_enum_value,options:e}),W0}return X0(e.data)}get enum(){return this._def.values}}t2.create=(e,t)=>new t2({values:e,typeName:f2.ZodNativeEnum,...r1(t)});class r2 extends n1{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==L0.promise&&!1===t.common.async)return H0(t,{code:j0.invalid_type,expected:L0.promise,received:t.parsedType}),W0;const r=t.parsedType===L0.promise?t.data:Promise.resolve(t.data);return X0(r.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}r2.create=(e,t)=>new r2({type:e,typeName:f2.ZodPromise,...r1(t)});class n2 extends n1{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===f2.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:e=>{H0(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===n.type){const e=n.transform(r.data,i);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return W0;const n=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===n.status?W0:"dirty"===n.status||"dirty"===t.value?q0(n.value):n});{if("aborted"===t.value)return W0;const n=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===n.status?W0:"dirty"===n.status||"dirty"===t.value?q0(n.value):n}}if("refinement"===n.type){const e=e=>{const t=n.refinement(e,i);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===r.common.async){const n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?W0:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?W0:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))))}if("transform"===n.type){if(!1===r.common.async){const e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Z0(e))return W0;const s=n.transform(e.value,i);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>Z0(e)?Promise.resolve(n.transform(e.value,i)).then(e=>({status:t.value,value:e})):W0)}I0.assertNever(n)}}n2.create=(e,t,r)=>new n2({schema:e,typeName:f2.ZodEffects,effect:t,...r1(r)}),n2.createWithPreprocess=(e,t,r)=>new n2({schema:t,effect:{type:"preprocess",transform:e},typeName:f2.ZodEffects,...r1(r)});class i2 extends n1{_parse(e){return this._getType(e)===L0.undefined?X0(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}i2.create=(e,t)=>new i2({innerType:e,typeName:f2.ZodOptional,...r1(t)});class s2 extends n1{_parse(e){return this._getType(e)===L0.null?X0(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}s2.create=(e,t)=>new s2({innerType:e,typeName:f2.ZodNullable,...r1(t)});class o2 extends n1{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===L0.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}o2.create=(e,t)=>new o2({innerType:e,typeName:f2.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...r1(t)});class a2 extends n1{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return J0(n)?n.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new z0(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new z0(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}a2.create=(e,t)=>new a2({innerType:e,typeName:f2.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...r1(t)});class l2 extends n1{_parse(e){if(this._getType(e)!==L0.nan){const t=this._getOrReturnCtx(e);return H0(t,{code:j0.invalid_type,expected:L0.nan,received:t.parsedType}),W0}return{status:"valid",value:e.data}}}l2.create=e=>new l2({typeName:f2.ZodNaN,...r1(e)});class u2 extends n1{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class c2 extends n1{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?W0:"dirty"===e.status?(t.dirty(),q0(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{const e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?W0:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new c2({in:e,out:t,typeName:f2.ZodPipeline})}}class d2 extends n1{_parse(e){const t=this._def.innerType._parse(e),r=e=>(Z0(e)&&(e.value=Object.freeze(e.value)),e);return J0(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}function h2(e,t){const r="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof r?{message:r}:r}var f2;d2.create=(e,t)=>new d2({innerType:e,typeName:f2.ZodReadonly,...r1(t)}),V1.lazycreate,function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(f2||(f2={})),e("dJ",(e,t={message:`Input not instance of ${e.name}`})=>function(e,t={},r){return e?M1.create().superRefine((n,i)=>{const s=e(n);if(s instanceof Promise)return s.then(e=>{if(!e){const e=h2(t,n),s=e.fatal??r??!0;i.addIssue({code:"custom",...e,fatal:s})}});if(!s){const e=h2(t,n),s=e.fatal??r??!0;i.addIssue({code:"custom",...e,fatal:s})}}):M1.create()}(t=>t instanceof e,t)),e("bV",T1.create),e("dl",k1.create),e("dv",B1.create),F1.create,I1.create,M1.create,L1.create,e("dI",j1.create),e("bU",V1.create),V1.strictCreate,G1.create,e("dt",$1.create),q1.create,X1.create,Z1.create,e("du",J1.create),e2.create,t2.create,r2.create,n2.create,i2.create,s2.create,n2.createWithPreprocess;var p2="Dialog",[m2,g2]=Zj(p2),[y2,v2]=m2(p2),_2=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:i,onOpenChange:s,modal:o=!0}=e,a=$.useRef(null),l=$.useRef(null),[u,c]=Wz({prop:n,defaultProp:i??!1,onChange:s,caller:p2});return te.jsx(y2,{scope:t,triggerRef:a,contentRef:l,contentId:bV(),titleId:bV(),descriptionId:bV(),open:u,onOpenChange:c,onOpenToggle:$.useCallback(()=>c(e=>!e),[c]),modal:o,children:r})};_2.displayName=p2;var b2="DialogTrigger",w2=$.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=v2(b2,r),s=jj(t,i.triggerRef);return te.jsx(Wj.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":z2(i.open),...n,ref:s,onClick:nz(e.onClick,i.onOpenToggle)})});w2.displayName=b2;var x2="DialogPortal",[E2,S2]=m2(x2,{forceMount:void 0}),C2=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:i}=e,s=v2(x2,t);return te.jsx(E2,{scope:t,forceMount:r,children:$.Children.map(n,e=>te.jsx(Yj,{present:r||s.open,children:te.jsx(MH,{asChild:!0,container:i,children:e})}))})};C2.displayName=x2;var A2="DialogOverlay",T2=$.forwardRef((e,t)=>{const r=S2(A2,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,s=v2(A2,e.__scopeDialog);return s.modal?te.jsx(Yj,{present:n||s.open,children:te.jsx(k2,{...i,ref:t})}):null});T2.displayName=A2;var D2=zj("DialogOverlay.RemoveScroll"),k2=$.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=v2(A2,r);return te.jsx(Y$,{as:D2,allowPinchZoom:!0,shards:[i.contentRef],children:te.jsx(Wj.div,{"data-state":z2(i.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),P2="DialogContent",B2=$.forwardRef((e,t)=>{const r=S2(P2,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,s=v2(P2,e.__scopeDialog);return te.jsx(Yj,{present:n||s.open,children:s.modal?te.jsx(O2,{...i,ref:t}):te.jsx(R2,{...i,ref:t})})});B2.displayName=P2;var O2=$.forwardRef((e,t)=>{const r=v2(P2,e.__scopeDialog),n=$.useRef(null),i=jj(t,r.contentRef,n);return $.useEffect(()=>{const e=n.current;if(e)return a$(e)},[]),te.jsx(F2,{...e,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:nz(e.onCloseAutoFocus,e=>{e.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:nz(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;(2===t.button||r)&&e.preventDefault()}),onFocusOutside:nz(e.onFocusOutside,e=>e.preventDefault())})}),R2=$.forwardRef((e,t)=>{const r=v2(P2,e.__scopeDialog),n=$.useRef(!1),i=$.useRef(!1);return te.jsx(F2,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(n.current||r.triggerRef.current?.focus(),t.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(n.current=!0,"pointerdown"===t.detail.originalEvent.type&&(i.current=!0));const s=t.target,o=r.triggerRef.current?.contains(s);o&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&i.current&&t.preventDefault()}})}),F2=$.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=e,a=v2(P2,r),l=$.useRef(null),u=jj(t,l);return oV(),te.jsxs(te.Fragment,{children:[te.jsx(dV,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:s,children:te.jsx(Qz,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":z2(a.open),...o,ref:u,onDismiss:()=>a.onOpenChange(!1)})}),te.jsxs(te.Fragment,{children:[te.jsx($2,{titleId:a.titleId}),te.jsx(W2,{contentRef:l,descriptionId:a.descriptionId})]})]})}),I2="DialogTitle",M2=$.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=v2(I2,r);return te.jsx(Wj.h2,{id:i.titleId,...n,ref:t})});M2.displayName=I2;var N2="DialogDescription",L2=$.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=v2(N2,r);return te.jsx(Wj.p,{id:i.descriptionId,...n,ref:t})});L2.displayName=N2;var U2="DialogClose",j2=$.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=v2(U2,r);return te.jsx(Wj.button,{type:"button",...n,ref:t,onClick:nz(e.onClick,()=>i.onOpenChange(!1))})});function z2(e){return e?"open":"closed"}j2.displayName=U2;var V2="DialogTitleWarning",[G2,H2]=function(e,t){const r=$.createContext(t),n=e=>{const{children:t,...n}=e,i=$.useMemo(()=>n,Object.values(n));return te.jsx(r.Provider,{value:i,children:t})};return n.displayName=e+"Provider",[n,function(n){const i=$.useContext(r);if(i)return i;if(void 0!==t)return t;throw new Error(`\`${n}\` must be used within \`${e}\``)}]}(V2,{contentName:P2,titleName:I2,docsSlug:"dialog"}),$2=({titleId:e})=>{const t=H2(V2),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.\n\nIf you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return $.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},W2=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${H2("DialogDescriptionWarning").contentName}}.`;return $.useEffect(()=>{const n=e.current?.getAttribute("aria-describedby");t&&n&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},q2=e("bM",_2),X2=w2,Y2=e("bN",C2),K2=e("bG",T2),Z2=e("bH",B2),J2=e("bK",M2),Q2=e("bL",L2),e3=e("bI",j2),t3=Symbol.for("react.lazy"),r3=q[" use ".trim().toString()];function n3(e){return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===t3&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t;var t}function i3(e){const t=o3(e),r=$.forwardRef((e,r)=>{let{children:n,...i}=e;n3(n)&&"function"==typeof r3&&(n=r3(n._payload));const s=$.Children.toArray(n),o=s.find(l3);if(o){const e=o.props.children,n=s.map(t=>t===o?$.Children.count(e)>1?$.Children.only(null):$.isValidElement(e)?e.props.children:null:t);return te.jsx(t,{...i,ref:r,children:$.isValidElement(e)?$.cloneElement(e,void 0,n):null})}return te.jsx(t,{...i,ref:r,children:n})});return r.displayName=`${e}.Slot`,r}var s3=e("bQ",i3("Slot"));function o3(e){const t=$.forwardRef((e,t)=>{let{children:r,...n}=e;if(n3(r)&&"function"==typeof r3&&(r=r3(r._payload)),$.isValidElement(r)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}(r),i=function(e,t){const r={...t};for(const n in t){const i=e[n],s=t[n];/^on[A-Z]/.test(n)?i&&s?r[n]=(...e)=>{const t=s(...e);return i(...e),t}:i&&(r[n]=i):"style"===n?r[n]={...i,...s}:"className"===n&&(r[n]=[i,s].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==$.Fragment&&(i.ref=t?Uj(t,e):e),$.cloneElement(r,i)}return $.Children.count(r)>1?$.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var a3=Symbol("radix.slottable");function l3(e){return $.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===a3}var u3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const r=i3(`Primitive.${t}`),n=$.forwardRef((e,n)=>{const{asChild:i,...s}=e,o=i?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),te.jsx(o,{...s,ref:n})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),c3=$.forwardRef((e,t)=>te.jsx(u3.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));function d3(...e){const t=e[0];if(1===e.length)return t;const r=()=>{const r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const n=r.reduce((t,{useScope:r,scopeName:n})=>({...t,...r(e)[`__scope${n}`]}),{});return $.useMemo(()=>({[`__scope${t.scopeName}`]:n}),[n])}};return r.scopeName=t.scopeName,r}c3.displayName="Label",e("bO",c3);var h3="Progress",f3=100,[p3,m3]=function(e,t=[]){let r=[];const n=()=>{const t=r.map(e=>$.createContext(e));return function(r){const n=r?.[e]||t;return $.useMemo(()=>({[`__scope${e}`]:{...r,[e]:n}}),[r,n])}};return n.scopeName=e,[function(t,n){const i=$.createContext(n);i.displayName=t+"Context";const s=r.length;r=[...r,n];const o=t=>{const{scope:r,children:n,...o}=t,a=r?.[e]?.[s]||i,l=$.useMemo(()=>o,Object.values(o));return te.jsx(a.Provider,{value:l,children:n})};return o.displayName=t+"Provider",[o,function(r,o){const a=o?.[e]?.[s]||i,l=$.useContext(a);if(l)return l;if(void 0!==n)return n;throw new Error(`\`${r}\` must be used within \`${t}\``)}]},d3(n,...t)]}(h3),[g3,y3]=p3(h3),v3=$.forwardRef((e,t)=>{const{__scopeProgress:r,value:n=null,max:i,getValueLabel:s=w3,...o}=e;!i&&0!==i||S3(i)||console.error(`Invalid prop \`max\` of value \`${i}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`);const a=S3(i)?i:f3;null===n||C3(n,a)||console.error(function(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:\n  - a positive number\n  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)\n  - \`null\` or \`undefined\` if the progress is indeterminate.\n\nDefaulting to \`null\`.`}(`${n}`,"Progress"));const l=C3(n,a)?n:null,u=E3(l)?s(l,a):void 0;return te.jsx(g3,{scope:r,value:l,max:a,children:te.jsx(u3.div,{"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":E3(l)?l:void 0,"aria-valuetext":u,role:"progressbar","data-state":x3(l,a),"data-value":l??void 0,"data-max":a,...o,ref:t})})});v3.displayName=h3;var _3="ProgressIndicator",b3=$.forwardRef((e,t)=>{const{__scopeProgress:r,...n}=e,i=y3(_3,r);return te.jsx(u3.div,{"data-state":x3(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...n,ref:t})});function w3(e,t){return`${Math.round(e/t*100)}%`}function x3(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function E3(e){return"number"==typeof e}function S3(e){return E3(e)&&!isNaN(e)&&e>0}function C3(e,t){return E3(e)&&!isNaN(e)&&e<=t&&e>=0}b3.displayName=_3,e("bY",v3),e("bZ",b3);var A3="AlertDialog",[T3,D3]=Zj(A3,[g2]),k3=g2(),P3=e=>{const{__scopeAlertDialog:t,...r}=e,n=k3(t);return te.jsx(q2,{...n,...r,modal:!0})};P3.displayName=A3,$.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,i=k3(r);return te.jsx(X2,{...i,...n,ref:t})}).displayName="AlertDialogTrigger";var B3=e=>{const{__scopeAlertDialog:t,...r}=e,n=k3(t);return te.jsx(Y2,{...n,...r})};B3.displayName="AlertDialogPortal";var O3=$.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,i=k3(r);return te.jsx(K2,{...i,...n,ref:t})});O3.displayName="AlertDialogOverlay";var R3="AlertDialogContent",[F3,I3]=T3(R3),M3=Hj("AlertDialogContent"),N3=$.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...i}=e,s=k3(r),o=$.useRef(null),a=jj(t,o),l=$.useRef(null);return te.jsx(G2,{contentName:R3,titleName:L3,docsSlug:"alert-dialog",children:te.jsx(F3,{scope:r,cancelRef:l,children:te.jsxs(Z2,{role:"alertdialog",...s,...i,ref:a,onOpenAutoFocus:nz(i.onOpenAutoFocus,e=>{e.preventDefault(),l.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[te.jsx(M3,{children:n}),te.jsx($3,{contentRef:o})]})})})});N3.displayName=R3;var L3="AlertDialogTitle",U3=$.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,i=k3(r);return te.jsx(J2,{...i,...n,ref:t})});U3.displayName=L3;var j3="AlertDialogDescription",z3=$.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,i=k3(r);return te.jsx(Q2,{...i,...n,ref:t})});z3.displayName=j3;var V3=$.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,i=k3(r);return te.jsx(e3,{...i,...n,ref:t})});V3.displayName="AlertDialogAction";var G3="AlertDialogCancel",H3=$.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:i}=I3(G3,r),s=k3(r),o=jj(t,i);return te.jsx(e3,{...s,...n,ref:o})});H3.displayName=G3;var $3=({contentRef:e})=>{const t=`\`${R3}\` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the \`${R3}\` by passing a \`${j3}\` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${R3}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return $.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null};function W3(e){const t=$.useRef({value:e,previous:e});return $.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}e("c5",P3),e("c4",B3),e("b_",O3),e("b$",N3),e("c2",V3),e("c3",H3),e("c0",U3),e("c1",z3);var q3=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),X3=$.forwardRef((e,t)=>te.jsx(Wj.span,{...e,ref:t,style:{...q3,...e.style}}));X3.displayName="VisuallyHidden";var Y3=X3,K3=[" ","Enter","ArrowUp","ArrowDown"],Z3=[" ","Enter"],J3="Select",[Q3,e4,t4]=qz(J3),[r4,n4]=Zj(J3,[t4,gH]),i4=gH(),[s4,o4]=r4(J3),[a4,l4]=r4(J3),u4=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:i,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:u,name:c,autoComplete:d,disabled:h,required:f,form:p}=e,m=i4(t),[g,y]=$.useState(null),[v,_]=$.useState(null),[b,w]=$.useState(!1),x=tz(u),[E,S]=Wz({prop:n,defaultProp:i??!1,onChange:s,caller:J3}),[C,A]=Wz({prop:o,defaultProp:a,onChange:l,caller:J3}),T=$.useRef(null),D=!g||p||!!g.closest("form"),[k,P]=$.useState(new Set),B=Array.from(k).map(e=>e.props.value).join(";");return te.jsx(OH,{...m,children:te.jsxs(s4,{required:f,scope:t,trigger:g,onTriggerChange:y,valueNode:v,onValueNodeChange:_,valueNodeHasChildren:b,onValueNodeHasChildrenChange:w,contentId:bV(),value:C,onValueChange:A,open:E,onOpenChange:S,dir:x,triggerPointerDownPosRef:T,disabled:h,children:[te.jsx(Q3.Provider,{scope:t,children:te.jsx(a4,{scope:e.__scopeSelect,onNativeOptionAdd:$.useCallback(e=>{P(t=>new Set(t).add(e))},[]),onNativeOptionRemove:$.useCallback(e=>{P(t=>{const r=new Set(t);return r.delete(e),r})},[]),children:r})}),D?te.jsxs(Z4,{"aria-hidden":!0,required:f,tabIndex:-1,name:c,autoComplete:d,value:C,onChange:e=>A(e.target.value),disabled:h,form:p,children:[void 0===C?te.jsx("option",{value:""}):null,Array.from(k)]},B):null]})})};u4.displayName=J3;var c4="SelectTrigger",d4=$.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...i}=e,s=i4(r),o=o4(c4,r),a=o.disabled||n,l=jj(t,o.onTriggerChange),u=e4(r),c=$.useRef("touch"),[d,h,f]=Q4(e=>{const t=u().filter(e=>!e.disabled),r=t.find(e=>e.value===o.value),n=e8(t,e,r);void 0!==n&&o.onValueChange(n.value)}),p=e=>{a||(o.onOpenChange(!0),f()),e&&(o.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return te.jsx(RH,{asChild:!0,...s,children:te.jsx(Wj.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":J4(o.value)?"":void 0,...i,ref:l,onClick:nz(i.onClick,e=>{e.currentTarget.focus(),"mouse"!==c.current&&p(e)}),onPointerDown:nz(i.onPointerDown,e=>{c.current=e.pointerType;const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(p(e),e.preventDefault())}),onKeyDown:nz(i.onKeyDown,e=>{const t=""!==d.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||h(e.key),t&&" "===e.key||K3.includes(e.key)&&(p(),e.preventDefault())})})})});d4.displayName=c4;var h4="SelectValue",f4=$.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:i,children:s,placeholder:o="",...a}=e,l=o4(h4,r),{onValueNodeHasChildrenChange:u}=l,c=void 0!==s,d=jj(t,l.onValueNodeChange);return Xj(()=>{u(c)},[u,c]),te.jsx(Wj.span,{...a,ref:d,style:{pointerEvents:"none"},children:J4(l.value)?te.jsx(te.Fragment,{children:o}):s})});f4.displayName=h4;var p4=$.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...i}=e;return te.jsx(Wj.span,{"aria-hidden":!0,...i,ref:t,children:n||""})});p4.displayName="SelectIcon";var m4=e=>te.jsx(MH,{asChild:!0,...e});m4.displayName="SelectPortal";var g4="SelectContent",y4=$.forwardRef((e,t)=>{const r=o4(g4,e.__scopeSelect),[n,i]=$.useState();if(Xj(()=>{i(new DocumentFragment)},[]),!r.open){const t=n;return t?ld.createPortal(te.jsx(_4,{scope:e.__scopeSelect,children:te.jsx(Q3.Slot,{scope:e.__scopeSelect,children:te.jsx("div",{children:e.children})})}),t):null}return te.jsx(x4,{...e,ref:t})});y4.displayName=g4;var v4=10,[_4,b4]=r4(g4),w4=zj("SelectContent.RemoveScroll"),x4=$.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:u,alignOffset:c,arrowPadding:d,collisionBoundary:h,collisionPadding:f,sticky:p,hideWhenDetached:m,avoidCollisions:g,...y}=e,v=o4(g4,r),[_,b]=$.useState(null),[w,x]=$.useState(null),E=jj(t,e=>b(e)),[S,C]=$.useState(null),[A,T]=$.useState(null),D=e4(r),[k,P]=$.useState(!1),B=$.useRef(!1);$.useEffect(()=>{if(_)return a$(_)},[_]),oV();const O=$.useCallback(e=>{const[t,...r]=D().map(e=>e.ref.current),[n]=r.slice(-1),i=document.activeElement;for(const s of e){if(s===i)return;if(s?.scrollIntoView({block:"nearest"}),s===t&&w&&(w.scrollTop=0),s===n&&w&&(w.scrollTop=w.scrollHeight),s?.focus(),document.activeElement!==i)return}},[D,w]),R=$.useCallback(()=>O([S,_]),[O,S,_]);$.useEffect(()=>{k&&R()},[k,R]);const{onOpenChange:F,triggerPointerDownPosRef:I}=v;$.useEffect(()=>{if(_){let e={x:0,y:0};const t=t=>{e={x:Math.abs(Math.round(t.pageX)-(I.current?.x??0)),y:Math.abs(Math.round(t.pageY)-(I.current?.y??0))}},r=r=>{e.x<=10&&e.y<=10?r.preventDefault():_.contains(r.target)||F(!1),document.removeEventListener("pointermove",t),I.current=null};return null!==I.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",r,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",r,{capture:!0})}}},[_,F,I]),$.useEffect(()=>{const e=()=>F(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[F]);const[M,N]=Q4(e=>{const t=D().filter(e=>!e.disabled),r=t.find(e=>e.ref.current===document.activeElement),n=e8(t,e,r);n&&setTimeout(()=>n.ref.current.focus())}),L=$.useCallback((e,t,r)=>{const n=!B.current&&!r;(void 0!==v.value&&v.value===t||n)&&(C(e),n&&(B.current=!0))},[v.value]),U=$.useCallback(()=>_?.focus(),[_]),j=$.useCallback((e,t,r)=>{const n=!B.current&&!r;(void 0!==v.value&&v.value===t||n)&&T(e)},[v.value]),z="popper"===n?S4:E4,V=z===S4?{side:a,sideOffset:l,align:u,alignOffset:c,arrowPadding:d,collisionBoundary:h,collisionPadding:f,sticky:p,hideWhenDetached:m,avoidCollisions:g}:{};return te.jsx(_4,{scope:r,content:_,viewport:w,onViewportChange:x,itemRefCallback:L,selectedItem:S,onItemLeave:U,itemTextRefCallback:j,focusSelectedItem:R,selectedItemText:A,position:n,isPositioned:k,searchRef:M,children:te.jsx(Y$,{as:w4,allowPinchZoom:!0,children:te.jsx(dV,{asChild:!0,trapped:v.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:nz(i,e=>{v.trigger?.focus({preventScroll:!0}),e.preventDefault()}),children:te.jsx(Qz,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:te.jsx(z,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:e=>e.preventDefault(),...y,...V,onPlaced:()=>P(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:nz(y.onKeyDown,e=>{const t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||N(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=D().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const r=e.target,n=t.indexOf(r);t=t.slice(n+1)}setTimeout(()=>O(t)),e.preventDefault()}})})})})})})});x4.displayName="SelectContentImpl";var E4=$.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...i}=e,s=o4(g4,r),o=b4(g4,r),[a,l]=$.useState(null),[u,c]=$.useState(null),d=jj(t,e=>c(e)),h=e4(r),f=$.useRef(!1),p=$.useRef(!0),{viewport:m,selectedItem:g,selectedItemText:y,focusSelectedItem:v}=o,_=$.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&u&&m&&g&&y){const e=s.trigger.getBoundingClientRect(),t=u.getBoundingClientRect(),r=s.valueNode.getBoundingClientRect(),i=y.getBoundingClientRect();if("rtl"!==s.dir){const n=i.left-t.left,s=r.left-n,o=e.left-s,l=e.width+o,u=Math.max(l,t.width),c=window.innerWidth-v4,d=rz(s,[v4,Math.max(v4,c-u)]);a.style.minWidth=l+"px",a.style.left=d+"px"}else{const n=t.right-i.right,s=window.innerWidth-r.right-n,o=window.innerWidth-e.right-s,l=e.width+o,u=Math.max(l,t.width),c=window.innerWidth-v4,d=rz(s,[v4,Math.max(v4,c-u)]);a.style.minWidth=l+"px",a.style.right=d+"px"}const o=h(),l=window.innerHeight-2*v4,c=m.scrollHeight,d=window.getComputedStyle(u),p=parseInt(d.borderTopWidth,10),v=parseInt(d.paddingTop,10),_=parseInt(d.borderBottomWidth,10),b=p+v+c+parseInt(d.paddingBottom,10)+_,w=Math.min(5*g.offsetHeight,b),x=window.getComputedStyle(m),E=parseInt(x.paddingTop,10),S=parseInt(x.paddingBottom,10),C=e.top+e.height/2-v4,A=l-C,T=g.offsetHeight/2,D=p+v+(g.offsetTop+T),k=b-D;if(D<=C){const e=o.length>0&&g===o[o.length-1].ref.current;a.style.bottom="0px";const t=u.clientHeight-m.offsetTop-m.offsetHeight,r=D+Math.max(A,T+(e?S:0)+t+_);a.style.height=r+"px"}else{const e=o.length>0&&g===o[0].ref.current;a.style.top="0px";const t=Math.max(C,p+m.offsetTop+(e?E:0)+T)+k;a.style.height=t+"px",m.scrollTop=D-C+m.offsetTop}a.style.margin=`${v4}px 0`,a.style.minHeight=w+"px",a.style.maxHeight=l+"px",n?.(),requestAnimationFrame(()=>f.current=!0)}},[h,s.trigger,s.valueNode,a,u,m,g,y,s.dir,n]);Xj(()=>_(),[_]);const[b,w]=$.useState();Xj(()=>{u&&w(window.getComputedStyle(u).zIndex)},[u]);const x=$.useCallback(e=>{e&&!0===p.current&&(_(),v?.(),p.current=!1)},[_,v]);return te.jsx(C4,{scope:r,contentWrapper:a,shouldExpandOnScrollRef:f,onScrollButtonChange:x,children:te.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:b},children:te.jsx(Wj.div,{...i,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});E4.displayName="SelectItemAlignedPosition";var S4=$.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:i=v4,...s}=e,o=i4(r);return te.jsx(FH,{...o,...s,ref:t,align:n,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});S4.displayName="SelectPopperPosition";var[C4,A4]=r4(g4,{}),T4="SelectViewport",D4=$.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...i}=e,s=b4(T4,r),o=A4(T4,r),a=jj(t,s.onViewportChange),l=$.useRef(0);return te.jsxs(te.Fragment,{children:[te.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),te.jsx(Q3.Slot,{scope:r,children:te.jsx(Wj.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:nz(i.onScroll,e=>{const t=e.currentTarget,{contentWrapper:r,shouldExpandOnScrollRef:n}=o;if(n?.current&&r){const e=Math.abs(l.current-t.scrollTop);if(e>0){const n=window.innerHeight-2*v4,i=parseFloat(r.style.minHeight),s=parseFloat(r.style.height),o=Math.max(i,s);if(o<n){const i=o+e,s=Math.min(n,i),a=i-s;r.style.height=s+"px","0px"===r.style.bottom&&(t.scrollTop=a>0?a:0,r.style.justifyContent="flex-end")}}}l.current=t.scrollTop})})})]})});D4.displayName=T4;var k4="SelectGroup",[P4,B4]=r4(k4),O4=$.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,i=bV();return te.jsx(P4,{scope:r,id:i,children:te.jsx(Wj.div,{role:"group","aria-labelledby":i,...n,ref:t})})});O4.displayName=k4;var R4="SelectLabel",F4=$.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,i=B4(R4,r);return te.jsx(Wj.div,{id:i.id,...n,ref:t})});F4.displayName=R4;var I4="SelectItem",[M4,N4]=r4(I4),L4=$.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:i=!1,textValue:s,...o}=e,a=o4(I4,r),l=b4(I4,r),u=a.value===n,[c,d]=$.useState(s??""),[h,f]=$.useState(!1),p=jj(t,e=>l.itemRefCallback?.(e,n,i)),m=bV(),g=$.useRef("touch"),y=()=>{i||(a.onValueChange(n),a.onOpenChange(!1))};if(""===n)throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return te.jsx(M4,{scope:r,value:n,disabled:i,textId:m,isSelected:u,onItemTextChange:$.useCallback(e=>{d(t=>t||(e?.textContent??"").trim())},[]),children:te.jsx(Q3.ItemSlot,{scope:r,value:n,disabled:i,textValue:c,children:te.jsx(Wj.div,{role:"option","aria-labelledby":m,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:p,onFocus:nz(o.onFocus,()=>f(!0)),onBlur:nz(o.onBlur,()=>f(!1)),onClick:nz(o.onClick,()=>{"mouse"!==g.current&&y()}),onPointerUp:nz(o.onPointerUp,()=>{"mouse"===g.current&&y()}),onPointerDown:nz(o.onPointerDown,e=>{g.current=e.pointerType}),onPointerMove:nz(o.onPointerMove,e=>{g.current=e.pointerType,i?l.onItemLeave?.():"mouse"===g.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:nz(o.onPointerLeave,e=>{e.currentTarget===document.activeElement&&l.onItemLeave?.()}),onKeyDown:nz(o.onKeyDown,e=>{""!==l.searchRef?.current&&" "===e.key||(Z3.includes(e.key)&&y()," "===e.key&&e.preventDefault())})})})})});L4.displayName=I4;var U4="SelectItemText",j4=$.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:i,...s}=e,o=o4(U4,r),a=b4(U4,r),l=N4(U4,r),u=l4(U4,r),[c,d]=$.useState(null),h=jj(t,e=>d(e),l.onItemTextChange,e=>a.itemTextRefCallback?.(e,l.value,l.disabled)),f=c?.textContent,p=$.useMemo(()=>te.jsx("option",{value:l.value,disabled:l.disabled,children:f},l.value),[l.disabled,l.value,f]),{onNativeOptionAdd:m,onNativeOptionRemove:g}=u;return Xj(()=>(m(p),()=>g(p)),[m,g,p]),te.jsxs(te.Fragment,{children:[te.jsx(Wj.span,{id:l.textId,...s,ref:h}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?ld.createPortal(s.children,o.valueNode):null]})});j4.displayName=U4;var z4="SelectItemIndicator",V4=$.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return N4(z4,r).isSelected?te.jsx(Wj.span,{"aria-hidden":!0,...n,ref:t}):null});V4.displayName=z4;var G4="SelectScrollUpButton",H4=$.forwardRef((e,t)=>{const r=b4(G4,e.__scopeSelect),n=A4(G4,e.__scopeSelect),[i,s]=$.useState(!1),o=jj(t,n.onScrollButtonChange);return Xj(()=>{if(r.viewport&&r.isPositioned){let e=function(){const e=t.scrollTop>0;s(e)};const t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),i?te.jsx(q4,{...e,ref:o,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null});H4.displayName=G4;var $4="SelectScrollDownButton",W4=$.forwardRef((e,t)=>{const r=b4($4,e.__scopeSelect),n=A4($4,e.__scopeSelect),[i,s]=$.useState(!1),o=jj(t,n.onScrollButtonChange);return Xj(()=>{if(r.viewport&&r.isPositioned){let e=function(){const e=t.scrollHeight-t.clientHeight,r=Math.ceil(t.scrollTop)<e;s(r)};const t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),i?te.jsx(q4,{...e,ref:o,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null});W4.displayName=$4;var q4=$.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...i}=e,s=b4("SelectScrollButton",r),o=$.useRef(null),a=e4(r),l=$.useCallback(()=>{null!==o.current&&(window.clearInterval(o.current),o.current=null)},[]);return $.useEffect(()=>()=>l(),[l]),Xj(()=>{const e=a().find(e=>e.ref.current===document.activeElement);e?.ref.current?.scrollIntoView({block:"nearest"})},[a]),te.jsx(Wj.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:nz(i.onPointerDown,()=>{null===o.current&&(o.current=window.setInterval(n,50))}),onPointerMove:nz(i.onPointerMove,()=>{s.onItemLeave?.(),null===o.current&&(o.current=window.setInterval(n,50))}),onPointerLeave:nz(i.onPointerLeave,()=>{l()})})}),X4=$.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return te.jsx(Wj.div,{"aria-hidden":!0,...n,ref:t})});X4.displayName="SelectSeparator";var Y4="SelectArrow",K4=$.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,i=i4(r),s=o4(Y4,r),o=b4(Y4,r);return s.open&&"popper"===o.position?te.jsx(IH,{...i,...n,ref:t}):null});K4.displayName=Y4;var Z4=$.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const i=$.useRef(null),s=jj(n,i),o=W3(t);return $.useEffect(()=>{const e=i.current;if(!e)return;const r=window.HTMLSelectElement.prototype,n=Object.getOwnPropertyDescriptor(r,"value").set;if(o!==t&&n){const r=new Event("change",{bubbles:!0});n.call(e,t),e.dispatchEvent(r)}},[o,t]),te.jsx(Wj.select,{...r,style:{...q3,...r.style},ref:s,defaultValue:t})});function J4(e){return""===e||void 0===e}function Q4(e){const t=Qj(e),r=$.useRef(""),n=$.useRef(0),i=$.useCallback(e=>{const i=r.current+e;t(i),function e(t){r.current=t,window.clearTimeout(n.current),""!==t&&(n.current=window.setTimeout(()=>e(""),1e3))}(i)},[t]),s=$.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return $.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,i,s]}function e8(e,t,r){const n=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let s=(o=e,a=Math.max(i,0),o.map((e,t)=>o[(a+t)%o.length]));var o,a;1===n.length&&(s=s.filter(e=>e!==r));const l=s.find(e=>e.textValue.toLowerCase().startsWith(n.toLowerCase()));return l!==r?l:void 0}Z4.displayName="SelectBubbleInput",e("cl",u4),e("c6",d4),e("cn",f4),e("c7",p4),e("cd",m4),e("ce",y4),e("cf",D4),e("cm",O4),e("cg",F4),e("ch",L4),e("cj",j4),e("ci",V4),e("c9",H4),e("cb",W4),e("ck",X4);var t8="Tabs",[r8,n8]=Zj(t8,[HH]),i8=HH(),[s8,o8]=r8(t8),a8=$.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...u}=e,c=tz(a),[d,h]=Wz({prop:n,onChange:i,defaultProp:s??"",caller:t8});return te.jsx(s8,{scope:r,baseId:bV(),value:d,onValueChange:h,orientation:o,dir:c,activationMode:l,children:te.jsx(Wj.div,{dir:c,"data-orientation":o,...u,ref:t})})});a8.displayName=t8;var l8="TabsList",u8=$.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...i}=e,s=o8(l8,r),o=i8(r);return te.jsx(QH,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:n,children:te.jsx(Wj.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:t})})});u8.displayName=l8;var c8="TabsTrigger",d8=$.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:i=!1,...s}=e,o=o8(c8,r),a=i8(r),l=p8(o.baseId,n),u=m8(o.baseId,n),c=n===o.value;return te.jsx(e$,{asChild:!0,...a,focusable:!i,active:c,children:te.jsx(Wj.button,{type:"button",role:"tab","aria-selected":c,"aria-controls":u,"data-state":c?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...s,ref:t,onMouseDown:nz(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(n)}),onKeyDown:nz(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(n)}),onFocus:nz(e.onFocus,()=>{const e="manual"!==o.activationMode;c||i||!e||o.onValueChange(n)})})})});d8.displayName=c8;var h8="TabsContent",f8=$.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:i,children:s,...o}=e,a=o8(h8,r),l=p8(a.baseId,n),u=m8(a.baseId,n),c=n===a.value,d=$.useRef(c);return $.useEffect(()=>{const e=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(e)},[]),te.jsx(Yj,{present:i||c,children:({present:r})=>te.jsx(Wj.div,{"data-state":c?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!r,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:r&&s})})});function p8(e,t){return`${e}-trigger-${t}`}function m8(e,t){return`${e}-content-${t}`}f8.displayName=h8,e("cr",a8),e("co",u8),e("cp",d8),e("cq",f8);const g8=new Map,y8=e=>{const t=g8.get(e);return t?Object.fromEntries(Object.entries(t.stores).map(([e,t])=>[e,t.getState()])):{}},v8=(e,t={})=>(r,n,i)=>{const{enabled:s,anonymousActionType:o,store:a,...l}=t;let u;try{u=null!=s&&s&&window.__REDUX_DEVTOOLS_EXTENSION__}catch(fY){}if(!u)return e(r,n,i);const{connection:c,...d}=((e,t,r)=>{if(void 0===e)return{type:"untracked",connection:t.connect(r)};const n=g8.get(r.name);if(n)return{type:"tracked",store:e,...n};const i={connection:t.connect(r),stores:{}};return g8.set(r.name,i),{type:"tracked",store:e,...i}})(a,u,l);let h=!0;i.setState=(e,t,s)=>{const u=r(e,t);if(!h)return u;const d=void 0===s?{type:o||"anonymous"}:"string"==typeof s?{type:s}:s;return void 0===a?(null==c||c.send(d,n()),u):(null==c||c.send({...d,type:`${a}/${d.type}`},{...y8(l.name),[a]:i.getState()}),u)};const f=(...e)=>{const t=h;h=!1,r(...e),h=t},p=e(i.setState,n,i);if("untracked"===d.type?null==c||c.init(p):(d.stores[d.store]=i,null==c||c.init(Object.fromEntries(Object.entries(d.stores).map(([e,t])=>[e,e===d.store?p:t.getState()])))),i.dispatchFromDevtools&&"function"==typeof i.dispatch){const e=i.dispatch;i.dispatch=(...t)=>{e(...t)}}return c.subscribe(e=>{var t;switch(e.type){case"ACTION":return"string"!=typeof e.payload?void console.error("[zustand devtools middleware] Unsupported action format"):_8(e.payload,e=>{if("__setState"===e.type){if(void 0===a)return void f(e.state);1!==Object.keys(e.state).length&&console.error('\n                    [zustand devtools middleware] Unsupported __setState action format. \n                    When using \'store\' option in devtools(), the \'state\' should have only one key, which is a value of \'store\' that was passed in devtools(),\n                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }\n                    ');const t=e.state[a];if(null==t)return;return void(JSON.stringify(i.getState())!==JSON.stringify(t)&&f(t))}i.dispatchFromDevtools&&"function"==typeof i.dispatch&&i.dispatch(e)});case"DISPATCH":switch(e.payload.type){case"RESET":return f(p),void 0===a?null==c?void 0:c.init(i.getState()):null==c?void 0:c.init(y8(l.name));case"COMMIT":return void 0===a?void(null==c||c.init(i.getState())):null==c?void 0:c.init(y8(l.name));case"ROLLBACK":return _8(e.state,e=>{if(void 0===a)return f(e),void(null==c||c.init(i.getState()));f(e[a]),null==c||c.init(y8(l.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return _8(e.state,e=>{void 0!==a?JSON.stringify(i.getState())!==JSON.stringify(e[a])&&f(e[a]):f(e)});case"IMPORT_STATE":{const{nextLiftedState:r}=e.payload,n=null==(t=r.computedStates.slice(-1)[0])?void 0:t.state;if(!n)return;return f(void 0===a?n:n[a]),void(null==c||c.send(null,r))}case"PAUSE_RECORDING":return h=!h}return}}),p},_8=(e,t)=>{let r;try{r=JSON.parse(e)}catch(Ove){console.error("[zustand devtools middleware] Could not parse the received json",Ove)}void 0!==r&&t(r)};function b8(e,t){let r;try{r=e()}catch(fY){return}const n={getItem:e=>{var n;const i=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),s=null!=(n=r.getItem(e))?n:null;return s instanceof Promise?s.then(i):i(s)},setItem:(e,n)=>r.setItem(e,JSON.stringify(n,null==t?void 0:t.replacer)),removeItem:e=>r.removeItem(e)};return n}const w8=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then:e=>w8(e)(r),catch(e){return this}}}catch(Ove){return{then(e){return this},catch:t=>w8(t)(Ove)}}},x8=e("cs",(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((e,t)=>(r,n,i)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},o=!1;const a=new Set,l=new Set;let u;try{u=s.getStorage()}catch(fY){}if(!u)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),r(...e)},n,i);const c=w8(s.serialize),d=()=>{const e=s.partialize({...n()});let t;const r=c({state:e,version:s.version}).then(e=>u.setItem(s.name,e)).catch(e=>{t=e});if(t)throw t;return r},h=i.setState;i.setState=(e,t)=>{h(e,t),d()};const f=e((...e)=>{r(...e),d()},n,i);let p;const m=()=>{var e;if(!u)return;o=!1,a.forEach(e=>e(n()));const t=(null==(e=s.onRehydrateStorage)?void 0:e.call(s,n()))||void 0;return w8(u.getItem.bind(u))(s.name).then(e=>{if(e)return s.deserialize(e)}).then(e=>{if(e){if("number"!=typeof e.version||e.version===s.version)return e.state;if(s.migrate)return s.migrate(e.state,e.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}}).then(e=>{var t;return p=s.merge(e,null!=(t=n())?t:f),r(p,!0),d()}).then(()=>{null==t||t(p,void 0),o=!0,l.forEach(e=>e(p))}).catch(e=>{null==t||t(void 0,e)})};return i.persist={setOptions:e=>{s={...s,...e},e.getStorage&&(u=e.getStorage())},clearStorage:()=>{null==u||u.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>m(),hasHydrated:()=>o,onHydrate:e=>(a.add(e),()=>{a.delete(e)}),onFinishHydration:e=>(l.add(e),()=>{l.delete(e)})},m(),p||f})(e,t):((e,t)=>(r,n,i)=>{let s={storage:b8(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},o=!1;const a=new Set,l=new Set;let u=s.storage;if(!u)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),r(...e)},n,i);const c=()=>{const e=s.partialize({...n()});return u.setItem(s.name,{state:e,version:s.version})},d=i.setState;i.setState=(e,t)=>{d(e,t),c()};const h=e((...e)=>{r(...e),c()},n,i);let f;i.getInitialState=()=>h;const p=()=>{var e,t;if(!u)return;o=!1,a.forEach(e=>{var t;return e(null!=(t=n())?t:h)});const i=(null==(t=s.onRehydrateStorage)?void 0:t.call(s,null!=(e=n())?e:h))||void 0;return w8(u.getItem.bind(u))(s.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===s.version)return[!1,e.state];if(s.migrate)return[!0,s.migrate(e.state,e.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;const[i,o]=e;if(f=s.merge(o,null!=(t=n())?t:h),r(f,!0),i)return c()}).then(()=>{null==i||i(f,void 0),f=n(),o=!0,l.forEach(e=>e(f))}).catch(e=>{null==i||i(void 0,e)})};return i.persist={setOptions:e=>{s={...s,...e},e.storage&&(u=e.storage)},clearStorage:()=>{null==u||u.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:e=>(a.add(e),()=>{a.delete(e)}),onFinishHydration:e=>(l.add(e),()=>{l.delete(e)})},s.skipHydration||p(),f||h})(e,t)),E8="RFC3986",S8={RFC1738:e=>String(e).replace(/%20/g,"+"),RFC3986:e=>String(e)},C8=Array.isArray,A8=(()=>{const e=[];for(let t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e})(),T8=1024;function D8(e,t){if(C8(e)){const r=[];for(let n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)}const k8=Object.prototype.hasOwnProperty,P8={brackets:e=>String(e)+"[]",comma:"comma",indices:(e,t)=>String(e)+"["+t+"]",repeat:e=>String(e)},B8=Array.isArray,O8=Array.prototype.push,R8=function(e,t){O8.apply(e,B8(t)?t:[t])},F8=Date.prototype.toISOString,I8={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:(e,t,r,n,i)=>{if(0===e.length)return e;let s=e;if("symbol"==typeof e?s=Symbol.prototype.toString.call(e):"string"!=typeof e&&(s=String(e)),"iso-8859-1"===r)return escape(s).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});let o="";for(let a=0;a<s.length;a+=T8){const e=s.length>=T8?s.slice(a,a+T8):s,t=[];for(let r=0;r<e.length;++r){let n=e.charCodeAt(r);45===n||46===n||95===n||126===n||n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122||"RFC1738"===i&&(40===n||41===n)?t[t.length]=e.charAt(r):n<128?t[t.length]=A8[n]:n<2048?t[t.length]=A8[192|n>>6]+A8[128|63&n]:n<55296||n>=57344?t[t.length]=A8[224|n>>12]+A8[128|n>>6&63]+A8[128|63&n]:(r+=1,n=65536+((1023&n)<<10|1023&e.charCodeAt(r)),t[t.length]=A8[240|n>>18]+A8[128|n>>12&63]+A8[128|n>>6&63]+A8[128|63&n])}o+=t.join("")}return o},encodeValuesOnly:!1,format:E8,formatter:S8[E8],indices:!1,serializeDate:e=>F8.call(e),skipNulls:!1,strictNullHandling:!1},M8={};function N8(e,t,r,n,i,s,o,a,l,u,c,d,h,f,p,m,g,y){let v=e,_=y,b=0,w=!1;for(;void 0!==(_=_.get(M8))&&!w;){const t=_.get(e);if(b+=1,void 0!==t){if(t===b)throw new RangeError("Cyclic object value");w=!0}void 0===_.get(M8)&&(b=0)}if("function"==typeof u?v=u(t,v):v instanceof Date?v=h?.(v):"comma"===r&&B8(v)&&(v=D8(v,function(e){return e instanceof Date?h?.(e):e})),null===v){if(s)return l&&!m?l(t,I8.encoder,g,"key",f):t;v=""}if(function(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||"symbol"==typeof e||"bigint"==typeof e}(v)||function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))}(v)){if(l){const e=m?t:l(t,I8.encoder,g,"key",f);return[p?.(e)+"="+p?.(l(v,I8.encoder,g,"value",f))]}return[p?.(t)+"="+p?.(String(v))]}const x=[];if(void 0===v)return x;let E;if("comma"===r&&B8(v))m&&l&&(v=D8(v,l)),E=[{value:v.length>0?v.join(",")||null:void 0}];else if(B8(u))E=u;else{const e=Object.keys(v);E=c?e.sort(c):e}const S=a?String(t).replace(/\./g,"%2E"):String(t),C=n&&B8(v)&&1===v.length?S+"[]":S;if(i&&B8(v)&&0===v.length)return C+"[]";for(let A=0;A<E.length;++A){const t=E[A],_="object"==typeof t&&void 0!==t.value?t.value:v[t];if(o&&null===_)continue;const w=d&&a?t.replace(/\./g,"%2E"):t,S=B8(v)?"function"==typeof r?r(C,w):C:C+(d?"."+w:"["+w+"]");y.set(e,b);const T=new WeakMap;T.set(M8,y),R8(x,N8(_,S,r,n,i,s,o,a,"comma"===r&&m&&B8(v)?null:l,u,c,d,h,f,p,m,g,T))}return x}function L8(e,t={}){let r=e;const n=function(e=I8){if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.encodeDotInKeys&&"boolean"!=typeof e.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");const t=e.charset||I8.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let r=E8;if(void 0!==e.format){if(!k8.call(S8,e.format))throw new TypeError("Unknown format option provided.");r=e.format}const n=S8[r];let i,s=I8.filter;if(("function"==typeof e.filter||B8(e.filter))&&(s=e.filter),i=e.arrayFormat&&e.arrayFormat in P8?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":I8.arrayFormat,"commaRoundTrip"in e&&"boolean"!=typeof e.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const o=void 0===e.allowDots?1==!!e.encodeDotInKeys||I8.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:I8.addQueryPrefix,allowDots:o,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:I8.allowEmptyArrays,arrayFormat:i,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:I8.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:void 0===e.delimiter?I8.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:I8.encode,encodeDotInKeys:"boolean"==typeof e.encodeDotInKeys?e.encodeDotInKeys:I8.encodeDotInKeys,encoder:"function"==typeof e.encoder?e.encoder:I8.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:I8.encodeValuesOnly,filter:s,format:r,formatter:n,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:I8.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:I8.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:I8.strictNullHandling}}(t);let i,s;"function"==typeof n.filter?(s=n.filter,r=s("",r)):B8(n.filter)&&(s=n.filter,i=s);const o=[];if("object"!=typeof r||null===r)return"";const a=P8[n.arrayFormat],l="comma"===a&&n.commaRoundTrip;i||(i=Object.keys(r)),n.sort&&i.sort(n.sort);const u=new WeakMap;for(let h=0;h<i.length;++h){const e=i[h];n.skipNulls&&null===r[e]||R8(o,N8(r[e],e,a,l,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,u))}const c=o.join(n.delimiter);let d=!0===n.addQueryPrefix?"?":"";return n.charsetSentinel&&("iso-8859-1"===n.charset?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),c.length>0?d+c:""}const U8="4.104.0";let j8,z8,V8,G8,H8,$8,W8,q8,X8,Y8=!1;class K8{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}const Z8=()=>{j8||function(e,t={auto:!1}){if(Y8)throw new Error(`you must \`import 'openai/shims/${e.kind}'\` before importing anything else from openai`);if(j8)throw new Error(`can't \`import 'openai/shims/${e.kind}'\` after \`import 'openai/shims/${j8}'\``);Y8=t.auto,j8=e.kind,z8=e.fetch,e.Request,e.Response,e.Headers,V8=e.FormData,e.Blob,G8=e.File,H8=e.ReadableStream,$8=e.getMultipartRequestOptions,W8=e.getDefaultAgent,q8=e.fileFromPath,X8=e.isFsReadStream}(function({manuallyImported:e}={}){const t=e?"You may need to use polyfills":"Add one of these imports before your first `import  from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let r,n,i,s;try{r=fetch,n=Request,i=Response,s=Headers}catch(o){throw new Error(`this environment is missing the following Web Fetch API type: ${o.message}. ${t}`)}return{kind:"web",fetch:r,Request:n,Response:i,Headers:s,FormData:"undefined"!=typeof FormData?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${t}`)}},Blob:"undefined"!=typeof Blob?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${t}`)}},File:"undefined"!=typeof File?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${t}`)}},ReadableStream:"undefined"!=typeof ReadableStream?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${t}`)}},getMultipartRequestOptions:async(e,t)=>({...t,body:new K8(e)}),getDefaultAgent:e=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:e=>!1}}(),{auto:!0})};Z8();class J8 extends Error{}class Q8 extends J8{constructor(e,t,r,n){super(`${Q8.makeMessage(e,t,r)}`),this.status=e,this.headers=n,this.request_id=n?.["x-request-id"],this.error=t;const i=t;this.code=i?.code,this.param=i?.param,this.type=i?.type}static makeMessage(e,t,r){const n=t?.message?"string"==typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):r;return e&&n?`${e} ${n}`:e?`${e} status code (no body)`:n||"(no status code or body)"}static generate(e,t,r,n){if(!e||!n)return new t6({message:r,cause:e5(t)});const i=t?.error;return 400===e?new n6(e,i,r,n):401===e?new i6(e,i,r,n):403===e?new s6(e,i,r,n):404===e?new o6(e,i,r,n):409===e?new a6(e,i,r,n):422===e?new l6(e,i,r,n):429===e?new u6(e,i,r,n):e>=500?new c6(e,i,r,n):new Q8(e,i,r,n)}}class e6 extends Q8{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class t6 extends Q8{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class r6 extends t6{constructor({message:e}={}){super({message:e??"Request timed out."})}}class n6 extends Q8{}class i6 extends Q8{}class s6 extends Q8{}class o6 extends Q8{}class a6 extends Q8{}class l6 extends Q8{}class u6 extends Q8{}class c6 extends Q8{}class d6 extends J8{constructor(){super("Could not parse response content as the length limit was reached")}}class h6 extends J8{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var f6,p6=globalThis&&globalThis.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},m6=globalThis&&globalThis.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class g6{constructor(){f6.set(this,void 0),this.buffer=new Uint8Array,p6(this,f6,null,"f")}decode(e){if(null==e)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):"string"==typeof e?(new TextEncoder).encode(e):e;let r=new Uint8Array(this.buffer.length+t.length);r.set(this.buffer),r.set(t,this.buffer.length),this.buffer=r;const n=[];let i;for(;null!=(i=y6(this.buffer,m6(this,f6,"f")));){if(i.carriage&&null==m6(this,f6,"f")){p6(this,f6,i.index,"f");continue}if(null!=m6(this,f6,"f")&&(i.index!==m6(this,f6,"f")+1||i.carriage)){n.push(this.decodeText(this.buffer.slice(0,m6(this,f6,"f")-1))),this.buffer=this.buffer.slice(m6(this,f6,"f")),p6(this,f6,null,"f");continue}const e=null!==m6(this,f6,"f")?i.preceding-1:i.preceding,t=this.decodeText(this.buffer.slice(0,e));n.push(t),this.buffer=this.buffer.slice(i.index),p6(this,f6,null,"f")}return n}decodeText(e){if(null==e)return"";if("string"==typeof e)return e;if("undefined"!=typeof Buffer){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new J8(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if("undefined"!=typeof TextDecoder){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new J8(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new J8("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode("\n"):[]}}function y6(e,t){for(let r=t??0;r<e.length;r++){if(10===e[r])return{preceding:r,index:r+1,carriage:!1};if(13===e[r])return{preceding:r,index:r+1,carriage:!0}}return null}function v6(e){for(let t=0;t<e.length-1;t++){if(10===e[t]&&10===e[t+1])return t+2;if(13===e[t]&&13===e[t+1])return t+2;if(13===e[t]&&10===e[t+1]&&t+3<e.length&&13===e[t+2]&&10===e[t+3])return t+4}return-1}function _6(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const e=await t.read();return e?.done&&t.releaseLock(),e}catch(Ove){throw t.releaseLock(),Ove}},async return(){const e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}f6=new WeakMap,g6.NEWLINE_CHARS=new Set(["\n","\r"]),g6.NEWLINE_REGEXP=/\r\n|[\n\r]/g;class b6{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let r=!1;return new b6(async function*(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let n=!1;try{for await(const r of async function*(e,t){if(!e.body)throw t.abort(),new J8("Attempted to iterate over a response with no body");const r=new w6,n=new g6,i=_6(e.body);for await(const s of async function*(e){let t=new Uint8Array;for await(const r of e){if(null==r)continue;const e=r instanceof ArrayBuffer?new Uint8Array(r):"string"==typeof r?(new TextEncoder).encode(r):r;let n,i=new Uint8Array(t.length+e.length);for(i.set(t),i.set(e,t.length),t=i;-1!==(n=v6(t));)yield t.slice(0,n),t=t.slice(n)}t.length>0&&(yield t)}(i))for(const e of n.decode(s)){const t=r.decode(e);t&&(yield t)}for(const s of n.flush()){const e=r.decode(s);e&&(yield e)}}(e,t))if(!n)if(r.data.startsWith("[DONE]"))n=!0;else if(null===r.event||r.event.startsWith("response.")||r.event.startsWith("transcript.")){let t;try{t=JSON.parse(r.data)}catch(Ove){throw console.error("Could not parse message into JSON:",r.data),console.error("From chunk:",r.raw),Ove}if(t&&t.error)throw new Q8(void 0,t.error,void 0,z6(e.headers));yield t}else{let e;try{e=JSON.parse(r.data)}catch(Ove){throw console.error("Could not parse message into JSON:",r.data),console.error("From chunk:",r.raw),Ove}if("error"==r.event)throw new Q8(void 0,e.error,e.message,void 0);yield{event:r.event,data:e}}n=!0}catch(Ove){if(Ove instanceof Error&&"AbortError"===Ove.name)return;throw Ove}finally{n||t.abort()}},t)}static fromReadableStream(e,t){let r=!1;return new b6(async function*(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let n=!1;try{for await(const t of async function*(){const t=new g6,r=_6(e);for await(const e of r)for(const r of t.decode(e))yield r;for(const e of t.flush())yield e}())n||t&&(yield JSON.parse(t));n=!0}catch(Ove){if(Ove instanceof Error&&"AbortError"===Ove.name)return;throw Ove}finally{n||t.abort()}},t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],r=this.iterator(),n=n=>({next:()=>{if(0===n.length){const n=r.next();e.push(n),t.push(n)}return n.shift()}});return[new b6(()=>n(e),this.controller),new b6(()=>n(t),this.controller)]}toReadableStream(){const e=this;let t;const r=new TextEncoder;return new H8({async start(){t=e[Symbol.asyncIterator]()},async pull(e){try{const{value:n,done:i}=await t.next();if(i)return e.close();const s=r.encode(JSON.stringify(n)+"\n");e.enqueue(s)}catch(mke){e.error(mke)}},async cancel(){await(t.return?.())}})}}class w6{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,r,n]=function(e,t){const r=e.indexOf(t);return-1!==r?[e.substring(0,r),t,e.substring(r+t.length)]:[e,"",""]}(e,":");return n.startsWith(" ")&&(n=n.substring(1)),"event"===t?this.event=n:"data"===t&&this.data.push(n),null}}const x6=e=>null!=e&&"object"==typeof e&&"string"==typeof e.url&&"function"==typeof e.blob,E6=e=>null!=e&&"object"==typeof e&&"string"==typeof e.name&&"number"==typeof e.lastModified&&S6(e),S6=e=>null!=e&&"object"==typeof e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.text&&"function"==typeof e.slice&&"function"==typeof e.arrayBuffer;async function C6(e,t,r){if(e=await e,E6(e))return e;if(x6(e)){const n=await e.blob();t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()??"unknown_file");const i=S6(n)?[await n.arrayBuffer()]:[n];return new G8(i,t,r)}const n=await async function(e){let t=[];if("string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(S6(e))t.push(await e.arrayBuffer());else{if(!T6(e))throw new Error(`Unexpected data type: ${typeof e}; constructor: ${e?.constructor?.name}; props: ${function(e){const t=Object.getOwnPropertyNames(e);return`[${t.map(e=>`"${e}"`).join(", ")}]`}(e)}`);for await(const r of e)t.push(r)}return t}(e);if(t||(t=function(e){return A6(e.name)||A6(e.filename)||A6(e.path)?.split(/[\\/]/).pop()}(e)??"unknown_file"),!r?.type){const e=n[0]?.type;"string"==typeof e&&(r={...r,type:e})}return new G8(n,t,r)}const A6=e=>"string"==typeof e?e:"undefined"!=typeof Buffer&&e instanceof Buffer?String(e):void 0,T6=e=>null!=e&&"object"==typeof e&&"function"==typeof e[Symbol.asyncIterator],D6=e=>e&&"object"==typeof e&&e.body&&"MultipartBody"===e[Symbol.toStringTag],k6=async e=>{const t=await P6(e.body);return $8(t,e)},P6=async e=>{const t=new V8;return await Promise.all(Object.entries(e||{}).map(([e,r])=>B6(t,e,r))),t},B6=async(e,t,r)=>{if(void 0!==r){if(null==r)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if("string"==typeof r||"number"==typeof r||"boolean"==typeof r)e.append(t,String(r));else if((e=>E6(e)||x6(e)||X8(e))(r)){const n=await C6(r);e.append(t,n)}else if(Array.isArray(r))await Promise.all(r.map(r=>B6(e,t+"[]",r)));else{if("object"!=typeof r)throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`);await Promise.all(Object.entries(r).map(([r,n])=>B6(e,`${t}[${r}]`,n)))}}};var O6,R6=globalThis&&globalThis.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},F6=globalThis&&globalThis.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};async function I6(e){const{response:t}=e;if(e.options.stream)return o5("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller):b6.fromSSEResponse(t,e.controller);if(204===t.status)return null;if(e.options.__binaryResponse)return t;const r=t.headers.get("content-type"),n=r?.split(";")[0]?.trim();if(n?.includes("application/json")||n?.endsWith("+json")){const e=await t.json();return o5("response",t.status,t.url,t.headers,e),M6(e,t)}const i=await t.text();return o5("response",t.status,t.url,t.headers,i),i}function M6(e,t){return!e||"object"!=typeof e||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("x-request-id"),enumerable:!1})}Z8();class N6 extends Promise{constructor(e,t=I6){super(e=>{e(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new N6(this.responsePromise,async t=>M6(e(await this.parseResponse(t),t),t.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class L6{constructor({baseURL:e,maxRetries:t=2,timeout:r=6e5,httpAgent:n,fetch:i}){this.baseURL=e,this.maxRetries=Q6("maxRetries",t),this.timeout=Q6("timeout",r),this.httpAgent=n,this.fetch=i??z8}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...X6(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${a5()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,r){return this.request(Promise.resolve(r).then(async r=>{const n=r&&S6(r?.body)?new DataView(await r.body.arrayBuffer()):r?.body instanceof DataView?r.body:r?.body instanceof ArrayBuffer?new DataView(r.body):r&&ArrayBuffer.isView(r?.body)?new DataView(r.body.buffer):r?.body;return{method:e,path:t,...r,body:n}}))}getAPIList(e,t,r){return this.requestAPIList(t,{method:"get",path:e,...r})}calculateContentLength(e){if("string"==typeof e){if("undefined"!=typeof Buffer)return Buffer.byteLength(e,"utf8").toString();if("undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:t=0}={}){const r={...e},{method:n,path:i,query:s,headers:o={}}=r,a=ArrayBuffer.isView(r.body)||r.__binaryRequest&&"string"==typeof r.body?r.body:D6(r.body)?r.body.body:r.body?JSON.stringify(r.body,null,2):null,l=this.calculateContentLength(a),u=this.buildURL(i,s);"timeout"in r&&Q6("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const c=r.httpAgent??this.httpAgent??W8(u),d=r.timeout+1e3;return"number"==typeof c?.options?.timeout&&d>(c.options.timeout??0)&&(c.options.timeout=d),this.idempotencyHeader&&"get"!==n&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey),{req:{method:n,...a&&{body:a},headers:this.buildHeaders({options:r,headers:o,contentLength:l,retryCount:t}),...c&&{agent:c},signal:r.signal??null},url:u,timeout:r.timeout}}buildHeaders({options:e,headers:t,contentLength:r,retryCount:n}){const i={};r&&(i["content-length"]=r);const s=this.defaultHeaders(e);return i5(i,s),i5(i,t),D6(e.body)&&"node"!==j8&&delete i["content-type"],void 0===l5(s,"x-stainless-retry-count")&&void 0===l5(t,"x-stainless-retry-count")&&(i["x-stainless-retry-count"]=String(n)),void 0===l5(s,"x-stainless-timeout")&&void 0===l5(t,"x-stainless-timeout")&&e.timeout&&(i["x-stainless-timeout"]=String(Math.trunc(e.timeout/1e3))),this.validateHeaders(i,t),i}async prepareOptions(e){}async prepareRequest(e,{url:t,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(e=>[...e])):{...e}:{}}makeStatusError(e,t,r,n){return Q8.generate(e,t,r,n)}request(e,t=null){return new N6(this.makeRequest(e,t))}async makeRequest(e,t){const r=await e,n=r.maxRetries??this.maxRetries;null==t&&(t=n),await this.prepareOptions(r);const{req:i,url:s,timeout:o}=this.buildRequest(r,{retryCount:n-t});if(await this.prepareRequest(i,{url:s,options:r}),o5("request",s,r,i.headers),r.signal?.aborted)throw new e6;const a=new AbortController,l=await this.fetchWithTimeout(s,i,o,a).catch(e5);if(l instanceof Error){if(r.signal?.aborted)throw new e6;if(t)return this.retryRequest(r,t);if("AbortError"===l.name)throw new r6;throw new t6({cause:l})}const u=z6(l.headers);if(!l.ok){if(t&&this.shouldRetry(l))return o5(`response (error; retrying, ${t} attempts remaining)`,l.status,s,u),this.retryRequest(r,t,u);const e=await l.text().catch(e=>e5(e).message),n=Y6(e),i=n?void 0:e;throw o5(`response (error; ${t?"(error; no more retries left)":"(error; not retryable)"})`,l.status,s,u,i),this.makeStatusError(l.status,n,i,u)}return{response:l,options:r,controller:a}}requestAPIList(e,t){const r=this.makeRequest(t,null);return new j6(this,r,e)}buildURL(e,t){const r=Z6(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),n=this.defaultQuery();return r5(n)||(t={...n,...t}),"object"==typeof t&&t&&!Array.isArray(t)&&(r.search=this.stringifyQuery(t)),r.toString()}stringifyQuery(e){return Object.entries(e).filter(([e,t])=>void 0!==t).map(([e,t])=>{if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;if(null===t)return`${encodeURIComponent(e)}=`;throw new J8(`Cannot stringify type ${typeof t}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,t,r,n){const{signal:i,...s}=t||{};i&&i.addEventListener("abort",()=>n.abort());const o=setTimeout(()=>n.abort(),r),a={signal:n.signal,...s};return a.method&&(a.method=a.method.toUpperCase()),this.fetch.call(void 0,e,a).finally(()=>{clearTimeout(o)})}shouldRetry(e){const t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||409===e.status||429===e.status||e.status>=500)}async retryRequest(e,t,r){let n;const i=r?.["retry-after-ms"];if(i){const e=parseFloat(i);Number.isNaN(e)||(n=e)}const s=r?.["retry-after"];if(s&&!n){const e=parseFloat(s);n=Number.isNaN(e)?Date.parse(s)-Date.now():1e3*e}if(!(n&&0<=n&&n<6e4)){const r=e.maxRetries??this.maxRetries;n=this.calculateDefaultRetryTimeoutMillis(t,r)}return await J6(n),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const r=t-e;return Math.min(.5*Math.pow(2,r),8)*(1-.25*Math.random())*1e3}getUserAgent(){return`${this.constructor.name}/JS ${U8}`}}class U6{constructor(e,t,r,n){O6.set(this,void 0),R6(this,O6,e,"f"),this.options=n,this.response=t,this.body=r}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageInfo()}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new J8("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const t={...this.options};if("params"in e&&"object"==typeof t.query)t.query={...t.query,...e.params};else if("url"in e){const r=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(const[t,n]of r)e.url.searchParams.set(t,n);t.query=void 0,t.path=e.url.toString()}return await F6(this,O6,"f").requestAPIList(this.constructor,t)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(O6=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class j6 extends N6{constructor(e,t,r){super(t,async t=>new r(e,t.response,await I6(t),t.options))}async*[Symbol.asyncIterator](){const e=await(this);for await(const t of e)yield t}}const z6=e=>new Proxy(Object.fromEntries(e.entries()),{get(e,t){const r=t.toString();return e[r.toLowerCase()]||e[r]}}),V6={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},G6=e=>"object"==typeof e&&null!==e&&!r5(e)&&Object.keys(e).every(e=>n5(V6,e)),H6=()=>{if("undefined"!=typeof Deno&&null!=Deno.build)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":U8,"X-Stainless-OS":W6(Deno.build.os),"X-Stainless-Arch":$6(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:Deno.version?.deno??"unknown"};if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":U8,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if("[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0))return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":U8,"X-Stainless-OS":W6(process.platform),"X-Stainless-Arch":$6(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const e=function(){if("undefined"==typeof navigator||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:r}of e){const e=r.exec(navigator.userAgent);if(e)return{browser:t,version:`${e[1]||0}.${e[2]||0}.${e[3]||0}`}}return null}();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":U8,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":U8,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}},$6=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?`other:${e}`:"unknown",W6=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?`Other:${e}`:"Unknown";let q6;const X6=()=>q6??(q6=H6()),Y6=e=>{try{return JSON.parse(e)}catch(mke){return}},K6=/^[a-z][a-z0-9+.-]*:/i,Z6=e=>K6.test(e),J6=e=>new Promise(t=>setTimeout(t,e)),Q6=(e,t)=>{if("number"!=typeof t||!Number.isInteger(t))throw new J8(`${e} must be an integer`);if(t<0)throw new J8(`${e} must be a positive integer`);return t},e5=e=>{if(e instanceof Error)return e;if("object"==typeof e&&null!==e)try{return new Error(JSON.stringify(e))}catch{}return new Error(e)},t5=e=>"undefined"!=typeof process?process.env?.[e]?.trim()??void 0:"undefined"!=typeof Deno?Deno.env?.get?.(e)?.trim():void 0;function r5(e){if(!e)return!0;for(const t in e)return!1;return!0}function n5(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function i5(e,t){for(const r in t){if(!n5(t,r))continue;const n=r.toLowerCase();if(!n)continue;const i=t[r];null===i?delete e[n]:void 0!==i&&(e[n]=i)}}const s5=new Set(["authorization","api-key"]);function o5(e,...t){if("undefined"!=typeof process&&"true"===process?.env?.DEBUG){const r=t.map(e=>{if(!e)return e;if(e.headers){const t={...e,headers:{...e.headers}};for(const r in e.headers)s5.has(r.toLowerCase())&&(t.headers[r]="REDACTED");return t}let t=null;for(const r in e)s5.has(r.toLowerCase())&&(t??(t={...e}),t[r]="REDACTED");return t??e});console.log(`OpenAI:DEBUG:${e}`,...r)}}const a5=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),l5=(e,t)=>{const r=t.toLowerCase();if((e=>"function"==typeof e?.get)(e)){const n=t[0]?.toUpperCase()+t.substring(1).replace(/([^\w])(\w)/g,(e,t,r)=>t+r.toUpperCase());for(const i of[t,r,t.toUpperCase(),n]){const t=e.get(i);if(t)return t}}for(const[n,i]of Object.entries(e))if(n.toLowerCase()===r)return Array.isArray(i)?(i.length<=1||console.warn(`Received ${i.length} entries for the ${t} header, using the first entry.`),i[0]):i};function u5(e){return null!=e&&"object"==typeof e&&!Array.isArray(e)}class c5 extends U6{constructor(e,t,r,n){super(e,t,r,n),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class d5 extends U6{constructor(e,t,r,n){super(e,t,r,n),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return!1!==this.has_more&&super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){const e=this.getPaginatedItems();if(!e.length)return null;const t=e[e.length-1]?.id;return t?{params:{after:t}}:null}}class h5{constructor(e){this._client=e}}let f5=class extends h5{list(e,t={},r){return G6(t)?this.list(e,{},t):this._client.getAPIList(`/chat/completions/${e}/messages`,g5,{query:t,...r})}},p5=class extends h5{constructor(){super(...arguments),this.messages=new f5(this._client)}create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(`/chat/completions/${e}`,t)}update(e,t,r){return this._client.post(`/chat/completions/${e}`,{body:t,...r})}list(e={},t){return G6(e)?this.list({},e):this._client.getAPIList("/chat/completions",m5,{query:e,...t})}del(e,t){return this._client.delete(`/chat/completions/${e}`,t)}};class m5 extends d5{}class g5 extends d5{}p5.ChatCompletionsPage=m5,p5.Messages=f5;let y5=class extends h5{constructor(){super(...arguments),this.completions=new p5(this._client)}};y5.Completions=p5,y5.ChatCompletionsPage=m5;class v5 extends h5{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:{Accept:"application/octet-stream",...t?.headers},__binaryResponse:!0})}}class _5 extends h5{create(e,t){return this._client.post("/audio/transcriptions",k6({body:e,...t,stream:e.stream??!1,__metadata:{model:e.model}}))}}class b5 extends h5{create(e,t){return this._client.post("/audio/translations",k6({body:e,...t,__metadata:{model:e.model}}))}}class w5 extends h5{constructor(){super(...arguments),this.transcriptions=new _5(this._client),this.translations=new b5(this._client),this.speech=new v5(this._client)}}w5.Transcriptions=_5,w5.Translations=b5,w5.Speech=v5;class x5 extends h5{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(`/batches/${e}`,t)}list(e={},t){return G6(e)?this.list({},e):this._client.getAPIList("/batches",E5,{query:e,...t})}cancel(e,t){return this._client.post(`/batches/${e}/cancel`,t)}}class E5 extends d5{}x5.BatchesPage=E5;var S5,C5,A5,T5,D5,k5,P5,B5,O5,R5,F5,I5,M5,N5=globalThis&&globalThis.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},L5=globalThis&&globalThis.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class U5{constructor(){S5.add(this),this.controller=new AbortController,C5.set(this,void 0),A5.set(this,()=>{}),T5.set(this,()=>{}),D5.set(this,void 0),k5.set(this,()=>{}),P5.set(this,()=>{}),B5.set(this,{}),O5.set(this,!1),R5.set(this,!1),F5.set(this,!1),I5.set(this,!1),N5(this,C5,new Promise((e,t)=>{N5(this,A5,e,"f"),N5(this,T5,t,"f")}),"f"),N5(this,D5,new Promise((e,t)=>{N5(this,k5,e,"f"),N5(this,P5,t,"f")}),"f"),L5(this,C5,"f").catch(()=>{}),L5(this,D5,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},L5(this,S5,"m",M5).bind(this))},0)}_connected(){this.ended||(L5(this,A5,"f").call(this),this._emit("connect"))}get ended(){return L5(this,O5,"f")}get errored(){return L5(this,R5,"f")}get aborted(){return L5(this,F5,"f")}abort(){this.controller.abort()}on(e,t){return(L5(this,B5,"f")[e]||(L5(this,B5,"f")[e]=[])).push({listener:t}),this}off(e,t){const r=L5(this,B5,"f")[e];if(!r)return this;const n=r.findIndex(e=>e.listener===t);return n>=0&&r.splice(n,1),this}once(e,t){return(L5(this,B5,"f")[e]||(L5(this,B5,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,r)=>{N5(this,I5,!0,"f"),"error"!==e&&this.once("error",r),this.once(e,t)})}async done(){N5(this,I5,!0,"f"),await L5(this,D5,"f")}_emit(e,...t){if(L5(this,O5,"f"))return;"end"===e&&(N5(this,O5,!0,"f"),L5(this,k5,"f").call(this));const r=L5(this,B5,"f")[e];if(r&&(L5(this,B5,"f")[e]=r.filter(e=>!e.once),r.forEach(({listener:e})=>e(...t))),"abort"===e){const e=t[0];return L5(this,I5,"f")||r?.length||Promise.reject(e),L5(this,T5,"f").call(this,e),L5(this,P5,"f").call(this,e),void this._emit("end")}if("error"===e){const e=t[0];L5(this,I5,"f")||r?.length||Promise.reject(e),L5(this,T5,"f").call(this,e),L5(this,P5,"f").call(this,e),this._emit("end")}}_emitFinal(){}}C5=new WeakMap,A5=new WeakMap,T5=new WeakMap,D5=new WeakMap,k5=new WeakMap,P5=new WeakMap,B5=new WeakMap,O5=new WeakMap,R5=new WeakMap,F5=new WeakMap,I5=new WeakMap,S5=new WeakSet,M5=function(e){if(N5(this,R5,!0,"f"),e instanceof Error&&"AbortError"===e.name&&(e=new e6),e instanceof e6)return N5(this,F5,!0,"f"),this._emit("abort",e);if(e instanceof J8)return this._emit("error",e);if(e instanceof Error){const t=new J8(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new J8(String(e)))};var j5,z5,V5,G5,H5,$5,W5,q5,X5,Y5,K5,Z5,J5,Q5,e7,t7,r7,n7,i7,s7,o7,a7,l7=globalThis&&globalThis.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},u7=globalThis&&globalThis.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r};class c7 extends U5{constructor(){super(...arguments),j5.add(this),z5.set(this,[]),V5.set(this,{}),G5.set(this,{}),H5.set(this,void 0),$5.set(this,void 0),W5.set(this,void 0),q5.set(this,void 0),X5.set(this,void 0),Y5.set(this,void 0),K5.set(this,void 0),Z5.set(this,void 0),J5.set(this,void 0)}[(z5=new WeakMap,V5=new WeakMap,G5=new WeakMap,H5=new WeakMap,$5=new WeakMap,W5=new WeakMap,q5=new WeakMap,X5=new WeakMap,Y5=new WeakMap,K5=new WeakMap,Z5=new WeakMap,J5=new WeakMap,j5=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("event",r=>{const n=t.shift();n?n.resolve(r):e.push(r)}),this.on("end",()=>{r=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{r=!0;for(const r of t)r.reject(e);t.length=0}),this.on("error",e=>{r=!0;for(const r of t)r.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((e,r)=>t.push({resolve:e,reject:r})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new c7;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){const r=t?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const n=b6.fromReadableStream(e,this.controller);for await(const i of n)l7(this,j5,"m",Q5).call(this,i);if(n.controller.signal?.aborted)throw new e6;return this._addRun(l7(this,j5,"m",e7).call(this))}toReadableStream(){return new b6(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,r,n,i){const s=new c7;return s._run(()=>s._runToolAssistantStream(e,t,r,n,{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createToolAssistantStream(e,t,r,n,i){const s=i?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const o={...n,stream:!0},a=await e.submitToolOutputs(t,r,o,{...i,signal:this.controller.signal});this._connected();for await(const l of a)l7(this,j5,"m",Q5).call(this,l);if(a.controller.signal?.aborted)throw new e6;return this._addRun(l7(this,j5,"m",e7).call(this))}static createThreadAssistantStream(e,t,r){const n=new c7;return n._run(()=>n._threadAssistantStream(e,t,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),n}static createAssistantStream(e,t,r,n){const i=new c7;return i._run(()=>i._runAssistantStream(e,t,r,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),i}currentEvent(){return l7(this,K5,"f")}currentRun(){return l7(this,Z5,"f")}currentMessageSnapshot(){return l7(this,H5,"f")}currentRunStepSnapshot(){return l7(this,J5,"f")}async finalRunSteps(){return await this.done(),Object.values(l7(this,V5,"f"))}async finalMessages(){return await this.done(),Object.values(l7(this,G5,"f"))}async finalRun(){if(await this.done(),!l7(this,$5,"f"))throw Error("Final run was not received.");return l7(this,$5,"f")}async _createThreadAssistantStream(e,t,r){const n=r?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort()));const i={...t,stream:!0},s=await e.createAndRun(i,{...r,signal:this.controller.signal});this._connected();for await(const o of s)l7(this,j5,"m",Q5).call(this,o);if(s.controller.signal?.aborted)throw new e6;return this._addRun(l7(this,j5,"m",e7).call(this))}async _createAssistantStream(e,t,r,n){const i=n?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const s={...r,stream:!0},o=await e.create(t,s,{...n,signal:this.controller.signal});this._connected();for await(const a of o)l7(this,j5,"m",Q5).call(this,a);if(o.controller.signal?.aborted)throw new e6;return this._addRun(l7(this,j5,"m",e7).call(this))}static accumulateDelta(e,t){for(const[r,n]of Object.entries(t)){if(!e.hasOwnProperty(r)){e[r]=n;continue}let t=e[r];if(null!=t)if("index"!==r&&"type"!==r){if("string"==typeof t&&"string"==typeof n)t+=n;else if("number"==typeof t&&"number"==typeof n)t+=n;else{if(!u5(t)||!u5(n)){if(Array.isArray(t)&&Array.isArray(n)){if(t.every(e=>"string"==typeof e||"number"==typeof e)){t.push(...n);continue}for(const e of n){if(!u5(e))throw new Error(`Expected array delta entry to be an object but got: ${e}`);const r=e.index;if(null==r)throw console.error(e),new Error("Expected array delta entry to have an `index` property");if("number"!=typeof r)throw new Error(`Expected array delta entry \`index\` property to be a number but got ${r}`);const n=t[r];null==n?t.push(e):t[r]=this.accumulateDelta(n,e)}continue}throw Error(`Unhandled record type: ${r}, deltaValue: ${n}, accValue: ${t}`)}t=this.accumulateDelta(t,n)}e[r]=t}else e[r]=n;else e[r]=n}return e}_addRun(e){return e}async _threadAssistantStream(e,t,r){return await this._createThreadAssistantStream(t,e,r)}async _runAssistantStream(e,t,r,n){return await this._createAssistantStream(t,e,r,n)}async _runToolAssistantStream(e,t,r,n,i){return await this._createToolAssistantStream(r,e,t,n,i)}}Q5=function(e){if(!this.ended)switch(u7(this,K5,e,"f"),l7(this,j5,"m",n7).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":l7(this,j5,"m",a7).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":l7(this,j5,"m",r7).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":l7(this,j5,"m",t7).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},e7=function(){if(this.ended)throw new J8("stream has ended, this shouldn't happen");if(!l7(this,$5,"f"))throw Error("Final run has not been received");return l7(this,$5,"f")},t7=function(e){const[t,r]=l7(this,j5,"m",s7).call(this,e,l7(this,H5,"f"));u7(this,H5,t,"f"),l7(this,G5,"f")[t.id]=t;for(const n of r){const e=t.content[n.index];"text"==e?.type&&this._emit("textCreated",e.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const r of e.data.delta.content){if("text"==r.type&&r.text){let e=r.text,n=t.content[r.index];if(!n||"text"!=n.type)throw Error("The snapshot associated with this text delta is not text or missing");this._emit("textDelta",e,n.text)}if(r.index!=l7(this,W5,"f")){if(l7(this,q5,"f"))switch(l7(this,q5,"f").type){case"text":this._emit("textDone",l7(this,q5,"f").text,l7(this,H5,"f"));break;case"image_file":this._emit("imageFileDone",l7(this,q5,"f").image_file,l7(this,H5,"f"))}u7(this,W5,r.index,"f")}u7(this,q5,t.content[r.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(void 0!==l7(this,W5,"f")){const t=e.data.content[l7(this,W5,"f")];if(t)switch(t.type){case"image_file":this._emit("imageFileDone",t.image_file,l7(this,H5,"f"));break;case"text":this._emit("textDone",t.text,l7(this,H5,"f"))}}l7(this,H5,"f")&&this._emit("messageDone",e.data),u7(this,H5,void 0,"f")}},r7=function(e){const t=l7(this,j5,"m",i7).call(this,e);switch(u7(this,J5,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&"tool_calls"==r.step_details.type&&r.step_details.tool_calls&&"tool_calls"==t.step_details.type)for(const e of r.step_details.tool_calls)e.index==l7(this,X5,"f")?this._emit("toolCallDelta",e,t.step_details.tool_calls[e.index]):(l7(this,Y5,"f")&&this._emit("toolCallDone",l7(this,Y5,"f")),u7(this,X5,e.index,"f"),u7(this,Y5,t.step_details.tool_calls[e.index],"f"),l7(this,Y5,"f")&&this._emit("toolCallCreated",l7(this,Y5,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":u7(this,J5,void 0,"f"),"tool_calls"==e.data.step_details.type&&l7(this,Y5,"f")&&(this._emit("toolCallDone",l7(this,Y5,"f")),u7(this,Y5,void 0,"f")),this._emit("runStepDone",e.data,t)}},n7=function(e){l7(this,z5,"f").push(e),this._emit("event",e)},i7=function(e){switch(e.event){case"thread.run.step.created":return l7(this,V5,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=l7(this,V5,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const n=c7.accumulateDelta(t,r.delta);l7(this,V5,"f")[e.data.id]=n}return l7(this,V5,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":l7(this,V5,"f")[e.data.id]=e.data}if(l7(this,V5,"f")[e.data.id])return l7(this,V5,"f")[e.data.id];throw new Error("No snapshot available")},s7=function(e,t){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let n=e.data;if(n.delta.content)for(const e of n.delta.content)if(e.index in t.content){let r=t.content[e.index];t.content[e.index]=l7(this,j5,"m",o7).call(this,e,r)}else t.content[e.index]=e,r.push(e);return[t,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},o7=function(e,t){return c7.accumulateDelta(t,e)},a7=function(e){switch(u7(this,Z5,e.data,"f"),e.event){case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":u7(this,$5,e.data,"f"),l7(this,Y5,"f")&&(this._emit("toolCallDone",l7(this,Y5,"f")),u7(this,Y5,void 0,"f"))}};class d7 extends h5{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,r){return this._client.post(`/assistants/${e}`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e={},t){return G6(e)?this.list({},e):this._client.getAPIList("/assistants",h7,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}}class h7 extends d5{}function f7(e){return"function"==typeof e.parse}d7.AssistantsPage=h7;const p7=e=>"assistant"===e?.role,m7=e=>"function"===e?.role,g7=e=>"tool"===e?.role;function y7(e){return"auto-parseable-response-format"===e?.$brand}function v7(e){return"auto-parseable-tool"===e?.$brand}function _7(e,t){const r=e.choices.map(e=>{if("length"===e.finish_reason)throw new d6;if("content_filter"===e.finish_reason)throw new h6;return{...e,message:{...e.message,...e.message.tool_calls?{tool_calls:e.message.tool_calls?.map(e=>function(e,t){const r=e.tools?.find(e=>e.function?.name===t.function.name);return{...t,function:{...t.function,parsed_arguments:v7(r)?r.$parseRaw(t.function.arguments):r?.function.strict?JSON.parse(t.function.arguments):null}}}(t,e))??void 0}:void 0,parsed:e.message.content&&!e.message.refusal?b7(t,e.message.content):null}}});return{...e,choices:r}}function b7(e,t){return"json_schema"!==e.response_format?.type?null:"json_schema"===e.response_format?.type?"$parseRaw"in e.response_format?e.response_format.$parseRaw(t):JSON.parse(t):null}function w7(e,t){if(!e)return!1;const r=e.tools?.find(e=>e.function?.name===t.function.name);return v7(r)||r?.function.strict||!1}function x7(e){return!!y7(e.response_format)||(e.tools?.some(e=>v7(e)||"function"===e.type&&!0===e.function.strict)??!1)}var E7,S7,C7,A7,T7,D7,k7,P7,B7=globalThis&&globalThis.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};const O7=10;class R7 extends U5{constructor(){super(...arguments),E7.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=e.choices[0]?.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t)if(this._emit("message",e),(m7(e)||g7(e))&&e.content)this._emit("functionCallResult",e.content);else if(p7(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(p7(e)&&e.tool_calls)for(const r of e.tool_calls)"function"===r.type&&this._emit("functionCall",r.function)}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new J8("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),B7(this,E7,"m",S7).call(this)}async finalMessage(){return await this.done(),B7(this,E7,"m",C7).call(this)}async finalFunctionCall(){return await this.done(),B7(this,E7,"m",A7).call(this)}async finalFunctionCallResult(){return await this.done(),B7(this,E7,"m",T7).call(this)}async totalUsage(){return await this.done(),B7(this,E7,"m",D7).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=B7(this,E7,"m",C7).call(this);t&&this._emit("finalMessage",t);const r=B7(this,E7,"m",S7).call(this);r&&this._emit("finalContent",r);const n=B7(this,E7,"m",A7).call(this);n&&this._emit("finalFunctionCall",n);const i=B7(this,E7,"m",T7).call(this);null!=i&&this._emit("finalFunctionCallResult",i),this._chatCompletions.some(e=>e.usage)&&this._emit("totalUsage",B7(this,E7,"m",D7).call(this))}async _createChatCompletion(e,t,r){const n=r?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),B7(this,E7,"m",k7).call(this,t);const i=await e.chat.completions.create({...t,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(_7(i,t))}async _runChatCompletion(e,t,r){for(const n of t.messages)this._addMessage(n,!1);return await this._createChatCompletion(e,t,r)}async _runFunctions(e,t,r){const n="function",{function_call:i="auto",stream:s,...o}=t,a="string"!=typeof i&&i?.name,{maxChatCompletions:l=O7}=r||{},u={};for(const h of t.functions)u[h.name||h.function.name]=h;const c=t.functions.map(e=>({name:e.name||e.function.name,parameters:e.parameters,description:e.description}));for(const h of t.messages)this._addMessage(h,!1);for(let h=0;h<l;++h){const t=await this._createChatCompletion(e,{...o,function_call:i,functions:c,messages:[...this.messages]},r),s=t.choices[0]?.message;if(!s)throw new J8("missing message in ChatCompletion response");if(!s.function_call)return;const{name:l,arguments:h}=s.function_call,f=u[l];if(!f){const e=`Invalid function_call: ${JSON.stringify(l)}. Available options are: ${c.map(e=>JSON.stringify(e.name)).join(", ")}. Please try again`;this._addMessage({role:n,name:l,content:e});continue}if(a&&a!==l){const e=`Invalid function_call: ${JSON.stringify(l)}. ${JSON.stringify(a)} requested. Please try again`;this._addMessage({role:n,name:l,content:e});continue}let p;try{p=f7(f)?await f.parse(h):h}catch(d){this._addMessage({role:n,name:l,content:d instanceof Error?d.message:String(d)});continue}const m=await f.function(p,this),g=B7(this,E7,"m",P7).call(this,m);if(this._addMessage({role:n,name:l,content:g}),a)return}}async _runTools(e,t,r){const n="tool",{tool_choice:i="auto",stream:s,...o}=t,a="string"!=typeof i&&i?.function?.name,{maxChatCompletions:l=O7}=r||{},u=t.tools.map(e=>{if(v7(e)){if(!e.$callback)throw new J8("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:e.$callback,name:e.function.name,description:e.function.description||"",parameters:e.function.parameters,parse:e.$parseRaw,strict:!0}}}return e}),c={};for(const f of u)"function"===f.type&&(c[f.function.name||f.function.function.name]=f.function);const d="tools"in t?u.map(e=>"function"===e.type?{type:"function",function:{name:e.function.name||e.function.function.name,parameters:e.function.parameters,description:e.function.description,strict:e.function.strict}}:e):void 0;for(const f of t.messages)this._addMessage(f,!1);for(let f=0;f<l;++f){const t=await this._createChatCompletion(e,{...o,tool_choice:i,tools:d,messages:[...this.messages]},r),s=t.choices[0]?.message;if(!s)throw new J8("missing message in ChatCompletion response");if(!s.tool_calls?.length)return;for(const e of s.tool_calls){if("function"!==e.type)continue;const t=e.id,{name:r,arguments:i}=e.function,s=c[r];if(!s){const e=`Invalid tool_call: ${JSON.stringify(r)}. Available options are: ${Object.keys(c).map(e=>JSON.stringify(e)).join(", ")}. Please try again`;this._addMessage({role:n,tool_call_id:t,content:e});continue}if(a&&a!==r){const e=`Invalid tool_call: ${JSON.stringify(r)}. ${JSON.stringify(a)} requested. Please try again`;this._addMessage({role:n,tool_call_id:t,content:e});continue}let o;try{o=f7(s)?await s.parse(i):i}catch(h){const e=h instanceof Error?h.message:String(h);this._addMessage({role:n,tool_call_id:t,content:e});continue}const l=await s.function(o,this),u=B7(this,E7,"m",P7).call(this,l);if(this._addMessage({role:n,tool_call_id:t,content:u}),a)return}}}}E7=new WeakSet,S7=function(){return B7(this,E7,"m",C7).call(this).content??null},C7=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(p7(t)){const{function_call:e,...r}=t,n={...r,content:t.content??null,refusal:t.refusal??null};return e&&(n.function_call=e),n}}throw new J8("stream ended without producing a ChatCompletionMessage with role=assistant")},A7=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(p7(t)&&t?.function_call)return t.function_call;if(p7(t)&&t?.tool_calls?.length)return t.tool_calls.at(-1)?.function}},T7=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(m7(t)&&null!=t.content)return t.content;if(g7(t)&&null!=t.content&&"string"==typeof t.content&&this.messages.some(e=>"assistant"===e.role&&e.tool_calls?.some(e=>"function"===e.type&&e.id===t.tool_call_id)))return t.content}},D7=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},k7=function(e){if(null!=e.n&&e.n>1)throw new J8("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},P7=function(e){return"string"==typeof e?e:void 0===e?"undefined":JSON.stringify(e)};class F7 extends R7{static runFunctions(e,t,r){const n=new F7,i={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return n._run(()=>n._runFunctions(e,t,i)),n}static runTools(e,t,r){const n=new F7,i={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return n._run(()=>n._runTools(e,t,i)),n}_addMessage(e,t=!0){super._addMessage(e,t),p7(e)&&e.content&&this._emit("content",e.content)}}const I7=1,M7=2,N7=4,L7=8,U7=16,j7=32,z7=64,V7=128,G7=256,H7=511;class $7 extends Error{}class W7 extends Error{}const q7=(e,t)=>{const r=e.length;let n=0;const i=e=>{throw new $7(`${e} at position ${n}`)},s=e=>{throw new W7(`${e} at position ${n}`)},o=()=>(d(),n>=r&&i("Unexpected end of input"),'"'===e[n]?a():"{"===e[n]?l():"["===e[n]?u():"null"===e.substring(n,n+4)||U7&t&&r-n<4&&"null".startsWith(e.substring(n))?(n+=4,null):"true"===e.substring(n,n+4)||j7&t&&r-n<4&&"true".startsWith(e.substring(n))?(n+=4,!0):"false"===e.substring(n,n+5)||j7&t&&r-n<5&&"false".startsWith(e.substring(n))?(n+=5,!1):"Infinity"===e.substring(n,n+8)||V7&t&&r-n<8&&"Infinity".startsWith(e.substring(n))?(n+=8,1/0):"-Infinity"===e.substring(n,n+9)||G7&t&&1<r-n&&r-n<9&&"-Infinity".startsWith(e.substring(n))?(n+=9,-1/0):"NaN"===e.substring(n,n+3)||z7&t&&r-n<3&&"NaN".startsWith(e.substring(n))?(n+=3,NaN):c()),a=()=>{const o=n;let a=!1;for(n++;n<r&&('"'!==e[n]||a&&"\\"===e[n-1]);)a="\\"===e[n]&&!a,n++;if('"'==e.charAt(n))try{return JSON.parse(e.substring(o,++n-Number(a)))}catch(Ove){s(String(Ove))}else if(I7&t)try{return JSON.parse(e.substring(o,n-Number(a))+'"')}catch(Ove){return JSON.parse(e.substring(o,e.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},l=()=>{n++,d();const s={};try{for(;"}"!==e[n];){if(d(),n>=r&&L7&t)return s;const i=a();d(),n++;try{const e=o();Object.defineProperty(s,i,{value:e,writable:!0,enumerable:!0,configurable:!0})}catch(Ove){if(L7&t)return s;throw Ove}d(),","===e[n]&&n++}}catch(Ove){if(L7&t)return s;i("Expected '}' at end of object")}return n++,s},u=()=>{n++;const r=[];try{for(;"]"!==e[n];)r.push(o()),d(),","===e[n]&&n++}catch(Ove){if(N7&t)return r;i("Expected ']' at end of array")}return n++,r},c=()=>{if(0===n){"-"===e&&M7&t&&i("Not sure what '-' is");try{return JSON.parse(e)}catch(Ove){if(M7&t)try{return"."===e[e.length-1]?JSON.parse(e.substring(0,e.lastIndexOf("."))):JSON.parse(e.substring(0,e.lastIndexOf("e")))}catch(Ove){}s(String(Ove))}}const o=n;for("-"===e[n]&&n++;e[n]&&!",]}".includes(e[n]);)n++;n!=r||M7&t||i("Unterminated number literal");try{return JSON.parse(e.substring(o,n))}catch(Ove){"-"===e.substring(o,n)&&M7&t&&i("Not sure what '-' is");try{return JSON.parse(e.substring(o,e.lastIndexOf("e")))}catch(Ove){s(String(Ove))}}},d=()=>{for(;n<r&&" \n\r\t".includes(e[n]);)n++};return o()},X7=e=>function(e,t=H7){if("string"!=typeof e)throw new TypeError("expecting str, got "+typeof e);if(!e.trim())throw new Error(`${e} is empty`);return q7(e.trim(),t)}(e,H7^M7);var Y7,K7,Z7,J7,Q7,e9,t9,r9,n9,i9,s9,o9,a9=globalThis&&globalThis.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},l9=globalThis&&globalThis.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class u9 extends R7{constructor(e){super(),Y7.add(this),K7.set(this,void 0),Z7.set(this,void 0),J7.set(this,void 0),a9(this,K7,e,"f"),a9(this,Z7,[],"f")}get currentChatCompletionSnapshot(){return l9(this,J7,"f")}static fromReadableStream(e){const t=new u9(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,r){const n=new u9(t);return n._run(()=>n._runChatCompletion(e,{...t,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),n}async _createChatCompletion(e,t,r){super._createChatCompletion;const n=r?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),l9(this,Y7,"m",Q7).call(this);const i=await e.chat.completions.create({...t,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const s of i)l9(this,Y7,"m",t9).call(this,s);if(i.controller.signal?.aborted)throw new e6;return this._addChatCompletion(l9(this,Y7,"m",i9).call(this))}async _fromReadableStream(e,t){const r=t?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),l9(this,Y7,"m",Q7).call(this),this._connected();const n=b6.fromReadableStream(e,this.controller);let i;for await(const s of n)i&&i!==s.id&&this._addChatCompletion(l9(this,Y7,"m",i9).call(this)),l9(this,Y7,"m",t9).call(this,s),i=s.id;if(n.controller.signal?.aborted)throw new e6;return this._addChatCompletion(l9(this,Y7,"m",i9).call(this))}[(K7=new WeakMap,Z7=new WeakMap,J7=new WeakMap,Y7=new WeakSet,Q7=function(){this.ended||a9(this,J7,void 0,"f")},e9=function(e){let t=l9(this,Z7,"f")[e.index];return t||(t={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},l9(this,Z7,"f")[e.index]=t,t)},t9=function(e){if(this.ended)return;const t=l9(this,Y7,"m",o9).call(this,e);this._emit("chunk",e,t);for(const r of e.choices){const e=t.choices[r.index];null!=r.delta.content&&"assistant"===e.message?.role&&e.message?.content&&(this._emit("content",r.delta.content,e.message.content),this._emit("content.delta",{delta:r.delta.content,snapshot:e.message.content,parsed:e.message.parsed})),null!=r.delta.refusal&&"assistant"===e.message?.role&&e.message?.refusal&&this._emit("refusal.delta",{delta:r.delta.refusal,snapshot:e.message.refusal}),null!=r.logprobs?.content&&"assistant"===e.message?.role&&this._emit("logprobs.content.delta",{content:r.logprobs?.content,snapshot:e.logprobs?.content??[]}),null!=r.logprobs?.refusal&&"assistant"===e.message?.role&&this._emit("logprobs.refusal.delta",{refusal:r.logprobs?.refusal,snapshot:e.logprobs?.refusal??[]});const n=l9(this,Y7,"m",e9).call(this,e);e.finish_reason&&(l9(this,Y7,"m",n9).call(this,e),null!=n.current_tool_call_index&&l9(this,Y7,"m",r9).call(this,e,n.current_tool_call_index));for(const t of r.delta.tool_calls??[])n.current_tool_call_index!==t.index&&(l9(this,Y7,"m",n9).call(this,e),null!=n.current_tool_call_index&&l9(this,Y7,"m",r9).call(this,e,n.current_tool_call_index)),n.current_tool_call_index=t.index;for(const t of r.delta.tool_calls??[]){const r=e.message.tool_calls?.[t.index];r?.type&&("function"===r?.type?this._emit("tool_calls.function.arguments.delta",{name:r.function?.name,index:t.index,arguments:r.function.arguments,parsed_arguments:r.function.parsed_arguments,arguments_delta:t.function?.arguments??""}):d9())}}},r9=function(e,t){if(l9(this,Y7,"m",e9).call(this,e).done_tool_calls.has(t))return;const r=e.message.tool_calls?.[t];if(!r)throw new Error("no tool call snapshot");if(!r.type)throw new Error("tool call snapshot missing `type`");if("function"===r.type){const e=l9(this,K7,"f")?.tools?.find(e=>"function"===e.type&&e.function.name===r.function.name);this._emit("tool_calls.function.arguments.done",{name:r.function.name,index:t,arguments:r.function.arguments,parsed_arguments:v7(e)?e.$parseRaw(r.function.arguments):e?.function.strict?JSON.parse(r.function.arguments):null})}else r.type},n9=function(e){const t=l9(this,Y7,"m",e9).call(this,e);if(e.message.content&&!t.content_done){t.content_done=!0;const r=l9(this,Y7,"m",s9).call(this);this._emit("content.done",{content:e.message.content,parsed:r?r.$parseRaw(e.message.content):null})}e.message.refusal&&!t.refusal_done&&(t.refusal_done=!0,this._emit("refusal.done",{refusal:e.message.refusal})),e.logprobs?.content&&!t.logprobs_content_done&&(t.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:e.logprobs.content})),e.logprobs?.refusal&&!t.logprobs_refusal_done&&(t.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:e.logprobs.refusal}))},i9=function(){if(this.ended)throw new J8("stream has ended, this shouldn't happen");const e=l9(this,J7,"f");if(!e)throw new J8("request ended without sending any chunks");return a9(this,J7,void 0,"f"),a9(this,Z7,[],"f"),function(e,t){const{id:r,choices:n,created:i,model:s,system_fingerprint:o,...a}=e,l={...a,id:r,choices:n.map(({message:t,finish_reason:r,index:n,logprobs:i,...s})=>{if(!r)throw new J8(`missing finish_reason for choice ${n}`);const{content:o=null,function_call:a,tool_calls:l,...u}=t,c=t.role;if(!c)throw new J8(`missing role for choice ${n}`);if(a){const{arguments:e,name:l}=a;if(null==e)throw new J8(`missing function_call.arguments for choice ${n}`);if(!l)throw new J8(`missing function_call.name for choice ${n}`);return{...s,message:{content:o,function_call:{arguments:e,name:l},role:c,refusal:t.refusal??null},finish_reason:r,index:n,logprobs:i}}return l?{...s,index:n,finish_reason:r,logprobs:i,message:{...u,role:c,content:o,refusal:t.refusal??null,tool_calls:l.map((t,r)=>{const{function:i,type:s,id:o,...a}=t,{arguments:l,name:u,...c}=i||{};if(null==o)throw new J8(`missing choices[${n}].tool_calls[${r}].id\n${c9(e)}`);if(null==s)throw new J8(`missing choices[${n}].tool_calls[${r}].type\n${c9(e)}`);if(null==u)throw new J8(`missing choices[${n}].tool_calls[${r}].function.name\n${c9(e)}`);if(null==l)throw new J8(`missing choices[${n}].tool_calls[${r}].function.arguments\n${c9(e)}`);return{...a,id:o,type:s,function:{...c,name:u,arguments:l}}})}}:{...s,message:{...u,content:o,role:c,refusal:t.refusal??null},finish_reason:r,index:n,logprobs:i}}),created:i,model:s,object:"chat.completion",...o?{system_fingerprint:o}:{}};return function(e,t){return t&&x7(t)?_7(e,t):{...e,choices:e.choices.map(e=>({...e,message:{...e.message,parsed:null,...e.message.tool_calls?{tool_calls:e.message.tool_calls}:void 0}}))}}(l,t)}(e,l9(this,K7,"f"))},s9=function(){const e=l9(this,K7,"f")?.response_format;return y7(e)?e:null},o9=function(e){var t,r,n,i;let s=l9(this,J7,"f");const{choices:o,...a}=e;s?Object.assign(s,a):s=a9(this,J7,{...a,choices:[]},"f");for(const{delta:l,finish_reason:u,index:c,logprobs:d=null,...h}of e.choices){let e=s.choices[c];if(e||(e=s.choices[c]={finish_reason:u,index:c,message:{},logprobs:d,...h}),d)if(e.logprobs){const{content:n,refusal:i,...s}=d;Object.assign(e.logprobs,s),n&&((t=e.logprobs).content??(t.content=[]),e.logprobs.content.push(...n)),i&&((r=e.logprobs).refusal??(r.refusal=[]),e.logprobs.refusal.push(...i))}else e.logprobs=Object.assign({},d);if(u&&(e.finish_reason=u,l9(this,K7,"f")&&x7(l9(this,K7,"f")))){if("length"===u)throw new d6;if("content_filter"===u)throw new h6}if(Object.assign(e,h),!l)continue;const{content:o,refusal:a,function_call:f,role:p,tool_calls:m,...g}=l;if(Object.assign(e.message,g),a&&(e.message.refusal=(e.message.refusal||"")+a),p&&(e.message.role=p),f&&(e.message.function_call?(f.name&&(e.message.function_call.name=f.name),f.arguments&&((n=e.message.function_call).arguments??(n.arguments=""),e.message.function_call.arguments+=f.arguments)):e.message.function_call=f),o&&(e.message.content=(e.message.content||"")+o,!e.message.refusal&&l9(this,Y7,"m",s9).call(this)&&(e.message.parsed=X7(e.message.content))),m){e.message.tool_calls||(e.message.tool_calls=[]);for(const{index:t,id:r,type:n,function:s,...o}of m){const a=(i=e.message.tool_calls)[t]??(i[t]={});Object.assign(a,o),r&&(a.id=r),n&&(a.type=n),s&&(a.function??(a.function={name:s.name??"",arguments:""})),s?.name&&(a.function.name=s.name),s?.arguments&&(a.function.arguments+=s.arguments,w7(l9(this,K7,"f"),a)&&(a.function.parsed_arguments=X7(a.function.arguments)))}}}return s},Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("chunk",r=>{const n=t.shift();n?n.resolve(r):e.push(r)}),this.on("end",()=>{r=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{r=!0;for(const r of t)r.reject(e);t.length=0}),this.on("error",e=>{r=!0;for(const r of t)r.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((e,r)=>t.push({resolve:e,reject:r})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new b6(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function c9(e){return JSON.stringify(e)}function d9(e){}class h9 extends u9{static fromReadableStream(e){const t=new h9(null);return t._run(()=>t._fromReadableStream(e)),t}static runFunctions(e,t,r){const n=new h9(null),i={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return n._run(()=>n._runFunctions(e,t,i)),n}static runTools(e,t,r){const n=new h9(t),i={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return n._run(()=>n._runTools(e,t,i)),n}}let f9=class extends h5{parse(e,t){return function(e){for(const t of e??[]){if("function"!==t.type)throw new J8(`Currently only \`function\` tool types support auto-parsing; Received \`${t.type}\``);if(!0!==t.function.strict)throw new J8(`The \`${t.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t?.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(t=>_7(t,e))}runFunctions(e,t){return e.stream?h9.runFunctions(this._client,e,t):F7.runFunctions(this._client,e,t)}runTools(e,t){return e.stream?h9.runTools(this._client,e,t):F7.runTools(this._client,e,t)}stream(e,t){return u9.createChatCompletion(this._client,e,t)}};class p9 extends h5{constructor(){super(...arguments),this.completions=new f9(this._client)}}!function(e){e.Completions=f9}(p9||(p9={}));class m9 extends h5{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}}class g9 extends h5{create(e,t){return this._client.post("/realtime/transcription_sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}}class y9 extends h5{constructor(){super(...arguments),this.sessions=new m9(this._client),this.transcriptionSessions=new g9(this._client)}}y9.Sessions=m9,y9.TranscriptionSessions=g9;class v9 extends h5{create(e,t,r){return this._client.post(`/threads/${e}/messages`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(e,t,r){return this._client.get(`/threads/${e}/messages/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}update(e,t,r,n){return this._client.post(`/threads/${e}/messages/${t}`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}list(e,t={},r){return G6(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,_9,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}del(e,t,r){return this._client.delete(`/threads/${e}/messages/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}}class _9 extends d5{}v9.MessagesPage=_9;class b9 extends h5{retrieve(e,t,r,n={},i){return G6(n)?this.retrieve(e,t,r,{},n):this._client.get(`/threads/${e}/runs/${t}/steps/${r}`,{query:n,...i,headers:{"OpenAI-Beta":"assistants=v2",...i?.headers}})}list(e,t,r={},n){return G6(r)?this.list(e,t,{},r):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,w9,{query:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class w9 extends d5{}b9.RunStepsPage=w9;let x9=class extends h5{constructor(){super(...arguments),this.steps=new b9(this._client)}create(e,t,r){const{include:n,...i}=t;return this._client.post(`/threads/${e}/runs`,{query:{include:n},body:i,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers},stream:t.stream??!1})}retrieve(e,t,r){return this._client.get(`/threads/${e}/runs/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}update(e,t,r,n){return this._client.post(`/threads/${e}/runs/${t}`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}list(e,t={},r){return G6(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,E9,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}cancel(e,t,r){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}async createAndPoll(e,t,r){const n=await this.create(e,t,r);return await this.poll(e,n.id,r)}createAndStream(e,t,r){return c7.createAssistantStream(e,this._client.beta.threads.runs,t,r)}async poll(e,t,r){const n={...r?.headers,"X-Stainless-Poll-Helper":"true"};for(r?.pollIntervalMs&&(n["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:i,response:s}=await this.retrieve(e,t,{...r,headers:{...r?.headers,...n}}).withResponse();switch(i.status){case"queued":case"in_progress":case"cancelling":let e=5e3;if(r?.pollIntervalMs)e=r.pollIntervalMs;else{const t=s.headers.get("openai-poll-after-ms");if(t){const r=parseInt(t);isNaN(r)||(e=r)}}await J6(e);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return i}}}stream(e,t,r){return c7.createAssistantStream(e,this._client.beta.threads.runs,t,r)}submitToolOutputs(e,t,r,n){return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers},stream:r.stream??!1})}async submitToolOutputsAndPoll(e,t,r,n){const i=await this.submitToolOutputs(e,t,r,n);return await this.poll(e,i.id,n)}submitToolOutputsStream(e,t,r,n){return c7.createToolAssistantStream(e,t,this._client.beta.threads.runs,r,n)}};class E9 extends d5{}x9.RunsPage=E9,x9.Steps=b9,x9.RunStepsPage=w9;class S9 extends h5{constructor(){super(...arguments),this.runs=new x9(this._client),this.messages=new v9(this._client)}create(e={},t){return G6(e)?this.create({},e):this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,r){return this._client.post(`/threads/${e}`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}del(e,t){return this._client.delete(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers},stream:e.stream??!1})}async createAndRunPoll(e,t){const r=await this.createAndRun(e,t);return await this.runs.poll(r.thread_id,r.id,t)}createAndRunStream(e,t){return c7.createThreadAssistantStream(e,this._client.beta.threads,t)}}S9.Runs=x9,S9.RunsPage=E9,S9.Messages=v9,S9.MessagesPage=_9;class C9 extends h5{constructor(){super(...arguments),this.realtime=new y9(this._client),this.chat=new p9(this._client),this.assistants=new d7(this._client),this.threads=new S9(this._client)}}C9.Realtime=y9,C9.Assistants=d7,C9.AssistantsPage=h7,C9.Threads=S9;class A9 extends h5{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}class T9 extends h5{retrieve(e,t,r){return this._client.get(`/containers/${e}/files/${t}/content`,{...r,headers:{Accept:"application/binary",...r?.headers},__binaryResponse:!0})}}let D9=class extends h5{constructor(){super(...arguments),this.content=new T9(this._client)}create(e,t,r){return this._client.post(`/containers/${e}/files`,k6({body:t,...r}))}retrieve(e,t,r){return this._client.get(`/containers/${e}/files/${t}`,r)}list(e,t={},r){return G6(t)?this.list(e,{},t):this._client.getAPIList(`/containers/${e}/files`,k9,{query:t,...r})}del(e,t,r){return this._client.delete(`/containers/${e}/files/${t}`,{...r,headers:{Accept:"*/*",...r?.headers}})}};class k9 extends d5{}D9.FileListResponsesPage=k9,D9.Content=T9;class P9 extends h5{constructor(){super(...arguments),this.files=new D9(this._client)}create(e,t){return this._client.post("/containers",{body:e,...t})}retrieve(e,t){return this._client.get(`/containers/${e}`,t)}list(e={},t){return G6(e)?this.list({},e):this._client.getAPIList("/containers",B9,{query:e,...t})}del(e,t){return this._client.delete(`/containers/${e}`,{...t,headers:{Accept:"*/*",...t?.headers}})}}class B9 extends d5{}P9.ContainerListResponsesPage=B9,P9.Files=D9,P9.FileListResponsesPage=k9;class O9 extends h5{create(e,t){const r=!!e.encoding_format;let n=r?e.encoding_format:"base64";r&&o5("Request","User defined encoding_format:",e.encoding_format);const i=this._client.post("/embeddings",{body:{...e,encoding_format:n},...t});return r?i:(o5("response","Decoding base64 embeddings to float32 array"),i._thenUnwrap(e=>(e&&e.data&&e.data.forEach(e=>{const t=e.embedding;e.embedding=(e=>{if("undefined"!=typeof Buffer){const t=Buffer.from(e,"base64");return Array.from(new Float32Array(t.buffer,t.byteOffset,t.length/Float32Array.BYTES_PER_ELEMENT))}{const t=atob(e),r=t.length,n=new Uint8Array(r);for(let e=0;e<r;e++)n[e]=t.charCodeAt(e);return Array.from(new Float32Array(n.buffer))}})(t)}),e)))}}class R9 extends h5{retrieve(e,t,r,n){return this._client.get(`/evals/${e}/runs/${t}/output_items/${r}`,n)}list(e,t,r={},n){return G6(r)?this.list(e,t,{},r):this._client.getAPIList(`/evals/${e}/runs/${t}/output_items`,F9,{query:r,...n})}}class F9 extends d5{}R9.OutputItemListResponsesPage=F9;class I9 extends h5{constructor(){super(...arguments),this.outputItems=new R9(this._client)}create(e,t,r){return this._client.post(`/evals/${e}/runs`,{body:t,...r})}retrieve(e,t,r){return this._client.get(`/evals/${e}/runs/${t}`,r)}list(e,t={},r){return G6(t)?this.list(e,{},t):this._client.getAPIList(`/evals/${e}/runs`,M9,{query:t,...r})}del(e,t,r){return this._client.delete(`/evals/${e}/runs/${t}`,r)}cancel(e,t,r){return this._client.post(`/evals/${e}/runs/${t}`,r)}}class M9 extends d5{}I9.RunListResponsesPage=M9,I9.OutputItems=R9,I9.OutputItemListResponsesPage=F9;class N9 extends h5{constructor(){super(...arguments),this.runs=new I9(this._client)}create(e,t){return this._client.post("/evals",{body:e,...t})}retrieve(e,t){return this._client.get(`/evals/${e}`,t)}update(e,t,r){return this._client.post(`/evals/${e}`,{body:t,...r})}list(e={},t){return G6(e)?this.list({},e):this._client.getAPIList("/evals",L9,{query:e,...t})}del(e,t){return this._client.delete(`/evals/${e}`,t)}}class L9 extends d5{}N9.EvalListResponsesPage=L9,N9.Runs=I9,N9.RunListResponsesPage=M9;let U9=class extends h5{create(e,t){return this._client.post("/files",k6({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(e={},t){return G6(e)?this.list({},e):this._client.getAPIList("/files",j9,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:"application/binary",...t?.headers},__binaryResponse:!0})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,t)}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:r=18e5}={}){const n=new Set(["processed","error","deleted"]),i=Date.now();let s=await this.retrieve(e);for(;!s.status||!n.has(s.status);)if(await J6(t),s=await this.retrieve(e),Date.now()-i>r)throw new r6({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return s}};class j9 extends d5{}U9.FileObjectsPage=j9;class z9 extends h5{}let V9=class extends h5{run(e,t){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...t})}validate(e,t){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...t})}};class G9 extends h5{constructor(){super(...arguments),this.graders=new V9(this._client)}}G9.Graders=V9;class H9 extends h5{create(e,t,r){return this._client.getAPIList(`/fine_tuning/checkpoints/${e}/permissions`,$9,{body:t,method:"post",...r})}retrieve(e,t={},r){return G6(t)?this.retrieve(e,{},t):this._client.get(`/fine_tuning/checkpoints/${e}/permissions`,{query:t,...r})}del(e,t,r){return this._client.delete(`/fine_tuning/checkpoints/${e}/permissions/${t}`,r)}}class $9 extends c5{}H9.PermissionCreateResponsesPage=$9;let W9=class extends h5{constructor(){super(...arguments),this.permissions=new H9(this._client)}};W9.Permissions=H9,W9.PermissionCreateResponsesPage=$9;class q9 extends h5{list(e,t={},r){return G6(t)?this.list(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,X9,{query:t,...r})}}class X9 extends d5{}q9.FineTuningJobCheckpointsPage=X9;class Y9 extends h5{constructor(){super(...arguments),this.checkpoints=new q9(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return G6(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",K9,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},r){return G6(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,Z9,{query:t,...r})}pause(e,t){return this._client.post(`/fine_tuning/jobs/${e}/pause`,t)}resume(e,t){return this._client.post(`/fine_tuning/jobs/${e}/resume`,t)}}class K9 extends d5{}class Z9 extends d5{}Y9.FineTuningJobsPage=K9,Y9.FineTuningJobEventsPage=Z9,Y9.Checkpoints=q9,Y9.FineTuningJobCheckpointsPage=X9;class J9 extends h5{constructor(){super(...arguments),this.methods=new z9(this._client),this.jobs=new Y9(this._client),this.checkpoints=new W9(this._client),this.alpha=new G9(this._client)}}J9.Methods=z9,J9.Jobs=Y9,J9.FineTuningJobsPage=K9,J9.FineTuningJobEventsPage=Z9,J9.Checkpoints=W9,J9.Alpha=G9;class Q9 extends h5{}class eee extends h5{constructor(){super(...arguments),this.graderModels=new Q9(this._client)}}eee.GraderModels=Q9;class tee extends h5{createVariation(e,t){return this._client.post("/images/variations",k6({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",k6({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}class ree extends h5{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",nee,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}}class nee extends c5{}ree.ModelsPage=nee;class iee extends h5{create(e,t){return this._client.post("/moderations",{body:e,...t})}}function see(e,t){return t&&function(e){return!!y7(e.text?.format)}(t)?oee(e,t):{...e,output_parsed:null,output:e.output.map(e=>"function_call"===e.type?{...e,parsed_arguments:null}:"message"===e.type?{...e,content:e.content.map(e=>({...e,parsed:null}))}:e)}}function oee(e,t){const r=e.output.map(e=>{if("function_call"===e.type)return{...e,parsed_arguments:lee(t,e)};if("message"===e.type){const r=e.content.map(e=>"output_text"===e.type?{...e,parsed:aee(t,e.text)}:e);return{...e,content:r}}return e}),n=Object.assign({},e,{output:r});return Object.getOwnPropertyDescriptor(e,"output_text")||uee(n),Object.defineProperty(n,"output_parsed",{enumerable:!0,get(){for(const e of n.output)if("message"===e.type)for(const t of e.content)if("output_text"===t.type&&null!==t.parsed)return t.parsed;return null}}),n}function aee(e,t){if("json_schema"!==e.text?.format?.type)return null;if("$parseRaw"in e.text?.format){const r=e.text?.format;return r.$parseRaw(t)}return JSON.parse(t)}function lee(e,t){const r=(n=e.tools??[],i=t.name,n.find(e=>"function"===e.type&&e.name===i));var n,i,s;return{...t,...t,parsed_arguments:(s=r,"auto-parseable-tool"===s?.$brand?r.$parseRaw(t.arguments):r?.strict?JSON.parse(t.arguments):null)}}function uee(e){const t=[];for(const r of e.output)if("message"===r.type)for(const e of r.content)"output_text"===e.type&&t.push(e.text);e.output_text=t.join("")}class cee extends h5{list(e,t={},r){return G6(t)?this.list(e,{},t):this._client.getAPIList(`/responses/${e}/input_items`,See,{query:t,...r})}}var dee,hee,fee,pee,mee,gee,yee,vee,_ee,bee=globalThis&&globalThis.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},wee=globalThis&&globalThis.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class xee extends U5{constructor(e){super(),dee.add(this),hee.set(this,void 0),fee.set(this,void 0),pee.set(this,void 0),bee(this,hee,e,"f")}static createResponse(e,t,r){const n=new xee(t);return n._run(()=>n._createOrRetrieveResponse(e,t,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),n}async _createOrRetrieveResponse(e,t,r){const n=r?.signal;let i;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),wee(this,dee,"m",mee).call(this);let s=null;"response_id"in t?(i=await e.responses.retrieve(t.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),s=t.starting_after??null):i=await e.responses.create({...t,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const o of i)wee(this,dee,"m",gee).call(this,o,s);if(i.controller.signal?.aborted)throw new e6;return wee(this,dee,"m",yee).call(this)}[(hee=new WeakMap,fee=new WeakMap,pee=new WeakMap,dee=new WeakSet,mee=function(){this.ended||bee(this,fee,void 0,"f")},gee=function(e,t){if(this.ended)return;const r=(e,r)=>{(null==t||r.sequence_number>t)&&this._emit(e,r)},n=wee(this,dee,"m",vee).call(this,e);switch(r("event",e),e.type){case"response.output_text.delta":{const t=n.output[e.output_index];if(!t)throw new J8(`missing output at index ${e.output_index}`);if("message"===t.type){const n=t.content[e.content_index];if(!n)throw new J8(`missing content at index ${e.content_index}`);if("output_text"!==n.type)throw new J8(`expected content to be 'output_text', got ${n.type}`);r("response.output_text.delta",{...e,snapshot:n.text})}break}case"response.function_call_arguments.delta":{const t=n.output[e.output_index];if(!t)throw new J8(`missing output at index ${e.output_index}`);"function_call"===t.type&&r("response.function_call_arguments.delta",{...e,snapshot:t.arguments});break}default:r(e.type,e)}},yee=function(){if(this.ended)throw new J8("stream has ended, this shouldn't happen");const e=wee(this,fee,"f");if(!e)throw new J8("request ended without sending any events");bee(this,fee,void 0,"f");const t=function(e,t){return see(e,t)}(e,wee(this,hee,"f"));return bee(this,pee,t,"f"),t},vee=function(e){let t=wee(this,fee,"f");if(!t){if("response.created"!==e.type)throw new J8(`When snapshot hasn't been set yet, expected 'response.created' event, got ${e.type}`);return t=bee(this,fee,e.response,"f"),t}switch(e.type){case"response.output_item.added":t.output.push(e.item);break;case"response.content_part.added":{const r=t.output[e.output_index];if(!r)throw new J8(`missing output at index ${e.output_index}`);"message"===r.type&&r.content.push(e.part);break}case"response.output_text.delta":{const r=t.output[e.output_index];if(!r)throw new J8(`missing output at index ${e.output_index}`);if("message"===r.type){const t=r.content[e.content_index];if(!t)throw new J8(`missing content at index ${e.content_index}`);if("output_text"!==t.type)throw new J8(`expected content to be 'output_text', got ${t.type}`);t.text+=e.delta}break}case"response.function_call_arguments.delta":{const r=t.output[e.output_index];if(!r)throw new J8(`missing output at index ${e.output_index}`);"function_call"===r.type&&(r.arguments+=e.delta);break}case"response.completed":bee(this,fee,e.response,"f")}return t},Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("event",r=>{const n=t.shift();n?n.resolve(r):e.push(r)}),this.on("end",()=>{r=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{r=!0;for(const r of t)r.reject(e);t.length=0}),this.on("error",e=>{r=!0;for(const r of t)r.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((e,r)=>t.push({resolve:e,reject:r})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=wee(this,pee,"f");if(!e)throw new J8("stream ended without producing a ChatCompletion");return e}}class Eee extends h5{constructor(){super(...arguments),this.inputItems=new cee(this._client)}create(e,t){return this._client.post("/responses",{body:e,...t,stream:e.stream??!1})._thenUnwrap(e=>("object"in e&&"response"===e.object&&uee(e),e))}retrieve(e,t={},r){return this._client.get(`/responses/${e}`,{query:t,...r,stream:t?.stream??!1})}del(e,t){return this._client.delete(`/responses/${e}`,{...t,headers:{Accept:"*/*",...t?.headers}})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(t=>oee(t,e))}stream(e,t){return xee.createResponse(this._client,e,t)}cancel(e,t){return this._client.post(`/responses/${e}/cancel`,{...t,headers:{Accept:"*/*",...t?.headers}})}}class See extends d5{}Eee.InputItems=cee;class Cee extends h5{create(e,t,r){return this._client.post(`/uploads/${e}/parts`,k6({body:t,...r}))}}class Aee extends h5{constructor(){super(...arguments),this.parts=new Cee(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(`/uploads/${e}/cancel`,t)}complete(e,t,r){return this._client.post(`/uploads/${e}/complete`,{body:t,...r})}}Aee.Parts=Cee;class Tee extends h5{create(e,t,r){return this._client.post(`/vector_stores/${e}/files`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(e,t,r){return this._client.get(`/vector_stores/${e}/files/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}update(e,t,r,n){return this._client.post(`/vector_stores/${e}/files/${t}`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}list(e,t={},r){return G6(t)?this.list(e,{},t):this._client.getAPIList(`/vector_stores/${e}/files`,Dee,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}del(e,t,r){return this._client.delete(`/vector_stores/${e}/files/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}async createAndPoll(e,t,r){const n=await this.create(e,t,r);return await this.poll(e,n.id,r)}async poll(e,t,r){const n={...r?.headers,"X-Stainless-Poll-Helper":"true"};for(r?.pollIntervalMs&&(n["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const i=await this.retrieve(e,t,{...r,headers:n}).withResponse(),s=i.data;switch(s.status){case"in_progress":let e=5e3;if(r?.pollIntervalMs)e=r.pollIntervalMs;else{const t=i.response.headers.get("openai-poll-after-ms");if(t){const r=parseInt(t);isNaN(r)||(e=r)}}await J6(e);break;case"failed":case"completed":return s}}}async upload(e,t,r){const n=await this._client.files.create({file:t,purpose:"assistants"},r);return this.create(e,{file_id:n.id},r)}async uploadAndPoll(e,t,r){const n=await this.upload(e,t,r);return await this.poll(e,n.id,r)}content(e,t,r){return this._client.getAPIList(`/vector_stores/${e}/files/${t}/content`,kee,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}}class Dee extends d5{}class kee extends c5{}Tee.VectorStoreFilesPage=Dee,Tee.FileContentResponsesPage=kee;class Pee extends h5{create(e,t,r){return this._client.post(`/vector_stores/${e}/file_batches`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}retrieve(e,t,r){return this._client.get(`/vector_stores/${e}/file_batches/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}cancel(e,t,r){return this._client.post(`/vector_stores/${e}/file_batches/${t}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}async createAndPoll(e,t,r){const n=await this.create(e,t);return await this.poll(e,n.id,r)}listFiles(e,t,r={},n){return G6(r)?this.listFiles(e,t,{},r):this._client.getAPIList(`/vector_stores/${e}/file_batches/${t}/files`,Dee,{query:r,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}async poll(e,t,r){const n={...r?.headers,"X-Stainless-Poll-Helper":"true"};for(r?.pollIntervalMs&&(n["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:i,response:s}=await this.retrieve(e,t,{...r,headers:n}).withResponse();switch(i.status){case"in_progress":let e=5e3;if(r?.pollIntervalMs)e=r.pollIntervalMs;else{const t=s.headers.get("openai-poll-after-ms");if(t){const r=parseInt(t);isNaN(r)||(e=r)}}await J6(e);break;case"failed":case"cancelled":case"completed":return i}}}async uploadAndPoll(e,{files:t,fileIds:r=[]},n){if(null==t||0==t.length)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const i=n?.maxConcurrency??5,s=Math.min(i,t.length),o=this._client,a=t.values(),l=[...r],u=Array(s).fill(a).map(async function(e){for(let t of e){const e=await o.files.create({file:t,purpose:"assistants"},n);l.push(e.id)}});return await(async e=>{const t=await Promise.allSettled(e),r=t.filter(e=>"rejected"===e.status);if(r.length){for(const e of r)console.error(e.reason);throw new Error(`${r.length} promise(s) failed - see the above errors`)}const n=[];for(const i of t)"fulfilled"===i.status&&n.push(i.value);return n})(u),await this.createAndPoll(e,{file_ids:l})}}class Bee extends h5{constructor(){super(...arguments),this.files=new Tee(this._client),this.fileBatches=new Pee(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,r){return this._client.post(`/vector_stores/${e}`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e={},t){return G6(e)?this.list({},e):this._client.getAPIList("/vector_stores",Oee,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}del(e,t){return this._client.delete(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}search(e,t,r){return this._client.getAPIList(`/vector_stores/${e}/search`,Ree,{body:t,method:"post",...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}}class Oee extends d5{}class Ree extends c5{}Bee.VectorStoresPage=Oee,Bee.VectorStoreSearchResponsesPage=Ree,Bee.Files=Tee,Bee.VectorStoreFilesPage=Dee,Bee.FileContentResponsesPage=kee,Bee.FileBatches=Pee;class Fee extends L6{constructor({baseURL:e=t5("OPENAI_BASE_URL"),apiKey:t=t5("OPENAI_API_KEY"),organization:r=t5("OPENAI_ORG_ID")??null,project:n=t5("OPENAI_PROJECT_ID")??null,...i}={}){if(void 0===t)throw new J8("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const s={apiKey:t,organization:r,project:n,...i,baseURL:e||"https://api.openai.com/v1"};if(!s.dangerouslyAllowBrowser&&"undefined"!=typeof window&&void 0!==window.document&&"undefined"!=typeof navigator)throw new J8("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew OpenAI({ apiKey, dangerouslyAllowBrowser: true });\n\nhttps://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety\n");super({baseURL:s.baseURL,timeout:s.timeout??6e5,httpAgent:s.httpAgent,maxRetries:s.maxRetries,fetch:s.fetch}),this.completions=new A9(this),this.chat=new y5(this),this.embeddings=new O9(this),this.files=new U9(this),this.images=new tee(this),this.audio=new w5(this),this.moderations=new iee(this),this.models=new ree(this),this.fineTuning=new J9(this),this.graders=new eee(this),this.vectorStores=new Bee(this),this.beta=new C9(this),this.batches=new x5(this),this.uploads=new Aee(this),this.responses=new Eee(this),this.evals=new N9(this),this.containers=new P9(this),this._options=s,this.apiKey=t,this.organization=r,this.project=n}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return L8(e,{arrayFormat:"brackets"})}}_ee=Fee,Fee.OpenAI=_ee,Fee.DEFAULT_TIMEOUT=6e5,Fee.OpenAIError=J8,Fee.APIError=Q8,Fee.APIConnectionError=t6,Fee.APIConnectionTimeoutError=r6,Fee.APIUserAbortError=e6,Fee.NotFoundError=o6,Fee.ConflictError=a6,Fee.RateLimitError=u6,Fee.BadRequestError=n6,Fee.AuthenticationError=i6,Fee.InternalServerError=c6,Fee.PermissionDeniedError=s6,Fee.UnprocessableEntityError=l6,Fee.toFile=C6,Fee.fileFromPath=q8,Fee.Completions=A9,Fee.Chat=y5,Fee.ChatCompletionsPage=m5,Fee.Embeddings=O9,Fee.Files=U9,Fee.FileObjectsPage=j9,Fee.Images=tee,Fee.Audio=w5,Fee.Moderations=iee,Fee.Models=ree,Fee.ModelsPage=nee,Fee.FineTuning=J9,Fee.Graders=eee,Fee.VectorStores=Bee,Fee.VectorStoresPage=Oee,Fee.VectorStoreSearchResponsesPage=Ree,Fee.Beta=C9,Fee.Batches=x5,Fee.BatchesPage=E5,Fee.Uploads=Aee,Fee.Responses=Eee,Fee.Evals=N9,Fee.EvalListResponsesPage=L9,Fee.Containers=P9,Fee.ContainerListResponsesPage=B9,e("ct",Fee);var Iee=["PageUp","PageDown"],Mee=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Nee={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Lee="Slider",[Uee,jee,zee]=qz(Lee),[Vee,Gee]=Zj(Lee,[zee]),[Hee,$ee]=Vee(Lee),Wee=$.forwardRef((e,t)=>{const{name:r,min:n=0,max:i=100,step:s=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:u=[n],value:c,onValueChange:d=()=>{},onValueCommit:h=()=>{},inverted:f=!1,form:p,...m}=e,g=$.useRef(new Set),y=$.useRef(0),v="horizontal"===o?Yee:Kee,[_=[],b]=Wz({prop:c,defaultProp:u,onChange:e=>{const t=[...g.current];t[y.current]?.focus(),d(e)}}),w=$.useRef(_);function x(e,t,{commit:r}={commit:!1}){const o=function(e){return(String(e).split(".")[1]||"").length}(s),a=function(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}(Math.round((e-n)/s)*s+n,o),u=rz(a,[n,i]);b((e=[])=>{const n=function(e=[],t,r){const n=[...e];return n[r]=t,n.sort((e,t)=>e-t)}(e,u,t);if(function(e,t){if(t>0){const r=function(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}(e);return Math.min(...r)>=t}return!0}(n,l*s)){y.current=n.indexOf(u);const t=String(n)!==String(e);return t&&r&&h(n),t?n:e}return e})}return te.jsx(Hee,{scope:e.__scopeSlider,name:r,disabled:a,min:n,max:i,valueIndexToChangeRef:y,thumbs:g.current,values:_,orientation:o,form:p,children:te.jsx(Uee.Provider,{scope:e.__scopeSlider,children:te.jsx(Uee.Slot,{scope:e.__scopeSlider,children:te.jsx(v,{"aria-disabled":a,"data-disabled":a?"":void 0,...m,ref:t,onPointerDown:nz(m.onPointerDown,()=>{a||(w.current=_)}),min:n,max:i,inverted:f,onSlideStart:a?void 0:function(e){const t=function(e,t){if(1===e.length)return 0;const r=e.map(e=>Math.abs(e-t)),n=Math.min(...r);return r.indexOf(n)}(_,e);x(e,t)},onSlideMove:a?void 0:function(e){x(e,y.current)},onSlideEnd:a?void 0:function(){const e=w.current[y.current];_[y.current]!==e&&h(_)},onHomeKeyDown:()=>!a&&x(n,0,{commit:!0}),onEndKeyDown:()=>!a&&x(i,_.length-1,{commit:!0}),onStepKeyDown:({event:e,direction:t})=>{if(!a){const r=Iee.includes(e.key)||e.shiftKey&&Mee.includes(e.key)?10:1,n=y.current;x(_[n]+s*r*t,n,{commit:!0})}}})})})})});Wee.displayName=Lee;var[qee,Xee]=Vee(Lee,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Yee=$.forwardRef((e,t)=>{const{min:r,max:n,dir:i,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:u,...c}=e,[d,h]=$.useState(null),f=jj(t,e=>h(e)),p=$.useRef(void 0),m=tz(i),g="ltr"===m,y=g&&!s||!g&&s;function v(e){const t=p.current||d.getBoundingClientRect(),i=ate([0,t.width],y?[r,n]:[n,r]);return p.current=t,i(e-t.left)}return te.jsx(qee,{scope:e.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:te.jsx(Zee,{dir:m,"data-orientation":"horizontal",...c,ref:f,style:{...c.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{const t=v(e.clientX);o?.(t)},onSlideMove:e=>{const t=v(e.clientX);a?.(t)},onSlideEnd:()=>{p.current=void 0,l?.()},onStepKeyDown:e=>{const t=Nee[y?"from-left":"from-right"].includes(e.key);u?.({event:e,direction:t?-1:1})}})})}),Kee=$.forwardRef((e,t)=>{const{min:r,max:n,inverted:i,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...u}=e,c=$.useRef(null),d=jj(t,c),h=$.useRef(void 0),f=!i;function p(e){const t=h.current||c.current.getBoundingClientRect(),i=ate([0,t.height],f?[n,r]:[r,n]);return h.current=t,i(e-t.top)}return te.jsx(qee,{scope:e.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1,children:te.jsx(Zee,{"data-orientation":"vertical",...u,ref:d,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{const t=p(e.clientY);s?.(t)},onSlideMove:e=>{const t=p(e.clientY);o?.(t)},onSlideEnd:()=>{h.current=void 0,a?.()},onStepKeyDown:e=>{const t=Nee[f?"from-bottom":"from-top"].includes(e.key);l?.({event:e,direction:t?-1:1})}})})}),Zee=$.forwardRef((e,t)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:i,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...u}=e,c=$ee(Lee,r);return te.jsx(Wj.span,{...u,ref:t,onKeyDown:nz(e.onKeyDown,e=>{"Home"===e.key?(o(e),e.preventDefault()):"End"===e.key?(a(e),e.preventDefault()):Iee.concat(Mee).includes(e.key)&&(l(e),e.preventDefault())}),onPointerDown:nz(e.onPointerDown,e=>{const t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),c.thumbs.has(t)?t.focus():n(e)}),onPointerMove:nz(e.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&i(e)}),onPointerUp:nz(e.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),s(e))})})}),Jee="SliderTrack",Qee=$.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,i=$ee(Jee,r);return te.jsx(Wj.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...n,ref:t})});Qee.displayName=Jee;var ete="SliderRange",tte=$.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,i=$ee(ete,r),s=Xee(ete,r),o=jj(t,$.useRef(null)),a=i.values.length,l=i.values.map(e=>ote(e,i.min,i.max)),u=a>1?Math.min(...l):0,c=100-Math.max(...l);return te.jsx(Wj.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...n,ref:o,style:{...e.style,[s.startEdge]:u+"%",[s.endEdge]:c+"%"}})});tte.displayName=ete;var rte="SliderThumb",nte=$.forwardRef((e,t)=>{const r=jee(e.__scopeSlider),[n,i]=$.useState(null),s=jj(t,e=>i(e)),o=$.useMemo(()=>n?r().findIndex(e=>e.ref.current===n):-1,[r,n]);return te.jsx(ite,{...e,ref:s,index:o})}),ite=$.forwardRef((e,t)=>{const{__scopeSlider:r,index:n,name:i,...s}=e,o=$ee(rte,r),a=Xee(rte,r),[l,u]=$.useState(null),c=jj(t,e=>u(e)),d=!l||o.form||!!l.closest("form"),h=fH(l),f=o.values[n],p=void 0===f?0:ote(f,o.min,o.max),m=function(e,t){return t>2?`Value ${e+1} of ${t}`:2===t?["Minimum","Maximum"][e]:void 0}(n,o.values.length),g=h?.[a.size],y=g?function(e,t,r){const n=e/2,i=ate([0,50],[0,n]);return(n-i(t)*r)*r}(g,p,a.direction):0;return $.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),te.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${p}% + ${y}px)`},children:[te.jsx(Uee.ItemSlot,{scope:e.__scopeSlider,children:te.jsx(Wj.span,{role:"slider","aria-label":e["aria-label"]||m,"aria-valuemin":o.min,"aria-valuenow":f,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...s,ref:c,style:void 0===f?{display:"none"}:e.style,onFocus:nz(e.onFocus,()=>{o.valueIndexToChangeRef.current=n})})}),d&&te.jsx(ste,{name:i??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:f},n)]})});nte.displayName=rte;var ste=$.forwardRef(({__scopeSlider:e,value:t,...r},n)=>{const i=$.useRef(null),s=jj(i,n),o=W3(t);return $.useEffect(()=>{const e=i.current;if(!e)return;const r=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(r,"value").set;if(o!==t&&n){const r=new Event("input",{bubbles:!0});n.call(e,t),e.dispatchEvent(r)}},[o,t]),te.jsx(Wj.input,{style:{display:"none"},...r,ref:s,defaultValue:t})});function ote(e,t,r){return rz(100/(r-t)*(e-t),[0,100])}function ate(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function lte(){return(lte=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ute(e,t){if(null==e)return{};var r,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)t.indexOf(r=s[n])>=0||(i[r]=e[r]);return i}function cte(e){var t=$.useRef(e),r=$.useRef(function(e){t.current&&t.current(e)});return t.current=e,r.current}ste.displayName="RadioBubbleInput",e("cz",Wee),e("cA",Qee),e("cB",tte),e("cC",nte);var dte=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=1),e>r?r:e<t?t:e},hte=function(e){return"touches"in e},fte=function(e){return e&&e.ownerDocument.defaultView||self},pte=function(e,t,r){var n=e.getBoundingClientRect(),i=hte(t)?function(e,t){for(var r=0;r<e.length;r++)if(e[r].identifier===t)return e[r];return e[0]}(t.touches,r):t;return{left:dte((i.pageX-(n.left+fte(e).pageXOffset))/n.width),top:dte((i.pageY-(n.top+fte(e).pageYOffset))/n.height)}},mte=function(e){!hte(e)&&e.preventDefault()},gte=W.memo(function(e){var t=e.onMove,r=e.onKey,n=ute(e,["onMove","onKey"]),i=$.useRef(null),s=cte(t),o=cte(r),a=$.useRef(null),l=$.useRef(!1),u=$.useMemo(function(){var e=function(e){mte(e),(hte(e)?e.touches.length>0:e.buttons>0)&&i.current?s(pte(i.current,e,a.current)):r(!1)},t=function(){return r(!1)};function r(r){var n=l.current,s=fte(i.current),o=r?s.addEventListener:s.removeEventListener;o(n?"touchmove":"mousemove",e),o(n?"touchend":"mouseup",t)}return[function(e){var t=e.nativeEvent,n=i.current;if(n&&(mte(t),!function(e,t){return t&&!hte(e)}(t,l.current)&&n)){if(hte(t)){l.current=!0;var o=t.changedTouches||[];o.length&&(a.current=o[0].identifier)}n.focus(),s(pte(n,t,a.current)),r(!0)}},function(e){var t=e.which||e.keyCode;t<37||t>40||(e.preventDefault(),o({left:39===t?.05:37===t?-.05:0,top:40===t?.05:38===t?-.05:0}))},r]},[o,s]),c=u[0],d=u[1],h=u[2];return $.useEffect(function(){return h},[h]),W.createElement("div",lte({},n,{onTouchStart:c,onMouseDown:c,className:"react-colorful__interactive",ref:i,onKeyDown:d,tabIndex:0,role:"slider"}))}),yte=function(e){return e.filter(Boolean).join(" ")},vte=function(e){var t=e.color,r=e.left,n=e.top,i=void 0===n?.5:n,s=yte(["react-colorful__pointer",e.className]);return W.createElement("div",{className:s,style:{top:100*i+"%",left:100*r+"%"}},W.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}}))},_te=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=Math.pow(10,t)),Math.round(r*e)/r},bte=function(e){return"#"===e[0]&&(e=e.substring(1)),e.length<6?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?_te(parseInt(e[3]+e[3],16)/255,2):1}:{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16),a:8===e.length?_te(parseInt(e.substring(6,8),16)/255,2):1}},wte=function(e){var t=function(e){var t=e.s,r=e.v,n=e.a,i=(200-t)*r/100;return{h:_te(e.h),s:_te(i>0&&i<200?t*r/100/(i<=100?i:200-i)*100:0),l:_te(i/2),a:_te(n,2)}}(e);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},xte=function(e){var t=e.h,r=e.s,n=e.v,i=e.a;t=t/360*6,r/=100,n/=100;var s=Math.floor(t),o=n*(1-r),a=n*(1-(t-s)*r),l=n*(1-(1-t+s)*r),u=s%6;return{r:_te(255*[n,a,o,o,l,n][u]),g:_te(255*[l,n,n,a,o,o][u]),b:_te(255*[o,o,l,n,n,a][u]),a:_te(i,2)}},Ete=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},Ste=function(e){var t=e.r,r=e.g,n=e.b,i=e.a,s=i<1?Ete(_te(255*i)):"";return"#"+Ete(t)+Ete(r)+Ete(n)+s},Cte=function(e){var t=e.r,r=e.g,n=e.b,i=e.a,s=Math.max(t,r,n),o=s-Math.min(t,r,n),a=o?s===t?(r-n)/o:s===r?2+(n-t)/o:4+(t-r)/o:0;return{h:_te(60*(a<0?a+6:a)),s:_te(s?o/s*100:0),v:_te(s/255*100),a:i}},Ate=W.memo(function(e){var t=e.hue,r=e.onChange,n=yte(["react-colorful__hue",e.className]);return W.createElement("div",{className:n},W.createElement(gte,{onMove:function(e){r({h:360*e.left})},onKey:function(e){r({h:dte(t+360*e.left,0,360)})},"aria-label":"Hue","aria-valuenow":_te(t),"aria-valuemax":"360","aria-valuemin":"0"},W.createElement(vte,{className:"react-colorful__hue-pointer",left:t/360,color:wte({h:t,s:100,v:100,a:1})})))}),Tte=W.memo(function(e){var t=e.hsva,r=e.onChange,n={backgroundColor:wte({h:t.h,s:100,v:100,a:1})};return W.createElement("div",{className:"react-colorful__saturation",style:n},W.createElement(gte,{onMove:function(e){r({s:100*e.left,v:100-100*e.top})},onKey:function(e){r({s:dte(t.s+100*e.left,0,100),v:dte(t.v-100*e.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+_te(t.s)+"%, Brightness "+_te(t.v)+"%"},W.createElement(vte,{className:"react-colorful__saturation-pointer",top:1-t.v/100,left:t.s/100,color:wte(t)})))}),Dte=function(e,t){if(e===t)return!0;for(var r in e)if(e[r]!==t[r])return!1;return!0},kte="undefined"!=typeof window?$.useLayoutEffect:$.useEffect,Pte=new Map,Bte=function(e){kte(function(){var t=e.current?e.current.ownerDocument:document;if(void 0!==t&&!Pte.has(t)){var r=t.createElement("style");r.innerHTML='.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}',Pte.set(t,r);var n="undefined"!=typeof __webpack_nonce__?__webpack_nonce__:void 0;n&&r.setAttribute("nonce",n),t.head.appendChild(r)}},[])},Ote=function(e){var t=e.className,r=e.colorModel,n=e.color,i=void 0===n?r.defaultColor:n,s=e.onChange,o=ute(e,["className","colorModel","color","onChange"]),a=$.useRef(null);Bte(a);var l=function(e,t,r){var n=cte(r),i=$.useState(function(){return e.toHsva(t)}),s=i[0],o=i[1],a=$.useRef({color:t,hsva:s});$.useEffect(function(){if(!e.equal(t,a.current.color)){var r=e.toHsva(t);a.current={hsva:r,color:t},o(r)}},[t,e]),$.useEffect(function(){var t;Dte(s,a.current.hsva)||e.equal(t=e.fromHsva(s),a.current.color)||(a.current={hsva:s,color:t},n(t))},[s,e,n]);var l=$.useCallback(function(e){o(function(t){return Object.assign({},t,e)})},[]);return[s,l]}(r,i,s),u=l[0],c=l[1],d=yte(["react-colorful",t]);return W.createElement("div",lte({},o,{ref:a,className:d}),W.createElement(Tte,{hsva:u,onChange:c}),W.createElement(Ate,{hue:u.h,onChange:c,className:"react-colorful__last-control"}))},Rte={defaultColor:"000",toHsva:function(e){return Cte(bte(e))},fromHsva:function(e){return function(e){return Ste(xte(e))}({h:e.h,s:e.s,v:e.v,a:1})},equal:function(e,t){return e.toLowerCase()===t.toLowerCase()||Dte(bte(e),bte(t))}},Fte=(e("cH",function(e){return W.createElement(Ote,lte({},e,{colorModel:Rte}))}),"Popover"),[Ite,Mte]=Zj(Fte,[gH]),Nte=gH(),[Lte,Ute]=Ite(Fte),jte=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:i,onOpenChange:s,modal:o=!1}=e,a=Nte(t),l=$.useRef(null),[u,c]=$.useState(!1),[d,h]=Wz({prop:n,defaultProp:i??!1,onChange:s,caller:Fte});return te.jsx(OH,{...a,children:te.jsx(Lte,{scope:t,contentId:bV(),triggerRef:l,open:d,onOpenChange:h,onOpenToggle:$.useCallback(()=>h(e=>!e),[h]),hasCustomAnchor:u,onCustomAnchorAdd:$.useCallback(()=>c(!0),[]),onCustomAnchorRemove:$.useCallback(()=>c(!1),[]),modal:o,children:r})})};jte.displayName=Fte;var zte="PopoverAnchor",Vte=$.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,i=Ute(zte,r),s=Nte(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=i;return $.useEffect(()=>(o(),()=>a()),[o,a]),te.jsx(RH,{...s,...n,ref:t})});Vte.displayName=zte;var Gte="PopoverTrigger",Hte=$.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,i=Ute(Gte,r),s=Nte(r),o=jj(t,i.triggerRef),a=te.jsx(Wj.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":nre(i.open),...n,ref:o,onClick:nz(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?a:te.jsx(RH,{asChild:!0,...s,children:a})});Hte.displayName=Gte;var $te="PopoverPortal",[Wte,qte]=Ite($te,{forceMount:void 0}),Xte=e=>{const{__scopePopover:t,forceMount:r,children:n,container:i}=e,s=Ute($te,t);return te.jsx(Wte,{scope:t,forceMount:r,children:te.jsx(Yj,{present:r||s.open,children:te.jsx(MH,{asChild:!0,container:i,children:n})})})};Xte.displayName=$te;var Yte="PopoverContent",Kte=$.forwardRef((e,t)=>{const r=qte(Yte,e.__scopePopover),{forceMount:n=r.forceMount,...i}=e,s=Ute(Yte,e.__scopePopover);return te.jsx(Yj,{present:n||s.open,children:s.modal?te.jsx(Jte,{...i,ref:t}):te.jsx(Qte,{...i,ref:t})})});Kte.displayName=Yte;var Zte=zj("PopoverContent.RemoveScroll"),Jte=$.forwardRef((e,t)=>{const r=Ute(Yte,e.__scopePopover),n=$.useRef(null),i=jj(t,n),s=$.useRef(!1);return $.useEffect(()=>{const e=n.current;if(e)return a$(e)},[]),te.jsx(Y$,{as:Zte,allowPinchZoom:!0,children:te.jsx(ere,{...e,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:nz(e.onCloseAutoFocus,e=>{e.preventDefault(),s.current||r.triggerRef.current?.focus()}),onPointerDownOutside:nz(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey,n=2===t.button||r;s.current=n},{checkForDefaultPrevented:!1}),onFocusOutside:nz(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),Qte=$.forwardRef((e,t)=>{const r=Ute(Yte,e.__scopePopover),n=$.useRef(!1),i=$.useRef(!1);return te.jsx(ere,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(n.current||r.triggerRef.current?.focus(),t.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(n.current=!0,"pointerdown"===t.detail.originalEvent.type&&(i.current=!0));const s=t.target,o=r.triggerRef.current?.contains(s);o&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&i.current&&t.preventDefault()}})}),ere=$.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:u,onInteractOutside:c,...d}=e,h=Ute(Yte,r),f=Nte(r);return oV(),te.jsx(dV,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:s,children:te.jsx(Qz,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:c,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:u,onDismiss:()=>h.onOpenChange(!1),children:te.jsx(FH,{"data-state":nre(h.open),role:"dialog",id:h.contentId,...f,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),tre="PopoverClose",rre=$.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,i=Ute(tre,r);return te.jsx(Wj.button,{type:"button",...n,ref:t,onClick:nz(e.onClick,()=>i.onOpenChange(!1))})});function nre(e){return e?"open":"closed"}rre.displayName=tre,$.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,i=Nte(r);return te.jsx(IH,{...i,...n,ref:t})}).displayName="PopoverArrow",e("cF",jte),e("cG",Hte),e("cD",Xte),e("cE",Kte);var ire="Toggle",sre=$.forwardRef((e,t)=>{const{pressed:r,defaultPressed:n,onPressedChange:i,...s}=e,[o,a]=Wz({prop:r,onChange:i,defaultProp:n??!1,caller:ire});return te.jsx(Wj.button,{type:"button","aria-pressed":o,"data-state":o?"on":"off","data-disabled":e.disabled?"":void 0,...s,ref:t,onClick:nz(e.onClick,()=>{e.disabled||a(!o)})})});sre.displayName=ire,e("cI",sre);var ore="ToggleGroup",[are,lre]=Zj(ore,[HH]),ure=HH(),cre=W.forwardRef((e,t)=>{const{type:r,...n}=e;if("single"===r){const e=n;return te.jsx(fre,{...e,ref:t})}if("multiple"===r){const e=n;return te.jsx(pre,{...e,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${ore}\``)});cre.displayName=ore;var[dre,hre]=are(ore),fre=W.forwardRef((e,t)=>{const{value:r,defaultValue:n,onValueChange:i=()=>{},...s}=e,[o,a]=Wz({prop:r,defaultProp:n??"",onChange:i,caller:ore});return te.jsx(dre,{scope:e.__scopeToggleGroup,type:"single",value:W.useMemo(()=>o?[o]:[],[o]),onItemActivate:a,onItemDeactivate:W.useCallback(()=>a(""),[a]),children:te.jsx(yre,{...s,ref:t})})}),pre=W.forwardRef((e,t)=>{const{value:r,defaultValue:n,onValueChange:i=()=>{},...s}=e,[o,a]=Wz({prop:r,defaultProp:n??[],onChange:i,caller:ore}),l=W.useCallback(e=>a((t=[])=>[...t,e]),[a]),u=W.useCallback(e=>a((t=[])=>t.filter(t=>t!==e)),[a]);return te.jsx(dre,{scope:e.__scopeToggleGroup,type:"multiple",value:o,onItemActivate:l,onItemDeactivate:u,children:te.jsx(yre,{...s,ref:t})})});cre.displayName=ore;var[mre,gre]=are(ore),yre=W.forwardRef((e,t)=>{const{__scopeToggleGroup:r,disabled:n=!1,rovingFocus:i=!0,orientation:s,dir:o,loop:a=!0,...l}=e,u=ure(r),c=tz(o),d={role:"group",dir:c,...l};return te.jsx(mre,{scope:r,rovingFocus:i,disabled:n,children:i?te.jsx(QH,{asChild:!0,...u,orientation:s,dir:c,loop:a,children:te.jsx(Wj.div,{...d,ref:t})}):te.jsx(Wj.div,{...d,ref:t})})}),vre="ToggleGroupItem",_re=W.forwardRef((e,t)=>{const r=hre(vre,e.__scopeToggleGroup),n=gre(vre,e.__scopeToggleGroup),i=ure(e.__scopeToggleGroup),s=r.value.includes(e.value),o=n.disabled||e.disabled,a={...e,pressed:s,disabled:o},l=W.useRef(null);return n.rovingFocus?te.jsx(e$,{asChild:!0,...i,focusable:!o,active:s,ref:l,children:te.jsx(bre,{...a,ref:t})}):te.jsx(bre,{...a,ref:t})});_re.displayName=vre;var bre=W.forwardRef((e,t)=>{const{__scopeToggleGroup:r,value:n,...i}=e,s=hre(vre,r),o={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},a="single"===s.type?o:void 0;return te.jsx(sre,{...a,...i,ref:t,onPressedChange:e=>{e?s.onItemActivate(n):s.onItemDeactivate(n)}})}),wre=e("cJ",cre),xre=e("cK",_re),[Ere,Sre]=Zj("Tooltip",[gH]),Cre=gH(),Are="TooltipProvider",Tre=700,Dre="tooltip.open",[kre,Pre]=Ere(Are),Bre=e=>{const{__scopeTooltip:t,delayDuration:r=Tre,skipDelayDuration:n=300,disableHoverableContent:i=!1,children:s}=e,o=$.useRef(!0),a=$.useRef(!1),l=$.useRef(0);return $.useEffect(()=>{const e=l.current;return()=>window.clearTimeout(e)},[]),te.jsx(kre,{scope:t,isOpenDelayedRef:o,delayDuration:r,onOpen:$.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:$.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:a,onPointerInTransitChange:$.useCallback(e=>{a.current=e},[]),disableHoverableContent:i,children:s})};Bre.displayName=Are;var Ore="Tooltip",[Rre,Fre]=Ere(Ore),Ire=e=>{const{__scopeTooltip:t,children:r,open:n,defaultOpen:i,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=e,l=Pre(Ore,e.__scopeTooltip),u=Cre(t),[c,d]=$.useState(null),h=bV(),f=$.useRef(0),p=o??l.disableHoverableContent,m=a??l.delayDuration,g=$.useRef(!1),[y,v]=Wz({prop:n,defaultProp:i??!1,onChange:e=>{e?(l.onOpen(),document.dispatchEvent(new CustomEvent(Dre))):l.onClose(),s?.(e)},caller:Ore}),_=$.useMemo(()=>y?g.current?"delayed-open":"instant-open":"closed",[y]),b=$.useCallback(()=>{window.clearTimeout(f.current),f.current=0,g.current=!1,v(!0)},[v]),w=$.useCallback(()=>{window.clearTimeout(f.current),f.current=0,v(!1)},[v]),x=$.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{g.current=!0,v(!0),f.current=0},m)},[m,v]);return $.useEffect(()=>()=>{f.current&&(window.clearTimeout(f.current),f.current=0)},[]),te.jsx(OH,{...u,children:te.jsx(Rre,{scope:t,contentId:h,open:y,stateAttribute:_,trigger:c,onTriggerChange:d,onTriggerEnter:$.useCallback(()=>{l.isOpenDelayedRef.current?x():b()},[l.isOpenDelayedRef,x,b]),onTriggerLeave:$.useCallback(()=>{p?w():(window.clearTimeout(f.current),f.current=0)},[w,p]),onOpen:b,onClose:w,disableHoverableContent:p,children:r})})};Ire.displayName=Ore;var Mre="TooltipTrigger",Nre=$.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,i=Fre(Mre,r),s=Pre(Mre,r),o=Cre(r),a=jj(t,$.useRef(null),i.onTriggerChange),l=$.useRef(!1),u=$.useRef(!1),c=$.useCallback(()=>l.current=!1,[]);return $.useEffect(()=>()=>document.removeEventListener("pointerup",c),[c]),te.jsx(RH,{asChild:!0,...o,children:te.jsx(Wj.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...n,ref:a,onPointerMove:nz(e.onPointerMove,e=>{"touch"!==e.pointerType&&(u.current||s.isPointerInTransitRef.current||(i.onTriggerEnter(),u.current=!0))}),onPointerLeave:nz(e.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:nz(e.onPointerDown,()=>{i.open&&i.onClose(),l.current=!0,document.addEventListener("pointerup",c,{once:!0})}),onFocus:nz(e.onFocus,()=>{l.current||i.onOpen()}),onBlur:nz(e.onBlur,i.onClose),onClick:nz(e.onClick,i.onClose)})})});Nre.displayName=Mre;var Lre="TooltipPortal",[Ure,jre]=Ere(Lre,{forceMount:void 0}),zre=e=>{const{__scopeTooltip:t,forceMount:r,children:n,container:i}=e,s=Fre(Lre,t);return te.jsx(Ure,{scope:t,forceMount:r,children:te.jsx(Yj,{present:r||s.open,children:te.jsx(MH,{asChild:!0,container:i,children:n})})})};zre.displayName=Lre;var Vre="TooltipContent",Gre=$.forwardRef((e,t)=>{const r=jre(Vre,e.__scopeTooltip),{forceMount:n=r.forceMount,side:i="top",...s}=e,o=Fre(Vre,e.__scopeTooltip);return te.jsx(Yj,{present:n||o.open,children:o.disableHoverableContent?te.jsx(Xre,{side:i,...s,ref:t}):te.jsx(Hre,{side:i,...s,ref:t})})}),Hre=$.forwardRef((e,t)=>{const r=Fre(Vre,e.__scopeTooltip),n=Pre(Vre,e.__scopeTooltip),i=$.useRef(null),s=jj(t,i),[o,a]=$.useState(null),{trigger:l,onClose:u}=r,c=i.current,{onPointerInTransitChange:d}=n,h=$.useCallback(()=>{a(null),d(!1)},[d]),f=$.useCallback((e,t)=>{const r=e.currentTarget,n={x:e.clientX,y:e.clientY},i=function(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(r,n,i,s)){case s:return"left";case i:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}(n,r.getBoundingClientRect()),s=function(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r})}return n}(n,i),o=function(e){const t=e.slice();return t.sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0),function(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const r=e[n];for(;t.length>=2;){const e=t[t.length-1],n=t[t.length-2];if(!((e.x-n.x)*(r.y-n.y)>=(e.y-n.y)*(r.x-n.x)))break;t.pop()}t.push(r)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const t=e[n];for(;r.length>=2;){const e=r[r.length-1],n=r[r.length-2];if(!((e.x-n.x)*(t.y-n.y)>=(e.y-n.y)*(t.x-n.x)))break;r.pop()}r.push(t)}return r.pop(),1===t.length&&1===r.length&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}(t)}([...s,...function(e){const{top:t,right:r,bottom:n,left:i}=e;return[{x:i,y:t},{x:r,y:t},{x:r,y:n},{x:i,y:n}]}(t.getBoundingClientRect())]);a(o),d(!0)},[d]);return $.useEffect(()=>()=>h(),[h]),$.useEffect(()=>{if(l&&c){const e=e=>f(e,c),t=e=>f(e,l);return l.addEventListener("pointerleave",e),c.addEventListener("pointerleave",t),()=>{l.removeEventListener("pointerleave",e),c.removeEventListener("pointerleave",t)}}},[l,c,f,h]),$.useEffect(()=>{if(o){const e=e=>{const t=e.target,r={x:e.clientX,y:e.clientY},n=l?.contains(t)||c?.contains(t),i=!function(e,t){const{x:r,y:n}=e;let i=!1;for(let s=0,o=t.length-1;s<t.length;o=s++){const e=t[s],a=t[o],l=e.x,u=e.y,c=a.x,d=a.y;u>n!=d>n&&r<(c-l)*(n-u)/(d-u)+l&&(i=!i)}return i}(r,o);n?h():i&&(h(),u())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[l,c,o,u,h]),te.jsx(Xre,{...e,ref:s})}),[$re,Wre]=Ere(Ore,{isInside:!1}),qre=Hj("TooltipContent"),Xre=$.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=e,l=Fre(Vre,r),u=Cre(r),{onClose:c}=l;return $.useEffect(()=>(document.addEventListener(Dre,c),()=>document.removeEventListener(Dre,c)),[c]),$.useEffect(()=>{if(l.trigger){const e=e=>{const t=e.target;t?.contains(l.trigger)&&c()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[l.trigger,c]),te.jsx(Qz,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:e=>e.preventDefault(),onDismiss:c,children:te.jsxs(FH,{"data-state":l.stateAttribute,...u,...a,ref:t,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[te.jsx(qre,{children:n}),te.jsx($re,{scope:r,isInside:!0,children:te.jsx(Y3,{id:l.contentId,role:"tooltip",children:i||n})})]})})});Gre.displayName=Vre;var Yre="TooltipArrow";$.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,i=Cre(r);return Wre(Yre,r).isInside?null:te.jsx(IH,{...i,...n,ref:t})}).displayName=Yre,e("cM",Bre),e("cN",Ire),e("cO",Nre),e("cZ",zre),e("cL",Gre);var Kre=e("ds","undefined"!=typeof navigator&&/Mac OS X/.test(navigator.userAgent)),Zre=e=>!(e=>(e=>void 0===e)(e)||(e=>null===e)(e))(e);function Jre(e,t){return(...r)=>e(t,...r)}var Qre,ene=Object.defineProperty,tne=Object.defineProperties,rne=Object.getOwnPropertyDescriptors,nne=Object.getOwnPropertySymbols,ine=Object.prototype.hasOwnProperty,sne=Object.prototype.propertyIsEnumerable,one=(e,t,r)=>t in e?ene(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ane=(e,t)=>{for(var r in t||(t={}))ine.call(t,r)&&one(e,r,t[r]);if(nne)for(var r of nne(t))sne.call(t,r)&&one(e,r,t[r]);return e},lne=(e,t)=>tne(e,rne(t)),une=e=>W.forwardRef((t,r)=>{var n=t,{as:i,asChild:s=!1}=n,o=((e,t)=>{var r={};for(var n in e)ine.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&nne)for(var n of nne(e))t.indexOf(n)<0&&sne.call(e,n)&&(r[n]=e[n]);return r})(n,["as","asChild"]);const a=s?s3:i||e;return W.createElement(a,ane({ref:r},o))}),cne=une("div"),dne=une("span"),hne=e("de",(...e)=>W.useCallback(((...e)=>t=>e.forEach(e=>((e,t)=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})(e,t)))(...e),e)),fne="undefined"!=typeof window&&void 0!==(null==(Qre=window.document)?void 0:Qre.createElement)?W.useLayoutEffect:W.useEffect,pne=(e,t)=>{var r;return null==(r=e.classList)?void 0:r.contains(t)},mne=(e,t)=>{let r=e.target||e;for(;r;){if(Array.isArray(t)){if(t.some(e=>pne(r,e)))return!0}else if(pne(r,t))return!0;r=r.parentElement}return!1},gne=e=>!(!e.includes("touch")||!(()=>{if("undefined"==typeof window||"function"!=typeof window.addEventListener)return!1;let e=!1;const t=Object.defineProperty({},"passive",{get(){e=!0}}),r=()=>null;return window.addEventListener("test",r,t),window.removeEventListener("test",r,t),e})())&&{passive:!0};e("dd",(e,{detectIFrame:t=!0,disabled:r,eventTypes:n=["mousedown","touchstart"],excludeScrollbar:i,ignoreClass:s="ignore-onclickoutside",refs:o}={})=>{const[a,l]=W.useState([]),u=W.useRef(e);u.current=e;const c=W.useCallback(e=>l(t=>[...t,{current:e}]),[]);return W.useEffect(()=>{if(!(null==o?void 0:o.length)&&0===a.length)return;const e=()=>{const e=[];return(o||a).forEach(({current:t})=>t&&e.push(t)),e},l=t=>{mne(t,s)||i&&(e=>document.documentElement.clientWidth<=e.clientX||document.documentElement.clientHeight<=e.clientY)(t)||!e().every(e=>!e.contains(t.target))||u.current(t)},c=t=>setTimeout(()=>{const{activeElement:r}=document;"IFRAME"!==(null==r?void 0:r.tagName)||mne(r,s)||e().includes(r)||u.current(t)},0),d=()=>{n.forEach(e=>document.removeEventListener(e,l,gne(e))),t&&window.removeEventListener("blur",c)};if(!r)return n.forEach(e=>document.addEventListener(e,l,gne(e))),t&&window.addEventListener("blur",c),()=>d();d()},[a,s,i,r,t,JSON.stringify(n)]),c});var yne=Object.defineProperty,vne=Object.defineProperties,_ne=Object.getOwnPropertyDescriptors,bne=Object.getOwnPropertySymbols,wne=Object.prototype.hasOwnProperty,xne=Object.prototype.propertyIsEnumerable,Ene=(e,t,r)=>t in e?yne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Sne=(e,t)=>{for(var r in t||(t={}))wne.call(t,r)&&Ene(e,r,t[r]);if(bne)for(var r of bne(t))xne.call(t,r)&&Ene(e,r,t[r]);return e},Cne=(e,t)=>vne(e,_ne(t)),Ane=(e,t)=>{var r={};for(var n in e)wne.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&bne)for(var n of bne(e))t.indexOf(n)<0&&xne.call(e,n)&&(r[n]=e[n]);return r};function Tne(...e){return wp(Uz(e))}function Dne(e,t){const r=e;return W.forwardRef(function(e,n){return W.createElement(r,Cne(Sne(Sne({ref:n},t),e),{className:Tne(t.className,e.className)}))})}var kne=Object.defineProperty,Pne=Object.defineProperties,Bne=Object.getOwnPropertyDescriptors,One=Object.getOwnPropertySymbols,Rne=Object.prototype.hasOwnProperty,Fne=Object.prototype.propertyIsEnumerable,Ine=(e,t,r)=>t in e?kne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Mne=$.createContext(void 0);function Nne(e,t){return e&&t&&"object"==typeof e&&"object"==typeof t?Object.keys(e).length===Object.keys(t).length&&Object.keys(e).reduce((r,n)=>r&&Nne(e[n],t[n]),!0):e===t}var Lne=$.createContext({activeScopes:[],disableScope:()=>{},enableScope:()=>{},hotkeys:[],toggleScope:()=>{}}),Une=new Set(["shift","alt","meta","mod","ctrl","control"]),jne={AltLeft:"alt",AltRight:"alt",ControlLeft:"ctrl",ControlRight:"ctrl",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ShiftLeft:"shift",ShiftRight:"shift",down:"arrowdown",esc:"escape",left:"arrowleft",return:"enter",right:"arrowright",up:"arrowup"};function zne(e){return(jne[e.trim()]||e.trim()).toLowerCase().replace(/key|digit|numpad/,"")}function Vne(e,t=","){return e.toLowerCase().split(t)}function Gne(e,t="+",r=!1,n){const i=e.toLocaleLowerCase().split(t).map(e=>zne(e)),s={alt:i.includes("alt"),ctrl:i.includes("ctrl")||i.includes("control"),meta:i.includes("meta"),mod:i.includes("mod"),shift:i.includes("shift"),useKey:r},o=i.filter(e=>!Une.has(e));return((e,t)=>Pne(e,Bne(t)))(((e,t)=>{for(var r in t||(t={}))Rne.call(t,r)&&Ine(e,r,t[r]);if(One)for(var r of One(t))Fne.call(t,r)&&Ine(e,r,t[r]);return e})({},s),{description:n,keys:o})}"undefined"!=typeof document&&(document.addEventListener("keydown",e=>{void 0!==e.code&&Wne([zne(e.code)])}),document.addEventListener("keyup",e=>{void 0!==e.code&&qne([zne(e.code)])})),"undefined"!=typeof window&&window.addEventListener("blur",()=>{Hne.clear()});var Hne=new Set;function $ne(e){return Array.isArray(e)}function Wne(e){const t=Array.isArray(e)?e:[e];Hne.has("meta")&&Hne.forEach(e=>!function(e){return Une.has(e)}(e)&&Hne.delete(e.toLowerCase())),t.forEach(e=>Hne.add(e.toLowerCase()))}function qne(e){const t=Array.isArray(e)?e:[e];"meta"===e?Hne.clear():t.forEach(e=>Hne.delete(e.toLowerCase()))}var Xne="Alt",Yne="Mod",Kne="Shift";function Zne(e){const t=$.useRef();return Nne(t.current,e)||(t.current=e),t.current}function Jne({target:e},t=!1){const r=e&&e.tagName;return $ne(t)?Boolean(r&&(null==t?void 0:t.some(e=>e.toLowerCase()===r.toLowerCase()))):Boolean(r&&t&&t)}var Qne=(e,t,r=!1)=>{const{alt:n,ctrl:i,keys:s,meta:o,mod:a,shift:l,useKey:u}=t,{altKey:c,code:d,ctrlKey:h,key:f,metaKey:p,shiftKey:m}=e,g=zne(d);if(u&&1===(null==s?void 0:s.length)&&s.includes(f))return!0;if(!(null==s?void 0:s.includes(g))&&!["alt","control","ctrl","meta","os","shift","unknown"].includes(g))return!1;if(!r){if(n!==c&&"alt"!==g)return!1;if(l!==m&&"shift"!==g)return!1;if(a){if(!p&&!h)return!1}else{if(o!==p&&"meta"!==g&&"os"!==g)return!1;if(i!==h&&"ctrl"!==g&&"control"!==g)return!1}}return!(!s||1!==s.length||!s.includes(g))||(s?function(e,t=","){return($ne(e)?e:e.split(t)).every(e=>Hne.has(e.trim().toLowerCase()))}(s):!s)},eie=e=>{e.stopPropagation(),e.preventDefault(),e.stopImmediatePropagation()},tie="undefined"==typeof window?$.useEffect:$.useLayoutEffect;function rie(e,t,r,n){const[i,s]=$.useState(null),o=$.useRef(!1),a=Array.isArray(r)?Array.isArray(n)?void 0:n:r,l=$.useMemo(()=>Array.isArray(e)&&e.length>0&&Array.isArray(e[0])?e.map(e=>e.map(e=>e.toString()).join((null==a?void 0:a.splitKey)||"+")).join((null==a?void 0:a.delimiter)||","):Array.isArray(e)?e.join((null==a?void 0:a.delimiter)||","):e,[e,null==a?void 0:a.splitKey,null==a?void 0:a.delimiter]),u=Array.isArray(r)?r:Array.isArray(n)?n:void 0,c=$.useCallback(t,null!=u?u:[]),d=$.useRef(c);d.current=u?c:t;const h=Zne(a),{activeScopes:f}=$.useContext(Lne),p=$.useContext(Mne);return tie(()=>{if(!1===(null==h?void 0:h.enabled)||!function(e,t){return 0===e.length&&t?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):!t||e.some(e=>t.includes(e))||e.includes("*")}(f,null==h?void 0:h.scopes))return;const e=(e,t=!1)=>{var r;if(!Jne(e,["input","textarea","select"])||Jne(e,null==h?void 0:h.enableOnFormTags)){if(null!==i){const t=i.getRootNode();if((t instanceof Document||t instanceof ShadowRoot)&&t.activeElement!==i&&!i.contains(t.activeElement))return void eie(e)}(null==(r=e.target)?void 0:r.isContentEditable)&&!(null==h?void 0:h.enableOnContentEditable)||Vne(l,null==h?void 0:h.delimiter).forEach(r=>{var n,i,s;const a=Gne(r,null==h?void 0:h.splitKey,null==h?void 0:h.useKey);if(Qne(e,a,null==h?void 0:h.ignoreModifiers)||(null==(n=a.keys)?void 0:n.includes("*"))){if((null==(i=null==h?void 0:h.ignoreEventWhenPrevented)||i)&&e.defaultPrevented)return;if(null==(s=null==h?void 0:h.ignoreEventWhen)?void 0:s.call(h,e))return;if(t&&o.current)return;if(!function(e,t,r){return"function"==typeof r?r(e,t):!0===r||void 0===r}(e,a,null==h?void 0:h.enabled))return void eie(e);d.current(e,a),function(e,t,r){("function"==typeof r&&r(e,t)||!0===r)&&e.preventDefault()}(e,a,null==h?void 0:h.preventDefault),t||(o.current=!0)}})}},t=t=>{void 0!==t.code&&(Wne(zne(t.code)),(void 0===(null==h?void 0:h.keydown)&&!0!==(null==h?void 0:h.keyup)||(null==h?void 0:h.keydown))&&e(t))},r=t=>{void 0!==t.code&&(qne(zne(t.code)),o.current=!1,(null==h?void 0:h.keyup)&&e(t,!0))},n=i||(null==a?void 0:a.document)||document;return n.addEventListener("keyup",r),n.addEventListener("keydown",t),p&&Vne(l,null==h?void 0:h.delimiter).forEach(e=>p.addHotkey(Gne(e,null==h?void 0:h.splitKey,null==h?void 0:h.useKey,null==h?void 0:h.description))),()=>{n.removeEventListener("keyup",r),n.removeEventListener("keydown",t),p&&Vne(l,null==h?void 0:h.delimiter).forEach(e=>p.removeHotkey(Gne(e,null==h?void 0:h.splitKey,null==h?void 0:h.useKey,null==h?void 0:h.description)))}},[i,l,h,f]),s}let nie=0;function iie(e,t){const r="atom"+ ++nie,n={toString:()=>r};return"function"==typeof e?n.read=e:(n.init=e,n.read=sie,n.write=oie),t&&(n.write=t),n}function sie(e){return e(this)}function oie(e,t,r){return t(this,"function"==typeof r?r(e(this)):r)}const aie=(e,t)=>e.unstable_is?e.unstable_is(t):t===e,lie=e=>"init"in e,uie=e=>!!e.write,cie=new WeakMap,die=(e,t)=>{const r=cie.get(e);r&&(cie.delete(e),r(t))},hie=(e,t)=>{e.status="fulfilled",e.value=t},fie=(e,t)=>{e.status="rejected",e.reason=t},pie=(e,t)=>!!e&&"v"in e&&"v"in t&&Object.is(e.v,t.v),mie=(e,t)=>!!e&&"e"in e&&"e"in t&&Object.is(e.e,t.e),gie=e=>!!e&&"v"in e&&e.v instanceof Promise,yie=e=>{if("e"in e)throw e.e;return e.v},vie=()=>{const e=new WeakMap,t=new WeakMap,r=[],n=new WeakMap,i=t=>e.get(t),s=(e,t)=>{t.d.forEach((t,r)=>{if(!n.has(r)){const e=i(r);n.set(r,[e,new Set]),e&&s(r,e)}n.get(r)[1].add(e)})},o=(t,o)=>{var a;const l=i(t);if(e.set(t,o),null==(a=r[r.length-1])||a.add(t),n.has(t)||(n.set(t,[l,new Set]),s(t,o)),gie(l)){const e="v"in o?o.v instanceof Promise?o.v:Promise.resolve(o.v):Promise.reject(o.e);l.v!==e&&die(l.v,e)}},a=(e,t,r,n)=>{const i=new Map(n?t.d:null);let s=!1;r.forEach((r,n)=>{!r&&aie(e,n)&&(r=t),r&&(i.set(n,r),t.d.get(n)!==r&&(s=!0))}),(s||t.d.size!==i.size)&&(t.d=i)},l=(e,t,r,n)=>{const s=i(e),l={d:(null==s?void 0:s.d)||new Map,v:t};if(r&&a(e,l,r,n),pie(s,l)&&s.d===l.d)return s;if(gie(s)&&gie(l)&&((e,t)=>"v"in e&&"v"in t&&e.v.orig&&e.v.orig===t.v.orig)(s,l)){if(s.d===l.d)return s;l.v=s.v}return o(e,l),l},u=(e,r,n,s)=>{if((e=>"function"==typeof(null==e?void 0:e.then))(r)){let o;const a=()=>{const r=i(e);if(!gie(r)||r.v!==u)return;const s=l(e,u,n);t.has(e)&&r.d!==s.d&&y(e,s,r.d)},u=new Promise((e,t)=>{let n=!1;r.then(t=>{n||(n=!0,hie(u,t),e(t),a())},e=>{n||(n=!0,fie(u,e),t(e),a())}),o=t=>{n||(n=!0,t.then(e=>hie(u,e),e=>fie(u,e)),e(t))}});return u.orig=r,u.status="pending",((e,t)=>{cie.set(e,t),e.catch(()=>{}).finally(()=>cie.delete(e))})(u,e=>{e&&(o(e),null==s||s())}),l(e,u,n,!0)}return l(e,r,n)},c=(e,r)=>{const n=i(e);if(!(null==r?void 0:r(e))&&n){if(t.has(e))return n;if(Array.from(n.d).every(([t,n])=>{if(t===e)return!0;const i=c(t,r);return i===n||pie(i,n)}))return n}const s=new Map;let l=!0;const d=t=>{if(aie(e,t)){const e=i(t);if(e)return s.set(t,e),yie(e);if(lie(t))return s.set(t,void 0),t.init;throw new Error("no atom init")}const n=c(t,r);return s.set(t,n),yie(n)};let h,f;const m={get signal(){return h||(h=new AbortController),h.signal},get setSelf(){return!f&&uie(e)&&(f=(...t)=>{if(!l)return p(e,...t)}),f}};try{const t=e.read(d,m);return u(e,t,s,()=>null==h?void 0:h.abort())}catch(g){return((e,t,r)=>{const n=i(e),s={d:(null==n?void 0:n.d)||new Map,e:t};return r&&a(e,s,r),mie(n,s)&&n.d===s.d?n:(o(e,s),s)})(e,g,s)}finally{l=!1}},d=e=>yie(c(e)),h=e=>{const r=new Array,o=new Set,a=e=>{if(!o.has(e)){o.add(e);for(const r of(e=>{var r,i;const s=new Set(null==(r=t.get(e))?void 0:r.t);return null==(i=n.get(e))||i[1].forEach(e=>{s.add(e)}),s})(e))e!==r&&a(r);r.push(e)}};a(e);const l=new Set([e]),u=e=>o.has(e);for(let t=r.length-1;t>=0;--t){const e=r[t],n=i(e);if(!n)continue;let a=!1;for(const t of n.d.keys())if(t!==e&&l.has(t)){a=!0;break}if(a){const t=c(e,u);s(e,t),pie(n,t)||l.add(e)}o.delete(e)}},f=(e,...t)=>{const n=e.write(e=>yie(c(e)),(t,...n)=>{const s=r.length>0;let o;if(s||r.push(new Set([t])),aie(e,t)){if(!lie(t))throw new Error("atom not writable");const e=i(t),r=u(t,n[0]);pie(e,r)||h(t)}else o=f(t,...n);return s||v(r.pop()),o},...t);return n},p=(e,...t)=>{r.push(new Set([e]));const n=f(e,...t);return v(r.pop()),n},m=(e,r,n)=>{var s;const o=t.get(e);if(o)return r&&o.t.add(r),o;const a=n||[];null==(s=i(e))||s.d.forEach((t,r)=>{r!==e&&m(r,e,a)}),c(e);const l={t:new Set(r&&[r]),l:new Set};if(t.set(e,l),uie(e)&&e.onMount){const{onMount:t}=e;a.push(()=>{const r=t((...t)=>p(e,...t));r&&(l.u=r)})}return n||a.forEach(e=>e()),l},g=(e,r)=>{if(!((e,t)=>!t.l.size&&(!t.t.size||1===t.t.size&&t.t.has(e)))(e,r))return;const n=r.u;n&&n(),t.delete(e);const s=i(e);s&&(gie(s)&&die(s.v),s.d.forEach((r,n)=>{if(n!==e){const r=t.get(n);r&&(r.t.delete(e),g(n,r))}}))},y=(e,r,n)=>{const i=new Set(r.d.keys()),s=new Set;null==n||n.forEach((r,n)=>{if(i.has(n))return void i.delete(n);s.add(n);const o=t.get(n);o&&o.t.delete(e)}),i.forEach(t=>{m(t,e)}),s.forEach(e=>{const r=t.get(e);r&&g(e,r)})},v=e=>{const r=[],s=e=>{var t;if(!n.has(e))return;const[o,a]=n.get(e);n.delete(e),r.push([e,o]),a.forEach(s),null==(t=i(e))||t.d.forEach((e,t)=>s(t))};e.forEach(s),r.forEach(([e,r])=>{const n=i(e);if(n&&n!==r){const i=t.get(e);i&&n.d!==(null==r?void 0:r.d)&&y(e,n,null==r?void 0:r.d),i&&(gie(r)||!pie(r,n)&&!mie(r,n))&&i.l.forEach(e=>e())}})},_=(e,t)=>{const r=m(e),n=(v([e]),r.l);return n.add(t),()=>{n.delete(t),g(e,r)}};return{get:d,set:p,sub:_}};let _ie;Symbol("");const bie=vie,wie=()=>(_ie||(_ie=vie()),_ie),xie=$.createContext(void 0),Eie=e=>{const t=$.useContext(xie);return(null==e?void 0:e.store)||t||wie()},Sie=W.use||(e=>{if("pending"===e.status)throw e;if("fulfilled"===e.status)return e.value;throw"rejected"===e.status?e.reason:(e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e)});function Cie(e,t){const r=Eie(t),[[n,i,s],o]=$.useReducer(t=>{const n=r.get(e);return Object.is(t[0],n)&&t[1]===r&&t[2]===e?t:[n,r,e]},void 0,()=>[r.get(e),r,e]);let a=n;i===r&&s===e||(o(),a=r.get(e));const l=null==t?void 0:t.delay;return $.useEffect(()=>{const t=r.sub(e,()=>{"number"!=typeof l?o():setTimeout(o,l)});return o(),t},[r,e,l]),$.useDebugValue(a),(e=>"function"==typeof(null==e?void 0:e.then))(a)?Sie(a):a}function Aie(e,t){const r=Eie(t);return $.useCallback((...t)=>r.set(e,...t),[r,e])}const Tie=new WeakMap,Die=e=>{let t=Tie.get(e);return t||(t=new WeakSet,Tie.set(e,t)),t};var kie=Object.defineProperty,Pie=Object.defineProperties,Bie=Object.getOwnPropertyDescriptors,Oie=Object.getOwnPropertySymbols,Rie=Object.prototype.hasOwnProperty,Fie=Object.prototype.propertyIsEnumerable,Iie=(e,t,r)=>t in e?kie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Mie=(e,t)=>{for(var r in t||(t={}))Rie.call(t,r)&&Iie(e,r,t[r]);if(Oie)for(var r of Oie(t))Fie.call(t,r)&&Iie(e,r,t[r]);return e},Nie=(e,t)=>Pie(e,Bie(t)),Lie=(e,t)=>{var r={};for(var n in e)Rie.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Oie)for(var n of Oie(e))t.indexOf(n)<0&&Fie.call(e,n)&&(r[n]=e[n]);return r},Uie=e=>"function"==typeof e?{__fn:e}:e,jie=e=>{const t=iie(Uie(e));return iie(e=>{return(r=e(t))&&"object"==typeof r&&"__fn"in r?r.__fn:r;var r},(e,r,n)=>r(t,Uie(n)))},zie=(e,t,r={})=>{const n=[];for(const i of Object.keys(e)){const r=t[i];void 0!==r&&n.push([e[i],r])}!function(e,t){const r=Eie(t),n=Die(r);for(const[i,s]of e)n.has(i)&&!(null==t?void 0:t.dangerouslyForceHydrate)||(n.add(i),r.set(i,s))}(n,r)},Vie=(e,t)=>`${e}:${t}`,Gie="provider",Hie=W.createContext(new Map),$ie=e=>{var t=e,{initialValues:r,children:n,store:i,atoms:s}=t,o=Lie(t,["initialValues","children","store","atoms"]);return zie(s,Mie(Mie({},r),o),{store:i}),((e,t,{store:r}={})=>{for(const n of Object.keys(e)){const i=t[n],s=Aie(e[n],{store:r});W.useEffect(()=>{null!=i&&s(i)},[s,i])}})(s,o,{store:i}),W.createElement(W.Fragment,null,n)},Wie=(e="")=>e.length>0?e[0].toUpperCase()+e.slice(1):"",qie=e=>!!e&&"object"==typeof e&&"read"in e&&"function"==typeof e.read,Xie=(e,t)=>Object.fromEntries(Object.entries(e).map(([e,r])=>[e,(e={})=>r(Mie(Mie({},t),e))])),Yie=(e={})=>"string"==typeof e?{scope:e}:e,Kie=(e,{name:t,delay:r,effect:n,extend:i})=>{const s=((e="")=>`${Wie(e)}Provider`)(t),o=((e="")=>`use${Wie(e)}Store`)(t),a=((e="")=>e.length>0?`${e}Store`:"store")(t),l={},u={},c={};for(const[w,x]of Object.entries(e)){const e=qie(x)?x:jie(x);l[w]=e;const t="write"in e;c[w]=t,t&&(u[w]=e)}const d=Mie({},l);if(i){const e=i(l);for(const[t,r]of Object.entries(e))d[t]=r,c[t]="write"in r}const h={},f={},p={},m=(e={})=>{const{scope:r,store:n,warnIfNoStore:i=!0}=Yie(e),s=((e,t=Gie,r=!0)=>{var n;const i=W.useContext(Hie),s=null!=(n=i.get(Vie(e,t)))?n:i.get(Vie(e,Gie));return!s&&r&&console.warn(`Tried to access jotai store '${e}' outside of a matching provider.`),s})(t,r,!n&&i);return null!=n?n:s},g=(e,t)=>{var n;const i=Yie(t);return Cie(e,{store:m(Mie({warnIfNoStore:!1},i)),delay:null!=(n=i.delay)?n:r})},y=(e,t)=>Aie(e,{store:m(t)}),v=(e,t)=>{const n=m(t),{delay:i=r}=Yie(t);return function(e,t){return[Cie(e,t),Aie(e,t)]}(e,{store:n,delay:i})};for(const w of Object.keys(d)){const e=d[w],t=c[w];h[w]=(t={})=>g(e,t),t&&(f[w]=(t={})=>y(e,t),p[w]=(t={})=>v(e,t))}const _=((e,t,r={})=>{const n=r.effect;return r=>{var i=r,{store:s,scope:o,children:a,resetKey:l}=i,u=Lie(i,["store","scope","children","resetKey"]);const[c,d]=W.useState(bie());W.useEffect(()=>{l&&d(bie())},[l]);const h=W.useContext(Hie),f=W.useMemo(()=>{const t=new Map(h);return o&&t.set(Vie(e,o),c),t.set(Vie(e,Gie),c),t},[h,o,c]);return W.createElement(Hie.Provider,{value:f},W.createElement($ie,Mie({store:c,atoms:t},u),!!n&&W.createElement(n,null),a))}})(t,u,{effect:n}),b={atom:d,name:t};return{[s]:_,[o]:(e={})=>({get:Nie(Mie({},Xie(h,Yie(e))),{atom:(t,r)=>g(t,Mie(Mie({},Yie(e)),Yie(r)))}),set:Nie(Mie({},Xie(f,Yie(e))),{atom:(t,r)=>y(t,Mie(Mie({},Yie(e)),Yie(r)))}),use:Nie(Mie({},Xie(p,Yie(e))),{atom:(t,r)=>v(t,Mie(Mie({},Yie(e)),Yie(r)))}),store:t=>m(Mie(Mie({},Yie(e)),Yie(t)))}),[a]:b,name:t}};
/*!
			 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
			 *
			 * Copyright (c) 2014-2017, Jon Schlinkert.
			 * Released under the MIT License.
			 */
function Zie(e){return"[object Object]"===Object.prototype.toString.call(e)}function Jie(e){var t,r;return!1!==Zie(e)&&(void 0===(t=e.constructor)||!1!==Zie(r=t.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf"))}var Qie={transform(e,t){var{current:r,affinity:n}=e;if(null!=r){var i=use.transform(r,t,{affinity:n});e.current=i,null==i&&e.unref()}}},ese={transform(e,t){var{current:r,affinity:n}=e;if(null!=r){var i=Nse.transform(r,t,{affinity:n});e.current=i,null==i&&e.unref()}}},tse={transform(e,t){var{current:r,affinity:n}=e;if(null!=r){var i=xse.transform(r,t,{affinity:n});e.current=i,null==i&&e.unref()}}},rse=new WeakMap,nse=new WeakMap,ise=new WeakMap,sse=new WeakMap,ose=new WeakMap,ase=new WeakMap,lse=new WeakMap,use={ancestors(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reverse:r=!1}=t,n=use.levels(e,t);return n=r?n.slice(1):n.slice(0,-1)},common(e,t){for(var r=[],n=0;n<e.length&&n<t.length;n++){var i=e[n];if(i!==t[n])break;r.push(i)}return r},compare(e,t){for(var r=Math.min(e.length,t.length),n=0;n<r;n++){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}return 0},endsAfter(e,t){var r=e.length-1,n=e.slice(0,r),i=t.slice(0,r),s=e[r],o=t[r];return use.equals(n,i)&&s>o},endsAt(e,t){var r=e.length,n=e.slice(0,r),i=t.slice(0,r);return use.equals(n,i)},endsBefore(e,t){var r=e.length-1,n=e.slice(0,r),i=t.slice(0,r),s=e[r],o=t[r];return use.equals(n,i)&&s<o},equals:(e,t)=>e.length===t.length&&e.every((e,r)=>e===t[r]),hasPrevious:e=>e[e.length-1]>0,isAfter:(e,t)=>1===use.compare(e,t),isAncestor:(e,t)=>e.length<t.length&&0===use.compare(e,t),isBefore:(e,t)=>-1===use.compare(e,t),isChild:(e,t)=>e.length===t.length+1&&0===use.compare(e,t),isCommon:(e,t)=>e.length<=t.length&&0===use.compare(e,t),isDescendant:(e,t)=>e.length>t.length&&0===use.compare(e,t),isParent:(e,t)=>e.length+1===t.length&&0===use.compare(e,t),isPath:e=>Array.isArray(e)&&(0===e.length||"number"==typeof e[0]),isSibling(e,t){if(e.length!==t.length)return!1;var r=e.slice(0,-1),n=t.slice(0,-1);return e[e.length-1]!==t[t.length-1]&&use.equals(r,n)},levels(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reverse:r=!1}=t,n=[],i=0;i<=e.length;i++)n.push(e.slice(0,i));return r&&n.reverse(),n},next(e){if(0===e.length)throw new Error("Cannot get the next path of a root path [".concat(e,"], because it has no next index."));var t=e[e.length-1];return e.slice(0,-1).concat(t+1)},operationCanTransformPath(e){switch(e.type){case"insert_node":case"remove_node":case"merge_node":case"split_node":case"move_node":return!0;default:return!1}},parent(e){if(0===e.length)throw new Error("Cannot get the parent path of the root path [".concat(e,"]."));return e.slice(0,-1)},previous(e){if(0===e.length)throw new Error("Cannot get the previous path of a root path [".concat(e,"], because it has no previous index."));var t=e[e.length-1];if(t<=0)throw new Error("Cannot get the previous path of a first child path [".concat(e,"] because it would result in a negative index."));return e.slice(0,-1).concat(t-1)},relative(e,t){if(!use.isAncestor(t,e)&&!use.equals(e,t))throw new Error("Cannot get the relative path of [".concat(e,"] inside ancestor [").concat(t,"], because it is not above or equal to the path."));return e.slice(t.length)},transform(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)return null;var n=[...e],{affinity:i="forward"}=r;if(0===e.length)return n;switch(t.type){case"insert_node":var{path:s}=t;(use.equals(s,n)||use.endsBefore(s,n)||use.isAncestor(s,n))&&(n[s.length-1]+=1);break;case"remove_node":var{path:o}=t;if(use.equals(o,n)||use.isAncestor(o,n))return null;use.endsBefore(o,n)&&(n[o.length-1]-=1);break;case"merge_node":var{path:a,position:l}=t;use.equals(a,n)||use.endsBefore(a,n)?n[a.length-1]-=1:use.isAncestor(a,n)&&(n[a.length-1]-=1,n[a.length]+=l);break;case"split_node":var{path:u,position:c}=t;if(use.equals(u,n)){if("forward"===i)n[n.length-1]+=1;else if("backward"!==i)return null}else use.endsBefore(u,n)?n[u.length-1]+=1:use.isAncestor(u,n)&&e[u.length]>=c&&(n[u.length-1]+=1,n[u.length]-=c);break;case"move_node":var{path:d,newPath:h}=t;if(use.equals(d,h))return n;if(use.isAncestor(d,n)||use.equals(d,n)){var f=h.slice();return use.endsBefore(d,h)&&d.length<h.length&&(f[d.length-1]-=1),f.concat(n.slice(d.length))}use.isSibling(d,h)&&(use.isAncestor(h,n)||use.equals(h,n))?use.endsBefore(d,n)?n[d.length-1]-=1:n[d.length-1]+=1:use.endsBefore(h,n)||use.equals(h,n)||use.isAncestor(h,n)?(use.endsBefore(d,n)&&(n[d.length-1]-=1),n[h.length-1]+=1):use.endsBefore(d,n)&&(use.equals(h,n)&&(n[h.length-1]+=1),n[d.length-1]-=1)}return n}};function cse(e){return cse="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cse(e)}function dse(e){var t=function(e,t){if("object"!==cse(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==cse(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===cse(t)?t:String(t)}function hse(e,t,r){return(t=dse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fse(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function pse(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fse(Object(r),!0).forEach(function(t){hse(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fse(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var mse={transform(e,t){e.children=Mj(e.children);var r=e.selection&&Mj(e.selection);try{r=((e,t,r)=>{switch(r.type){case"insert_node":var{path:n,node:i}=r,s=Dse.parent(e,n),o=n[n.length-1];if(o>s.children.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(n,"] because the destination is past the end of the node."));if(s.children.splice(o,0,i),t)for(var[a,l]of xse.points(t))t[l]=Nse.transform(a,r);break;case"insert_text":var{path:u,offset:c,text:d}=r;if(0===d.length)break;var h=Dse.leaf(e,u),f=h.text.slice(0,c),p=h.text.slice(c);if(h.text=f+d+p,t)for(var[m,g]of xse.points(t))t[g]=Nse.transform(m,r);break;case"merge_node":var{path:y}=r,v=Dse.get(e,y),_=use.previous(y),b=Dse.get(e,_),w=Dse.parent(e,y),x=y[y.length-1];if($se.isText(v)&&$se.isText(b))b.text+=v.text;else{if($se.isText(v)||$se.isText(b))throw new Error('Cannot apply a "merge_node" operation at path ['.concat(y,"] to nodes of different interfaces: ").concat(Use.stringify(v)," ").concat(Use.stringify(b)));b.children.push(...v.children)}if(w.children.splice(x,1),t)for(var[E,S]of xse.points(t))t[S]=Nse.transform(E,r);break;case"move_node":var{path:C,newPath:A}=r;if(use.isAncestor(C,A))throw new Error("Cannot move a path [".concat(C,"] to new path [").concat(A,"] because the destination is inside itself."));var T=Dse.get(e,C),D=Dse.parent(e,C),k=C[C.length-1];D.children.splice(k,1);var P=use.transform(C,r),B=Dse.get(e,use.parent(P)),O=P[P.length-1];if(B.children.splice(O,0,T),t)for(var[R,F]of xse.points(t))t[F]=Nse.transform(R,r);break;case"remove_node":var{path:I}=r,M=I[I.length-1];if(Dse.parent(e,I).children.splice(M,1),t)for(var[N,L]of xse.points(t)){var U=Nse.transform(N,r);if(null!=t&&null!=U)t[L]=U;else{var j=void 0,z=void 0;for(var[V,G]of Dse.texts(e)){if(-1!==use.compare(G,I)){z=[V,G];break}j=[V,G]}var H=!1;j&&z&&(H=use.equals(z[1],I)?!use.hasPrevious(z[1]):use.common(j[1],I).length<use.common(z[1],I).length),j&&!H?(N.path=j[1],N.offset=j[0].text.length):z?(N.path=z[1],N.offset=0):t=null}}break;case"remove_text":var{path:$,offset:W,text:q}=r;if(0===q.length)break;var X=Dse.leaf(e,$),Y=X.text.slice(0,W),K=X.text.slice(W+q.length);if(X.text=Y+K,t)for(var[Z,J]of xse.points(t))t[J]=Nse.transform(Z,r);break;case"set_node":var{path:Q,properties:ee,newProperties:te}=r;if(0===Q.length)throw new Error("Cannot set properties on the root node!");var re=Dse.get(e,Q);for(var ne in te){if("children"===ne||"text"===ne)throw new Error('Cannot set the "'.concat(ne,'" property of nodes!'));var ie=te[ne];null==ie?delete re[ne]:re[ne]=ie}for(var se in ee)te.hasOwnProperty(se)||delete re[se];break;case"set_selection":var{newProperties:oe}=r;if(null==oe)t=oe;else{if(null==t){if(!xse.isRange(oe))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(Use.stringify(oe)," when there is no current selection."));t=pse({},oe)}for(var ae in oe){var le=oe[ae];if(null==le){if("anchor"===ae||"focus"===ae)throw new Error('Cannot remove the "'.concat(ae,'" selection property'));delete t[ae]}else t[ae]=le}}break;case"split_node":var{path:ue,position:ce,properties:de}=r;if(0===ue.length)throw new Error('Cannot apply a "split_node" operation at path ['.concat(ue,"] because the root node cannot be split."));var he,fe=Dse.get(e,ue),pe=Dse.parent(e,ue),me=ue[ue.length-1];if($se.isText(fe)){var ge=fe.text.slice(0,ce),ye=fe.text.slice(ce);fe.text=ge,he=pse(pse({},de),{},{text:ye})}else{var ve=fe.children.slice(0,ce),_e=fe.children.slice(ce);fe.children=ve,he=pse(pse({},de),{},{children:_e})}if(pe.children.splice(me+1,0,he),t)for(var[be,we]of xse.points(t))t[we]=Nse.transform(be,r)}return t})(e,r,t)}finally{e.children=Nj(e.children),e.selection=r?YU(r)?Nj(r):r:null}}},gse={insertNodes(e,t,r){e.insertNodes(t,r)},liftNodes(e,t){e.liftNodes(t)},mergeNodes(e,t){e.mergeNodes(t)},moveNodes(e,t){e.moveNodes(t)},removeNodes(e,t){e.removeNodes(t)},setNodes(e,t,r){e.setNodes(t,r)},splitNodes(e,t){e.splitNodes(t)},unsetNodes(e,t,r){e.unsetNodes(t,r)},unwrapNodes(e,t){e.unwrapNodes(t)},wrapNodes(e,t,r){e.wrapNodes(t,r)}},yse={collapse(e,t){e.collapse(t)},deselect(e){e.deselect()},move(e,t){e.move(t)},select(e,t){e.select(t)},setPoint(e,t,r){e.setPoint(t,r)},setSelection(e,t){e.setSelection(t)}},vse=(e,t)=>{for(var r in e){var n=e[r],i=t[r];if(Jie(n)&&Jie(i)){if(!vse(n,i))return!1}else if(Array.isArray(n)&&Array.isArray(i)){if(n.length!==i.length)return!1;for(var s=0;s<n.length;s++)if(n[s]!==i[s])return!1}else if(n!==i)return!1}for(var o in t)if(void 0===e[o]&&void 0!==t[o])return!1;return!0};function _se(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var bse=["anchor","focus"];function wse(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var xse={edges(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reverse:r=!1}=t,{anchor:n,focus:i}=e;return xse.isBackward(e)===r?[n,i]:[i,n]},end(e){var[,t]=xse.edges(e);return t},equals:(e,t)=>Nse.equals(e.anchor,t.anchor)&&Nse.equals(e.focus,t.focus),includes(e,t){if(xse.isRange(t)){if(xse.includes(e,t.anchor)||xse.includes(e,t.focus))return!0;var[r,n]=xse.edges(e),[i,s]=xse.edges(t);return Nse.isBefore(r,i)&&Nse.isAfter(n,s)}var[o,a]=xse.edges(e),l=!1,u=!1;return Nse.isPoint(t)?(l=Nse.compare(t,o)>=0,u=Nse.compare(t,a)<=0):(l=use.compare(t,o.path)>=0,u=use.compare(t,a.path)<=0),l&&u},intersection(e,t){var r=_se(e,bse),[n,i]=xse.edges(e),[s,o]=xse.edges(t),a=Nse.isBefore(n,s)?s:n,l=Nse.isBefore(i,o)?i:o;return Nse.isBefore(l,a)?null:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wse(Object(r),!0).forEach(function(t){hse(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wse(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({anchor:a,focus:l},r)},isBackward(e){var{anchor:t,focus:r}=e;return Nse.isAfter(t,r)},isCollapsed(e){var{anchor:t,focus:r}=e;return Nse.equals(t,r)},isExpanded:e=>!xse.isCollapsed(e),isForward:e=>!xse.isBackward(e),isRange:e=>Jie(e)&&Nse.isPoint(e.anchor)&&Nse.isPoint(e.focus),*points(e){yield[e.anchor,"anchor"],yield[e.focus,"focus"]},start(e){var[t]=xse.edges(e);return t},transform(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Fj(e,e=>{if(null===e)return null;var n,i,{affinity:s="inward"}=r;if("inward"===s){var o=xse.isCollapsed(e);xse.isForward(e)?(n="forward",i=o?n:"backward"):(n="backward",i=o?n:"forward")}else"outward"===s?xse.isForward(e)?(n="backward",i="forward"):(n="forward",i="backward"):(n=s,i=s);var a=Nse.transform(e.anchor,t,{affinity:n}),l=Nse.transform(e.focus,t,{affinity:i});if(!a||!l)return null;e.anchor=a,e.focus=l})}},Ese=e=>Jie(e)&&Dse.isNodeList(e.children)&&!Rse.isEditor(e),Sse={isAncestor:e=>Jie(e)&&Dse.isNodeList(e.children),isElement:Ese,isElementList:e=>Array.isArray(e)&&e.every(e=>Sse.isElement(e)),isElementProps:e=>void 0!==e.children,isElementType:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"type";return Ese(e)&&e[r]===t},matches(e,t){for(var r in t)if("children"!==r&&e[r]!==t[r])return!1;return!0}},Cse=["children"],Ase=["text"],Tse=new WeakMap,Dse={ancestor(e,t){var r=Dse.get(e,t);if($se.isText(r))throw new Error("Cannot get the ancestor node at path [".concat(t,"] because it refers to a text node instead: ").concat(Use.stringify(r)));return r},ancestors(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function*(){for(var n of use.ancestors(t,r)){var i=[Dse.ancestor(e,n),n];yield i}}()},child(e,t){if($se.isText(e))throw new Error("Cannot get the child of a text node: ".concat(Use.stringify(e)));var r=e.children[t];if(null==r)throw new Error("Cannot get child at index `".concat(t,"` in node: ").concat(Use.stringify(e)));return r},children(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function*(){for(var{reverse:n=!1}=r,i=Dse.ancestor(e,t),{children:s}=i,o=n?s.length-1:0;n?o>=0:o<s.length;){var a=Dse.child(i,o),l=t.concat(o);yield[a,l],o=n?o-1:o+1}}()},common(e,t,r){var n=use.common(t,r);return[Dse.get(e,n),n]},descendant(e,t){var r=Dse.get(e,t);if(Rse.isEditor(r))throw new Error("Cannot get the descendant node at path [".concat(t,"] because it refers to the root editor node instead: ").concat(Use.stringify(r)));return r},descendants(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){for(var[r,n]of Dse.nodes(e,t))0!==n.length&&(yield[r,n])}()},elements(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){for(var[r,n]of Dse.nodes(e,t))Sse.isElement(r)&&(yield[r,n])}()},extractProps:e=>Sse.isAncestor(e)?_se(e,Cse):_se(e,Ase),first(e,t){for(var r=t.slice(),n=Dse.get(e,r);n&&!$se.isText(n)&&0!==n.children.length;)n=n.children[0],r.push(0);return[n,r]},fragment(e,t){if($se.isText(e))throw new Error("Cannot get a fragment starting from a root text node: ".concat(Use.stringify(e)));var r=Fj({children:e.children},e=>{var[r,n]=xse.edges(t),i=Dse.nodes(e,{reverse:!0,pass:e=>{var[,r]=e;return!xse.includes(t,r)}});for(var[,s]of i){if(!xse.includes(t,s)){var o=Dse.parent(e,s),a=s[s.length-1];o.children.splice(a,1)}if(use.equals(s,n.path)){var l=Dse.leaf(e,s);l.text=l.text.slice(0,n.offset)}if(use.equals(s,r.path)){var u=Dse.leaf(e,s);u.text=u.text.slice(r.offset)}}Rse.isEditor(e)&&(e.selection=null)});return r.children},get(e,t){for(var r=e,n=0;n<t.length;n++){var i=t[n];if($se.isText(r)||!r.children[i])throw new Error("Cannot find a descendant at path [".concat(t,"] in node: ").concat(Use.stringify(e)));r=r.children[i]}return r},has(e,t){for(var r=e,n=0;n<t.length;n++){var i=t[n];if($se.isText(r)||!r.children[i])return!1;r=r.children[i]}return!0},isNode:e=>$se.isText(e)||Sse.isElement(e)||Rse.isEditor(e),isNodeList(e){if(!Array.isArray(e))return!1;var t=Tse.get(e);if(void 0!==t)return t;var r=e.every(e=>Dse.isNode(e));return Tse.set(e,r),r},last(e,t){for(var r=t.slice(),n=Dse.get(e,r);n&&!$se.isText(n)&&0!==n.children.length;){var i=n.children.length-1;n=n.children[i],r.push(i)}return[n,r]},leaf(e,t){var r=Dse.get(e,t);if(!$se.isText(r))throw new Error("Cannot get the leaf node at path [".concat(t,"] because it refers to a non-leaf node: ").concat(Use.stringify(r)));return r},levels(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function*(){for(var n of use.levels(t,r)){var i=Dse.get(e,n);yield[i,n]}}()},matches:(e,t)=>Sse.isElement(e)&&Sse.isElementProps(t)&&Sse.matches(e,t)||$se.isText(e)&&$se.isTextProps(t)&&$se.matches(e,t),nodes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){for(var{pass:r,reverse:n=!1}=t,{from:i=[],to:s}=t,o=new Set,a=[],l=e;!s||!(n?use.isBefore(a,s):use.isAfter(a,s));)if(o.has(l)||(yield[l,a]),o.has(l)||$se.isText(l)||0===l.children.length||null!=r&&!1!==r([l,a])){if(0===a.length)break;if(!n){var u=use.next(a);if(Dse.has(e,u)){a=u,l=Dse.get(e,a);continue}}n&&0!==a[a.length-1]?(a=use.previous(a),l=Dse.get(e,a)):(a=use.parent(a),l=Dse.get(e,a),o.add(l))}else{o.add(l);var c=n?l.children.length-1:0;use.isAncestor(a,i)&&(c=i[a.length]),a=a.concat(c),l=Dse.get(e,a)}}()},parent(e,t){var r=use.parent(t),n=Dse.get(e,r);if($se.isText(n))throw new Error("Cannot get the parent of path [".concat(t,"] because it does not exist in the root."));return n},string:e=>$se.isText(e)?e.text:e.children.map(Dse.string).join(""),texts(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){for(var[r,n]of Dse.nodes(e,t))$se.isText(r)&&(yield[r,n])}()}};function kse(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Pse(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kse(Object(r),!0).forEach(function(t){hse(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kse(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Bse={isNodeOperation:e=>Bse.isOperation(e)&&e.type.endsWith("_node"),isOperation(e){if(!Jie(e))return!1;switch(e.type){case"insert_node":case"remove_node":return use.isPath(e.path)&&Dse.isNode(e.node);case"insert_text":case"remove_text":return"number"==typeof e.offset&&"string"==typeof e.text&&use.isPath(e.path);case"merge_node":return"number"==typeof e.position&&use.isPath(e.path)&&Jie(e.properties);case"move_node":return use.isPath(e.path)&&use.isPath(e.newPath);case"set_node":return use.isPath(e.path)&&Jie(e.properties)&&Jie(e.newProperties);case"set_selection":return null===e.properties&&xse.isRange(e.newProperties)||null===e.newProperties&&xse.isRange(e.properties)||Jie(e.properties)&&Jie(e.newProperties);case"split_node":return use.isPath(e.path)&&"number"==typeof e.position&&Jie(e.properties);default:return!1}},isOperationList:e=>Array.isArray(e)&&e.every(e=>Bse.isOperation(e)),isSelectionOperation:e=>Bse.isOperation(e)&&e.type.endsWith("_selection"),isTextOperation:e=>Bse.isOperation(e)&&e.type.endsWith("_text"),inverse(e){switch(e.type){case"insert_node":return Pse(Pse({},e),{},{type:"remove_node"});case"insert_text":return Pse(Pse({},e),{},{type:"remove_text"});case"merge_node":return Pse(Pse({},e),{},{type:"split_node",path:use.previous(e.path)});case"move_node":var{newPath:t,path:r}=e;if(use.equals(t,r))return e;if(use.isSibling(r,t))return Pse(Pse({},e),{},{path:t,newPath:r});var n=use.transform(r,e),i=use.transform(use.next(r),e);return Pse(Pse({},e),{},{path:n,newPath:i});case"remove_node":return Pse(Pse({},e),{},{type:"insert_node"});case"remove_text":return Pse(Pse({},e),{},{type:"insert_text"});case"set_node":var{properties:s,newProperties:o}=e;return Pse(Pse({},e),{},{properties:o,newProperties:s});case"set_selection":var{properties:a,newProperties:l}=e;return Pse(Pse({},e),{},null==a?{properties:l,newProperties:null}:null==l?{properties:null,newProperties:a}:{properties:l,newProperties:a});case"split_node":return Pse(Pse({},e),{},{type:"merge_node",path:use.next(e.path)})}}},Ose=new WeakMap,Rse={above:(e,t)=>e.above(t),addMark(e,t,r){e.addMark(t,r)},after:(e,t,r)=>e.after(t,r),before:(e,t,r)=>e.before(t,r),deleteBackward(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{unit:r="character"}=t;e.deleteBackward(r)},deleteForward(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{unit:r="character"}=t;e.deleteForward(r)},deleteFragment(e,t){e.deleteFragment(t)},edges:(e,t)=>e.edges(t),elementReadOnly(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.elementReadOnly(t)},end:(e,t)=>e.end(t),first:(e,t)=>e.first(t),fragment:(e,t)=>e.fragment(t),hasBlocks:(e,t)=>e.hasBlocks(t),hasInlines:(e,t)=>e.hasInlines(t),hasPath:(e,t)=>e.hasPath(t),hasTexts:(e,t)=>e.hasTexts(t),insertBreak(e){e.insertBreak()},insertFragment(e,t,r){e.insertFragment(t,r)},insertNode(e,t){e.insertNode(t)},insertSoftBreak(e){e.insertSoftBreak()},insertText(e,t){e.insertText(t)},isBlock:(e,t)=>e.isBlock(t),isEdge:(e,t,r)=>e.isEdge(t,r),isEditor:e=>(e=>{var t=Ose.get(e);if(void 0!==t)return t;if(!Jie(e))return!1;var r="function"==typeof e.addMark&&"function"==typeof e.apply&&"function"==typeof e.deleteFragment&&"function"==typeof e.insertBreak&&"function"==typeof e.insertSoftBreak&&"function"==typeof e.insertFragment&&"function"==typeof e.insertNode&&"function"==typeof e.insertText&&"function"==typeof e.isElementReadOnly&&"function"==typeof e.isInline&&"function"==typeof e.isSelectable&&"function"==typeof e.isVoid&&"function"==typeof e.normalizeNode&&"function"==typeof e.onChange&&"function"==typeof e.removeMark&&"function"==typeof e.getDirtyPaths&&(null===e.marks||Jie(e.marks))&&(null===e.selection||xse.isRange(e.selection))&&Dse.isNodeList(e.children)&&Bse.isOperationList(e.operations);return Ose.set(e,r),r})(e),isElementReadOnly:(e,t)=>e.isElementReadOnly(t),isEmpty:(e,t)=>e.isEmpty(t),isEnd:(e,t,r)=>e.isEnd(t,r),isInline:(e,t)=>e.isInline(t),isNormalizing:e=>e.isNormalizing(),isSelectable:(e,t)=>e.isSelectable(t),isStart:(e,t,r)=>e.isStart(t,r),isVoid:(e,t)=>e.isVoid(t),last:(e,t)=>e.last(t),leaf:(e,t,r)=>e.leaf(t,r),levels:(e,t)=>e.levels(t),marks:e=>e.getMarks(),next:(e,t)=>e.next(t),node:(e,t,r)=>e.node(t,r),nodes:(e,t)=>e.nodes(t),normalize(e,t){e.normalize(t)},parent:(e,t,r)=>e.parent(t,r),path:(e,t,r)=>e.path(t,r),pathRef:(e,t,r)=>e.pathRef(t,r),pathRefs:e=>e.pathRefs(),point:(e,t,r)=>e.point(t,r),pointRef:(e,t,r)=>e.pointRef(t,r),pointRefs:e=>e.pointRefs(),positions:(e,t)=>e.positions(t),previous:(e,t)=>e.previous(t),range:(e,t,r)=>e.range(t,r),rangeRef:(e,t,r)=>e.rangeRef(t,r),rangeRefs:e=>e.rangeRefs(),removeMark(e,t){e.removeMark(t)},setNormalizing(e,t){e.setNormalizing(t)},start:(e,t)=>e.start(t),string:(e,t,r)=>e.string(t,r),unhangRange:(e,t,r)=>e.unhangRange(t,r),void:(e,t)=>e.void(t),withoutNormalizing(e,t){e.withoutNormalizing(t)},shouldMergeNodesRemovePrevNode:(e,t,r)=>e.shouldMergeNodesRemovePrevNode(t,r)},Fse={isSpan:e=>Array.isArray(e)&&2===e.length&&e.every(use.isPath)};function Ise(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Mse(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ise(Object(r),!0).forEach(function(t){hse(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ise(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Nse={compare(e,t){var r=use.compare(e.path,t.path);return 0===r?e.offset<t.offset?-1:e.offset>t.offset?1:0:r},isAfter:(e,t)=>1===Nse.compare(e,t),isBefore:(e,t)=>-1===Nse.compare(e,t),equals:(e,t)=>e.offset===t.offset&&use.equals(e.path,t.path),isPoint:e=>Jie(e)&&"number"==typeof e.offset&&use.isPath(e.path),transform(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Fj(e,e=>{if(null===e)return null;var{affinity:n="forward"}=r,{path:i,offset:s}=e;switch(t.type){case"insert_node":case"move_node":e.path=use.transform(i,t,r);break;case"insert_text":use.equals(t.path,i)&&(t.offset<s||t.offset===s&&"forward"===n)&&(e.offset+=t.text.length);break;case"merge_node":use.equals(t.path,i)&&(e.offset+=t.position),e.path=use.transform(i,t,r);break;case"remove_text":use.equals(t.path,i)&&t.offset<=s&&(e.offset-=Math.min(s-t.offset,t.text.length));break;case"remove_node":if(use.equals(t.path,i)||use.isAncestor(t.path,i))return null;e.path=use.transform(i,t,r);break;case"split_node":if(use.equals(t.path,i)){if(t.position===s&&null==n)return null;(t.position<s||t.position===s&&"forward"===n)&&(e.offset-=t.position,e.path=use.transform(i,t,Mse(Mse({},r),{},{affinity:"forward"})))}else e.path=use.transform(i,t,r)}})}},Lse=void 0,Use={setScrubber(e){Lse=e},stringify:e=>JSON.stringify(e,Lse)},jse=["text"],zse=["anchor","focus"];function Vse(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Gse(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vse(Object(r),!0).forEach(function(t){hse(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vse(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Hse,$se={equals(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{loose:n=!1}=r;function i(e){return _se(e,jse)}return vse(n?i(e):e,n?i(t):t)},isText:e=>Jie(e)&&"string"==typeof e.text,isTextList:e=>Array.isArray(e)&&e.every(e=>$se.isText(e)),isTextProps:e=>void 0!==e.text,matches(e,t){for(var r in t)if("text"!==r&&(!e.hasOwnProperty(r)||e[r]!==t[r]))return!1;return!0},decorations(e,t){var r=[Gse({},e)];for(var n of t){var i=_se(n,zse),[s,o]=xse.edges(n),a=[],l=0,u=s.offset,c=o.offset;for(var d of r){var{length:h}=d.text,f=l;if(l+=h,u<=f&&l<=c)Object.assign(d,i),a.push(d);else if(u!==c&&(u===l||c===f)||u>l||c<f||c===f&&0!==f)a.push(d);else{var p=d,m=void 0,g=void 0;if(c<l){var y=c-f;g=Gse(Gse({},p),{},{text:p.text.slice(y)}),p=Gse(Gse({},p),{},{text:p.text.slice(0,y)})}if(u>f){var v=u-f;m=Gse(Gse({},p),{},{text:p.text.slice(0,v)}),p=Gse(Gse({},p),{},{text:p.text.slice(v)})}Object.assign(p,i),m&&a.push(m),a.push(p),g&&a.push(g)}}r=a}return r}},Wse=e=>e.selection?e.selection:e.children.length>0?Rse.end(e,[]):[0],qse=(e,t)=>{var[r]=Rse.node(e,t);return e=>e===r},Xse=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!t,n=t?eoe(e):e,i=Hse.None,s=Hse.None,o=0,a=null;for(var l of n){var u=l.codePointAt(0);if(!u)break;var c=hoe(l,u);if([i,s]=r?[s,c]:[c,i],foe(i,Hse.ZWJ)&&foe(s,Hse.ExtPict)&&!yoe(r?e.substring(0,o):e.substring(0,e.length-o)))break;if(foe(i,Hse.RI)&&foe(s,Hse.RI)&&!(a=null!==a?!a:!!r||_oe(e.substring(0,e.length-o))))break;if(i!==Hse.None&&s!==Hse.None&&moe(i,s))break;o+=l.length}return o||1},Yse=/\s/,Kse=/[\u002B\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,Zse=/['\u2018\u2019]/,Jse=(e,t,r)=>{if(r){var n=e.length-t;return[e.slice(n,e.length),e.slice(0,n)]}return[e.slice(0,t),e.slice(t)]},Qse=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Yse.test(t))return!1;if(Zse.test(t)){var i=Xse(r,n),[s,o]=Jse(r,i,n);if(e(s,o,n))return!0}return!Kse.test(t)},eoe=function*(e){for(var t=e.length-1,r=0;r<e.length;r++){var n=e.charAt(t-r);if(roe(n.charCodeAt(0))){var i=e.charAt(t-r-1);if(toe(i.charCodeAt(0))){yield i+n,r++;continue}}yield n}},toe=e=>e>=55296&&e<=56319,roe=e=>e>=56320&&e<=57343;!function(e){e[e.None=0]="None",e[e.Extend=1]="Extend",e[e.ZWJ=2]="ZWJ",e[e.RI=4]="RI",e[e.Prepend=8]="Prepend",e[e.SpacingMark=16]="SpacingMark",e[e.L=32]="L",e[e.V=64]="V",e[e.T=128]="T",e[e.LV=256]="LV",e[e.LVT=512]="LVT",e[e.ExtPict=1024]="ExtPict",e[e.Any=2048]="Any"}(Hse||(Hse={}));var noe=/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])$/,ioe=/^(?:[\u0600-\u0605\u06DD\u070F\u0890\u0891\u08E2\u0D4E]|\uD804[\uDCBD\uDCCD\uDDC2\uDDC3]|\uD806[\uDD3F\uDD41\uDE3A\uDE84-\uDE89]|\uD807\uDD46)$/,soe=/^(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BF\u09C0\u09C7\u09C8\u09CB\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0\u0CC1\u0CC3\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0D02\u0D03\u0D3F\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82\u0D83\u0DD0\u0DD1\u0DD8-\u0DDE\u0DF2\u0DF3\u0E33\u0EB3\u0F3E\u0F3F\u0F7F\u1031\u103B\u103C\u1056\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB1\uDCB2\uDCB9\uDCBB\uDCBC\uDCBE\uDCC1\uDDB0\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD31-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD66\uDD6D])$/,ooe=/^[\u1100-\u115F\uA960-\uA97C]$/,aoe=/^[\u1160-\u11A7\uD7B0-\uD7C6]$/,loe=/^[\u11A8-\u11FF\uD7CB-\uD7FB]$/,uoe=/^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/,coe=/^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/,doe=/^(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])$/,hoe=(e,t)=>{var r=Hse.Any;return-1!==e.search(noe)&&(r|=Hse.Extend),8205===t&&(r|=Hse.ZWJ),t>=127462&&t<=127487&&(r|=Hse.RI),-1!==e.search(ioe)&&(r|=Hse.Prepend),-1!==e.search(soe)&&(r|=Hse.SpacingMark),-1!==e.search(ooe)&&(r|=Hse.L),-1!==e.search(aoe)&&(r|=Hse.V),-1!==e.search(loe)&&(r|=Hse.T),-1!==e.search(uoe)&&(r|=Hse.LV),-1!==e.search(coe)&&(r|=Hse.LVT),-1!==e.search(doe)&&(r|=Hse.ExtPict),r};function foe(e,t){return 0!==(e&t)}var poe=[[Hse.L,Hse.L|Hse.V|Hse.LV|Hse.LVT],[Hse.LV|Hse.V,Hse.V|Hse.T],[Hse.LVT|Hse.T,Hse.T],[Hse.Any,Hse.Extend|Hse.ZWJ],[Hse.Any,Hse.SpacingMark],[Hse.Prepend,Hse.Any],[Hse.ZWJ,Hse.ExtPict],[Hse.RI,Hse.RI]];function moe(e,t){return-1===poe.findIndex(r=>foe(e,r[0])&&foe(t,r[1]))}var goe=/(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])*\u200D$/,yoe=e=>-1!==e.search(goe),voe=/(?:\uD83C[\uDDE6-\uDDFF])+$/g,_oe=e=>{var t=e.match(voe);return null!==t&&t[0].length/2%2==1},boe={delete(e,t){e.delete(t)},insertFragment(e,t,r){e.insertFragment(t,r)},insertText(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Rse.withoutNormalizing(e,()=>{var{voids:n=!1}=r,{at:i=Wse(e)}=r;if(use.isPath(i)&&(i=Rse.range(e,i)),xse.isRange(i))if(xse.isCollapsed(i))i=i.anchor;else{var s=xse.end(i);if(!n&&Rse.void(e,{at:s}))return;var o=xse.start(i),a=Rse.pointRef(e,o),l=Rse.pointRef(e,s);Eoe.delete(e,{at:i,voids:n});var u=a.unref(),c=l.unref();i=u||c,Eoe.setSelection(e,{anchor:i,focus:i})}if(!(!n&&Rse.void(e,{at:i})||Rse.elementReadOnly(e,{at:i}))){var{path:d,offset:h}=i;t.length>0&&e.apply({type:"insert_text",path:d,offset:h,text:t})}})}};function woe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function xoe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?woe(Object(r),!0).forEach(function(t){hse(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):woe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Eoe=xoe(xoe(xoe(xoe({},mse),gse),yse),boe),Soe=new WeakMap;function Coe(e,t,r){var n,i,s=rse.get(e)||[],o=nse.get(e)||new Set,a=e=>{if(e){var t=e.join(",");i.has(t)||(i.add(t),n.push(e))}};if(r)for(var l of(n=[],i=new Set,s))a(r(l));else n=s,i=o;for(var u of t)a(u);rse.set(e,n),nse.set(e,i)}var Aoe=(e,t)=>{for(var r of Rse.pathRefs(e))Qie.transform(r,t);for(var n of Rse.pointRefs(e))ese.transform(n,t);for(var i of Rse.rangeRefs(e))tse.transform(i,t);if(!(e=>Soe.get(e)||!1)(e)){var s=use.operationCanTransformPath(t)?e=>use.transform(e,t):void 0;Coe(e,e.getDirtyPaths(t),s)}Eoe.transform(e,t),e.operations.push(t),Rse.normalize(e,{operation:t}),"set_selection"===t.type&&(e.marks=null),ise.get(e)||(ise.set(e,!0),Promise.resolve().then(()=>{ise.set(e,!1),e.onChange({operation:t}),e.operations=[]}))};function Toe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Doe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Toe(Object(r),!0).forEach(function(t){hse(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Toe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function koe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Poe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?koe(Object(r),!0).forEach(function(t){hse(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):koe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Boe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ooe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Boe(Object(r),!0).forEach(function(t){hse(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Boe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Roe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Foe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Roe(Object(r),!0).forEach(function(t){hse(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Roe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ioe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Moe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ioe(Object(r),!0).forEach(function(t){hse(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ioe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Noe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var Loe=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{selection:n,marks:i}=e;if(n){if(i){var s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Noe(Object(r),!0).forEach(function(t){hse(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Noe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({text:t},i);Eoe.insertNodes(e,s,{at:r.at,voids:r.voids})}else Eoe.insertText(e,t,r);e.marks=null}},Uoe=["text"],joe=["text"],zoe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{force:r=!1,operation:n}=t,i=e=>rse.get(e)||[],s=e=>{var t=i(e).pop(),r=t.join(",");return(e=>nse.get(e)||new Set)(e).delete(r),t};if(Rse.isNormalizing(e)){if(r){var o=Array.from(Dse.nodes(e),e=>{var[,t]=e;return t}),a=new Set(o.map(e=>e.join(",")));rse.set(e,o),nse.set(e,a)}0!==i(e).length&&Rse.withoutNormalizing(e,()=>{for(var t of i(e))if(Dse.has(e,t)){var r=Rse.node(e,t),[o,a]=r;Sse.isElement(o)&&0===o.children.length&&e.normalizeNode(r,{operation:n})}for(var l=i(e),u=l.length,c=0;0!==l.length;){if(!e.shouldNormalize({dirtyPaths:l,iteration:c,initialDirtyPathsLength:u,operation:n}))return;var d=s(e);if(Dse.has(e,d)){var h=Rse.node(e,d);e.normalizeNode(h,{operation:n})}c++,l=i(e)}})}};function Voe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){var{at:r=e.selection,unit:n="offset",reverse:i=!1,voids:s=!1,ignoreNonSelectable:o=!1}=t;if(r){var a=Rse.range(e,r),[l,u]=xse.edges(a),c=i?u:l,d=!1,h="",f=0,p=0,m=0;for(var[g,y]of Rse.nodes(e,{at:r,reverse:i,voids:s,ignoreNonSelectable:o})){if(Sse.isElement(g)){if(!s&&(e.isVoid(g)||e.isElementReadOnly(g))){yield Rse.start(e,y);continue}if(e.isInline(g))continue;if(Rse.hasInlines(e,g)){var v=use.isAncestor(y,u.path)?u:Rse.end(e,y),_=use.isAncestor(y,l.path)?l:Rse.start(e,y);h=Rse.string(e,{anchor:_,focus:v},{voids:s}),d=!0}}if($se.isText(g)){var b=use.equals(y,c.path);for(b?(p=i?c.offset:g.text.length-c.offset,m=c.offset):(p=g.text.length,m=i?p:0),(b||d||"offset"===n)&&(yield{path:y,offset:m},d=!1);;){if(0===f){if(""===h)break;f=w(h,n,i),h=Jse(h,f,i)[1]}if(m=i?m-f:m+f,(p-=f)<0){f=-p;break}f=0,yield{path:y,offset:m}}}}}function w(e,t,r){return"character"===t?Xse(e,r):"word"===t?function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=0,n=!1;e.length>0;){var i=Xse(e,t),[s,o]=Jse(e,i,t);if(Qse(s,o,t))n=!0,r+=i;else{if(n)break;r+=i}e=o}return r}(e,r):"line"===t||"block"===t?e.length:1}}()}function Goe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var Hoe=(e,t)=>{var{selection:r}=e;if(r){var n=(t,r)=>{if(!$se.isText(t))return!1;var[n,i]=Rse.parent(e,r);return!e.isVoid(n)||e.markableVoid(n)},i=xse.isExpanded(r),s=!1;if(!i){var[o,a]=Rse.node(e,r);if(o&&n(o,a)){var[l]=Rse.parent(e,a);s=l&&e.markableVoid(l)}}if(i||s)Eoe.unsetNodes(e,t,{match:n,split:!0,voids:!0});else{var u=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Goe(Object(r),!0).forEach(function(t){hse(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Goe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},Rse.marks(e)||{});delete u[t],e.marks=u,ise.get(e)||e.onChange()}}},$oe=(e,t)=>{var r=Rse.isNormalizing(e);Rse.setNormalizing(e,!1);try{t()}finally{Rse.setNormalizing(e,r)}Rse.normalize(e)};function Woe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function qoe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Woe(Object(r),!0).forEach(function(t){hse(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Woe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Xoe=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Rse.withoutNormalizing(e,()=>{var{hanging:n=!1,voids:i=!1,mode:s="lowest",batchDirty:o=!0}=r,{at:a,match:l,select:u}=r;if(Dse.isNode(t)&&(t=[t]),0!==t.length){var[c]=t;if(a||(a=Wse(e),!1!==u&&(u=!0)),null==u&&(u=!1),xse.isRange(a))if(n||(a=Rse.unhangRange(e,a,{voids:i})),xse.isCollapsed(a))a=a.anchor;else{var[,d]=xse.edges(a),h=Rse.pointRef(e,d);Eoe.delete(e,{at:a}),a=h.unref()}if(Nse.isPoint(a)){null==l&&(l=$se.isText(c)?e=>$se.isText(e):e.isInline(c)?t=>$se.isText(t)||Rse.isInline(e,t):t=>Sse.isElement(t)&&Rse.isBlock(e,t));var[f]=Rse.nodes(e,{at:a.path,match:l,mode:s,voids:i});if(!f)return;var[,p]=f,m=Rse.pathRef(e,p),g=Rse.isEnd(e,a,p);Eoe.splitNodes(e,{at:a,match:l,mode:s,voids:i});var y=m.unref();a=g?use.next(y):y}var v=use.parent(a),_=a[a.length-1];if(i||!Rse.void(e,{at:v})){if(o){var b=[],w=use.levels(v);((e,t,r)=>{var n=Soe.get(e)||!1;Soe.set(e,!0);try{t(),r()}finally{Soe.set(e,n)}})(e,()=>{var r=function(){var t=v.concat(_);_++;var r={type:"insert_node",path:t,node:n};e.apply(r),a=use.next(a),b.push(r),$se.isText?w.push(...Array.from(Dse.nodes(n),e=>{var[,r]=e;return t.concat(r)})):w.push(t)};for(var n of t)r()},()=>{Coe(e,w,e=>{var t=e;for(var r of b)if(use.operationCanTransformPath(r)&&!(t=use.transform(t,r)))return null;return t})})}else for(var x of t){var E=v.concat(_);_++,e.apply({type:"insert_node",path:E,node:x}),a=use.next(a)}if(a=use.previous(a),u){var S=Rse.end(e,a);S&&Eoe.select(e,S)}}}})},Yoe=["text"],Koe=["children"],Zoe=(e,t)=>{if(Sse.isElement(t)){var r=t;return!!Rse.isVoid(e,t)||1===r.children.length&&Zoe(e,r.children[0])}return!Rse.isEditor(t)},Joe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Rse.withoutNormalizing(e,()=>{var{hanging:r=!1,voids:n=!1,mode:i="lowest"}=t,{at:s=e.selection,match:o}=t;if(s){null==o&&(o=use.isPath(s)?qse(e,s):t=>Sse.isElement(t)&&Rse.isBlock(e,t)),!r&&xse.isRange(s)&&(s=Rse.unhangRange(e,s,{voids:n}));var a=Rse.nodes(e,{at:s,match:o,mode:i,voids:n}),l=Array.from(a,t=>{var[,r]=t;return Rse.pathRef(e,r)});for(var u of l){var c=u.unref();if(c){var[d]=Rse.node(e,c);e.apply({type:"remove_node",path:c,node:d})}}}})},Qoe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Rse.withoutNormalizing(e,()=>{var{mode:r="lowest",voids:n=!1}=t,{match:i,at:s=e.selection,height:o=0,always:a=!1}=t;if(null==i&&(i=t=>Sse.isElement(t)&&Rse.isBlock(e,t)),xse.isRange(s)&&(s=((e,t)=>{if(xse.isCollapsed(t))return t.anchor;var[,r]=xse.edges(t),n=Rse.pointRef(e,r);return Eoe.delete(e,{at:t}),n.unref()})(e,s)),use.isPath(s)){var l=s,u=Rse.point(e,l),[c]=Rse.parent(e,l);i=e=>e===c,o=u.path.length-l.length+1,s=u,a=!0}if(s){var d,h=Rse.pointRef(e,s,{affinity:"backward"});try{var[f]=Rse.nodes(e,{at:s,match:i,mode:r,voids:n});if(!f)return;var p=Rse.void(e,{at:s,mode:"highest"});if(!n&&p){var[m,g]=p;if(Sse.isElement(m)&&e.isInline(m)){var y=Rse.after(e,g);if(!y){var v=use.next(g);Eoe.insertNodes(e,{text:""},{at:v,voids:n}),y=Rse.point(e,v)}s=y,a=!0}o=s.path.length-g.length+1,a=!0}d=Rse.pointRef(e,s);var _=s.path.length-o,[,b]=f,w=s.path.slice(0,_),x=0===o?s.offset:s.path[_]+0;for(var[E,S]of Rse.levels(e,{at:w,reverse:!0,voids:n})){var C=!1;if(S.length<b.length||0===S.length||!n&&Sse.isElement(E)&&Rse.isVoid(e,E))break;var A=h.current,T=Rse.isEnd(e,A,S);if(a||!h||!Rse.isEdge(e,A,S)){C=!0;var D=Dse.extractProps(E);e.apply({type:"split_node",path:S,position:x,properties:D})}x=S[S.length-1]+(C||T?1:0)}if(null==t.at){var k=d.current||Rse.end(e,[]);Eoe.select(e,k)}}finally{var P;h.unref(),null===(P=d)||void 0===P||P.unref()}}})};function eae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eae(Object(r),!0).forEach(function(t){hse(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eae(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var rae=()=>{var e={children:[],operations:[],selection:null,marks:null,isElementReadOnly:()=>!1,isInline:()=>!1,isSelectable:()=>!0,isVoid:()=>!1,markableVoid:()=>!1,onChange:()=>{},apply:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Aoe(e,...r)},addMark:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return((e,t,r)=>{var{selection:n}=e;if(n){var i=(t,r)=>{if(!$se.isText(t))return!1;var[n,i]=Rse.parent(e,r);return!e.isVoid(n)||e.markableVoid(n)},s=xse.isExpanded(n),o=!1;if(!s){var[a,l]=Rse.node(e,n);if(a&&i(a,l)){var[u]=Rse.parent(e,l);o=u&&e.markableVoid(u)}}if(s||o)Eoe.setNodes(e,{[t]:r},{match:i,split:!0,voids:!0});else{var c=Doe(Doe({},Rse.marks(e)||{}),{},{[t]:r});e.marks=c,ise.get(e)||e.onChange()}}})(e,...r)},deleteBackward:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return((e,t)=>{var{selection:r}=e;r&&xse.isCollapsed(r)&&Eoe.delete(e,{unit:t,reverse:!0})})(e,...r)},deleteForward:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return((e,t)=>{var{selection:r}=e;r&&xse.isCollapsed(r)&&Eoe.delete(e,{unit:t})})(e,...r)},deleteFragment:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(e){var{direction:t="forward"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{selection:r}=e;r&&xse.isExpanded(r)&&Eoe.delete(e,{reverse:"backward"===t})}(e,...r)},getFragment:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=>{var{selection:t}=e;return t?Dse.fragment(e,t):[]})(e,...r)},insertBreak:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=>{Eoe.splitNodes(e,{always:!0})})(e,...r)},insertSoftBreak:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=>{Eoe.splitNodes(e,{always:!0})})(e,...r)},insertFragment:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Rse.withoutNormalizing(e,()=>{var{hanging:n=!1,voids:i=!1}=r,{at:s=Wse(e),batchDirty:o=!0}=r;if(t.length){if(xse.isRange(s))if(n||(s=Rse.unhangRange(e,s,{voids:i})),xse.isCollapsed(s))s=s.anchor;else{var[,a]=xse.edges(s);if(!i&&Rse.void(e,{at:a}))return;var l=Rse.pointRef(e,a);Eoe.delete(e,{at:s}),s=l.unref()}else use.isPath(s)&&(s=Rse.start(e,s));if(i||!Rse.void(e,{at:s})){var u=Rse.above(e,{at:s,match:t=>Sse.isElement(t)&&Rse.isInline(e,t),mode:"highest",voids:i});if(u){var[,c]=u;Rse.isEnd(e,s,c)?s=Rse.after(e,c):Rse.isStart(e,s,c)&&(s=Rse.before(e,c))}var d=Rse.above(e,{match:t=>Sse.isElement(t)&&Rse.isBlock(e,t),at:s,voids:i}),[,h]=d,f=Rse.isStart(e,s,h),p=Rse.isEnd(e,s,h),m=f&&p,g=!f||f&&p,y=!p,[,v]=Dse.first({children:t},[]),[,_]=Dse.last({children:t},[]),b=[],w=t=>{var[r,n]=t;return!(0===n.length||!m&&(g&&use.isAncestor(n,v)&&Sse.isElement(r)&&!e.isVoid(r)&&!e.isInline(r)||y&&use.isAncestor(n,_)&&Sse.isElement(r)&&!e.isVoid(r)&&!e.isInline(r)))};for(var x of Dse.nodes({children:t},{pass:w}))w(x)&&b.push(x);var E=[],S=[],C=[],A=!0,T=!1;for(var[D]of b)Sse.isElement(D)&&!e.isInline(D)?(A=!1,T=!0,S.push(D)):A?E.push(D):C.push(D);var[k]=Rse.nodes(e,{at:s,match:t=>$se.isText(t)||Rse.isInline(e,t),mode:"highest",voids:i}),[,P]=k,B=Rse.isStart(e,s,P),O=Rse.isEnd(e,s,P),R=Rse.pathRef(e,p&&!C.length?use.next(h):h),F=Rse.pathRef(e,O?use.next(P):P);Eoe.splitNodes(e,{at:s,match:t=>T?Sse.isElement(t)&&Rse.isBlock(e,t):$se.isText(t)||Rse.isInline(e,t),mode:T?"lowest":"highest",always:T&&(!f||E.length>0)&&(!p||C.length>0),voids:i});var I,M=Rse.pathRef(e,!B||B&&O?use.next(P):P);if(Eoe.insertNodes(e,E,{at:M.current,match:t=>$se.isText(t)||Rse.isInline(e,t),mode:"highest",voids:i,batchDirty:o}),m&&!E.length&&S.length&&!C.length&&Eoe.delete(e,{at:h,voids:i}),Eoe.insertNodes(e,S,{at:R.current,match:t=>Sse.isElement(t)&&Rse.isBlock(e,t),mode:"lowest",voids:i,batchDirty:o}),Eoe.insertNodes(e,C,{at:F.current,match:t=>$se.isText(t)||Rse.isInline(e,t),mode:"highest",voids:i,batchDirty:o}),!r.at&&(C.length>0&&F.current?I=use.previous(F.current):S.length>0&&R.current?I=use.previous(R.current):M.current&&(I=use.previous(M.current)),I)){var N=Rse.end(e,I);Eoe.select(e,N)}M.unref(),R.unref(),F.unref()}}})}(e,...r)},insertNode:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return((e,t,r)=>{Eoe.insertNodes(e,t,r)})(e,...r)},insertText:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Loe(e,...r)},normalizeNode:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return((e,t)=>{var[r,n]=t;if(!$se.isText(r))if(Sse.isElement(r)&&0===r.children.length)Eoe.insertNodes(e,{text:""},{at:n.concat(0),voids:!0});else for(var i=!Rse.isEditor(r)&&Sse.isElement(r)&&(e.isInline(r)||0===r.children.length||$se.isText(r.children[0])||e.isInline(r.children[0])),s=0,o=0;o<r.children.length;o++,s++){var a=Dse.get(e,n);if(!$se.isText(a)){var l=a.children[s],u=a.children[s-1],c=o===r.children.length-1;($se.isText(l)||Sse.isElement(l)&&e.isInline(l))!==i?(Eoe.removeNodes(e,{at:n.concat(s),voids:!0}),s--):Sse.isElement(l)?e.isInline(l)&&(null!=u&&$se.isText(u)?c&&(Eoe.insertNodes(e,{text:""},{at:n.concat(s+1),voids:!0}),s++):(Eoe.insertNodes(e,{text:""},{at:n.concat(s),voids:!0}),s++)):($se.isText(l)||"children"in l||(l.children=[]),null!=u&&$se.isText(u)&&($se.equals(l,u,{loose:!0})?(Eoe.mergeNodes(e,{at:n.concat(s),voids:!0}),s--):""===u.text?(Eoe.removeNodes(e,{at:n.concat(s-1),voids:!0}),s--):""===l.text&&(Eoe.removeNodes(e,{at:n.concat(s),voids:!0}),s--)))}}})(e,...r)},removeMark:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Hoe(e,...r)},getDirtyPaths:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return((e,t)=>{switch(t.type){case"insert_text":case"remove_text":case"set_node":var{path:r}=t;return use.levels(r);case"insert_node":var{node:n,path:i}=t,s=use.levels(i),o=$se.isText(n)?[]:Array.from(Dse.nodes(n),e=>{var[,t]=e;return i.concat(t)});return[...s,...o];case"merge_node":var{path:a}=t;return[...use.ancestors(a),use.previous(a)];case"move_node":var{path:l,newPath:u}=t;if(use.equals(l,u))return[];var c=[],d=[];for(var h of use.ancestors(l)){var f=use.transform(h,t);c.push(f)}for(var p of use.ancestors(u)){var m=use.transform(p,t);d.push(m)}var g=d[d.length-1],y=u[u.length-1],v=g.concat(y);return[...c,...d,v];case"remove_node":var{path:_}=t;return[...use.ancestors(_)];case"split_node":var{path:b}=t;return[...use.levels(b),use.next(b)];default:return[]}})(e,...r)},shouldNormalize:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return((e,t)=>{var{iteration:r,initialDirtyPathsLength:n}=t,i=42*n;if(r>i)throw new Error("Could not completely normalize the editor after ".concat(i," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state."));return!0})(e,...r)},above:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{voids:r=!1,mode:n="lowest",at:i=e.selection,match:s}=t;if(i){var o=Rse.path(e,i),a="lowest"===n;for(var[l,u]of Rse.levels(e,{at:o,voids:r,match:s,reverse:a}))if(!$se.isText(l))if(xse.isRange(i)){if(use.isAncestor(u,i.anchor.path)&&use.isAncestor(u,i.focus.path))return[l,u]}else if(!use.equals(o,u))return[l,u]}}(e,...r)},after:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={anchor:Rse.point(e,t,{edge:"end"}),focus:Rse.end(e,[])},{distance:s=1}=n,o=0;for(var a of Rse.positions(e,Poe(Poe({},n),{},{at:i}))){if(o>s)break;0!==o&&(r=a),o++}return r}(e,...r)},before:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={anchor:Rse.start(e,[]),focus:Rse.point(e,t,{edge:"start"})},{distance:s=1}=n,o=0;for(var a of Rse.positions(e,Ooe(Ooe({},n),{},{at:i,reverse:!0}))){if(o>s)break;0!==o&&(r=a),o++}return r}(e,...r)},collapse:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{edge:r="anchor"}=t,{selection:n}=e;if(n)if("anchor"===r)Eoe.select(e,n.anchor);else if("focus"===r)Eoe.select(e,n.focus);else if("start"===r){var[i]=xse.edges(n);Eoe.select(e,i)}else if("end"===r){var[,s]=xse.edges(n);Eoe.select(e,s)}}(e,...r)},delete:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Rse.withoutNormalizing(e,()=>{var r,n,{reverse:i=!1,unit:s="character",distance:o=1,voids:a=!1}=t,{at:l=e.selection,hanging:u=!1}=t;if(l){var c=!1;if(xse.isRange(l)&&xse.isCollapsed(l)&&(c=!0,l=l.anchor),Nse.isPoint(l)){var d=Rse.void(e,{at:l,mode:"highest"});if(!a&&d){var[,h]=d;l=h}else{var f={unit:s,distance:o};l={anchor:l,focus:i?Rse.before(e,l,f)||Rse.start(e,[]):Rse.after(e,l,f)||Rse.end(e,[])},u=!0}}if(use.isPath(l))Eoe.removeNodes(e,{at:l,voids:a});else if(!xse.isCollapsed(l)){if(!u){var[,p]=xse.edges(l),m=Rse.end(e,[]);Nse.equals(p,m)||(l=Rse.unhangRange(e,l,{voids:a}))}var[g,y]=xse.edges(l),v=Rse.above(e,{match:t=>Sse.isElement(t)&&Rse.isBlock(e,t),at:g,voids:a}),_=Rse.above(e,{match:t=>Sse.isElement(t)&&Rse.isBlock(e,t),at:y,voids:a}),b=v&&_&&!use.equals(v[1],_[1]),w=use.equals(g.path,y.path),x=a?null:null!==(r=Rse.void(e,{at:g,mode:"highest"}))&&void 0!==r?r:Rse.elementReadOnly(e,{at:g,mode:"highest"}),E=a?null:null!==(n=Rse.void(e,{at:y,mode:"highest"}))&&void 0!==n?n:Rse.elementReadOnly(e,{at:y,mode:"highest"});if(x){var S=Rse.before(e,g);S&&v&&use.isAncestor(v[1],S.path)&&(g=S)}if(E){var C=Rse.after(e,y);C&&_&&use.isAncestor(_[1],C.path)&&(y=C)}var A,T=[];for(var D of Rse.nodes(e,{at:l,voids:a})){var[k,P]=D;A&&0===use.compare(P,A)||(!a&&Sse.isElement(k)&&(Rse.isVoid(e,k)||Rse.isElementReadOnly(e,k))||!use.isCommon(P,g.path)&&!use.isCommon(P,y.path))&&(T.push(D),A=P)}var B=Array.from(T,t=>{var[,r]=t;return Rse.pathRef(e,r)}),O=Rse.pointRef(e,g),R=Rse.pointRef(e,y),F="";if(!w&&!x){var I=O.current,[M]=Rse.leaf(e,I),{path:N}=I,{offset:L}=g,U=M.text.slice(L);U.length>0&&(e.apply({type:"remove_text",path:N,offset:L,text:U}),F=U)}if(B.reverse().map(e=>e.unref()).filter(e=>null!==e).forEach(t=>Eoe.removeNodes(e,{at:t,voids:a})),!E){var j=R.current,[z]=Rse.leaf(e,j),{path:V}=j,G=w?g.offset:0,H=z.text.slice(G,y.offset);H.length>0&&(e.apply({type:"remove_text",path:V,offset:G,text:H}),F=H)}!w&&b&&R.current&&O.current&&Eoe.mergeNodes(e,{at:R.current,hanging:!0,voids:a}),c&&i&&"character"===s&&F.length>1&&F.match(/[\u0E00-\u0E7F]+/)&&Eoe.insertText(e,F.slice(0,F.length-o));var $=O.unref(),W=R.unref(),q=i?$||W:W||$;null==t.at&&q&&Eoe.select(e,q)}}})}(e,...r)},deselect:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=>{var{selection:t}=e;t&&e.apply({type:"set_selection",properties:t,newProperties:null})})(e,...r)},edges:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return((e,t)=>[Rse.start(e,t),Rse.end(e,t)])(e,...r)},elementReadOnly:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Rse.above(e,Foe(Foe({},t),{},{match:t=>Sse.isElement(t)&&Rse.isElementReadOnly(e,t)}))}(e,...r)},end:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return((e,t)=>Rse.point(e,t,{edge:"end"}))(e,...r)},first:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return((e,t)=>{var r=Rse.path(e,t,{edge:"start"});return Rse.node(e,r)})(e,...r)},fragment:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return((e,t)=>{var r=Rse.range(e,t);return Dse.fragment(e,r)})(e,...r)},getMarks:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(e){var{marks:t,selection:r}=e;if(!r)return null;var{anchor:n,focus:i}=r;if(t)return t;if(xse.isExpanded(r)){if(Rse.isEnd(e,n,n.path)){var s=Rse.after(e,n);s&&(n=s)}var[o]=Rse.nodes(e,{match:$se.isText,at:{anchor:n,focus:i}});if(o){var[a]=o;return _se(a,Uoe)}return{}}var{path:l}=n,[u]=Rse.leaf(e,l);if(0===n.offset){var c=Rse.previous(e,{at:l,match:$se.isText}),d=Rse.above(e,{match:t=>Sse.isElement(t)&&Rse.isVoid(e,t)&&e.markableVoid(t)});if(!d){var h=Rse.above(e,{match:t=>Sse.isElement(t)&&Rse.isBlock(e,t)});if(c&&h){var[f,p]=c,[,m]=h;use.isAncestor(m,p)&&(u=f)}}}return _se(u,joe)}(e,...r)},hasBlocks:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return((e,t)=>t.children.some(t=>Sse.isElement(t)&&Rse.isBlock(e,t)))(e,...r)},hasInlines:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return((e,t)=>t.children.some(t=>$se.isText(t)||Rse.isInline(e,t)))(e,...r)},hasPath:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return((e,t)=>Dse.has(e,t))(e,...r)},hasTexts:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return((e,t)=>t.children.every(e=>$se.isText(e)))(e,...r)},insertNodes:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Xoe(e,...r)},isBlock:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return((e,t)=>!e.isInline(t))(e,...r)},isEdge:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return((e,t,r)=>Rse.isStart(e,t,r)||Rse.isEnd(e,t,r))(e,...r)},isEmpty:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return((e,t)=>{var{children:r}=t,[n]=r;return 0===r.length||1===r.length&&$se.isText(n)&&""===n.text&&!e.isVoid(t)})(e,...r)},isEnd:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return((e,t,r)=>{var n=Rse.end(e,r);return Nse.equals(t,n)})(e,...r)},isNormalizing:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=>{var t=sse.get(e);return void 0===t||t})(e,...r)},isStart:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return((e,t,r)=>{if(0!==t.offset)return!1;var n=Rse.start(e,r);return Nse.equals(t,n)})(e,...r)},last:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return((e,t)=>{var r=Rse.path(e,t,{edge:"end"});return Rse.node(e,r)})(e,...r)},leaf:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Rse.path(e,t,r);return[Dse.leaf(e,n),n]}(e,...r)},levels:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){var{at:r=e.selection,reverse:n=!1,voids:i=!1}=t,{match:s}=t;if(null==s&&(s=()=>!0),r){var o=[],a=Rse.path(e,r);for(var[l,u]of Dse.levels(e,a))if(s(l,u)&&(o.push([l,u]),!i&&Sse.isElement(l)&&Rse.isVoid(e,l)))break;n&&o.reverse(),yield*o}}()}(e,...r)},liftNodes:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Rse.withoutNormalizing(e,()=>{var{at:r=e.selection,mode:n="lowest",voids:i=!1}=t,{match:s}=t;if(null==s&&(s=use.isPath(r)?qse(e,r):t=>Sse.isElement(t)&&Rse.isBlock(e,t)),r){var o=Rse.nodes(e,{at:r,match:s,mode:n,voids:i}),a=Array.from(o,t=>{var[,r]=t;return Rse.pathRef(e,r)});for(var l of a){var u=l.unref();if(u.length<2)throw new Error("Cannot lift node at a path [".concat(u,"] because it has a depth of less than `2`."));var c=Rse.node(e,use.parent(u)),[d,h]=c,f=u[u.length-1],{length:p}=d.children;if(1===p){var m=use.next(h);Eoe.moveNodes(e,{at:u,to:m,voids:i}),Eoe.removeNodes(e,{at:h,voids:i})}else if(0===f)Eoe.moveNodes(e,{at:u,to:h,voids:i});else if(f===p-1){var g=use.next(h);Eoe.moveNodes(e,{at:u,to:g,voids:i})}else{var y=use.next(u),v=use.next(h);Eoe.splitNodes(e,{at:y,voids:i}),Eoe.moveNodes(e,{at:u,to:v,voids:i})}}}})}(e,...r)},mergeNodes:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Rse.withoutNormalizing(e,()=>{var{match:r,at:n=e.selection}=t,{hanging:i=!1,voids:s=!1,mode:o="lowest"}=t;if(n){if(null==r)if(use.isPath(n)){var[a]=Rse.parent(e,n);r=e=>a.children.includes(e)}else r=t=>Sse.isElement(t)&&Rse.isBlock(e,t);if(!i&&xse.isRange(n)&&(n=Rse.unhangRange(e,n,{voids:s})),xse.isRange(n))if(xse.isCollapsed(n))n=n.anchor;else{var[,l]=xse.edges(n),u=Rse.pointRef(e,l);Eoe.delete(e,{at:n}),n=u.unref(),null==t.at&&Eoe.select(e,n)}var[c]=Rse.nodes(e,{at:n,match:r,voids:s,mode:o}),d=Rse.previous(e,{at:n,match:r,voids:s,mode:o});if(c&&d){var[h,f]=c,[p,m]=d;if(0!==f.length&&0!==m.length){var g,y,v=use.next(m),_=use.common(f,m),b=use.isSibling(f,m),w=Array.from(Rse.levels(e,{at:f}),e=>{var[t]=e;return t}).slice(_.length).slice(0,-1),x=Rse.above(e,{at:f,mode:"highest",match:t=>w.includes(t)&&Zoe(e,t)}),E=x&&Rse.pathRef(e,x[1]);if($se.isText(h)&&$se.isText(p)){var S=_se(h,Yoe);y=p.text.length,g=S}else{if(!Sse.isElement(h)||!Sse.isElement(p))throw new Error("Cannot merge the node at path [".concat(f,"] with the previous sibling because it is not the same kind: ").concat(Use.stringify(h)," ").concat(Use.stringify(p)));S=_se(h,Koe),y=p.children.length,g=S}b||Eoe.moveNodes(e,{at:f,to:v,voids:s}),E&&Eoe.removeNodes(e,{at:E.current,voids:s}),Rse.shouldMergeNodesRemovePrevNode(e,d,c)?Eoe.removeNodes(e,{at:m,voids:s}):e.apply({type:"merge_node",path:v,position:y,properties:g}),E&&E.unref()}}}})}(e,...r)},move:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{selection:r}=e,{distance:n=1,unit:i="character",reverse:s=!1}=t,{edge:o=null}=t;if(r){"start"===o&&(o=xse.isBackward(r)?"focus":"anchor"),"end"===o&&(o=xse.isBackward(r)?"anchor":"focus");var{anchor:a,focus:l}=r,u={distance:n,unit:i,ignoreNonSelectable:!0},c={};if(null==o||"anchor"===o){var d=s?Rse.before(e,a,u):Rse.after(e,a,u);d&&(c.anchor=d)}if(null==o||"focus"===o){var h=s?Rse.before(e,l,u):Rse.after(e,l,u);h&&(c.focus=h)}Eoe.setSelection(e,c)}}(e,...r)},moveNodes:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return((e,t)=>{Rse.withoutNormalizing(e,()=>{var{to:r,at:n=e.selection,mode:i="lowest",voids:s=!1}=t,{match:o}=t;if(n){null==o&&(o=use.isPath(n)?qse(e,n):t=>Sse.isElement(t)&&Rse.isBlock(e,t));var a=Rse.pathRef(e,r),l=Rse.nodes(e,{at:n,match:o,mode:i,voids:s}),u=Array.from(l,t=>{var[,r]=t;return Rse.pathRef(e,r)});for(var c of u){var d=c.unref(),h=a.current;0!==d.length&&e.apply({type:"move_node",path:d,newPath:h}),a.current&&use.isSibling(h,d)&&use.isAfter(h,d)&&(a.current=use.next(a.current))}a.unref()}})})(e,...r)},next:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{mode:r="lowest",voids:n=!1}=t,{match:i,at:s=e.selection}=t;if(s){var o=Rse.after(e,s,{voids:n});if(o){var[,a]=Rse.last(e,[]),l=[o.path,a];if(use.isPath(s)&&0===s.length)throw new Error("Cannot get the next node from the root node!");if(null==i)if(use.isPath(s)){var[u]=Rse.parent(e,s);i=e=>u.children.includes(e)}else i=()=>!0;var[c]=Rse.nodes(e,{at:l,match:i,mode:r,voids:n});return c}}}(e,...r)},node:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Rse.path(e,t,r),i=Dse.get(e,n);return[i,n]}(e,...r)},nodes:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){var{at:r=e.selection,mode:n="all",universal:i=!1,reverse:s=!1,voids:o=!1,ignoreNonSelectable:a=!1}=t,{match:l}=t;if(l||(l=()=>!0),r){var u,c;if(Fse.isSpan(r))u=r[0],c=r[1];else{var d=Rse.path(e,r,{edge:"start"}),h=Rse.path(e,r,{edge:"end"});u=s?h:d,c=s?d:h}var f,p=Dse.nodes(e,{reverse:s,from:u,to:c,pass:t=>{var[r]=t;return!(!Sse.isElement(r)||(o||!Rse.isVoid(e,r)&&!Rse.isElementReadOnly(e,r))&&(!a||Rse.isSelectable(e,r)))}}),m=[];for(var[g,y]of p)if(!a||!Sse.isElement(g)||Rse.isSelectable(e,g)){var v=f&&0===use.compare(y,f[1]);if("highest"!==n||!v)if(l(g,y))if("lowest"===n&&v)f=[g,y];else{var _="lowest"===n?f:[g,y];_&&(i?m.push(_):yield _),f=[g,y]}else if(i&&!v&&$se.isText(g))return}"lowest"===n&&f&&(i?m.push(f):yield f),i&&(yield*m)}}()}(e,...r)},normalize:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return zoe(e,...r)},parent:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Rse.path(e,t,r),i=use.parent(n);return Rse.node(e,i)}(e,...r)},path:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{depth:n,edge:i}=r;if(use.isPath(t))if("start"===i){var[,s]=Dse.first(e,t);t=s}else if("end"===i){var[,o]=Dse.last(e,t);t=o}return xse.isRange(t)&&(t="start"===i?xse.start(t):"end"===i?xse.end(t):use.common(t.anchor.path,t.focus.path)),Nse.isPoint(t)&&(t=t.path),null!=n&&(t=t.slice(0,n)),t}(e,...r)},pathRef:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{affinity:n="forward"}=r,i={current:t,affinity:n,unref(){var{current:t}=i;return Rse.pathRefs(e).delete(i),i.current=null,t}};return Rse.pathRefs(e).add(i),i}(e,...r)},pathRefs:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=>{var t=ose.get(e);return t||(t=new Set,ose.set(e,t)),t})(e,...r)},point:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{edge:n="start"}=r;if(use.isPath(t)){var i;if("end"===n){var[,s]=Dse.last(e,t);i=s}else{var[,o]=Dse.first(e,t);i=o}var a=Dse.get(e,i);if(!$se.isText(a))throw new Error("Cannot get the ".concat(n," point in the node at path [").concat(t,"] because it has no ").concat(n," text node."));return{path:i,offset:"end"===n?a.text.length:0}}if(xse.isRange(t)){var[l,u]=xse.edges(t);return"start"===n?l:u}return t}(e,...r)},pointRef:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{affinity:n="forward"}=r,i={current:t,affinity:n,unref(){var{current:t}=i;return Rse.pointRefs(e).delete(i),i.current=null,t}};return Rse.pointRefs(e).add(i),i}(e,...r)},pointRefs:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=>{var t=ase.get(e);return t||(t=new Set,ase.set(e,t)),t})(e,...r)},positions:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Voe(e,...r)},previous:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{mode:r="lowest",voids:n=!1}=t,{match:i,at:s=e.selection}=t;if(s){var o=Rse.before(e,s,{voids:n});if(o){var[,a]=Rse.first(e,[]),l=[o.path,a];if(use.isPath(s)&&0===s.length)throw new Error("Cannot get the previous node from the root node!");if(null==i)if(use.isPath(s)){var[u]=Rse.parent(e,s);i=e=>u.children.includes(e)}else i=()=>!0;var[c]=Rse.nodes(e,{reverse:!0,at:l,match:i,mode:r,voids:n});return c}}}(e,...r)},range:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return((e,t,r)=>xse.isRange(t)&&!r?t:{anchor:Rse.start(e,t),focus:Rse.end(e,r||t)})(e,...r)},rangeRef:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{affinity:n="forward"}=r,i={current:t,affinity:n,unref(){var{current:t}=i;return Rse.rangeRefs(e).delete(i),i.current=null,t}};return Rse.rangeRefs(e).add(i),i}(e,...r)},rangeRefs:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=>{var t=lse.get(e);return t||(t=new Set,lse.set(e,t)),t})(e,...r)},removeNodes:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Joe(e,...r)},select:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return((e,t)=>{var{selection:r}=e;if(t=Rse.range(e,t),r)Eoe.setSelection(e,t);else{if(!xse.isRange(t))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(Use.stringify(t)));e.apply({type:"set_selection",properties:r,newProperties:t})}})(e,...r)},setNodes:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Rse.withoutNormalizing(e,()=>{var{match:n,at:i=e.selection,compare:s,merge:o}=r,{hanging:a=!1,mode:l="lowest",split:u=!1,voids:c=!1}=r;if(i){if(null==n&&(n=use.isPath(i)?qse(e,i):t=>Sse.isElement(t)&&Rse.isBlock(e,t)),!a&&xse.isRange(i)&&(i=Rse.unhangRange(e,i,{voids:c})),u&&xse.isRange(i)){if(xse.isCollapsed(i)&&Rse.leaf(e,i.anchor)[0].text.length>0)return;var d=Rse.rangeRef(e,i,{affinity:"inward"}),[h,f]=xse.edges(i),p="lowest"===l?"lowest":"highest",m=Rse.isEnd(e,f,f.path);Eoe.splitNodes(e,{at:f,match:n,mode:p,voids:c,always:!m});var g=Rse.isStart(e,h,h.path);Eoe.splitNodes(e,{at:h,match:n,mode:p,voids:c,always:!g}),i=d.unref(),null==r.at&&Eoe.select(e,i)}for(var[y,v]of(s||(s=(e,t)=>e!==t),Rse.nodes(e,{at:i,match:n,mode:l,voids:c}))){var _={},b={};if(0!==v.length){var w=!1;for(var x in t)"children"!==x&&"text"!==x&&s(t[x],y[x])&&(w=!0,y.hasOwnProperty(x)&&(_[x]=y[x]),o?null!=t[x]&&(b[x]=o(y[x],t[x])):null!=t[x]&&(b[x]=t[x]));w&&e.apply({type:"set_node",path:v,properties:_,newProperties:b})}}}})}(e,...r)},setNormalizing:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return((e,t)=>{sse.set(e,t)})(e,...r)},setPoint:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{selection:n}=e,{edge:i="both"}=r;if(n){"start"===i&&(i=xse.isBackward(n)?"focus":"anchor"),"end"===i&&(i=xse.isBackward(n)?"anchor":"focus");var{anchor:s,focus:o}=n,a="anchor"===i?s:o;Eoe.setSelection(e,{["anchor"===i?"anchor":"focus"]:qoe(qoe({},a),t)})}}(e,...r)},setSelection:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return((e,t)=>{var{selection:r}=e,n={},i={};if(r){for(var s in t)("anchor"===s&&null!=t.anchor&&!Nse.equals(t.anchor,r.anchor)||"focus"===s&&null!=t.focus&&!Nse.equals(t.focus,r.focus)||"anchor"!==s&&"focus"!==s&&t[s]!==r[s])&&(n[s]=r[s],i[s]=t[s]);Object.keys(n).length>0&&e.apply({type:"set_selection",properties:n,newProperties:i})}})(e,...r)},splitNodes:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Qoe(e,...r)},start:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return((e,t)=>Rse.point(e,t,{edge:"start"}))(e,...r)},string:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{voids:n=!1}=r,i=Rse.range(e,t),[s,o]=xse.edges(i),a="";for(var[l,u]of Rse.nodes(e,{at:i,match:$se.isText,voids:n})){var c=l.text;use.equals(u,o.path)&&(c=c.slice(0,o.offset)),use.equals(u,s.path)&&(c=c.slice(s.offset)),a+=c}return a}(e,...r)},unhangRange:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{voids:n=!1}=r,[i,s]=xse.edges(t);if(0!==i.offset||0!==s.offset||xse.isCollapsed(t)||use.hasPrevious(s.path))return t;var o=Rse.above(e,{at:s,match:t=>Sse.isElement(t)&&Rse.isBlock(e,t),voids:n}),a=o?o[1]:[],l={anchor:Rse.start(e,i),focus:s},u=!0;for(var[c,d]of Rse.nodes(e,{at:l,match:$se.isText,reverse:!0,voids:n}))if(u)u=!1;else if(""!==c.text||use.isBefore(d,a)){s={path:d,offset:c.text.length};break}return{anchor:i,focus:s}}(e,...r)},unsetNodes:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Array.isArray(t)||(t=[t]);var n={};for(var i of t)n[i]=null;Eoe.setNodes(e,n,r)}(e,...r)},unwrapNodes:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Rse.withoutNormalizing(e,()=>{var{mode:r="lowest",split:n=!1,voids:i=!1}=t,{at:s=e.selection,match:o}=t;if(s){null==o&&(o=use.isPath(s)?qse(e,s):t=>Sse.isElement(t)&&Rse.isBlock(e,t)),use.isPath(s)&&(s=Rse.range(e,s));var a=xse.isRange(s)?Rse.rangeRef(e,s):null,l=Rse.nodes(e,{at:s,match:o,mode:r,voids:i}),u=Array.from(l,t=>{var[,r]=t;return Rse.pathRef(e,r)}).reverse(),c=function(){var t=d.unref(),[r]=Rse.node(e,t),s=Rse.range(e,t);n&&a&&(s=xse.intersection(a.current,s)),Eoe.liftNodes(e,{at:s,match:e=>Sse.isAncestor(r)&&r.children.includes(e),voids:i})};for(var d of u)c();a&&a.unref()}})}(e,...r)},void:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Rse.above(e,Moe(Moe({},t),{},{match:t=>Sse.isElement(t)&&Rse.isVoid(e,t)}))}(e,...r)},withoutNormalizing:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return $oe(e,...r)},wrapNodes:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Rse.withoutNormalizing(e,()=>{var{mode:n="lowest",split:i=!1,voids:s=!1}=r,{match:o,at:a=e.selection}=r;if(a){if(null==o&&(o=use.isPath(a)?qse(e,a):e.isInline(t)?t=>Sse.isElement(t)&&Rse.isInline(e,t)||$se.isText(t):t=>Sse.isElement(t)&&Rse.isBlock(e,t)),i&&xse.isRange(a)){var[l,u]=xse.edges(a),c=Rse.rangeRef(e,a,{affinity:"inward"});Eoe.splitNodes(e,{at:u,match:o,voids:s}),Eoe.splitNodes(e,{at:l,match:o,voids:s}),a=c.unref(),null==r.at&&Eoe.select(e,a)}var d=Array.from(Rse.nodes(e,{at:a,match:e.isInline(t)?t=>Sse.isElement(t)&&Rse.isBlock(e,t):e=>Rse.isEditor(e),mode:"lowest",voids:s})),h=function(){var r=xse.isRange(a)?xse.intersection(a,Rse.range(e,f)):a;if(!r)return 0;var i=Array.from(Rse.nodes(e,{at:r,match:o,mode:n,voids:s}));if(i.length>0){var[l]=i,u=i[i.length-1],[,c]=l,[,d]=u;if(0===c.length&&0===d.length)return 0;var h=use.equals(c,d)?use.parent(c):use.common(c,d),p=Rse.range(e,c,d),m=Rse.node(e,h),[g]=m,y=h.length+1,v=use.next(d.slice(0,y)),_=tae(tae({},t),{},{children:[]});Eoe.insertNodes(e,_,{at:v,voids:s}),Eoe.moveNodes(e,{at:p,match:e=>Sse.isAncestor(g)&&g.children.includes(e),to:v.concat(0),voids:s})}};for(var[,f]of d)h()}})}(e,...r)},shouldMergeNodesRemovePrevNode:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return((e,t)=>{var[r,n]=t;return Sse.isElement(r)&&Rse.isEmpty(e,r)||$se.isText(r)&&""===r.text&&0!==n[n.length-1]})(e,...r)}};return e},nae={isHistory:e=>Jie(e)&&Array.isArray(e.redos)&&Array.isArray(e.undos)&&(0===e.redos.length||Bse.isOperationList(e.redos[0].operations))&&(0===e.undos.length||Bse.isOperationList(e.undos[0].operations))},iae=new WeakMap,sae=new WeakMap,oae={isHistoryEditor:e=>nae.isHistory(e.history)&&Rse.isEditor(e),isMerging:e=>sae.get(e),isSaving:e=>iae.get(e),redo(e){e.redo()},undo(e){e.undo()},withMerging(e,t){var r=oae.isMerging(e);sae.set(e,!0),t(),sae.set(e,r)},withoutMerging(e,t){var r=oae.isMerging(e);sae.set(e,!1),t(),sae.set(e,r)},withoutSaving(e,t){var r=oae.isSaving(e);iae.set(e,!1),t(),iae.set(e,r)}},aae=e=>{var t=e,{apply:r}=t;return t.history={undos:[],redos:[]},t.redo=()=>{var{history:e}=t,{redos:r}=e;if(r.length>0){var n=r[r.length-1];n.selectionBefore&&Eoe.setSelection(t,n.selectionBefore),oae.withoutSaving(t,()=>{Rse.withoutNormalizing(t,()=>{for(var e of n.operations)t.apply(e)})}),e.redos.pop(),t.writeHistory("undos",n)}},t.undo=()=>{var{history:e}=t,{undos:r}=e;if(r.length>0){var n=r[r.length-1];oae.withoutSaving(t,()=>{Rse.withoutNormalizing(t,()=>{var e=n.operations.map(Bse.inverse).reverse();for(var r of e)t.apply(r);n.selectionBefore&&Eoe.setSelection(t,n.selectionBefore)})}),t.writeHistory("redos",n),e.undos.pop()}},t.apply=e=>{var{operations:n,history:i}=t,{undos:s}=i,o=s[s.length-1],a=o&&o.operations[o.operations.length-1],l=oae.isSaving(t),u=oae.isMerging(t);if(null==l&&(l=uae(e)),l){if(null==u&&(u=null!=o&&(0!==n.length||lae(e,a))),o&&u)o.operations.push(e);else{var c={operations:[e],selectionBefore:t.selection};t.writeHistory("undos",c)}for(;s.length>100;)s.shift();i.redos=[]}r(e)},t.writeHistory=(e,r)=>{t.history[e].push(r)},t},lae=(e,t)=>!(!t||"insert_text"!==e.type||"insert_text"!==t.type||e.offset!==t.offset+t.text.length||!use.equals(e.path,t.path))||!(!t||"remove_text"!==e.type||"remove_text"!==t.type||e.offset+e.text.length!==t.offset||!use.equals(e.path,t.path)),uae=(e,t)=>"set_selection"!==e.type,cae=Object.defineProperty,dae=Object.defineProperties,hae=Object.getOwnPropertyDescriptors,fae=Object.getOwnPropertySymbols,pae=Object.prototype.hasOwnProperty,mae=Object.prototype.propertyIsEnumerable,gae=(e,t,r)=>t in e?cae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,yae=(e,t)=>{for(var r in t||(t={}))pae.call(t,r)&&gae(e,r,t[r]);if(fae)for(var r of fae(t))mae.call(t,r)&&gae(e,r,t[r]);return e},vae=(e,t)=>()=>(console.warn(`[OVERRIDE_MISSING] The method editor.${e}() has not been implemented or overridden. This may cause unexpected behavior. Please ensure that all required editor methods are properly defined.`),t),_ae=()=>{const e=rae();return e.hasEditableTarget=vae("hasEditableTarget",!1),e.hasRange=vae("hasRange",!1),e.hasSelectableTarget=vae("hasSelectableTarget",!1),e.hasTarget=vae("hasTarget",!1),e.insertData=vae("insertData"),e.insertFragmentData=vae("insertFragmentData"),e.insertTextData=vae("insertTextData",!1),e.isTargetInsideNonReadonlyVoid=vae("isTargetInsideNonReadonlyVoid",!1),e.setFragmentData=vae("setFragmentData"),e.history={redos:[],undos:[]},e.undo=vae("undo"),e.redo=vae("redo"),e.writeHistory=vae("writeHistory"),e},bae=e=>Sse.isElement(e),wae=(e,t,r)=>!r||("object"==typeof r?Object.entries(r).every(([t,r])=>{const n=function(e){return Array.isArray(e)?e:[e]}(r);return n.includes(e[t])}):r(e,t)),xae=(e,t={})=>{const{block:r,match:n}=t;return((e,t)=>dae(e,hae(t)))(yae({},t),{match:n||r?(t,i)=>wae(t,i,n)&&(!r||((e,t)=>bae(t)&&Rse.isBlock(e,t))(e,t)):void 0})},Eae=(e,t)=>Rse.above(e,xae(e,t)),Sae=(e,t)=>(((e,t,r={})=>{const{unhang:n=!0,voids:i}=r;xse.isRange(t)&&n&&Rse.unhangRange(e,t,{voids:i})})(e,null==t?void 0:t.at,t),Rse.nodes(e,xae(e,t))),Cae=(e,t)=>{let r=!1;return Rse.withoutNormalizing(e,()=>{r=!!t()}),r},Aae=e=>$se.isText(e),Tae=(e,t)=>Eoe.removeNodes(e,t),Dae=(e,t)=>{Eoe.select(e,t)},kae=(e,t)=>Rse.end(e,t),Pae=(e,t)=>Rse.start(e,t),Bae=(e,t,r)=>{if(!t)return"";try{return Rse.string(e,t,r)}catch(Ove){return""}},Oae=e=>Rse.marks(e),Rae=(e,t)=>bae(t)&&Rse.isInline(e,t),Fae=(e,t,r)=>!!t&&Rse.isStart(e,t,r),Iae=e=>Dse.string(e),Mae=e=>Sse.isAncestor(e),Nae=e=>!!e&&xse.isExpanded(e);function Lae(e){return Array.isArray(e)?e:[e]}var Uae=(e,{allow:t,exclude:r,filter:n,level:i,maxLevel:s}={})=>{if(!e)return!1;const[o,a]=e;if(i&&!Lae(i).includes(a.length))return!1;if(s&&a.length>s)return!1;if(n&&!n(e))return!1;if(t){const e=Lae(t);if(e.length>0&&!e.includes(o.type))return!1}if(r){const e=Lae(r);if(e.length>0&&e.includes(o.type))return!1}return!0},jae=e("d7",(e,t,r={})=>{var n=r,{nextBlock:i,removeEmpty:s}=n,o=((e,t)=>{var r={};for(var n in e)pae.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&fae)for(var n of fae(e))t.indexOf(n)<0&&mae.call(e,n)&&(r[n]=e[n]);return r})(n,["nextBlock","removeEmpty"]);$oe(e,()=>{if(s){const t=Eae(e,{at:o.at});if(t){const r=!0===s?{allow:["p"]}:s,{filter:n}=r;r.filter=([t,r])=>!Iae(t)&&(!t.children.some(t=>Rae(e,t))&&(!n||n([t,r]))),Uae(t,r)&&(Joe(e,{at:t[1]}),i=!1)}}if(i){const{at:t=e.selection}=o;if(t){const r=kae(e,t),n=Eae(e,{at:r,block:!0});n&&(o.at=use.next(n[1]))}}Eoe.insertNodes(e,t,o)})}),zae=(e("dg",(e,t)=>{Eoe.move(e,t)}),e("d8",(e,t,r)=>Eoe.setNodes(e,t,r)),e("dh",(e,t={})=>{try{const r=Sae(e,yae({at:e.selection||[]},xae(e,t)));for(const[e,t]of r)return[e,t]}catch(r){return}})),Vae=(e,t)=>!!zae(e,t),Gae=function(){this.__data__=[],this.size=0},Hae=function(e,t){return e===t||e!=e&&t!=t},$ae=Hae,Wae=function(e,t){for(var r=e.length;r--;)if($ae(e[r][0],t))return r;return-1},qae=Wae,Xae=Array.prototype.splice,Yae=function(e){var t=this.__data__,r=qae(t,e);return!(r<0||(r==t.length-1?t.pop():Xae.call(t,r,1),--this.size,0))},Kae=Wae,Zae=function(e){var t=this.__data__,r=Kae(t,e);return r<0?void 0:t[r][1]},Jae=Wae,Qae=Wae,ele=function(e,t){var r=this.__data__,n=Qae(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},tle=Gae,rle=Yae,nle=Zae,ile=function(e){return Jae(this.__data__,e)>-1},sle=ele;function ole(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ole.prototype.clear=tle,ole.prototype.delete=rle,ole.prototype.get=nle,ole.prototype.has=ile,ole.prototype.set=sle;var ale=ole,lle=ale,ule=function(){this.__data__=new lle,this.size=0},cle=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},dle=function(e){return this.__data__.get(e)},hle=function(e){return this.__data__.has(e)},fle="object"==typeof n&&n&&n.Object===Object&&n,ple=fle,mle="object"==typeof self&&self&&self.Object===Object&&self,gle=ple||mle||Function("return this")(),yle=gle.Symbol,vle=yle,_le=Object.prototype,ble=_le.hasOwnProperty,wle=_le.toString,xle=vle?vle.toStringTag:void 0,Ele=function(e){var t=ble.call(e,xle),r=e[xle];try{e[xle]=void 0;var n=!0}catch(Ove){}var i=wle.call(e);return n&&(t?e[xle]=r:delete e[xle]),i},Sle=Object.prototype.toString,Cle=Ele,Ale=function(e){return Sle.call(e)},Tle=yle?yle.toStringTag:void 0,Dle=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Tle&&Tle in Object(e)?Cle(e):Ale(e)},kle=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},Ple=Dle,Ble=kle,Ole=function(e){if(!Ble(e))return!1;var t=Ple(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},Rle=gle["__core-js_shared__"],Fle=function(){var e=/[^.]+$/.exec(Rle&&Rle.keys&&Rle.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ile=function(e){return!!Fle&&Fle in e},Mle=Function.prototype.toString,Nle=function(e){if(null!=e){try{return Mle.call(e)}catch(Ove){}try{return e+""}catch(Ove){}}return""},Lle=Ole,Ule=Ile,jle=kle,zle=Nle,Vle=/^\[object .+?Constructor\]$/,Gle=Function.prototype,Hle=Object.prototype,$le=Gle.toString,Wle=Hle.hasOwnProperty,qle=RegExp("^"+$le.call(Wle).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xle=function(e){return!(!jle(e)||Ule(e))&&(Lle(e)?qle:Vle).test(zle(e))},Yle=function(e,t){return null==e?void 0:e[t]},Kle=function(e,t){var r=Yle(e,t);return Xle(r)?r:void 0},Zle=Kle(gle,"Map"),Jle=Kle(Object,"create"),Qle=Jle,eue=function(){this.__data__=Qle?Qle(null):{},this.size=0},tue=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},rue=Jle,nue=Object.prototype.hasOwnProperty,iue=function(e){var t=this.__data__;if(rue){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return nue.call(t,e)?t[e]:void 0},sue=Jle,oue=Object.prototype.hasOwnProperty,aue=Jle,lue=eue,uue=tue,cue=iue,due=function(e){var t=this.__data__;return sue?void 0!==t[e]:oue.call(t,e)},hue=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=aue&&void 0===t?"__lodash_hash_undefined__":t,this};function fue(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}fue.prototype.clear=lue,fue.prototype.delete=uue,fue.prototype.get=cue,fue.prototype.has=due,fue.prototype.set=hue;var pue=fue,mue=ale,gue=Zle,yue=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e},vue=yue,_ue=function(e,t){var r=e.__data__;return vue(t)?r["string"==typeof t?"string":"hash"]:r.map},bue=_ue,wue=_ue,xue=_ue,Eue=_ue,Sue=function(e,t){var r=Eue(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},Cue=function(){this.size=0,this.__data__={hash:new pue,map:new(gue||mue),string:new pue}},Aue=function(e){var t=bue(this,e).delete(e);return this.size-=t?1:0,t},Tue=function(e){return wue(this,e).get(e)},Due=function(e){return xue(this,e).has(e)},kue=Sue;function Pue(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Pue.prototype.clear=Cue,Pue.prototype.delete=Aue,Pue.prototype.get=Tue,Pue.prototype.has=Due,Pue.prototype.set=kue;var Bue=Pue,Oue=ale,Rue=Zle,Fue=Bue,Iue=ale,Mue=ule,Nue=cle,Lue=dle,Uue=hle,jue=function(e,t){var r=this.__data__;if(r instanceof Oue){var n=r.__data__;if(!Rue||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Fue(n)}return r.set(e,t),this.size=r.size,this};function zue(e){var t=this.__data__=new Iue(e);this.size=t.size}zue.prototype.clear=Mue,zue.prototype.delete=Nue,zue.prototype.get=Lue,zue.prototype.has=Uue,zue.prototype.set=jue;var Vue=zue,Gue=Kle,Hue=function(){try{var e=Gue(Object,"defineProperty");return e({},"",{}),e}catch(Ove){}}(),$ue=Hue,Wue=function(e,t,r){"__proto__"==t&&$ue?$ue(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r},que=Wue,Xue=Hae,Yue=function(e,t,r){(void 0!==r&&!Xue(e[t],r)||void 0===r&&!(t in e))&&que(e,t,r)},Kue=function(e){return function(t,r,n){for(var i=-1,s=Object(t),o=n(t),a=o.length;a--;){var l=o[e?a:++i];if(!1===r(s[l],l,s))break}return t}},Zue=Kue(),Jue={exports:{}};!function(e,t){var r=gle,n=t&&!t.nodeType&&t,i=n&&e&&!e.nodeType&&e,s=i&&i.exports===n?r.Buffer:void 0,o=s?s.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=o?o(r):new e.constructor(r);return e.copy(n),n}}(Jue,Jue.exports);var Que=Jue.exports,ece=gle.Uint8Array,tce=ece,rce=function(e){var t=new e.constructor(e.byteLength);return new tce(t).set(new tce(e)),t},nce=rce,ice=function(e,t){var r=t?nce(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)},sce=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t},oce=kle,ace=Object.create,lce=function(){function e(){}return function(t){if(!oce(t))return{};if(ace)return ace(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),uce=function(e,t){return function(r){return e(t(r))}},cce=uce(Object.getPrototypeOf,Object),dce=Object.prototype,hce=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||dce)},fce=lce,pce=cce,mce=hce,gce=function(e){return"function"!=typeof e.constructor||mce(e)?{}:fce(pce(e))},yce=function(e){return null!=e&&"object"==typeof e},vce=Dle,_ce=yce,bce=function(e){return _ce(e)&&"[object Arguments]"==vce(e)},wce=yce,xce=Object.prototype,Ece=xce.hasOwnProperty,Sce=xce.propertyIsEnumerable,Cce=bce(function(){return arguments}())?bce:function(e){return wce(e)&&Ece.call(e,"callee")&&!Sce.call(e,"callee")},Ace=Cce,Tce=Array.isArray,Dce=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},kce=Ole,Pce=Dce,Bce=function(e){return null!=e&&Pce(e.length)&&!kce(e)},Oce=Bce,Rce=yce,Fce=function(e){return Rce(e)&&Oce(e)},Ice={exports:{}},Mce=function(){return!1};!function(e,t){var r=gle,n=Mce,i=t&&!t.nodeType&&t,s=i&&e&&!e.nodeType&&e,o=s&&s.exports===i?r.Buffer:void 0,a=(o?o.isBuffer:void 0)||n;e.exports=a}(Ice,Ice.exports);var Nce=Ice.exports,Lce=Dle,Uce=cce,jce=yce,zce=Function.prototype,Vce=Object.prototype,Gce=zce.toString,Hce=Vce.hasOwnProperty,$ce=Gce.call(Object),Wce=function(e){if(!jce(e)||"[object Object]"!=Lce(e))return!1;var t=Uce(e);if(null===t)return!0;var r=Hce.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Gce.call(r)==$ce},qce=Dle,Xce=Dce,Yce=yce,Kce={};Kce["[object Float32Array]"]=Kce["[object Float64Array]"]=Kce["[object Int8Array]"]=Kce["[object Int16Array]"]=Kce["[object Int32Array]"]=Kce["[object Uint8Array]"]=Kce["[object Uint8ClampedArray]"]=Kce["[object Uint16Array]"]=Kce["[object Uint32Array]"]=!0,Kce["[object Arguments]"]=Kce["[object Array]"]=Kce["[object ArrayBuffer]"]=Kce["[object Boolean]"]=Kce["[object DataView]"]=Kce["[object Date]"]=Kce["[object Error]"]=Kce["[object Function]"]=Kce["[object Map]"]=Kce["[object Number]"]=Kce["[object Object]"]=Kce["[object RegExp]"]=Kce["[object Set]"]=Kce["[object String]"]=Kce["[object WeakMap]"]=!1;var Zce=function(e){return Yce(e)&&Xce(e.length)&&!!Kce[qce(e)]},Jce=function(e){return function(t){return e(t)}},Qce={exports:{}};!function(e,t){var r=fle,n=t&&!t.nodeType&&t,i=n&&e&&!e.nodeType&&e,s=i&&i.exports===n&&r.process,o=function(){try{var e=i&&i.require&&i.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(Ove){}}();e.exports=o}(Qce,Qce.exports);var ede=Qce.exports,tde=Zce,rde=Jce,nde=ede&&ede.isTypedArray,ide=nde?rde(nde):tde,sde=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},ode=Wue,ade=Hae,lde=Object.prototype.hasOwnProperty,ude=function(e,t,r){var n=e[t];lde.call(e,t)&&ade(n,r)&&(void 0!==r||t in e)||ode(e,t,r)},cde=ude,dde=Wue,hde=function(e,t,r,n){var i=!r;r||(r={});for(var s=-1,o=t.length;++s<o;){var a=t[s],l=n?n(r[a],e[a],a,r,e):void 0;void 0===l&&(l=e[a]),i?dde(r,a,l):cde(r,a,l)}return r},fde=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n},pde=/^(?:0|[1-9]\d*)$/,mde=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&pde.test(e))&&e>-1&&e%1==0&&e<t},gde=fde,yde=Ace,vde=Tce,_de=Nce,bde=mde,wde=ide,xde=Object.prototype.hasOwnProperty,Ede=function(e,t){var r=vde(e),n=!r&&yde(e),i=!r&&!n&&_de(e),s=!r&&!n&&!i&&wde(e),o=r||n||i||s,a=o?gde(e.length,String):[],l=a.length;for(var u in e)!t&&!xde.call(e,u)||o&&("length"==u||i&&("offset"==u||"parent"==u)||s&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||bde(u,l))||a.push(u);return a},Sde=kle,Cde=hce,Ade=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t},Tde=Object.prototype.hasOwnProperty,Dde=Ede,kde=function(e){if(!Sde(e))return Ade(e);var t=Cde(e),r=[];for(var n in e)("constructor"!=n||!t&&Tde.call(e,n))&&r.push(n);return r},Pde=Bce,Bde=function(e){return Pde(e)?Dde(e,!0):kde(e)},Ode=hde,Rde=Bde,Fde=Yue,Ide=Que,Mde=ice,Nde=sce,Lde=gce,Ude=Ace,jde=Tce,zde=Fce,Vde=Nce,Gde=Ole,Hde=kle,$de=Wce,Wde=ide,qde=sde,Xde=function(e){return Ode(e,Rde(e))},Yde=Vue,Kde=Yue,Zde=Zue,Jde=function(e,t,r,n,i,s,o){var a=qde(e,r),l=qde(t,r),u=o.get(l);if(u)Fde(e,r,u);else{var c=s?s(a,l,r+"",e,t,o):void 0,d=void 0===c;if(d){var h=jde(l),f=!h&&Vde(l),p=!h&&!f&&Wde(l);c=l,h||f||p?jde(a)?c=a:zde(a)?c=Nde(a):f?(d=!1,c=Ide(l,!0)):p?(d=!1,c=Mde(l,!0)):c=[]:$de(l)||Ude(l)?(c=a,Ude(a)?c=Xde(a):Hde(a)&&!Gde(a)||(c=Lde(l))):d=!1}d&&(o.set(l,c),i(c,l,n,s,o),o.delete(l)),Fde(e,r,c)}},Qde=kle,ehe=Bde,the=sde,rhe=function e(t,r,n,i,s){t!==r&&Zde(r,function(o,a){if(s||(s=new Yde),Qde(o))Jde(t,r,a,n,e,i,s);else{var l=i?i(the(t,a),o,a+"",t,r,s):void 0;void 0===l&&(l=o),Kde(t,a,l)}},ehe)},nhe=function(e){return e},ihe=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)},she=ihe,ohe=Math.max,ahe=function(e,t,r){return t=ohe(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,s=ohe(n.length-t,0),o=Array(s);++i<s;)o[i]=n[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=n[i];return a[t]=r(o),she(e,this,a)}},lhe=function(e){return function(){return e}},uhe=Hue,che=uhe?function(e,t){return uhe(e,"toString",{configurable:!0,enumerable:!1,value:lhe(t),writable:!0})}:nhe,dhe=che,hhe=Date.now,fhe=function(e){var t=0,r=0;return function(){var n=hhe(),i=16-(n-r);if(r=n,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}},phe=fhe(dhe),mhe=nhe,ghe=ahe,yhe=phe,vhe=function(e,t){return yhe(ghe(e,t,mhe),e+"")},_he=Hae,bhe=Bce,whe=mde,xhe=kle,Ehe=function(e,t,r){if(!xhe(r))return!1;var n=typeof t;return!!("number"==n?bhe(r)&&whe(t,r.length):"string"==n&&t in r)&&_he(r[t],e)},She=vhe,Che=Ehe,Ahe=function(e){return She(function(t,r){var n=-1,i=r.length,s=i>1?r[i-1]:void 0,o=i>2?r[2]:void 0;for(s=e.length>3&&"function"==typeof s?(i--,s):void 0,o&&Che(r[0],r[1],o)&&(s=i<3?void 0:s,i=1),t=Object(t);++n<i;){var a=r[n];a&&e(t,a,n,s)}return t})},The=rhe,Dhe=Ahe(function(e,t,r,n){The(e,t,r,n)});const khe=s(Dhe);var Phe={};Object.defineProperty(Phe,"__esModule",{value:!0});for(var Bhe="undefined"!=typeof window&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),Ohe={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},Rhe={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:Bhe?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},Fhe={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},Ihe=1;Ihe<20;Ihe++)Fhe["f"+Ihe]=111+Ihe;function Mhe(e,t,r){t&&!("byKey"in t)&&(r=t,t=null),Array.isArray(e)||(e=[e]);var n=e.map(function(e){return Nhe(e,t)}),i=function(e){return n.some(function(t){return Lhe(t,e)})};return null==r?i:i(r)}function Nhe(e,t){var r=t&&t.byKey,n={},i=(e=e.replace("++","+add")).split("+"),s=i.length;for(var o in Ohe)n[Ohe[o]]=!1;var a=!0,l=!1,u=void 0;try{for(var c,d=i[Symbol.iterator]();!(a=(c=d.next()).done);a=!0){var h=c.value,f=h.endsWith("?")&&h.length>1;f&&(h=h.slice(0,-1));var p=jhe(h),m=Ohe[p];if(h.length>1&&!m&&!Rhe[h]&&!Fhe[p])throw new TypeError('Unknown modifier: "'+h+'"');1!==s&&m||(r?n.key=p:n.which=Uhe(h)),m&&(n[m]=!f||null)}}catch(mke){l=!0,u=mke}finally{try{!a&&d.return&&d.return()}finally{if(l)throw u}}return n}function Lhe(e,t){for(var r in e){var n=e[r],i=void 0;if(null!=n&&(null!=(i="key"===r&&null!=t.key?t.key.toLowerCase():"which"===r?91===n&&93===t.which?91:t.which:t[r])||!1!==n)&&i!==n)return!1}return!0}function Uhe(e){return e=jhe(e),Fhe[e]||e.toUpperCase().charCodeAt(0)}function jhe(e){return e=e.toLowerCase(),e=Rhe[e]||e}Phe.default=Mhe;var zhe=Phe.isHotkey=Mhe;Phe.isCodeHotkey=function(e,t){return Mhe(e,t)};var Vhe=Phe.isKeyHotkey=function(e,t){return Mhe(e,{byKey:!0},t)};Phe.parseHotkey=Nhe,Phe.compareHotkey=Lhe,Phe.toKeyCode=Uhe,Phe.toKeyName=jhe;var Ghe=rhe;const Hhe=s(Ahe(function(e,t,r){Ghe(e,t,r)}));var $he=Tce,Whe=function(){if(!arguments.length)return[];var e=arguments[0];return $he(e)?e:[e]};const qhe=s(Whe);var Xhe=function(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i},Yhe=Bue,Khe=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Zhe=function(e){return this.__data__.has(e)};function Jhe(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Yhe;++t<r;)this.add(e[t])}Jhe.prototype.add=Jhe.prototype.push=Khe,Jhe.prototype.has=Zhe;var Qhe=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1},efe=function(e,t){return e.has(t)},tfe=Jhe,rfe=Qhe,nfe=efe,ife=function(e,t,r,n,i,s){var o=1&r,a=e.length,l=t.length;if(a!=l&&!(o&&l>a))return!1;var u=s.get(e),c=s.get(t);if(u&&c)return u==t&&c==e;var d=-1,h=!0,f=2&r?new tfe:void 0;for(s.set(e,t),s.set(t,e);++d<a;){var p=e[d],m=t[d];if(n)var g=o?n(m,p,d,t,e,s):n(p,m,d,e,t,s);if(void 0!==g){if(g)continue;h=!1;break}if(f){if(!rfe(t,function(e,t){if(!nfe(f,t)&&(p===e||i(p,e,r,n,s)))return f.push(t)})){h=!1;break}}else if(p!==m&&!i(p,m,r,n,s)){h=!1;break}}return s.delete(e),s.delete(t),h},sfe=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r},ofe=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r},afe=ece,lfe=Hae,ufe=ife,cfe=sfe,dfe=ofe,hfe=yle?yle.prototype:void 0,ffe=hfe?hfe.valueOf:void 0,pfe=function(e,t,r,n,i,s,o){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!s(new afe(e),new afe(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return lfe(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var a=cfe;case"[object Set]":var l=1&n;if(a||(a=dfe),e.size!=t.size&&!l)return!1;var u=o.get(e);if(u)return u==t;n|=2,o.set(e,t);var c=ufe(a(e),a(t),n,i,s,o);return o.delete(e),c;case"[object Symbol]":if(ffe)return ffe.call(e)==ffe.call(t)}return!1},mfe=function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e},gfe=mfe,yfe=Tce,vfe=function(e,t,r){var n=t(e);return yfe(e)?n:gfe(n,r(e))},_fe=function(e,t){for(var r=-1,n=null==e?0:e.length,i=0,s=[];++r<n;){var o=e[r];t(o,r,e)&&(s[i++]=o)}return s},bfe=function(){return[]},wfe=_fe,xfe=bfe,Efe=Object.prototype.propertyIsEnumerable,Sfe=Object.getOwnPropertySymbols,Cfe=Sfe?function(e){return null==e?[]:(e=Object(e),wfe(Sfe(e),function(t){return Efe.call(e,t)}))}:xfe,Afe=uce(Object.keys,Object),Tfe=hce,Dfe=Afe,kfe=Object.prototype.hasOwnProperty,Pfe=Ede,Bfe=function(e){if(!Tfe(e))return Dfe(e);var t=[];for(var r in Object(e))kfe.call(e,r)&&"constructor"!=r&&t.push(r);return t},Ofe=Bce,Rfe=function(e){return Ofe(e)?Pfe(e):Bfe(e)},Ffe=vfe,Ife=Cfe,Mfe=Rfe,Nfe=function(e){return Ffe(e,Mfe,Ife)},Lfe=Nfe,Ufe=Object.prototype.hasOwnProperty,jfe=function(e,t,r,n,i,s){var o=1&r,a=Lfe(e),l=a.length;if(l!=Lfe(t).length&&!o)return!1;for(var u=l;u--;){var c=a[u];if(!(o?c in t:Ufe.call(t,c)))return!1}var d=s.get(e),h=s.get(t);if(d&&h)return d==t&&h==e;var f=!0;s.set(e,t),s.set(t,e);for(var p=o;++u<l;){var m=e[c=a[u]],g=t[c];if(n)var y=o?n(g,m,c,t,e,s):n(m,g,c,e,t,s);if(!(void 0===y?m===g||i(m,g,r,n,s):y)){f=!1;break}p||(p="constructor"==c)}if(f&&!p){var v=e.constructor,_=t.constructor;v==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof _&&_ instanceof _||(f=!1)}return s.delete(e),s.delete(t),f},zfe=Kle(gle,"DataView"),Vfe=Zle,Gfe=Kle(gle,"Promise"),Hfe=Kle(gle,"Set"),$fe=Kle(gle,"WeakMap"),Wfe=Dle,qfe=Nle,Xfe="[object Map]",Yfe="[object Promise]",Kfe="[object Set]",Zfe="[object WeakMap]",Jfe="[object DataView]",Qfe=qfe(zfe),epe=qfe(Vfe),tpe=qfe(Gfe),rpe=qfe(Hfe),npe=qfe($fe),ipe=Wfe;(zfe&&ipe(new zfe(new ArrayBuffer(1)))!=Jfe||Vfe&&ipe(new Vfe)!=Xfe||Gfe&&ipe(Gfe.resolve())!=Yfe||Hfe&&ipe(new Hfe)!=Kfe||$fe&&ipe(new $fe)!=Zfe)&&(ipe=function(e){var t=Wfe(e),r="[object Object]"==t?e.constructor:void 0,n=r?qfe(r):"";if(n)switch(n){case Qfe:return Jfe;case epe:return Xfe;case tpe:return Yfe;case rpe:return Kfe;case npe:return Zfe}return t});var spe=ipe,ope=Vue,ape=ife,lpe=pfe,upe=jfe,cpe=spe,dpe=Tce,hpe=Nce,fpe=ide,ppe="[object Arguments]",mpe="[object Array]",gpe="[object Object]",ype=Object.prototype.hasOwnProperty,vpe=function(e,t,r,n,i,s){var o=dpe(e),a=dpe(t),l=o?mpe:cpe(e),u=a?mpe:cpe(t),c=(l=l==ppe?gpe:l)==gpe,d=(u=u==ppe?gpe:u)==gpe,h=l==u;if(h&&hpe(e)){if(!hpe(t))return!1;o=!0,c=!1}if(h&&!c)return s||(s=new ope),o||fpe(e)?ape(e,t,r,n,i,s):lpe(e,t,l,r,n,i,s);if(!(1&r)){var f=c&&ype.call(e,"__wrapped__"),p=d&&ype.call(t,"__wrapped__");if(f||p){var m=f?e.value():e,g=p?t.value():t;return s||(s=new ope),i(m,g,r,n,s)}}return!!h&&(s||(s=new ope),upe(e,t,r,n,i,s))},_pe=yce,bpe=function e(t,r,n,i,s){return t===r||(null==t||null==r||!_pe(t)&&!_pe(r)?t!=t&&r!=r:vpe(t,r,n,i,e,s))},wpe=Dle,xpe=yce,Epe=function(e){return"symbol"==typeof e||xpe(e)&&"[object Symbol]"==wpe(e)},Spe=Tce,Cpe=Epe,Ape=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Tpe=/^\w*$/,Dpe=function(e,t){if(Spe(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!Cpe(e))||Tpe.test(e)||!Ape.test(e)||null!=t&&e in Object(t)},kpe=Bue;function Ppe(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var o=e.apply(this,n);return r.cache=s.set(i,o)||s,o};return r.cache=new(Ppe.Cache||kpe),r}Ppe.Cache=kpe;var Bpe=Ppe,Ope=function(e){var t=Bpe(e,function(e){return 500===r.size&&r.clear(),e}),r=t.cache;return t},Rpe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Fpe=/\\(\\)?/g,Ipe=Ope(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Rpe,function(e,r,n,i){t.push(n?i.replace(Fpe,"$1"):r||e)}),t}),Mpe=Ipe,Npe=Xhe,Lpe=Tce,Upe=Epe,jpe=yle?yle.prototype:void 0,zpe=jpe?jpe.toString:void 0,Vpe=function e(t){if("string"==typeof t)return t;if(Lpe(t))return Npe(t,e)+"";if(Upe(t))return zpe?zpe.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r},Gpe=Vpe,Hpe=Tce,$pe=Dpe,Wpe=Mpe,qpe=function(e){return null==e?"":Gpe(e)},Xpe=function(e,t){return Hpe(e)?e:$pe(e,t)?[e]:Wpe(qpe(e))},Ype=Epe,Kpe=function(e){if("string"==typeof e||Ype(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},Zpe=Xpe,Jpe=Kpe,Qpe=function(e,t){for(var r=0,n=(t=Zpe(t,e)).length;null!=e&&r<n;)e=e[Jpe(t[r++])];return r&&r==n?e:void 0},eme=Xpe,tme=Ace,rme=Tce,nme=mde,ime=Dce,sme=Kpe,ome=function(e,t,r){for(var n=-1,i=(t=eme(t,e)).length,s=!1;++n<i;){var o=sme(t[n]);if(!(s=null!=e&&r(e,o)))break;e=e[o]}return s||++n!=i?s:!!(i=null==e?0:e.length)&&ime(i)&&nme(o,i)&&(rme(e)||tme(e))},ame=function(e,t){return null!=e&&t in Object(e)},lme=ome,ume=function(e,t){return null!=e&&lme(e,t,ame)},cme=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0},dme=Object.defineProperty,hme=Object.defineProperties,fme=Object.getOwnPropertyDescriptors,pme=Object.getOwnPropertySymbols,mme=Object.prototype.hasOwnProperty,gme=Object.prototype.propertyIsEnumerable,yme=(e,t,r)=>t in e?dme(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,vme=(e,t)=>{for(var r in t||(t={}))mme.call(t,r)&&yme(e,r,t[r]);if(pme)for(var r of pme(t))gme.call(t,r)&&yme(e,r,t[r]);return e},_me=(e,t)=>hme(e,fme(t)),bme=(e,t={})=>Eae(e,_me(vme({},t),{block:!0})),wme=e=>{var t;const r=null==(t=bme(e))?void 0:t[0];return!!r&&((e,t)=>!Iae(t)&&!t.children.some(t=>Rae(e,t)))(e,r)},xme=(e,t)=>Zre(((e,t)=>{if(!e)return;const r=Oae(e);return null==r?void 0:r[t]})(e,t)),Eme=(e,t)=>{var r;const{selection:n}=e;if(!n)return!1;const i=null==(r=bme(e,t))?void 0:r[1];return!!i&&(Fae(e,n.focus,i)||Nae(e.selection)&&Fae(e,n.anchor,i))},Sme=(e,t)=>{var r,n=t,{key:i,at:s,shouldChange:o=!0}=n,a=((e,t)=>{var r={};for(var n in e)mme.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&pme)for(var n of pme(e))t.indexOf(n)<0&&gme.call(e,n)&&(r[n]=e[n]);return r})(n,["key","at","shouldChange"]);const l=null!=s?s:e.selection;if(i=qhe(i),l)if(xse.isRange(l)&&xse.isExpanded(l))((e,t,r)=>{Eoe.unsetNodes(e,t,r)})(e,i,vme({at:l,match:Aae,split:!0},a));else if(e.selection){const t=null!=(r=Oae(e))?r:{};i.forEach(e=>{delete t[e]}),e.marks=t,o&&e.onChange()}},Cme=(e,t,r)=>{Cae(e,()=>{for(const[,n]of((e,t,r)=>Dse.children(e,t,r))(e,t,{reverse:!0}))Tae(e,_me(vme({},r),{at:n}))})},Ame=e=>{const t=Oae(e);t&&Object.keys(t).forEach(t=>{((e,t)=>{Rse.removeMark(e,t)})(e,t)})},Tme=(e,{at:t,insertOptions:r,nodes:n,removeOptions:i})=>{Cae(e,()=>{Cme(e,t,i),jae(e,n,_me(vme({},r),{at:t.concat([0])}))})},Dme=(e,{key:t,clear:r})=>{e.selection&&Cae(e,()=>{if(xme(e,t))e.removeMark(t);else{if(r){const t=qhe(r);Sme(e,{key:t})}e.addMark(t,!0)}})};function kme(e){return kme="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kme(e)}function Pme(e){var t=function(e,t){if("object"!==kme(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==kme(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===kme(t)?t:String(t)}function Bme(e,t,r){return(t=Pme(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ome=new WeakMap,Rme=new WeakMap;class Fme{}class Ime extends Fme{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),Bme(this,"offset",void 0),Bme(this,"path",void 0);var{offset:t,path:r}=e;this.offset=t,this.path=r}}class Mme extends Fme{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),Bme(this,"offset",void 0),Bme(this,"path",void 0);var{offset:t,path:r}=e;this.offset=t,this.path=r}}var Nme=e=>Ome.get(e),Lme=e=>Rme.get(e);function Ume(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function jme(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ume(Object(r),!0).forEach(function(t){Bme(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ume(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var zme=new WeakSet,Vme=e=>{var t=[],r=e=>{if(null!=e){var n=t[t.length-1];if("string"==typeof e){var i={text:e};zme.add(i),e=i}if($se.isText(e)){var s=e;$se.isText(n)&&zme.has(n)&&zme.has(s)&&$se.equals(n,s,{loose:!0})?n.text+=s.text:t.push(s)}else if(Sse.isElement(e))t.push(e);else{if(!(e instanceof Fme))throw new Error("Unexpected hyperscript child object: ".concat(e));var o=t[t.length-1];$se.isText(o)||(r(""),o=t[t.length-1]),e instanceof Ime?((e,t)=>{var r=e.text.length;Ome.set(e,[r,t])})(o,e):e instanceof Mme&&((e,t)=>{var r=e.text.length;Rme.set(e,[r,t])})(o,e)}}};for(var n of e.flat(1/0))r(n);return t};function Gme(e,t,r){return jme(jme({},t),{},{children:Vme(r)})}function Hme(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function $me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hme(Object(r),!0).forEach(function(t){Bme(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hme(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Wme,qme={anchor:function(e,t,r){return new Ime(t)},cursor:function(e,t,r){return[new Ime(t),new Mme(t)]},editor:(Wme=rae,(e,t,r)=>{var n,i=[];for(var s of r)xse.isRange(s)?n=s:i.push(s);var o=Vme(i),a={},l=Wme();for(var[u,c]of(Object.assign(l,t),l.children=o,Dse.texts(l))){var d=Nme(u),h=Lme(u);if(null!=d){var[f]=d;a.anchor={path:c,offset:f}}if(null!=h){var[p]=h;a.focus={path:c,offset:p}}}if(a.anchor&&!a.focus)throw new Error("Slate hyperscript ranges must have both `<anchor />` and `<focus />` defined if one is defined, but you only defined `<anchor />`. For collapsed selections, use `<cursor />` instead.");if(!a.anchor&&a.focus)throw new Error("Slate hyperscript ranges must have both `<anchor />` and `<focus />` defined if one is defined, but you only defined `<focus />`. For collapsed selections, use `<cursor />` instead.");return null!=n?l.selection=n:xse.isRange(a)&&(l.selection=a),l}),element:Gme,focus:function(e,t,r){return new Mme(t)},fragment:function(e,t,r){return Vme(r)},selection:function(e,t,r){var n=r.find(e=>e instanceof Ime),i=r.find(e=>e instanceof Mme);if(!n||null==n.offset||null==n.path)throw new Error("The <selection> hyperscript tag must have an <anchor> tag as a child with `path` and `offset` attributes defined.");if(!i||null==i.offset||null==i.path)throw new Error("The <selection> hyperscript tag must have a <focus> tag as a child with `path` and `offset` attributes defined.");return jme({anchor:{offset:n.offset,path:n.path},focus:{offset:i.offset,path:i.path}},t)},text:function(e,t,r){var n=Vme(r);if(n.length>1)throw new Error("The <text> hyperscript tag must only contain a single node's worth of children.");var[i]=n;if(null==i&&(i={text:""}),!$se.isText(i))throw new Error("\n    The <text> hyperscript tag can only contain text content as children.");return zme.delete(i),Object.assign(i,t),i}},Xme=e=>function(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];var o=e[t];if(!o)throw new Error("No hyperscript creator found for tag: <".concat(t,">"));return null==r&&(r={}),Jie(r)||(i=[r].concat(i),r={}),o(t,r,i=i.filter(e=>Boolean(e)).flat())},Yme=e=>{var t={},r=function(){var r=e[n];if("object"!=typeof r)throw new Error("Properties specified for a hyperscript shorthand should be an object, but for the custom element <".concat(n,">  tag you passed: ").concat(r));t[n]=(e,t,n)=>Gme(0,$me($me({},r),t),n)};for(var n in e)r();return t},Kme=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{elements:t={}}=e,r=Yme(t),n=$me($me($me({},qme),r),e.creators);return Xme(n)}(),Zme=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e},Jme=hde,Qme=Rfe,ege=function(e,t){return e&&Jme(t,Qme(t),e)},tge=hde,rge=Bde,nge=function(e,t){return e&&tge(t,rge(t),e)},ige=hde,sge=Cfe,oge=function(e,t){return ige(e,sge(e),t)},age=mfe,lge=cce,uge=Cfe,cge=bfe,dge=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)age(t,uge(e)),e=lge(e);return t}:cge,hge=hde,fge=dge,pge=function(e,t){return hge(e,fge(e),t)},mge=vfe,gge=dge,yge=Bde,vge=function(e){return mge(e,yge,gge)},_ge=Object.prototype.hasOwnProperty,bge=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&_ge.call(e,"index")&&(r.index=e.index,r.input=e.input),r},wge=rce,xge=function(e,t){var r=t?wge(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)},Ege=/\w*$/,Sge=function(e){var t=new e.constructor(e.source,Ege.exec(e));return t.lastIndex=e.lastIndex,t},Cge=yle?yle.prototype:void 0,Age=Cge?Cge.valueOf:void 0,Tge=rce,Dge=xge,kge=Sge,Pge=function(e){return Age?Object(Age.call(e)):{}},Bge=ice,Oge=function(e,t,r){var n=e.constructor;switch(t){case"[object ArrayBuffer]":return Tge(e);case"[object Boolean]":case"[object Date]":return new n(+e);case"[object DataView]":return Dge(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Bge(e,r);case"[object Map]":case"[object Set]":return new n;case"[object Number]":case"[object String]":return new n(e);case"[object RegExp]":return kge(e);case"[object Symbol]":return Pge(e)}},Rge=spe,Fge=yce,Ige=function(e){return Fge(e)&&"[object Map]"==Rge(e)},Mge=Jce,Nge=ede&&ede.isMap,Lge=Nge?Mge(Nge):Ige,Uge=spe,jge=yce,zge=function(e){return jge(e)&&"[object Set]"==Uge(e)},Vge=Jce,Gge=ede&&ede.isSet,Hge=Gge?Vge(Gge):zge,$ge=Vue,Wge=Zme,qge=ude,Xge=ege,Yge=nge,Kge=Que,Zge=sce,Jge=oge,Qge=pge,eye=Nfe,tye=vge,rye=spe,nye=bge,iye=Oge,sye=gce,oye=Tce,aye=Nce,lye=Lge,uye=kle,cye=Hge,dye=Rfe,hye=Bde,fye="[object Arguments]",pye="[object Function]",mye="[object Object]",gye={};gye[fye]=gye["[object Array]"]=gye["[object ArrayBuffer]"]=gye["[object DataView]"]=gye["[object Boolean]"]=gye["[object Date]"]=gye["[object Float32Array]"]=gye["[object Float64Array]"]=gye["[object Int8Array]"]=gye["[object Int16Array]"]=gye["[object Int32Array]"]=gye["[object Map]"]=gye["[object Number]"]=gye[mye]=gye["[object RegExp]"]=gye["[object Set]"]=gye["[object String]"]=gye["[object Symbol]"]=gye["[object Uint8Array]"]=gye["[object Uint8ClampedArray]"]=gye["[object Uint16Array]"]=gye["[object Uint32Array]"]=!0,gye["[object Error]"]=gye[pye]=gye["[object WeakMap]"]=!1;var yye=function e(t,r,n,i,s,o){var a,l=1&r,u=2&r,c=4&r;if(n&&(a=s?n(t,i,s,o):n(t)),void 0!==a)return a;if(!uye(t))return t;var d=oye(t);if(d){if(a=nye(t),!l)return Zge(t,a)}else{var h=rye(t),f=h==pye||"[object GeneratorFunction]"==h;if(aye(t))return Kge(t,l);if(h==mye||h==fye||f&&!s){if(a=u||f?{}:sye(t),!l)return u?Qge(t,Yge(a,t)):Jge(t,Xge(a,t))}else{if(!gye[h])return s?t:{};a=iye(t,h,l)}}o||(o=new $ge);var p=o.get(t);if(p)return p;o.set(t,a),cye(t)?t.forEach(function(i){a.add(e(i,r,n,i,t,o))}):lye(t)&&t.forEach(function(i,s){a.set(s,e(i,r,n,s,t,o))});var m=d?void 0:(c?u?tye:eye:u?hye:dye)(t);return Wge(m||t,function(i,s){m&&(i=t[s=i]),qge(a,s,e(i,r,n,s,t,o))}),a},vye=yye;const _ye=s(function(e){return vye(e,5)});var bye=bpe;const wye=s(function(e,t){return bye(e,t)}),xye=Symbol(),Eye=Symbol(),Sye="a",Cye="w",Aye=Object.getPrototypeOf,Tye=new WeakMap,Dye=e=>e&&(Tye.has(e)?Tye.get(e):Aye(e)===Object.prototype||Aye(e)===Array.prototype),kye=e=>"object"==typeof e&&null!==e,Pye=e=>{if(Array.isArray(e))return Array.from(e);const t=Object.getOwnPropertyDescriptors(e);return Object.values(t).forEach(e=>{e.configurable=!0}),Object.create(Aye(e),t)},Bye=e=>e[Eye]||e,Oye=(e,t,r,n)=>{if(!Dye(e))return e;let i=n&&n.get(e);if(!i){const t=Bye(e);i=(e=>Object.values(Object.getOwnPropertyDescriptors(e)).some(e=>!e.configurable&&!e.writable))(t)?[t,Pye(t)]:[t],null==n||n.set(e,i)}const[s,o]=i;let a=r&&r.get(s);return a&&a[1].f===!!o||(a=((e,t)=>{const r={f:t};let n=!1;const i=(t,i)=>{if(!n){let n=r[Sye].get(e);if(n||(n={},r[Sye].set(e,n)),t===Cye)n[Cye]=!0;else{let e=n[t];e||(e=new Set,n[t]=e),e.add(i)}}},s={get:(t,n)=>n===Eye?e:(i("k",n),Oye(Reflect.get(t,n),r[Sye],r.c,r.t)),has:(t,s)=>s===xye?(n=!0,r[Sye].delete(e),!0):(i("h",s),Reflect.has(t,s)),getOwnPropertyDescriptor:(e,t)=>(i("o",t),Reflect.getOwnPropertyDescriptor(e,t)),ownKeys:e=>(i(Cye),Reflect.ownKeys(e))};return t&&(s.set=s.deleteProperty=()=>!1),[s,r]})(s,!!o),a[1].p=((e,t)=>new Proxy(e,t))(o||s,a[0]),r&&r.set(s,a)),a[1][Sye]=t,a[1].c=r,a[1].t=n,a[1].p},Rye=(e,t,r,n,i=Object.is)=>{if(i(e,t))return!1;if(!kye(e)||!kye(t))return!0;const s=r.get(Bye(e));if(!s)return!0;if(n){const r=n.get(e);if(r&&r.n===t)return r.g;n.set(e,{n:t,g:!1})}let o=null;try{for(const r of s.h||[])if(o=Reflect.has(e,r)!==Reflect.has(t,r),o)return o;if(!0===s[Cye]){if(o=((e,t)=>{const r=Reflect.ownKeys(e),n=Reflect.ownKeys(t);return r.length!==n.length||r.some((e,t)=>e!==n[t])})(e,t),o)return o}else for(const r of s.o||[])if(o=!!Reflect.getOwnPropertyDescriptor(e,r)!=!!Reflect.getOwnPropertyDescriptor(t,r),o)return o;for(const a of s.k||[])if(o=Rye(e[a],t[a],r,n,i),o)return o;return null===o&&(o=!0),o}finally{n&&n.set(e,{n:t,g:o})}},{useDebugValue:Fye}=W,{useSyncExternalStoreWithSelector:Iye}=$p,Mye=e=>e;var Nye={exports:{}};!function(e,t){var r="__lodash_hash_undefined__",i=9007199254740991,s="[object Arguments]",o="[object Array]",a="[object Boolean]",l="[object Date]",u="[object Error]",c="[object Function]",d="[object Map]",h="[object Number]",f="[object Object]",p="[object Promise]",m="[object RegExp]",g="[object Set]",y="[object String]",v="[object Symbol]",_="[object WeakMap]",b="[object ArrayBuffer]",w="[object DataView]",x=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,E=/^\w*$/,S=/^\./,C=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,A=/\\(\\)?/g,T=/^\[object .+?Constructor\]$/,D=/^(?:0|[1-9]\d*)$/,k={};k["[object Float32Array]"]=k["[object Float64Array]"]=k["[object Int8Array]"]=k["[object Int16Array]"]=k["[object Int32Array]"]=k["[object Uint8Array]"]=k["[object Uint8ClampedArray]"]=k["[object Uint16Array]"]=k["[object Uint32Array]"]=!0,k[s]=k[o]=k[b]=k[a]=k[w]=k[l]=k[u]=k[c]=k[d]=k[h]=k[f]=k[m]=k[g]=k[y]=k[_]=!1;var P="object"==typeof n&&n&&n.Object===Object&&n,B="object"==typeof self&&self&&self.Object===Object&&self,O=P||B||Function("return this")(),R=t&&!t.nodeType&&t,F=R&&e&&!e.nodeType&&e,I=F&&F.exports===R&&P.process,M=function(){try{return I&&I.binding("util")}catch(Ove){}}(),N=M&&M.isTypedArray;function L(e,t){for(var r=-1,n=e?e.length:0;++r<n;)if(t(e[r],r,e))return!0;return!1}function U(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(Ove){}return t}function j(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function z(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}var V,G,H=Array.prototype,$=Function.prototype,W=Object.prototype,q=O["__core-js_shared__"],X=function(){var e=/[^.]+$/.exec(q&&q.keys&&q.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Y=$.toString,K=W.hasOwnProperty,Z=W.toString,J=RegExp("^"+Y.call(K).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Q=O.Symbol,ee=O.Uint8Array,te=W.propertyIsEnumerable,re=H.splice,ne=(V=Object.keys,G=Object,function(e){return V(G(e))}),ie=Ie(O,"DataView"),se=Ie(O,"Map"),oe=Ie(O,"Promise"),ae=Ie(O,"Set"),le=Ie(O,"WeakMap"),ue=Ie(Object,"create"),ce=Ge(ie),de=Ge(se),he=Ge(oe),fe=Ge(ae),pe=Ge(le),me=Q?Q.prototype:void 0,ge=me?me.valueOf:void 0,ye=me?me.toString:void 0;function ve(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function _e(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function be(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function we(e){var t=-1,r=e?e.length:0;for(this.__data__=new be;++t<r;)this.add(e[t])}function xe(e){this.__data__=new _e(e)}function Ee(e,t){var r=qe(e)||We(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,i=!!n;for(var s in e)!t&&!K.call(e,s)||i&&("length"==s||Ne(s,n))||r.push(s);return r}function Se(e,t){for(var r=e.length;r--;)if($e(e[r][0],t))return r;return-1}ve.prototype.clear=function(){this.__data__=ue?ue(null):{}},ve.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},ve.prototype.get=function(e){var t=this.__data__;if(ue){var n=t[e];return n===r?void 0:n}return K.call(t,e)?t[e]:void 0},ve.prototype.has=function(e){var t=this.__data__;return ue?void 0!==t[e]:K.call(t,e)},ve.prototype.set=function(e,t){return this.__data__[e]=ue&&void 0===t?r:t,this},_e.prototype.clear=function(){this.__data__=[]},_e.prototype.delete=function(e){var t=this.__data__,r=Se(t,e);return!(r<0||(r==t.length-1?t.pop():re.call(t,r,1),0))},_e.prototype.get=function(e){var t=this.__data__,r=Se(t,e);return r<0?void 0:t[r][1]},_e.prototype.has=function(e){return Se(this.__data__,e)>-1},_e.prototype.set=function(e,t){var r=this.__data__,n=Se(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},be.prototype.clear=function(){this.__data__={hash:new ve,map:new(se||_e),string:new ve}},be.prototype.delete=function(e){return Fe(this,e).delete(e)},be.prototype.get=function(e){return Fe(this,e).get(e)},be.prototype.has=function(e){return Fe(this,e).has(e)},be.prototype.set=function(e,t){return Fe(this,e).set(e,t),this},we.prototype.add=we.prototype.push=function(e){return this.__data__.set(e,r),this},we.prototype.has=function(e){return this.__data__.has(e)},xe.prototype.clear=function(){this.__data__=new _e},xe.prototype.delete=function(e){return this.__data__.delete(e)},xe.prototype.get=function(e){return this.__data__.get(e)},xe.prototype.has=function(e){return this.__data__.has(e)},xe.prototype.set=function(e,t){var r=this.__data__;if(r instanceof _e){var n=r.__data__;if(!se||n.length<199)return n.push([e,t]),this;r=this.__data__=new be(n)}return r.set(e,t),this};var Ce=function(e){return function(t,r,n){for(var i=-1,s=Object(t),o=n(t),a=o.length;a--;){var l=o[e?a:++i];if(!1===r(s[l],l,s))break}return t}}();function Ae(e,t){for(var r=0,n=(t=Le(t,e)?[t]:Oe(t)).length;null!=e&&r<n;)e=e[Ve(t[r++])];return r&&r==n?e:void 0}function Te(e,t){return null!=e&&t in Object(e)}function De(e,t,r,n,i){return e===t||(null==e||null==t||!Ze(e)&&!Je(t)?e!=e&&t!=t:function(e,t,r,n,i,c){var p=qe(e),_=qe(t),x=o,E=o;p||(x=(x=Me(e))==s?f:x),_||(E=(E=Me(t))==s?f:E);var S=x==f&&!U(e),C=E==f&&!U(t),A=x==E;if(A&&!S)return c||(c=new xe),p||et(e)?Re(e,t,r,n,i,c):function(e,t,r,n,i,s,o){switch(r){case w:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case b:return!(e.byteLength!=t.byteLength||!n(new ee(e),new ee(t)));case a:case l:case h:return $e(+e,+t);case u:return e.name==t.name&&e.message==t.message;case m:case y:return e==t+"";case d:var c=j;case g:var f=2&s;if(c||(c=z),e.size!=t.size&&!f)return!1;var p=o.get(e);if(p)return p==t;s|=1,o.set(e,t);var _=Re(c(e),c(t),n,i,s,o);return o.delete(e),_;case v:if(ge)return ge.call(e)==ge.call(t)}return!1}(e,t,x,r,n,i,c);if(!(2&i)){var T=S&&K.call(e,"__wrapped__"),D=C&&K.call(t,"__wrapped__");if(T||D){var k=T?e.value():e,P=D?t.value():t;return c||(c=new xe),r(k,P,n,i,c)}}return!!A&&(c||(c=new xe),function(e,t,r,n,i,s){var o=2&i,a=tt(e),l=a.length,u=tt(t),c=u.length;if(l!=c&&!o)return!1;for(var d=l;d--;){var h=a[d];if(!(o?h in t:K.call(t,h)))return!1}var f=s.get(e);if(f&&s.get(t))return f==t;var p=!0;s.set(e,t),s.set(t,e);for(var m=o;++d<l;){var g=e[h=a[d]],y=t[h];if(n)var v=o?n(y,g,h,t,e,s):n(g,y,h,e,t,s);if(!(void 0===v?g===y||r(g,y,n,i,s):v)){p=!1;break}m||(m="constructor"==h)}if(p&&!m){var _=e.constructor,b=t.constructor;_==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof b&&b instanceof b||(p=!1)}return s.delete(e),s.delete(t),p}(e,t,r,n,i,c))}(e,t,De,r,n,i))}function ke(e){return!(!Ze(e)||function(e){return!!X&&X in e}(e))&&(Ye(e)||U(e)?J:T).test(Ge(e))}function Pe(e){return"function"==typeof e?e:null==e?rt:"object"==typeof e?qe(e)?function(e,t){return Le(e)&&Ue(t)?je(Ve(e),t):function(r){var n=function(e,t,r){var n=null==e?void 0:Ae(e,t);return void 0===n?r:n}(r,e);return void 0===n&&n===t?function(e,t){return null!=e&&function(e,t,r){t=Le(t,e)?[t]:Oe(t);for(var n,i=-1,s=t.length;++i<s;){var o=Ve(t[i]);if(!(n=null!=e&&r(e,o)))break;e=e[o]}return n||!!(s=e?e.length:0)&&Ke(s)&&Ne(o,s)&&(qe(e)||We(e))}(e,t,Te)}(r,e):De(t,n,void 0,3)}}(e[0],e[1]):(r=function(e){for(var t=tt(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,Ue(i)]}return t}(t=e),1==r.length&&r[0][2]?je(r[0][0],r[0][1]):function(e){return e===t||function(e,t,r,n){var i=r.length,s=i,o=!n;if(null==e)return!s;for(e=Object(e);i--;){var a=r[i];if(o&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<s;){var l=(a=r[i])[0],u=e[l],c=a[1];if(o&&a[2]){if(void 0===u&&!(l in e))return!1}else{var d=new xe;if(n)var h=n(u,c,l,e,t,d);if(!(void 0===h?De(c,u,n,3,d):h))return!1}}return!0}(e,t,r)}):function(e){return Le(e)?(t=Ve(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return Ae(t,e)}}(e);var t}(e);var t,r}function Be(e){if(r=(t=e)&&t.constructor,n="function"==typeof r&&r.prototype||W,t!==n)return ne(e);var t,r,n,i=[];for(var s in Object(e))K.call(e,s)&&"constructor"!=s&&i.push(s);return i}function Oe(e){return qe(e)?e:ze(e)}function Re(e,t,r,n,i,s){var o=2&i,a=e.length,l=t.length;if(a!=l&&!(o&&l>a))return!1;var u=s.get(e);if(u&&s.get(t))return u==t;var c=-1,d=!0,h=1&i?new we:void 0;for(s.set(e,t),s.set(t,e);++c<a;){var f=e[c],p=t[c];if(n)var m=o?n(p,f,c,t,e,s):n(f,p,c,e,t,s);if(void 0!==m){if(m)continue;d=!1;break}if(h){if(!L(t,function(e,t){if(!h.has(t)&&(f===e||r(f,e,n,i,s)))return h.add(t)})){d=!1;break}}else if(f!==p&&!r(f,p,n,i,s)){d=!1;break}}return s.delete(e),s.delete(t),d}function Fe(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function Ie(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return ke(r)?r:void 0}var Me=function(e){return Z.call(e)};function Ne(e,t){return!!(t=null==t?i:t)&&("number"==typeof e||D.test(e))&&e>-1&&e%1==0&&e<t}function Le(e,t){if(qe(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!Qe(e))||E.test(e)||!x.test(e)||null!=t&&e in Object(t)}function Ue(e){return e==e&&!Ze(e)}function je(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}}(ie&&Me(new ie(new ArrayBuffer(1)))!=w||se&&Me(new se)!=d||oe&&Me(oe.resolve())!=p||ae&&Me(new ae)!=g||le&&Me(new le)!=_)&&(Me=function(e){var t=Z.call(e),r=t==f?e.constructor:void 0,n=r?Ge(r):void 0;if(n)switch(n){case ce:return w;case de:return d;case he:return p;case fe:return g;case pe:return _}return t});var ze=He(function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(Qe(e))return ye?ye.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(t);var r=[];return S.test(e)&&r.push(""),e.replace(C,function(e,t,n,i){r.push(n?i.replace(A,"$1"):t||e)}),r});function Ve(e){if("string"==typeof e||Qe(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Ge(e){if(null!=e){try{return Y.call(e)}catch(Ove){}try{return e+""}catch(Ove){}}return""}function He(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var o=e.apply(this,n);return r.cache=s.set(i,o),o};return r.cache=new(He.Cache||be),r}function $e(e,t){return e===t||e!=e&&t!=t}function We(e){return function(e){return Je(e)&&Xe(e)}(e)&&K.call(e,"callee")&&(!te.call(e,"callee")||Z.call(e)==s)}He.Cache=be;var qe=Array.isArray;function Xe(e){return null!=e&&Ke(e.length)&&!Ye(e)}function Ye(e){var t=Ze(e)?Z.call(e):"";return t==c||"[object GeneratorFunction]"==t}function Ke(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}function Ze(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Je(e){return!!e&&"object"==typeof e}function Qe(e){return"symbol"==typeof e||Je(e)&&Z.call(e)==v}var et=N?function(e){return function(t){return e(t)}}(N):function(e){return Je(e)&&Ke(e.length)&&!!k[Z.call(e)]};function tt(e){return Xe(e)?Ee(e):Be(e)}function rt(e){return e}e.exports=function(e,t){var r={};return t=Pe(t),function(e,t){e&&Ce(e,t,tt)}(e,function(e,n,i){r[n]=t(e,n,i)}),r}}(Nye,Nye.exports);var Lye=Object.defineProperty,Uye=Object.defineProperties,jye=Object.getOwnPropertyDescriptors,zye=Object.getOwnPropertySymbols,Vye=Object.prototype.hasOwnProperty,Gye=Object.prototype.propertyIsEnumerable,Hye=(e,t,r)=>t in e?Lye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$ye=(e,t)=>{for(var r in t||(t={}))Vye.call(t,r)&&Hye(e,r,t[r]);if(zye)for(var r of zye(t))Gye.call(t,r)&&Hye(e,r,t[r]);return e},Wye=(e,t)=>Uye(e,jye(t)),qye=e=>(t,r,n)=>{const i=(e,r)=>t(Fj(e),!0,r);return n.setState=i,e(i,r,n)},Xye=e=>Wye($ye({},e),{extendSelectors:t=>Xye(((e,t)=>{const r=$ye({},t.use),n=$ye({},t.useTracked),i=$ye({},t.get);return Object.keys(e(t.store.getState(),t.get,t)).forEach(s=>{r[s]=(...r)=>t.useStore(n=>(0,e(n,t.get,t)[s])(...r)),n[s]=(...r)=>{const n=t.useTrackedStore();return(0,e(n,t.get,t)[s])(...r)},i[s]=(...r)=>(0,e(t.store.getState(),t.get,t)[s])(...r)}),Wye($ye({},t),{get:i,use:r,useTracked:n})})(t,e)),extendActions:t=>Xye(((e,t)=>{const r=e(t.set,t.get,t);return Wye($ye({},t),{set:$ye($ye({},t.set),r)})})(t,e))}),Yye=e=>(t,r={})=>{var n,i;const{middlewares:s=[],devtools:o,persist:a,immer:l}=r;Ij(null!=(n=null==l?void 0:l.enabledAutoFreeze)&&n),(null==l?void 0:l.enableMapSet)&&Oj();const u=[qye,...s];if(null==a?void 0:a.enabled){const t=Wye($ye({},a),{name:null!=(i=a.name)?i:e});u.push(e=>x8(e,t))}(null==o?void 0:o.enabled)&&u.push(t=>v8(t,Wye($ye({},o),{name:e}))),u.push(Ep);const c=function(e,...t){return t.reduce((e,t)=>t(e),e)}(()=>t,...u),d=(e,t)=>function(e,t=Mye,r){const n=Iye(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return Fye(n),n}(c,e,t),h=((e,t)=>{const r={};return Object.keys(e.getState()).forEach(n=>{r[n]=r=>{if(e.getState()[n]===r)return;const i=n.replace(/^\S/,e=>e.toUpperCase());e.setState(e=>{e[n]=r},`@@${t}/set${i}`)}}),r})(c,e),f=((e,t)=>{const r={};return Object.keys(t.getState()).forEach(t=>{r[t]=r=>e(e=>e[t],r)}),r})(d,c),p=(e=>{const t={};return Object.keys(e.getState()).forEach(r=>{t[r]=()=>e.getState()[r]}),t})(c),m=(g=d,()=>{const[,e]=$.useReducer(e=>e+1,0),t=new WeakMap,r=$.useRef(),n=$.useRef(),i=$.useRef();$.useEffect(()=>{r.current=t,n.current!==i.current&&Rye(n.current,i.current,t,new WeakMap)&&(n.current=i.current,e())});const s=$.useCallback(e=>(i.current=e,n.current&&n.current!==e&&r.current&&!Rye(n.current,e,r.current,new WeakMap)?n.current:(n.current=e,e)),[]),o=g(s),a=$.useMemo(()=>new WeakMap,[]);return Oye(o,t,a)});var g;const y=((e,t)=>{const r={};return Object.keys(t.getState()).forEach(t=>{r[t]=()=>e()[t]}),r})(m,c),v={get:$ye({state:c.getState},p),name:e,set:$ye({state:(t,r)=>{c.setState(t,r||`@@${e}/setState`)},mergeState:(t,r)=>{c.setState(e=>{Object.assign(e,t)},r||`@@${e}/mergeState`)}},h),store:c,use:f,useTracked:y,useStore:d,useTrackedStore:m,extendSelectors:()=>v,extendActions:()=>v};return Xye(v)},Kye=function(e){return e=String(e||""),Qye.test(e)?"rtl":eve.test(e)?"ltr":"neutral"},Zye="---",Jye="A-Za-z--------",Qye=new RegExp("^[^"+Jye+"]*["+Zye+"]"),eve=new RegExp("^[^"+Zye+"]*["+Jye+"]");const tve=s(Kye);var rve=gle,nve=/\s/,ive=function(e){for(var t=e.length;t--&&nve.test(e.charAt(t)););return t},sve=ive,ove=/^\s+/,ave=function(e){return e?e.slice(0,sve(e)+1).replace(ove,""):e},lve=ave,uve=kle,cve=Epe,dve=/^[-+]0x[0-9a-f]+$/i,hve=/^0b[01]+$/i,fve=/^0o[0-7]+$/i,pve=parseInt,mve=kle,gve=function(){return rve.Date.now()},yve=function(e){if("number"==typeof e)return e;if(cve(e))return NaN;if(uve(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=uve(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=lve(e);var r=hve.test(e);return r||fve.test(e)?pve(e.slice(2),r?2:8):dve.test(e)?NaN:+e},vve=Math.max,_ve=Math.min,bve=function(e,t,r){var n,i,s,o,a,l,u=0,c=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var r=n,s=i;return n=i=void 0,u=t,o=e.apply(s,r)}function p(e){var r=e-l;return void 0===l||r>=t||r<0||d&&e-u>=s}function m(){var e=gve();if(p(e))return g(e);a=setTimeout(m,function(e){var r=t-(e-l);return d?_ve(r,s-(e-u)):r}(e))}function g(e){return a=void 0,h&&n?f(e):(n=i=void 0,o)}function y(){var e=gve(),r=p(e);if(n=arguments,i=this,l=e,r){if(void 0===a)return function(e){return u=e,a=setTimeout(m,t),c?f(e):o}(l);if(d)return clearTimeout(a),a=setTimeout(m,t),f(l)}return void 0===a&&(a=setTimeout(m,t)),o}return t=yve(t)||0,mve(r)&&(c=!!r.leading,s=(d="maxWait"in r)?vve(yve(r.maxWait)||0,t):s,h="trailing"in r?!!r.trailing:h),y.cancel=function(){void 0!==a&&clearTimeout(a),u=0,n=l=i=a=void 0},y.flush=function(){return void 0===a?o:g(gve())},y};const wve=s(bve);var xve=bve,Eve=kle,Sve=function(e,t,r){var n=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return Eve(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),xve(e,t,{leading:n,maxWait:t,trailing:i})};const Cve=s(Sve),Ave=e=>"object"==typeof e&&null!=e&&1===e.nodeType,Tve=(e,t)=>(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e,Dve=(e,t)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){const r=getComputedStyle(e,null);return Tve(r.overflowY,t)||Tve(r.overflowX,t)||(e=>{const t=(e=>{if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}})(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)})(e)}return!1},kve=(e,t,r,n,i,s,o,a)=>s<e&&o>t||s>e&&o<t?0:s<=e&&a<=r||o>=t&&a>=r?s-e-n:o>t&&a<r||s<e&&a>r?o-t+i:0,Pve=e=>{const t=e.parentElement;return null==t?e.getRootNode().host||null:t},Bve=(e,t)=>{var r,n,i,s;if("undefined"==typeof document)return[];const{scrollMode:o,block:a,inline:l,boundary:u,skipOverflowHiddenElements:c}=t,d="function"==typeof u?u:e=>e!==u;if(!Ave(e))throw new TypeError("Invalid target");const h=document.scrollingElement||document.documentElement,f=[];let p=e;for(;Ave(p)&&d(p);){if(p=Pve(p),p===h){f.push(p);break}null!=p&&p===document.body&&Dve(p)&&!Dve(document.documentElement)||null!=p&&Dve(p,c)&&f.push(p)}const m=null!=(n=null==(r=window.visualViewport)?void 0:r.width)?n:innerWidth,g=null!=(s=null==(i=window.visualViewport)?void 0:i.height)?s:innerHeight,{scrollX:y,scrollY:v}=window,{height:_,width:b,top:w,right:x,bottom:E,left:S}=e.getBoundingClientRect(),{top:C,right:A,bottom:T,left:D}=(e=>{const t=window.getComputedStyle(e);return{top:parseFloat(t.scrollMarginTop)||0,right:parseFloat(t.scrollMarginRight)||0,bottom:parseFloat(t.scrollMarginBottom)||0,left:parseFloat(t.scrollMarginLeft)||0}})(e);let k="start"===a||"nearest"===a?w-C:"end"===a?E+T:w+_/2-C+T,P="center"===l?S+b/2-D+A:"end"===l?x+A:S-D;const B=[];for(let O=0;O<f.length;O++){const e=f[O],{height:t,width:r,top:n,right:i,bottom:s,left:u}=e.getBoundingClientRect();if("if-needed"===o&&w>=0&&S>=0&&E<=g&&x<=m&&(e===h&&!Dve(e)||w>=n&&E<=s&&S>=u&&x<=i))return B;const c=getComputedStyle(e),d=parseInt(c.borderLeftWidth,10),p=parseInt(c.borderTopWidth,10),C=parseInt(c.borderRightWidth,10),A=parseInt(c.borderBottomWidth,10);let T=0,D=0;const R="offsetWidth"in e?e.offsetWidth-e.clientWidth-d-C:0,F="offsetHeight"in e?e.offsetHeight-e.clientHeight-p-A:0,I="offsetWidth"in e?0===e.offsetWidth?0:r/e.offsetWidth:0,M="offsetHeight"in e?0===e.offsetHeight?0:t/e.offsetHeight:0;if(h===e)T="start"===a?k:"end"===a?k-g:"nearest"===a?kve(v,v+g,g,p,A,v+k,v+k+_,_):k-g/2,D="start"===l?P:"center"===l?P-m/2:"end"===l?P-m:kve(y,y+m,m,d,C,y+P,y+P+b,b),T=Math.max(0,T+v),D=Math.max(0,D+y);else{T="start"===a?k-n-p:"end"===a?k-s+A+F:"nearest"===a?kve(n,s,t,p,A+F,k,k+_,_):k-(n+t/2)+F/2,D="start"===l?P-u-d:"center"===l?P-(u+r/2)+R/2:"end"===l?P-i+C+R:kve(u,i,r,d,C+R,P,P+b,b);const{scrollLeft:o,scrollTop:c}=e;T=0===M?0:Math.max(0,Math.min(c+T/M,e.scrollHeight-t/M+F)),D=0===I?0:Math.max(0,Math.min(o+D/I,e.scrollWidth-r/I+R)),k+=c-T,P+=o-D}B.push({el:e,top:T,left:D})}return B};function Ove(e,t){if(!e.isConnected||!(e=>{let t=e;for(;t&&t.parentNode;){if(t.parentNode===document)return!0;t=t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}return!1})(e))return;const r=(e=>{const t=window.getComputedStyle(e);return{top:parseFloat(t.scrollMarginTop)||0,right:parseFloat(t.scrollMarginRight)||0,bottom:parseFloat(t.scrollMarginBottom)||0,left:parseFloat(t.scrollMarginLeft)||0}})(e);if((e=>"object"==typeof e&&"function"==typeof e.behavior)(t))return t.behavior(Bve(e,t));const n="boolean"==typeof t||null==t?void 0:t.behavior;for(const{el:i,top:s,left:o}of Bve(e,(e=>!1===e?{block:"end",inline:"nearest"}:(e=>e===Object(e)&&0!==Object.keys(e).length)(e)?e:{block:"start",inline:"nearest"})(t))){const e=s-r.top+r.bottom,t=o-r.left+r.right;i.scroll({top:e,left:t,behavior:n})}}var Rve,Fve=[],Ive=function(){return Fve.some(function(e){return e.activeTargets.length>0})},Mve="ResizeObserver loop completed with undelivered notifications.";!function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"}(Rve||(Rve={}));var Nve,Lve=function(e){return Object.freeze(e)},Uve=function(e,t){this.inlineSize=e,this.blockSize=t,Lve(this)},jve=function(){function e(e,t,r,n){return this.x=e,this.y=t,this.width=r,this.height=n,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Lve(this)}return e.prototype.toJSON=function(){var e=this;return{x:e.x,y:e.y,top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),zve=function(e){return e instanceof SVGElement&&"getBBox"in e},Vve=function(e){if(zve(e)){var t=e.getBBox(),r=t.width,n=t.height;return!r&&!n}var i=e,s=i.offsetWidth,o=i.offsetHeight;return!(s||o||e.getClientRects().length)},Gve=function(e){var t;if(e instanceof Element)return!0;var r=null===(t=null==e?void 0:e.ownerDocument)||void 0===t?void 0:t.defaultView;return!!(r&&e instanceof r.Element)},Hve="undefined"!=typeof window?window:{},$ve=new WeakMap,Wve=/auto|scroll/,qve=/^tb|vertical/,Xve=/msie|trident/i.test(Hve.navigator&&Hve.navigator.userAgent),Yve=function(e){return parseFloat(e||"0")},Kve=function(e,t,r){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=!1),new Uve((r?t:e)||0,(r?e:t)||0)},Zve=Lve({devicePixelContentBoxSize:Kve(),borderBoxSize:Kve(),contentBoxSize:Kve(),contentRect:new jve(0,0,0,0)}),Jve=function(e,t){if(void 0===t&&(t=!1),$ve.has(e)&&!t)return $ve.get(e);if(Vve(e))return $ve.set(e,Zve),Zve;var r=getComputedStyle(e),n=zve(e)&&e.ownerSVGElement&&e.getBBox(),i=!Xve&&"border-box"===r.boxSizing,s=qve.test(r.writingMode||""),o=!n&&Wve.test(r.overflowY||""),a=!n&&Wve.test(r.overflowX||""),l=n?0:Yve(r.paddingTop),u=n?0:Yve(r.paddingRight),c=n?0:Yve(r.paddingBottom),d=n?0:Yve(r.paddingLeft),h=n?0:Yve(r.borderTopWidth),f=n?0:Yve(r.borderRightWidth),p=n?0:Yve(r.borderBottomWidth),m=d+u,g=l+c,y=(n?0:Yve(r.borderLeftWidth))+f,v=h+p,_=a?e.offsetHeight-v-e.clientHeight:0,b=o?e.offsetWidth-y-e.clientWidth:0,w=i?m+y:0,x=i?g+v:0,E=n?n.width:Yve(r.width)-w-b,S=n?n.height:Yve(r.height)-x-_,C=E+m+b+y,A=S+g+_+v,T=Lve({devicePixelContentBoxSize:Kve(Math.round(E*devicePixelRatio),Math.round(S*devicePixelRatio),s),borderBoxSize:Kve(C,A,s),contentBoxSize:Kve(E,S,s),contentRect:new jve(d,l,E,S)});return $ve.set(e,T),T},Qve=function(e,t,r){var n=Jve(e,r),i=n.borderBoxSize,s=n.contentBoxSize,o=n.devicePixelContentBoxSize;switch(t){case Rve.DEVICE_PIXEL_CONTENT_BOX:return o;case Rve.BORDER_BOX:return i;default:return s}},e_e=function(e){var t=Jve(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=Lve([t.borderBoxSize]),this.contentBoxSize=Lve([t.contentBoxSize]),this.devicePixelContentBoxSize=Lve([t.devicePixelContentBoxSize])},t_e=function(e){if(Vve(e))return 1/0;for(var t=0,r=e.parentNode;r;)t+=1,r=r.parentNode;return t},r_e=function(){var e=1/0,t=[];Fve.forEach(function(r){if(0!==r.activeTargets.length){var n=[];r.activeTargets.forEach(function(t){var r=new e_e(t.target),i=t_e(t.target);n.push(r),t.lastReportedSize=Qve(t.target,t.observedBox),i<e&&(e=i)}),t.push(function(){r.callback.call(r.observer,n,r.observer)}),r.activeTargets.splice(0,r.activeTargets.length)}});for(var r=0,n=t;r<n.length;r++)(0,n[r])();return e},n_e=function(e){Fve.forEach(function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach(function(r){r.isActive()&&(t_e(r.target)>e?t.activeTargets.push(r):t.skippedTargets.push(r))})})},i_e=function(){var e,t=0;for(n_e(t);Ive();)t=r_e(),n_e(t);return Fve.some(function(e){return e.skippedTargets.length>0})&&("function"==typeof ErrorEvent?e=new ErrorEvent("error",{message:Mve}):((e=document.createEvent("Event")).initEvent("error",!1,!1),e.message=Mve),window.dispatchEvent(e)),t>0},s_e=[],o_e=function(e){if(!Nve){var t=0,r=document.createTextNode("");new MutationObserver(function(){return s_e.splice(0).forEach(function(e){return e()})}).observe(r,{characterData:!0}),Nve=function(){r.textContent="".concat(t?t--:t++)}}s_e.push(e),Nve()},a_e=0,l_e={attributes:!0,characterData:!0,childList:!0,subtree:!0},u_e=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],c_e=function(e){return void 0===e&&(e=0),Date.now()+e},d_e=!1,h_e=function(){function e(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return e.prototype.run=function(e){var t=this;if(void 0===e&&(e=250),!d_e){d_e=!0;var r=c_e(e);!function(e){o_e(function(){requestAnimationFrame(e)})}(function(){var n=!1;try{n=i_e()}finally{if(d_e=!1,e=r-c_e(),!a_e)return;n?t.run(1e3):e>0?t.run(e):t.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var e=this,t=function(){return e.observer&&e.observer.observe(document.body,l_e)};document.body?t():Hve.addEventListener("DOMContentLoaded",t)},e.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),u_e.forEach(function(t){return Hve.addEventListener(t,e.listener,!0)}))},e.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),u_e.forEach(function(t){return Hve.removeEventListener(t,e.listener,!0)}),this.stopped=!0)},e}(),f_e=new h_e,p_e=function(e){!a_e&&e>0&&f_e.start(),!(a_e+=e)&&f_e.stop()},m_e=function(){function e(e,t){this.target=e,this.observedBox=t||Rve.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var e,t=Qve(this.target,this.observedBox,!0);return e=this.target,zve(e)||function(e){switch(e.tagName){case"INPUT":if("image"!==e.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(e)||"inline"!==getComputedStyle(e).display||(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),g_e=function(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t},y_e=new WeakMap,v_e=function(e,t){for(var r=0;r<e.length;r+=1)if(e[r].target===t)return r;return-1},__e=function(){function e(){}return e.connect=function(e,t){var r=new g_e(e,t);y_e.set(e,r)},e.observe=function(e,t,r){var n=y_e.get(e),i=0===n.observationTargets.length;v_e(n.observationTargets,t)<0&&(i&&Fve.push(n),n.observationTargets.push(new m_e(t,r&&r.box)),p_e(1),f_e.schedule())},e.unobserve=function(e,t){var r=y_e.get(e),n=v_e(r.observationTargets,t),i=1===r.observationTargets.length;n>=0&&(i&&Fve.splice(Fve.indexOf(r),1),r.observationTargets.splice(n,1),p_e(-1))},e.disconnect=function(e){var t=this,r=y_e.get(e);r.observationTargets.slice().forEach(function(r){return t.unobserve(e,r.target)}),r.activeTargets.splice(0,r.activeTargets.length)},e}(),b_e=function(){function e(e){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof e)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");__e.connect(this,e)}return e.prototype.observe=function(e,t){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Gve(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");__e.observe(this,e,t)},e.prototype.unobserve=function(e){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Gve(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");__e.unobserve(this,e)},e.prototype.disconnect=function(){__e.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}();function w_e(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function x_e(e){return x_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x_e(e)}function E_e(e){var t=function(e,t){if("object"!==x_e(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==x_e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===x_e(t)?t:String(t)}function S_e(e,t,r){return(t=E_e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var C_e,A_e,T_e=$.createContext(null),D_e=()=>{var e=$.useContext(T_e);if(!e)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e},k_e=parseInt(W.version.split(".")[0],10),P_e="undefined"!=typeof navigator&&"undefined"!=typeof window&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,B_e="undefined"!=typeof navigator&&/Mac OS X/.test(navigator.userAgent),O_e="undefined"!=typeof navigator&&/Android/.test(navigator.userAgent),R_e="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),F_e="undefined"!=typeof navigator&&/AppleWebKit(?!.*Chrome)/i.test(navigator.userAgent),I_e="undefined"!=typeof navigator&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),M_e="undefined"!=typeof navigator&&/Chrome/i.test(navigator.userAgent),N_e="undefined"!=typeof navigator&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),L_e=O_e&&"undefined"!=typeof navigator&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),U_e="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),j_e="undefined"!=typeof navigator&&/.*UCBrowser/.test(navigator.userAgent),z_e="undefined"!=typeof navigator&&/.*Wechat/.test(navigator.userAgent)&&!/.*MacWechat/.test(navigator.userAgent),V_e=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement);"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&/Version\/(\d+)/.test(navigator.userAgent)&&null!==(C_e=navigator.userAgent.match(/Version\/(\d+)/))&&void 0!==C_e&&C_e[1]&&parseInt(null===(A_e=navigator.userAgent.match(/Version\/(\d+)/))||void 0===A_e?void 0:A_e[1],10);var G_e=(!N_e||!L_e)&&!I_e&&"undefined"!=typeof globalThis&&globalThis.InputEvent&&"function"==typeof globalThis.InputEvent.prototype.getTargetRanges,H_e=new WeakMap,$_e=new WeakMap,W_e=new WeakMap,q_e=new WeakMap,X_e=new WeakMap,Y_e=new WeakMap,K_e=new WeakMap,Z_e=new WeakMap,J_e=new WeakMap,Q_e=new WeakMap,ebe=new WeakMap,tbe=new WeakMap,rbe=new WeakMap,nbe=new WeakMap,ibe=new WeakMap,sbe=new WeakMap,obe=new WeakMap,abe=new WeakMap,lbe=new WeakMap,ube=new WeakMap,cbe=new WeakMap,dbe=new WeakMap,hbe=Symbol("placeholder"),fbe=Symbol("mark-placeholder"),pbe=globalThis.Node,mbe=globalThis.Text,gbe=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView||null,ybe=e=>_be(e)&&8===e.nodeType,vbe=e=>_be(e)&&1===e.nodeType,_be=e=>{var t=gbe(e);return!!t&&e instanceof t.Node},bbe=e=>{var t=e&&e.anchorNode&&gbe(e.anchorNode);return!!t&&e instanceof t.Selection},wbe=e=>_be(e)&&3===e.nodeType,xbe=(e,t,r)=>{for(var{childNodes:n}=e,i=n[t],s=t,o=!1,a=!1;(ybe(i)||vbe(i)&&0===i.childNodes.length||vbe(i)&&"false"===i.getAttribute("contenteditable"))&&(!o||!a);)s>=n.length?(o=!0,s=t-1,r="backward"):s<0?(a=!0,s=t+1,r="forward"):(i=n[s],t=s,s+="forward"===r?1:-1);return[i,t]},Ebe=(e,t,r)=>{var[n]=xbe(e,t,r);return n},Sbe=e=>{var t="";if(wbe(e)&&e.nodeValue)return e.nodeValue;if(vbe(e)){for(var r of Array.from(e.childNodes))t+=Sbe(r);var n=getComputedStyle(e).getPropertyValue("display");"block"!==n&&"list"!==n&&"BR"!==e.tagName||(t+="\n")}return t},Cbe=/data-slate-fragment="(.+?)"/m,Abe=e=>null!=e.getSelection?e.getSelection():document.getSelection(),Tbe=(e,t,r)=>{var{target:n}=t;if(vbe(n)&&n.matches('[contentEditable="false"]'))return!1;var{document:i}=Bbe.getWindow(e);if(i.contains(n))return Bbe.hasDOMNode(e,n,{editable:!0});var s=r.find(e=>{var{addedNodes:t,removedNodes:r}=e;for(var i of t)if(i===n||i.contains(n))return!0;for(var s of r)if(s===n||s.contains(n))return!0});return!(!s||s===t)&&Tbe(e,s,r)},Dbe=(e,t)=>Boolean(e.compareDocumentPosition(t)&pbe.DOCUMENT_POSITION_PRECEDING),kbe=0;class Pbe{constructor(){S_e(this,"id",void 0),this.id="".concat(kbe++)}}var Bbe={androidPendingDiffs:e=>lbe.get(e),androidScheduleFlush:e=>{var t;null===(t=sbe.get(e))||void 0===t||t()},blur:e=>{var t=Bbe.toDOMNode(e,e),r=Bbe.findDocumentOrShadowRoot(e);tbe.set(e,!1),r.activeElement===t&&t.blur()},deselect:e=>{var{selection:t}=e,r=Bbe.findDocumentOrShadowRoot(e),n=Abe(r);n&&n.rangeCount>0&&n.removeAllRanges(),t&&Eoe.deselect(e)},findDocumentOrShadowRoot:e=>{var t=Bbe.toDOMNode(e,e),r=t.getRootNode();return r instanceof Document||r instanceof ShadowRoot?r:t.ownerDocument},findEventRange:(e,t)=>{"nativeEvent"in t&&(t=t.nativeEvent);var{clientX:r,clientY:n,target:i}=t;if(null==r||null==n)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));var s,o=Bbe.toSlateNode(e,t.target),a=Bbe.findPath(e,o);if(Sse.isElement(o)&&Rse.isVoid(e,o)){var l=i.getBoundingClientRect(),u=e.isInline(o)?r-l.left<l.left+l.width-r:n-l.top<l.top+l.height-n,c=Rse.point(e,a,{edge:u?"start":"end"}),d=u?Rse.before(e,c):Rse.after(e,c);if(d)return Rse.range(e,d)}var{document:h}=Bbe.getWindow(e);if(h.caretRangeFromPoint)s=h.caretRangeFromPoint(r,n);else{var f=h.caretPositionFromPoint(r,n);f&&((s=h.createRange()).setStart(f.offsetNode,f.offset),s.setEnd(f.offsetNode,f.offset))}if(!s)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));return Bbe.toSlateRange(e,s,{exactMatch:!1,suppressThrow:!1})},findKey:(e,t)=>{var r=J_e.get(t);return r||(r=new Pbe,J_e.set(t,r)),r},findPath:(e,t)=>{for(var r=[],n=t;;){var i=W_e.get(n);if(null==i){if(Rse.isEditor(n))return r;break}var s=$_e.get(n);if(null==s)break;r.unshift(s),n=i}throw new Error("Unable to find the path for Slate node: ".concat(Use.stringify(t)))},focus:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{retries:5};if(!tbe.get(e)){if(t.retries<=0)throw new Error("Could not set focus, editor seems stuck with pending operations");if(e.operations.length>0)setTimeout(()=>{Bbe.focus(e,{retries:t.retries-1})},10);else{var r=Bbe.toDOMNode(e,e),n=Bbe.findDocumentOrShadowRoot(e);if(n.activeElement!==r){if(e.selection&&n instanceof Document){var i=Abe(n),s=Bbe.toDOMRange(e,e.selection);null==i||i.removeAllRanges(),null==i||i.addRange(s)}e.selection||Eoe.select(e,Rse.start(e,[])),tbe.set(e,!0),r.focus({preventScroll:!0})}}}},getWindow:e=>{var t=q_e.get(e);if(!t)throw new Error("Unable to find a host window element for this editor");return t},hasDOMNode:function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{editable:i=!1}=n,s=Bbe.toDOMNode(e,e);try{r=vbe(t)?t:t.parentElement}catch(mke){if(mke instanceof Error&&!mke.message.includes('Permission denied to access property "nodeType"'))throw mke}return!!r&&!(r.closest("[data-slate-editor]")!==s||i&&!r.isContentEditable&&("boolean"!=typeof r.isContentEditable||r.closest('[contenteditable="false"]')!==s)&&!r.getAttribute("data-slate-zero-width"))},hasEditableTarget:(e,t)=>_be(t)&&Bbe.hasDOMNode(e,t,{editable:!0}),hasRange:(e,t)=>{var{anchor:r,focus:n}=t;return Rse.hasPath(e,r.path)&&Rse.hasPath(e,n.path)},hasSelectableTarget:(e,t)=>Bbe.hasEditableTarget(e,t)||Bbe.isTargetInsideNonReadonlyVoid(e,t),hasTarget:(e,t)=>_be(t)&&Bbe.hasDOMNode(e,t),insertData:(e,t)=>{e.insertData(t)},insertFragmentData:(e,t)=>e.insertFragmentData(t),insertTextData:(e,t)=>e.insertTextData(t),isComposing:e=>!!rbe.get(e),isFocused:e=>!!tbe.get(e),isReadOnly:e=>!!ebe.get(e),isTargetInsideNonReadonlyVoid:(e,t)=>{if(ebe.get(e))return!1;var r=Bbe.hasTarget(e,t)&&Bbe.toSlateNode(e,t);return Sse.isElement(r)&&Rse.isVoid(e,r)},setFragmentData:(e,t,r)=>e.setFragmentData(t,r),toDOMNode:(e,t)=>{var r=Q_e.get(e),n=Rse.isEditor(t)?X_e.get(e):null==r?void 0:r.get(Bbe.findKey(e,t));if(!n)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(Use.stringify(t)));return n},toDOMPoint:(e,t)=>{var r,[n]=Rse.node(e,t.path),i=Bbe.toDOMNode(e,n);Rse.void(e,{at:t})&&(t={path:t.path,offset:0});for(var s=Array.from(i.querySelectorAll("[data-slate-string], [data-slate-zero-width]")),o=0,a=0;a<s.length;a++){var l=s[a],u=l.childNodes[0];if(null!=u&&null!=u.textContent){var{length:c}=u.textContent,d=l.getAttribute("data-slate-length"),h=o+(null==d?c:parseInt(d,10)),f=s[a+1];if(t.offset===h&&null!=f&&f.hasAttribute("data-slate-mark-placeholder")){var p,m=f.childNodes[0];r=[m instanceof mbe?m:f,null!==(p=f.textContent)&&void 0!==p&&p.startsWith("\ufeff")?1:0];break}if(t.offset<=h){r=[u,Math.min(c,Math.max(0,t.offset-o))];break}o=h}}if(!r)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(Use.stringify(t)));return r},toDOMRange:(e,t)=>{var{anchor:r,focus:n}=t,i=xse.isBackward(t),s=Bbe.toDOMPoint(e,r),o=xse.isCollapsed(t)?s:Bbe.toDOMPoint(e,n),a=Bbe.getWindow(e).document.createRange(),[l,u]=i?o:s,[c,d]=i?s:o,h=!!(vbe(l)?l:l.parentElement).getAttribute("data-slate-zero-width"),f=!!(vbe(c)?c:c.parentElement).getAttribute("data-slate-zero-width");return a.setStart(l,h?1:u),a.setEnd(c,f?1:d),a},toSlateNode:(e,t)=>{var r=vbe(t)?t:t.parentElement;r&&!r.hasAttribute("data-slate-node")&&(r=r.closest("[data-slate-node]"));var n=r?K_e.get(r):null;if(!n)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(r));return n},toSlatePoint:(e,t,r)=>{var{exactMatch:n,suppressThrow:i,searchDirection:s="backward"}=r,[o,a]=n?t:(e=>{var[t,r]=e;if(vbe(t)&&t.childNodes.length){var n=r===t.childNodes.length,i=n?r-1:r;for([t,i]=xbe(t,i,n?"backward":"forward"),n=i<r;vbe(t)&&t.childNodes.length;){var s=n?t.childNodes.length-1:0;t=Ebe(t,s,n?"backward":"forward")}r=n&&null!=t.textContent?t.textContent.length:0}return[t,r]})(t),l=o.parentNode,u=null,c=0;if(l){var d,h,f=Bbe.toDOMNode(e,e),p=l.closest('[data-slate-void="true"]'),m=p&&f.contains(p)?p:null,g=l.closest('[contenteditable="false"]'),y=g&&f.contains(g)?g:null,v=l.closest("[data-slate-leaf]"),_=null;if(v){if(u=v.closest('[data-slate-node="text"]')){var b=Bbe.getWindow(e).document.createRange();b.setStart(u,0),b.setEnd(o,a);var w=b.cloneContents();[...Array.prototype.slice.call(w.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(w.querySelectorAll("[contenteditable=false]"))].forEach(e=>{O_e&&!n&&e.hasAttribute("data-slate-zero-width")&&e.textContent.length>0&&"\ufeff"!==e.textContext?e.textContent.startsWith("\ufeff")&&(e.textContent=e.textContent.slice(1)):e.parentNode.removeChild(e)}),c=w.textContent.length,_=u}}else if(m){for(var x=m.querySelectorAll("[data-slate-leaf]"),E=0;E<x.length;E++){var S=x[E];if(Bbe.hasDOMNode(e,S)){v=S;break}}v?(u=v.closest('[data-slate-node="text"]'),c=(_=v).textContent.length,_.querySelectorAll("[data-slate-zero-width]").forEach(e=>{c-=e.textContent.length})):c=1}else if(y){var C,A,T=e=>e?e.querySelectorAll("[data-slate-leaf]:not(:scope [data-slate-editor] [data-slate-leaf])"):[],D=y.closest('[data-slate-node="element"]');v="forward"===s?null!==(C=[...T(D),...T(null==D?void 0:D.nextElementSibling)].find(e=>((e,t)=>Boolean(e.compareDocumentPosition(t)&pbe.DOCUMENT_POSITION_FOLLOWING))(y,e)))&&void 0!==C?C:null:null!==(A=[...T(null==D?void 0:D.previousElementSibling),...T(D)].findLast(e=>Dbe(y,e)))&&void 0!==A?A:null,v&&(u=v.closest('[data-slate-node="text"]'),_=v,"forward"===s?c=0:(c=_.textContent.length,_.querySelectorAll("[data-slate-zero-width]").forEach(e=>{c-=e.textContent.length})))}_&&c===_.textContent.length&&O_e&&"z"===_.getAttribute("data-slate-zero-width")&&null!==(d=_.textContent)&&void 0!==d&&d.startsWith("\ufeff")&&(l.hasAttribute("data-slate-zero-width")||R_e&&null!==(h=_.textContent)&&void 0!==h&&h.endsWith("\n\n"))&&c--}if(O_e&&!u&&!n){var k=l.hasAttribute("data-slate-node")?l:l.closest("[data-slate-node]");if(k&&Bbe.hasDOMNode(e,k,{editable:!0})){var P=Bbe.toSlateNode(e,k),{path:B,offset:O}=Rse.start(e,Bbe.findPath(e,P));return k.querySelector("[data-slate-leaf]")||(O=a),{path:B,offset:O}}}if(!u){if(i)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(t))}var R=Bbe.toSlateNode(e,u);return{path:Bbe.findPath(e,R),offset:c}},toSlateRange:(e,t,r)=>{var n,i,s,o,a,l,{exactMatch:u,suppressThrow:c}=r;if(bbe(t)?t.anchorNode:t.startContainer)if(bbe(t)){if(R_e&&t.rangeCount>1){o=t.focusNode;var d=t.getRangeAt(0),h=t.getRangeAt(t.rangeCount-1);if(o instanceof HTMLTableRowElement&&d.startContainer instanceof HTMLTableRowElement&&h.startContainer instanceof HTMLTableRowElement){function w(e){return e.childElementCount>0?w(e.children[0]):e}var f=d.startContainer,p=h.startContainer,m=w(f.children[d.startOffset]),g=w(p.children[h.startOffset]);a=0,i=g.childNodes.length>0?g.childNodes[0]:g,o=m.childNodes.length>0?m.childNodes[0]:m,s=g instanceof HTMLElement?g.innerHTML.length:0}else d.startContainer===o?(i=h.endContainer,s=h.endOffset,a=d.startOffset):(i=d.startContainer,s=d.endOffset,a=h.startOffset)}else i=t.anchorNode,s=t.anchorOffset,o=t.focusNode,a=t.focusOffset;l=M_e&&(e=>{for(var t=e&&e.parentNode;t;){if("[object ShadowRoot]"===t.toString())return!0;t=t.parentNode}return!1})(i)||R_e?t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset:t.isCollapsed}else i=t.startContainer,s=t.startOffset,o=t.endContainer,a=t.endOffset,l=t.collapsed;if(null==i||null==o||null==s||null==a)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(t));R_e&&null!==(n=o.textContent)&&void 0!==n&&n.endsWith("\n\n")&&a===o.textContent.length&&a--;var y=Bbe.toSlatePoint(e,[i,s],{exactMatch:u,suppressThrow:c});if(!y)return null;var v=Dbe(i,o)||i===o&&a<s,_=l?y:Bbe.toSlatePoint(e,[o,a],{exactMatch:u,suppressThrow:c,searchDirection:v?"forward":"backward"});if(!_)return null;var b={anchor:y,focus:_};return xse.isExpanded(b)&&xse.isForward(b)&&vbe(o)&&Rse.void(e,{at:b.focus,mode:"highest"})&&(b=Rse.unhangRange(e,b,{voids:!0})),b}};function Obe(e,t){var{path:r,diff:n}=t;if(!Rse.hasPath(e,r))return!1;var i=Dse.get(e,r);if(!$se.isText(i))return!1;if(n.start!==i.text.length||0===n.text.length)return i.text.slice(n.start,n.start+n.text.length)===n.text;var s=use.next(r);if(!Rse.hasPath(e,s))return!1;var o=Dse.get(e,s);return $se.isText(o)&&o.text.startsWith(n.text)}function Rbe(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.reduce((e,t)=>e.slice(0,t.start)+t.text+e.slice(t.end),e)}function Fbe(e,t){var{start:r,end:n,text:i}=t,s=e.slice(r,n),o=function(e,t){for(var r=Math.min(e.length,t.length),n=0;n<r;n++)if(e.charAt(n)!==t.charAt(n))return n;return r}(s,i),a=function(e,t,r){for(var n=Math.min(e.length,t.length,r),i=0;i<n;i++)if(e.charAt(e.length-i-1)!==t.charAt(t.length-i-1))return i;return n}(s,i,Math.min(s.length-o,i.length-o)),l={start:r+o,end:n-a,text:i.slice(o,i.length-a)};return l.start===l.end&&0===l.text.length?null:l}function Ibe(e){var{path:t,diff:r}=e;return{anchor:{path:t,offset:r.start},focus:{path:t,offset:r.end}}}function Mbe(e,t){var{path:r,offset:n}=t;if(!Rse.hasPath(e,r))return null;var i=Dse.get(e,r);if(!$se.isText(i))return null;var s=Rse.above(e,{match:t=>Sse.isElement(t)&&Rse.isBlock(e,t),at:r});if(!s)return null;for(;n>i.text.length;){var o=Rse.next(e,{at:r,match:$se.isText});if(!o||!use.isDescendant(o[1],s[1]))return null;n-=i.text.length,i=o[0],r=o[1]}return{path:r,offset:n}}function Nbe(e,t){var r=Mbe(e,t.anchor);if(!r)return null;if(xse.isCollapsed(t))return{anchor:r,focus:r};var n=Mbe(e,t.focus);return n?{anchor:r,focus:n}:null}function Lbe(e,t,r){var n=lbe.get(e),i=null==n?void 0:n.find(e=>{var{path:r}=e;return use.equals(r,t.path)});if(!i||t.offset<=i.diff.start)return Nse.transform(t,r,{affinity:"backward"});var{diff:s}=i;if(t.offset<=s.start+s.text.length){var o={path:t.path,offset:s.start},a=Nse.transform(o,r,{affinity:"backward"});return a?{path:a.path,offset:a.offset+t.offset-s.start}:null}var l={path:t.path,offset:t.offset-s.text.length+s.end-s.start},u=Nse.transform(l,r,{affinity:"backward"});return u?"split_node"===r.type&&use.equals(r.path,t.path)&&l.offset<r.position&&s.start<r.position?u:{path:u.path,offset:u.offset+s.text.length-s.end+s.start}:null}function Ube(e,t,r){var n=Lbe(e,t.anchor,r);if(!n)return null;if(xse.isCollapsed(t))return{anchor:n,focus:n};var i=Lbe(e,t.focus,r);return i?{anchor:n,focus:i}:null}function jbe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function zbe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jbe(Object(r),!0).forEach(function(t){S_e(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jbe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Vbe(e){var{editor:t,scheduleOnDOMSelectionChange:r,onDOMSelectionChange:n}=e,i=!1,s=null,o=null,a=null,l=0,u=!1,c=()=>{var e=cbe.get(t);if(cbe.delete(t),e){var{selection:r}=t,n=Nbe(t,e);!n||r&&xse.equals(n,r)||Eoe.select(t,n)}},d=()=>{if(o&&(clearTimeout(o),o=null),a&&(clearTimeout(a),a=null),g()||m()){i||(i=!0,setTimeout(()=>i=!1)),m()&&(i="action");var e=t.selection&&Rse.rangeRef(t,t.selection,{affinity:"forward"});abe.set(t,t.marks),ube.get(t),lbe.get(t);for(var s,l=g();s=null===(d=lbe.get(t))||void 0===d?void 0:d[0];){var d,h,f=obe.get(t);void 0!==f&&(obe.delete(t),t.marks=f),f&&!1===u&&(u=null);var p=Ibe(s);t.selection&&xse.equals(t.selection,p)||Eoe.select(t,p),s.diff.text?Rse.insertText(t,s.diff.text):Rse.deleteFragment(t),lbe.set(t,null===(h=lbe.get(t))||void 0===h?void 0:h.filter(e=>{var{id:t}=e;return t!==s.id})),Obe(t,s)||(l=!1,ube.delete(t),abe.delete(t),i="action",cbe.delete(t),r.cancel(),n.cancel(),null==e||e.unref())}var y=null==e?void 0:e.unref();if(!y||cbe.get(t)||t.selection&&xse.equals(y,t.selection)||Eoe.select(t,y),m())(()=>{var e=ube.get(t);if(ube.delete(t),e){if(e.at){var r=Nse.isPoint(e.at)?Mbe(t,e.at):Nbe(t,e.at);if(!r)return;var n=Rse.range(t,r);t.selection&&xse.equals(t.selection,n)||Eoe.select(t,r)}e.run()}})();else{l&&r(),r.flush(),n.flush(),c();var v=abe.get(t);abe.delete(t),void 0!==v&&(t.marks=v,t.onChange())}}else c()},h=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=Y_e.get(t);r&&(g()||e?r.style.display="none":r.style.removeProperty("display"))},f=(e,r)=>{var n,i=null!==(n=lbe.get(t))&&void 0!==n?n:[];lbe.set(t,i);var s=Dse.leaf(t,e),o=i.findIndex(t=>use.equals(t.path,e));if(o<0)return Fbe(s.text,r)&&i.push({path:e,diff:r,id:l++}),void h();var a=function(e,t,r){var n=Math.min(t.start,r.start),i=Math.max(0,Math.min(t.start+t.text.length,r.end)-r.start),s=Rbe(e,t,r),o=Math.max(r.start+r.text.length,t.start+t.text.length+(t.start+t.text.length>r.start?r.text.length:0)-i),a=s.slice(n,o);return Fbe(e,{start:n,end:Math.max(t.end,r.end-t.text.length+(t.end-t.start)),text:a})}(s.text,i[o].diff,r);if(!a)return i.splice(o,1),void h();i[o]=zbe(zbe({},i[o]),{},{diff:a})},p=function(e){var{at:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u=!1,cbe.delete(t),r.cancel(),n.cancel(),m()&&d(),ube.set(t,{at:i,run:e}),a=setTimeout(d)},m=()=>!!ube.get(t),g=()=>{var e;return!(null===(e=lbe.get(t))||void 0===e||!e.length)},y=e=>{cbe.set(t,e),o&&(clearTimeout(o),o=null);var{selection:r}=t;if(e){var n=!r||!use.equals(r.anchor.path,e.anchor.path),i=!r||!use.equals(r.anchor.path.slice(0,-1),e.anchor.path.slice(0,-1));(n&&u||i)&&(u=!1),(n||g())&&(o=setTimeout(d,200))}},v=()=>{m()||(a=setTimeout(d))};return{flush:d,scheduleFlush:v,hasPendingDiffs:g,hasPendingAction:m,hasPendingChanges:()=>m()||g(),isFlushing:()=>i,handleUserSelect:y,handleCompositionEnd:e=>{s&&clearTimeout(s),s=setTimeout(()=>{rbe.set(t,!1),d()},25)},handleCompositionStart:e=>{rbe.set(t,!0),s&&(clearTimeout(s),s=null)},handleDOMBeforeInput:e=>{var r;if(o&&(clearTimeout(o),o=null),!H_e.get(t)){var{inputType:n}=e,i=null,s=e.dataTransfer||e.data||void 0;!1!==u&&"insertText"!==n&&"insertCompositionText"!==n&&(u=!1);var[a]=e.getTargetRanges();a&&(i=Bbe.toSlateRange(t,a,{exactMatch:!1,suppressThrow:!0}));var l=Bbe.getWindow(t).getSelection();if(!i&&l&&(a=l,i=Bbe.toSlateRange(t,l,{exactMatch:!1,suppressThrow:!0})),i=null!==(r=i)&&void 0!==r?r:t.selection){var c,d=!0;if(n.startsWith("delete")){if(xse.isExpanded(i)){var[h,m]=xse.edges(i);if(Dse.leaf(t,h.path).text.length===h.offset&&0===m.offset){var g=Rse.next(t,{at:h.path,match:$se.isText});g&&use.equals(g[1],m.path)&&(i={anchor:m,focus:m})}}var _=n.endsWith("Backward")?"backward":"forward",[b,w]=xse.edges(i),[x,E]=Rse.leaf(t,b.path),S={text:"",start:b.offset,end:w.offset},C=lbe.get(t),A=null==C?void 0:C.find(e=>use.equals(e.path,E)),T=A?[A.diff,S]:[S];if(0===Rbe(x.text,...T).length&&(d=!1),xse.isExpanded(i)){if(d&&use.equals(i.anchor.path,i.focus.path)){var D={path:i.anchor.path,offset:b.offset},k=Rse.range(t,D,D);return y(k),f(i.anchor.path,{text:"",end:w.offset,start:b.offset})}return p(()=>Rse.deleteFragment(t,{direction:_}),{at:i})}}switch(n){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return p(()=>Rse.deleteFragment(t),{at:i});case"deleteContent":case"deleteContentForward":var{anchor:P}=i;if(d&&xse.isCollapsed(i)){var B=Dse.leaf(t,P.path);if(P.offset<B.text.length)return f(P.path,{text:"",start:P.offset,end:P.offset+1})}return p(()=>Rse.deleteForward(t),{at:i});case"deleteContentBackward":var O,{anchor:R}=i,F=bbe(a)?a.isCollapsed:!(null===(O=a)||void 0===O||!O.collapsed);return d&&F&&xse.isCollapsed(i)&&R.offset>0?f(R.path,{text:"",start:R.offset-1,end:R.offset}):p(()=>Rse.deleteBackward(t),{at:i});case"deleteEntireSoftLine":return p(()=>{Rse.deleteBackward(t,{unit:"line"}),Rse.deleteForward(t,{unit:"line"})},{at:i});case"deleteHardLineBackward":return p(()=>Rse.deleteBackward(t,{unit:"block"}),{at:i});case"deleteSoftLineBackward":return p(()=>Rse.deleteBackward(t,{unit:"line"}),{at:i});case"deleteHardLineForward":return p(()=>Rse.deleteForward(t,{unit:"block"}),{at:i});case"deleteSoftLineForward":return p(()=>Rse.deleteForward(t,{unit:"line"}),{at:i});case"deleteWordBackward":return p(()=>Rse.deleteBackward(t,{unit:"word"}),{at:i});case"deleteWordForward":return p(()=>Rse.deleteForward(t,{unit:"word"}),{at:i});case"insertLineBreak":return p(()=>Rse.insertSoftBreak(t),{at:i});case"insertParagraph":return p(()=>Rse.insertBreak(t),{at:i});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":if("DataTransfer"===(null==(c=s)?void 0:c.constructor.name))return p(()=>Bbe.insertData(t,s),{at:i});var I=null!=s?s:"";if(obe.get(t)&&(I=I.replace("\ufeff","")),"insertText"===n&&/.*\n.*\n$/.test(I)&&(I=I.slice(0,-1)),I.includes("\n"))return p(()=>{var e=I.split("\n");e.forEach((r,n)=>{r&&Rse.insertText(t,r),n!==e.length-1&&Rse.insertSoftBreak(t)})},{at:i});if(use.equals(i.anchor.path,i.focus.path)){var[M,N]=xse.edges(i),L={start:M.offset,end:N.offset,text:I};if(I&&u&&"insertCompositionText"===n){var U=u.start+u.text.search(/\S|$/);L.start+L.text.search(/\S|$/)===U+1&&L.end===u.start+u.text.length?(L.start-=1,u=null,v()):u=!1}else u="insertText"===n&&(null===u?L:!(!u||!xse.isCollapsed(i)||u.end+u.text.length!==M.offset)&&zbe(zbe({},u),{},{text:u.text+I}));if(d)return void f(M.path,L)}return p(()=>Rse.insertText(t,I),{at:i})}}}},handleKeyDown:e=>{g()||(h(!0),setTimeout(h))},handleDomMutations:e=>{var r;g()||m()||e.some(r=>Tbe(t,r,e))&&(null===(r=dbe.get(t))||void 0===r||r())},handleInput:()=>{!m()&&g()||d()}}}var Gbe=V_e?$.useLayoutEffect:$.useEffect,Hbe=["node"];function $be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var Wbe={subtree:!0,childList:!0,characterData:!0},qbe=O_e?e=>{var{node:t}=e,r=w_e(e,Hbe);if(!O_e)return null;var n,i=D_e(),s=(n=$.useRef(!1),$.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[]),n.current),[o]=$.useState(()=>Vbe(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$be(Object(r),!0).forEach(function(t){S_e(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$be(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({editor:i},r)));return function(e,t,r){var[n]=$.useState(()=>new MutationObserver(t));Gbe(()=>{n.takeRecords()}),$.useEffect(()=>{if(!e.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return n.observe(e.current,r),()=>n.disconnect()},[n,e,r])}(t,o.handleDomMutations,Wbe),sbe.set(i,o.scheduleFlush),s&&o.flush(),o}:()=>null,Xbe=["anchor","focus"],Ybe=["anchor","focus"],Kbe=(e,t)=>{var r,n,i=w_e(e,Xbe),s=w_e(t,Ybe);return e[hbe]===t[hbe]&&(r=i,n=s,Object.keys(r).length===Object.keys(n).length&&Object.keys(r).every(e=>n.hasOwnProperty(e)&&r[e]===n[e]))};function Zbe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var Jbe=e=>{var{isLast:t,leaf:r,parent:n,text:i}=e,s=D_e(),o=Bbe.findPath(s,i),a=use.parent(o),l=Boolean(r[fbe]);return s.isVoid(n)?W.createElement(twe,{length:Dse.string(n).length}):""!==r.text||n.children[n.children.length-1]!==i||s.isInline(n)||""!==Rse.string(s,a)?""===r.text?W.createElement(twe,{isMarkPlaceholder:l}):t&&"\n"===r.text.slice(-1)?W.createElement(Qbe,{isTrailing:!0,text:r.text}):W.createElement(Qbe,{text:r.text}):W.createElement(twe,{isLineBreak:!0,isMarkPlaceholder:l})},Qbe=e=>{var{text:t,isTrailing:r=!1}=e,n=$.useRef(null),i=()=>"".concat(null!=t?t:"").concat(r?"\n":""),[s]=$.useState(i);return Gbe(()=>{var e=i();n.current&&n.current.textContent!==e&&(n.current.textContent=e)}),W.createElement(ewe,{ref:n},s)},ewe=$.memo($.forwardRef((e,t)=>W.createElement("span",{"data-slate-string":!0,ref:t},e.children))),twe=e=>{var{length:t=0,isLineBreak:r=!1,isMarkPlaceholder:n=!1}=e,i={"data-slate-zero-width":r?"n":"z","data-slate-length":t};return n&&(i["data-slate-mark-placeholder"]=!0),W.createElement("span",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zbe(Object(r),!0).forEach(function(t){S_e(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zbe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},i),(O_e||P_e)&&r?null:"\ufeff",r?W.createElement("br",null):null)};function rwe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function nwe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rwe(Object(r),!0).forEach(function(t){S_e(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rwe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var iwe=O_e?300:0;function swe(e){e.current&&(clearTimeout(e.current),e.current=null)}var owe=e=>{var{leaf:t,isLast:r,text:n,parent:i,renderPlaceholder:s,renderLeaf:o=e=>W.createElement(lwe,nwe({},e))}=e,a=D_e(),l=$.useRef(null),u=$.useRef(null),[c,d]=$.useState(!1),h=$.useRef(null),f=$.useCallback(e=>{if(function(e,t){e.current&&(e.current.disconnect(),t&&(e.current=null))}(l,null==e),null==e){var r;Y_e.delete(a),null===(r=t.onPlaceholderResize)||void 0===r||r.call(t,null)}else{if(Y_e.set(a,e),!l.current){var n=window.ResizeObserver||b_e;l.current=new n(()=>{var r;null===(r=t.onPlaceholderResize)||void 0===r||r.call(t,e)})}l.current.observe(e),u.current=e}},[u,t,a]),p=W.createElement(Jbe,{isLast:r,leaf:t,parent:i,text:n}),m=Boolean(t[hbe]);if($.useEffect(()=>(m?h.current||(h.current=setTimeout(()=>{d(!0),h.current=null},iwe)):(swe(h),d(!1)),()=>swe(h)),[m,d]),m&&c){var g={children:t.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",top:0,pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:F_e?"inherit":void 0},contentEditable:!1,ref:f}};p=W.createElement(W.Fragment,null,s(g),p)}return o({attributes:{"data-slate-leaf":!0},children:p,leaf:t,text:n})},awe=W.memo(owe,(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&$se.equals(t.leaf,e.leaf)&&t.leaf[hbe]===e.leaf[hbe]),lwe=e=>{var{attributes:t,children:r}=e;return W.createElement("span",nwe({},t),r)},uwe=e=>{for(var{decorations:t,isLast:r,parent:n,renderPlaceholder:i,renderLeaf:s,text:o}=e,a=D_e(),l=$.useRef(null),u=$se.decorations(o,t),c=Bbe.findKey(a,o),d=[],h=0;h<u.length;h++){var f=u[h];d.push(W.createElement(awe,{isLast:r&&h===u.length-1,key:"".concat(c.id,"-").concat(h),renderPlaceholder:i,leaf:f,text:o,parent:n,renderLeaf:s}))}var p=$.useCallback(e=>{var t=Q_e.get(a);e?(null==t||t.set(c,e),Z_e.set(o,e),K_e.set(e,o)):(null==t||t.delete(c),Z_e.delete(o),l.current&&K_e.delete(l.current)),l.current=e},[l,a,c,o]);return W.createElement("span",{"data-slate-node":"text",ref:p},d)},cwe=W.memo(uwe,(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&((e,t)=>{if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var n=e[r],i=t[r];if(n.anchor.offset!==i.anchor.offset||n.focus.offset!==i.focus.offset||!Kbe(n,i))return!1}return!0})(t.decorations,e.decorations));function dwe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function hwe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dwe(Object(r),!0).forEach(function(t){S_e(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dwe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var fwe=e=>{var{decorations:t,element:r,renderElement:n=e=>W.createElement(mwe,hwe({},e)),renderPlaceholder:i,renderLeaf:s,selection:o}=e,a=D_e(),l=bwe(),u=a.isInline(r),c=Bbe.findKey(a,r),d=$.useCallback(e=>{var t=Q_e.get(a);e?(null==t||t.set(c,e),Z_e.set(r,e),K_e.set(e,r)):(null==t||t.delete(c),Z_e.delete(r))},[a,c,r]),h=vwe({decorations:t,node:r,renderElement:n,renderPlaceholder:i,renderLeaf:s,selection:o}),f={"data-slate-node":"element",ref:d};if(u&&(f["data-slate-inline"]=!0),!u&&Rse.hasInlines(a,r)){var p=Dse.string(r),m=tve(p);"rtl"===m&&(f.dir=m)}if(Rse.isVoid(a,r)){f["data-slate-void"]=!0,!l&&u&&(f.contentEditable=!1);var g=u?"span":"div",[[y]]=Dse.texts(r);h=W.createElement(g,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},W.createElement(cwe,{renderPlaceholder:i,decorations:[],isLast:!1,parent:r,text:y})),$_e.set(y,0),W_e.set(y,r)}return n({attributes:f,children:h,element:r})},pwe=W.memo(fwe,(e,t)=>e.element===t.element&&e.renderElement===t.renderElement&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&((e,t)=>{if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var n=e[r],i=t[r];if(!xse.equals(n,i)||!Kbe(n,i))return!1}return!0})(e.decorations,t.decorations)&&(e.selection===t.selection||!!e.selection&&!!t.selection&&xse.equals(e.selection,t.selection))),mwe=e=>{var{attributes:t,children:r,element:n}=e,i=D_e().isInline(n)?"span":"div";return W.createElement(i,hwe(hwe({},t),{},{style:{position:"relative"}}),r)},gwe=$.createContext(()=>[]),ywe=$.createContext(!1),vwe=(e("dp",()=>$.useContext(ywe)),e=>{var{decorations:t,node:r,renderElement:n,renderPlaceholder:i,renderLeaf:s,selection:o}=e,a=$.useContext(gwe),l=D_e();H_e.set(l,!1);for(var u=Bbe.findPath(l,r),c=[],d=Sse.isElement(r)&&!l.isInline(r)&&Rse.hasInlines(l,r),h=0;h<r.children.length;h++){var f=u.concat(h),p=r.children[h],m=Bbe.findKey(l,p),g=Rse.range(l,f),y=o&&xse.intersection(g,o),v=a([p,f]);for(var _ of t){var b=xse.intersection(_,g);b&&v.push(b)}Sse.isElement(p)?c.push(W.createElement(ywe.Provider,{key:"provider-".concat(m.id),value:!!y},W.createElement(pwe,{decorations:v,element:p,key:m.id,renderElement:n,renderPlaceholder:i,renderLeaf:s,selection:y}))):c.push(W.createElement(cwe,{decorations:v,key:m.id,isLast:d&&h===r.children.length-1,parent:r,renderPlaceholder:i,renderLeaf:s,text:p})),$_e.set(p,h),W_e.set(p,r)}return c}),_we=$.createContext(!1),bwe=()=>$.useContext(_we),wwe=$.createContext(null),xwe=()=>{var e=$.useContext(wwe);if(!e)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");var{editor:t}=e;return t},Ewe={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},Swe={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},Cwe={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},Awe=e=>{var t=Ewe[e],r=Swe[e],n=Cwe[e],i=t&&zhe(t),s=r&&zhe(r),o=n&&zhe(n);return e=>!(!i||!i(e))||!!(B_e&&s&&s(e))||!(B_e||!o||!o(e))},Twe={isBold:Awe("bold"),isCompose:Awe("compose"),isMoveBackward:Awe("moveBackward"),isMoveForward:Awe("moveForward"),isDeleteBackward:Awe("deleteBackward"),isDeleteForward:Awe("deleteForward"),isDeleteLineBackward:Awe("deleteLineBackward"),isDeleteLineForward:Awe("deleteLineForward"),isDeleteWordBackward:Awe("deleteWordBackward"),isDeleteWordForward:Awe("deleteWordForward"),isExtendBackward:Awe("extendBackward"),isExtendForward:Awe("extendForward"),isExtendLineBackward:Awe("extendLineBackward"),isExtendLineForward:Awe("extendLineForward"),isItalic:Awe("italic"),isMoveLineBackward:Awe("moveLineBackward"),isMoveLineForward:Awe("moveLineForward"),isMoveWordBackward:Awe("moveWordBackward"),isMoveWordForward:Awe("moveWordForward"),isRedo:Awe("redo"),isSoftBreak:Awe("insertSoftBreak"),isSplitBlock:Awe("splitBlock"),isTransposeCharacter:Awe("transposeCharacter"),isUndo:Awe("undo")},Dwe={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};class kwe extends $.Component{constructor(){super(...arguments),S_e(this,"context",null),S_e(this,"manager",null),S_e(this,"mutationObserver",null)}observe(){var e,{node:t}=this.props;if(!t.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");null===(e=this.mutationObserver)||void 0===e||e.observe(t.current,Dwe)}componentDidMount(){var{receivedUserInput:e}=this.props,t=this.context;this.manager=((e,t)=>{var r=[],n=()=>{r=[]};return{registerMutations:n=>{if(t.current){var i=n.filter(t=>Tbe(e,t,n));r.push(...i)}},restoreDOM:function(){r.length>0&&(r.reverse().forEach(e=>{"characterData"!==e.type&&(e.removedNodes.forEach(t=>{e.target.insertBefore(t,e.nextSibling)}),e.addedNodes.forEach(t=>{e.target.removeChild(t)}))}),n())},clear:n}})(t,e),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var e,t,r,n,i=null===(e=this.mutationObserver)||void 0===e?void 0:e.takeRecords();return null!=i&&i.length&&(null===(n=this.manager)||void 0===n||n.registerMutations(i)),null===(t=this.mutationObserver)||void 0===t||t.disconnect(),null===(r=this.manager)||void 0===r||r.restoreDOM(),null}componentDidUpdate(){var e;null===(e=this.manager)||void 0===e||e.clear(),this.observe()}componentWillUnmount(){var e;null===(e=this.mutationObserver)||void 0===e||e.disconnect()}render(){return this.props.children}}S_e(kwe,"contextType",T_e);var Pwe=O_e?kwe:e=>{var{children:t}=e;return W.createElement(W.Fragment,null,t)},Bwe=$.createContext(!1),Owe=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],Rwe=["text"];function Fwe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Iwe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fwe(Object(r),!0).forEach(function(t){S_e(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fwe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Mwe=e=>W.createElement(W.Fragment,null,vwe(e)),Nwe=$.forwardRef((e,t)=>{var r=$.useCallback(e=>W.createElement(Lwe,Iwe({},e)),[]),{autoFocus:n,decorate:i=Uwe,onDOMBeforeInput:s,placeholder:o,readOnly:a=!1,renderElement:l,renderLeaf:u,renderPlaceholder:c=r,scrollSelectionIntoView:d=jwe,style:h={},as:f="div",disableDefaultStyles:p=!1}=e,m=w_e(e,Owe),g=xwe(),[y,v]=$.useState(!1),_=$.useRef(null),b=$.useRef([]),[w,x]=$.useState(),E=$.useRef(!1),{onUserInput:S,receivedUserInput:C}=function(){var e=D_e(),t=$.useRef(!1),r=$.useRef(0),n=$.useCallback(()=>{if(!t.current){t.current=!0;var n=Bbe.getWindow(e);n.cancelAnimationFrame(r.current),r.current=n.requestAnimationFrame(()=>{t.current=!1})}},[e]);return $.useEffect(()=>()=>cancelAnimationFrame(r.current),[]),{receivedUserInput:t,onUserInput:n}}(),[,A]=$.useReducer(e=>e+1,0);dbe.set(g,A),ebe.set(g,a);var T=$.useMemo(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);$.useEffect(()=>{_.current&&n&&_.current.focus()},[n]);var D=$.useRef(),k=$.useMemo(()=>Cve(()=>{if(H_e.get(g))k();else{var e=Bbe.toDOMNode(g,g).getRootNode();if(!E.current&&F_e&&e instanceof ShadowRoot){E.current=!0;var t=(()=>{for(var e=document.activeElement;null!==(t=e)&&void 0!==t&&t.shadowRoot&&null!==(r=e.shadowRoot)&&void 0!==r&&r.activeElement;){var t,r,n;e=null===(n=e)||void 0===n||null===(n=n.shadowRoot)||void 0===n?void 0:n.activeElement}return e})();return t?document.execCommand("indent"):Eoe.deselect(g),void(E.current=!1)}var r=D.current;if((O_e||!Bbe.isComposing(g))&&(!T.isUpdatingSelection||null!=r&&r.isFlushing())&&!T.isDraggingInternally){var n=Bbe.findDocumentOrShadowRoot(g),{activeElement:i}=n,s=Bbe.toDOMNode(g,g),o=Abe(n);if(i===s?(T.latestElement=i,tbe.set(g,!0)):tbe.delete(g),!o)return Eoe.deselect(g);var{anchorNode:l,focusNode:u}=o,c=Bbe.hasEditableTarget(g,l)||Bbe.isTargetInsideNonReadonlyVoid(g,l),d=Bbe.hasTarget(g,u);if(c&&d){var h=Bbe.toSlateRange(g,o,{exactMatch:!1,suppressThrow:!0});h&&(Bbe.isComposing(g)||null!=r&&r.hasPendingChanges()||null!=r&&r.isFlushing()?null==r||r.handleUserSelect(h):Eoe.select(g,h))}!a||c&&d||Eoe.deselect(g)}}},100),[g,a,T]),P=$.useMemo(()=>wve(k,0),[k]);D.current=qbe({node:_,onDOMSelectionChange:k,scheduleOnDOMSelectionChange:P}),Gbe(()=>{var e,t,r;_.current&&(r=gbe(_.current))?(q_e.set(g,r),X_e.set(g,_.current),Z_e.set(g,_.current),K_e.set(_.current,g)):Z_e.delete(g);var{selection:n}=g,i=Bbe.findDocumentOrShadowRoot(g),s=Abe(i);if(s&&Bbe.isFocused(g)&&(null===(e=D.current)||void 0===e||!e.hasPendingAction())){var o=e=>{var t="None"!==s.type;if(n||t){var r,i=s.focusNode;if(R_e&&s.rangeCount>1){var o=s.getRangeAt(0),a=s.getRangeAt(s.rangeCount-1);r=o.startContainer===i?a.endContainer:o.startContainer}else r=s.anchorNode;var l=X_e.get(g),u=!1;if(l.contains(r)&&l.contains(i)&&(u=!0),t&&u&&n&&!e){var c=Bbe.toSlateRange(g,s,{exactMatch:!0,suppressThrow:!0});if(c&&xse.equals(c,n)){var h;if(!T.hasMarkPlaceholder)return;if(null!==(h=r)&&void 0!==h&&null!==(h=h.parentElement)&&void 0!==h&&h.hasAttribute("data-slate-mark-placeholder"))return}}if(!n||Bbe.hasRange(g,n)){T.isUpdatingSelection=!0;var f=n&&Bbe.toDOMRange(g,n);return f?(Bbe.isComposing(g)&&!O_e?s.collapseToEnd():xse.isBackward(n)?s.setBaseAndExtent(f.endContainer,f.endOffset,f.startContainer,f.startOffset):s.setBaseAndExtent(f.startContainer,f.startOffset,f.endContainer,f.endOffset),d(g,f)):s.removeAllRanges(),f}g.selection=Bbe.toSlateRange(g,s,{exactMatch:!1,suppressThrow:!0})}};s.rangeCount<=1&&o();var a="action"===(null===(t=D.current)||void 0===t?void 0:t.isFlushing());if(O_e&&a){var l=null,u=requestAnimationFrame(()=>{if(a){var e=e=>{try{Bbe.toDOMNode(g,g).focus(),o(e)}catch(Ove){}};e(),l=setTimeout(()=>{e(!0),T.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(u),l&&clearTimeout(l)}}setTimeout(()=>{T.isUpdatingSelection=!1})}});var B=$.useCallback(e=>{var t=Bbe.toDOMNode(g,g).getRootNode();if(null!=E&&E.current&&F_e&&t instanceof ShadowRoot){var r=e.getTargetRanges()[0],n=new window.Range;n.setStart(r.startContainer,r.startOffset),n.setEnd(r.endContainer,r.endOffset);var i=Bbe.toSlateRange(g,n,{exactMatch:!1,suppressThrow:!1});return Eoe.select(g,i),e.preventDefault(),void e.stopImmediatePropagation()}if(S(),!a&&Bbe.hasEditableTarget(g,e.target)&&!Gwe(e,s)){var o;if(D.current)return D.current.handleDOMBeforeInput(e);P.flush(),k.flush();var{selection:l}=g,{inputType:u}=e,c=e.dataTransfer||e.data||void 0,d="insertCompositionText"===u||"deleteCompositionText"===u;if(d&&Bbe.isComposing(g))return;var h=!1;if("insertText"===u&&l&&xse.isCollapsed(l)&&e.data&&1===e.data.length&&/[a-z ]/i.test(e.data)&&0!==l.anchor.offset&&(h=!0,g.marks&&(h=!1),!H_e.get(g))){var f,p,{anchor:m}=l,[y,_]=Bbe.toDOMPoint(g,m),w=null===(f=y.parentElement)||void 0===f?void 0:f.closest("a"),x=Bbe.getWindow(g);if(h&&w&&Bbe.hasDOMNode(g,w)){var C,A=null==x?void 0:x.document.createTreeWalker(w,NodeFilter.SHOW_TEXT).lastChild();A===y&&(null===(C=A.textContent)||void 0===C?void 0:C.length)===_&&(h=!1)}if(h&&y.parentElement&&"pre"===(null==x||null===(p=x.getComputedStyle(y.parentElement))||void 0===p?void 0:p.whiteSpace)){var T=Rse.above(g,{at:m.path,match:e=>Sse.isElement(e)&&Rse.isBlock(g,e)});T&&Dse.string(T[0]).includes("\t")&&(h=!1)}}if((!u.startsWith("delete")||u.startsWith("deleteBy"))&&!H_e.get(g)){var[B]=e.getTargetRanges();if(B){var O=Bbe.toSlateRange(g,B,{exactMatch:!1,suppressThrow:!1});if(!l||!xse.equals(l,O)){h=!1;var R=!d&&g.selection&&Rse.rangeRef(g,g.selection);Eoe.select(g,O),R&&nbe.set(g,R)}}}if(d)return;if(h||e.preventDefault(),l&&xse.isExpanded(l)&&u.startsWith("delete")){var F=u.endsWith("Backward")?"backward":"forward";return void Rse.deleteFragment(g,{direction:F})}switch(u){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":Rse.deleteFragment(g);break;case"deleteContent":case"deleteContentForward":Rse.deleteForward(g);break;case"deleteContentBackward":Rse.deleteBackward(g);break;case"deleteEntireSoftLine":Rse.deleteBackward(g,{unit:"line"}),Rse.deleteForward(g,{unit:"line"});break;case"deleteHardLineBackward":Rse.deleteBackward(g,{unit:"block"});break;case"deleteSoftLineBackward":Rse.deleteBackward(g,{unit:"line"});break;case"deleteHardLineForward":Rse.deleteForward(g,{unit:"block"});break;case"deleteSoftLineForward":Rse.deleteForward(g,{unit:"line"});break;case"deleteWordBackward":Rse.deleteBackward(g,{unit:"word"});break;case"deleteWordForward":Rse.deleteForward(g,{unit:"word"});break;case"insertLineBreak":Rse.insertSoftBreak(g);break;case"insertParagraph":Rse.insertBreak(g);break;case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":"insertFromComposition"===u&&Bbe.isComposing(g)&&(v(!1),rbe.set(g,!1)),"DataTransfer"===(null==c?void 0:c.constructor.name)?Bbe.insertData(g,c):"string"==typeof c&&(h?b.current.push(()=>Rse.insertText(g,c)):Rse.insertText(g,c))}var I=null===(o=nbe.get(g))||void 0===o?void 0:o.unref();nbe.delete(g),!I||g.selection&&xse.equals(g.selection,I)||Eoe.select(g,I)}},[g,k,S,s,a,P]),O=$.useCallback(e=>{null==e?(k.cancel(),P.cancel(),X_e.delete(g),Z_e.delete(g),_.current&&G_e&&_.current.removeEventListener("beforeinput",B)):G_e&&e.addEventListener("beforeinput",B),_.current=e,"function"==typeof t?t(e):t&&(t.current=e)},[k,P,g,B,t]);Gbe(()=>{var e=Bbe.getWindow(g);e.document.addEventListener("selectionchange",P);var t=()=>{T.isDraggingInternally=!1};return e.document.addEventListener("dragend",t),e.document.addEventListener("drop",t),()=>{e.document.removeEventListener("selectionchange",P),e.document.removeEventListener("dragend",t),e.document.removeEventListener("drop",t)}},[P,T]);var R=i([g,[]]),F=o&&1===g.children.length&&1===Array.from(Dse.texts(g)).length&&""===Dse.string(g)&&!y,I=$.useCallback(e=>{var t;x(e&&F?null===(t=e.getBoundingClientRect())||void 0===t?void 0:t.height:void 0)},[F]);if(F){var M=Rse.start(g,[]);R.push({[hbe]:!0,placeholder:o,onPlaceholderResize:I,anchor:M,focus:M})}var{marks:N}=g;if(T.hasMarkPlaceholder=!1,g.selection&&xse.isCollapsed(g.selection)&&N){var{anchor:L}=g.selection,U=Dse.leaf(g,L.path),j=w_e(U,Rwe);if(!$se.equals(U,N,{loose:!0})){T.hasMarkPlaceholder=!0;var z=Object.fromEntries(Object.keys(j).map(e=>[e,null]));R.push(Iwe(Iwe(Iwe({[fbe]:!0},z),N),{},{anchor:L,focus:L}))}}return $.useEffect(()=>{setTimeout(()=>{var{selection:e}=g;if(e){var{anchor:t}=e,r=Dse.leaf(g,t.path);if(N&&!$se.equals(r,N,{loose:!0}))return void obe.set(g,N)}obe.delete(g)})}),W.createElement(_we.Provider,{value:a},W.createElement(Bwe.Provider,{value:y},W.createElement(gwe.Provider,{value:i},W.createElement(Pwe,{node:_,receivedUserInput:C},W.createElement(f,Iwe(Iwe({role:a?void 0:"textbox","aria-multiline":!a||void 0},m),{},{spellCheck:!(!G_e&&V_e)&&m.spellCheck,autoCorrect:G_e||!V_e?m.autoCorrect:"false",autoCapitalize:G_e||!V_e?m.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!a,zindex:-1,suppressContentEditableWarning:!0,ref:O,style:Iwe(Iwe({},p?{}:Iwe({position:"relative",whiteSpace:"pre-wrap",wordWrap:"break-word"},w?{minHeight:w}:{})),h),onBeforeInput:$.useCallback(e=>{if(!G_e&&!a&&!zwe(e,m.onBeforeInput)&&Bbe.hasSelectableTarget(g,e.target)&&(e.preventDefault(),!Bbe.isComposing(g))){var t=e.data;Rse.insertText(g,t)}},[m.onBeforeInput,g,a]),onInput:$.useCallback(e=>{if(!zwe(e,m.onInput))if(D.current)D.current.handleInput();else{for(var t of b.current)t();if(b.current=[],!Bbe.isFocused(g)){var r=e.nativeEvent,n=g;if("historyUndo"===r.inputType&&"function"==typeof n.undo)return void n.undo();if("historyRedo"===r.inputType&&"function"==typeof n.redo)return void n.redo()}}},[m.onInput,g]),onBlur:$.useCallback(e=>{if(!a&&!T.isUpdatingSelection&&Bbe.hasSelectableTarget(g,e.target)&&!zwe(e,m.onBlur)){var t=Bbe.findDocumentOrShadowRoot(g);if(T.latestElement!==t.activeElement){var{relatedTarget:r}=e;if(!(r===Bbe.toDOMNode(g,g)||vbe(r)&&r.hasAttribute("data-slate-spacer"))){if(null!=r&&_be(r)&&Bbe.hasDOMNode(g,r)){var n=Bbe.toSlateNode(g,r);if(Sse.isElement(n)&&!g.isVoid(n))return}if(F_e){var i=Abe(t);null==i||i.removeAllRanges()}tbe.delete(g)}}}},[a,T.isUpdatingSelection,T.latestElement,g,m.onBlur]),onClick:$.useCallback(e=>{if(Bbe.hasTarget(g,e.target)&&!zwe(e,m.onClick)&&_be(e.target)){var t=Bbe.toSlateNode(g,e.target),r=Bbe.findPath(g,t);if(!Rse.hasPath(g,r)||Dse.get(g,r)!==t)return;if(3===e.detail&&r.length>=1){var n=r;if(!Sse.isElement(t)||!Rse.isBlock(g,t)){var i,s=Rse.above(g,{match:e=>Sse.isElement(e)&&Rse.isBlock(g,e),at:r});n=null!==(i=null==s?void 0:s[1])&&void 0!==i?i:r.slice(0,1)}var o=Rse.range(g,n);return void Eoe.select(g,o)}if(a)return;var l=Rse.start(g,r),u=Rse.end(g,r),c=Rse.void(g,{at:l}),d=Rse.void(g,{at:u});if(c&&d&&use.equals(c[1],d[1])){var h=Rse.range(g,l);Eoe.select(g,h)}}},[g,m.onClick,a]),onCompositionEnd:$.useCallback(e=>{if(Bbe.hasSelectableTarget(g,e.target)){var t;if(Bbe.isComposing(g)&&Promise.resolve().then(()=>{v(!1),rbe.set(g,!1)}),null===(t=D.current)||void 0===t||t.handleCompositionEnd(e),zwe(e,m.onCompositionEnd)||O_e)return;if(!F_e&&!U_e&&!P_e&&!z_e&&!j_e&&e.data){var r=obe.get(g);obe.delete(g),void 0!==r&&(abe.set(g,g.marks),g.marks=r),Rse.insertText(g,e.data);var n=abe.get(g);abe.delete(g),void 0!==n&&(g.marks=n)}}},[m.onCompositionEnd,g]),onCompositionUpdate:$.useCallback(e=>{Bbe.hasSelectableTarget(g,e.target)&&!zwe(e,m.onCompositionUpdate)&&(Bbe.isComposing(g)||(v(!0),rbe.set(g,!0)))},[m.onCompositionUpdate,g]),onCompositionStart:$.useCallback(e=>{if(Bbe.hasSelectableTarget(g,e.target)){var t;if(null===(t=D.current)||void 0===t||t.handleCompositionStart(e),zwe(e,m.onCompositionStart)||O_e)return;v(!0);var{selection:r}=g;if(r&&xse.isExpanded(r))return void Rse.deleteFragment(g)}},[m.onCompositionStart,g]),onCopy:$.useCallback(e=>{!Bbe.hasSelectableTarget(g,e.target)||zwe(e,m.onCopy)||Vwe(e)||(e.preventDefault(),Bbe.setFragmentData(g,e.clipboardData,"copy"))},[m.onCopy,g]),onCut:$.useCallback(e=>{if(!a&&Bbe.hasSelectableTarget(g,e.target)&&!zwe(e,m.onCut)&&!Vwe(e)){e.preventDefault(),Bbe.setFragmentData(g,e.clipboardData,"cut");var{selection:t}=g;if(t)if(xse.isExpanded(t))Rse.deleteFragment(g);else{var r=Dse.parent(g,t.anchor.path);Rse.isVoid(g,r)&&Eoe.delete(g)}}},[a,g,m.onCut]),onDragOver:$.useCallback(e=>{if(Bbe.hasTarget(g,e.target)&&!zwe(e,m.onDragOver)){var t=Bbe.toSlateNode(g,e.target);Sse.isElement(t)&&Rse.isVoid(g,t)&&e.preventDefault()}},[m.onDragOver,g]),onDragStart:$.useCallback(e=>{if(!a&&Bbe.hasTarget(g,e.target)&&!zwe(e,m.onDragStart)){var t=Bbe.toSlateNode(g,e.target),r=Bbe.findPath(g,t);if(Sse.isElement(t)&&Rse.isVoid(g,t)||Rse.void(g,{at:r,voids:!0})){var n=Rse.range(g,r);Eoe.select(g,n)}T.isDraggingInternally=!0,Bbe.setFragmentData(g,e.dataTransfer,"drag")}},[a,g,m.onDragStart,T]),onDrop:$.useCallback(e=>{if(!a&&Bbe.hasTarget(g,e.target)&&!zwe(e,m.onDrop)){e.preventDefault();var t=g.selection,r=Bbe.findEventRange(g,e),n=e.dataTransfer;Eoe.select(g,r),T.isDraggingInternally&&(!t||xse.equals(t,r)||Rse.void(g,{at:r,voids:!0})||Eoe.delete(g,{at:t})),Bbe.insertData(g,n),Bbe.isFocused(g)||Bbe.focus(g)}},[a,g,m.onDrop,T]),onDragEnd:$.useCallback(e=>{!a&&T.isDraggingInternally&&m.onDragEnd&&Bbe.hasTarget(g,e.target)&&m.onDragEnd(e)},[a,T,m,g]),onFocus:$.useCallback(e=>{if(!a&&!T.isUpdatingSelection&&Bbe.hasEditableTarget(g,e.target)&&!zwe(e,m.onFocus)){var t=Bbe.toDOMNode(g,g),r=Bbe.findDocumentOrShadowRoot(g);if(T.latestElement=r.activeElement,R_e&&e.target!==t)return void t.focus();tbe.set(g,!0)}},[a,T,g,m.onFocus]),onKeyDown:$.useCallback(e=>{if(!a&&Bbe.hasEditableTarget(g,e.target)){var t;null===(t=D.current)||void 0===t||t.handleKeyDown(e);var{nativeEvent:r}=e;if(Bbe.isComposing(g)&&!1===r.isComposing&&(rbe.set(g,!1),v(!1)),zwe(e,m.onKeyDown)||Bbe.isComposing(g))return;var{selection:n}=g,i=g.children[null!==n?n.focus.path[0]:0],s="rtl"===tve(Dse.string(i));if(Twe.isRedo(r)){e.preventDefault();var o=g;return void("function"==typeof o.redo&&o.redo())}if(Twe.isUndo(r)){e.preventDefault();var l=g;return void("function"==typeof l.undo&&l.undo())}if(Twe.isMoveLineBackward(r))return e.preventDefault(),void Eoe.move(g,{unit:"line",reverse:!0});if(Twe.isMoveLineForward(r))return e.preventDefault(),void Eoe.move(g,{unit:"line"});if(Twe.isExtendLineBackward(r))return e.preventDefault(),void Eoe.move(g,{unit:"line",edge:"focus",reverse:!0});if(Twe.isExtendLineForward(r))return e.preventDefault(),void Eoe.move(g,{unit:"line",edge:"focus"});if(Twe.isMoveBackward(r))return e.preventDefault(),void(n&&xse.isCollapsed(n)?Eoe.move(g,{reverse:!s}):Eoe.collapse(g,{edge:s?"end":"start"}));if(Twe.isMoveForward(r))return e.preventDefault(),void(n&&xse.isCollapsed(n)?Eoe.move(g,{reverse:s}):Eoe.collapse(g,{edge:s?"start":"end"}));if(Twe.isMoveWordBackward(r))return e.preventDefault(),n&&xse.isExpanded(n)&&Eoe.collapse(g,{edge:"focus"}),void Eoe.move(g,{unit:"word",reverse:!s});if(Twe.isMoveWordForward(r))return e.preventDefault(),n&&xse.isExpanded(n)&&Eoe.collapse(g,{edge:"focus"}),void Eoe.move(g,{unit:"word",reverse:s});if(G_e){if((M_e||F_e)&&n&&(Twe.isDeleteBackward(r)||Twe.isDeleteForward(r))&&xse.isCollapsed(n)){var u=Dse.parent(g,n.anchor.path);if(Sse.isElement(u)&&Rse.isVoid(g,u)&&(Rse.isInline(g,u)||Rse.isBlock(g,u)))return e.preventDefault(),void Rse.deleteBackward(g,{unit:"block"})}}else{if(Twe.isBold(r)||Twe.isItalic(r)||Twe.isTransposeCharacter(r))return void e.preventDefault();if(Twe.isSoftBreak(r))return e.preventDefault(),void Rse.insertSoftBreak(g);if(Twe.isSplitBlock(r))return e.preventDefault(),void Rse.insertBreak(g);if(Twe.isDeleteBackward(r))return e.preventDefault(),void(n&&xse.isExpanded(n)?Rse.deleteFragment(g,{direction:"backward"}):Rse.deleteBackward(g));if(Twe.isDeleteForward(r))return e.preventDefault(),void(n&&xse.isExpanded(n)?Rse.deleteFragment(g,{direction:"forward"}):Rse.deleteForward(g));if(Twe.isDeleteLineBackward(r))return e.preventDefault(),void(n&&xse.isExpanded(n)?Rse.deleteFragment(g,{direction:"backward"}):Rse.deleteBackward(g,{unit:"line"}));if(Twe.isDeleteLineForward(r))return e.preventDefault(),void(n&&xse.isExpanded(n)?Rse.deleteFragment(g,{direction:"forward"}):Rse.deleteForward(g,{unit:"line"}));if(Twe.isDeleteWordBackward(r))return e.preventDefault(),void(n&&xse.isExpanded(n)?Rse.deleteFragment(g,{direction:"backward"}):Rse.deleteBackward(g,{unit:"word"}));if(Twe.isDeleteWordForward(r))return e.preventDefault(),void(n&&xse.isExpanded(n)?Rse.deleteFragment(g,{direction:"forward"}):Rse.deleteForward(g,{unit:"word"}))}}},[a,g,m.onKeyDown]),onPaste:$.useCallback(e=>{a||!Bbe.hasEditableTarget(g,e.target)||zwe(e,m.onPaste)||(!G_e||(e=>e.clipboardData&&""!==e.clipboardData.getData("text/plain")&&1===e.clipboardData.types.length)(e.nativeEvent)||F_e)&&(e.preventDefault(),Bbe.insertData(g,e.clipboardData))},[a,g,m.onPaste])}),W.createElement(Mwe,{decorations:R,node:g,renderElement:l,renderPlaceholder:c,renderLeaf:u,selection:g.selection}))))))}),Lwe=e=>{var{attributes:t,children:r}=e;return W.createElement("span",Iwe({},t),r,O_e&&W.createElement("br",null))},Uwe=()=>[],jwe=(e,t)=>{if(t.getBoundingClientRect&&(!e.selection||e.selection&&xse.isCollapsed(e.selection))){var r=t.startContainer.parentElement;r.getBoundingClientRect=t.getBoundingClientRect.bind(t),Ove(r,{scrollMode:"if-needed"}),delete r.getBoundingClientRect}},zwe=(e,t)=>{if(!t)return!1;var r=t(e);return null!=r?r:e.isDefaultPrevented()||e.isPropagationStopped()},Vwe=e=>_be(e.target)&&(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement),Gwe=(e,t)=>{if(!t)return!1;var r=t(e);return null!=r?r:e.defaultPrevented},Hwe=$.createContext(!1),$we=e("dq",()=>$.useContext(Hwe)),Wwe=$.createContext({}),qwe=["editor","children","onChange","onSelectionChange","onValueChange","initialValue"],Xwe=e=>{var{editor:t,children:r,onChange:n,onSelectionChange:i,onValueChange:s,initialValue:o}=e,a=w_e(e,qwe),[l,u]=W.useState(()=>{if(!Dse.isNodeList(o))throw new Error("[Slate] initialValue is invalid! Expected a list of elements but got: ".concat(Use.stringify(o)));if(!Rse.isEditor(t))throw new Error("[Slate] editor is invalid! You passed: ".concat(Use.stringify(t)));return t.children=o,Object.assign(t,a),{v:0,editor:t}}),{selectorContext:c,onChange:d}=function(e){var t=$.useRef([]).current,r=$.useRef({editor:e}).current,n=$.useCallback(e=>{r.editor=e,t.forEach(t=>t(e))},[t,r]);return{selectorContext:$.useMemo(()=>({getSlate:()=>r.editor,addEventListener:e=>(t.push(e),()=>{t.splice(t.indexOf(e),1)})}),[t,r]),onChange:n}}(t),h=$.useCallback(e=>{var r;n&&n(t.children),"set_selection"===(null==e||null===(r=e.operation)||void 0===r?void 0:r.type)?null==i||i(t.selection):null==s||s(t.children),u(e=>({v:e.v+1,editor:t})),d(t)},[t,d,n,i,s]);$.useEffect(()=>(ibe.set(t,h),()=>{ibe.set(t,()=>{})}),[t,h]);var[f,p]=$.useState(Bbe.isFocused(t));return $.useEffect(()=>{p(Bbe.isFocused(t))},[t]),Gbe(()=>{var e=()=>p(Bbe.isFocused(t));return k_e>=17?(document.addEventListener("focusin",e),document.addEventListener("focusout",e),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",e)}):(document.addEventListener("focus",e,!0),document.addEventListener("blur",e,!0),()=>{document.removeEventListener("focus",e,!0),document.removeEventListener("blur",e,!0)})},[]),W.createElement(Wwe.Provider,{value:c},W.createElement(wwe.Provider,{value:l},W.createElement(T_e.Provider,{value:l.editor},W.createElement(Hwe.Provider,{value:f},r))))},Ywe=(e,t)=>{var r=(t.top+t.bottom)/2;return e.top<=r&&e.bottom>=r},Kwe=(e,t,r)=>{var n=Bbe.toDOMRange(e,t).getBoundingClientRect(),i=Bbe.toDOMRange(e,r).getBoundingClientRect();return Ywe(n,i)&&Ywe(i,n)};function Zwe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Jwe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zwe(Object(r),!0).forEach(function(t){S_e(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zwe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Qwe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x-slate-fragment",r=e,{apply:n,onChange:i,deleteBackward:s,addMark:o,removeMark:a}=r;return Q_e.set(r,new WeakMap),r.addMark=(e,t)=>{var n,i;null===(n=sbe.get(r))||void 0===n||n(),!obe.get(r)&&null!==(i=lbe.get(r))&&void 0!==i&&i.length&&obe.set(r,null),abe.delete(r),o(e,t)},r.removeMark=e=>{var t;!obe.get(r)&&null!==(t=lbe.get(r))&&void 0!==t&&t.length&&obe.set(r,null),abe.delete(r),a(e)},r.deleteBackward=e=>{if("line"!==e)return s(e);if(r.selection&&xse.isCollapsed(r.selection)){var t=Rse.above(r,{match:e=>Sse.isElement(e)&&Rse.isBlock(r,e),at:r.selection});if(t){var[,n]=t,i=Rse.range(r,n,r.selection.anchor),o=((e,t)=>{var r=Rse.range(e,xse.end(t)),n=Array.from(Rse.positions(e,{at:t})),i=0,s=n.length,o=Math.floor(s/2);if(Kwe(e,Rse.range(e,n[i]),r))return Rse.range(e,n[i],r);if(n.length<2)return Rse.range(e,n[n.length-1],r);for(;o!==n.length&&o!==i;)Kwe(e,Rse.range(e,n[o]),r)?s=o:i=o,o=Math.floor((i+s)/2);return Rse.range(e,n[s],r)})(r,i);xse.isCollapsed(o)||Eoe.delete(r,{at:o})}}},r.apply=t=>{var i=[],s=[],o=lbe.get(r);if(null!=o&&o.length){var a=o.map(e=>function(e,t){var{path:r,diff:n,id:i}=e;switch(t.type){case"insert_text":return!use.equals(t.path,r)||t.offset>=n.end?e:t.offset<=n.start?{diff:{start:t.text.length+n.start,end:t.text.length+n.end,text:n.text},id:i,path:r}:{diff:{start:n.start,end:n.end+t.text.length,text:n.text},id:i,path:r};case"remove_text":return!use.equals(t.path,r)||t.offset>=n.end?e:t.offset+t.text.length<=n.start?{diff:{start:n.start-t.text.length,end:n.end-t.text.length,text:n.text},id:i,path:r}:{diff:{start:n.start,end:n.end-t.text.length,text:n.text},id:i,path:r};case"split_node":return!use.equals(t.path,r)||t.position>=n.end?{diff:n,id:i,path:use.transform(r,t,{affinity:"backward"})}:t.position>n.start?{diff:{start:n.start,end:Math.min(t.position,n.end),text:n.text},id:i,path:r}:{diff:{start:n.start-t.position,end:n.end-t.position,text:n.text},id:i,path:use.transform(r,t,{affinity:"forward"})};case"merge_node":return use.equals(t.path,r)?{diff:{start:n.start+t.position,end:n.end+t.position,text:n.text},id:i,path:use.transform(r,t)}:{diff:n,id:i,path:use.transform(r,t)}}var s=use.transform(r,t);return s?{diff:n,path:s,id:i}:null}(e,t)).filter(Boolean);lbe.set(r,a)}var l=cbe.get(r);l&&cbe.set(r,Ube(r,l,t));var u=ube.get(r);if(null!=u&&u.at){var c=Nse.isPoint(null==u?void 0:u.at)?Lbe(r,u.at,t):Ube(r,u.at,t);ube.set(r,c?Jwe(Jwe({},u),{},{at:c}):null)}switch(t.type){case"insert_text":case"remove_text":case"set_node":case"split_node":i.push(...exe(r,t.path));break;case"set_selection":var d;null===(d=nbe.get(r))||void 0===d||d.unref(),nbe.delete(r);break;case"insert_node":case"remove_node":i.push(...exe(r,use.parent(t.path)));break;case"merge_node":var h=use.previous(t.path);i.push(...exe(r,h));break;case"move_node":var f,p=use.common(use.parent(t.path),use.parent(t.newPath));i.push(...exe(r,p)),use.isBefore(t.path,t.newPath)?(i.push(...exe(r,use.parent(t.path))),f=t.newPath):(i.push(...exe(r,use.parent(t.newPath))),f=t.path);var m=Dse.get(e,use.parent(f)),g=Bbe.findKey(r,m),y=Rse.pathRef(r,use.parent(f));s.push([y,g])}switch(n(t),t.type){case"insert_node":case"remove_node":case"merge_node":case"move_node":case"split_node":H_e.set(r,!0)}for(var[v,_]of i){var[b]=Rse.node(r,v);J_e.set(b,_)}for(var[w,x]of s){if(w.current){var[E]=Rse.node(r,w.current);J_e.set(E,x)}w.unref()}},r.setFragmentData=e=>{var{selection:n}=r;if(n){var[i,s]=xse.edges(n),o=Rse.void(r,{at:i.path}),a=Rse.void(r,{at:s.path});if(!xse.isCollapsed(n)||o){var l=Bbe.toDOMRange(r,n),u=l.cloneContents(),c=u.childNodes[0];if(u.childNodes.forEach(e=>{e.textContent&&""!==e.textContent.trim()&&(c=e)}),a){var[d]=a,h=l.cloneRange(),f=Bbe.toDOMNode(r,d);h.setEndAfter(f),u=h.cloneContents()}if(o&&(c=u.querySelector("[data-slate-spacer]")),Array.from(u.querySelectorAll("[data-slate-zero-width]")).forEach(e=>{var t="n"===e.getAttribute("data-slate-zero-width");e.textContent=t?"\n":""}),wbe(c)){var p=c.ownerDocument.createElement("span");p.style.whiteSpace="pre",p.appendChild(c),u.appendChild(p),c=p}var m=r.getFragment(),g=JSON.stringify(m),y=window.btoa(encodeURIComponent(g));c.setAttribute("data-slate-fragment",y),e.setData("application/".concat(t),y);var v=u.ownerDocument.createElement("div");return v.appendChild(u),v.setAttribute("hidden","true"),u.ownerDocument.body.appendChild(v),e.setData("text/html",v.innerHTML),e.setData("text/plain",Sbe(v)),u.ownerDocument.body.removeChild(v),e}}},r.insertData=e=>{r.insertFragmentData(e)||r.insertTextData(e)},r.insertFragmentData=e=>{var n=e.getData("application/".concat(t))||(e=>{var t=e.getData("text/html"),[,r]=t.match(Cbe)||[];return r})(e);if(n){var i=decodeURIComponent(window.atob(n)),s=JSON.parse(i);return r.insertFragment(s),!0}return!1},r.insertTextData=e=>{var t=e.getData("text/plain");if(t){var n=t.split(/\r\n|\r|\n/),i=!1;for(var s of n)i&&Eoe.splitNodes(r,{always:!0}),r.insertText(s),i=!0;return!0}return!1},r.onChange=e=>{(k_e<18?ud.unstable_batchedUpdates:e=>e())(()=>{var t=ibe.get(r);t&&t(e),i(e)})},r},exe=(e,t)=>{var r=[];for(var[n,i]of Rse.levels(e,{at:t})){var s=Bbe.findKey(e,n);r.push([i,s])}return r},txe=e("df",(e,t)=>{t&&Cae(e,()=>{(e=>{Eoe.deselect(e)})(e),Dae(e,t)}),Bbe.focus(e)}),rxe=ude,nxe=Xpe,ixe=mde,sxe=kle,oxe=Kpe,axe=function(e,t,r,n){if(!sxe(e))return e;for(var i=-1,s=(t=nxe(t,e)).length,o=s-1,a=e;null!=a&&++i<s;){var l=oxe(t[i]),u=r;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(i!=o){var c=a[l];void 0===(u=n?n(c,l,a):void 0)&&(u=sxe(c)?c:ixe(t[i+1])?[]:{})}rxe(a,l,u),a=a[l]}return e},lxe=Qpe,uxe=axe,cxe=Xpe,dxe=function(e,t,r){for(var n=-1,i=t.length,s={};++n<i;){var o=t[n],a=lxe(e,o);r(a,o)&&uxe(s,cxe(o,e),a)}return s},hxe=dxe,fxe=ume,pxe=function(e,t){return hxe(e,t,function(t,r){return fxe(e,r)})},mxe=Ace,gxe=Tce,yxe=yle?yle.isConcatSpreadable:void 0,vxe=mfe,_xe=function(e){return gxe(e)||mxe(e)||!!(yxe&&e&&e[yxe])},bxe=function e(t,r,n,i,s){var o=-1,a=t.length;for(n||(n=_xe),s||(s=[]);++o<a;){var l=t[o];r>0&&n(l)?r>1?e(l,r-1,n,i,s):vxe(s,l):i||(s[s.length]=l)}return s},wxe=bxe,xxe=function(e){return null!=e&&e.length?wxe(e,1):[]},Exe=ahe,Sxe=phe,Cxe=function(e){return Sxe(Exe(e,void 0,xxe),e+"")},Axe=pxe;const Txe=s(Cxe(function(e,t){return null==e?{}:Axe(e,t)}));var Dxe=function(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(i);++n<i;)s[n]=e[n+t];return s},kxe=Qpe,Pxe=Dxe,Bxe=function(e,t){return t.length<2?e:kxe(e,Pxe(t,0,-1))},Oxe=Xpe,Rxe=cme,Fxe=Bxe,Ixe=Kpe,Mxe=function(e,t){return t=Oxe(t,e),null==(e=Fxe(e,t))||delete e[Ixe(Rxe(t))]},Nxe=Wce,Lxe=Xhe,Uxe=yye,jxe=Mxe,zxe=Xpe,Vxe=hde,Gxe=function(e){return Nxe(e)?void 0:e},Hxe=vge,$xe=Cxe(function(e,t){var r={};if(null==e)return r;var n=!1;t=Lxe(t,function(t){return t=zxe(t,e),n||(n=t.length>1),t}),Vxe(e,Hxe(e),r),n&&(r=Uxe(r,7,Gxe));for(var i=t.length;i--;)jxe(r,t[i]);return r});const Wxe=s($xe);var qxe=Object.prototype.hasOwnProperty;function Xxe(e,t,r){for(r of e.keys())if(Yxe(r,t))return r}function Yxe(e,t){var r,n,i;if(e===t)return!0;if(e&&t&&(r=e.constructor)===t.constructor){if(r===Date)return e.getTime()===t.getTime();if(r===RegExp)return e.toString()===t.toString();if(r===Array){if((n=e.length)===t.length)for(;n--&&Yxe(e[n],t[n]););return-1===n}if(r===Set){if(e.size!==t.size)return!1;for(n of e){if((i=n)&&"object"==typeof i&&!(i=Xxe(t,i)))return!1;if(!t.has(i))return!1}return!0}if(r===Map){if(e.size!==t.size)return!1;for(n of e){if((i=n[0])&&"object"==typeof i&&!(i=Xxe(t,i)))return!1;if(!Yxe(n[1],t.get(i)))return!1}return!0}if(r===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(r===DataView){if((n=e.byteLength)===t.byteLength)for(;n--&&e.getInt8(n)===t.getInt8(n););return-1===n}if(ArrayBuffer.isView(e)){if((n=e.byteLength)===t.byteLength)for(;n--&&e[n]===t[n];);return-1===n}if(!r||"object"==typeof e){for(r in n=0,e){if(qxe.call(e,r)&&++n&&!qxe.call(t,r))return!1;if(!(r in t)||!Yxe(e[r],t[r]))return!1}return Object.keys(t).length===n}}return e!=e&&t!=t}function Kxe(e,t){return W.useMemo(e,function(e){const t=W.useRef(e),r=W.useRef(0);return Yxe(e,t.current)||(t.current=e,r.current+=1),W.useMemo(()=>t.current,[r.current])}(t))}globalThis&&globalThis.__rest;const Zxe=e=>e,Jxe=e=>({_tag:"Left",value:e}),Qxe=e=>({_tag:"Right",value:e}),eEe={dimap:(e,t,r)=>n=>t(r(e(n))),first:e=>([t,r])=>[e(t),r],right:e=>t=>"Left"===t._tag?t:Qxe(e(t.value)),wander:e=>t=>t.map(e)},tEe={empty:()=>{},foldMap:(e,t)=>{for(let r=0;r<t.length;r++){const n=e(t[r]);if(null!=n)return n}}},rEe={empty:()=>[],foldMap:(e,t)=>{let r=[];return t.forEach(t=>{r=r.concat(e(t))}),r}},nEe=e=>({dimap:(e,t,r)=>t=>r(e(t)),first:e=>([t,r])=>e(t),right:t=>r=>"Left"===r._tag?e.empty():t(r.value),wander:t=>r=>e.foldMap(t,r)}),iEe={Equivalence:{Equivalence:"Equivalence",Iso:"Iso",Lens:"Lens",Prism:"Prism",Traversal:"Traversal",Getter:"Getter",AffineFold:"AffineFold",Fold:"Fold",Setter:"Setter"},Iso:{Equivalence:"Iso",Iso:"Iso",Lens:"Lens",Prism:"Prism",Traversal:"Traversal",Getter:"Getter",AffineFold:"AffineFold",Fold:"Fold",Setter:"Setter"},Lens:{Equivalence:"Lens",Iso:"Lens",Lens:"Lens",Prism:"Prism",Traversal:"Traversal",Getter:"Getter",AffineFold:"AffineFold",Fold:"Fold",Setter:"Setter"},Prism:{Equivalence:"Prism",Iso:"Prism",Lens:"Prism",Prism:"Prism",Traversal:"Traversal",Getter:"AffineFold",AffineFold:"AffineFold",Fold:"Fold",Setter:"Setter"},Traversal:{Equivalence:"Traversal",Iso:"Traversal",Lens:"Traversal",Prism:"Traversal",Traversal:"Traversal",Getter:"Fold",AffineFold:"Fold",Fold:"Fold",Setter:"Setter"},Getter:{Equivalence:"Getter",Iso:"Getter",Lens:"Getter",Prism:"AffineFold",Traversal:"Fold",Getter:"Getter",AffineFold:"AffineFold",Fold:"Fold",Setter:void 0},AffineFold:{Equivalence:"AffineFold",Iso:"AffineFold",Lens:"AffineFold",Prism:"AffineFold",Traversal:"Fold",Getter:"AffineFold",AffineFold:"AffineFold",Fold:"Fold",Setter:void 0},Fold:{Equivalence:"Fold",Iso:"Fold",Lens:"Fold",Prism:"Fold",Traversal:"Fold",Getter:"Fold",AffineFold:"Fold",Fold:"Fold",Setter:void 0},Setter:{Equivalence:void 0,Iso:void 0,Lens:void 0,Prism:void 0,Traversal:void 0,Getter:void 0,AffineFold:void 0,Fold:void 0,Setter:void 0}},sEe=(e,t)=>{const r=t;return r._tag=e,r},oEe=e=>(e._removable=!0,e);function aEe(e,t,r){if(2===arguments.length){const r=(r,n)=>e(r,t(r,n));return r._tag=iEe[e._tag][t._tag],r._removable=t._removable||!1,r}{const n=iEe[e._tag][t._tag],i=(n,i)=>e(n,t(n,r(n,i)));return i._tag=iEe[n][r._tag],i._removable=r._removable||!1,i}}const lEe=sEe("Equivalence",(e,t)=>t),uEe=(e,t)=>sEe("Iso",(r,n)=>r.dimap(e,t,n)),cEe=(e,t)=>sEe("Lens",(r,n)=>r.dimap(t=>[e(t),t],t,r.first(n))),dEe=(e,t)=>sEe("Prism",(r,n)=>r.dimap(e,e=>((e,t,r)=>"Left"===r._tag?e(r.value):t(r.value))(Zxe,t,e),r.right(n))),hEe=sEe("Traversal",(e,t)=>e.dimap(Zxe,Zxe,e.wander(t))),fEe=(e,t,r)=>e(eEe,t)(r),pEe=(e,t)=>e(nEe(rEe),e=>[e])(t),mEe=uEe(e=>e.map((e,t)=>[t,e]),e=>{const t=[...e].sort((e,t)=>e[0]-t[0]),r=[];for(let n=0;n<t.length;++n)n!==t.length-1&&t[n][0]===t[n+1][0]||r.push(t[n][1]);return r}),gEe=e=>cEe(t=>t[e],([t,r])=>Object.assign(Object.assign({},r),{[e]:t})),yEe=e=>cEe(t=>t[e],([t,r])=>{const n=r.slice();return n[e]=t,n}),vEe=yEe(0),_Ee=e=>dEe(t=>e(t)?Qxe(t):Jxe(t),Zxe),bEe=Symbol("__no_match__"),wEe=_Ee(e=>e!==bEe),xEe=Symbol("__remove_me__"),EEe=e=>oEe(aEe(cEe(t=>0<=e&&e<t.length?t[e]:bEe,([t,r])=>{if(t===bEe)return r;if(t===xEe)return"string"==typeof r?r.substring(0,e)+r.substring(e+1):[...r.slice(0,e),...r.slice(e+1)];if("string"==typeof r)return 0===e?t+r.substring(1):e===r.length?r.substring(0,e-1)+t:r.substring(0,e)+t+r.substring(e+1);{const n=r.slice();return n[e]=t,n}}),wEe)),SEe=dEe(e=>void 0===e?Jxe(void 0):Qxe(e),Zxe),CEe=cEe(e=>{},([e,t])=>void 0===e?t:[e,...t]),AEe=cEe(e=>{},([e,t])=>void 0===e?t:[...t,e]),TEe=aEe(uEe(e=>e.split(""),e=>e.join("")),hEe),DEe=aEe(uEe(e=>e.split(/\b/),e=>e.join("")),hEe,_Ee(e=>!/\s+/.test(e)));class kEe{constructor(e){this._ref=e}get _tag(){return this._ref._tag}get _removable(){return this._ref._removable}compose(e){return new kEe(aEe(this._ref,e._ref))}iso(e,t){return new kEe(aEe(this._ref,uEe(e,t)))}lens(e,t){return new kEe(aEe(this._ref,cEe(e,([e,r])=>t(r,e))))}indexed(){return new kEe(aEe(this._ref,mEe))}prop(e){return new kEe(aEe(this._ref,gEe(e)))}path(...e){return 1===e.length&&(e=e[0].split(".")),new kEe(e.reduce((e,t)=>aEe(e,gEe(t)),this._ref))}pick(e){return new kEe(aEe(this._ref,(e=>cEe(t=>{const r={};for(const n of e)r[n]=t[n];return r},([t,r])=>{const n=Object.assign({},r);for(const i of e)delete n[i];return Object.assign(n,t)}))(e)))}nth(e){return new kEe(aEe(this._ref,yEe(e)))}filter(e){return new kEe(aEe(this._ref,(e=>aEe(cEe(t=>{const r=t.map((t,r)=>e(t)?r:null).filter(e=>null!=e);return[r.map(e=>t[e]),r]},([[e,t],r])=>{const n=r.length,i=e.length;let s=0,o=0,a=0;const l=[];for(;s<n;)t[o]===s?(++o,a<i&&(l.push(e[a]),++a)):l.push(r[s]),++s;for(;a<i;)l.push(e[a++]);return l}),vEe))(e)))}valueOr(e){return new kEe(aEe(this._ref,(e=>cEe(t=>void 0===t?e:t,([e,t])=>e))(e)))}partsOf(e){const t="function"==typeof e?e(PEe):e;return new kEe(aEe(this._ref,(e=>aEe(cEe(t=>{const r=pEe(e,t);return[r,r.length]},([[t,r],n])=>{if(t.length!==r)throw new Error("cannot add/remove elements through partsOf");let i=0;return fEe(e,()=>t[i++],n)}),vEe))(t._ref)))}reread(e){return new kEe(aEe(this._ref,(e=>cEe(t=>e(t),([e,t])=>e))(e)))}rewrite(e){return new kEe(aEe(this._ref,(e=>cEe(e=>e,([t,r])=>e(t)))(e)))}optional(){return new kEe(aEe(this._ref,SEe))}guard_(){return e=>this.guard(e)}guard(e){return new kEe(aEe(this._ref,(e=>dEe(t=>e(t)?Qxe(t):Jxe(t),Zxe))(e)))}at(e){return new kEe(aEe(this._ref,EEe(e)))}head(){return new kEe(aEe(this._ref,EEe(0)))}index(e){return new kEe(aEe(this._ref,EEe(e)))}find(e){return new kEe(aEe(this._ref,(e=>oEe(aEe(cEe(t=>{const r=t.findIndex(e);return-1===r?[bEe,-1]:[t[r],r]},([[e,t],r])=>{if(e===bEe)return r;if(e===xEe)return[...r.slice(0,t),...r.slice(t+1)];const n=r.slice();return n[t]=e,n}),vEe,wEe)))(e)))}elems(){return new kEe(aEe(this._ref,hEe))}to(e){return new kEe(aEe(this._ref,(e=>sEe("Getter",(t,r)=>t.dimap(e,Zxe,r)))(e)))}when(e){return new kEe(aEe(this._ref,_Ee(e)))}chars(){return new kEe(aEe(this._ref,TEe))}words(){return new kEe(aEe(this._ref,DEe))}prependTo(){return new kEe(aEe(this._ref,CEe))}appendTo(){return new kEe(aEe(this._ref,AEe))}}const PEe=new kEe(lEe);function BEe(e){return t=>((e,t)=>e(nEe({}),Zxe)(t))(e._ref,t)}function OEe(e){return t=>((e,t)=>e(nEe(tEe),Zxe)(t))(e._ref,t)}function REe(e){return t=>r=>((e,t,r)=>e(eEe,()=>t)(r))(e._ref,t,r)}const FEe=(e,t,r)=>(t.has(r)?t:t.set(r,e())).get(r),IEe=new WeakMap;function MEe(e,t){return((e,t,r)=>{const n=FEe(()=>new WeakMap,IEe,t);return FEe(e,n,r)})(()=>{const r=t(PEe),n=iie(t=>{const n=t(e);return n instanceof Promise?n.then(e=>NEe(r,e)):NEe(r,n)},(t,n,i)=>{const s=(e=>"function"==typeof e)(i)?function(e){return t=>r=>fEe(e._ref,t,r)}(r)(i):REe(r)(i),o=t(e);return n(e,o instanceof Promise?o.then(s):s(o))});return n},e,t)}const NEe=(e,t)=>{if("Traversal"===e._tag){const r=function(e){return t=>pEe(e._ref,t)}(e)(t);return r}return"Prism"===e._tag?OEe(e)(t):BEe(e)(t)};var LEe=Object.defineProperty,UEe=Object.defineProperties,jEe=Object.getOwnPropertyDescriptors,zEe=Object.getOwnPropertySymbols,VEe=Object.prototype.hasOwnProperty,GEe=Object.prototype.propertyIsEnumerable,HEe=(e,t,r)=>t in e?LEe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$Ee=(e,t)=>{for(var r in t||(t={}))VEe.call(t,r)&&HEe(e,r,t[r]);if(zEe)for(var r of zEe(t))GEe.call(t,r)&&HEe(e,r,t[r]);return e},WEe=(e,t)=>UEe(e,jEe(t)),qEe=(e,t)=>{var r={};for(var n in e)VEe.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&zEe)for(var n of zEe(e))t.indexOf(n)<0&&GEe.call(e,n)&&(r[n]=e[n]);return r};function XEe(e){var t=e,{attributes:r,children:n,editor:i,leaf:s,nodeProps:o,text:a}=t,l=qEe(t,["attributes","children","editor","leaf","nodeProps","text"]);return W.createElement("span",$Ee($Ee({},r),l),n)}var YEe=["readOnly","onChange","decorate","renderElement","renderLeaf"],{PlateControllerProvider:KEe,plateControllerStore:ZEe,usePlateControllerStore:JEe}=Kie({activeId:iie(null),editorStores:iie({}),primaryEditorIds:iie([])},{name:"plateController"}),QEe=()=>JEe().set,eSe=e=>{const t=W.useMemo(()=>iie(t=>{const r=t(ZEe.atom.editorStores),n=e=>{var t;return e&&null!=(t=r[e])?t:null};if(e)return n(e);const i=[t(ZEe.atom.activeId),...t(ZEe.atom.primaryEditorIds)];for(const e of i){const t=n(e);if(t)return t}return null}),[e]);return JEe().get.atom(t)},{PlateProvider:tSe,plateStore:rSe,usePlateStore:nSe}=((e={})=>{var t=e,{id:r,decorate:n=null,editor:i,isMounted:s=!1,primary:o=!0,readOnly:a=null,renderElement:l=null,renderLeaf:u=null,versionDecorate:c=1,versionEditor:d=1,versionSelection:h=1,versionValue:f=1,onChange:p=null,onSelectionChange:m=null,onValueChange:g=null}=t,y=qEe(t,["id","decorate","editor","isMounted","primary","readOnly","renderElement","renderLeaf","versionDecorate","versionEditor","versionSelection","versionValue","onChange","onSelectionChange","onValueChange"]);return Kie($Ee({decorate:n,editor:i,isMounted:s,primary:o,readOnly:a,renderElement:l,renderLeaf:u,versionDecorate:c,versionEditor:d,versionSelection:h,versionValue:f,onChange:p,onSelectionChange:m,onValueChange:g},y),{extend:e=>({trackedEditor:iie(t=>({editor:t(e.editor),version:t(e.versionEditor)})),trackedSelection:iie(t=>({selection:t(e.editor).selection,version:t(e.versionSelection)})),trackedValue:iie(t=>({value:t(e.editor).children,version:t(e.versionValue)}))}),name:"plate"})})(),iSe=(e,{debugHookName:t="usePlateEditorStore"}={})=>{var r;const n=null!=(r=nSe(e).store({warnIfNoStore:!1}))?r:null,[i]=W.useState(!!n),s=i?n:eSe(e),o=!!JEe().store({warnIfNoStore:!1}),a=W.useMemo(()=>bie(),[]);if(!s){if(o)return a;throw new Error(`${t} must be used inside a Plate or PlateController`)}return s},sSe=(e,t)=>{const r=iSe(e,$Ee({debugHookName:"usePlateSelectors"},t));return nSe({store:r}).get},oSe=(e,t)=>{const r=iSe(e,$Ee({debugHookName:"usePlateActions"},t));return nSe({store:r}).set},aSe=(e,t,r={})=>{const n=W.useRef(1),i=oSe(t,$Ee({debugHookName:"useIncrementVersion"},r))[e]();return W.useCallback(()=>{const e=n.current+1;i(e),n.current=e},[i])};function lSe(e,...t){return khe({},e,...t,(e,t,r)=>Array.isArray(t)?t:"options"===r?$Ee($Ee({},e),t):void 0)}function uSe(e){return"function"==typeof e}function cSe(e={}){var t;let r,n;uSe(e)?(r={key:""},n=t=>e(t)):r=e;const i=null!=(t=r.key)?t:"",s=lSe({key:i,__apiExtensions:[],__configuration:null,__extensions:n?[n]:[],__optionExtensions:[],api:{},dependencies:[],editor:{},inject:{},node:{type:i},options:{},override:{},parser:{},parsers:{},plugins:[],priority:100,render:{},shortcuts:{},transforms:{},handlers:{}},e);return s.configure=e=>{const t=$Ee({},s);return t.__configuration=t=>uSe(e)?e(t):e,cSe(t)},s.configurePlugin=(e,t)=>{const r=$Ee({},s),n=r=>{let i=!1;const s=r.map(r=>{if(r.key===e.key)return i=!0,cSe(WEe($Ee({},r),{__configuration:e=>uSe(t)?t(e):t}));if(r.plugins&&r.plugins.length>0){const e=n(r.plugins);if(e.found)return i=!0,WEe($Ee({},r),{plugins:e.plugins})}return r});return{found:i,plugins:s}},i=n(r.plugins);return r.plugins=i.plugins,cSe(r)},s.extendEditorApi=e=>{const t=$Ee({},s);return t.__apiExtensions=[...t.__apiExtensions,{extension:e,isPluginSpecific:!1}],cSe(t)},s.extendOptions=e=>{const t=$Ee({},s);return t.__optionExtensions=[...t.__optionExtensions,e],cSe(t)},s.extendApi=e=>{const t=$Ee({},s);return t.__apiExtensions=[...t.__apiExtensions,{extension:e,isPluginSpecific:!0}],cSe(t)},s.extendEditorTransforms=e=>{const t=$Ee({},s);return t.__apiExtensions=[...t.__apiExtensions,{extension:e,isPluginSpecific:!1,isTransform:!0}],cSe(t)},s.extendTransforms=e=>{const t=$Ee({},s);return t.__apiExtensions=[...t.__apiExtensions,{extension:e,isPluginSpecific:!0,isTransform:!0}],cSe(t)},s.extend=e=>{let t=$Ee({},s);return uSe(e)?t.__extensions=[...t.__extensions,e]:t=lSe(t,e),cSe(t)},s.clone=()=>lSe(s),s.extendPlugin=(e,t)=>{const r=$Ee({},s),n=r=>{let i=!1;const s=r.map(r=>{if(r.key===e.key)return i=!0,cSe(WEe($Ee({},r),{__extensions:[...r.__extensions,e=>uSe(t)?t(e):t]}));if(r.plugins&&r.plugins.length>0){const e=n(r.plugins);if(e.found)return i=!0,WEe($Ee({},r),{plugins:e.plugins})}return r});return{found:i,plugins:s}},i=n(r.plugins);return r.plugins=i.plugins,i.found||r.plugins.push(cSe({key:e.key,__extensions:[e=>uSe(t)?t(e):t]})),cSe(r)},s}function dSe(e={}){return cSe(e)}var hSe=({apply:e,node:t,path:r=[],query:n,source:i})=>{Uae([t,r],n)&&e(t,i instanceof Function?i():i),Mae(t)&&t.children.forEach((t,s)=>{hSe({apply:e,node:t,path:r.concat([s]),query:n,source:i})})},fSe=(e,t)=>{const r=[];return[...e.pluginList].reverse().forEach(e=>{var n;const i=null==(n=e.inject.plugins)?void 0:n[t.key];i&&r.push(i)}),[t,...r]},pSe={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",insertSoftBreak:"shift+enter",italic:"mod+i",moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",splitBlock:"enter",tab:"tab",undo:"mod+z",untab:"shift+tab"},mSe={deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},gSe={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},ySe=e=>{const t=pSe[e],r=mSe[e],n=gSe[e],i=t&&Vhe(t),s=r&&Vhe(r),o=n&&Vhe(n);return e=>!!(null==i?void 0:i(e))||!(!Kre||!(null==s?void 0:s(e)))||!(Kre||!(null==o?void 0:o(e)))},vSe={isBold:ySe("bold"),isCompose:ySe("compose"),isDeleteBackward:ySe("deleteBackward"),isDeleteForward:ySe("deleteForward"),isDeleteLineBackward:ySe("deleteLineBackward"),isDeleteLineForward:ySe("deleteLineForward"),isDeleteWordBackward:ySe("deleteWordBackward"),isDeleteWordForward:ySe("deleteWordForward"),isExtendBackward:ySe("extendBackward"),isExtendForward:ySe("extendForward"),isExtendLineBackward:ySe("extendLineBackward"),isExtendLineForward:ySe("extendLineForward"),isItalic:ySe("italic"),isMoveBackward:ySe("moveBackward"),isMoveForward:ySe("moveForward"),isMoveLineBackward:ySe("moveLineBackward"),isMoveLineForward:ySe("moveLineForward"),isMoveWordBackward:ySe("moveWordBackward"),isMoveWordForward:ySe("moveWordForward"),isRedo:ySe("redo"),isSoftBreak:ySe("insertSoftBreak"),isSplitBlock:ySe("splitBlock"),isTransposeCharacter:ySe("transposeCharacter"),isUndo:ySe("undo")};function _Se(e,t){const r=e.getPlugin(t);return{api:e.api,editor:e,getOption:(t,...n)=>e.getOption(r,t,...n),getOptions:()=>e.getOptions(r),plugin:r,setOption:(t,n)=>e.setOption(r,t,n),setOptions:t=>e.setOptions(r,t),tf:e.transforms,type:r.node.type}}var bSe=cSe({key:"ast",parser:{deserialize:({data:e})=>{const t=decodeURIComponent(window.atob(e));let r;try{r=JSON.parse(t)}catch(Ove){}return r},format:"application/x-slate-fragment"}}),wSe=cSe({key:"dom"}),xSe=cSe({key:"history",extendEditor:({editor:e})=>aae(e)}),ESe=cSe({key:"inlineVoid",extendEditor:({editor:e})=>{const{isInline:t,isVoid:r,markableVoid:n}=e,i=[],s=[],o=[];return e.pluginList.forEach(e=>{e.node.isInline&&s.push(e.node.type),e.node.isVoid&&i.push(e.node.type),e.node.isMarkableVoid&&o.push(e.node.type)}),e.isInline=e=>!!s.includes(e.type)||t(e),e.isVoid=e=>!!i.includes(e.type)||r(e),e.markableVoid=e=>!!o.includes(e.type)||n(e),e}}),SSe=cSe({key:"parser",extendEditor:({editor:e})=>{const{insertData:t}=e;return e.insertData=r=>{const n=[...e.pluginList].reverse().some(t=>{const n=t.parser;if(!n)return!1;const i=fSe(e,t),{deserialize:s,format:o,mimeTypes:a}=n;if(!o)return!1;const l=Array.isArray(o)?o:[o],u=a||l.map(e=>e.includes("/")?e:`text/${e}`);for(const c of u){let n=r.getData(c);if(!n)continue;if(!QSe(e,i,{data:n,dataTransfer:r}))continue;n=tCe(e,i,{data:n,dataTransfer:r});let o=null==s?void 0:s(WEe($Ee({},_Se(e,t)),{data:n,dataTransfer:r}));if((null==o?void 0:o.length)&&(o=rCe(e,i,{data:n,dataTransfer:r,fragment:o}),0!==o.length))return eCe(e,i,{data:n,dataTransfer:r,fragment:o}),!0}return!1});n||t(r)},e}}),CSe=class extends Error{constructor(e,t="DEFAULT"){super(`[${t}] ${e}`),this.type=t,this.name="PlateError"}},ASe=dSe({key:"debug",options:{isProduction:!0,logLevel:"error",logger:{error:(e,t,r)=>console.error(`${t?`[${t}] `:""}${e}`,r),info:(e,t,r)=>console.info(`${t?`[${t}] `:""}${e}`,r),log:(e,t,r)=>console.log(`${t?`[${t}] `:""}${e}`,r),warn:(e,t,r)=>console.warn(`${t?`[${t}] `:""}${e}`,r)},throwErrors:!0}}).extendEditorApi(({getOptions:e})=>{const t=["error","warn","info","log"],r=(r,n,i,s)=>{var o,a;const l=e();if((!l.isProduction||"log"!==r)&&t.indexOf(r)<=t.indexOf(l.logLevel)){if("error"===r&&l.throwErrors)throw n instanceof Error?n:new CSe(n,i);null==(a=(o=l.logger)[r])||a.call(o,n,i,s)}};return{debug:{error:(e,t,n)=>r("error",e,t,n),info:(e,t,n)=>r("info",e,t,n),log:(e,t,n)=>r("log",e,t,n),warn:(e,t,n)=>r("warn",e,t,n)}}}),TSe=e=>{((e,t)=>{Tme(e,$Ee({at:[],nodes:e.api.create.value()},t))})(e),e.history.undos=[],e.history.redos=[],e.operations=[]},DSe=(e,t,r)=>{var n;const{defaultType:i=e.getType(kSe),type:s}=t,o=null!=(n=null==r?void 0:r.at)?n:e.selection;if(!s||!o)return;const a=Vae(e,WEe($Ee({},r),{match:{type:s}}));a&&s===i||e.setNodes({type:a?i:s},{at:o})},kSe=cSe({key:"p",node:{isElement:!0},parsers:{html:{deserializer:{query:({element:e})=>"Consolas"!==e.style.fontFamily,rules:[{validNodeName:"P"}]}}}}),PSe=dSe({key:"slateNext",extendEditor:({editor:e})=>{const{apply:t,deleteBackward:r,deleteForward:n,deleteFragment:i}=e;e.prevSelection=null,e.currentKeyboardEvent=null;const s=()=>{Eme(e)&&Ame(e)};return e.deleteBackward=e=>{r(e),s()},e.deleteForward=e=>{n(e),s()},e.deleteFragment=e=>{i(e),s()},e.apply=r=>{if("set_selection"===r.type){const{properties:n}=r;return e.prevSelection=n,t(r),void(e.currentKeyboardEvent=null)}t(r)},e}}).extendEditorApi(({editor:e})=>({create:{block:(t,r)=>$Ee({children:[{text:""}],type:e.getType(kSe)},t)}})).extendEditorApi(({api:e})=>({create:{value:()=>[e.create.block()]}})).extendEditorTransforms(({editor:e})=>({reset:()=>{TSe(e)},setValue:t=>{let r=t;"string"==typeof t?r=e.api.html.deserialize({element:t}):t&&0!==t.length||(r=e.api.create.value()),Tme(e,{at:[],nodes:r})},toggle:{block:Jre(DSe,e),mark:Jre(Dme,e)}})),BSe=e=>e.nodeType===Node.ELEMENT_NODE,OSe=e=>e.nodeType===Node.TEXT_NODE,RSe=new Set(["A","ABBR","ACRONYM","B","BDI","BDO","BIG","BR","BUTTON","CANVAS","CITE","CODE","CONTENT","DATA","DEL","DFN","EM","EMBED","FONT","I","IFRAME","IMG","IMG","INPUT","INS","KBD","LABEL","MAP","MARK","MARQUEE","MENUITEM","METER","NOBR","OBJECT","OUTPUT","PICTURE","PORTAL","PROGRESS","Q","S","SAMP","SELECT","SHADOW","SMALL","SOURCE","SPAN","STRIKE","STRONG","SUB","SUP","TEXTAREA","TIME","TRACK","TT","U","VAR","VIDEO","WBR","math","svg"]),FSe=e=>{if(!BSe(e))return!1;const t=e,r=RSe.has(t.tagName),n=t.style.display.split(" ")[0];return""===n?r:!!n.startsWith("inline")||("inherit"===n&&t.parentElement?FSe(t.parentElement):!!["contents","initial","none","revert","revert-layer","unset"].includes(n)&&r)},ISe=e=>!!BSe(e)&&!FSe(e),MSe=e=>{e.inlineFormattingContext=null},NSe=(e,t)=>{const r=e.textContent||"",n=""===r.trim();!t.inlineFormattingContext&&n||(e=>{e.inlineFormattingContext?e.inlineFormattingContext.atStart=!1:e.inlineFormattingContext={atStart:!0,lastHasTrailingWhiteSpace:!1}})(t);const{whiteSpaceRule:i}=t,s="normal"!==i?"collapse":!t.inlineFormattingContext||t.inlineFormattingContext.atStart||t.inlineFormattingContext.lastHasTrailingWhiteSpace?"all":"collapse",o="normal"===i?"collapse":(e=>{let t=e;for(;;){if(t.nextSibling)t=t.nextSibling;else{if(t=t.parentElement,t&&ISe(t))return!0;t=(null==t?void 0:t.nextSibling)||null}if(!t)return!0;if(ISe(t))return!0;if((t.textContent||"").length>0)return!1}})(e)?"single-newline":"collapse",a={normal:!0,pre:!1,"pre-line":!0}[i],l=((e,{shouldCollapseWhiteSpace:t=!0,trimEnd:r="collapse",trimStart:n="collapse",whiteSpaceIncludesNewlines:i=!0}={})=>("all"===n&&(e=e.replace(/^\s+/,"")),"single-newline"===r&&(e=e.replace(/\n$/,"")),t&&(e=i?e.replaceAll(/\s+/g," "):(e=(e=e.replaceAll(/[^\S\n\r]+/g," ")).replaceAll(/^[^\S\n\r]+/gm,"")).replaceAll(/[^\S\n\r]+$/gm,"")),e))(r||"",{shouldCollapseWhiteSpace:a,trimEnd:o,trimStart:s,whiteSpaceIncludesNewlines:"pre-line"!==i});t.inlineFormattingContext&&a&&(t.inlineFormattingContext.lastHasTrailingWhiteSpace=l.endsWith(" ")),e.textContent=l},LSe=(e,t)=>{BSe(e)?jSe(e,t):OSe(e)?NSe(e,t):USe(e,t)},USe=(e,t)=>{const r=Array.from(e.childNodes);for(const n of r)LSe(n,t)},jSe=(e,t)=>{const r=FSe(e),n=t.whiteSpaceRule,i=(e=>{const t=e.style.whiteSpace;switch(t){case"normal":case"nowrap":return"normal";case"pre":case"pre-wrap":case"break-spaces":return"pre";case"pre-line":return"pre-line"}return"PRE"===e.tagName?"pre":"initial"===t?"normal":null})(e);i&&(t.whiteSpaceRule=i),r||MSe(t),USe(e,t),r||MSe(t),t.whiteSpaceRule=n},zSe=(e,t)=>Array.from(t.childNodes).flatMap($Se(e)),VSe=(e,t,{deserializeLeaf:r,element:n})=>{var i,s;const{node:{isElement:o,isLeaf:a,type:l},parsers:u}=t,c=null==(i=null==u?void 0:u.html)?void 0:i.deserializer;if(!c)return;const{attributeNames:d,isElement:h,isLeaf:f,query:p,rules:m}=c;let{parse:g}=c;const y=h||o,v=f||a;if(!r&&!y)return;if(r&&!v)return;if(m&&!m.some(({validAttribute:e,validClassName:r,validNodeName:i="*",validStyle:s})=>{var o;if(i){const e=qhe(i);if(e.length>0&&!e.includes(n.nodeName)&&"*"!==i)return!1}if(r&&!n.classList.contains(r))return!1;if(s)for(const[a,l]of Object.entries(s)){if(!qhe(l).includes(n.style[a])&&"*"!==l)return;if("*"===l&&!n.style[a])return;const e=null==(o=t.inject.nodeProps)?void 0:o.defaultNodeValue;if(e&&e===n.style[a])return!1}if(e)if("string"==typeof e){if(!n.getAttributeNames().includes(e))return!1}else for(const[t,a]of Object.entries(e)){const e=qhe(a),r=n.getAttribute(t);if(!Zre(r)||!e.includes(r))return!1}return!0}))return;if(p&&!p(WEe($Ee({},_Se(e,t)),{element:n})))return;if(!g)if(y)g=()=>({type:l});else{if(!v)return;g=()=>({[l]:!0})}let _=null!=(s=g(WEe($Ee({},_Se(e,t)),{element:n,node:{}})))?s:{};if(0!==Object.keys(_).length){if(fSe(e,t).forEach(r=>{var i,s,o,a;const l=null==(a=null==(o=null==(s=null==(i=r.parsers)?void 0:i.html)?void 0:s.deserializer)?void 0:o.parse)?void 0:a.call(o,WEe($Ee({},_Se(e,t)),{element:n,node:_}));l&&(_=$Ee($Ee({},_),l))}),d){const e={},t=n.getAttributeNames();for(const r of t)d.includes(r)&&(e[r]=n.getAttribute(r));Object.keys(e).length>0&&(_.attributes=e)}return WEe($Ee({},c),{node:_})}},GSe=(e,t)=>{var r;const n=((e,t)=>{let r;return[...e.pluginList].reverse().some(n=>(r=VSe(e,n,{element:t}),!!r)),r})(e,t);if(n){const{node:i,withoutChildren:s}=n;let o=null!=(r=i.children)?r:zSe(e,t);return(0===o.length||s)&&(o=[{text:""}]),Kme("element",i,o)}},HSe=(e,t)=>{const r=((e,t)=>{let r={};return[...e.pluginList].reverse().forEach(n=>{const i=VSe(e,n,{deserializeLeaf:!0,element:t});i&&(r=$Ee($Ee({},r),i.node))}),r})(e,t);return zSe(e,t).reduce((e,t)=>{if(!t)return e;if(bae(t))Object.keys(r).length>0&&(e=>{hSe(WEe($Ee({},e),{apply:Hhe}))})({node:t,query:{filter:([e])=>Aae(e)},source:r}),e.push(t);else{const n=$Ee({},r);Aae(t)&&t.text&&Object.keys(n).forEach(e=>{n[e]&&t[e]&&(n[e]=t[e])}),e.push(Kme("text",n,t))}return e},[])},$Se=e=>t=>{const r=(e=>{if(OSe(e))return e.textContent||""})(t);if(r)return r;if(!BSe(t))return null;const n=(e=>{if("BR"===e.nodeName)return"\n"})(t);if(n)return n;const i=((e,t)=>{if("BODY"===t.nodeName)return Kme("fragment",{},zSe(e,t))})(e,t);if(i)return i;const s=GSe(e,t);return s||HSe(e,t)},WSe=(e,{collapseWhiteSpace:t=!0,element:r})=>{"string"==typeof r&&(r=(e=>{const t=document.createElement("body");return t.innerHTML=e,t})(r)),t&&(r=(e=>{const t=e.cloneNode(!0);return jSe(t,{inlineFormattingContext:null,whiteSpaceRule:"normal"}),t})(r));const n=((e,t)=>$Se(e)(t))(e,r);return KSe(e,{descendants:n})},qSe=cSe({key:"html"}).extendApi(({editor:e})=>({deserialize:Jre(WSe,e)})).extend({parser:{deserialize:({api:e,data:t})=>{const r=(n=t,(new DOMParser).parseFromString(n,"text/html"));var n;return e.html.deserialize({element:r.body})},format:"text/html"}}),XSe=dSe({key:"length",extendEditor:({editor:e,getOptions:t})=>{const{apply:r}=e;return e.apply=n=>{Cae(e,()=>{r(n);const i=t();if(i.maxLength){const t=Bae(e,[]).length;if(t>i.maxLength){const r=t-i.maxLength;e.delete({distance:r,reverse:!0,unit:"character"})}}})},e}}),YSe=(e,t,r)=>(e=((e,t,r)=>{const n=((e,t)=>e.some((e,r,n)=>{const i=n[r-1];return 0!==r&&t(e)!==t(i)}))(e,t),{fragment:i}=e.reduce((e,i)=>{if(n&&t(i)){let t=e.precedingBlock;t||(t=r(),e.precedingBlock=t,e.fragment.push(t)),t.children.push(i)}else e.fragment.push(i),e.precedingBlock=null;return e},{fragment:[],precedingBlock:null});return i})(e=(e=>0===e.length?[{text:""}]:e)(e),t,r),e=e.map(e=>bae(e)?WEe($Ee({},e),{children:YSe(e.children,t,r)}):e),e),KSe=(e,{descendants:t})=>{const r=(e=>t=>Aae(t)||bae(t)&&e.isInline(t))(e),n=(e=>()=>({children:[],type:e}))(e.getType(kSe));return YSe(t,r,n)},ZSe=(e,t,r)=>{var n,i,s,o;const{key:a,inject:{nodeProps:l,targetPlugins:u}}=t,{className:c,element:d,style:h,text:f}=r,p=null!=d?d:f;if(!p)return;if(!l)return;const{classNames:m,defaultNodeValue:g,nodeKey:y=a,query:v,styleKey:_=y,transformClassName:b,transformNodeValue:w,transformProps:x,transformStyle:E,validNodeValues:S}=l,C=null==v?void 0:v(WEe($Ee($Ee({},l),_Se(e,t)),{nodeProps:r}));if(!C&&u&&bae(p)&&p.type&&!u.includes(((e,t)=>{var r;const n=Object.values(e.plugins).find(e=>e.node.type===t);return null!=(r=null==n?void 0:n.key)?r:t})(e,p.type)))return;const A=p[y];if(!C&&(!Zre(A)||S&&!S.includes(A)||A===g))return;const T=WEe($Ee($Ee({},r),_Se(e,t)),{nodeValue:A}),D=null!=(n=null==w?void 0:w(T))?n:A;T.value=D;let k={};return d&&(k.className=kf(c,`slate-${y}-${A}`)),((null==m?void 0:m[A])||b)&&(k.className=null!=(i=null==b?void 0:b(T))?i:kf(c,null==m?void 0:m[D])),_&&(k.style=null!=(s=null==E?void 0:E(T))?s:WEe($Ee({},h),{[_]:D})),x&&(k=null!=(o=x(WEe($Ee({},T),{props:k})))?o:k),k},JSe=(e,t)=>(e.pluginList.forEach(r=>{if(r.inject.nodeProps){const n=ZSe(e,r,t);n&&(t=$Ee($Ee({},t),n))}}),WEe($Ee({},t),{editor:e})),QSe=(e,t,{data:r,dataTransfer:n})=>t.every(t=>{var i;const s=null==(i=t.parser)?void 0:i.query;return!s||s(WEe($Ee({},_Se(e,t)),{data:r,dataTransfer:n}))}),eCe=(e,t,r)=>{var n=r,{fragment:i}=n,s=qEe(n,["fragment"]);Cae(e,()=>{t.some(t=>{var r,n;return!0===(null==(n=null==(r=t.parser)?void 0:r.preInsert)?void 0:n.call(r,$Ee(WEe($Ee({},_Se(e,t)),{fragment:i}),s)))}),e.insertFragment(i)})},tCe=(e,t,{data:r,dataTransfer:n})=>(t.forEach(t=>{var i;const s=null==(i=t.parser)?void 0:i.transformData;s&&(r=s(WEe($Ee({},_Se(e,t)),{data:r,dataTransfer:n})))}),r),rCe=(e,t,r)=>{var n=r,{fragment:i}=n,s=qEe(n,["fragment"]);return t.forEach(t=>{var r;const n=null==(r=t.parser)?void 0:r.transformFragment;n&&(i=n($Ee($Ee({fragment:i},s),_Se(e,t))))}),i},nCe=(e,t)=>{var r,n,i,s;let o=lSe({},t);if(o.__resolved=!0,o.__configuration){const t=o.__configuration(_Se(e,o));o=lSe(o,t),delete o.__configuration}o.__extensions&&o.__extensions.length>0&&(o.__extensions.forEach(t=>{o=lSe(o,t(_Se(e,o)))}),o.__extensions=[]);const a=null==(r=o.inject)?void 0:r.targetPluginToInject,l=null==(n=o.inject)?void 0:n.targetPlugins;return a&&l&&l.length>0&&(o.inject=o.inject||{},o.inject.plugins=Hhe({},o.inject.plugins,Object.fromEntries(l.map(t=>[t,a(WEe($Ee({},_Se(e,o)),{targetPlugin:t}))])))),(null==(i=o.node)?void 0:i.component)&&(o.render.node=o.node.component),(null==(s=o.render)?void 0:s.node)&&(o.node.component=o.render.node),iCe(e,o),o},iCe=(e,t)=>{t.__extensions||e.api.debug.error(`Invalid plugin '${t.key}', you should use createSlatePlugin.`,"USE_CREATE_PLUGIN"),t.node.isElement&&t.node.isLeaf&&e.api.debug.error(`Plugin ${t.key} cannot be both an element and a leaf.`,"PLUGIN_NODE_TYPE")},sCe=e=>{e.pluginList.forEach(t=>{let r=Yye(t.key)(t.options,{immer:{enableMapSet:!0}});t.__optionExtensions&&t.__optionExtensions.length>0&&t.__optionExtensions.forEach(n=>{const i=n(_Se(e,t));r=r.extendSelectors(()=>i)}),t.optionsStore=r})},oCe=e=>{const t=[];e.pluginList.forEach(r=>{Object.entries(r.api).forEach(([t,r])=>{e.api[t]=r}),r.__apiExtensions&&r.__apiExtensions.length>0&&(r.__apiExtensions.forEach(({extension:t,isPluginSpecific:n,isTransform:i})=>{const s=t(_Se(e,r));i?n?(e.transforms[r.key]||(e.transforms[r.key]={}),r.transforms[r.key]||(r.transforms[r.key]={}),Hhe(e.transforms[r.key],s),Hhe(r.transforms[r.key],s)):(Hhe(e.transforms,s),Hhe(r.transforms,s)):n?(e.api[r.key]||(e.api[r.key]={}),r.api[r.key]||(r.api[r.key]={}),Hhe(e.api[r.key],s),Hhe(r.api[r.key],s)):(Hhe(e.api,s),Hhe(r.api,s))}),delete r.__apiExtensions),Object.entries(r.shortcuts).forEach(([e,n])=>{var i;if(null===n){const r=t.findIndex(t=>t.key===e);-1!==r&&t.splice(r,1)}else{const s=null!=(i=n.priority)?i:r.priority,o=t.findIndex(t=>t.key===e);(-1===o||s>=t[o].priority)&&(-1!==o&&t.splice(o,1),t.push({key:e,hotkey:n,priority:s}))}})}),t.sort((e,t)=>t.hotkey.priority-e.hotkey.priority),e.shortcuts=Object.fromEntries(t.map(({key:e,hotkey:t})=>[e,qEe(t,["priority"])]))},aCe=(e,t)=>{const r=((e,t)=>{const r=new Map,n=t=>{const i=nCe(e,t),s=r.get(i.key);s?r.set(i.key,lSe(s,i)):r.set(i.key,i),i.plugins&&i.plugins.length>0&&i.plugins.forEach(n)};return t.forEach(n),r})(e,t),n=Array.from(r.values()).filter(e=>!1!==e.enabled);n.sort((e,t)=>t.priority-e.priority);const i=[],s=new Set,o=t=>{var n;s.has(t.key)||(s.add(t.key),null==(n=t.dependencies)||n.forEach(n=>{const i=r.get(n);i?o(i):e.api.debug.warn(`Plugin "${t.key}" depends on missing plugin "${n}"`,"PLUGIN_DEPENDENCY_MISSING")}),i.push(t))};return n.forEach(o),i},lCe=(e,t)=>{e.pluginList=t,e.plugins=Object.fromEntries(t.map(e=>[e.key,e]))},uCe=e=>{const t=e=>{let r=[...e];const n={},i={},s={};for(const t of e)t.override.enabled&&Object.assign(n,t.override.enabled),t.override.components&&Object.entries(t.override.components).forEach(([e,r])=>{(!i[e]||t.priority>i[e].priority)&&(i[e]={component:r,priority:t.priority})}),t.override.plugins&&Object.entries(t.override.plugins).forEach(([e,t])=>{s[e]=lSe(s[e],t),void 0!==t.enabled&&(n[e]=t.enabled)});return r=r.map(e=>{var t;let r=$Ee({},e);s[e.key]&&(r=lSe(r,s[e.key])),i[e.key]&&(!e.render.node&&!e.node.component||i[e.key].priority>e.priority)&&(r.render.node=i[e.key].component,r.node.component=i[e.key].component);const o=null!=(t=n[e.key])?t:r.enabled;return Zre(o)&&(r.enabled=o),r}),r.filter(e=>!1!==e.enabled).map(e=>WEe($Ee({},e),{plugins:t(e.plugins||[])}))};e.pluginList=t(e.pluginList),e.plugins=Object.fromEntries(e.pluginList.map(e=>[e.key,e]))},cCe=e=>`slate-${e}`,dCe=(e,t={})=>{var r,n,i=t,{id:s,autoSelect:o,maxLength:a,plugins:l=[],rootPlugin:u,selection:c,shouldNormalizeEditor:d,value:h}=i,f=qEe(i,["id","autoSelect","maxLength","plugins","rootPlugin","selection","shouldNormalizeEditor","value"]);const p=e;p.id=null!=s?s:p.id,p.key=null!=(r=p.key)?r:Math.random(),p.isFallback=!1,p.getApi=()=>p.api,p.getTransforms=()=>p.transforms,p.getPlugin=e=>function(e,t){let r=t;const n=e.plugins[t.key];return n||(r.node||(r=cSe(r)),r.__resolved?r:nCe(e,r))}(p,e),p.getType=e=>function(e,t){var r,n;const i=e.getPlugin(t);return null!=(n=null!=(r=i.node.type)?r:i.key)?n:""}(p,e),p.getInjectProps=e=>{var t,r;return null!=(r=null==(t=p.getPlugin(e).inject)?void 0:t.nodeProps)?r:{}},p.getOptionsStore=e=>p.getPlugin(e).optionsStore,p.getOptions=e=>p.getOptionsStore(e)?p.getOptionsStore(e).get.state():p.getPlugin(e).options,p.getOption=(e,t,...r)=>{const n=p.getOptionsStore(e);if(!n)return p.getPlugin(e).options[t];const i=n.get[t];if(i)return i(...r);p.api.debug.error(`editor.getOption: ${t} option is not defined in plugin ${e.key}.`,"OPTION_UNDEFINED")},p.setOption=(e,t,r)=>{const n=p.getOptionsStore(e);if(!n)return;const i=n.set[t];i?i(r):p.api.debug.error(`editor.setOption: ${t} option is not defined in plugin ${e.key}.`,"OPTION_UNDEFINED")},p.setOptions=(e,t)=>{const r=p.getOptionsStore(e);r&&("object"==typeof t?r.set.mergeState(t):"function"==typeof t&&r.set.state(t))};const m=(({maxLength:e,plugins:t=[]})=>{let r=[ASe,PSe,wSe,xSe,ESe,SSe,e?XSe.configure({options:{maxLength:e}}):XSe,qSe,bSe,kSe];const n=new Map(t.map(e=>[e.key,e]));return r=r.map(e=>{const r=n.get(e.key);if(r){const n=t.findIndex(t=>t.key===e.key);return-1!==n&&t.splice(n,1),r}return e}),r})({maxLength:a,plugins:l});let g=cSe(WEe($Ee({key:"root",priority:1e4},f),{plugins:[...m,...l]}));if(u&&(g=u(g)),((e,t=[])=>{e.pluginList=[],e.plugins={},e.api={},e.transforms={},e.tf=e.transforms,e.shortcuts={};const r=aCe(e,t);lCe(e,r),uCe(e),sCe(e),oCe(e),e.pluginList.forEach(t=>{t.extendEditor&&(e=t.extendEditor(_Se(e,t)))})})(p,[g]),"string"==typeof h?p.children=p.api.html.deserialize({element:h}):h&&(p.children=h),0===(null==(n=p.children)?void 0:n.length)&&(p.children=p.api.create.value()),c)p.selection=c;else if(o){const e="start"==("start"===o?"start":"end")?Pae(p,[]):kae(p,[]);Dae(p,e)}return h&&(e=>{const t=e.children;let r=_ye(t);e.pluginList.forEach(t=>{var n;const i=null==(n=t.normalizeInitialValue)?void 0:n.call(t,WEe($Ee({},_Se(e,t)),{value:r}));i&&(r=i)}),!wye(t,r)&&r&&(e.children=r)})(p),d&&((e,t)=>{Rse.normalize(e,t)})(p,{force:!0}),p},hCe=["configure","configurePlugin","extendEditorApi","extendApi","extendEditorTransforms","extend","extendPlugin"];function fCe(e,t){const r=$Ee({},e);return hCe.forEach(e=>{const t=r[e];r[e]=(...e)=>fCe(t(...e))}),r.withComponent=e=>r.extend({node:{component:e},render:{node:e}}),t?r.extend(t):r}var pCe=(e={})=>fCe(cSe(e));function mCe(e,t){return WEe($Ee({},_Se(e,t)),{useOption:(r,...n)=>e.useOption(t,r,...n)})}var gCe=e=>qEe(e,["api","editor","getOption","getOptions","plugin","setOption","setOptions","tf","type","useOption"]),yCe=function(e={}){return pCe(e)}({key:"plateApi",dependencies:["debug"]}).extendEditorApi(({editor:e})=>({redecorate:()=>{e.api.debug.warn("The method editor.api.redecorate() has not been overridden. This may cause unexpected behavior. Please ensure that all required editor methods are properly defined.","OVERRIDE_MISSING")}})),vCe=fCe(PSe,{handlers:{onKeyDown:({editor:e,event:t})=>{t.persist(),e.currentKeyboardEvent=t}}}),_Ce=Yye("event-editor")({blur:null,focus:null,last:null}),bCe=_Ce.set,wCe=_Ce.get;_Ce.use;var xCe=pCe({key:"eventEditor",handlers:{onBlur:({editor:e})=>{wCe.focus()===e.id&&bCe.focus(null),bCe.blur(e.id),document.dispatchEvent(new CustomEvent("blur-editor-event",{detail:{id:e.id}}))},onFocus:({editor:e})=>{bCe.focus(e.id),document.dispatchEvent(new CustomEvent("focus-editor-event",{detail:{id:e.id}}))}}}),ECe=e("dE",fCe(kSe,({editor:e,type:t})=>({shortcuts:{toggleParagraph:{keys:[[Yne,Xne,"0"],[Yne,Kne,"0"]],preventDefault:!0,handler:()=>{e.tf.toggle.block({type:t})}}}}))),SCe=cSe({key:"dom",extendEditor:({editor:e})=>Qwe(e)}).extendEditorTransforms(({editor:e})=>{const{reset:t}=e.tf;return{reset:()=>{const r=(e=>Bbe.isFocused(e))(e);t(),r&&((e,{edge:t="start"}={})=>{const r="start"===t?Pae(e,[]):kae(e,[]);txe(e,r)})(e,{edge:"start"})}}}),CCe=(e={})=>{var t=e,{editor:r=_ae()}=t;return((e,t={})=>{var r=t,{plugins:n=[]}=r,i=qEe(r,["plugins"]);const s=dCe(e,WEe($Ee({},i),{plugins:[vCe,SCe,xCe,yCe,ECe,...n]}));return s.useOptions=(e,t,r)=>{const n=s.getOptionsStore(e);return n||s.api.debug.error(`editor.useOptions: ${e.key} plugin is missing`,"PLUGIN_MISSING"),n.useStore(t,r)},s.useOption=(e,t,...r)=>{const n=s.getOptionsStore(e);n||s.api.debug.error(`editor.useOption: ${e.key} plugin is missing`,"PLUGIN_MISSING");const i=null==n?void 0:n.use[t];if(i)return i(...r);s.api.debug.error(`editor.useOption: ${t} option is not defined in plugin ${e.key}`,"OPTION_UNDEFINED")},s})(r,qEe(t,["editor"]))},ACe=["onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onDOMBeforeInput","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],TCe=({attributes:e,editor:t,plugin:r,props:n})=>{var i,s;let o={};r.node.props&&(o=null!=(i="function"==typeof r.node.props?r.node.props(n):r.node.props)?i:{}),!o.nodeProps&&e&&(o.nodeProps=Txe(e,null!=(s=r.node.dangerouslyAllowAttributes)?s:[])),(n=$Ee($Ee({},n),o)).nodeProps&&Object.keys(n.nodeProps).forEach(e=>{var t,r;void 0===(null==(t=n.nodeProps)?void 0:t[e])&&(null==(r=n.nodeProps)||delete r[e])});const{className:a}=n;return $Ee(WEe($Ee({},n),{className:kf(cCe(r.node.type),a)}),mCe(t,r))},DCe=e=>(t,r,{composing:n}={})=>!!ySe(e)(r)&&!!n===(e=>Bbe.isComposing(e))(t);WEe($Ee({},vSe),{isTab:DCe("tab"),isUntab:DCe("untab")});var kCe=(e,{editableProps:t,handlerKey:r})=>{const n=null==t?void 0:t[r],i=e.pluginList.filter(e=>{var t;return null==(t=e.handlers)?void 0:t[r]});if(0!==i.length||n)return t=>{const s=t instanceof Event?(e=>{let t=!1;return WEe($Ee({},e),{bubbles:e.bubbles,cancelable:e.cancelable,currentTarget:e.currentTarget,defaultPrevented:e.defaultPrevented,eventPhase:e.eventPhase,isDefaultPrevented:()=>e.defaultPrevented,isPropagationStopped:()=>t,isTrusted:e.isTrusted,nativeEvent:e,persist:()=>{throw new Error("persist is not implemented for synthetic events created using convertDomEventToSyntheticEvent")},preventDefault:()=>e.preventDefault(),stopPropagation:()=>{t=!0,e.stopPropagation()},target:e.target,timeStamp:e.timeStamp,type:e.type})})(t):t;return!!i.some(t=>{const n=(0,t.handlers[r])(WEe($Ee({},mCe(e,t)),{event:s}));return null!=n&&n})||((e,t)=>{if(!t)return!1;const r=t(e);return null!=r?r:e.isPropagationStopped()})(s,n)}},{ElementProvider:PCe,useElementStore:BCe}=Kie({element:null},{name:"element"}),OCe=(e,t)=>{const r=[];return e.pluginList.forEach(t=>{t.node.isElement&&r.push(((e,t)=>function(r){const{key:n,render:{node:i}}=t,{children:s,element:o}=r;if(o.type===t.node.type){const a=null!=i?i:mwe,l=e.pluginList.flatMap(e=>{var t,r;return null!=(r=null==(t=e.render)?void 0:t.aboveNodes)?r:[]}),u=e.pluginList.flatMap(e=>{var t,r;return null!=(r=null==(t=e.render)?void 0:t.belowNodes)?r:[]});r=TCe({attributes:o.attributes,editor:e,plugin:t,props:r});let c=s;u.forEach(e=>{const t=e(WEe($Ee({},r),{key:n}));t&&(c=t(WEe($Ee({},r),{children:c})))});let d=W.createElement(a,$Ee({},r),c);return l.forEach(e=>{const t=e(WEe($Ee({},r),{key:n}));t&&(d=t(WEe($Ee({},r),{children:d})))}),W.createElement(PCe,{element:o,scope:n},d)}})(e,t))}),function(n){const i=JSe(e,n);let s;return r.some(e=>(s=e(i),!!s)),s||(t?t(i):W.createElement(mwe,$Ee({},i)))}},RCe=(e,t)=>{const r=[];return e.pluginList.forEach(t=>{t.node.isLeaf&&t.key&&r.push(((e,t)=>function(r){var n;const{render:{node:i}}=t,{children:s,leaf:o}=r;if(o[null!=(n=t.node.type)?n:t.key]){const n=null!=i?i:XEe,a=TCe({attributes:o.attributes,editor:e,plugin:t,props:r});return W.createElement(n,$Ee({},a),s)}return s})(e,t))}),function(n){const i=JSe(e,n);return r.forEach(e=>{const t=e(i);void 0!==t&&(i.children=t)}),t?t(i):W.createElement(XEe,$Ee({},i))}},FCe=e("di",(e,t={})=>{var r;return null!=(r=sSe(e,$Ee({debugHookName:"useEditorRef"},t)).editor())?r:((e={})=>{const t=CCe(e);return t.isFallback=!0,t.apply=()=>{throw new Error("Cannot apply operations on the fallback editor. The fallback editor is used when a hook that depends on the Plate store was unable to locate a valid store. If you are using PlateController, use `useEditorMounted(id?: string)` or `!editor.isFallback` to ensure that a valid Plate store is available before attempting to call operations on the editor.")},t})()});function ICe({id:e,editableRef:t}){const r=FCe(e);return W.createElement(W.Fragment,null,Object.entries(r.shortcuts).map(([r,n])=>n&&Zre(n.keys)&&n.handler?W.createElement(MCe,{id:e,key:r,editableRef:t,hotkeyConfig:n}):null))}function MCe({id:e,editableRef:t,hotkeyConfig:r}){const n=FCe(e),i=r,{keys:s,handler:o}=i,a=qEe(i,["keys","handler"]),l=rie(s,(e,t)=>{o({editor:n,event:e,eventDetails:t})},$Ee({enableOnContentEditable:!0},a),[]);return $.useEffect(()=>{t.current&&l(t.current)},[l,t]),null}e("dn",(e="element")=>{const t=FCe(),r=BCe(e).get.element();return r||(t.api.debug.warn(`useElement(${e}) hook must be used inside the node component's context`,"USE_ELEMENT_CONTEXT"),{})});var NCe=({id:e})=>{const t=FCe(e),r=((e,t={})=>{const r=aSe("versionDecorate",e,$Ee({debugHookName:"useRedecorate"},t));return W.useCallback(()=>{r()},[r])})(e),n=nSe(e),i=Object.fromEntries(YEe.map(e=>[e,n.set[e]()])),s=W.useMemo(()=>i,[]);return W.useEffect(()=>{t.api.redecorate=r,t.setPlateState=(e,t)=>{var r;const n=s;null==(r=n[e])||r.call(n,t)}},[t,r,s]),null};function LCe({id:e,plugin:t}){var r;const n=FCe(e);return null==(r=t.useHooks)||r.call(t,mCe(n,t)),null}function UCe({id:e}){const t=sSe(e).editor(),r=oSe(e).isMounted();return W.useEffect(()=>(r(!0),()=>{r(!1)}),[r]),W.createElement(W.Fragment,null,t.pluginList.map(t=>W.createElement(LCe,{id:e,key:t.key,plugin:t})))}var jCe=W.memo(({id:e})=>{const t=xwe(),r=aSe("versionEditor",e);W.useEffect(()=>{r()});const n=aSe("versionSelection",e),i=W.useRef(t.selection),s=zCe(i.current,t.selection);return W.useEffect(()=>{s||n(),i.current=t.selection},[t.selection,s,n]),null}),zCe=(e,t)=>!e&&!t||!(!e||!t)&&xse.equals(e,t);function VCe({children:e,decorate:t,editor:r,primary:n,readOnly:i,renderElement:s,renderLeaf:o,onChange:a,onSelectionChange:l,onValueChange:u}){return W.createElement(tSe,{readOnly:i,onChange:a,onSelectionChange:l,onValueChange:u,decorate:t,editor:r,primary:n,renderElement:s,renderLeaf:o,scope:r.id},e)}var GCe=(e={})=>{const{id:t}=e,r=FCe(t),n=sSe(t),i=n.versionDecorate(),s=n.readOnly(),o=n.decorate(),a=n.renderLeaf(),l=n.renderElement(),u=W.useMemo(()=>((e,t)=>{const r=e.pluginList.filter(e=>e.decorate);if(0!==r.length||t)return n=>{let i=[];const s=e=>{(null==e?void 0:e.length)&&(i=[...i,...e])};return r.forEach(t=>{s(t.decorate(WEe($Ee({},mCe(e,t)),{entry:n})))}),t&&s(t({editor:e,entry:n})),i}})(r,null!=o?o:null==e?void 0:e.decorate),[null==e?void 0:e.decorate,r,o]),c=W.useMemo(()=>{if(i&&u)return e=>u(e)},[u,i]),d=W.useMemo(()=>OCe(r,null!=l?l:null==e?void 0:e.renderElement),[null==e?void 0:e.renderElement,r,l]),h=W.useMemo(()=>RCe(r,null!=a?a:null==e?void 0:e.renderLeaf),[null==e?void 0:e.renderLeaf,r,a]),f=Kxe(()=>{const t={decorate:c,renderElement:d,renderLeaf:h};return Zre(s)&&(t.readOnly=s),ACe.forEach(n=>{const i=kCe(r,{editableProps:e,handlerKey:n});i&&(t[n]=i)}),t},[c,e,d,h,s]);return Kxe(()=>$Ee($Ee({},Wxe(e,[...ACe,"renderElement","renderLeaf","decorate"])),f),[e,f])},HCe=({id:e})=>{const t=FCe(e),r=sSe(e).onChange(),n=sSe(e).onValueChange(),i=sSe(e).onSelectionChange(),s=W.useCallback(e=>{const n=((e,t)=>e.pluginList.some(r=>{const n=r.handlers.onChange;if(!n)return!1;const i=n(WEe($Ee({},mCe(e,r)),{value:t}));return null!=i&&i}))(t,e);n||null==r||r({editor:t,value:e})},[t,r]),o=W.useMemo(()=>e=>{null==n||n({editor:t,value:e})},[t,n]),a=W.useMemo(()=>e=>{null==i||i({editor:t,selection:e})},[t,i]);return W.useMemo(()=>({key:t.key,editor:t,initialValue:t.children,value:t.children,onChange:s,onSelectionChange:a,onValueChange:o}),[t,s,a,o])},$Ce=({id:e})=>{const t=sSe(void 0,{debugHookName:"useEditorId"}).editor().id,r=null!=e?e:t,n=W.useMemo(()=>MEe(ZEe.atom.editorStores,e=>e.prop(r)),[r]),i=QEe().atom(n,{warnIfNoStore:!1}),s=nSe(r).store(),o=sSe(r).primary(),a=QEe().primaryEditorIds({warnIfNoStore:!1}),l=$we(),u=QEe().activeId({warnIfNoStore:!1});return W.useEffect(()=>(i(null!=s?s:null),()=>{i(null),u(e=>e===r?null:e)}),[s,i,u,r]),W.useEffect(()=>{if(o)return a(e=>[...e,r]),()=>{a(e=>e.filter(e=>e!==r))}},[r,o,a]),W.useEffect(()=>{r&&l&&u(r)},[r,l,u]),null};function WCe({id:e,children:t}){var r;const n=HCe({id:e}),i=FCe(e);let s=W.createElement(Xwe,$Ee({},n),t);return null==(r=i.pluginList)||r.forEach(e=>{const{render:{aboveSlate:t}}=e;t&&(s=W.createElement(t,null,s))}),s}var qCe=e("cU",W.forwardRef((e,t)=>{var r=e,{renderEditable:n}=r,i=qEe(r,["renderEditable"]);const{id:s}=i,o=FCe(s);if(!o)throw new Error("Editor not found. Please ensure that PlateContent is rendered below Plate.");const a=GCe(i),l=$.useRef(null),u=hne(t,l),c=W.createElement(Nwe,$Ee({ref:u},a));let d=null,h=null;o.pluginList.forEach(e=>{const{render:{afterEditable:t,beforeEditable:r}}=e;t&&(d=W.createElement(W.Fragment,null,d,W.createElement(t,$Ee({},a)))),r&&(h=W.createElement(W.Fragment,null,h,W.createElement(r,$Ee({},a))))});let f=W.createElement(W.Fragment,null,h,n?n(c):c,W.createElement(NCe,{id:s}),W.createElement(ICe,{id:s,editableRef:l}),W.createElement(jCe,{id:s}),W.createElement(UCe,{id:s}),W.createElement($Ce,{id:s}),d);return o.pluginList.forEach(e=>{const{render:{aboveEditable:t}}=e;t&&(f=W.createElement(t,null,f))}),W.createElement(WCe,{id:s},f)}));qCe.displayName="PlateContent";var XCe=Object.defineProperty,YCe=Object.defineProperties,KCe=Object.getOwnPropertyDescriptors,ZCe=Object.getOwnPropertySymbols,JCe=Object.prototype.hasOwnProperty,QCe=Object.prototype.propertyIsEnumerable,eAe=(e,t,r)=>t in e?XCe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,tAe=(e,t)=>{for(var r in t||(t={}))JCe.call(t,r)&&eAe(e,r,t[r]);if(ZCe)for(var r of ZCe(t))QCe.call(t,r)&&eAe(e,r,t[r]);return e},rAe=(e,t)=>YCe(e,KCe(t)),nAe=(e,t)=>{var r={};for(var n in e)JCe.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&ZCe)for(var n of ZCe(e))t.indexOf(n)<0&&QCe.call(e,n)&&(r[n]=e[n]);return r},iAe=e("dr",W.forwardRef((e,t)=>{const{props:r,ref:n}=(e=>{const t=gCe(e),{attributes:r,element:n,elementToAttributes:i,nodeProps:s}=t,o=nAe(t,["attributes","element","elementToAttributes","nodeProps"]);return{props:rAe(tAe(tAe(tAe(tAe({},r),o),s),null==i?void 0:i(n)),{className:kf(e.className,null==s?void 0:s.className)}),ref:hne(e.ref,r.ref)}})(rAe(tAe({},e),{ref:t}));return W.createElement(cne,rAe(tAe({},r),{ref:n}))}));iAe.displayName="PlateElement";var sAe=W.forwardRef((e,t)=>{const{props:r,ref:n}=(e=>{const t=gCe(e),{attributes:r,leaf:n,leafToAttributes:i,nodeProps:s,text:o}=t,a=nAe(t,["attributes","leaf","leafToAttributes","nodeProps","text"]);return{props:rAe(tAe(tAe(tAe(tAe({},r),a),s),null==i?void 0:i(n)),{className:kf(e.className,null==s?void 0:s.className)}),ref:hne(e.ref,r.ref)}})(rAe(tAe({},e),{ref:t}));return W.createElement(dne,rAe(tAe({},r),{ref:n}))});sAe.displayName="PlateLeaf",e("dz",e=>{if(!e)return{props:{}};const{preventDefaultOnEnterKeydown:t}=e;return{props:{onKeyDownCapture:t?e=>(e=>{"Enter"!==e.key&&13!==e.keyCode||e.preventDefault()})(e):void 0}}});var oAe=rhe,aAe=kle,lAe=function e(t,r,n,i,s,o){return aAe(t)&&aAe(r)&&(o.set(r,t),oAe(t,r,void 0,e,o),o.delete(r)),t},uAe=ihe,cAe=lAe,dAe=Dhe;vhe(function(e){return e.push(void 0,cAe),uAe(dAe,void 0,e)});var hAe=Object.defineProperty,fAe=Object.defineProperties,pAe=Object.getOwnPropertyDescriptors,mAe=Object.getOwnPropertySymbols,gAe=Object.prototype.hasOwnProperty,yAe=Object.prototype.propertyIsEnumerable,vAe=(e,t,r)=>t in e?hAe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_Ae=(e,t)=>{for(var r in t||(t={}))gAe.call(t,r)&&vAe(e,r,t[r]);if(mAe)for(var r of mAe(t))yAe.call(t,r)&&vAe(e,r,t[r]);return e},bAe=(e,t)=>fAe(e,pAe(t)),wAe=(e,t)=>{var r={};for(var n in e)gAe.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&mAe)for(var n of mAe(e))t.indexOf(n)<0&&yAe.call(e,n)&&(r[n]=e[n]);return r};function xAe(e,...t){return khe({},e,...t,(e,t,r)=>Array.isArray(t)?t:"options"===r?_Ae(_Ae({},e),t):void 0)}function EAe(e){return"function"==typeof e}function SAe(e={}){var t;let r,n;EAe(e)?(r={key:""},n=t=>e(t)):r=e;const i=null!=(t=r.key)?t:"",s=xAe({key:i,__apiExtensions:[],__configuration:null,__extensions:n?[n]:[],__optionExtensions:[],api:{},dependencies:[],editor:{},inject:{},node:{type:i},options:{},override:{},parser:{},parsers:{},plugins:[],priority:100,render:{},shortcuts:{},transforms:{},handlers:{}},e);return s.configure=e=>{const t=_Ae({},s);return t.__configuration=t=>EAe(e)?e(t):e,SAe(t)},s.configurePlugin=(e,t)=>{const r=_Ae({},s),n=r=>{let i=!1;const s=r.map(r=>{if(r.key===e.key)return i=!0,SAe(bAe(_Ae({},r),{__configuration:e=>EAe(t)?t(e):t}));if(r.plugins&&r.plugins.length>0){const e=n(r.plugins);if(e.found)return i=!0,bAe(_Ae({},r),{plugins:e.plugins})}return r});return{found:i,plugins:s}},i=n(r.plugins);return r.plugins=i.plugins,SAe(r)},s.extendEditorApi=e=>{const t=_Ae({},s);return t.__apiExtensions=[...t.__apiExtensions,{extension:e,isPluginSpecific:!1}],SAe(t)},s.extendOptions=e=>{const t=_Ae({},s);return t.__optionExtensions=[...t.__optionExtensions,e],SAe(t)},s.extendApi=e=>{const t=_Ae({},s);return t.__apiExtensions=[...t.__apiExtensions,{extension:e,isPluginSpecific:!0}],SAe(t)},s.extendEditorTransforms=e=>{const t=_Ae({},s);return t.__apiExtensions=[...t.__apiExtensions,{extension:e,isPluginSpecific:!1,isTransform:!0}],SAe(t)},s.extendTransforms=e=>{const t=_Ae({},s);return t.__apiExtensions=[...t.__apiExtensions,{extension:e,isPluginSpecific:!0,isTransform:!0}],SAe(t)},s.extend=e=>{let t=_Ae({},s);return EAe(e)?t.__extensions=[...t.__extensions,e]:t=xAe(t,e),SAe(t)},s.clone=()=>xAe(s),s.extendPlugin=(e,t)=>{const r=_Ae({},s),n=r=>{let i=!1;const s=r.map(r=>{if(r.key===e.key)return i=!0,SAe(bAe(_Ae({},r),{__extensions:[...r.__extensions,e=>EAe(t)?t(e):t]}));if(r.plugins&&r.plugins.length>0){const e=n(r.plugins);if(e.found)return i=!0,bAe(_Ae({},r),{plugins:e.plugins})}return r});return{found:i,plugins:s}},i=n(r.plugins);return r.plugins=i.plugins,i.found||r.plugins.push(SAe({key:e.key,__extensions:[e=>EAe(t)?t(e):t]})),SAe(r)},s}function CAe(e={}){return SAe(e)}var AAe=({apply:e,node:t,path:r=[],query:n,source:i})=>{Uae([t,r],n)&&e(t,i instanceof Function?i():i),Mae(t)&&t.children.forEach((t,s)=>{AAe({apply:e,node:t,path:r.concat([s]),query:n,source:i})})},TAe=(e,t)=>{const r=[];return[...e.pluginList].reverse().forEach(e=>{var n;const i=null==(n=e.inject.plugins)?void 0:n[t.key];i&&r.push(i)}),[t,...r]},DAe={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",insertSoftBreak:"shift+enter",italic:"mod+i",moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",splitBlock:"enter",tab:"tab",undo:"mod+z",untab:"shift+tab"},kAe={deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},PAe={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},BAe=e=>{const t=DAe[e],r=kAe[e],n=PAe[e],i=t&&Vhe(t),s=r&&Vhe(r),o=n&&Vhe(n);return e=>!!(null==i?void 0:i(e))||!(!Kre||!(null==s?void 0:s(e)))||!(Kre||!(null==o?void 0:o(e)))};function OAe(e,t){const r=e.getPlugin(t);return{api:e.api,editor:e,getOption:(t,...n)=>e.getOption(r,t,...n),getOptions:()=>e.getOptions(r),plugin:r,setOption:(t,n)=>e.setOption(r,t,n),setOptions:t=>e.setOptions(r,t),tf:e.transforms,type:r.node.type}}BAe("bold"),BAe("compose"),BAe("deleteBackward"),BAe("deleteForward"),BAe("deleteLineBackward"),BAe("deleteLineForward"),BAe("deleteWordBackward"),BAe("deleteWordForward"),BAe("extendBackward"),BAe("extendForward"),BAe("extendLineBackward"),BAe("extendLineForward"),BAe("italic"),BAe("moveBackward"),BAe("moveForward"),BAe("moveLineBackward"),BAe("moveLineForward"),BAe("moveWordBackward"),BAe("moveWordForward"),BAe("redo"),BAe("insertSoftBreak"),BAe("splitBlock"),BAe("transposeCharacter"),BAe("undo"),SAe({key:"ast",parser:{deserialize:({data:e})=>{const t=decodeURIComponent(window.atob(e));let r;try{r=JSON.parse(t)}catch(Ove){}return r},format:"application/x-slate-fragment"}}),SAe({key:"dom"}),SAe({key:"history",extendEditor:({editor:e})=>aae(e)}),SAe({key:"inlineVoid",extendEditor:({editor:e})=>{const{isInline:t,isVoid:r,markableVoid:n}=e,i=[],s=[],o=[];return e.pluginList.forEach(e=>{e.node.isInline&&s.push(e.node.type),e.node.isVoid&&i.push(e.node.type),e.node.isMarkableVoid&&o.push(e.node.type)}),e.isInline=e=>!!s.includes(e.type)||t(e),e.isVoid=e=>!!i.includes(e.type)||r(e),e.markableVoid=e=>!!o.includes(e.type)||n(e),e}}),SAe({key:"parser",extendEditor:({editor:e})=>{const{insertData:t}=e;return e.insertData=r=>{const n=[...e.pluginList].reverse().some(t=>{const n=t.parser;if(!n)return!1;const i=TAe(e,t),{deserialize:s,format:o,mimeTypes:a}=n;if(!o)return!1;const l=Array.isArray(o)?o:[o],u=a||l.map(e=>e.includes("/")?e:`text/${e}`);for(const c of u){let n=r.getData(c);if(!n)continue;if(!tTe(e,i,{data:n,dataTransfer:r}))continue;n=nTe(e,i,{data:n,dataTransfer:r});let o=null==s?void 0:s(bAe(_Ae({},OAe(e,t)),{data:n,dataTransfer:r}));if((null==o?void 0:o.length)&&(o=iTe(e,i,{data:n,dataTransfer:r,fragment:o}),0!==o.length))return rTe(e,i,{data:n,dataTransfer:r,fragment:o}),!0}return!1});n||t(r)},e}});var RAe=class extends Error{constructor(e,t="DEFAULT"){super(`[${t}] ${e}`),this.type=t,this.name="PlateError"}};CAe({key:"debug",options:{isProduction:!0,logLevel:"error",logger:{error:(e,t,r)=>console.error(`${t?`[${t}] `:""}${e}`,r),info:(e,t,r)=>console.info(`${t?`[${t}] `:""}${e}`,r),log:(e,t,r)=>console.log(`${t?`[${t}] `:""}${e}`,r),warn:(e,t,r)=>console.warn(`${t?`[${t}] `:""}${e}`,r)},throwErrors:!0}}).extendEditorApi(({getOptions:e})=>{const t=["error","warn","info","log"],r=(r,n,i,s)=>{var o,a;const l=e();if((!l.isProduction||"log"!==r)&&t.indexOf(r)<=t.indexOf(l.logLevel)){if("error"===r&&l.throwErrors)throw n instanceof Error?n:new RAe(n,i);null==(a=(o=l.logger)[r])||a.call(o,n,i,s)}};return{debug:{error:(e,t,n)=>r("error",e,t,n),info:(e,t,n)=>r("info",e,t,n),log:(e,t,n)=>r("log",e,t,n),warn:(e,t,n)=>r("warn",e,t,n)}}});var FAe=e=>{((e,t)=>{Tme(e,_Ae({at:[],nodes:e.api.create.value()},t))})(e),e.history.undos=[],e.history.redos=[],e.operations=[]},IAe=(e,t,r)=>{var n;const{defaultType:i=e.getType(MAe),type:s}=t,o=null!=(n=null==r?void 0:r.at)?n:e.selection;if(!s||!o)return;const a=Vae(e,bAe(_Ae({},r),{match:{type:s}}));a&&s===i||e.setNodes({type:a?i:s},{at:o})},MAe=SAe({key:"p",node:{isElement:!0},parsers:{html:{deserializer:{query:({element:e})=>"Consolas"!==e.style.fontFamily,rules:[{validNodeName:"P"}]}}}});CAe({key:"slateNext",extendEditor:({editor:e})=>{const{apply:t,deleteBackward:r,deleteForward:n,deleteFragment:i}=e;e.prevSelection=null,e.currentKeyboardEvent=null;const s=()=>{Eme(e)&&Ame(e)};return e.deleteBackward=e=>{r(e),s()},e.deleteForward=e=>{n(e),s()},e.deleteFragment=e=>{i(e),s()},e.apply=r=>{if("set_selection"===r.type){const{properties:n}=r;return e.prevSelection=n,t(r),void(e.currentKeyboardEvent=null)}t(r)},e}}).extendEditorApi(({editor:e})=>({create:{block:(t,r)=>_Ae({children:[{text:""}],type:e.getType(MAe)},t)}})).extendEditorApi(({api:e})=>({create:{value:()=>[e.create.block()]}})).extendEditorTransforms(({editor:e})=>({reset:()=>{FAe(e)},setValue:t=>{let r=t;"string"==typeof t?r=e.api.html.deserialize({element:t}):t&&0!==t.length||(r=e.api.create.value()),Tme(e,{at:[],nodes:r})},toggle:{block:Jre(IAe,e),mark:Jre(Dme,e)}}));var NAe=e=>e.nodeType===Node.ELEMENT_NODE,LAe=e=>e.nodeType===Node.TEXT_NODE,UAe=new Set(["A","ABBR","ACRONYM","B","BDI","BDO","BIG","BR","BUTTON","CANVAS","CITE","CODE","CONTENT","DATA","DEL","DFN","EM","EMBED","FONT","I","IFRAME","IMG","IMG","INPUT","INS","KBD","LABEL","MAP","MARK","MARQUEE","MENUITEM","METER","NOBR","OBJECT","OUTPUT","PICTURE","PORTAL","PROGRESS","Q","S","SAMP","SELECT","SHADOW","SMALL","SOURCE","SPAN","STRIKE","STRONG","SUB","SUP","TEXTAREA","TIME","TRACK","TT","U","VAR","VIDEO","WBR","math","svg"]),jAe=e=>{if(!NAe(e))return!1;const t=e,r=UAe.has(t.tagName),n=t.style.display.split(" ")[0];return""===n?r:!!n.startsWith("inline")||("inherit"===n&&t.parentElement?jAe(t.parentElement):!!["contents","initial","none","revert","revert-layer","unset"].includes(n)&&r)},zAe=e=>!!NAe(e)&&!jAe(e),VAe=e=>{e.inlineFormattingContext=null},GAe=(e,t)=>{const r=e.textContent||"",n=""===r.trim();!t.inlineFormattingContext&&n||(e=>{e.inlineFormattingContext?e.inlineFormattingContext.atStart=!1:e.inlineFormattingContext={atStart:!0,lastHasTrailingWhiteSpace:!1}})(t);const{whiteSpaceRule:i}=t,s="normal"!==i?"collapse":!t.inlineFormattingContext||t.inlineFormattingContext.atStart||t.inlineFormattingContext.lastHasTrailingWhiteSpace?"all":"collapse",o="normal"===i?"collapse":(e=>{let t=e;for(;;){if(t.nextSibling)t=t.nextSibling;else{if(t=t.parentElement,t&&zAe(t))return!0;t=(null==t?void 0:t.nextSibling)||null}if(!t)return!0;if(zAe(t))return!0;if((t.textContent||"").length>0)return!1}})(e)?"single-newline":"collapse",a={normal:!0,pre:!1,"pre-line":!0}[i],l=((e,{shouldCollapseWhiteSpace:t=!0,trimEnd:r="collapse",trimStart:n="collapse",whiteSpaceIncludesNewlines:i=!0}={})=>("all"===n&&(e=e.replace(/^\s+/,"")),"single-newline"===r&&(e=e.replace(/\n$/,"")),t&&(e=i?e.replaceAll(/\s+/g," "):(e=(e=e.replaceAll(/[^\S\n\r]+/g," ")).replaceAll(/^[^\S\n\r]+/gm,"")).replaceAll(/[^\S\n\r]+$/gm,"")),e))(r||"",{shouldCollapseWhiteSpace:a,trimEnd:o,trimStart:s,whiteSpaceIncludesNewlines:"pre-line"!==i});t.inlineFormattingContext&&a&&(t.inlineFormattingContext.lastHasTrailingWhiteSpace=l.endsWith(" ")),e.textContent=l},HAe=(e,t)=>{NAe(e)?WAe(e,t):LAe(e)?GAe(e,t):$Ae(e,t)},$Ae=(e,t)=>{const r=Array.from(e.childNodes);for(const n of r)HAe(n,t)},WAe=(e,t)=>{const r=jAe(e),n=t.whiteSpaceRule,i=(e=>{const t=e.style.whiteSpace;switch(t){case"normal":case"nowrap":return"normal";case"pre":case"pre-wrap":case"break-spaces":return"pre";case"pre-line":return"pre-line"}return"PRE"===e.tagName?"pre":"initial"===t?"normal":null})(e);i&&(t.whiteSpaceRule=i),r||VAe(t),$Ae(e,t),r||VAe(t),t.whiteSpaceRule=n},qAe=(e,t)=>Array.from(t.childNodes).flatMap(ZAe(e)),XAe=(e,t,{deserializeLeaf:r,element:n})=>{var i,s;const{node:{isElement:o,isLeaf:a,type:l},parsers:u}=t,c=null==(i=null==u?void 0:u.html)?void 0:i.deserializer;if(!c)return;const{attributeNames:d,isElement:h,isLeaf:f,query:p,rules:m}=c;let{parse:g}=c;const y=h||o,v=f||a;if(!r&&!y)return;if(r&&!v)return;if(m&&!m.some(({validAttribute:e,validClassName:r,validNodeName:i="*",validStyle:s})=>{var o;if(i){const e=qhe(i);if(e.length>0&&!e.includes(n.nodeName)&&"*"!==i)return!1}if(r&&!n.classList.contains(r))return!1;if(s)for(const[a,l]of Object.entries(s)){if(!qhe(l).includes(n.style[a])&&"*"!==l)return;if("*"===l&&!n.style[a])return;const e=null==(o=t.inject.nodeProps)?void 0:o.defaultNodeValue;if(e&&e===n.style[a])return!1}if(e)if("string"==typeof e){if(!n.getAttributeNames().includes(e))return!1}else for(const[t,a]of Object.entries(e)){const e=qhe(a),r=n.getAttribute(t);if(!Zre(r)||!e.includes(r))return!1}return!0}))return;if(p&&!p(bAe(_Ae({},OAe(e,t)),{element:n})))return;if(!g)if(y)g=()=>({type:l});else{if(!v)return;g=()=>({[l]:!0})}let _=null!=(s=g(bAe(_Ae({},OAe(e,t)),{element:n,node:{}})))?s:{};if(0!==Object.keys(_).length){if(TAe(e,t).forEach(r=>{var i,s,o,a;const l=null==(a=null==(o=null==(s=null==(i=r.parsers)?void 0:i.html)?void 0:s.deserializer)?void 0:o.parse)?void 0:a.call(o,bAe(_Ae({},OAe(e,t)),{element:n,node:_}));l&&(_=_Ae(_Ae({},_),l))}),d){const e={},t=n.getAttributeNames();for(const r of t)d.includes(r)&&(e[r]=n.getAttribute(r));Object.keys(e).length>0&&(_.attributes=e)}return bAe(_Ae({},c),{node:_})}},YAe=(e,t)=>{var r;const n=((e,t)=>{let r;return[...e.pluginList].reverse().some(n=>(r=XAe(e,n,{element:t}),!!r)),r})(e,t);if(n){const{node:i,withoutChildren:s}=n;let o=null!=(r=i.children)?r:qAe(e,t);return(0===o.length||s)&&(o=[{text:""}]),Kme("element",i,o)}},KAe=(e,t)=>{const r=((e,t)=>{let r={};return[...e.pluginList].reverse().forEach(n=>{const i=XAe(e,n,{deserializeLeaf:!0,element:t});i&&(r=_Ae(_Ae({},r),i.node))}),r})(e,t);return qAe(e,t).reduce((e,t)=>{if(!t)return e;if(bae(t))Object.keys(r).length>0&&(e=>{AAe(bAe(_Ae({},e),{apply:Hhe}))})({node:t,query:{filter:([e])=>Aae(e)},source:r}),e.push(t);else{const n=_Ae({},r);Aae(t)&&t.text&&Object.keys(n).forEach(e=>{n[e]&&t[e]&&(n[e]=t[e])}),e.push(Kme("text",n,t))}return e},[])},ZAe=e=>t=>{const r=(e=>{if(LAe(e))return e.textContent||""})(t);if(r)return r;if(!NAe(t))return null;const n=(e=>{if("BR"===e.nodeName)return"\n"})(t);if(n)return n;const i=((e,t)=>{if("BODY"===t.nodeName)return Kme("fragment",{},qAe(e,t))})(e,t);if(i)return i;const s=YAe(e,t);return s||KAe(e,t)},JAe=(e,{collapseWhiteSpace:t=!0,element:r})=>{"string"==typeof r&&(r=(e=>{const t=document.createElement("body");return t.innerHTML=e,t})(r)),t&&(r=(e=>{const t=e.cloneNode(!0);return WAe(t,{inlineFormattingContext:null,whiteSpaceRule:"normal"}),t})(r));const n=((e,t)=>ZAe(e)(t))(e,r);return eTe(e,{descendants:n})};SAe({key:"html"}).extendApi(({editor:e})=>({deserialize:Jre(JAe,e)})).extend({parser:{deserialize:({api:e,data:t})=>{const r=(n=t,(new DOMParser).parseFromString(n,"text/html"));var n;return e.html.deserialize({element:r.body})},format:"text/html"}}),CAe({key:"length",extendEditor:({editor:e,getOptions:t})=>{const{apply:r}=e;return e.apply=n=>{Cae(e,()=>{r(n);const i=t();if(i.maxLength){const t=Bae(e,[]).length;if(t>i.maxLength){const r=t-i.maxLength;e.delete({distance:r,reverse:!0,unit:"character"})}}})},e}});var QAe=(e,t,r)=>(e=((e,t,r)=>{const n=((e,t)=>e.some((e,r,n)=>{const i=n[r-1];return 0!==r&&t(e)!==t(i)}))(e,t),{fragment:i}=e.reduce((e,i)=>{if(n&&t(i)){let t=e.precedingBlock;t||(t=r(),e.precedingBlock=t,e.fragment.push(t)),t.children.push(i)}else e.fragment.push(i),e.precedingBlock=null;return e},{fragment:[],precedingBlock:null});return i})(e=(e=>0===e.length?[{text:""}]:e)(e),t,r),e=e.map(e=>bae(e)?bAe(_Ae({},e),{children:QAe(e.children,t,r)}):e),e),eTe=(e,{descendants:t})=>{const r=(e=>t=>Aae(t)||bae(t)&&e.isInline(t))(e),n=(e=>()=>({children:[],type:e}))(e.getType(MAe));return QAe(t,r,n)},tTe=(e,t,{data:r,dataTransfer:n})=>t.every(t=>{var i;const s=null==(i=t.parser)?void 0:i.query;return!s||s(bAe(_Ae({},OAe(e,t)),{data:r,dataTransfer:n}))}),rTe=(e,t,r)=>{var n=r,{fragment:i}=n,s=wAe(n,["fragment"]);Cae(e,()=>{t.some(t=>{var r,n;return!0===(null==(n=null==(r=t.parser)?void 0:r.preInsert)?void 0:n.call(r,_Ae(bAe(_Ae({},OAe(e,t)),{fragment:i}),s)))}),e.insertFragment(i)})},nTe=(e,t,{data:r,dataTransfer:n})=>(t.forEach(t=>{var i;const s=null==(i=t.parser)?void 0:i.transformData;s&&(r=s(bAe(_Ae({},OAe(e,t)),{data:r,dataTransfer:n})))}),r),iTe=(e,t,r)=>{var n=r,{fragment:i}=n,s=wAe(n,["fragment"]);return t.forEach(t=>{var r;const n=null==(r=t.parser)?void 0:r.transformFragment;n&&(i=n(_Ae(_Ae({fragment:i},s),OAe(e,t))))}),i};e("dF",CAe({key:"delete",extendEditor:({editor:e,getOptions:t})=>{const{deleteForward:r}=e;return e.deleteForward=n=>{if(!e.selection)return;const{query:i}=t(),s=!i||Uae(Eae(e),i);!(e=>Nae(e.selection))(e)&&wme(e)&&s?Tae(e):r(n)},e},options:{query:{allow:[MAe.key]}}})),CAe({key:"selectOnBackspace",extendEditor:({editor:e,getOptions:t})=>{const{deleteBackward:r}=e;return e.deleteBackward=n=>{const{selection:i}=e,{query:s,removeNodeIfEmpty:o}=t();if("character"===n&&(e=>!!e&&xse.isCollapsed(e))(i)){const t=((e,t,r)=>Rse.before(e,t,r))(e,i,{unit:n});if(t){const[a]=Sae(e,{at:t,match:e=>Uae([e,t.path],s)});if(a&&t){const r=((e,t,r)=>Rse.point(e,t,r))(e,i),n=((e,t)=>{try{for(let r=0;r<t.length;r++){const n=t[r];if(Aae(e)||!e.children[n])return null;e=e.children[n]}return e}catch(r){return null}})(e,r.path);o&&n&&!Iae(n)&&Tae(e),Dae(e,t)}else r(n)}else r(n)}else r(n)},e},options:{removeNodeIfEmpty:!1}});var sTe="horizontal",oTe=["horizontal","vertical"],aTe=$.forwardRef((e,t)=>{const{decorative:r,orientation:n=sTe,...i}=e,s=function(e){return oTe.includes(e)}(n)?n:sTe,o=r?{role:"none"}:{"aria-orientation":"vertical"===s?s:void 0,role:"separator"};return te.jsx(Wj.div,{"data-orientation":s,...o,...i,ref:t})});aTe.displayName="Separator";var lTe=aTe,uTe="Toolbar",[cTe,dTe]=Zj(uTe,[HH,lre]),hTe=HH(),fTe=lre(),[pTe,mTe]=cTe(uTe),gTe=$.forwardRef((e,t)=>{const{__scopeToolbar:r,orientation:n="horizontal",dir:i,loop:s=!0,...o}=e,a=hTe(r),l=tz(i);return te.jsx(pTe,{scope:r,orientation:n,dir:l,children:te.jsx(QH,{asChild:!0,...a,orientation:n,dir:l,loop:s,children:te.jsx(Wj.div,{role:"toolbar","aria-orientation":n,dir:l,...o,ref:t})})})});gTe.displayName=uTe;var yTe="ToolbarSeparator",vTe=$.forwardRef((e,t)=>{const{__scopeToolbar:r,...n}=e,i=mTe(yTe,r);return te.jsx(lTe,{orientation:"horizontal"===i.orientation?"vertical":"horizontal",...n,ref:t})});vTe.displayName=yTe;var _Te=$.forwardRef((e,t)=>{const{__scopeToolbar:r,...n}=e,i=hTe(r);return te.jsx(e$,{asChild:!0,...i,focusable:!e.disabled,children:te.jsx(Wj.button,{type:"button",...n,ref:t})})});_Te.displayName="ToolbarButton";var bTe=$.forwardRef((e,t)=>{const{__scopeToolbar:r,...n}=e,i=hTe(r);return te.jsx(e$,{asChild:!0,...i,focusable:!0,children:te.jsx(Wj.a,{...n,ref:t,onKeyDown:nz(e.onKeyDown,e=>{" "===e.key&&e.currentTarget.click()})})})});bTe.displayName="ToolbarLink";var wTe="ToolbarToggleGroup",xTe=e("d0",$.forwardRef((e,t)=>{const{__scopeToolbar:r,...n}=e,i=mTe(wTe,r),s=fTe(r);return te.jsx(wre,{"data-orientation":i.orientation,dir:i.dir,...s,...n,ref:t,rovingFocus:!1})}));xTe.displayName=wTe;var ETe=$.forwardRef((e,t)=>{const{__scopeToolbar:r,...n}=e,i=fTe(r),s={__scopeToolbar:e.__scopeToolbar};return te.jsx(_Te,{asChild:!0,...s,children:te.jsx(xre,{...i,...n,ref:t})})});ETe.displayName="ToolbarToggleItem",e("c$",gTe),e("d2",vTe),e("c_",_Te),e("d1",bTe),e("d3",ETe);var STe="horizontal",CTe=["horizontal","vertical"],ATe=$.forwardRef((e,t)=>{const{decorative:r,orientation:n=STe,...i}=e,s=function(e){return CTe.includes(e)}(n)?n:STe,o=r?{role:"none"}:{"aria-orientation":"vertical"===s?s:void 0,role:"separator"};return te.jsx(u3.div,{"data-orientation":s,...o,...i,ref:t})});ATe.displayName="Separator",e("cX",ATe);
/*!
			* tabbable 6.3.0
			* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
			*/
var TTe=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"].join(","),DTe="undefined"==typeof Element,kTe=DTe?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,PTe=!DTe&&Element.prototype.getRootNode?function(e){var t;return null==e||null===(t=e.getRootNode)||void 0===t?void 0:t.call(e)}:function(e){return null==e?void 0:e.ownerDocument},BTe=function(e,t){var r;void 0===t&&(t=!0);var n=null==e||null===(r=e.getAttribute)||void 0===r?void 0:r.call(e,"inert");return""===n||"true"===n||t&&e&&BTe(e.parentNode)},OTe=function(e,t,r){for(var n=[],i=Array.from(e);i.length;){var s=i.shift();if(!BTe(s,!1))if("SLOT"===s.tagName){var o=s.assignedElements(),a=o.length?o:s.children,l=OTe(a,!0,r);r.flatten?n.push.apply(n,l):n.push({scopeParent:s,candidates:l})}else{kTe.call(s,TTe)&&r.filter(s)&&(t||!e.includes(s))&&n.push(s);var u=s.shadowRoot||"function"==typeof r.getShadowRoot&&r.getShadowRoot(s),c=!BTe(u,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(s));if(u&&c){var d=OTe(!0===u?s.children:u.children,!0,r);r.flatten?n.push.apply(n,d):n.push({scopeParent:s,candidates:d})}else i.unshift.apply(i,s.children)}}return n},RTe=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},FTe=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||function(e){var t,r=null==e||null===(t=e.getAttribute)||void 0===t?void 0:t.call(e,"contenteditable");return""===r||"true"===r}(e))&&!RTe(e)?0:e.tabIndex},ITe=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},MTe=function(e){return"INPUT"===e.tagName},NTe=function(e){return function(e){return MTe(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var t,r=e.form||PTe(e),n=function(e){return r.querySelectorAll('input[type="radio"][name="'+e+'"]')};if("undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)t=n(window.CSS.escape(e.name));else try{t=n(e.name)}catch(mke){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",mke.message),!1}var i=function(e,t){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===t)return e[r]}(t,e.form);return!i||i===e}(e)},LTe=function(e){var t=e.getBoundingClientRect(),r=t.width,n=t.height;return 0===r&&0===n},UTe=function(e,t){var r=t.displayCheck,n=t.getShadowRoot;if("full-native"===r&&"checkVisibility"in e)return!e.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});if("hidden"===getComputedStyle(e).visibility)return!0;var i=kTe.call(e,"details>summary:first-of-type")?e.parentElement:e;if(kTe.call(i,"details:not([open]) *"))return!0;if(r&&"full"!==r&&"full-native"!==r&&"legacy-full"!==r){if("non-zero-area"===r)return LTe(e)}else{if("function"==typeof n){for(var s=e;e;){var o=e.parentElement,a=PTe(e);if(o&&!o.shadowRoot&&!0===n(o))return LTe(e);e=e.assignedSlot?e.assignedSlot:o||a===e.ownerDocument?o:a.host}e=s}if(function(e){var t,r,n,i,s=e&&PTe(e),o=null===(t=s)||void 0===t?void 0:t.host,a=!1;if(s&&s!==e)for(a=!!(null!==(r=o)&&void 0!==r&&null!==(n=r.ownerDocument)&&void 0!==n&&n.contains(o)||null!=e&&null!==(i=e.ownerDocument)&&void 0!==i&&i.contains(e));!a&&o;){var l,u,c;a=!(null===(u=o=null===(l=s=PTe(o))||void 0===l?void 0:l.host)||void 0===u||null===(c=u.ownerDocument)||void 0===c||!c.contains(o))}return a}(e))return!e.getClientRects().length;if("legacy-full"!==r)return!0}return!1},jTe=function(e,t){return!(t.disabled||BTe(t)||function(e){return MTe(e)&&"hidden"===e.type}(t)||UTe(t,e)||function(e){return"DETAILS"===e.tagName&&Array.prototype.slice.apply(e.children).some(function(e){return"SUMMARY"===e.tagName})}(t)||function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if("FIELDSET"===t.tagName&&t.disabled){for(var r=0;r<t.children.length;r++){var n=t.children.item(r);if("LEGEND"===n.tagName)return!!kTe.call(t,"fieldset[disabled] *")||!n.contains(e)}return!0}t=t.parentElement}return!1}(t))},zTe=function(e,t){return!(NTe(t)||FTe(t)<0||!jTe(e,t))},VTe=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},GTe=function(e){var t=[],r=[];return e.forEach(function(e,n){var i=!!e.scopeParent,s=i?e.scopeParent:e,o=function(e,t){var r=FTe(e);return r<0&&t&&!RTe(e)?0:r}(s,i),a=i?GTe(e.candidates):s;0===o?i?t.push.apply(t,a):t.push(s):r.push({documentOrder:n,tabIndex:o,item:e,isScope:i,content:a})}),r.sort(ITe).reduce(function(e,t){return t.isScope?e.push.apply(e,t.content):e.push(t.content),e},[]).concat(t)},HTe=function(e,t){var r;return r=(t=t||{}).getShadowRoot?OTe([e],t.includeContainer,{filter:zTe.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:VTe}):function(e,t,r){if(BTe(e))return[];var n=Array.prototype.slice.apply(e.querySelectorAll(TTe));return t&&kTe.call(e,TTe)&&n.unshift(e),n.filter(r)}(e,t.includeContainer,zTe.bind(null,t)),GTe(r)};const $Te={...q},WTe=$Te.useInsertionEffect||(e=>e());var qTe="undefined"!=typeof document?$.useLayoutEffect:$.useEffect;function XTe(){return XTe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},XTe.apply(this,arguments)}let YTe=!1,KTe=0;const ZTe=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+KTe++,JTe=$Te.useId||function(){const[e,t]=$.useState(()=>YTe?ZTe():void 0);return qTe(()=>{null==e&&t(ZTe())},[]),$.useEffect(()=>{YTe=!0},[]),e},QTe=$.createContext(null),eDe=$.createContext(null);function tDe(e){return"data-floating-ui-"+e}const rDe=()=>({getShadowRoot:!0,displayCheck:"function"==typeof ResizeObserver&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function nDe(e,t){const r=HTe(e,rDe());"prev"===t&&r.reverse();const n=r.indexOf(function(e){let t=e.activeElement;for(;null!=(null==(r=t)||null==(r=r.shadowRoot)?void 0:r.activeElement);){var r;t=t.shadowRoot.activeElement}return t}(function(e){return(null==e?void 0:e.ownerDocument)||document}(e)));return r.slice(n+1)[0]}function iDe(e,t){const r=t||e.currentTarget,n=e.relatedTarget;return!n||!function(e,t){if(!e||!t)return!1;const r=null==t.getRootNode?void 0:t.getRootNode();if(e.contains(t))return!0;if(r&&sG(r)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}(r,n)}function sDe(e){HTe(e,rDe()).forEach(e=>{e.dataset.tabindex=e.getAttribute("tabindex")||"",e.setAttribute("tabindex","-1")})}function oDe(e){e.querySelectorAll("[data-tabindex]").forEach(e=>{const t=e.dataset.tabindex;delete e.dataset.tabindex,t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")})}const aDe={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};function lDe(e){"Tab"===e.key&&(e.target,clearTimeout(void 0))}const uDe=$.forwardRef(function(e,t){const[r,n]=$.useState();qTe(()=>(/apple/i.test(navigator.vendor)&&n("button"),document.addEventListener("keydown",lDe),()=>{document.removeEventListener("keydown",lDe)}),[]);const i={ref:t,tabIndex:0,role:r,"aria-hidden":!r||void 0,[tDe("focus-guard")]:"",style:aDe};return $.createElement("span",XTe({},e,i))}),cDe=$.createContext(null),dDe=tDe("portal"),hDe=()=>$.useContext(cDe);function fDe(e){const{open:t=!1,onOpenChange:r,elements:n}=e,i=JTe(),s=$.useRef({}),[o]=$.useState(()=>function(){const e=new Map;return{emit(t,r){var n;null==(n=e.get(t))||n.forEach(e=>e(r))},on(t,r){e.set(t,[...e.get(t)||[],r])},off(t,r){var n;e.set(t,(null==(n=e.get(t))?void 0:n.filter(e=>e!==r))||[])}}}()),a=null!=((null==(l=$.useContext(QTe))?void 0:l.id)||null);var l;const[u,c]=$.useState(n.reference),d=function(e){const t=$.useRef(()=>{});return WTe(()=>{t.current=e}),$.useCallback(function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return null==t.current?void 0:t.current(...r)},[])}((e,t,n)=>{s.current.openEvent=e?t:void 0,o.emit("openchange",{open:e,event:t,reason:n,nested:a}),null==r||r(e,t,n)}),h=$.useMemo(()=>({setPositionReference:c}),[]),f=$.useMemo(()=>({reference:u||n.reference||null,floating:n.floating||null,domReference:n.reference}),[u,n.reference,n.floating]);return $.useMemo(()=>({dataRef:s,open:t,onOpenChange:d,elements:f,events:o,floatingId:i,refs:h}),[t,d,f,o,i,h])}function pDe(e){void 0===e&&(e={});const{nodeId:t}=e,r=fDe({...e,elements:{reference:null,floating:null,...e.elements}}),n=e.rootContext||r,i=n.elements,[s,o]=$.useState(null),[a,l]=$.useState(null),u=(null==i?void 0:i.domReference)||s,c=$.useRef(null),d=$.useContext(eDe);qTe(()=>{u&&(c.current=u)},[u]);const h=rH({...e,elements:{...i,...a&&{reference:a}}}),f=$.useCallback(e=>{const t=nG(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),contextElement:e}:e;l(t),h.refs.setReference(t)},[h.refs]),p=$.useCallback(e=>{(nG(e)||null===e)&&(c.current=e,o(e)),(nG(h.refs.reference.current)||null===h.refs.reference.current||null!==e&&!nG(e))&&h.refs.setReference(e)},[h.refs]),m=$.useMemo(()=>({...h.refs,setReference:p,setPositionReference:f,domReference:c}),[h.refs,p,f]),g=$.useMemo(()=>({...h.elements,domReference:u}),[h.elements,u]),y=$.useMemo(()=>({...h,...n,refs:m,elements:g,nodeId:t}),[h,m,g,t,n]);return qTe(()=>{n.dataRef.current.floatingContext=y;const e=null==d?void 0:d.nodesRef.current.find(e=>e.id===t);e&&(e.context=y)}),$.useMemo(()=>({...h,context:y,refs:m,elements:g}),[h,m,g,y])}var mDe=Object.defineProperty,gDe=Object.defineProperties,yDe=Object.getOwnPropertyDescriptors,vDe=Object.getOwnPropertySymbols,_De=Object.prototype.hasOwnProperty,bDe=Object.prototype.propertyIsEnumerable,wDe=(e,t,r)=>t in e?mDe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,xDe=(e,t)=>{for(var r in t||(t={}))_De.call(t,r)&&wDe(e,r,t[r]);if(vDe)for(var r of vDe(t))bDe.call(t,r)&&wDe(e,r,t[r]);return e},EDe=()=>({bottom:9999,height:0,left:-9999,right:9999,top:-9999,width:0,x:0,y:0}),SDe=e("dc",()=>{const e=window.getSelection();return!e||e.rangeCount<1?{bottom:9999,height:0,left:-9999,right:9999,top:-9999,width:0,x:0,y:0}:e.getRangeAt(0).getBoundingClientRect()}),CDe=(e("db",e=>{var t=e,{getBoundingClientRect:r=SDe}=t,n=((e,t)=>{var r={};for(var n in e)_De.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&vDe)for(var n of vDe(e))t.indexOf(n)<0&&bDe.call(e,n)&&(r[n]=e[n]);return r})(t,["getBoundingClientRect"]);const i=W.useRef({getBoundingClientRect:EDe}),[s,o]=W.useState(!0),a=pDe(xDe({whileElementsMounted:VG},n)),{middlewareData:l,refs:u,strategy:c,update:d,x:h,y:f}=a;return fne(()=>{i.current.getBoundingClientRect=r},[r,d]),fne(()=>{u.setReference(i.current)},[u]),fne(()=>{if(!(null==l?void 0:l.hide))return;const{referenceHidden:e}=l.hide;o(!e)},[l.hide]),((e,t)=>gDe(e,yDe(t)))(xDe({},a),{style:{display:!1===n.open?"none":void 0,left:null!=h?h:0,position:c,top:null!=f?f:0,visibility:s?void 0:"hidden"},virtualElementRef:i})}),"Switch"),[ADe,TDe]=Zj(CDe),[DDe,kDe]=ADe(CDe),PDe=$.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:i,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:u,form:c,...d}=e,[h,f]=$.useState(null),p=jj(t,e=>f(e)),m=$.useRef(!1),g=!h||c||!!h.closest("form"),[y,v]=Wz({prop:i,defaultProp:s??!1,onChange:u,caller:CDe});return te.jsxs(DDe,{scope:r,checked:y,disabled:a,children:[te.jsx(Wj.button,{type:"button",role:"switch","aria-checked":y,"aria-required":o,"data-state":FDe(y),"data-disabled":a?"":void 0,disabled:a,value:l,...d,ref:p,onClick:nz(e.onClick,e=>{v(e=>!e),g&&(m.current=e.isPropagationStopped(),m.current||e.stopPropagation())})}),g&&te.jsx(RDe,{control:h,bubbles:!m.current,name:n,value:l,checked:y,required:o,disabled:a,form:c,style:{transform:"translateX(-100%)"}})]})});PDe.displayName=CDe;var BDe="SwitchThumb",ODe=$.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,i=kDe(BDe,r);return te.jsx(Wj.span,{"data-state":FDe(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:t})});ODe.displayName=BDe;var RDe=$.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:n=!0,...i},s)=>{const o=$.useRef(null),a=jj(o,s),l=W3(r),u=fH(t);return $.useEffect(()=>{const e=o.current;if(!e)return;const t=window.HTMLInputElement.prototype,i=Object.getOwnPropertyDescriptor(t,"checked").set;if(l!==r&&i){const t=new Event("click",{bubbles:n});i.call(e,r),e.dispatchEvent(t)}},[l,r,n]),te.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:a,style:{...i.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function FDe(e){return e?"checked":"unchecked"}RDe.displayName="SwitchBubbleInput",e("dj",PDe),e("dk",ODe);var IDe="ToastProvider",[MDe,NDe,LDe]=qz("Toast"),[UDe,jDe]=Zj("Toast",[LDe]),[zDe,VDe]=UDe(IDe),GDe=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=e,[a,l]=$.useState(null),[u,c]=$.useState(0),d=$.useRef(!1),h=$.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${IDe}\`. Expected non-empty \`string\`.`),te.jsx(MDe.Provider,{scope:t,children:te.jsx(zDe,{scope:t,label:r,duration:n,swipeDirection:i,swipeThreshold:s,toastCount:u,viewport:a,onViewportChange:l,onToastAdd:$.useCallback(()=>c(e=>e+1),[]),onToastRemove:$.useCallback(()=>c(e=>e-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:h,children:o})})};GDe.displayName=IDe;var HDe="ToastViewport",$De=["F8"],WDe="toast.viewportPause",qDe="toast.viewportResume",XDe=$.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=$De,label:i="Notifications ({hotkey})",...s}=e,o=VDe(HDe,r),a=NDe(r),l=$.useRef(null),u=$.useRef(null),c=$.useRef(null),d=$.useRef(null),h=jj(t,d,o.onViewportChange),f=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),p=o.toastCount>0;$.useEffect(()=>{const e=e=>{0!==n.length&&n.every(t=>e[t]||e.code===t)&&d.current?.focus()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[n]),$.useEffect(()=>{const e=l.current,t=d.current;if(p&&e&&t){const r=()=>{if(!o.isClosePausedRef.current){const e=new CustomEvent(WDe);t.dispatchEvent(e),o.isClosePausedRef.current=!0}},n=()=>{if(o.isClosePausedRef.current){const e=new CustomEvent(qDe);t.dispatchEvent(e),o.isClosePausedRef.current=!1}},i=t=>{!e.contains(t.relatedTarget)&&n()},s=()=>{e.contains(document.activeElement)||n()};return e.addEventListener("focusin",r),e.addEventListener("focusout",i),e.addEventListener("pointermove",r),e.addEventListener("pointerleave",s),window.addEventListener("blur",r),window.addEventListener("focus",n),()=>{e.removeEventListener("focusin",r),e.removeEventListener("focusout",i),e.removeEventListener("pointermove",r),e.removeEventListener("pointerleave",s),window.removeEventListener("blur",r),window.removeEventListener("focus",n)}}},[p,o.isClosePausedRef]);const m=$.useCallback(({tabbingDirection:e})=>{const t=a().map(t=>{const r=t.ref.current,n=[r,...fke(r)];return"forwards"===e?n:n.reverse()});return("forwards"===e?t.reverse():t).flat()},[a]);return $.useEffect(()=>{const e=d.current;if(e){const t=t=>{const r=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!r){const r=document.activeElement,n=t.shiftKey;if(t.target===e&&n)return void u.current?.focus();const i=m({tabbingDirection:n?"backwards":"forwards"}),s=i.findIndex(e=>e===r);pke(i.slice(s+1))?t.preventDefault():n?u.current?.focus():c.current?.focus()}};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}},[a,m]),te.jsxs(iV,{ref:l,role:"region","aria-label":i.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:p?void 0:"none"},children:[p&&te.jsx(KDe,{ref:u,onFocusFromOutsideViewport:()=>{pke(m({tabbingDirection:"forwards"}))}}),te.jsx(MDe.Slot,{scope:r,children:te.jsx(Wj.ol,{tabIndex:-1,...s,ref:h})}),p&&te.jsx(KDe,{ref:c,onFocusFromOutsideViewport:()=>{pke(m({tabbingDirection:"backwards"}))}})]})});XDe.displayName=HDe;var YDe="ToastFocusProxy",KDe=$.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...i}=e,s=VDe(YDe,r);return te.jsx(X3,{tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:e=>{const t=e.relatedTarget;!s.viewport?.contains(t)&&n()}})});KDe.displayName=YDe;var ZDe="Toast",JDe=$.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:i,onOpenChange:s,...o}=e,[a,l]=Wz({prop:n,defaultProp:i??!0,onChange:s,caller:ZDe});return te.jsx(Yj,{present:r||a,children:te.jsx(tke,{open:a,...o,ref:t,onClose:()=>l(!1),onPause:Qj(e.onPause),onResume:Qj(e.onResume),onSwipeStart:nz(e.onSwipeStart,e=>{e.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:nz(e.onSwipeMove,e=>{const{x:t,y:r}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${r}px`)}),onSwipeCancel:nz(e.onSwipeCancel,e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:nz(e.onSwipeEnd,e=>{const{x:t,y:r}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${r}px`),l(!1)})})})});JDe.displayName=ZDe;var[QDe,eke]=UDe(ZDe,{onClose(){}}),tke=$.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:u,onSwipeStart:c,onSwipeMove:d,onSwipeCancel:h,onSwipeEnd:f,...p}=e,m=VDe(ZDe,r),[g,y]=$.useState(null),v=jj(t,e=>y(e)),_=$.useRef(null),b=$.useRef(null),w=i||m.duration,x=$.useRef(0),E=$.useRef(w),S=$.useRef(0),{onToastAdd:C,onToastRemove:A}=m,T=Qj(()=>{const e=g?.contains(document.activeElement);e&&m.viewport?.focus(),o()}),D=$.useCallback(e=>{e&&e!==1/0&&(window.clearTimeout(S.current),x.current=(new Date).getTime(),S.current=window.setTimeout(T,e))},[T]);$.useEffect(()=>{const e=m.viewport;if(e){const t=()=>{D(E.current),u?.()},r=()=>{const e=(new Date).getTime()-x.current;E.current=E.current-e,window.clearTimeout(S.current),l?.()};return e.addEventListener(WDe,r),e.addEventListener(qDe,t),()=>{e.removeEventListener(WDe,r),e.removeEventListener(qDe,t)}}},[m.viewport,w,l,u,D]),$.useEffect(()=>{s&&!m.isClosePausedRef.current&&D(w)},[s,w,m.isClosePausedRef,D]),$.useEffect(()=>(C(),()=>A()),[C,A]);const k=$.useMemo(()=>g?cke(g):null,[g]);return m.viewport?te.jsxs(te.Fragment,{children:[k&&te.jsx(rke,{__scopeToast:r,role:"status","aria-live":"foreground"===n?"assertive":"polite",children:k}),te.jsx(QDe,{scope:r,onClose:T,children:ld.createPortal(te.jsx(MDe.ItemSlot,{scope:r,children:te.jsx(nV,{asChild:!0,onEscapeKeyDown:nz(a,()=>{m.isFocusedToastEscapeKeyDownRef.current||T(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:te.jsx(Wj.li,{tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":m.swipeDirection,...p,ref:v,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:nz(e.onKeyDown,e=>{"Escape"===e.key&&(a?.(e.nativeEvent),e.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,T()))}),onPointerDown:nz(e.onPointerDown,e=>{0===e.button&&(_.current={x:e.clientX,y:e.clientY})}),onPointerMove:nz(e.onPointerMove,e=>{if(!_.current)return;const t=e.clientX-_.current.x,r=e.clientY-_.current.y,n=Boolean(b.current),i=["left","right"].includes(m.swipeDirection),s=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,o=i?s(0,t):0,a=i?0:s(0,r),l="touch"===e.pointerType?10:2,u={x:o,y:a},h={originalEvent:e,delta:u};n?(b.current=u,dke("toast.swipeMove",d,h,{discrete:!1})):hke(u,m.swipeDirection,l)?(b.current=u,dke("toast.swipeStart",c,h,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>l||Math.abs(r)>l)&&(_.current=null)}),onPointerUp:nz(e.onPointerUp,e=>{const t=b.current,r=e.target;if(r.hasPointerCapture(e.pointerId)&&r.releasePointerCapture(e.pointerId),b.current=null,_.current=null,t){const r=e.currentTarget,n={originalEvent:e,delta:t};hke(t,m.swipeDirection,m.swipeThreshold)?dke("toast.swipeEnd",f,n,{discrete:!0}):dke("toast.swipeCancel",h,n,{discrete:!0}),r.addEventListener("click",e=>e.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),rke=e=>{const{__scopeToast:t,children:r,...n}=e,i=VDe(ZDe,t),[s,o]=$.useState(!1),[a,l]=$.useState(!1);return function(e=()=>{}){const t=Qj(e);Xj(()=>{let e=0,r=0;return e=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(r)}},[t])}(()=>o(!0)),$.useEffect(()=>{const e=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(e)},[]),a?null:te.jsx(MH,{asChild:!0,children:te.jsx(X3,{...n,children:s&&te.jsxs(te.Fragment,{children:[i.label," ",r]})})})},nke=$.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return te.jsx(Wj.div,{...n,ref:t})});nke.displayName="ToastTitle";var ike=$.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return te.jsx(Wj.div,{...n,ref:t})});ike.displayName="ToastDescription";var ske="ToastAction",oke=$.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?te.jsx(uke,{altText:r,asChild:!0,children:te.jsx(lke,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${ske}\`. Expected non-empty \`string\`.`),null)});oke.displayName=ske;var ake="ToastClose",lke=$.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,i=eke(ake,r);return te.jsx(uke,{asChild:!0,children:te.jsx(Wj.button,{type:"button",...n,ref:t,onClick:nz(e.onClick,i.onClose)})})});lke.displayName=ake;var uke=$.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...i}=e;return te.jsx(Wj.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...i,ref:t})});function cke(e){const t=[];return Array.from(e.childNodes).forEach(e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){const r=e.ariaHidden||e.hidden||"none"===e.style.display,n=""===e.dataset.radixToastAnnounceExclude;if(!r)if(n){const r=e.dataset.radixToastAnnounceAlt;r&&t.push(r)}else t.push(...cke(e))}}),t}function dke(e,t,r,{discrete:n}){const i=r.originalEvent.currentTarget,s=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),n?qj(i,s):i.dispatchEvent(s)}var hke=(e,t,r=0)=>{const n=Math.abs(e.x),i=Math.abs(e.y),s=n>i;return"left"===t||"right"===t?s&&n>r:!s&&i>r};function fke(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function pke(e){const t=document.activeElement;return e.some(e=>e===t||(e.focus(),document.activeElement!==t))}e("dS",GDe),e("dM",XDe),e("dN",JDe),e("dQ",nke),e("dR",ike),e("dO",oke),e("dP",lke)}}});
